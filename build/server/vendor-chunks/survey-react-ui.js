/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/survey-react-ui";
exports.ids = ["vendor-chunks/survey-react-ui"];
exports.modules = {

/***/ "(ssr)/./node_modules/survey-react-ui/survey-react-ui.js":
/*!*********************************************************!*\
  !*** ./node_modules/survey-react-ui/survey-react-ui.js ***!
  \*********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("/*!\n * surveyjs - Survey JavaScript library v1.9.138\n * Copyright (c) 2015-2024 Devsoft Baltic OÃœ  - http://surveyjs.io/\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory(__webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\"), __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\"), __webpack_require__(/*! survey-core */ \"(ssr)/./node_modules/survey-core/survey.core.js\"));\n\telse {}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_react_dom__, __WEBPACK_EXTERNAL_MODULE_survey_core__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_1081__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __nested_webpack_require_1081__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__nested_webpack_require_1081__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__nested_webpack_require_1081__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__nested_webpack_require_1081__.d = function(exports, name, getter) {\n/******/ \t\tif(!__nested_webpack_require_1081__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__nested_webpack_require_1081__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__nested_webpack_require_1081__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __nested_webpack_require_1081__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__nested_webpack_require_1081__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __nested_webpack_require_1081__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__nested_webpack_require_1081__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__nested_webpack_require_1081__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__nested_webpack_require_1081__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__nested_webpack_require_1081__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __nested_webpack_require_1081__(__nested_webpack_require_1081__.s = \"./src/entries/react-ui.ts\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/actions/action.ts\":\n/*!*******************************!*\\\n  !*** ./src/actions/action.ts ***!\n  \\*******************************/\n/*! exports provided: createDropdownActionModel, createDropdownActionModelAdvanced, getActionDropdownButtonTarget, BaseAction, Action, ActionDropdownViewModel */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_4881__) {\n\n\"use strict\";\n__nested_webpack_require_4881__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_4881__.d(__nested_webpack_exports__, \"createDropdownActionModel\", function() { return createDropdownActionModel; });\n/* harmony export (binding) */ __nested_webpack_require_4881__.d(__nested_webpack_exports__, \"createDropdownActionModelAdvanced\", function() { return createDropdownActionModelAdvanced; });\n/* harmony export (binding) */ __nested_webpack_require_4881__.d(__nested_webpack_exports__, \"getActionDropdownButtonTarget\", function() { return getActionDropdownButtonTarget; });\n/* harmony export (binding) */ __nested_webpack_require_4881__.d(__nested_webpack_exports__, \"BaseAction\", function() { return BaseAction; });\n/* harmony export (binding) */ __nested_webpack_require_4881__.d(__nested_webpack_exports__, \"Action\", function() { return Action; });\n/* harmony export (binding) */ __nested_webpack_require_4881__.d(__nested_webpack_exports__, \"ActionDropdownViewModel\", function() { return ActionDropdownViewModel; });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_4881__(/*! ../base */ \"./src/base.ts\");\n/* harmony import */ var _surveyStrings__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_4881__(/*! ../surveyStrings */ \"./src/surveyStrings.ts\");\n/* harmony import */ var _jsonobject__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_4881__(/*! ../jsonobject */ \"./src/jsonobject.ts\");\n/* harmony import */ var _list__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_4881__(/*! ../list */ \"./src/list.ts\");\n/* harmony import */ var _popup__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_4881__(/*! ../popup */ \"./src/popup.ts\");\n/* harmony import */ var _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_4881__(/*! ../utils/cssClassBuilder */ \"./src/utils/cssClassBuilder.ts\");\n/* harmony import */ var _container__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_4881__(/*! ./container */ \"./src/actions/container.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = ( false) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\nfunction createDropdownActionModel(actionOptions, dropdownOptions, locOwner) {\n    return createDropdownActionModelAdvanced(actionOptions, dropdownOptions, dropdownOptions, locOwner);\n}\nfunction createDropdownActionModelAdvanced(actionOptions, listOptions, popupOptions, locOwner) {\n    var listModel = new _list__WEBPACK_IMPORTED_MODULE_3__[\"ListModel\"](listOptions.items, function (item) {\n        if (newAction.hasTitle) {\n            newAction.title = item.title;\n        }\n        listOptions.onSelectionChanged(item);\n        innerPopupModel.toggleVisibility();\n    }, listOptions.allowSelection, listOptions.selectedItem, listOptions.onFilterStringChangedCallback);\n    listModel.locOwner = locOwner;\n    var innerPopupModel = new _popup__WEBPACK_IMPORTED_MODULE_4__[\"PopupModel\"](\"sv-list\", { model: listModel }, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.verticalPosition, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.horizontalPosition, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.showPointer, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.isModal, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.onCancel, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.onApply, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.onHide, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.onShow, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.cssClass, popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.title, function () {\n        listModel.dispose();\n    });\n    innerPopupModel.displayMode = popupOptions === null || popupOptions === void 0 ? void 0 : popupOptions.displayMode;\n    var newActionOptions = Object.assign({}, actionOptions, {\n        component: \"sv-action-bar-item-dropdown\",\n        popupModel: innerPopupModel,\n        action: function (action, isUserAction) {\n            !!(actionOptions.action) && actionOptions.action();\n            innerPopupModel.isFocusedContent = !isUserAction || listModel.showFilter;\n            innerPopupModel.toggleVisibility();\n            listModel.scrollToSelectedItem();\n        },\n    });\n    var newAction = new Action(newActionOptions);\n    newAction.data = listModel;\n    return newAction;\n}\nfunction getActionDropdownButtonTarget(container) {\n    return container === null || container === void 0 ? void 0 : container.previousElementSibling;\n}\nvar BaseAction = /** @class */ (function (_super) {\n    __extends(BaseAction, _super);\n    function BaseAction() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.iconSize = 24;\n        return _this;\n    }\n    Object.defineProperty(BaseAction.prototype, \"visible\", {\n        get: function () {\n            return this.getVisible();\n        },\n        set: function (val) {\n            this.setVisible(val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"enabled\", {\n        get: function () {\n            return this.getEnabled();\n        },\n        set: function (val) {\n            this.setEnabled(val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"component\", {\n        get: function () {\n            return this.getComponent();\n        },\n        set: function (val) {\n            this.setComponent(val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"locTitle\", {\n        get: function () {\n            return this.getLocTitle();\n        },\n        set: function (val) {\n            this.setLocTitle(val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"title\", {\n        get: function () {\n            return this.getTitle();\n        },\n        set: function (val) {\n            this.setTitle(val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"cssClasses\", {\n        get: function () {\n            return this.cssClassesValue || _container__WEBPACK_IMPORTED_MODULE_6__[\"defaultActionBarCss\"];\n        },\n        set: function (val) {\n            this.cssClassesValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"isVisible\", {\n        get: function () {\n            return this.visible && this.mode !== \"popup\" && this.mode !== \"removed\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"disabled\", {\n        get: function () {\n            return this.enabled !== undefined && !this.enabled;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"canShrink\", {\n        get: function () {\n            return !!this.iconName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseAction.prototype, \"hasTitle\", {\n        get: function () {\n            return (((this.mode != \"small\" &&\n                (this.showTitle || this.showTitle === undefined)) ||\n                !this.iconName) &&\n                !!this.title);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BaseAction.prototype.getActionBarItemTitleCss = function () {\n        return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_5__[\"CssClassBuilder\"]()\n            .append(this.cssClasses.itemTitle)\n            .append(this.cssClasses.itemTitleWithIcon, !!this.iconName)\n            .toString();\n    };\n    BaseAction.prototype.getActionBarItemCss = function () {\n        return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_5__[\"CssClassBuilder\"]()\n            .append(this.cssClasses.item)\n            .append(this.cssClasses.itemWithTitle, this.hasTitle)\n            .append(this.cssClasses.itemAsIcon, !this.hasTitle)\n            .append(this.cssClasses.itemActive, !!this.active)\n            .append(this.cssClasses.itemPressed, !!this.pressed)\n            .append(this.innerCss)\n            .toString();\n    };\n    BaseAction.prototype.getActionRootCss = function () {\n        return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_5__[\"CssClassBuilder\"]()\n            .append(\"sv-action\")\n            .append(this.css)\n            .append(\"sv-action--space\", this.needSpace)\n            .append(\"sv-action--hidden\", !this.isVisible)\n            .toString();\n    };\n    BaseAction.prototype.getTooltip = function () {\n        return this.tooltip || this.title;\n    };\n    BaseAction.prototype.getIsTrusted = function (args) {\n        if (!!args.originalEvent) {\n            return args.originalEvent.isTrusted;\n        }\n        return args.isTrusted;\n    };\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"tooltip\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"showTitle\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"innerCss\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"active\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"pressed\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"data\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"popupModel\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"needSeparator\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"template\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])({ defaultValue: \"large\" })\n    ], BaseAction.prototype, \"mode\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"visibleIndex\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"disableTabStop\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"disableShrink\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"disableHide\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])({ defaultValue: false })\n    ], BaseAction.prototype, \"needSpace\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"ariaChecked\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"ariaExpanded\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])({ defaultValue: \"button\" })\n    ], BaseAction.prototype, \"ariaRole\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"iconName\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"iconSize\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], BaseAction.prototype, \"css\", void 0);\n    return BaseAction;\n}(_base__WEBPACK_IMPORTED_MODULE_0__[\"Base\"]));\n\nvar Action = /** @class */ (function (_super) {\n    __extends(Action, _super);\n    function Action(innerItem) {\n        var _this = _super.call(this) || this;\n        _this.innerItem = innerItem;\n        _this.locTitleChanged = function () {\n            var val = _this.locTitle.renderedHtml;\n            _this.setPropertyValue(\"_title\", !!val ? val : undefined);\n        };\n        _this.locTitle = !!innerItem ? innerItem[\"locTitle\"] : null;\n        //Object.assign(this, item) to support IE11\n        if (!!innerItem) {\n            for (var key in innerItem) {\n                if (key !== \"locTitle\") {\n                    _this[key] = innerItem[key];\n                }\n            }\n        }\n        if (!!_this.locTitleName) {\n            _this.locTitleChanged();\n        }\n        _this.registerFunctionOnPropertyValueChanged(\"_title\", function () {\n            _this.raiseUpdate(true);\n        });\n        _this.locStrChangedInPopupModel();\n        return _this;\n    }\n    Action.prototype.raiseUpdate = function (isResetInitialized) {\n        if (isResetInitialized === void 0) { isResetInitialized = false; }\n        this.updateCallback && this.updateCallback(isResetInitialized);\n    };\n    Action.prototype.createLocTitle = function () {\n        return this.createLocalizableString(\"title\", this, true);\n    };\n    Action.prototype.getLocTitle = function () {\n        return this.locTitleValue;\n    };\n    Action.prototype.setLocTitle = function (val) {\n        if (!val && !this.locTitleValue) {\n            val = this.createLocTitle();\n        }\n        if (!!this.locTitleValue) {\n            this.locTitleValue.onStringChanged.remove(this.locTitleChanged);\n        }\n        this.locTitleValue = val;\n        this.locTitleValue.onStringChanged.add(this.locTitleChanged);\n        this.locTitleChanged();\n    };\n    Action.prototype.getTitle = function () {\n        return this._title;\n    };\n    Action.prototype.setTitle = function (val) {\n        this._title = val;\n    };\n    Object.defineProperty(Action.prototype, \"locTitleName\", {\n        get: function () {\n            return this.locTitle.localizationName;\n        },\n        set: function (val) {\n            this.locTitle.localizationName = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Action.prototype.locStrsChanged = function () {\n        _super.prototype.locStrsChanged.call(this);\n        this.locTooltipChanged();\n        this.locStrChangedInPopupModel();\n    };\n    Action.prototype.locStrChangedInPopupModel = function () {\n        if (!this.popupModel || !this.popupModel.contentComponentData || !this.popupModel.contentComponentData.model)\n            return;\n        var model = this.popupModel.contentComponentData.model;\n        if (Array.isArray(model.actions)) {\n            var actions = model.actions;\n            actions.forEach(function (item) {\n                if (!!item.locStrsChanged) {\n                    item.locStrsChanged();\n                }\n            });\n        }\n    };\n    Action.prototype.locTooltipChanged = function () {\n        if (!this.locTooltipName)\n            return;\n        this.tooltip = _surveyStrings__WEBPACK_IMPORTED_MODULE_1__[\"surveyLocalization\"].getString(this.locTooltipName, this.locTitle.locale);\n    };\n    //ILocalizableOwner\n    Action.prototype.getLocale = function () { return this.owner ? this.owner.getLocale() : \"\"; };\n    Action.prototype.getMarkdownHtml = function (text, name) { return this.owner ? this.owner.getMarkdownHtml(text, name) : undefined; };\n    Action.prototype.getProcessedText = function (text) { return this.owner ? this.owner.getProcessedText(text) : text; };\n    Action.prototype.getRenderer = function (name) { return this.owner ? this.owner.getRenderer(name) : null; };\n    Action.prototype.getRendererContext = function (locStr) { return this.owner ? this.owner.getRendererContext(locStr) : locStr; };\n    Action.prototype.setVisible = function (val) {\n        this._visible = val;\n    };\n    Action.prototype.getVisible = function () {\n        return this._visible;\n    };\n    Action.prototype.setEnabled = function (val) {\n        this._enabled = val;\n    };\n    Action.prototype.getEnabled = function () {\n        if (this.enabledIf)\n            return this.enabledIf();\n        return this._enabled;\n    };\n    Action.prototype.setComponent = function (val) {\n        this._component = val;\n    };\n    Action.prototype.getComponent = function () {\n        return this._component;\n    };\n    Action.prototype.dispose = function () {\n        this.updateCallback = undefined;\n        this.action = undefined;\n        _super.prototype.dispose.call(this);\n        if (this.popupModel) {\n            this.popupModel.dispose();\n        }\n        if (!!this.locTitleValue) {\n            this.locTitleValue.onStringChanged.remove(this.locTitleChanged);\n            this.locTitleChanged = undefined;\n        }\n    };\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], Action.prototype, \"id\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])({\n            defaultValue: true,\n            onSet: function (_, target) {\n                target.raiseUpdate();\n            }\n        })\n    ], Action.prototype, \"_visible\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])({\n            onSet: function (_, target) {\n                target.locTooltipChanged();\n            }\n        })\n    ], Action.prototype, \"locTooltipName\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], Action.prototype, \"_enabled\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], Action.prototype, \"action\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], Action.prototype, \"_component\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])()\n    ], Action.prototype, \"items\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"property\"])({\n            onSet: function (val, target) {\n                if (target.locTitleValue.text === val)\n                    return;\n                target.locTitleValue.text = val;\n            }\n        })\n    ], Action.prototype, \"_title\", void 0);\n    return Action;\n}(BaseAction));\n\nvar ActionDropdownViewModel = /** @class */ (function () {\n    function ActionDropdownViewModel(item) {\n        this.item = item;\n        this.funcKey = \"sv-dropdown-action\";\n        this.setupPopupCallbacks();\n    }\n    ActionDropdownViewModel.prototype.setupPopupCallbacks = function () {\n        var _this = this;\n        var popupModel = this.popupModel = this.item.popupModel;\n        if (!popupModel)\n            return;\n        popupModel.registerPropertyChangedHandlers([\"isVisible\"], function () {\n            if (!popupModel.isVisible) {\n                _this.item.pressed = false;\n            }\n            else {\n                _this.item.pressed = true;\n            }\n        }, this.funcKey);\n    };\n    ActionDropdownViewModel.prototype.removePopupCallbacks = function () {\n        if (!!this.popupModel) {\n            this.popupModel.unregisterPropertyChangedHandlers([\"isVisible\"], this.funcKey);\n        }\n    };\n    ActionDropdownViewModel.prototype.dispose = function () {\n        this.removePopupCallbacks();\n    };\n    return ActionDropdownViewModel;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/actions/adaptive-container.ts\":\n/*!*******************************************!*\\\n  !*** ./src/actions/adaptive-container.ts ***!\n  \\*******************************************/\n/*! exports provided: AdaptiveActionContainer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_26060__) {\n\n\"use strict\";\n__nested_webpack_require_26060__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_26060__.d(__nested_webpack_exports__, \"AdaptiveActionContainer\", function() { return AdaptiveActionContainer; });\n/* harmony import */ var _utils_responsivity_manager__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_26060__(/*! ../utils/responsivity-manager */ \"./src/utils/responsivity-manager.ts\");\n/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_26060__(/*! ./action */ \"./src/actions/action.ts\");\n/* harmony import */ var _container__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_26060__(/*! ./container */ \"./src/actions/container.ts\");\n/* harmony import */ var _surveyStrings__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_26060__(/*! ../surveyStrings */ \"./src/surveyStrings.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar AdaptiveActionContainer = /** @class */ (function (_super) {\n    __extends(AdaptiveActionContainer, _super);\n    function AdaptiveActionContainer() {\n        var _this = _super.call(this) || this;\n        _this.minVisibleItemsCount = 0;\n        _this.isResponsivenessDisabled = false;\n        _this.dotsItem = Object(_action__WEBPACK_IMPORTED_MODULE_1__[\"createDropdownActionModelAdvanced\"])({\n            id: \"dotsItem-id\" + AdaptiveActionContainer.ContainerID++,\n            css: \"sv-dots\",\n            innerCss: \"sv-dots__item\",\n            iconName: \"icon-more\",\n            visible: false,\n            tooltip: _surveyStrings__WEBPACK_IMPORTED_MODULE_3__[\"surveyLocalization\"].getString(\"more\"),\n        }, {\n            items: [],\n            onSelectionChanged: function (item) {\n                _this.hiddenItemSelected(item);\n            },\n            allowSelection: false\n        });\n        return _this;\n    }\n    AdaptiveActionContainer.prototype.hideItemsGreaterN = function (visibleItemsCount) {\n        var actionsToHide = this.getActionsToHide();\n        visibleItemsCount = Math.max(visibleItemsCount, this.minVisibleItemsCount - (this.visibleActions.length - actionsToHide.length));\n        var hiddenItems = [];\n        actionsToHide.forEach(function (item) {\n            if (visibleItemsCount <= 0) {\n                if (item.removePriority) {\n                    item.mode = \"removed\";\n                }\n                else {\n                    item.mode = \"popup\";\n                    hiddenItems.push(item.innerItem);\n                }\n            }\n            visibleItemsCount--;\n        });\n        this.hiddenItemsListModel.setItems(hiddenItems);\n    };\n    AdaptiveActionContainer.prototype.getActionsToHide = function () {\n        return this.visibleActions.filter(function (action) { return !action.disableHide; }).sort(function (a, b) { return a.removePriority || 0 - b.removePriority || 0; });\n    };\n    AdaptiveActionContainer.prototype.getVisibleItemsCount = function (availableSize) {\n        this.visibleActions.filter(function (action) { return action.disableHide; }).forEach(function (action) { return availableSize -= action.minDimension; });\n        var itemsSizes = this.getActionsToHide().map(function (item) { return item.minDimension; });\n        var currSize = 0;\n        for (var i = 0; i < itemsSizes.length; i++) {\n            currSize += itemsSizes[i];\n            if (currSize > availableSize)\n                return i;\n        }\n        return i;\n    };\n    AdaptiveActionContainer.prototype.updateItemMode = function (availableSize, itemsSize) {\n        var items = this.visibleActions;\n        for (var index = items.length - 1; index >= 0; index--) {\n            if (itemsSize > availableSize && !items[index].disableShrink) {\n                itemsSize -= items[index].maxDimension - items[index].minDimension;\n                items[index].mode = \"small\";\n            }\n            else {\n                items[index].mode = \"large\";\n            }\n        }\n        if (itemsSize > availableSize) {\n            var hidableItems = this.visibleActions.filter(function (a) { return a.removePriority; });\n            hidableItems.sort(function (a, b) { return a.removePriority - b.removePriority; });\n            for (var index = 0; index < hidableItems.length; index++) {\n                if (itemsSize > availableSize) {\n                    itemsSize -= items[index].disableShrink ? hidableItems[index].maxDimension : hidableItems[index].minDimension;\n                    hidableItems[index].mode = \"removed\";\n                }\n            }\n        }\n    };\n    Object.defineProperty(AdaptiveActionContainer.prototype, \"hiddenItemsListModel\", {\n        get: function () {\n            return this.dotsItem.data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AdaptiveActionContainer.prototype.hiddenItemSelected = function (item) {\n        if (!!item && typeof item.action === \"function\") {\n            item.action();\n        }\n    };\n    AdaptiveActionContainer.prototype.onSet = function () {\n        var _this = this;\n        this.actions.forEach(function (action) { return action.updateCallback = function (isResetInitialized) { return _this.raiseUpdate(isResetInitialized); }; });\n        _super.prototype.onSet.call(this);\n    };\n    AdaptiveActionContainer.prototype.onPush = function (item) {\n        var _this = this;\n        item.updateCallback = function (isResetInitialized) { return _this.raiseUpdate(isResetInitialized); };\n        _super.prototype.onPush.call(this, item);\n    };\n    AdaptiveActionContainer.prototype.getRenderedActions = function () {\n        if (this.actions.length === 1 && !!this.actions[0].iconName)\n            return this.actions;\n        return this.actions.concat([this.dotsItem]);\n    };\n    AdaptiveActionContainer.prototype.raiseUpdate = function (isResetInitialized) {\n        if (!this.isResponsivenessDisabled) {\n            _super.prototype.raiseUpdate.call(this, isResetInitialized);\n        }\n    };\n    AdaptiveActionContainer.prototype.fit = function (dimension, dotsItemSize) {\n        if (dimension <= 0)\n            return;\n        this.dotsItem.visible = false;\n        var minSize = 0;\n        var maxSize = 0;\n        var items = this.visibleActions;\n        items.forEach(function (item) {\n            minSize += item.minDimension;\n            maxSize += item.maxDimension;\n        });\n        if (dimension >= maxSize) {\n            this.setActionsMode(\"large\");\n        }\n        else if (dimension < minSize) {\n            this.setActionsMode(\"small\");\n            this.hideItemsGreaterN(this.getVisibleItemsCount(dimension - dotsItemSize));\n            this.dotsItem.visible = !!this.hiddenItemsListModel.actions.length;\n        }\n        else {\n            this.updateItemMode(dimension, maxSize);\n        }\n    };\n    AdaptiveActionContainer.prototype.initResponsivityManager = function (container, delayedUpdateFunction) {\n        this.responsivityManager = new _utils_responsivity_manager__WEBPACK_IMPORTED_MODULE_0__[\"ResponsivityManager\"](container, this, \":scope > .sv-action:not(.sv-dots) > .sv-action__content\", null, delayedUpdateFunction);\n    };\n    AdaptiveActionContainer.prototype.resetResponsivityManager = function () {\n        if (!!this.responsivityManager) {\n            this.responsivityManager.dispose();\n            this.responsivityManager = undefined;\n        }\n    };\n    AdaptiveActionContainer.prototype.setActionsMode = function (mode) {\n        this.actions.forEach(function (action) {\n            if (mode == \"small\" && action.disableShrink)\n                return;\n            action.mode = mode;\n        });\n    };\n    AdaptiveActionContainer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.dotsItem.data.dispose();\n        this.dotsItem.dispose();\n        this.resetResponsivityManager();\n    };\n    AdaptiveActionContainer.ContainerID = 1;\n    return AdaptiveActionContainer;\n}(_container__WEBPACK_IMPORTED_MODULE_2__[\"ActionContainer\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/actions/container.ts\":\n/*!**********************************!*\\\n  !*** ./src/actions/container.ts ***!\n  \\**********************************/\n/*! exports provided: defaultActionBarCss, ActionContainer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_35007__) {\n\n\"use strict\";\n__nested_webpack_require_35007__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_35007__.d(__nested_webpack_exports__, \"defaultActionBarCss\", function() { return defaultActionBarCss; });\n/* harmony export (binding) */ __nested_webpack_require_35007__.d(__nested_webpack_exports__, \"ActionContainer\", function() { return ActionContainer; });\n/* harmony import */ var _jsonobject__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_35007__(/*! ../jsonobject */ \"./src/jsonobject.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_35007__(/*! ../base */ \"./src/base.ts\");\n/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_35007__(/*! ./action */ \"./src/actions/action.ts\");\n/* harmony import */ var _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_35007__(/*! ../utils/cssClassBuilder */ \"./src/utils/cssClassBuilder.ts\");\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_35007__(/*! ../utils/utils */ \"./src/utils/utils.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = ( false) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\nvar defaultActionBarCss = {\n    root: \"sv-action-bar\",\n    defaultSizeMode: \"sv-action-bar--default-size-mode\",\n    smallSizeMode: \"sv-action-bar--small-size-mode\",\n    item: \"sv-action-bar-item\",\n    itemWithTitle: \"\",\n    itemAsIcon: \"sv-action-bar-item--icon\",\n    itemActive: \"sv-action-bar-item--active\",\n    itemPressed: \"sv-action-bar-item--pressed\",\n    itemIcon: \"sv-action-bar-item__icon\",\n    itemTitle: \"sv-action-bar-item__title\",\n    itemTitleWithIcon: \"sv-action-bar-item__title--with-icon\",\n};\nvar ActionContainer = /** @class */ (function (_super) {\n    __extends(ActionContainer, _super);\n    function ActionContainer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.sizeMode = \"default\";\n        return _this;\n    }\n    ActionContainer.prototype.getMarkdownHtml = function (text, name) {\n        return !!this.locOwner ? this.locOwner.getMarkdownHtml(text, name) : undefined;\n    };\n    ActionContainer.prototype.getRenderer = function (name) {\n        return !!this.locOwner ? this.locOwner.getRenderer(name) : null;\n    };\n    ActionContainer.prototype.getRendererContext = function (locStr) {\n        return !!this.locOwner ? this.locOwner.getRendererContext(locStr) : locStr;\n    };\n    ActionContainer.prototype.getProcessedText = function (text) {\n        return this.locOwner ? this.locOwner.getProcessedText(text) : text;\n    };\n    ActionContainer.prototype.getLocale = function () {\n        return !!this.locOwner ? this.locOwner.getLocale() : \"\";\n    };\n    ActionContainer.prototype.getRenderedActions = function () {\n        return this.actions;\n    };\n    ActionContainer.prototype.locStrsChanged = function () {\n        _super.prototype.locStrsChanged.call(this);\n        this.actions.forEach(function (item) {\n            if (item.locTitle)\n                item.locTitle.strChanged();\n            item.locStrsChanged();\n        });\n    };\n    ActionContainer.prototype.raiseUpdate = function (isResetInitialized) {\n        this.isEmpty = !this.actions.some(function (action) { return action.visible; });\n        this.updateCallback && this.updateCallback(isResetInitialized);\n    };\n    ActionContainer.prototype.onSet = function () {\n        var _this = this;\n        this.actions.forEach(function (item) { _this.setActionCssClasses(item); });\n        this.raiseUpdate(true);\n    };\n    ActionContainer.prototype.onPush = function (item) {\n        this.setActionCssClasses(item);\n        item.owner = this;\n        this.raiseUpdate(true);\n    };\n    ActionContainer.prototype.onRemove = function (item) {\n        item.owner = null;\n        this.raiseUpdate(true);\n    };\n    ActionContainer.prototype.setActionCssClasses = function (item) {\n        item.cssClasses = this.cssClasses;\n    };\n    Object.defineProperty(ActionContainer.prototype, \"hasActions\", {\n        get: function () {\n            return (this.actions || []).length > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionContainer.prototype, \"renderedActions\", {\n        get: function () {\n            return this.getRenderedActions();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionContainer.prototype, \"visibleActions\", {\n        get: function () {\n            return this.actions.filter(function (action) { return action.visible !== false; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ActionContainer.prototype.getRootCss = function () {\n        var sizeModeClass = this.sizeMode === \"small\" ? this.cssClasses.smallSizeMode : this.cssClasses.defaultSizeMode;\n        return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_3__[\"CssClassBuilder\"]().append(this.cssClasses.root + (!!sizeModeClass ? \" \" + sizeModeClass : \"\") + (!!this.containerCss ? \" \" + this.containerCss : \"\"))\n            .append(this.cssClasses.root + \"--empty\", this.isEmpty)\n            .toString();\n    };\n    ActionContainer.prototype.getDefaultCssClasses = function () {\n        return defaultActionBarCss;\n    };\n    Object.defineProperty(ActionContainer.prototype, \"cssClasses\", {\n        get: function () {\n            if (!this.cssClassesValue) {\n                this.cssClassesValue = this.getDefaultCssClasses();\n            }\n            return this.cssClassesValue;\n        },\n        set: function (val) {\n            var _this = this;\n            this.cssClassesValue = {};\n            this.copyCssClasses(this.cssClassesValue, this.getDefaultCssClasses());\n            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__[\"mergeValues\"])(val, this.cssClasses);\n            this.actions.forEach(function (action) {\n                _this.setActionCssClasses(action);\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ActionContainer.prototype.createAction = function (item) {\n        return (item instanceof _action__WEBPACK_IMPORTED_MODULE_2__[\"BaseAction\"] ? item : new _action__WEBPACK_IMPORTED_MODULE_2__[\"Action\"](item));\n    };\n    ActionContainer.prototype.addAction = function (val, sortByVisibleIndex) {\n        if (sortByVisibleIndex === void 0) { sortByVisibleIndex = true; }\n        var res = this.createAction(val);\n        this.actions.push(res);\n        this.sortItems();\n        return res;\n    };\n    ActionContainer.prototype.sortItems = function () {\n        this.actions = []\n            .concat(this.actions.filter(function (item) { return item.visibleIndex === undefined || item.visibleIndex >= 0; }))\n            .sort(function (firstItem, secondItem) {\n            return firstItem.visibleIndex - secondItem.visibleIndex;\n        });\n    };\n    ActionContainer.prototype.setItems = function (items, sortByVisibleIndex) {\n        var _this = this;\n        if (sortByVisibleIndex === void 0) { sortByVisibleIndex = true; }\n        this.actions = items.map(function (item) { return _this.createAction(item); });\n        if (sortByVisibleIndex) {\n            this.sortItems();\n        }\n    };\n    ActionContainer.prototype.initResponsivityManager = function (container, delayedUpdateFunction) {\n        return;\n    };\n    ActionContainer.prototype.resetResponsivityManager = function () { };\n    ActionContainer.prototype.getActionById = function (id) {\n        for (var i = 0; i < this.actions.length; i++) {\n            if (this.actions[i].id === id)\n                return this.actions[i];\n        }\n        return null;\n    };\n    ActionContainer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.actions.forEach(function (action) { return action.dispose(); });\n        this.actions.length = 0;\n    };\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"propertyArray\"])({\n            onSet: function (_, target) {\n                target.onSet();\n            },\n            onPush: function (item, i, target) {\n                target.onPush(item);\n            },\n            onRemove: function (item, i, target) {\n                target.onRemove(item);\n            }\n        })\n    ], ActionContainer.prototype, \"actions\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({})\n    ], ActionContainer.prototype, \"containerCss\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], ActionContainer.prototype, \"isEmpty\", void 0);\n    return ActionContainer;\n}(_base__WEBPACK_IMPORTED_MODULE_1__[\"Base\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/base.ts\":\n/*!*********************!*\\\n  !*** ./src/base.ts ***!\n  \\*********************/\n/*! exports provided: Bindings, Dependencies, ComputedUpdater, Base, ArrayChanges, Event, EventBase */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_45208__) {\n\n\"use strict\";\n__nested_webpack_require_45208__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_45208__.d(__nested_webpack_exports__, \"Bindings\", function() { return Bindings; });\n/* harmony export (binding) */ __nested_webpack_require_45208__.d(__nested_webpack_exports__, \"Dependencies\", function() { return Dependencies; });\n/* harmony export (binding) */ __nested_webpack_require_45208__.d(__nested_webpack_exports__, \"ComputedUpdater\", function() { return ComputedUpdater; });\n/* harmony export (binding) */ __nested_webpack_require_45208__.d(__nested_webpack_exports__, \"Base\", function() { return Base; });\n/* harmony export (binding) */ __nested_webpack_require_45208__.d(__nested_webpack_exports__, \"ArrayChanges\", function() { return ArrayChanges; });\n/* harmony export (binding) */ __nested_webpack_require_45208__.d(__nested_webpack_exports__, \"Event\", function() { return Event; });\n/* harmony export (binding) */ __nested_webpack_require_45208__.d(__nested_webpack_exports__, \"EventBase\", function() { return EventBase; });\n/* harmony import */ var _localizablestring__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_45208__(/*! ./localizablestring */ \"./src/localizablestring.ts\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_45208__(/*! ./helpers */ \"./src/helpers.ts\");\n/* harmony import */ var _jsonobject__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_45208__(/*! ./jsonobject */ \"./src/jsonobject.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_45208__(/*! ./settings */ \"./src/settings.ts\");\n/* harmony import */ var _conditions__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_45208__(/*! ./conditions */ \"./src/conditions.ts\");\n/* harmony import */ var _surveyStrings__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_45208__(/*! ./surveyStrings */ \"./src/surveyStrings.ts\");\n/* harmony import */ var _console_warnings__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_45208__(/*! ./console-warnings */ \"./src/console-warnings.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = ( false) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\n\n\n\n\n\n\n\nvar Bindings = /** @class */ (function () {\n    function Bindings(obj) {\n        this.obj = obj;\n        this.properties = null;\n        this.values = null;\n    }\n    Bindings.prototype.getType = function () {\n        return \"bindings\";\n    };\n    Bindings.prototype.getNames = function () {\n        var res = [];\n        this.fillProperties();\n        for (var i = 0; i < this.properties.length; i++) {\n            if (this.properties[i].isVisible(\"\", this.obj)) {\n                res.push(this.properties[i].name);\n            }\n        }\n        return res;\n    };\n    Bindings.prototype.getProperties = function () {\n        var res = [];\n        this.fillProperties();\n        for (var i = 0; i < this.properties.length; i++) {\n            res.push(this.properties[i]);\n        }\n        return res;\n    };\n    Bindings.prototype.setBinding = function (propertyName, valueName) {\n        if (!this.values)\n            this.values = {};\n        var oldValue = this.getJson();\n        if (oldValue === valueName)\n            return;\n        if (!!valueName) {\n            this.values[propertyName] = valueName;\n        }\n        else {\n            delete this.values[propertyName];\n            if (Object.keys(this.values).length == 0) {\n                this.values = null;\n            }\n        }\n        this.onChangedJSON(oldValue);\n    };\n    Bindings.prototype.clearBinding = function (propertyName) {\n        this.setBinding(propertyName, \"\");\n    };\n    Bindings.prototype.isEmpty = function () {\n        if (!this.values)\n            return true;\n        for (var key in this.values)\n            return false;\n        return true;\n    };\n    Bindings.prototype.getValueNameByPropertyName = function (propertyName) {\n        if (!this.values)\n            return undefined;\n        return this.values[propertyName];\n    };\n    Bindings.prototype.getPropertiesByValueName = function (valueName) {\n        if (!this.values)\n            return [];\n        var res = [];\n        for (var key in this.values) {\n            if (this.values[key] == valueName) {\n                res.push(key);\n            }\n        }\n        return res;\n    };\n    Bindings.prototype.getJson = function () {\n        if (this.isEmpty())\n            return undefined;\n        var res = {};\n        for (var key in this.values) {\n            res[key] = this.values[key];\n        }\n        return res;\n    };\n    Bindings.prototype.setJson = function (value) {\n        var oldValue = this.getJson();\n        this.values = null;\n        if (!!value) {\n            this.values = {};\n            for (var key in value) {\n                this.values[key] = value[key];\n            }\n        }\n        this.onChangedJSON(oldValue);\n    };\n    Bindings.prototype.fillProperties = function () {\n        if (this.properties !== null)\n            return;\n        this.properties = [];\n        var objProperties = _jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"Serializer\"].getPropertiesByObj(this.obj);\n        for (var i = 0; i < objProperties.length; i++) {\n            if (objProperties[i].isBindable) {\n                this.properties.push(objProperties[i]);\n            }\n        }\n    };\n    Bindings.prototype.onChangedJSON = function (oldValue) {\n        if (this.obj) {\n            this.obj.onBindingChanged(oldValue, this.getJson());\n        }\n    };\n    return Bindings;\n}());\n\nvar Dependencies = /** @class */ (function () {\n    function Dependencies(currentDependency, target, property) {\n        this.currentDependency = currentDependency;\n        this.target = target;\n        this.property = property;\n        this.dependencies = [];\n        this.id = \"\" + (++Dependencies.DependenciesCount);\n    }\n    Dependencies.prototype.addDependency = function (target, property) {\n        if (this.target === target && this.property === property)\n            return;\n        if (this.dependencies.some(function (dependency) { return dependency.obj === target && dependency.prop === property; }))\n            return;\n        this.dependencies.push({\n            obj: target,\n            prop: property,\n            id: this.id\n        });\n        target.registerPropertyChangedHandlers([property], this.currentDependency, this.id);\n    };\n    Dependencies.prototype.dispose = function () {\n        this.dependencies.forEach(function (dependency) {\n            dependency.obj.unregisterPropertyChangedHandlers([dependency.prop], dependency.id);\n        });\n        // this.currentDependency = undefined;\n    };\n    Dependencies.DependenciesCount = 0;\n    return Dependencies;\n}());\n\nvar ComputedUpdater = /** @class */ (function () {\n    function ComputedUpdater(_updater) {\n        this._updater = _updater;\n        this.dependencies = undefined;\n        this.type = ComputedUpdater.ComputedUpdaterType;\n    }\n    Object.defineProperty(ComputedUpdater.prototype, \"updater\", {\n        get: function () {\n            return this._updater;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ComputedUpdater.prototype.setDependencies = function (dependencies) {\n        this.clearDependencies();\n        this.dependencies = dependencies;\n    };\n    ComputedUpdater.prototype.getDependencies = function () {\n        return this.dependencies;\n    };\n    ComputedUpdater.prototype.clearDependencies = function () {\n        if (this.dependencies) {\n            this.dependencies.dispose();\n            this.dependencies = undefined;\n        }\n    };\n    ComputedUpdater.prototype.dispose = function () {\n        this.clearDependencies();\n    };\n    ComputedUpdater.ComputedUpdaterType = \"__dependency_computed\";\n    return ComputedUpdater;\n}());\n\n/**\n * A base class for all SurveyJS objects.\n */\nvar Base = /** @class */ (function () {\n    function Base() {\n        this.dependencies = {};\n        this.propertyHash = Base.createPropertiesHash();\n        this.eventList = [];\n        this.isLoadingFromJsonValue = false;\n        this.loadingOwner = null;\n        /**\n         * An event that is raised when a property of this SurveyJS object has changed.\n         *\n         * Parameters:\n         *\n         * - `sender`: `this`\\\n         * A SurveyJS object whose property has changed.\n         * - `options.name`: `string`\\\n         * The name of the changed property.\n         * - `options.newValue`: `any`\\\n         * A new value for the property.\n         * - `options.oldValue`: `any`\\\n         * An old value of the property. If the property is an array, `oldValue` contains the same array as `newValue` does.\n         */\n        this.onPropertyChanged = this.addEvent();\n        /**\n         * An event that is raised when an [`ItemValue`](https://surveyjs.io/form-library/documentation/itemvalue) property is changed.\n         *\n         * Parameters:\n         *\n         * - `sender`: `this`\\\n         * A SurveyJS object whose property contains an array of `ItemValue` objects.\n         * - `options.obj`: [`ItemValue`](https://surveyjs.io/form-library/documentation/itemvalue)\\\n         * An `ItemValue` object.\n         * - `options.propertyName`: `string`\\\n         * The name of the property to which an array of `ItemValue` objects is assigned (for example, `\"choices\"` or `\"rows\"`).\n         * - `options.name`: `\"text\"` | `\"value\"`\\\n         * The name of the changed property.\n         * - `options.newValue`: `any`\\\n         * A new value for the property.\n         */\n        this.onItemValuePropertyChanged = this.addEvent();\n        this.isCreating = true;\n        this.bindingsValue = new Bindings(this);\n        _jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"CustomPropertiesCollection\"].createProperties(this);\n        this.onBaseCreating();\n        this.isCreating = false;\n    }\n    Base.finishCollectDependencies = function () {\n        var deps = Base.currentDependencis;\n        Base.currentDependencis = undefined;\n        return deps;\n    };\n    Base.startCollectDependencies = function (updater, target, property) {\n        if (Base.currentDependencis !== undefined) {\n            throw new Error(\"Attempt to collect nested dependencies. Nested dependencies are not supported.\");\n        }\n        Base.currentDependencis = new Dependencies(updater, target, property);\n    };\n    Base.collectDependency = function (target, property) {\n        if (Base.currentDependencis === undefined)\n            return;\n        Base.currentDependencis.addDependency(target, property);\n    };\n    Object.defineProperty(Base, \"commentSuffix\", {\n        get: function () {\n            return _settings__WEBPACK_IMPORTED_MODULE_3__[\"settings\"].commentSuffix;\n        },\n        set: function (val) {\n            _settings__WEBPACK_IMPORTED_MODULE_3__[\"settings\"].commentSuffix = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Base, \"commentPrefix\", {\n        get: function () {\n            return Base.commentSuffix;\n        },\n        set: function (val) {\n            Base.commentSuffix = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Returns `true` if a passed `value` is an empty string, array, or object or if it equals to `undefined` or `null`.\n     *\n     * @param value A value to be checked.\n     * @param trimString *(Optional)* When this parameter is `true`, the method ignores whitespace characters at the beginning and end of a string value. Pass `false` to disable this functionality.\n     */\n    Base.prototype.isValueEmpty = function (value, trimString) {\n        if (trimString === void 0) { trimString = true; }\n        if (trimString) {\n            value = this.trimValue(value);\n        }\n        return _helpers__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isValueEmpty(value);\n    };\n    Base.prototype.equals = function (obj) {\n        if (!obj)\n            return false;\n        if (this.isDisposed || obj.isDisposed)\n            return false;\n        if (this.getType() != obj.getType())\n            return false;\n        return this.equalsCore(obj);\n    };\n    Base.prototype.equalsCore = function (obj) {\n        if (this.name !== obj.name)\n            return false;\n        return _helpers__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isTwoValueEquals(this.toJSON(), obj.toJSON(), false, true, false);\n    };\n    Base.prototype.trimValue = function (value) {\n        if (!!value && (typeof value === \"string\" || value instanceof String))\n            return value.trim();\n        return value;\n    };\n    Base.prototype.isPropertyEmpty = function (value) {\n        return value !== \"\" && this.isValueEmpty(value);\n    };\n    Base.createPropertiesHash = function () {\n        return {};\n    };\n    Base.prototype.dispose = function () {\n        var _this = this;\n        for (var i = 0; i < this.eventList.length; i++) {\n            this.eventList[i].clear();\n        }\n        this.onPropertyValueChangedCallback = undefined;\n        this.isDisposedValue = true;\n        Object.keys(this.dependencies).forEach(function (key) { return _this.dependencies[key].dispose(); });\n    };\n    Object.defineProperty(Base.prototype, \"isDisposed\", {\n        get: function () {\n            return this.isDisposedValue === true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.addEvent = function () {\n        var res = new EventBase();\n        this.eventList.push(res);\n        return res;\n    };\n    Base.prototype.onBaseCreating = function () { };\n    /**\n     * Returns the object type as it is used in the JSON schema.\n     */\n    Base.prototype.getType = function () {\n        return \"base\";\n    };\n    /**\n     * Use this method to find out if the current object is of a given `typeName` or inherited from it.\n     *\n     * @param typeName One of the values listed in the [getType()](https://surveyjs.io/form-library/documentation/question#getType) description.\n     * @returns `true` if the current object is of a given `typeName` or inherited from it.\n     * @see getType\n     */\n    Base.prototype.isDescendantOf = function (typeName) {\n        return _jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"Serializer\"].isDescendantOf(this.getType(), typeName);\n    };\n    Base.prototype.getSurvey = function (isLive) {\n        if (isLive === void 0) { isLive = false; }\n        return null;\n    };\n    Object.defineProperty(Base.prototype, \"isDesignMode\", {\n        /**\n         * Returns `true` if the survey is being designed in Survey Creator.\n         */\n        get: function () {\n            var survey = this.getSurvey();\n            return !!survey && survey.isDesignMode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Base.prototype, \"isDesignModeV2\", {\n        get: function () {\n            return _settings__WEBPACK_IMPORTED_MODULE_3__[\"settings\"].supportCreatorV2 && this.isDesignMode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Base.prototype, \"inSurvey\", {\n        /**\n         * Returns `true` if the object is included in a survey.\n         *\n         * This property may return `false`, for example, when you [create a survey model dynamically](https://surveyjs.io/form-library/documentation/design-survey-create-a-simple-survey#create-or-change-a-survey-model-dynamically).\n         */\n        get: function () {\n            return !!this.getSurvey(true);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Base.prototype, \"bindings\", {\n        get: function () {\n            return this.bindingsValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.checkBindings = function (valueName, value) { };\n    Base.prototype.updateBindings = function (propertyName, value) {\n        var valueName = this.bindings.getValueNameByPropertyName(propertyName);\n        if (!!valueName) {\n            this.updateBindingValue(valueName, value);\n        }\n    };\n    Base.prototype.updateBindingValue = function (valueName, value) { };\n    Base.prototype.getTemplate = function () {\n        return this.getType();\n    };\n    Object.defineProperty(Base.prototype, \"isLoadingFromJson\", {\n        /**\n         * Returns `true` if the object configuration is being loaded from JSON.\n         */\n        get: function () {\n            return this.isLoadingFromJsonValue || this.getIsLoadingFromJson();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.getIsLoadingFromJson = function () {\n        if (!!this.loadingOwner && this.loadingOwner.isLoadingFromJson)\n            return true;\n        return this.isLoadingFromJsonValue;\n    };\n    Base.prototype.startLoadingFromJson = function (json) {\n        this.isLoadingFromJsonValue = true;\n        this.jsonObj = json;\n    };\n    Base.prototype.endLoadingFromJson = function () {\n        this.isLoadingFromJsonValue = false;\n    };\n    /**\n     * Returns a JSON object that corresponds to the current SurveyJS object.\n     * @see fromJSON\n     */\n    Base.prototype.toJSON = function (options) {\n        return new _jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"JsonObject\"]().toJsonObject(this, options);\n    };\n    /**\n     * Assigns a new configuration to the current SurveyJS object. This configuration is taken from a passed JSON object.\n     *\n     * The JSON object should contain only serializable properties of this SurveyJS object. Event handlers and properties that do not belong to the SurveyJS object are ignored.\n     *\n     * @param json A JSON object with properties that you want to apply to the current SurveyJS object.\n     * @param options An object with configuration options.\n     * @param {boolean} options.validatePropertyValues Pass `true` if you want to validate property values. Use the [`jsonErrors`](#jsonErrors) array to access validation errors.\n     * @see toJSON\n     */\n    Base.prototype.fromJSON = function (json, options) {\n        new _jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"JsonObject\"]().toObject(json, this, options);\n        this.onSurveyLoad();\n    };\n    Base.prototype.onSurveyLoad = function () { };\n    /**\n     * Creates a new object that has the same type and properties as the current SurveyJS object.\n     */\n    Base.prototype.clone = function () {\n        var clonedObj = _jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"Serializer\"].createClass(this.getType());\n        clonedObj.fromJSON(this.toJSON());\n        return clonedObj;\n    };\n    /**\n     * Returns a `JsonObjectProperty` object with metadata about a serializable property that belongs to the current SurveyJS object.\n     *\n     * If the property is not found, this method returns `null`.\n     * @param propName A property name.\n     */\n    Base.prototype.getPropertyByName = function (propName) {\n        var type = this.getType();\n        if (!this.classMetaData || this.classMetaData.name !== type) {\n            this.classMetaData = _jsonobject__WEBPACK_IMPORTED_MODULE_2__[\"Serializer\"].findClass(type);\n        }\n        return !!this.classMetaData ? this.classMetaData.findProperty(propName) : null;\n    };\n    Base.prototype.isPropertyVisible = function (propName) {\n        var prop = this.getPropertyByName(propName);\n        return !!prop ? prop.isVisible(\"\", this) : false;\n    };\n    Base.createProgressInfo = function () {\n        return {\n            questionCount: 0,\n            answeredQuestionCount: 0,\n            requiredQuestionCount: 0,\n            requiredAnsweredQuestionCount: 0,\n        };\n    };\n    Base.prototype.getProgressInfo = function () {\n        return Base.createProgressInfo();\n    };\n    Base.prototype.localeChanged = function () { };\n    Base.prototype.locStrsChanged = function () {\n        if (!!this.arraysInfo) {\n            for (var key in this.arraysInfo) {\n                var item = this.arraysInfo[key];\n                if (item && item.isItemValues) {\n                    var arr = this.getPropertyValue(key);\n                    if (arr && !!Base.itemValueLocStrChanged)\n                        Base.itemValueLocStrChanged(arr);\n                }\n            }\n        }\n        if (!!this.localizableStrings) {\n            for (var key in this.localizableStrings) {\n                var item = this.getLocalizableString(key);\n                if (item)\n                    item.strChanged();\n            }\n        }\n    };\n    /**\n     * Returns the value of a property with a specified name.\n     *\n     * If the property is not found or does not have a value, this method returns either `undefined`, `defaultValue` specified in the property configuration, or a value passed as the `defaultValue` parameter.\n     *\n     * @param name A property name.\n     * @param defaultValue *(Optional)* A value to return if the property is not found or does not have a value.\n     */\n    Base.prototype.getPropertyValue = function (name, defaultValue) {\n        if (defaultValue === void 0) { defaultValue = null; }\n        var res = this.getPropertyValueWithoutDefault(name);\n        if (this.isPropertyEmpty(res)) {\n            var locStr = this.localizableStrings ? this.localizableStrings[name] : undefined;\n            if (locStr)\n                return locStr.text;\n            if (defaultValue !== null && defaultValue !== undefined)\n                return defaultValue;\n            var propDefaultValue = this.getDefaultPropertyValue(name);\n            if (propDefaultValue !== undefined)\n                return propDefaultValue;\n        }\n        return res;\n    };\n    Base.prototype.getDefaultPropertyValue = function (name) {\n        var prop = this.getPropertyByName(name);\n        if (!prop || prop.isCustom && this.isCreating)\n            return undefined;\n        var dValue = prop.defaultValue;\n        if (!this.isPropertyEmpty(dValue) && !Array.isArray(dValue))\n            return dValue;\n        var locStr = this.localizableStrings ? this.localizableStrings[name] : undefined;\n        if (locStr && locStr.localizationName)\n            return this.getLocalizationString(locStr.localizationName);\n        if (prop.type == \"boolean\" || prop.type == \"switch\")\n            return false;\n        if (prop.isCustom && !!prop.onGetValue)\n            return prop.onGetValue(this);\n        return undefined;\n    };\n    Base.prototype.hasDefaultPropertyValue = function (name) {\n        return this.getDefaultPropertyValue(name) !== undefined;\n    };\n    Base.prototype.resetPropertyValue = function (name) {\n        var locStr = this.localizableStrings ? this.localizableStrings[name] : undefined;\n        if (locStr) {\n            this.setLocalizableStringText(name, undefined);\n            locStr.clear();\n        }\n        else {\n            this.setPropertyValue(name, undefined);\n        }\n    };\n    Base.prototype.getPropertyValueWithoutDefault = function (name) {\n        return this.getPropertyValueCore(this.propertyHash, name);\n    };\n    Base.prototype.getPropertyValueCore = function (propertiesHash, name) {\n        if (!this.isLoadingFromJson) {\n            Base.collectDependency(this, name);\n        }\n        if (this.getPropertyValueCoreHandler)\n            return this.getPropertyValueCoreHandler(propertiesHash, name);\n        else\n            return propertiesHash[name];\n    };\n    Base.prototype.geValueFromHash = function () {\n        return this.propertyHash[\"value\"];\n    };\n    Base.prototype.setPropertyValueCore = function (propertiesHash, name, val) {\n        if (this.setPropertyValueCoreHandler) {\n            if (!this.isDisposedValue) {\n                this.setPropertyValueCoreHandler(propertiesHash, name, val);\n            }\n            else {\n                _console_warnings__WEBPACK_IMPORTED_MODULE_6__[\"ConsoleWarnings\"].disposedObjectChangedProperty(name, this.getType());\n            }\n        }\n        else\n            propertiesHash[name] = val;\n    };\n    Object.defineProperty(Base.prototype, \"isEditingSurveyElement\", {\n        get: function () {\n            var survey = this.getSurvey();\n            return !!survey && survey.isEditingSurveyElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.iteratePropertiesHash = function (func) {\n        var _this = this;\n        var keys = [];\n        for (var key in this.propertyHash) {\n            if (key === \"value\" &&\n                this.isEditingSurveyElement &&\n                Array.isArray(this.value))\n                continue;\n            keys.push(key);\n        }\n        keys.forEach(function (key) { return func(_this.propertyHash, key); });\n    };\n    /**\n     * Assigns a new value to a specified property.\n     * @param name A property name.\n     * @param val A new value for the property.\n     */\n    Base.prototype.setPropertyValue = function (name, val) {\n        if (name) {\n        }\n        if (!this.isLoadingFromJson) {\n            var prop = this.getPropertyByName(name);\n            if (!!prop) {\n                val = prop.settingValue(this, val);\n            }\n        }\n        var oldValue = this.getPropertyValue(name);\n        if (oldValue &&\n            Array.isArray(oldValue) &&\n            !!this.arraysInfo &&\n            (!val || Array.isArray(val))) {\n            if (!this.isTwoValueEquals(oldValue, val)) {\n                this.setArrayPropertyDirectly(name, val);\n            }\n        }\n        else {\n            this.setPropertyValueDirectly(name, val);\n            if (!this.isDisposedValue && !this.isTwoValueEquals(oldValue, val)) {\n                this.propertyValueChanged(name, oldValue, val);\n            }\n        }\n    };\n    Base.prototype.setArrayPropertyDirectly = function (name, val, sendNotification) {\n        if (sendNotification === void 0) { sendNotification = true; }\n        var arrayInfo = this.arraysInfo[name];\n        this.setArray(name, this.getPropertyValue(name), val, arrayInfo ? arrayInfo.isItemValues : false, arrayInfo ? sendNotification && arrayInfo.onPush : null);\n    };\n    Base.prototype.setPropertyValueDirectly = function (name, val) {\n        this.setPropertyValueCore(this.propertyHash, name, val);\n    };\n    Base.prototype.clearPropertyValue = function (name) {\n        this.setPropertyValueCore(this.propertyHash, name, null);\n        delete this.propertyHash[name];\n    };\n    Base.prototype.onPropertyValueChangedCallback = function (name, oldValue, newValue, sender, arrayChanges) { };\n    Base.prototype.itemValuePropertyChanged = function (item, name, oldValue, newValue) {\n        this.onItemValuePropertyChanged.fire(this, {\n            obj: item,\n            name: name,\n            oldValue: oldValue,\n            newValue: newValue,\n            propertyName: item.ownerPropertyName,\n        });\n    };\n    Base.prototype.onPropertyValueChanged = function (name, oldValue, newValue) { };\n    Base.prototype.propertyValueChanged = function (name, oldValue, newValue, arrayChanges, target) {\n        if (this.isLoadingFromJson)\n            return;\n        this.updateBindings(name, newValue);\n        this.onPropertyValueChanged(name, oldValue, newValue);\n        this.onPropertyChanged.fire(this, {\n            name: name,\n            oldValue: oldValue,\n            newValue: newValue,\n        });\n        this.doPropertyValueChangedCallback(name, oldValue, newValue, arrayChanges, this);\n        this.checkConditionPropertyChanged(name);\n        if (!this.onPropChangeFunctions)\n            return;\n        for (var i = 0; i < this.onPropChangeFunctions.length; i++) {\n            if (this.onPropChangeFunctions[i].name == name)\n                this.onPropChangeFunctions[i].func(newValue, arrayChanges);\n        }\n    };\n    Base.prototype.onBindingChanged = function (oldValue, newValue) {\n        if (this.isLoadingFromJson)\n            return;\n        this.doPropertyValueChangedCallback(\"bindings\", oldValue, newValue);\n    };\n    Object.defineProperty(Base.prototype, \"isInternal\", {\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.doPropertyValueChangedCallback = function (name, oldValue, newValue, arrayChanges, target) {\n        var fireCallback = function (obj) {\n            if (!!obj && !!obj.onPropertyValueChangedCallback) {\n                obj.onPropertyValueChangedCallback(name, oldValue, newValue, target, arrayChanges);\n            }\n        };\n        if (this.isInternal) {\n            fireCallback(this);\n            return;\n        }\n        if (!target)\n            target = this;\n        var notifier = this.getSurvey();\n        if (!notifier)\n            notifier = this;\n        fireCallback(notifier);\n        if (notifier !== this) {\n            fireCallback(this);\n        }\n    };\n    Base.prototype.addExpressionProperty = function (name, onExecute, canRun) {\n        if (!this.expressionInfo) {\n            this.expressionInfo = {};\n        }\n        this.expressionInfo[name] = { onExecute: onExecute, canRun: canRun };\n    };\n    Base.prototype.getDataFilteredValues = function () {\n        return {};\n    };\n    Base.prototype.getDataFilteredProperties = function () {\n        return {};\n    };\n    Base.prototype.runConditionCore = function (values, properties) {\n        if (!this.expressionInfo)\n            return;\n        for (var key in this.expressionInfo) {\n            this.runConditionItemCore(key, values, properties);\n        }\n    };\n    Base.prototype.canRunConditions = function () {\n        return !this.isDesignMode;\n    };\n    Base.prototype.checkConditionPropertyChanged = function (propName) {\n        if (!this.expressionInfo || !this.expressionInfo[propName])\n            return;\n        if (!this.canRunConditions())\n            return;\n        this.runConditionItemCore(propName, this.getDataFilteredValues(), this.getDataFilteredProperties());\n    };\n    Base.prototype.runConditionItemCore = function (propName, values, properties) {\n        var _this = this;\n        var info = this.expressionInfo[propName];\n        var expression = this.getPropertyValue(propName);\n        if (!expression)\n            return;\n        if (!!info.canRun && !info.canRun(this))\n            return;\n        if (!info.runner) {\n            info.runner = this.createExpressionRunner(expression);\n            info.runner.onRunComplete = function (res) {\n                info.onExecute(_this, res);\n            };\n        }\n        info.runner.expression = expression;\n        info.runner.run(values, properties);\n    };\n    Base.prototype.doBeforeAsynRun = function (id) {\n        if (!this.asynExpressionHash)\n            this.asynExpressionHash = [];\n        var isChanged = !this.isAsyncExpressionRunning;\n        this.asynExpressionHash[id] = true;\n        if (isChanged) {\n            this.onAsyncRunningChanged();\n        }\n    };\n    Base.prototype.doAfterAsynRun = function (id) {\n        if (!!this.asynExpressionHash) {\n            delete this.asynExpressionHash[id];\n            if (!this.isAsyncExpressionRunning) {\n                this.onAsyncRunningChanged();\n            }\n        }\n    };\n    Base.prototype.onAsyncRunningChanged = function () { };\n    Object.defineProperty(Base.prototype, \"isAsyncExpressionRunning\", {\n        get: function () {\n            return !!this.asynExpressionHash && Object.keys(this.asynExpressionHash).length > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.createExpressionRunner = function (expression) {\n        var _this = this;\n        var res = new _conditions__WEBPACK_IMPORTED_MODULE_4__[\"ExpressionRunner\"](expression);\n        res.onBeforeAsyncRun = function (id) { _this.doBeforeAsynRun(id); };\n        res.onAfterAsyncRun = function (id) { _this.doAfterAsynRun(id); };\n        return res;\n    };\n    /**\n     * Registers a function to call when a property value changes.\n     * @param propertyNames An array of one or multiple property names.\n     * @param handler A function to call when one of the listed properties change.\n     * @param key *(Optional)* A key that identifies the current registration. If a function for one of the properties is already registered with the same key, the function will be overwritten. You can also use the key to subsequently unregister handlers.\n     * @see unregisterPropertyChangedHandlers\n     */\n    Base.prototype.registerPropertyChangedHandlers = function (propertyNames, handler, key) {\n        if (key === void 0) { key = null; }\n        for (var i = 0; i < propertyNames.length; i++) {\n            this.registerFunctionOnPropertyValueChanged(propertyNames[i], handler, key);\n        }\n    };\n    /**\n     * Unregisters value change event handlers for the specified properties.\n     * @param propertyNames An array of one or multiple property names.\n     * @param key *(Optional)* A key of the registration that you want to cancel.\n     * @see registerPropertyChangedHandlers\n     */\n    Base.prototype.unregisterPropertyChangedHandlers = function (propertyNames, key) {\n        if (key === void 0) { key = null; }\n        for (var i = 0; i < propertyNames.length; i++) {\n            this.unRegisterFunctionOnPropertyValueChanged(propertyNames[i], key);\n        }\n    };\n    Base.prototype.registerFunctionOnPropertyValueChanged = function (name, func, key) {\n        if (key === void 0) { key = null; }\n        if (!this.onPropChangeFunctions) {\n            this.onPropChangeFunctions = [];\n        }\n        if (key) {\n            for (var i = 0; i < this.onPropChangeFunctions.length; i++) {\n                var item = this.onPropChangeFunctions[i];\n                if (item.name == name && item.key == key) {\n                    item.func = func;\n                    return;\n                }\n            }\n        }\n        this.onPropChangeFunctions.push({ name: name, func: func, key: key });\n    };\n    Base.prototype.registerFunctionOnPropertiesValueChanged = function (names, func, key) {\n        if (key === void 0) { key = null; }\n        this.registerPropertyChangedHandlers(names, func, key);\n    };\n    Base.prototype.unRegisterFunctionOnPropertyValueChanged = function (name, key) {\n        if (key === void 0) { key = null; }\n        if (!this.onPropChangeFunctions)\n            return;\n        for (var i = 0; i < this.onPropChangeFunctions.length; i++) {\n            var item = this.onPropChangeFunctions[i];\n            if (item.name == name && item.key == key) {\n                this.onPropChangeFunctions.splice(i, 1);\n                return;\n            }\n        }\n    };\n    Base.prototype.unRegisterFunctionOnPropertiesValueChanged = function (names, key) {\n        if (key === void 0) { key = null; }\n        this.unregisterPropertyChangedHandlers(names, key);\n    };\n    Base.prototype.createCustomLocalizableObj = function (name) {\n        var locStr = this.getLocalizableString(name);\n        if (locStr)\n            return locStr;\n        return this.createLocalizableString(name, this, false, true);\n    };\n    Base.prototype.getLocale = function () {\n        var locOwner = this.getSurvey();\n        return !!locOwner ? locOwner.getLocale() : \"\";\n    };\n    Base.prototype.getLocalizationString = function (strName) {\n        return _surveyStrings__WEBPACK_IMPORTED_MODULE_5__[\"surveyLocalization\"].getString(strName, this.getLocale());\n    };\n    Base.prototype.getLocalizationFormatString = function (strName) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var str = this.getLocalizationString(strName);\n        if (!str || !str.format)\n            return \"\";\n        return str.format.apply(str, args);\n    };\n    Base.prototype.createLocalizableString = function (name, owner, useMarkDown, defaultStr) {\n        var _this = this;\n        if (useMarkDown === void 0) { useMarkDown = false; }\n        if (defaultStr === void 0) { defaultStr = false; }\n        var locStr = new _localizablestring__WEBPACK_IMPORTED_MODULE_0__[\"LocalizableString\"](owner, useMarkDown, name);\n        if (defaultStr) {\n            locStr.localizationName = defaultStr === true ? name : defaultStr;\n        }\n        locStr.onStrChanged = function (oldValue, newValue) {\n            _this.propertyValueChanged(name, oldValue, newValue);\n        };\n        if (!this.localizableStrings) {\n            this.localizableStrings = {};\n        }\n        this.localizableStrings[name] = locStr;\n        var prop = this.getPropertyByName(name);\n        locStr.disableLocalization = prop && prop.isLocalizable === false;\n        return locStr;\n    };\n    Base.prototype.getLocalizableString = function (name) {\n        return !!this.localizableStrings ? this.localizableStrings[name] : null;\n    };\n    Base.prototype.getLocalizableStringText = function (name, defaultStr) {\n        if (defaultStr === void 0) { defaultStr = \"\"; }\n        Base.collectDependency(this, name);\n        var locStr = this.getLocalizableString(name);\n        if (!locStr)\n            return \"\";\n        var res = locStr.text;\n        return res ? res : defaultStr;\n    };\n    Base.prototype.setLocalizableStringText = function (name, value) {\n        var locStr = this.getLocalizableString(name);\n        if (!locStr)\n            return;\n        var oldValue = locStr.text;\n        if (oldValue != value) {\n            locStr.text = value;\n            // this.propertyValueChanged(name, oldValue, value);\n        }\n    };\n    Base.prototype.addUsedLocales = function (locales) {\n        if (!!this.localizableStrings) {\n            for (var key in this.localizableStrings) {\n                var item = this.getLocalizableString(key);\n                if (item)\n                    this.AddLocStringToUsedLocales(item, locales);\n            }\n        }\n        if (!!this.arraysInfo) {\n            for (var key in this.arraysInfo) {\n                var items = this.getPropertyValue(key);\n                if (!items || !items.length)\n                    continue;\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    if (item && item.addUsedLocales) {\n                        item.addUsedLocales(locales);\n                    }\n                }\n            }\n        }\n    };\n    Base.prototype.searchText = function (text, founded) {\n        var strs = [];\n        this.getSearchableLocalizedStrings(strs);\n        for (var i = 0; i < strs.length; i++) {\n            if (strs[i].setFindText(text)) {\n                founded.push({ element: this, str: strs[i] });\n            }\n        }\n    };\n    Base.prototype.getSearchableLocalizedStrings = function (arr) {\n        if (!!this.localizableStrings) {\n            var keys_1 = [];\n            this.getSearchableLocKeys(keys_1);\n            for (var i = 0; i < keys_1.length; i++) {\n                var item = this.getLocalizableString(keys_1[i]);\n                if (item)\n                    arr.push(item);\n            }\n        }\n        if (!this.arraysInfo)\n            return;\n        var keys = [];\n        this.getSearchableItemValueKeys(keys);\n        for (var i = 0; i < keys.length; i++) {\n            var items = this.getPropertyValue(keys[i]);\n            if (!items)\n                continue;\n            for (var j = 0; j < items.length; j++) {\n                arr.push(items[j].locText);\n            }\n        }\n    };\n    Base.prototype.getSearchableLocKeys = function (keys) { };\n    Base.prototype.getSearchableItemValueKeys = function (keys) { };\n    Base.prototype.AddLocStringToUsedLocales = function (locStr, locales) {\n        var locs = locStr.getLocales();\n        for (var i = 0; i < locs.length; i++) {\n            if (locales.indexOf(locs[i]) < 0) {\n                locales.push(locs[i]);\n            }\n        }\n    };\n    Base.prototype.createItemValues = function (name) {\n        var self = this;\n        var result = this.createNewArray(name, function (item) {\n            item.locOwner = self;\n            item.ownerPropertyName = name;\n            if (typeof item.getSurvey == \"function\") {\n                var survey = item.getSurvey();\n                if (!!survey && typeof survey.makeReactive == \"function\") {\n                    survey.makeReactive(item);\n                }\n            }\n        });\n        this.arraysInfo[name].isItemValues = true;\n        return result;\n    };\n    Base.prototype.notifyArrayChanged = function (ar, arrayChanges) {\n        !!ar.onArrayChanged && ar.onArrayChanged(arrayChanges);\n    };\n    Base.prototype.createNewArrayCore = function (name) {\n        var res = null;\n        if (!!this.createArrayCoreHandler) {\n            res = this.createArrayCoreHandler(this.propertyHash, name);\n        }\n        if (!res) {\n            res = new Array();\n            this.setPropertyValueCore(this.propertyHash, name, res);\n        }\n        return res;\n    };\n    Base.prototype.ensureArray = function (name, onPush, onRemove) {\n        if (onPush === void 0) { onPush = null; }\n        if (onRemove === void 0) { onRemove = null; }\n        if (this.arraysInfo && this.arraysInfo[name]) {\n            return;\n        }\n        return this.createNewArray(name, onPush, onRemove);\n    };\n    Base.prototype.createNewArray = function (name, onPush, onRemove) {\n        if (onPush === void 0) { onPush = null; }\n        if (onRemove === void 0) { onRemove = null; }\n        var newArray = this.createNewArrayCore(name);\n        if (!this.arraysInfo) {\n            this.arraysInfo = {};\n        }\n        this.arraysInfo[name] = { onPush: onPush, isItemValues: false };\n        var self = this;\n        newArray.push = function (value) {\n            var result = Object.getPrototypeOf(newArray).push.call(newArray, value);\n            if (!self.isDisposedValue) {\n                if (onPush)\n                    onPush(value, newArray.length - 1);\n                var arrayChanges = new ArrayChanges(newArray.length - 1, 0, [value], []);\n                self.propertyValueChanged(name, newArray, newArray, arrayChanges);\n                self.notifyArrayChanged(newArray, arrayChanges);\n            }\n            return result;\n        };\n        newArray.shift = function () {\n            var result = Object.getPrototypeOf(newArray).shift.call(newArray);\n            if (!self.isDisposedValue && result) {\n                if (onRemove)\n                    onRemove(result);\n                var arrayChanges = new ArrayChanges(newArray.length - 1, 1, [], []);\n                self.propertyValueChanged(name, newArray, newArray, arrayChanges);\n                self.notifyArrayChanged(newArray, arrayChanges);\n            }\n            return result;\n        };\n        newArray.unshift = function (value) {\n            var result = Object.getPrototypeOf(newArray).unshift.call(newArray, value);\n            if (!self.isDisposedValue) {\n                if (onPush)\n                    onPush(value, newArray.length - 1);\n                var arrayChanges = new ArrayChanges(0, 0, [value], []);\n                self.propertyValueChanged(name, newArray, newArray, arrayChanges);\n                self.notifyArrayChanged(newArray, arrayChanges);\n            }\n            return result;\n        };\n        newArray.pop = function () {\n            var result = Object.getPrototypeOf(newArray).pop.call(newArray);\n            if (!self.isDisposedValue) {\n                if (onRemove)\n                    onRemove(result);\n                var arrayChanges = new ArrayChanges(newArray.length - 1, 1, [], []);\n                self.propertyValueChanged(name, newArray, newArray, arrayChanges);\n                self.notifyArrayChanged(newArray, arrayChanges);\n            }\n            return result;\n        };\n        newArray.splice = function (start, deleteCount) {\n            var _a;\n            var items = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                items[_i - 2] = arguments[_i];\n            }\n            if (!start)\n                start = 0;\n            if (!deleteCount)\n                deleteCount = 0;\n            var result = (_a = Object.getPrototypeOf(newArray).splice).call.apply(_a, __spreadArray([newArray,\n                start,\n                deleteCount], items));\n            if (!items)\n                items = [];\n            if (!self.isDisposedValue) {\n                if (onRemove && result) {\n                    for (var i = 0; i < result.length; i++) {\n                        onRemove(result[i]);\n                    }\n                }\n                if (onPush) {\n                    for (var i = 0; i < items.length; i++) {\n                        onPush(items[i], start + i);\n                    }\n                }\n                var arrayChanges = new ArrayChanges(start, deleteCount, items, result);\n                self.propertyValueChanged(name, newArray, newArray, arrayChanges);\n                self.notifyArrayChanged(newArray, arrayChanges);\n            }\n            return result;\n        };\n        return newArray;\n    };\n    Base.prototype.getItemValueType = function () {\n        return undefined;\n    };\n    Base.prototype.setArray = function (name, src, dest, isItemValues, onPush) {\n        var deletedItems = [].concat(src);\n        Object.getPrototypeOf(src).splice.call(src, 0, src.length);\n        if (!!dest) {\n            for (var i = 0; i < dest.length; i++) {\n                var item = dest[i];\n                if (isItemValues) {\n                    if (!!Base.createItemValue) {\n                        item = Base.createItemValue(item, this.getItemValueType());\n                    }\n                }\n                Object.getPrototypeOf(src).push.call(src, item);\n                if (onPush)\n                    onPush(src[i]);\n            }\n        }\n        var arrayChanges = new ArrayChanges(0, deletedItems.length, src, deletedItems);\n        this.propertyValueChanged(name, deletedItems, src, arrayChanges);\n        this.notifyArrayChanged(src, arrayChanges);\n    };\n    Base.prototype.isTwoValueEquals = function (x, y, caseInSensitive, trimString) {\n        if (caseInSensitive === void 0) { caseInSensitive = false; }\n        if (trimString === void 0) { trimString = false; }\n        return _helpers__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isTwoValueEquals(x, y, false, !caseInSensitive, trimString);\n    };\n    Base.copyObject = function (dst, src) {\n        for (var key in src) {\n            var source = src[key];\n            if (typeof source === \"object\") {\n                source = {};\n                this.copyObject(source, src[key]);\n            }\n            dst[key] = source;\n        }\n    };\n    Base.prototype.copyCssClasses = function (dest, source) {\n        if (!source)\n            return;\n        if (typeof source === \"string\" || source instanceof String) {\n            dest[\"root\"] = source;\n        }\n        else {\n            Base.copyObject(dest, source);\n        }\n    };\n    Base.prototype.getValueInLowCase = function (val) {\n        if (!!val && typeof val == \"string\")\n            return val.toLowerCase();\n        return val;\n    };\n    Base.prototype.getElementsInDesign = function (includeHidden) {\n        if (includeHidden === void 0) { includeHidden = false; }\n        return [];\n    };\n    Base.currentDependencis = undefined;\n    return Base;\n}());\n\nvar ArrayChanges = /** @class */ (function () {\n    function ArrayChanges(index, deleteCount, itemsToAdd, deletedItems) {\n        this.index = index;\n        this.deleteCount = deleteCount;\n        this.itemsToAdd = itemsToAdd;\n        this.deletedItems = deletedItems;\n    }\n    return ArrayChanges;\n}());\n\nvar Event = /** @class */ (function () {\n    function Event() {\n    }\n    Object.defineProperty(Event.prototype, \"isEmpty\", {\n        get: function () {\n            return this.length === 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"length\", {\n        get: function () {\n            return !!this.callbacks ? this.callbacks.length : 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Event.prototype.fireByCreatingOptions = function (sender, createOptions) {\n        if (!this.callbacks)\n            return;\n        for (var i = 0; i < this.callbacks.length; i++) {\n            this.callbacks[i](sender, createOptions());\n            if (!this.callbacks)\n                return;\n        }\n    };\n    Event.prototype.fire = function (sender, options) {\n        if (!this.callbacks)\n            return;\n        for (var i = 0; i < this.callbacks.length; i++) {\n            this.callbacks[i](sender, options);\n            if (!this.callbacks)\n                return;\n        }\n    };\n    Event.prototype.clear = function () {\n        this.callbacks = undefined;\n    };\n    Event.prototype.add = function (func) {\n        if (this.hasFunc(func))\n            return;\n        if (!this.callbacks) {\n            this.callbacks = new Array();\n        }\n        this.callbacks.push(func);\n        this.fireCallbackChanged();\n    };\n    Event.prototype.remove = function (func) {\n        if (this.hasFunc(func)) {\n            var index = this.callbacks.indexOf(func, 0);\n            this.callbacks.splice(index, 1);\n            this.fireCallbackChanged();\n        }\n    };\n    Event.prototype.hasFunc = function (func) {\n        if (this.callbacks == null)\n            return false;\n        return this.callbacks.indexOf(func, 0) > -1;\n    };\n    Event.prototype.fireCallbackChanged = function () {\n        if (!!this.onCallbacksChanged) {\n            this.onCallbacksChanged();\n        }\n    };\n    return Event;\n}());\n\nvar EventBase = /** @class */ (function (_super) {\n    __extends(EventBase, _super);\n    function EventBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EventBase;\n}(Event));\n\n\n\n/***/ }),\n\n/***/ \"./src/conditionProcessValue.ts\":\n/*!**************************************!*\\\n  !*** ./src/conditionProcessValue.ts ***!\n  \\**************************************/\n/*! exports provided: ProcessValue */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_96092__) {\n\n\"use strict\";\n__nested_webpack_require_96092__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_96092__.d(__nested_webpack_exports__, \"ProcessValue\", function() { return ProcessValue; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_96092__(/*! ./helpers */ \"./src/helpers.ts\");\n\nvar surveyBuiltInVarible = \"@survey\";\nvar ProcessValue = /** @class */ (function () {\n    function ProcessValue() {\n        this.values = null;\n        this.properties = null;\n    }\n    ProcessValue.prototype.getFirstName = function (text, obj) {\n        if (obj === void 0) { obj = null; }\n        if (!text)\n            return text;\n        var res = \"\";\n        if (!!obj) {\n            res = this.getFirstPropertyName(text, obj);\n            if (!!res)\n                return res;\n        }\n        for (var i = 0; i < text.length; i++) {\n            var ch = text[i];\n            if (ch == \".\" || ch == \"[\")\n                break;\n            res += ch;\n        }\n        return res;\n    };\n    ProcessValue.prototype.hasValue = function (text, values) {\n        if (values === void 0) { values = null; }\n        if (!values)\n            values = this.values;\n        var res = this.getValueCore(text, values);\n        return res.hasValue;\n    };\n    ProcessValue.prototype.getValue = function (text, values) {\n        if (values === void 0) { values = null; }\n        if (!values)\n            values = this.values;\n        var res = this.getValueCore(text, values);\n        return res.value;\n    };\n    ProcessValue.prototype.setValue = function (obj, text, value) {\n        if (!text)\n            return;\n        var nonNestedObj = this.getNonNestedObject(obj, text, true);\n        if (!nonNestedObj)\n            return;\n        obj = nonNestedObj.value;\n        text = nonNestedObj.text;\n        if (!!obj && !!text) {\n            obj[text] = value;\n        }\n    };\n    ProcessValue.prototype.getValueInfo = function (valueInfo) {\n        if (!!valueInfo.path) {\n            valueInfo.value = this.getValueFromPath(valueInfo.path, this.values);\n            valueInfo.hasValue =\n                valueInfo.value !== null && !_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(valueInfo.value);\n            if (!valueInfo.hasValue &&\n                valueInfo.path.length > 1 &&\n                valueInfo.path[valueInfo.path.length - 1] == \"length\") {\n                valueInfo.hasValue = true;\n                valueInfo.value = 0;\n            }\n            return;\n        }\n        var res = this.getValueCore(valueInfo.name, this.values);\n        valueInfo.value = res.value;\n        valueInfo.hasValue = res.hasValue;\n        valueInfo.path = res.hasValue ? res.path : null;\n        valueInfo.sctrictCompare = res.sctrictCompare;\n    };\n    ProcessValue.prototype.isAnyKeyChanged = function (keys, usedNames) {\n        for (var i = 0; i < usedNames.length; i++) {\n            var name = usedNames[i];\n            if (keys.hasOwnProperty(name))\n                return true;\n            var firstName = this.getFirstName(name);\n            if (!keys.hasOwnProperty(firstName))\n                continue;\n            if (name === firstName)\n                return true;\n            var keyValue = keys[firstName];\n            if (keyValue == undefined)\n                continue;\n            if (!keyValue.hasOwnProperty(\"oldValue\") ||\n                !keyValue.hasOwnProperty(\"newValue\"))\n                return true;\n            var v = {};\n            v[firstName] = keyValue[\"oldValue\"];\n            var oldValue = this.getValue(name, v);\n            v[firstName] = keyValue[\"newValue\"];\n            var newValue = this.getValue(name, v);\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isTwoValueEquals(oldValue, newValue, false, false, false))\n                return true;\n        }\n        return false;\n    };\n    ProcessValue.prototype.getValueFromPath = function (path, values) {\n        if (path.length === 2 && path[0] === surveyBuiltInVarible) {\n            return this.getValueFromSurvey(path[1]);\n        }\n        var index = 0;\n        while (!!values && index < path.length) {\n            var ind_name = path[index];\n            if (_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isNumber(ind_name) &&\n                Array.isArray(values) &&\n                ind_name >= values.length)\n                return null;\n            values = values[ind_name];\n            index++;\n        }\n        return values;\n    };\n    ProcessValue.prototype.getValueCore = function (text, values) {\n        var question = this.getQuestionDirectly(text);\n        if (question) {\n            return { hasValue: true, value: question.value, path: [text], sctrictCompare: question.requireStrictCompare };\n        }\n        var res = this.getValueFromValues(text, values);\n        if (!!text && !res.hasValue) {\n            var val = this.getValueFromSurvey(text);\n            if (val !== undefined) {\n                res.hasValue = true;\n                res.value = val;\n                res.path = [surveyBuiltInVarible, text];\n            }\n        }\n        return res;\n    };\n    ProcessValue.prototype.getQuestionDirectly = function (name) {\n        if (!!this.properties && !!this.properties.survey)\n            return this.properties.survey.getQuestionByValueName(name);\n        return undefined;\n    };\n    ProcessValue.prototype.getValueFromSurvey = function (name) {\n        if (!!this.properties && !!this.properties.survey)\n            return this.properties.survey.getBuiltInVariableValue(name.toLocaleLowerCase());\n        return undefined;\n    };\n    ProcessValue.prototype.getValueFromValues = function (text, values) {\n        var res = { hasValue: false, value: null, path: null };\n        var curValue = values;\n        if (!curValue && curValue !== 0 && curValue !== false)\n            return res;\n        if (text &&\n            text.lastIndexOf(\".length\") > -1 &&\n            text.lastIndexOf(\".length\") === text.length - \".length\".length) {\n            res.value = 0;\n            res.hasValue = true;\n        }\n        var nonNestedObj = this.getNonNestedObject(curValue, text, false);\n        if (!nonNestedObj)\n            return res;\n        res.path = nonNestedObj.path;\n        res.value = !!nonNestedObj.text\n            ? this.getObjectValue(nonNestedObj.value, nonNestedObj.text)\n            : nonNestedObj.value;\n        res.hasValue = !_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(res.value);\n        return res;\n    };\n    ProcessValue.prototype.getNonNestedObject = function (obj, text, createPath) {\n        var checkedKeys = new Array();\n        var len = 0;\n        var res = this.getNonNestedObjectCore(obj, text, createPath, checkedKeys);\n        while (!res && len < checkedKeys.length) {\n            len = checkedKeys.length;\n            res = this.getNonNestedObjectCore(obj, text, createPath, checkedKeys);\n        }\n        return res;\n    };\n    ProcessValue.prototype.getNonNestedObjectCore = function (obj, text, createPath, checkedKeys) {\n        var curName = this.getFirstPropertyName(text, obj, createPath, checkedKeys);\n        if (!!curName) {\n            checkedKeys.push(curName);\n        }\n        var path = !!curName ? [curName] : null;\n        while (text != curName && !!obj) {\n            var isArray = text[0] == \"[\";\n            if (!isArray) {\n                if (!curName && text == this.getFirstName(text))\n                    return { value: obj, text: text, path: path };\n                obj = this.getObjectValue(obj, curName);\n                if (_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(obj) && !createPath)\n                    return null;\n                text = text.substring(curName.length);\n            }\n            else {\n                var objInArray = this.getObjInArray(obj, text);\n                if (!objInArray)\n                    return null;\n                obj = objInArray.value;\n                text = objInArray.text;\n                path.push(objInArray.index);\n            }\n            if (!!text && text[0] == \".\") {\n                text = text.substring(1);\n            }\n            curName = this.getFirstPropertyName(text, obj, createPath, checkedKeys);\n            if (!!curName) {\n                path.push(curName);\n            }\n        }\n        return { value: obj, text: text, path: path };\n    };\n    ProcessValue.prototype.getObjInArray = function (curValue, text) {\n        if (!Array.isArray(curValue))\n            return null;\n        var index = 1;\n        var str = \"\";\n        while (index < text.length && text[index] != \"]\") {\n            str += text[index];\n            index++;\n        }\n        text = index < text.length ? text.substring(index + 1) : \"\";\n        index = this.getIntValue(str);\n        if (index < 0 || index >= curValue.length)\n            return null;\n        return { value: curValue[index], text: text, index: index };\n    };\n    ProcessValue.prototype.getFirstPropertyName = function (name, obj, createProp, checkedKeys) {\n        if (createProp === void 0) { createProp = false; }\n        if (checkedKeys === void 0) { checkedKeys = undefined; }\n        if (!name)\n            return name;\n        if (!obj)\n            obj = {};\n        if (obj.hasOwnProperty(name))\n            return name;\n        var nameInLow = name.toLowerCase();\n        var A = nameInLow[0];\n        var a = A.toUpperCase();\n        for (var key in obj) {\n            if (Array.isArray(checkedKeys) && checkedKeys.indexOf(key) > -1)\n                continue;\n            var first = key[0];\n            if (first === a || first === A) {\n                var keyName = key.toLowerCase();\n                if (keyName == nameInLow)\n                    return key;\n                if (nameInLow.length <= keyName.length)\n                    continue;\n                var ch = nameInLow[keyName.length];\n                if (ch != \".\" && ch != \"[\")\n                    continue;\n                if (keyName == nameInLow.substring(0, keyName.length))\n                    return key;\n            }\n        }\n        if (createProp && name[0] !== \"[\") {\n            var ind = name.indexOf(\".\");\n            if (ind > -1) {\n                name = name.substring(0, ind);\n                obj[name] = {};\n            }\n            return name;\n        }\n        return \"\";\n    };\n    ProcessValue.prototype.getObjectValue = function (obj, name) {\n        if (!name)\n            return null;\n        return obj[name];\n    };\n    ProcessValue.prototype.getIntValue = function (str) {\n        if (str == \"0\" || ((str | 0) > 0 && str % 1 == 0))\n            return Number(str);\n        return -1;\n    };\n    return ProcessValue;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/conditions.ts\":\n/*!***************************!*\\\n  !*** ./src/conditions.ts ***!\n  \\***************************/\n/*! exports provided: ExpressionExecutor, ExpressionRunnerBase, ConditionRunner, ExpressionRunner */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_107120__) {\n\n\"use strict\";\n__nested_webpack_require_107120__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_107120__.d(__nested_webpack_exports__, \"ExpressionExecutor\", function() { return ExpressionExecutor; });\n/* harmony export (binding) */ __nested_webpack_require_107120__.d(__nested_webpack_exports__, \"ExpressionRunnerBase\", function() { return ExpressionRunnerBase; });\n/* harmony export (binding) */ __nested_webpack_require_107120__.d(__nested_webpack_exports__, \"ConditionRunner\", function() { return ConditionRunner; });\n/* harmony export (binding) */ __nested_webpack_require_107120__.d(__nested_webpack_exports__, \"ExpressionRunner\", function() { return ExpressionRunner; });\n/* harmony import */ var _conditionProcessValue__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_107120__(/*! ./conditionProcessValue */ \"./src/conditionProcessValue.ts\");\n/* harmony import */ var _console_warnings__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_107120__(/*! ./console-warnings */ \"./src/console-warnings.ts\");\n/* harmony import */ var _conditionsParser__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_107120__(/*! ./conditionsParser */ \"./src/conditionsParser.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar ExpressionExecutor = /** @class */ (function () {\n    function ExpressionExecutor(expression) {\n        this.processValue = new _conditionProcessValue__WEBPACK_IMPORTED_MODULE_0__[\"ProcessValue\"]();\n        this.parser = new _conditionsParser__WEBPACK_IMPORTED_MODULE_2__[\"ConditionsParser\"]();\n        this.isAsyncValue = false;\n        this.hasFunctionValue = false;\n        this.setExpression(expression);\n    }\n    Object.defineProperty(ExpressionExecutor.prototype, \"expression\", {\n        get: function () {\n            return this.expressionValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ExpressionExecutor.prototype.setExpression = function (value) {\n        if (this.expression === value)\n            return;\n        this.expressionValue = value;\n        this.operand = this.parser.parseExpression(value);\n        this.hasFunctionValue = this.canRun() ? this.operand.hasFunction() : false;\n        this.isAsyncValue = this.hasFunction()\n            ? this.operand.hasAsyncFunction()\n            : false;\n    };\n    ExpressionExecutor.prototype.getVariables = function () {\n        if (!this.operand)\n            return [];\n        var variables = [];\n        this.operand.setVariables(variables);\n        return variables;\n    };\n    ExpressionExecutor.prototype.hasFunction = function () {\n        return this.hasFunctionValue;\n    };\n    Object.defineProperty(ExpressionExecutor.prototype, \"isAsync\", {\n        get: function () {\n            return this.isAsyncValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ExpressionExecutor.prototype.canRun = function () {\n        return !!this.operand;\n    };\n    ExpressionExecutor.prototype.run = function (values, properties) {\n        var _this = this;\n        if (properties === void 0) { properties = null; }\n        if (!this.operand) {\n            if (!!this.expression) {\n                _console_warnings__WEBPACK_IMPORTED_MODULE_1__[\"ConsoleWarnings\"].warn(\"Invalid expression: \" + this.expression);\n            }\n            return null;\n        }\n        this.processValue.values = values;\n        this.processValue.properties = properties;\n        if (!this.isAsync)\n            return this.runValues();\n        this.asyncFuncList = [];\n        this.operand.addToAsyncList(this.asyncFuncList);\n        for (var i = 0; i < this.asyncFuncList.length; i++) {\n            this.asyncFuncList[i].onAsyncReady = function () {\n                _this.doAsyncFunctionReady();\n            };\n        }\n        for (var i = 0; i < this.asyncFuncList.length; i++) {\n            this.asyncFuncList[i].evaluateAsync(this.processValue);\n        }\n        return false;\n    };\n    ExpressionExecutor.prototype.doAsyncFunctionReady = function () {\n        for (var i = 0; i < this.asyncFuncList.length; i++) {\n            if (!this.asyncFuncList[i].isReady)\n                return;\n        }\n        this.runValues();\n    };\n    ExpressionExecutor.prototype.runValues = function () {\n        var res = this.operand.evaluate(this.processValue);\n        if (!!this.onComplete) {\n            this.onComplete(res);\n        }\n        return res;\n    };\n    ExpressionExecutor.createExpressionExecutor = function (expression) { return new ExpressionExecutor(expression); };\n    return ExpressionExecutor;\n}());\n\nvar ExpressionRunnerBase = /** @class */ (function () {\n    function ExpressionRunnerBase(expression) {\n        this._id = ExpressionRunnerBase.IdCounter++;\n        this.expression = expression;\n    }\n    Object.defineProperty(ExpressionRunnerBase.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ExpressionRunnerBase.prototype, \"expression\", {\n        get: function () {\n            return !!this.expressionExecutor ? this.expressionExecutor.expression : \"\";\n        },\n        set: function (value) {\n            var _this = this;\n            if (!!this.expressionExecutor && value === this.expression)\n                return;\n            this.expressionExecutor = ExpressionExecutor.createExpressionExecutor(value);\n            this.expressionExecutor.onComplete = function (res) { _this.doOnComplete(res); };\n            this.variables = undefined;\n            this.containsFunc = undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ExpressionRunnerBase.prototype.getVariables = function () {\n        if (this.variables === undefined) {\n            this.variables = this.expressionExecutor.getVariables();\n        }\n        return this.variables;\n    };\n    ExpressionRunnerBase.prototype.hasFunction = function () {\n        if (this.containsFunc === undefined) {\n            this.containsFunc = this.expressionExecutor.hasFunction();\n        }\n        return this.containsFunc;\n    };\n    Object.defineProperty(ExpressionRunnerBase.prototype, \"isAsync\", {\n        get: function () {\n            return this.expressionExecutor.isAsync;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ExpressionRunnerBase.prototype.canRun = function () {\n        return this.expressionExecutor.canRun();\n    };\n    ExpressionRunnerBase.prototype.runCore = function (values, properties) {\n        if (properties === void 0) { properties = null; }\n        if (this.onBeforeAsyncRun && this.isAsync) {\n            this.onBeforeAsyncRun(this.id);\n        }\n        return this.expressionExecutor.run(values, properties);\n    };\n    ExpressionRunnerBase.prototype.doOnComplete = function (res) {\n        if (this.onAfterAsyncRun && this.isAsync) {\n            this.onAfterAsyncRun(this.id);\n        }\n    };\n    ExpressionRunnerBase.IdCounter = 1;\n    return ExpressionRunnerBase;\n}());\n\nvar ConditionRunner = /** @class */ (function (_super) {\n    __extends(ConditionRunner, _super);\n    function ConditionRunner() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ConditionRunner.prototype.run = function (values, properties) {\n        if (properties === void 0) { properties = null; }\n        return this.runCore(values, properties) == true;\n    };\n    ConditionRunner.prototype.doOnComplete = function (res) {\n        if (!!this.onRunComplete)\n            this.onRunComplete(res == true);\n        _super.prototype.doOnComplete.call(this, res);\n    };\n    return ConditionRunner;\n}(ExpressionRunnerBase));\n\nvar ExpressionRunner = /** @class */ (function (_super) {\n    __extends(ExpressionRunner, _super);\n    function ExpressionRunner() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExpressionRunner.prototype.run = function (values, properties) {\n        if (properties === void 0) { properties = null; }\n        return this.runCore(values, properties);\n    };\n    ExpressionRunner.prototype.doOnComplete = function (res) {\n        if (!!this.onRunComplete)\n            this.onRunComplete(res);\n        _super.prototype.doOnComplete.call(this, res);\n    };\n    return ExpressionRunner;\n}(ExpressionRunnerBase));\n\n\n\n/***/ }),\n\n/***/ \"./src/conditionsParser.ts\":\n/*!*********************************!*\\\n  !*** ./src/conditionsParser.ts ***!\n  \\*********************************/\n/*! exports provided: ConditionsParserError, ConditionsParser */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_116343__) {\n\n\"use strict\";\n__nested_webpack_require_116343__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_116343__.d(__nested_webpack_exports__, \"ConditionsParserError\", function() { return ConditionsParserError; });\n/* harmony export (binding) */ __nested_webpack_require_116343__.d(__nested_webpack_exports__, \"ConditionsParser\", function() { return ConditionsParser; });\n/* harmony import */ var _expressions_expressionParser__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_116343__(/*! ./expressions/expressionParser */ \"./src/expressions/expressionParser.ts\");\n\nvar ConditionsParserError = /** @class */ (function () {\n    function ConditionsParserError(at, code) {\n        this.at = at;\n        this.code = code;\n    }\n    return ConditionsParserError;\n}());\n\nvar ConditionsParser = /** @class */ (function () {\n    function ConditionsParser() {\n    }\n    ConditionsParser.prototype.patchExpression = function (text) {\n        return text\n            .replace(/=>/g, \">=\")\n            .replace(/=</g, \"<=\")\n            .replace(/<>/g, \"!=\")\n            .replace(/equals/g, \"equal \")\n            .replace(/notequals/g, \"notequal \");\n    };\n    ConditionsParser.prototype.createCondition = function (text) {\n        return this.parseExpression(text);\n    };\n    ConditionsParser.prototype.parseExpression = function (text) {\n        try {\n            var result = ConditionsParser.parserCache[text];\n            if (result === undefined) {\n                result = Object(_expressions_expressionParser__WEBPACK_IMPORTED_MODULE_0__[\"parse\"])(this.patchExpression(text));\n                if (!result.hasAsyncFunction()) {\n                    ConditionsParser.parserCache[text] = result;\n                }\n            }\n            return result;\n        }\n        catch (e) {\n            if (e instanceof _expressions_expressionParser__WEBPACK_IMPORTED_MODULE_0__[\"SyntaxError\"]) {\n                this.conditionError = new ConditionsParserError(e.location.start.offset, e.message);\n            }\n        }\n    };\n    Object.defineProperty(ConditionsParser.prototype, \"error\", {\n        get: function () {\n            return this.conditionError;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ConditionsParser.parserCache = {};\n    return ConditionsParser;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/console-warnings.ts\":\n/*!*********************************!*\\\n  !*** ./src/console-warnings.ts ***!\n  \\*********************************/\n/*! exports provided: ConsoleWarnings */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_118873__) {\n\n\"use strict\";\n__nested_webpack_require_118873__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_118873__.d(__nested_webpack_exports__, \"ConsoleWarnings\", function() { return ConsoleWarnings; });\nvar ConsoleWarnings = /** @class */ (function () {\n    function ConsoleWarnings() {\n    }\n    ConsoleWarnings.disposedObjectChangedProperty = function (propName, objType) {\n        ConsoleWarnings.warn(\"An attempt to set a property \\\"\" + propName + \"\\\" of a disposed object \\\"\" + objType + \"\\\"\");\n    };\n    ConsoleWarnings.inCorrectQuestionValue = function (questionName, val) {\n        var valStr = JSON.stringify(val, null, 3);\n        ConsoleWarnings.warn(\"An attempt to assign an incorrect value\" + valStr + \" to the following question: \\\"\" + questionName + \"\\\"\");\n    };\n    ConsoleWarnings.warn = function (text) {\n        // eslint-disable-next-line no-console\n        console.warn(text);\n    };\n    ConsoleWarnings.error = function (text) {\n        // eslint-disable-next-line no-console\n        console.error(text);\n    };\n    return ConsoleWarnings;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/element-helper.ts\":\n/*!*******************************!*\\\n  !*** ./src/element-helper.ts ***!\n  \\*******************************/\n/*! exports provided: ElementHelper */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_120197__) {\n\n\"use strict\";\n__nested_webpack_require_120197__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_120197__.d(__nested_webpack_exports__, \"ElementHelper\", function() { return ElementHelper; });\n/* harmony import */ var _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_120197__(/*! ./global_variables_utils */ \"./src/global_variables_utils.ts\");\n\nvar ElementHelper = /** @class */ (function () {\n    function ElementHelper() {\n    }\n    ElementHelper.focusElement = function (element) {\n        element && element.focus();\n    };\n    ElementHelper.visibility = function (node) {\n        var style = _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomDocumentHelper\"].getComputedStyle(node);\n        if (style.display === \"none\" || style.visibility === \"hidden\")\n            return false;\n        return node.parentElement ? this.visibility(node.parentElement) : true;\n    };\n    ElementHelper.getNextElementPreorder = function (element) {\n        var result = !!element.nextElementSibling ? element.nextElementSibling : element.parentElement.firstElementChild;\n        if (this.visibility(result)) {\n            return result;\n        }\n        else {\n            return this.getNextElementPreorder(result);\n        }\n    };\n    ElementHelper.getNextElementPostorder = function (element) {\n        var result = !!element.previousElementSibling ? element.previousElementSibling : element.parentElement.lastElementChild;\n        if (this.visibility(result)) {\n            return result;\n        }\n        else {\n            return this.getNextElementPostorder(result);\n        }\n    };\n    ElementHelper.hasHorizontalScroller = function (element) {\n        if (!!element) {\n            return element.scrollWidth > element.offsetWidth;\n        }\n        return false;\n    };\n    ElementHelper.hasVerticalScroller = function (element) {\n        if (!!element) {\n            return element.scrollHeight > element.offsetHeight;\n        }\n        return false;\n    };\n    return ElementHelper;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/entries/core-export.ts\":\n/*!************************************!*\\\n  !*** ./src/entries/core-export.ts ***!\n  \\************************************/\n/*! exports provided: SurveyModel, SurveyWindowModel, settings, surveyLocalization, surveyStrings */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_122554__) {\n\n\"use strict\";\n__nested_webpack_require_122554__.r(__nested_webpack_exports__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_122554__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_122554__.n(survey_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (safe) */ __nested_webpack_require_122554__.d(__nested_webpack_exports__, \"SurveyModel\", function() { return survey_core__WEBPACK_IMPORTED_MODULE_0__[\"SurveyModel\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_122554__.d(__nested_webpack_exports__, \"SurveyWindowModel\", function() { return survey_core__WEBPACK_IMPORTED_MODULE_0__[\"SurveyWindowModel\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_122554__.d(__nested_webpack_exports__, \"settings\", function() { return survey_core__WEBPACK_IMPORTED_MODULE_0__[\"settings\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_122554__.d(__nested_webpack_exports__, \"surveyLocalization\", function() { return survey_core__WEBPACK_IMPORTED_MODULE_0__[\"surveyLocalization\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_122554__.d(__nested_webpack_exports__, \"surveyStrings\", function() { return survey_core__WEBPACK_IMPORTED_MODULE_0__[\"surveyStrings\"]; });\n\n\n\n\n\n\n/***/ }),\n\n/***/ \"./src/entries/react-ui-model.ts\":\n/*!***************************************!*\\\n  !*** ./src/entries/react-ui-model.ts ***!\n  \\***************************************/\n/*! exports provided: Survey, attachKey2click, ReactSurveyElementsWrapper, SurveyNavigationBase, SurveyTimerPanel, SurveyPage, SurveyRow, SurveyPanel, SurveyFlowPanel, SurveyQuestion, SurveyElementErrors, SurveyQuestionAndErrorsCell, ReactSurveyElement, SurveyElementBase, SurveyQuestionElementBase, SurveyQuestionCommentItem, SurveyQuestionComment, SurveyQuestionCheckbox, SurveyQuestionCheckboxItem, SurveyQuestionRanking, SurveyQuestionRankingItem, RatingItem, RatingItemStar, RatingItemSmiley, RatingDropdownItem, TagboxFilterString, SurveyQuestionOptionItem, SurveyQuestionDropdownBase, SurveyQuestionDropdown, SurveyQuestionTagboxItem, SurveyQuestionTagbox, SurveyQuestionDropdownSelect, SurveyQuestionMatrix, SurveyQuestionMatrixRow, SurveyQuestionMatrixCell, SurveyQuestionHtml, SurveyQuestionFile, SurveyFileChooseButton, SurveyFilePreview, SurveyQuestionMultipleText, SurveyQuestionRadiogroup, SurveyQuestionRadioItem, SurveyQuestionText, SurveyQuestionBoolean, SurveyQuestionBooleanCheckbox, SurveyQuestionBooleanRadio, SurveyQuestionEmpty, SurveyQuestionMatrixDropdownCell, SurveyQuestionMatrixDropdownBase, SurveyQuestionMatrixDropdown, SurveyQuestionMatrixDynamic, SurveyQuestionMatrixDynamicAddButton, SurveyQuestionPanelDynamic, SurveyProgress, SurveyProgressButtons, SurveyProgressToc, SurveyQuestionRating, SurveyQuestionRatingDropdown, SurveyQuestionExpression, PopupSurvey, SurveyWindow, ReactQuestionFactory, ReactElementFactory, SurveyQuestionImagePicker, SurveyQuestionImage, SurveyQuestionSignaturePad, SurveyQuestionButtonGroup, SurveyQuestionCustom, SurveyQuestionComposite, Popup, List, TitleActions, TitleElement, SurveyActionBar, LogoImage, SurveyHeader, SvgIcon, SurveyQuestionMatrixDynamicRemoveButton, SurveyQuestionMatrixDetailButton, SurveyQuestionMatrixDynamicDragDropIcon, SurveyQuestionPanelDynamicAddButton, SurveyQuestionPanelDynamicRemoveButton, SurveyQuestionPanelDynamicPrevButton, SurveyQuestionPanelDynamicNextButton, SurveyQuestionPanelDynamicProgressText, SurveyNavigationButton, MatrixRow, Skeleton, NotifierComponent, ComponentsContainer, CharacterCounterComponent, HeaderMobile, HeaderCell, Header, SurveyLocStringViewer, SurveyLocStringEditor, LoadingIndicatorComponent, SvgBundleComponent */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_126266__) {\n\n\"use strict\";\n__nested_webpack_require_126266__.r(__nested_webpack_exports__);\n/* harmony import */ var _react_reactSurvey__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_126266__(/*! ../react/reactSurvey */ \"./src/react/reactSurvey.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"Survey\", function() { return _react_reactSurvey__WEBPACK_IMPORTED_MODULE_0__[\"Survey\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"attachKey2click\", function() { return _react_reactSurvey__WEBPACK_IMPORTED_MODULE_0__[\"attachKey2click\"]; });\n\n/* harmony import */ var _react_reactsurveymodel__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_126266__(/*! ../react/reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"ReactSurveyElementsWrapper\", function() { return _react_reactsurveymodel__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElementsWrapper\"]; });\n\n/* harmony import */ var _react_reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_126266__(/*! ../react/reactSurveyNavigationBase */ \"./src/react/reactSurveyNavigationBase.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyNavigationBase\", function() { return _react_reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_2__[\"SurveyNavigationBase\"]; });\n\n/* harmony import */ var _react_reacttimerpanel__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_126266__(/*! ../react/reacttimerpanel */ \"./src/react/reacttimerpanel.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyTimerPanel\", function() { return _react_reacttimerpanel__WEBPACK_IMPORTED_MODULE_3__[\"SurveyTimerPanel\"]; });\n\n/* harmony import */ var _react_page__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_126266__(/*! ../react/page */ \"./src/react/page.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyPage\", function() { return _react_page__WEBPACK_IMPORTED_MODULE_4__[\"SurveyPage\"]; });\n\n/* harmony import */ var _react_row__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_126266__(/*! ../react/row */ \"./src/react/row.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyRow\", function() { return _react_row__WEBPACK_IMPORTED_MODULE_5__[\"SurveyRow\"]; });\n\n/* harmony import */ var _react_panel__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_126266__(/*! ../react/panel */ \"./src/react/panel.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyPanel\", function() { return _react_panel__WEBPACK_IMPORTED_MODULE_6__[\"SurveyPanel\"]; });\n\n/* harmony import */ var _react_flow_panel__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_126266__(/*! ../react/flow-panel */ \"./src/react/flow-panel.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyFlowPanel\", function() { return _react_flow_panel__WEBPACK_IMPORTED_MODULE_7__[\"SurveyFlowPanel\"]; });\n\n/* harmony import */ var _react_reactquestion__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_126266__(/*! ../react/reactquestion */ \"./src/react/reactquestion.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestion\", function() { return _react_reactquestion__WEBPACK_IMPORTED_MODULE_8__[\"SurveyQuestion\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyElementErrors\", function() { return _react_reactquestion__WEBPACK_IMPORTED_MODULE_8__[\"SurveyElementErrors\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionAndErrorsCell\", function() { return _react_reactquestion__WEBPACK_IMPORTED_MODULE_8__[\"SurveyQuestionAndErrorsCell\"]; });\n\n/* harmony import */ var _react_reactquestion_element__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"ReactSurveyElement\", function() { return _react_reactquestion_element__WEBPACK_IMPORTED_MODULE_9__[\"ReactSurveyElement\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyElementBase\", function() { return _react_reactquestion_element__WEBPACK_IMPORTED_MODULE_9__[\"SurveyElementBase\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionElementBase\", function() { return _react_reactquestion_element__WEBPACK_IMPORTED_MODULE_9__[\"SurveyQuestionElementBase\"]; });\n\n/* harmony import */ var _react_reactquestion_comment__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_comment */ \"./src/react/reactquestion_comment.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionCommentItem\", function() { return _react_reactquestion_comment__WEBPACK_IMPORTED_MODULE_10__[\"SurveyQuestionCommentItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionComment\", function() { return _react_reactquestion_comment__WEBPACK_IMPORTED_MODULE_10__[\"SurveyQuestionComment\"]; });\n\n/* harmony import */ var _react_reactquestion_checkbox__WEBPACK_IMPORTED_MODULE_11__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_checkbox */ \"./src/react/reactquestion_checkbox.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionCheckbox\", function() { return _react_reactquestion_checkbox__WEBPACK_IMPORTED_MODULE_11__[\"SurveyQuestionCheckbox\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionCheckboxItem\", function() { return _react_reactquestion_checkbox__WEBPACK_IMPORTED_MODULE_11__[\"SurveyQuestionCheckboxItem\"]; });\n\n/* harmony import */ var _react_reactquestion_ranking__WEBPACK_IMPORTED_MODULE_12__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_ranking */ \"./src/react/reactquestion_ranking.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionRanking\", function() { return _react_reactquestion_ranking__WEBPACK_IMPORTED_MODULE_12__[\"SurveyQuestionRanking\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionRankingItem\", function() { return _react_reactquestion_ranking__WEBPACK_IMPORTED_MODULE_12__[\"SurveyQuestionRankingItem\"]; });\n\n/* harmony import */ var _react_components_rating_rating_item__WEBPACK_IMPORTED_MODULE_13__ = __nested_webpack_require_126266__(/*! ../react/components/rating/rating-item */ \"./src/react/components/rating/rating-item.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"RatingItem\", function() { return _react_components_rating_rating_item__WEBPACK_IMPORTED_MODULE_13__[\"RatingItem\"]; });\n\n/* harmony import */ var _react_components_rating_rating_item_star__WEBPACK_IMPORTED_MODULE_14__ = __nested_webpack_require_126266__(/*! ../react/components/rating/rating-item-star */ \"./src/react/components/rating/rating-item-star.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"RatingItemStar\", function() { return _react_components_rating_rating_item_star__WEBPACK_IMPORTED_MODULE_14__[\"RatingItemStar\"]; });\n\n/* harmony import */ var _react_components_rating_rating_item_smiley__WEBPACK_IMPORTED_MODULE_15__ = __nested_webpack_require_126266__(/*! ../react/components/rating/rating-item-smiley */ \"./src/react/components/rating/rating-item-smiley.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"RatingItemSmiley\", function() { return _react_components_rating_rating_item_smiley__WEBPACK_IMPORTED_MODULE_15__[\"RatingItemSmiley\"]; });\n\n/* harmony import */ var _react_components_rating_rating_dropdown_item__WEBPACK_IMPORTED_MODULE_16__ = __nested_webpack_require_126266__(/*! ../react/components/rating/rating-dropdown-item */ \"./src/react/components/rating/rating-dropdown-item.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"RatingDropdownItem\", function() { return _react_components_rating_rating_dropdown_item__WEBPACK_IMPORTED_MODULE_16__[\"RatingDropdownItem\"]; });\n\n/* harmony import */ var _react_tagbox_filter__WEBPACK_IMPORTED_MODULE_17__ = __nested_webpack_require_126266__(/*! ../react/tagbox-filter */ \"./src/react/tagbox-filter.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"TagboxFilterString\", function() { return _react_tagbox_filter__WEBPACK_IMPORTED_MODULE_17__[\"TagboxFilterString\"]; });\n\n/* harmony import */ var _react_dropdown_item__WEBPACK_IMPORTED_MODULE_18__ = __nested_webpack_require_126266__(/*! ../react/dropdown-item */ \"./src/react/dropdown-item.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionOptionItem\", function() { return _react_dropdown_item__WEBPACK_IMPORTED_MODULE_18__[\"SurveyQuestionOptionItem\"]; });\n\n/* harmony import */ var _react_dropdown_base__WEBPACK_IMPORTED_MODULE_19__ = __nested_webpack_require_126266__(/*! ../react/dropdown-base */ \"./src/react/dropdown-base.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionDropdownBase\", function() { return _react_dropdown_base__WEBPACK_IMPORTED_MODULE_19__[\"SurveyQuestionDropdownBase\"]; });\n\n/* harmony import */ var _react_reactquestion_dropdown__WEBPACK_IMPORTED_MODULE_20__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_dropdown */ \"./src/react/reactquestion_dropdown.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionDropdown\", function() { return _react_reactquestion_dropdown__WEBPACK_IMPORTED_MODULE_20__[\"SurveyQuestionDropdown\"]; });\n\n/* harmony import */ var _react_tagbox_item__WEBPACK_IMPORTED_MODULE_21__ = __nested_webpack_require_126266__(/*! ../react/tagbox-item */ \"./src/react/tagbox-item.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionTagboxItem\", function() { return _react_tagbox_item__WEBPACK_IMPORTED_MODULE_21__[\"SurveyQuestionTagboxItem\"]; });\n\n/* harmony import */ var _react_reactquestion_tagbox__WEBPACK_IMPORTED_MODULE_22__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_tagbox */ \"./src/react/reactquestion_tagbox.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionTagbox\", function() { return _react_reactquestion_tagbox__WEBPACK_IMPORTED_MODULE_22__[\"SurveyQuestionTagbox\"]; });\n\n/* harmony import */ var _react_dropdown_select__WEBPACK_IMPORTED_MODULE_23__ = __nested_webpack_require_126266__(/*! ../react/dropdown-select */ \"./src/react/dropdown-select.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionDropdownSelect\", function() { return _react_dropdown_select__WEBPACK_IMPORTED_MODULE_23__[\"SurveyQuestionDropdownSelect\"]; });\n\n/* harmony import */ var _react_reactquestion_matrix__WEBPACK_IMPORTED_MODULE_24__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_matrix */ \"./src/react/reactquestion_matrix.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrix\", function() { return _react_reactquestion_matrix__WEBPACK_IMPORTED_MODULE_24__[\"SurveyQuestionMatrix\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixRow\", function() { return _react_reactquestion_matrix__WEBPACK_IMPORTED_MODULE_24__[\"SurveyQuestionMatrixRow\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixCell\", function() { return _react_reactquestion_matrix__WEBPACK_IMPORTED_MODULE_24__[\"SurveyQuestionMatrixCell\"]; });\n\n/* harmony import */ var _react_reactquestion_html__WEBPACK_IMPORTED_MODULE_25__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_html */ \"./src/react/reactquestion_html.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionHtml\", function() { return _react_reactquestion_html__WEBPACK_IMPORTED_MODULE_25__[\"SurveyQuestionHtml\"]; });\n\n/* harmony import */ var _react_reactquestion_file__WEBPACK_IMPORTED_MODULE_26__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_file */ \"./src/react/reactquestion_file.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionFile\", function() { return _react_reactquestion_file__WEBPACK_IMPORTED_MODULE_26__[\"SurveyQuestionFile\"]; });\n\n/* harmony import */ var _react_components_file_file_choose_button__WEBPACK_IMPORTED_MODULE_27__ = __nested_webpack_require_126266__(/*! ../react/components/file/file-choose-button */ \"./src/react/components/file/file-choose-button.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyFileChooseButton\", function() { return _react_components_file_file_choose_button__WEBPACK_IMPORTED_MODULE_27__[\"SurveyFileChooseButton\"]; });\n\n/* harmony import */ var _react_components_file_file_preview__WEBPACK_IMPORTED_MODULE_28__ = __nested_webpack_require_126266__(/*! ../react/components/file/file-preview */ \"./src/react/components/file/file-preview.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyFilePreview\", function() { return _react_components_file_file_preview__WEBPACK_IMPORTED_MODULE_28__[\"SurveyFilePreview\"]; });\n\n/* harmony import */ var _react_reactquestion_multipletext__WEBPACK_IMPORTED_MODULE_29__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_multipletext */ \"./src/react/reactquestion_multipletext.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMultipleText\", function() { return _react_reactquestion_multipletext__WEBPACK_IMPORTED_MODULE_29__[\"SurveyQuestionMultipleText\"]; });\n\n/* harmony import */ var _react_reactquestion_radiogroup__WEBPACK_IMPORTED_MODULE_30__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_radiogroup */ \"./src/react/reactquestion_radiogroup.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionRadiogroup\", function() { return _react_reactquestion_radiogroup__WEBPACK_IMPORTED_MODULE_30__[\"SurveyQuestionRadiogroup\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionRadioItem\", function() { return _react_reactquestion_radiogroup__WEBPACK_IMPORTED_MODULE_30__[\"SurveyQuestionRadioItem\"]; });\n\n/* harmony import */ var _react_reactquestion_text__WEBPACK_IMPORTED_MODULE_31__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_text */ \"./src/react/reactquestion_text.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionText\", function() { return _react_reactquestion_text__WEBPACK_IMPORTED_MODULE_31__[\"SurveyQuestionText\"]; });\n\n/* harmony import */ var _react_boolean__WEBPACK_IMPORTED_MODULE_32__ = __nested_webpack_require_126266__(/*! ../react/boolean */ \"./src/react/boolean.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionBoolean\", function() { return _react_boolean__WEBPACK_IMPORTED_MODULE_32__[\"SurveyQuestionBoolean\"]; });\n\n/* harmony import */ var _react_boolean_checkbox__WEBPACK_IMPORTED_MODULE_33__ = __nested_webpack_require_126266__(/*! ../react/boolean-checkbox */ \"./src/react/boolean-checkbox.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionBooleanCheckbox\", function() { return _react_boolean_checkbox__WEBPACK_IMPORTED_MODULE_33__[\"SurveyQuestionBooleanCheckbox\"]; });\n\n/* harmony import */ var _react_boolean_radio__WEBPACK_IMPORTED_MODULE_34__ = __nested_webpack_require_126266__(/*! ../react/boolean-radio */ \"./src/react/boolean-radio.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionBooleanRadio\", function() { return _react_boolean_radio__WEBPACK_IMPORTED_MODULE_34__[\"SurveyQuestionBooleanRadio\"]; });\n\n/* harmony import */ var _react_reactquestion_empty__WEBPACK_IMPORTED_MODULE_35__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_empty */ \"./src/react/reactquestion_empty.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionEmpty\", function() { return _react_reactquestion_empty__WEBPACK_IMPORTED_MODULE_35__[\"SurveyQuestionEmpty\"]; });\n\n/* harmony import */ var _react_reactquestion_matrixdropdownbase__WEBPACK_IMPORTED_MODULE_36__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_matrixdropdownbase */ \"./src/react/reactquestion_matrixdropdownbase.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdownCell\", function() { return _react_reactquestion_matrixdropdownbase__WEBPACK_IMPORTED_MODULE_36__[\"SurveyQuestionMatrixDropdownCell\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdownBase\", function() { return _react_reactquestion_matrixdropdownbase__WEBPACK_IMPORTED_MODULE_36__[\"SurveyQuestionMatrixDropdownBase\"]; });\n\n/* harmony import */ var _react_reactquestion_matrixdropdown__WEBPACK_IMPORTED_MODULE_37__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_matrixdropdown */ \"./src/react/reactquestion_matrixdropdown.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdown\", function() { return _react_reactquestion_matrixdropdown__WEBPACK_IMPORTED_MODULE_37__[\"SurveyQuestionMatrixDropdown\"]; });\n\n/* harmony import */ var _react_reactquestion_matrixdynamic__WEBPACK_IMPORTED_MODULE_38__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_matrixdynamic */ \"./src/react/reactquestion_matrixdynamic.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamic\", function() { return _react_reactquestion_matrixdynamic__WEBPACK_IMPORTED_MODULE_38__[\"SurveyQuestionMatrixDynamic\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicAddButton\", function() { return _react_reactquestion_matrixdynamic__WEBPACK_IMPORTED_MODULE_38__[\"SurveyQuestionMatrixDynamicAddButton\"]; });\n\n/* harmony import */ var _react_reactquestion_paneldynamic__WEBPACK_IMPORTED_MODULE_39__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_paneldynamic */ \"./src/react/reactquestion_paneldynamic.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamic\", function() { return _react_reactquestion_paneldynamic__WEBPACK_IMPORTED_MODULE_39__[\"SurveyQuestionPanelDynamic\"]; });\n\n/* harmony import */ var _react_progress__WEBPACK_IMPORTED_MODULE_40__ = __nested_webpack_require_126266__(/*! ../react/progress */ \"./src/react/progress.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyProgress\", function() { return _react_progress__WEBPACK_IMPORTED_MODULE_40__[\"SurveyProgress\"]; });\n\n/* harmony import */ var _react_progressButtons__WEBPACK_IMPORTED_MODULE_41__ = __nested_webpack_require_126266__(/*! ../react/progressButtons */ \"./src/react/progressButtons.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyProgressButtons\", function() { return _react_progressButtons__WEBPACK_IMPORTED_MODULE_41__[\"SurveyProgressButtons\"]; });\n\n/* harmony import */ var _react_progressToc__WEBPACK_IMPORTED_MODULE_42__ = __nested_webpack_require_126266__(/*! ../react/progressToc */ \"./src/react/progressToc.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyProgressToc\", function() { return _react_progressToc__WEBPACK_IMPORTED_MODULE_42__[\"SurveyProgressToc\"]; });\n\n/* harmony import */ var _react_reactquestion_rating__WEBPACK_IMPORTED_MODULE_43__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_rating */ \"./src/react/reactquestion_rating.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionRating\", function() { return _react_reactquestion_rating__WEBPACK_IMPORTED_MODULE_43__[\"SurveyQuestionRating\"]; });\n\n/* harmony import */ var _react_rating_dropdown__WEBPACK_IMPORTED_MODULE_44__ = __nested_webpack_require_126266__(/*! ../react/rating-dropdown */ \"./src/react/rating-dropdown.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionRatingDropdown\", function() { return _react_rating_dropdown__WEBPACK_IMPORTED_MODULE_44__[\"SurveyQuestionRatingDropdown\"]; });\n\n/* harmony import */ var _react_reactquestion_expression__WEBPACK_IMPORTED_MODULE_45__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_expression */ \"./src/react/reactquestion_expression.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionExpression\", function() { return _react_reactquestion_expression__WEBPACK_IMPORTED_MODULE_45__[\"SurveyQuestionExpression\"]; });\n\n/* harmony import */ var _react_react_popup_survey__WEBPACK_IMPORTED_MODULE_46__ = __nested_webpack_require_126266__(/*! ../react/react-popup-survey */ \"./src/react/react-popup-survey.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"PopupSurvey\", function() { return _react_react_popup_survey__WEBPACK_IMPORTED_MODULE_46__[\"PopupSurvey\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyWindow\", function() { return _react_react_popup_survey__WEBPACK_IMPORTED_MODULE_46__[\"SurveyWindow\"]; });\n\n/* harmony import */ var _react_reactquestion_factory__WEBPACK_IMPORTED_MODULE_47__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"ReactQuestionFactory\", function() { return _react_reactquestion_factory__WEBPACK_IMPORTED_MODULE_47__[\"ReactQuestionFactory\"]; });\n\n/* harmony import */ var _react_element_factory__WEBPACK_IMPORTED_MODULE_48__ = __nested_webpack_require_126266__(/*! ../react/element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"ReactElementFactory\", function() { return _react_element_factory__WEBPACK_IMPORTED_MODULE_48__[\"ReactElementFactory\"]; });\n\n/* harmony import */ var _react_imagepicker__WEBPACK_IMPORTED_MODULE_49__ = __nested_webpack_require_126266__(/*! ../react/imagepicker */ \"./src/react/imagepicker.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionImagePicker\", function() { return _react_imagepicker__WEBPACK_IMPORTED_MODULE_49__[\"SurveyQuestionImagePicker\"]; });\n\n/* harmony import */ var _react_image__WEBPACK_IMPORTED_MODULE_50__ = __nested_webpack_require_126266__(/*! ../react/image */ \"./src/react/image.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionImage\", function() { return _react_image__WEBPACK_IMPORTED_MODULE_50__[\"SurveyQuestionImage\"]; });\n\n/* harmony import */ var _react_signaturepad__WEBPACK_IMPORTED_MODULE_51__ = __nested_webpack_require_126266__(/*! ../react/signaturepad */ \"./src/react/signaturepad.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionSignaturePad\", function() { return _react_signaturepad__WEBPACK_IMPORTED_MODULE_51__[\"SurveyQuestionSignaturePad\"]; });\n\n/* harmony import */ var _react_reactquestion_buttongroup__WEBPACK_IMPORTED_MODULE_52__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_buttongroup */ \"./src/react/reactquestion_buttongroup.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionButtonGroup\", function() { return _react_reactquestion_buttongroup__WEBPACK_IMPORTED_MODULE_52__[\"SurveyQuestionButtonGroup\"]; });\n\n/* harmony import */ var _react_reactquestion_custom__WEBPACK_IMPORTED_MODULE_53__ = __nested_webpack_require_126266__(/*! ../react/reactquestion_custom */ \"./src/react/reactquestion_custom.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionCustom\", function() { return _react_reactquestion_custom__WEBPACK_IMPORTED_MODULE_53__[\"SurveyQuestionCustom\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionComposite\", function() { return _react_reactquestion_custom__WEBPACK_IMPORTED_MODULE_53__[\"SurveyQuestionComposite\"]; });\n\n/* harmony import */ var _react_components_popup_popup__WEBPACK_IMPORTED_MODULE_54__ = __nested_webpack_require_126266__(/*! ../react/components/popup/popup */ \"./src/react/components/popup/popup.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"Popup\", function() { return _react_components_popup_popup__WEBPACK_IMPORTED_MODULE_54__[\"Popup\"]; });\n\n/* harmony import */ var _react_components_list_list__WEBPACK_IMPORTED_MODULE_55__ = __nested_webpack_require_126266__(/*! ../react/components/list/list */ \"./src/react/components/list/list.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"List\", function() { return _react_components_list_list__WEBPACK_IMPORTED_MODULE_55__[\"List\"]; });\n\n/* harmony import */ var _react_components_title_title_actions__WEBPACK_IMPORTED_MODULE_56__ = __nested_webpack_require_126266__(/*! ../react/components/title/title-actions */ \"./src/react/components/title/title-actions.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"TitleActions\", function() { return _react_components_title_title_actions__WEBPACK_IMPORTED_MODULE_56__[\"TitleActions\"]; });\n\n/* harmony import */ var _react_components_title_title_element__WEBPACK_IMPORTED_MODULE_57__ = __nested_webpack_require_126266__(/*! ../react/components/title/title-element */ \"./src/react/components/title/title-element.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"TitleElement\", function() { return _react_components_title_title_element__WEBPACK_IMPORTED_MODULE_57__[\"TitleElement\"]; });\n\n/* harmony import */ var _react_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_58__ = __nested_webpack_require_126266__(/*! ../react/components/action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyActionBar\", function() { return _react_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_58__[\"SurveyActionBar\"]; });\n\n/* harmony import */ var _react_components_survey_header_logo_image__WEBPACK_IMPORTED_MODULE_59__ = __nested_webpack_require_126266__(/*! ../react/components/survey-header/logo-image */ \"./src/react/components/survey-header/logo-image.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"LogoImage\", function() { return _react_components_survey_header_logo_image__WEBPACK_IMPORTED_MODULE_59__[\"LogoImage\"]; });\n\n/* harmony import */ var _react_components_survey_header_survey_header__WEBPACK_IMPORTED_MODULE_60__ = __nested_webpack_require_126266__(/*! ../react/components/survey-header/survey-header */ \"./src/react/components/survey-header/survey-header.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyHeader\", function() { return _react_components_survey_header_survey_header__WEBPACK_IMPORTED_MODULE_60__[\"SurveyHeader\"]; });\n\n/* harmony import */ var _react_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_61__ = __nested_webpack_require_126266__(/*! ../react/components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SvgIcon\", function() { return _react_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_61__[\"SvgIcon\"]; });\n\n/* harmony import */ var _react_components_matrix_actions_remove_button_remove_button__WEBPACK_IMPORTED_MODULE_62__ = __nested_webpack_require_126266__(/*! ../react/components/matrix-actions/remove-button/remove-button */ \"./src/react/components/matrix-actions/remove-button/remove-button.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicRemoveButton\", function() { return _react_components_matrix_actions_remove_button_remove_button__WEBPACK_IMPORTED_MODULE_62__[\"SurveyQuestionMatrixDynamicRemoveButton\"]; });\n\n/* harmony import */ var _react_components_matrix_actions_detail_button_detail_button__WEBPACK_IMPORTED_MODULE_63__ = __nested_webpack_require_126266__(/*! ../react/components/matrix-actions/detail-button/detail-button */ \"./src/react/components/matrix-actions/detail-button/detail-button.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDetailButton\", function() { return _react_components_matrix_actions_detail_button_detail_button__WEBPACK_IMPORTED_MODULE_63__[\"SurveyQuestionMatrixDetailButton\"]; });\n\n/* harmony import */ var _react_components_matrix_actions_drag_drop_icon_drag_drop_icon__WEBPACK_IMPORTED_MODULE_64__ = __nested_webpack_require_126266__(/*! ../react/components/matrix-actions/drag-drop-icon/drag-drop-icon */ \"./src/react/components/matrix-actions/drag-drop-icon/drag-drop-icon.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicDragDropIcon\", function() { return _react_components_matrix_actions_drag_drop_icon_drag_drop_icon__WEBPACK_IMPORTED_MODULE_64__[\"SurveyQuestionMatrixDynamicDragDropIcon\"]; });\n\n/* harmony import */ var _react_components_paneldynamic_actions_paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_65__ = __nested_webpack_require_126266__(/*! ../react/components/paneldynamic-actions/paneldynamic-add-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-add-btn.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicAddButton\", function() { return _react_components_paneldynamic_actions_paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_65__[\"SurveyQuestionPanelDynamicAddButton\"]; });\n\n/* harmony import */ var _react_components_paneldynamic_actions_paneldynamic_remove_btn__WEBPACK_IMPORTED_MODULE_66__ = __nested_webpack_require_126266__(/*! ../react/components/paneldynamic-actions/paneldynamic-remove-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-remove-btn.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicRemoveButton\", function() { return _react_components_paneldynamic_actions_paneldynamic_remove_btn__WEBPACK_IMPORTED_MODULE_66__[\"SurveyQuestionPanelDynamicRemoveButton\"]; });\n\n/* harmony import */ var _react_components_paneldynamic_actions_paneldynamic_prev_btn__WEBPACK_IMPORTED_MODULE_67__ = __nested_webpack_require_126266__(/*! ../react/components/paneldynamic-actions/paneldynamic-prev-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-prev-btn.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicPrevButton\", function() { return _react_components_paneldynamic_actions_paneldynamic_prev_btn__WEBPACK_IMPORTED_MODULE_67__[\"SurveyQuestionPanelDynamicPrevButton\"]; });\n\n/* harmony import */ var _react_components_paneldynamic_actions_paneldynamic_next_btn__WEBPACK_IMPORTED_MODULE_68__ = __nested_webpack_require_126266__(/*! ../react/components/paneldynamic-actions/paneldynamic-next-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-next-btn.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicNextButton\", function() { return _react_components_paneldynamic_actions_paneldynamic_next_btn__WEBPACK_IMPORTED_MODULE_68__[\"SurveyQuestionPanelDynamicNextButton\"]; });\n\n/* harmony import */ var _react_components_paneldynamic_actions_paneldynamic_progress_text__WEBPACK_IMPORTED_MODULE_69__ = __nested_webpack_require_126266__(/*! ../react/components/paneldynamic-actions/paneldynamic-progress-text */ \"./src/react/components/paneldynamic-actions/paneldynamic-progress-text.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicProgressText\", function() { return _react_components_paneldynamic_actions_paneldynamic_progress_text__WEBPACK_IMPORTED_MODULE_69__[\"SurveyQuestionPanelDynamicProgressText\"]; });\n\n/* harmony import */ var _react_components_survey_actions_survey_nav_button__WEBPACK_IMPORTED_MODULE_70__ = __nested_webpack_require_126266__(/*! ../react/components/survey-actions/survey-nav-button */ \"./src/react/components/survey-actions/survey-nav-button.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyNavigationButton\", function() { return _react_components_survey_actions_survey_nav_button__WEBPACK_IMPORTED_MODULE_70__[\"SurveyNavigationButton\"]; });\n\n/* harmony import */ var _react_components_matrix_row__WEBPACK_IMPORTED_MODULE_71__ = __nested_webpack_require_126266__(/*! ../react/components/matrix/row */ \"./src/react/components/matrix/row.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"MatrixRow\", function() { return _react_components_matrix_row__WEBPACK_IMPORTED_MODULE_71__[\"MatrixRow\"]; });\n\n/* harmony import */ var _react_components_skeleton__WEBPACK_IMPORTED_MODULE_72__ = __nested_webpack_require_126266__(/*! ../react/components/skeleton */ \"./src/react/components/skeleton.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"Skeleton\", function() { return _react_components_skeleton__WEBPACK_IMPORTED_MODULE_72__[\"Skeleton\"]; });\n\n/* harmony import */ var _react_components_notifier__WEBPACK_IMPORTED_MODULE_73__ = __nested_webpack_require_126266__(/*! ../react/components/notifier */ \"./src/react/components/notifier.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"NotifierComponent\", function() { return _react_components_notifier__WEBPACK_IMPORTED_MODULE_73__[\"NotifierComponent\"]; });\n\n/* harmony import */ var _react_components_components_container__WEBPACK_IMPORTED_MODULE_74__ = __nested_webpack_require_126266__(/*! ../react/components/components-container */ \"./src/react/components/components-container.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"ComponentsContainer\", function() { return _react_components_components_container__WEBPACK_IMPORTED_MODULE_74__[\"ComponentsContainer\"]; });\n\n/* harmony import */ var _react_components_character_counter__WEBPACK_IMPORTED_MODULE_75__ = __nested_webpack_require_126266__(/*! ../react/components/character-counter */ \"./src/react/components/character-counter.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"CharacterCounterComponent\", function() { return _react_components_character_counter__WEBPACK_IMPORTED_MODULE_75__[\"CharacterCounterComponent\"]; });\n\n/* harmony import */ var _react_components_header__WEBPACK_IMPORTED_MODULE_76__ = __nested_webpack_require_126266__(/*! ../react/components/header */ \"./src/react/components/header.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"HeaderMobile\", function() { return _react_components_header__WEBPACK_IMPORTED_MODULE_76__[\"HeaderMobile\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"HeaderCell\", function() { return _react_components_header__WEBPACK_IMPORTED_MODULE_76__[\"HeaderCell\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"Header\", function() { return _react_components_header__WEBPACK_IMPORTED_MODULE_76__[\"Header\"]; });\n\n/* harmony import */ var _react_string_viewer__WEBPACK_IMPORTED_MODULE_77__ = __nested_webpack_require_126266__(/*! ../react/string-viewer */ \"./src/react/string-viewer.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyLocStringViewer\", function() { return _react_string_viewer__WEBPACK_IMPORTED_MODULE_77__[\"SurveyLocStringViewer\"]; });\n\n/* harmony import */ var _react_string_editor__WEBPACK_IMPORTED_MODULE_78__ = __nested_webpack_require_126266__(/*! ../react/string-editor */ \"./src/react/string-editor.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SurveyLocStringEditor\", function() { return _react_string_editor__WEBPACK_IMPORTED_MODULE_78__[\"SurveyLocStringEditor\"]; });\n\n/* harmony import */ var _react_components_loading_indicator__WEBPACK_IMPORTED_MODULE_79__ = __nested_webpack_require_126266__(/*! ../react/components/loading-indicator */ \"./src/react/components/loading-indicator.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"LoadingIndicatorComponent\", function() { return _react_components_loading_indicator__WEBPACK_IMPORTED_MODULE_79__[\"LoadingIndicatorComponent\"]; });\n\n/* harmony import */ var _react_svgbundle__WEBPACK_IMPORTED_MODULE_80__ = __nested_webpack_require_126266__(/*! ../react/svgbundle */ \"./src/react/svgbundle.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_126266__.d(__nested_webpack_exports__, \"SvgBundleComponent\", function() { return _react_svgbundle__WEBPACK_IMPORTED_MODULE_80__[\"SvgBundleComponent\"]; });\n\n// react\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//Uncomment to include the \"date\" question type.\n//export {default as SurveyQuestionDate} from \"../plugins/react/reactquestiondate\";\n\n\n/***/ }),\n\n/***/ \"./src/entries/react-ui.ts\":\n/*!*********************************!*\\\n  !*** ./src/entries/react-ui.ts ***!\n  \\*********************************/\n/*! exports provided: Survey, attachKey2click, ReactSurveyElementsWrapper, SurveyNavigationBase, SurveyTimerPanel, SurveyPage, SurveyRow, SurveyPanel, SurveyFlowPanel, SurveyQuestion, SurveyElementErrors, SurveyQuestionAndErrorsCell, ReactSurveyElement, SurveyElementBase, SurveyQuestionElementBase, SurveyQuestionCommentItem, SurveyQuestionComment, SurveyQuestionCheckbox, SurveyQuestionCheckboxItem, SurveyQuestionRanking, SurveyQuestionRankingItem, RatingItem, RatingItemStar, RatingItemSmiley, RatingDropdownItem, TagboxFilterString, SurveyQuestionOptionItem, SurveyQuestionDropdownBase, SurveyQuestionDropdown, SurveyQuestionTagboxItem, SurveyQuestionTagbox, SurveyQuestionDropdownSelect, SurveyQuestionMatrix, SurveyQuestionMatrixRow, SurveyQuestionMatrixCell, SurveyQuestionHtml, SurveyQuestionFile, SurveyFileChooseButton, SurveyFilePreview, SurveyQuestionMultipleText, SurveyQuestionRadiogroup, SurveyQuestionRadioItem, SurveyQuestionText, SurveyQuestionBoolean, SurveyQuestionBooleanCheckbox, SurveyQuestionBooleanRadio, SurveyQuestionEmpty, SurveyQuestionMatrixDropdownCell, SurveyQuestionMatrixDropdownBase, SurveyQuestionMatrixDropdown, SurveyQuestionMatrixDynamic, SurveyQuestionMatrixDynamicAddButton, SurveyQuestionPanelDynamic, SurveyProgress, SurveyProgressButtons, SurveyProgressToc, SurveyQuestionRating, SurveyQuestionRatingDropdown, SurveyQuestionExpression, PopupSurvey, SurveyWindow, ReactQuestionFactory, ReactElementFactory, SurveyQuestionImagePicker, SurveyQuestionImage, SurveyQuestionSignaturePad, SurveyQuestionButtonGroup, SurveyQuestionCustom, SurveyQuestionComposite, Popup, List, TitleActions, TitleElement, SurveyActionBar, LogoImage, SurveyHeader, SvgIcon, SurveyQuestionMatrixDynamicRemoveButton, SurveyQuestionMatrixDetailButton, SurveyQuestionMatrixDynamicDragDropIcon, SurveyQuestionPanelDynamicAddButton, SurveyQuestionPanelDynamicRemoveButton, SurveyQuestionPanelDynamicPrevButton, SurveyQuestionPanelDynamicNextButton, SurveyQuestionPanelDynamicProgressText, SurveyNavigationButton, MatrixRow, Skeleton, NotifierComponent, ComponentsContainer, CharacterCounterComponent, HeaderMobile, HeaderCell, Header, SurveyLocStringViewer, SurveyLocStringEditor, LoadingIndicatorComponent, SvgBundleComponent, SurveyModel, SurveyWindowModel, settings, surveyLocalization, surveyStrings, Model, ResponsivityManager, VerticalResponsivityManager, unwrap */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_165349__) {\n\n\"use strict\";\n__nested_webpack_require_165349__.r(__nested_webpack_exports__);\n/* harmony import */ var _react_ui_model__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_165349__(/*! ./react-ui-model */ \"./src/entries/react-ui-model.ts\");\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"Survey\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"Survey\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"attachKey2click\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"attachKey2click\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"ReactSurveyElementsWrapper\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"ReactSurveyElementsWrapper\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyNavigationBase\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyNavigationBase\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyTimerPanel\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyTimerPanel\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyPage\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyPage\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyRow\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyRow\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyPanel\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyPanel\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyFlowPanel\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyFlowPanel\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestion\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestion\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyElementErrors\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyElementErrors\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionAndErrorsCell\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionAndErrorsCell\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"ReactSurveyElement\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"ReactSurveyElement\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyElementBase\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyElementBase\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionElementBase\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionElementBase\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionCommentItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionCommentItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionComment\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionComment\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionCheckbox\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionCheckbox\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionCheckboxItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionCheckboxItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionRanking\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionRanking\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionRankingItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionRankingItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"RatingItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"RatingItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"RatingItemStar\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"RatingItemStar\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"RatingItemSmiley\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"RatingItemSmiley\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"RatingDropdownItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"RatingDropdownItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"TagboxFilterString\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"TagboxFilterString\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionOptionItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionOptionItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionDropdownBase\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionDropdownBase\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionDropdown\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionDropdown\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionTagboxItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionTagboxItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionTagbox\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionTagbox\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionDropdownSelect\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionDropdownSelect\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrix\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrix\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixRow\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixRow\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixCell\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixCell\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionHtml\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionHtml\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionFile\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionFile\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyFileChooseButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyFileChooseButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyFilePreview\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyFilePreview\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMultipleText\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMultipleText\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionRadiogroup\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionRadiogroup\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionRadioItem\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionRadioItem\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionText\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionText\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionBoolean\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionBoolean\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionBooleanCheckbox\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionBooleanCheckbox\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionBooleanRadio\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionBooleanRadio\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionEmpty\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionEmpty\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdownCell\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDropdownCell\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdownBase\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDropdownBase\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdown\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDropdown\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamic\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDynamic\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicAddButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDynamicAddButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamic\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionPanelDynamic\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyProgress\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyProgress\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyProgressButtons\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyProgressButtons\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyProgressToc\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyProgressToc\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionRating\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionRating\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionRatingDropdown\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionRatingDropdown\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionExpression\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionExpression\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"PopupSurvey\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"PopupSurvey\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyWindow\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyWindow\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"ReactQuestionFactory\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"ReactQuestionFactory\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"ReactElementFactory\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"ReactElementFactory\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionImagePicker\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionImagePicker\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionImage\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionImage\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionSignaturePad\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionSignaturePad\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionButtonGroup\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionButtonGroup\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionCustom\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionCustom\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionComposite\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionComposite\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"Popup\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"Popup\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"List\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"List\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"TitleActions\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"TitleActions\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"TitleElement\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"TitleElement\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyActionBar\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyActionBar\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"LogoImage\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"LogoImage\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyHeader\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyHeader\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SvgIcon\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SvgIcon\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicRemoveButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDynamicRemoveButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDetailButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDetailButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicDragDropIcon\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionMatrixDynamicDragDropIcon\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicAddButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionPanelDynamicAddButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicRemoveButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionPanelDynamicRemoveButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicPrevButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionPanelDynamicPrevButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicNextButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionPanelDynamicNextButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicProgressText\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionPanelDynamicProgressText\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyNavigationButton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyNavigationButton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"MatrixRow\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"MatrixRow\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"Skeleton\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"Skeleton\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"NotifierComponent\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"NotifierComponent\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"ComponentsContainer\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"ComponentsContainer\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"CharacterCounterComponent\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"CharacterCounterComponent\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"HeaderMobile\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"HeaderMobile\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"HeaderCell\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"HeaderCell\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"Header\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"Header\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyLocStringViewer\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyLocStringViewer\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyLocStringEditor\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SurveyLocStringEditor\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"LoadingIndicatorComponent\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"LoadingIndicatorComponent\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SvgBundleComponent\", function() { return _react_ui_model__WEBPACK_IMPORTED_MODULE_0__[\"SvgBundleComponent\"]; });\n\n/* harmony import */ var _core_export__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_165349__(/*! ./core-export */ \"./src/entries/core-export.ts\");\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyModel\", function() { return _core_export__WEBPACK_IMPORTED_MODULE_1__[\"SurveyModel\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"SurveyWindowModel\", function() { return _core_export__WEBPACK_IMPORTED_MODULE_1__[\"SurveyWindowModel\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"settings\", function() { return _core_export__WEBPACK_IMPORTED_MODULE_1__[\"settings\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"surveyLocalization\", function() { return _core_export__WEBPACK_IMPORTED_MODULE_1__[\"surveyLocalization\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"surveyStrings\", function() { return _core_export__WEBPACK_IMPORTED_MODULE_1__[\"surveyStrings\"]; });\n\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_165349__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__nested_webpack_require_165349__.n(survey_core__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"Model\", function() { return survey_core__WEBPACK_IMPORTED_MODULE_2__[\"SurveyModel\"]; });\n\n/* harmony import */ var _utils_responsivity_manager__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_165349__(/*! ../utils/responsivity-manager */ \"./src/utils/responsivity-manager.ts\");\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"ResponsivityManager\", function() { return _utils_responsivity_manager__WEBPACK_IMPORTED_MODULE_3__[\"ResponsivityManager\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"VerticalResponsivityManager\", function() { return _utils_responsivity_manager__WEBPACK_IMPORTED_MODULE_3__[\"VerticalResponsivityManager\"]; });\n\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_165349__(/*! ../utils/utils */ \"./src/utils/utils.ts\");\n/* harmony reexport (safe) */ __nested_webpack_require_165349__.d(__nested_webpack_exports__, \"unwrap\", function() { return _utils_utils__WEBPACK_IMPORTED_MODULE_4__[\"unwrap\"]; });\n\n\n\n\n\n\n\nObject(survey_core__WEBPACK_IMPORTED_MODULE_2__[\"checkLibraryVersion\"])(\"\" + \"1.9.138\", \"survey-react-ui\");\n\n\n/***/ }),\n\n/***/ \"./src/expressions/expressionParser.ts\":\n/*!*********************************************!*\\\n  !*** ./src/expressions/expressionParser.ts ***!\n  \\*********************************************/\n/*! exports provided: SyntaxError, parse */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_187301__) {\n\n\"use strict\";\n__nested_webpack_require_187301__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_187301__.d(__nested_webpack_exports__, \"SyntaxError\", function() { return SyntaxError; });\n/* harmony export (binding) */ __nested_webpack_require_187301__.d(__nested_webpack_exports__, \"parse\", function() { return parse; });\n/* harmony import */ var _expressions__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_187301__(/*! ./expressions */ \"./src/expressions/expressions.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable */\n\n// Generated by PEG.js v. 0.10.0 (ts-pegjs plugin v. 0.3.1 )\n//\n// https://pegjs.org/   https://github.com/metadevpro/ts-pegjs\n\"use strict\";\nvar SyntaxError = /** @class */ (function (_super) {\n    __extends(SyntaxError, _super);\n    function SyntaxError(message, expected, found, location) {\n        var _this = _super.call(this) || this;\n        _this.message = message;\n        _this.expected = expected;\n        _this.found = found;\n        _this.location = location;\n        _this.name = \"SyntaxError\";\n        if (typeof Error.captureStackTrace === \"function\") {\n            Error.captureStackTrace(_this, SyntaxError);\n        }\n        return _this;\n    }\n    SyntaxError.buildMessage = function (expected, found) {\n        function hex(ch) {\n            return ch.charCodeAt(0).toString(16).toUpperCase();\n        }\n        function literalEscape(s) {\n            return s\n                .replace(/\\\\/g, \"\\\\\\\\\")\n                .replace(/\"/g, \"\\\\\\\"\")\n                .replace(/\\0/g, \"\\\\0\")\n                .replace(/\\t/g, \"\\\\t\")\n                .replace(/\\n/g, \"\\\\n\")\n                .replace(/\\r/g, \"\\\\r\")\n                .replace(/[\\x00-\\x0F]/g, function (ch) { return \"\\\\x0\" + hex(ch); })\n                .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function (ch) { return \"\\\\x\" + hex(ch); });\n        }\n        function classEscape(s) {\n            return s\n                .replace(/\\\\/g, \"\\\\\\\\\")\n                .replace(/\\]/g, \"\\\\]\")\n                .replace(/\\^/g, \"\\\\^\")\n                .replace(/-/g, \"\\\\-\")\n                .replace(/\\0/g, \"\\\\0\")\n                .replace(/\\t/g, \"\\\\t\")\n                .replace(/\\n/g, \"\\\\n\")\n                .replace(/\\r/g, \"\\\\r\")\n                .replace(/[\\x00-\\x0F]/g, function (ch) { return \"\\\\x0\" + hex(ch); })\n                .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function (ch) { return \"\\\\x\" + hex(ch); });\n        }\n        function describeExpectation(expectation) {\n            switch (expectation.type) {\n                case \"literal\":\n                    return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n                case \"class\":\n                    var escapedParts = expectation.parts.map(function (part) {\n                        return Array.isArray(part)\n                            ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n                            : classEscape(part);\n                    });\n                    return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n                case \"any\":\n                    return \"any character\";\n                case \"end\":\n                    return \"end of input\";\n                case \"other\":\n                    return expectation.description;\n            }\n        }\n        function describeExpected(expected1) {\n            var descriptions = expected1.map(describeExpectation);\n            var i;\n            var j;\n            descriptions.sort();\n            if (descriptions.length > 0) {\n                for (i = 1, j = 1; i < descriptions.length; i++) {\n                    if (descriptions[i - 1] !== descriptions[i]) {\n                        descriptions[j] = descriptions[i];\n                        j++;\n                    }\n                }\n                descriptions.length = j;\n            }\n            switch (descriptions.length) {\n                case 1:\n                    return descriptions[0];\n                case 2:\n                    return descriptions[0] + \" or \" + descriptions[1];\n                default:\n                    return descriptions.slice(0, -1).join(\", \")\n                        + \", or \"\n                        + descriptions[descriptions.length - 1];\n            }\n        }\n        function describeFound(found1) {\n            return found1 ? \"\\\"\" + literalEscape(found1) + \"\\\"\" : \"end of input\";\n        }\n        return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n    };\n    return SyntaxError;\n}(Error));\n\nfunction peg$parse(input, options) {\n    options = options !== undefined ? options : {};\n    var peg$FAILED = {};\n    var peg$startRuleFunctions = { Expression: peg$parseExpression };\n    var peg$startRuleFunction = peg$parseExpression;\n    var peg$c0 = function (head, tail) {\n        return buildBinaryOperand(head, tail, true);\n    };\n    var peg$c1 = \"||\";\n    var peg$c2 = peg$literalExpectation(\"||\", false);\n    var peg$c3 = \"or\";\n    var peg$c4 = peg$literalExpectation(\"or\", true);\n    var peg$c5 = function () { return \"or\"; };\n    var peg$c6 = \"&&\";\n    var peg$c7 = peg$literalExpectation(\"&&\", false);\n    var peg$c8 = \"and\";\n    var peg$c9 = peg$literalExpectation(\"and\", true);\n    var peg$c10 = function () { return \"and\"; };\n    var peg$c11 = function (head, tail) {\n        return buildBinaryOperand(head, tail);\n    };\n    var peg$c12 = \"<=\";\n    var peg$c13 = peg$literalExpectation(\"<=\", false);\n    var peg$c14 = \"lessorequal\";\n    var peg$c15 = peg$literalExpectation(\"lessorequal\", true);\n    var peg$c16 = function () { return \"lessorequal\"; };\n    var peg$c17 = \">=\";\n    var peg$c18 = peg$literalExpectation(\">=\", false);\n    var peg$c19 = \"greaterorequal\";\n    var peg$c20 = peg$literalExpectation(\"greaterorequal\", true);\n    var peg$c21 = function () { return \"greaterorequal\"; };\n    var peg$c22 = \"==\";\n    var peg$c23 = peg$literalExpectation(\"==\", false);\n    var peg$c24 = \"equal\";\n    var peg$c25 = peg$literalExpectation(\"equal\", true);\n    var peg$c26 = function () { return \"equal\"; };\n    var peg$c27 = \"=\";\n    var peg$c28 = peg$literalExpectation(\"=\", false);\n    var peg$c29 = \"!=\";\n    var peg$c30 = peg$literalExpectation(\"!=\", false);\n    var peg$c31 = \"notequal\";\n    var peg$c32 = peg$literalExpectation(\"notequal\", true);\n    var peg$c33 = function () { return \"notequal\"; };\n    var peg$c34 = \"<\";\n    var peg$c35 = peg$literalExpectation(\"<\", false);\n    var peg$c36 = \"less\";\n    var peg$c37 = peg$literalExpectation(\"less\", true);\n    var peg$c38 = function () { return \"less\"; };\n    var peg$c39 = \">\";\n    var peg$c40 = peg$literalExpectation(\">\", false);\n    var peg$c41 = \"greater\";\n    var peg$c42 = peg$literalExpectation(\"greater\", true);\n    var peg$c43 = function () { return \"greater\"; };\n    var peg$c44 = \"+\";\n    var peg$c45 = peg$literalExpectation(\"+\", false);\n    var peg$c46 = function () { return \"plus\"; };\n    var peg$c47 = \"-\";\n    var peg$c48 = peg$literalExpectation(\"-\", false);\n    var peg$c49 = function () { return \"minus\"; };\n    var peg$c50 = \"*\";\n    var peg$c51 = peg$literalExpectation(\"*\", false);\n    var peg$c52 = function () { return \"mul\"; };\n    var peg$c53 = \"/\";\n    var peg$c54 = peg$literalExpectation(\"/\", false);\n    var peg$c55 = function () { return \"div\"; };\n    var peg$c56 = \"%\";\n    var peg$c57 = peg$literalExpectation(\"%\", false);\n    var peg$c58 = function () { return \"mod\"; };\n    var peg$c59 = \"^\";\n    var peg$c60 = peg$literalExpectation(\"^\", false);\n    var peg$c61 = \"power\";\n    var peg$c62 = peg$literalExpectation(\"power\", true);\n    var peg$c63 = function () { return \"power\"; };\n    var peg$c64 = \"*=\";\n    var peg$c65 = peg$literalExpectation(\"*=\", false);\n    var peg$c66 = \"contains\";\n    var peg$c67 = peg$literalExpectation(\"contains\", true);\n    var peg$c68 = \"contain\";\n    var peg$c69 = peg$literalExpectation(\"contain\", true);\n    var peg$c70 = function () { return \"contains\"; };\n    var peg$c71 = \"notcontains\";\n    var peg$c72 = peg$literalExpectation(\"notcontains\", true);\n    var peg$c73 = \"notcontain\";\n    var peg$c74 = peg$literalExpectation(\"notcontain\", true);\n    var peg$c75 = function () { return \"notcontains\"; };\n    var peg$c76 = \"anyof\";\n    var peg$c77 = peg$literalExpectation(\"anyof\", true);\n    var peg$c78 = function () { return \"anyof\"; };\n    var peg$c79 = \"allof\";\n    var peg$c80 = peg$literalExpectation(\"allof\", true);\n    var peg$c81 = function () { return \"allof\"; };\n    var peg$c82 = \"(\";\n    var peg$c83 = peg$literalExpectation(\"(\", false);\n    var peg$c84 = \")\";\n    var peg$c85 = peg$literalExpectation(\")\", false);\n    var peg$c86 = function (expr) { return expr; };\n    var peg$c87 = function (name, params) { return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"FunctionOperand\"](name, params); };\n    var peg$c88 = \"!\";\n    var peg$c89 = peg$literalExpectation(\"!\", false);\n    var peg$c90 = \"negate\";\n    var peg$c91 = peg$literalExpectation(\"negate\", true);\n    var peg$c92 = function (expr) { return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"UnaryOperand\"](expr, \"negate\"); };\n    var peg$c93 = function (expr, op) { return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"UnaryOperand\"](expr, op); };\n    var peg$c94 = \"empty\";\n    var peg$c95 = peg$literalExpectation(\"empty\", true);\n    var peg$c96 = function () { return \"empty\"; };\n    var peg$c97 = \"notempty\";\n    var peg$c98 = peg$literalExpectation(\"notempty\", true);\n    var peg$c99 = function () { return \"notempty\"; };\n    var peg$c100 = \"undefined\";\n    var peg$c101 = peg$literalExpectation(\"undefined\", false);\n    var peg$c102 = \"null\";\n    var peg$c103 = peg$literalExpectation(\"null\", false);\n    var peg$c104 = function () { return null; };\n    var peg$c105 = function (value) { return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"Const\"](value); };\n    var peg$c106 = \"{\";\n    var peg$c107 = peg$literalExpectation(\"{\", false);\n    var peg$c108 = \"}\";\n    var peg$c109 = peg$literalExpectation(\"}\", false);\n    var peg$c110 = function (value) { return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"Variable\"](value); };\n    var peg$c111 = function (value) { return value; };\n    var peg$c112 = \"''\";\n    var peg$c113 = peg$literalExpectation(\"''\", false);\n    var peg$c114 = function () { return \"\"; };\n    var peg$c115 = \"\\\"\\\"\";\n    var peg$c116 = peg$literalExpectation(\"\\\"\\\"\", false);\n    var peg$c117 = \"'\";\n    var peg$c118 = peg$literalExpectation(\"'\", false);\n    var peg$c119 = function (value) { return \"'\" + value + \"'\"; };\n    var peg$c120 = \"\\\"\";\n    var peg$c121 = peg$literalExpectation(\"\\\"\", false);\n    var peg$c122 = \"[\";\n    var peg$c123 = peg$literalExpectation(\"[\", false);\n    var peg$c124 = \"]\";\n    var peg$c125 = peg$literalExpectation(\"]\", false);\n    var peg$c126 = function (sequence) { return sequence; };\n    var peg$c127 = \",\";\n    var peg$c128 = peg$literalExpectation(\",\", false);\n    var peg$c129 = function (expr, tail) {\n        if (expr == null)\n            return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"ArrayOperand\"]([]);\n        var array = [expr];\n        if (Array.isArray(tail)) {\n            var flatten = flattenArray(tail);\n            for (var i = 3; i < flatten.length; i += 4) {\n                array.push(flatten[i]);\n            }\n        }\n        return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"ArrayOperand\"](array);\n    };\n    var peg$c130 = \"true\";\n    var peg$c131 = peg$literalExpectation(\"true\", true);\n    var peg$c132 = function () { return true; };\n    var peg$c133 = \"false\";\n    var peg$c134 = peg$literalExpectation(\"false\", true);\n    var peg$c135 = function () { return false; };\n    var peg$c136 = \"0x\";\n    var peg$c137 = peg$literalExpectation(\"0x\", false);\n    var peg$c138 = function () { return parseInt(text(), 16); };\n    var peg$c139 = /^[\\-]/;\n    var peg$c140 = peg$classExpectation([\"-\"], false, false);\n    var peg$c141 = function (sign, num) { return sign == null ? num : -num; };\n    var peg$c142 = \".\";\n    var peg$c143 = peg$literalExpectation(\".\", false);\n    var peg$c144 = function () { return parseFloat(text()); };\n    var peg$c145 = function () { return parseInt(text(), 10); };\n    var peg$c146 = \"0\";\n    var peg$c147 = peg$literalExpectation(\"0\", false);\n    var peg$c148 = function () { return 0; };\n    var peg$c149 = function (chars) { return chars.join(\"\"); };\n    var peg$c150 = \"\\\\'\";\n    var peg$c151 = peg$literalExpectation(\"\\\\'\", false);\n    var peg$c152 = function () { return \"'\"; };\n    var peg$c153 = \"\\\\\\\"\";\n    var peg$c154 = peg$literalExpectation(\"\\\\\\\"\", false);\n    var peg$c155 = function () { return \"\\\"\"; };\n    var peg$c156 = /^[^\"']/;\n    var peg$c157 = peg$classExpectation([\"\\\"\", \"'\"], true, false);\n    var peg$c158 = function () { return text(); };\n    var peg$c159 = /^[^{}]/;\n    var peg$c160 = peg$classExpectation([\"{\", \"}\"], true, false);\n    var peg$c161 = /^[0-9]/;\n    var peg$c162 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n    var peg$c163 = /^[1-9]/;\n    var peg$c164 = peg$classExpectation([[\"1\", \"9\"]], false, false);\n    var peg$c165 = /^[a-zA-Z_]/;\n    var peg$c166 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], \"_\"], false, false);\n    var peg$c167 = peg$otherExpectation(\"whitespace\");\n    var peg$c168 = /^[ \\t\\n\\r]/;\n    var peg$c169 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false);\n    var peg$currPos = 0;\n    var peg$savedPos = 0;\n    var peg$posDetailsCache = [{ line: 1, column: 1 }];\n    var peg$maxFailPos = 0;\n    var peg$maxFailExpected = [];\n    var peg$silentFails = 0;\n    var peg$resultsCache = {};\n    var peg$result;\n    if (options.startRule !== undefined) {\n        if (!(options.startRule in peg$startRuleFunctions)) {\n            throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n        }\n        peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n    function text() {\n        return input.substring(peg$savedPos, peg$currPos);\n    }\n    function location() {\n        return peg$computeLocation(peg$savedPos, peg$currPos);\n    }\n    function expected(description, location1) {\n        location1 = location1 !== undefined\n            ? location1\n            : peg$computeLocation(peg$savedPos, peg$currPos);\n        throw peg$buildStructuredError([peg$otherExpectation(description)], input.substring(peg$savedPos, peg$currPos), location1);\n    }\n    function error(message, location1) {\n        location1 = location1 !== undefined\n            ? location1\n            : peg$computeLocation(peg$savedPos, peg$currPos);\n        throw peg$buildSimpleError(message, location1);\n    }\n    function peg$literalExpectation(text1, ignoreCase) {\n        return { type: \"literal\", text: text1, ignoreCase: ignoreCase };\n    }\n    function peg$classExpectation(parts, inverted, ignoreCase) {\n        return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n    }\n    function peg$anyExpectation() {\n        return { type: \"any\" };\n    }\n    function peg$endExpectation() {\n        return { type: \"end\" };\n    }\n    function peg$otherExpectation(description) {\n        return { type: \"other\", description: description };\n    }\n    function peg$computePosDetails(pos) {\n        var details = peg$posDetailsCache[pos];\n        var p;\n        if (details) {\n            return details;\n        }\n        else {\n            p = pos - 1;\n            while (!peg$posDetailsCache[p]) {\n                p--;\n            }\n            details = peg$posDetailsCache[p];\n            details = {\n                line: details.line,\n                column: details.column\n            };\n            while (p < pos) {\n                if (input.charCodeAt(p) === 10) {\n                    details.line++;\n                    details.column = 1;\n                }\n                else {\n                    details.column++;\n                }\n                p++;\n            }\n            peg$posDetailsCache[pos] = details;\n            return details;\n        }\n    }\n    function peg$computeLocation(startPos, endPos) {\n        var startPosDetails = peg$computePosDetails(startPos);\n        var endPosDetails = peg$computePosDetails(endPos);\n        return {\n            start: {\n                offset: startPos,\n                line: startPosDetails.line,\n                column: startPosDetails.column\n            },\n            end: {\n                offset: endPos,\n                line: endPosDetails.line,\n                column: endPosDetails.column\n            }\n        };\n    }\n    function peg$fail(expected1) {\n        if (peg$currPos < peg$maxFailPos) {\n            return;\n        }\n        if (peg$currPos > peg$maxFailPos) {\n            peg$maxFailPos = peg$currPos;\n            peg$maxFailExpected = [];\n        }\n        peg$maxFailExpected.push(expected1);\n    }\n    function peg$buildSimpleError(message, location1) {\n        return new SyntaxError(message, [], \"\", location1);\n    }\n    function peg$buildStructuredError(expected1, found, location1) {\n        return new SyntaxError(SyntaxError.buildMessage(expected1, found), expected1, found, location1);\n    }\n    function peg$parseExpression() {\n        var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n        var key = peg$currPos * 34 + 0;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parse_();\n        if (s1 !== peg$FAILED) {\n            s2 = peg$parseLogicOr();\n            if (s2 !== peg$FAILED) {\n                s3 = [];\n                s4 = peg$currPos;\n                s5 = peg$parse_();\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parseOrSign();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parse_();\n                        if (s7 !== peg$FAILED) {\n                            s8 = peg$parseLogicOr();\n                            if (s8 !== peg$FAILED) {\n                                s5 = [s5, s6, s7, s8];\n                                s4 = s5;\n                            }\n                            else {\n                                peg$currPos = s4;\n                                s4 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s4;\n                            s4 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s4;\n                        s4 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s4;\n                    s4 = peg$FAILED;\n                }\n                while (s4 !== peg$FAILED) {\n                    s3.push(s4);\n                    s4 = peg$currPos;\n                    s5 = peg$parse_();\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parseOrSign();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parse_();\n                            if (s7 !== peg$FAILED) {\n                                s8 = peg$parseLogicOr();\n                                if (s8 !== peg$FAILED) {\n                                    s5 = [s5, s6, s7, s8];\n                                    s4 = s5;\n                                }\n                                else {\n                                    peg$currPos = s4;\n                                    s4 = peg$FAILED;\n                                }\n                            }\n                            else {\n                                peg$currPos = s4;\n                                s4 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s4;\n                            s4 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s4;\n                        s4 = peg$FAILED;\n                    }\n                }\n                if (s3 !== peg$FAILED) {\n                    s4 = peg$parse_();\n                    if (s4 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c0(s2, s3);\n                        s0 = s1;\n                    }\n                    else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseOrSign() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 1;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c1) {\n            s1 = peg$c1;\n            peg$currPos += 2;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c2);\n            }\n        }\n        if (s1 === peg$FAILED) {\n            if (input.substr(peg$currPos, 2).toLowerCase() === peg$c3) {\n                s1 = input.substr(peg$currPos, 2);\n                peg$currPos += 2;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c4);\n                }\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c5();\n        }\n        s0 = s1;\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseLogicOr() {\n        var s0, s1, s2, s3, s4, s5, s6, s7;\n        var key = peg$currPos * 34 + 2;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseLogicAnd();\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n                s5 = peg$parseAndSign();\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parse_();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parseLogicAnd();\n                        if (s7 !== peg$FAILED) {\n                            s4 = [s4, s5, s6, s7];\n                            s3 = s4;\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                    s5 = peg$parseAndSign();\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parse_();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parseLogicAnd();\n                            if (s7 !== peg$FAILED) {\n                                s4 = [s4, s5, s6, s7];\n                                s3 = s4;\n                            }\n                            else {\n                                peg$currPos = s3;\n                                s3 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c0(s1, s2);\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseAndSign() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 3;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c6) {\n            s1 = peg$c6;\n            peg$currPos += 2;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c7);\n            }\n        }\n        if (s1 === peg$FAILED) {\n            if (input.substr(peg$currPos, 3).toLowerCase() === peg$c8) {\n                s1 = input.substr(peg$currPos, 3);\n                peg$currPos += 3;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c9);\n                }\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c10();\n        }\n        s0 = s1;\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseLogicAnd() {\n        var s0, s1, s2, s3, s4, s5, s6, s7;\n        var key = peg$currPos * 34 + 4;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseCompOps();\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n                s5 = peg$parseComparableOperators();\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parse_();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parseCompOps();\n                        if (s7 !== peg$FAILED) {\n                            s4 = [s4, s5, s6, s7];\n                            s3 = s4;\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                    s5 = peg$parseComparableOperators();\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parse_();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parseCompOps();\n                            if (s7 !== peg$FAILED) {\n                                s4 = [s4, s5, s6, s7];\n                                s3 = s4;\n                            }\n                            else {\n                                peg$currPos = s3;\n                                s3 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c11(s1, s2);\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseComparableOperators() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 5;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c12) {\n            s1 = peg$c12;\n            peg$currPos += 2;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c13);\n            }\n        }\n        if (s1 === peg$FAILED) {\n            if (input.substr(peg$currPos, 11).toLowerCase() === peg$c14) {\n                s1 = input.substr(peg$currPos, 11);\n                peg$currPos += 11;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c15);\n                }\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c16();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 2) === peg$c17) {\n                s1 = peg$c17;\n                peg$currPos += 2;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c18);\n                }\n            }\n            if (s1 === peg$FAILED) {\n                if (input.substr(peg$currPos, 14).toLowerCase() === peg$c19) {\n                    s1 = input.substr(peg$currPos, 14);\n                    peg$currPos += 14;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c20);\n                    }\n                }\n            }\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c21();\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (input.substr(peg$currPos, 2) === peg$c22) {\n                    s1 = peg$c22;\n                    peg$currPos += 2;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c23);\n                    }\n                }\n                if (s1 === peg$FAILED) {\n                    if (input.substr(peg$currPos, 5).toLowerCase() === peg$c24) {\n                        s1 = input.substr(peg$currPos, 5);\n                        peg$currPos += 5;\n                    }\n                    else {\n                        s1 = peg$FAILED;\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$c25);\n                        }\n                    }\n                }\n                if (s1 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c26();\n                }\n                s0 = s1;\n                if (s0 === peg$FAILED) {\n                    s0 = peg$currPos;\n                    if (input.charCodeAt(peg$currPos) === 61) {\n                        s1 = peg$c27;\n                        peg$currPos++;\n                    }\n                    else {\n                        s1 = peg$FAILED;\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$c28);\n                        }\n                    }\n                    if (s1 === peg$FAILED) {\n                        if (input.substr(peg$currPos, 5).toLowerCase() === peg$c24) {\n                            s1 = input.substr(peg$currPos, 5);\n                            peg$currPos += 5;\n                        }\n                        else {\n                            s1 = peg$FAILED;\n                            if (peg$silentFails === 0) {\n                                peg$fail(peg$c25);\n                            }\n                        }\n                    }\n                    if (s1 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c26();\n                    }\n                    s0 = s1;\n                    if (s0 === peg$FAILED) {\n                        s0 = peg$currPos;\n                        if (input.substr(peg$currPos, 2) === peg$c29) {\n                            s1 = peg$c29;\n                            peg$currPos += 2;\n                        }\n                        else {\n                            s1 = peg$FAILED;\n                            if (peg$silentFails === 0) {\n                                peg$fail(peg$c30);\n                            }\n                        }\n                        if (s1 === peg$FAILED) {\n                            if (input.substr(peg$currPos, 8).toLowerCase() === peg$c31) {\n                                s1 = input.substr(peg$currPos, 8);\n                                peg$currPos += 8;\n                            }\n                            else {\n                                s1 = peg$FAILED;\n                                if (peg$silentFails === 0) {\n                                    peg$fail(peg$c32);\n                                }\n                            }\n                        }\n                        if (s1 !== peg$FAILED) {\n                            peg$savedPos = s0;\n                            s1 = peg$c33();\n                        }\n                        s0 = s1;\n                        if (s0 === peg$FAILED) {\n                            s0 = peg$currPos;\n                            if (input.charCodeAt(peg$currPos) === 60) {\n                                s1 = peg$c34;\n                                peg$currPos++;\n                            }\n                            else {\n                                s1 = peg$FAILED;\n                                if (peg$silentFails === 0) {\n                                    peg$fail(peg$c35);\n                                }\n                            }\n                            if (s1 === peg$FAILED) {\n                                if (input.substr(peg$currPos, 4).toLowerCase() === peg$c36) {\n                                    s1 = input.substr(peg$currPos, 4);\n                                    peg$currPos += 4;\n                                }\n                                else {\n                                    s1 = peg$FAILED;\n                                    if (peg$silentFails === 0) {\n                                        peg$fail(peg$c37);\n                                    }\n                                }\n                            }\n                            if (s1 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s1 = peg$c38();\n                            }\n                            s0 = s1;\n                            if (s0 === peg$FAILED) {\n                                s0 = peg$currPos;\n                                if (input.charCodeAt(peg$currPos) === 62) {\n                                    s1 = peg$c39;\n                                    peg$currPos++;\n                                }\n                                else {\n                                    s1 = peg$FAILED;\n                                    if (peg$silentFails === 0) {\n                                        peg$fail(peg$c40);\n                                    }\n                                }\n                                if (s1 === peg$FAILED) {\n                                    if (input.substr(peg$currPos, 7).toLowerCase() === peg$c41) {\n                                        s1 = input.substr(peg$currPos, 7);\n                                        peg$currPos += 7;\n                                    }\n                                    else {\n                                        s1 = peg$FAILED;\n                                        if (peg$silentFails === 0) {\n                                            peg$fail(peg$c42);\n                                        }\n                                    }\n                                }\n                                if (s1 !== peg$FAILED) {\n                                    peg$savedPos = s0;\n                                    s1 = peg$c43();\n                                }\n                                s0 = s1;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseCompOps() {\n        var s0, s1, s2, s3, s4, s5, s6, s7;\n        var key = peg$currPos * 34 + 6;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parsePlusMinusOps();\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n                s5 = peg$parsePlusMinusSigns();\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parse_();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parsePlusMinusOps();\n                        if (s7 !== peg$FAILED) {\n                            s4 = [s4, s5, s6, s7];\n                            s3 = s4;\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                    s5 = peg$parsePlusMinusSigns();\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parse_();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parsePlusMinusOps();\n                            if (s7 !== peg$FAILED) {\n                                s4 = [s4, s5, s6, s7];\n                                s3 = s4;\n                            }\n                            else {\n                                peg$currPos = s3;\n                                s3 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c0(s1, s2);\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parsePlusMinusSigns() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 7;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 43) {\n            s1 = peg$c44;\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c45);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c46();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 45) {\n                s1 = peg$c47;\n                peg$currPos++;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c48);\n                }\n            }\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c49();\n            }\n            s0 = s1;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parsePlusMinusOps() {\n        var s0, s1, s2, s3, s4, s5, s6, s7;\n        var key = peg$currPos * 34 + 8;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseMulDivOps();\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n                s5 = peg$parseMulDivSigns();\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parse_();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parseMulDivOps();\n                        if (s7 !== peg$FAILED) {\n                            s4 = [s4, s5, s6, s7];\n                            s3 = s4;\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                    s5 = peg$parseMulDivSigns();\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parse_();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parseMulDivOps();\n                            if (s7 !== peg$FAILED) {\n                                s4 = [s4, s5, s6, s7];\n                                s3 = s4;\n                            }\n                            else {\n                                peg$currPos = s3;\n                                s3 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c0(s1, s2);\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseMulDivSigns() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 9;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 42) {\n            s1 = peg$c50;\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c51);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c52();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 47) {\n                s1 = peg$c53;\n                peg$currPos++;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c54);\n                }\n            }\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c55();\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (input.charCodeAt(peg$currPos) === 37) {\n                    s1 = peg$c56;\n                    peg$currPos++;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c57);\n                    }\n                }\n                if (s1 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c58();\n                }\n                s0 = s1;\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseMulDivOps() {\n        var s0, s1, s2, s3, s4, s5, s6, s7;\n        var key = peg$currPos * 34 + 10;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseBinaryFuncOp();\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n                s5 = peg$parsePowerSigns();\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parse_();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parseBinaryFuncOp();\n                        if (s7 !== peg$FAILED) {\n                            s4 = [s4, s5, s6, s7];\n                            s3 = s4;\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                    s5 = peg$parsePowerSigns();\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parse_();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parseBinaryFuncOp();\n                            if (s7 !== peg$FAILED) {\n                                s4 = [s4, s5, s6, s7];\n                                s3 = s4;\n                            }\n                            else {\n                                peg$currPos = s3;\n                                s3 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c0(s1, s2);\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parsePowerSigns() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 11;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 94) {\n            s1 = peg$c59;\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c60);\n            }\n        }\n        if (s1 === peg$FAILED) {\n            if (input.substr(peg$currPos, 5).toLowerCase() === peg$c61) {\n                s1 = input.substr(peg$currPos, 5);\n                peg$currPos += 5;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c62);\n                }\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c63();\n        }\n        s0 = s1;\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseBinaryFuncOp() {\n        var s0, s1, s2, s3, s4, s5, s6, s7;\n        var key = peg$currPos * 34 + 12;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseFactor();\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n                s5 = peg$parseBinFunctions();\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parse_();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parseFactor();\n                        if (s7 === peg$FAILED) {\n                            s7 = null;\n                        }\n                        if (s7 !== peg$FAILED) {\n                            s4 = [s4, s5, s6, s7];\n                            s3 = s4;\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                    s5 = peg$parseBinFunctions();\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parse_();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parseFactor();\n                            if (s7 === peg$FAILED) {\n                                s7 = null;\n                            }\n                            if (s7 !== peg$FAILED) {\n                                s4 = [s4, s5, s6, s7];\n                                s3 = s4;\n                            }\n                            else {\n                                peg$currPos = s3;\n                                s3 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c11(s1, s2);\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseBinFunctions() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 13;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c64) {\n            s1 = peg$c64;\n            peg$currPos += 2;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c65);\n            }\n        }\n        if (s1 === peg$FAILED) {\n            if (input.substr(peg$currPos, 8).toLowerCase() === peg$c66) {\n                s1 = input.substr(peg$currPos, 8);\n                peg$currPos += 8;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c67);\n                }\n            }\n            if (s1 === peg$FAILED) {\n                if (input.substr(peg$currPos, 7).toLowerCase() === peg$c68) {\n                    s1 = input.substr(peg$currPos, 7);\n                    peg$currPos += 7;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c69);\n                    }\n                }\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c70();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 11).toLowerCase() === peg$c71) {\n                s1 = input.substr(peg$currPos, 11);\n                peg$currPos += 11;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c72);\n                }\n            }\n            if (s1 === peg$FAILED) {\n                if (input.substr(peg$currPos, 10).toLowerCase() === peg$c73) {\n                    s1 = input.substr(peg$currPos, 10);\n                    peg$currPos += 10;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c74);\n                    }\n                }\n            }\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c75();\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (input.substr(peg$currPos, 5).toLowerCase() === peg$c76) {\n                    s1 = input.substr(peg$currPos, 5);\n                    peg$currPos += 5;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c77);\n                    }\n                }\n                if (s1 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c78();\n                }\n                s0 = s1;\n                if (s0 === peg$FAILED) {\n                    s0 = peg$currPos;\n                    if (input.substr(peg$currPos, 5).toLowerCase() === peg$c79) {\n                        s1 = input.substr(peg$currPos, 5);\n                        peg$currPos += 5;\n                    }\n                    else {\n                        s1 = peg$FAILED;\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$c80);\n                        }\n                    }\n                    if (s1 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c81();\n                    }\n                    s0 = s1;\n                }\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseFactor() {\n        var s0, s1, s2, s3, s4, s5;\n        var key = peg$currPos * 34 + 14;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 40) {\n            s1 = peg$c82;\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c83);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            s2 = peg$parse_();\n            if (s2 !== peg$FAILED) {\n                s3 = peg$parseExpression();\n                if (s3 !== peg$FAILED) {\n                    s4 = peg$parse_();\n                    if (s4 !== peg$FAILED) {\n                        if (input.charCodeAt(peg$currPos) === 41) {\n                            s5 = peg$c84;\n                            peg$currPos++;\n                        }\n                        else {\n                            s5 = peg$FAILED;\n                            if (peg$silentFails === 0) {\n                                peg$fail(peg$c85);\n                            }\n                        }\n                        if (s5 === peg$FAILED) {\n                            s5 = null;\n                        }\n                        if (s5 !== peg$FAILED) {\n                            peg$savedPos = s0;\n                            s1 = peg$c86(s3);\n                            s0 = s1;\n                        }\n                        else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n            s0 = peg$parseFunctionOp();\n            if (s0 === peg$FAILED) {\n                s0 = peg$parseUnaryFunctionOp();\n                if (s0 === peg$FAILED) {\n                    s0 = peg$parseAtom();\n                    if (s0 === peg$FAILED) {\n                        s0 = peg$parseArrayOp();\n                    }\n                }\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseFunctionOp() {\n        var s0, s1, s2, s3, s4;\n        var key = peg$currPos * 34 + 15;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseLettersAndDigits();\n        if (s1 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 40) {\n                s2 = peg$c82;\n                peg$currPos++;\n            }\n            else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c83);\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                s3 = peg$parseSequence();\n                if (s3 !== peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 41) {\n                        s4 = peg$c84;\n                        peg$currPos++;\n                    }\n                    else {\n                        s4 = peg$FAILED;\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$c85);\n                        }\n                    }\n                    if (s4 === peg$FAILED) {\n                        s4 = null;\n                    }\n                    if (s4 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c87(s1, s3);\n                        s0 = s1;\n                    }\n                    else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseUnaryFunctionOp() {\n        var s0, s1, s2, s3;\n        var key = peg$currPos * 34 + 16;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 33) {\n            s1 = peg$c88;\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c89);\n            }\n        }\n        if (s1 === peg$FAILED) {\n            if (input.substr(peg$currPos, 6).toLowerCase() === peg$c90) {\n                s1 = input.substr(peg$currPos, 6);\n                peg$currPos += 6;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c91);\n                }\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            s2 = peg$parse_();\n            if (s2 !== peg$FAILED) {\n                s3 = peg$parseExpression();\n                if (s3 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c92(s3);\n                    s0 = s1;\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parseAtom();\n            if (s1 !== peg$FAILED) {\n                s2 = peg$parse_();\n                if (s2 !== peg$FAILED) {\n                    s3 = peg$parseUnFunctions();\n                    if (s3 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c93(s1, s3);\n                        s0 = s1;\n                    }\n                    else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseUnFunctions() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 17;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 5).toLowerCase() === peg$c94) {\n            s1 = input.substr(peg$currPos, 5);\n            peg$currPos += 5;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c95);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c96();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 8).toLowerCase() === peg$c97) {\n                s1 = input.substr(peg$currPos, 8);\n                peg$currPos += 8;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c98);\n                }\n            }\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c99();\n            }\n            s0 = s1;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseAtom() {\n        var s0, s1, s2, s3, s4;\n        var key = peg$currPos * 34 + 18;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parse_();\n        if (s1 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 9) === peg$c100) {\n                s2 = peg$c100;\n                peg$currPos += 9;\n            }\n            else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c101);\n                }\n            }\n            if (s2 === peg$FAILED) {\n                if (input.substr(peg$currPos, 4) === peg$c102) {\n                    s2 = peg$c102;\n                    peg$currPos += 4;\n                }\n                else {\n                    s2 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c103);\n                    }\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c104();\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parse_();\n            if (s1 !== peg$FAILED) {\n                s2 = peg$parseConstValue();\n                if (s2 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c105(s2);\n                    s0 = s1;\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n            if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                s1 = peg$parse_();\n                if (s1 !== peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 123) {\n                        s2 = peg$c106;\n                        peg$currPos++;\n                    }\n                    else {\n                        s2 = peg$FAILED;\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$c107);\n                        }\n                    }\n                    if (s2 !== peg$FAILED) {\n                        s3 = peg$parseValueInput();\n                        if (s3 !== peg$FAILED) {\n                            if (input.charCodeAt(peg$currPos) === 125) {\n                                s4 = peg$c108;\n                                peg$currPos++;\n                            }\n                            else {\n                                s4 = peg$FAILED;\n                                if (peg$silentFails === 0) {\n                                    peg$fail(peg$c109);\n                                }\n                            }\n                            if (s4 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s1 = peg$c110(s3);\n                                s0 = s1;\n                            }\n                            else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseConstValue() {\n        var s0, s1, s2, s3;\n        var key = peg$currPos * 34 + 19;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseLogicValue();\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c111(s1);\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parseArithmeticValue();\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c111(s1);\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                s1 = peg$parseLettersAndDigits();\n                if (s1 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c111(s1);\n                }\n                s0 = s1;\n                if (s0 === peg$FAILED) {\n                    s0 = peg$currPos;\n                    if (input.substr(peg$currPos, 2) === peg$c112) {\n                        s1 = peg$c112;\n                        peg$currPos += 2;\n                    }\n                    else {\n                        s1 = peg$FAILED;\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$c113);\n                        }\n                    }\n                    if (s1 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c114();\n                    }\n                    s0 = s1;\n                    if (s0 === peg$FAILED) {\n                        s0 = peg$currPos;\n                        if (input.substr(peg$currPos, 2) === peg$c115) {\n                            s1 = peg$c115;\n                            peg$currPos += 2;\n                        }\n                        else {\n                            s1 = peg$FAILED;\n                            if (peg$silentFails === 0) {\n                                peg$fail(peg$c116);\n                            }\n                        }\n                        if (s1 !== peg$FAILED) {\n                            peg$savedPos = s0;\n                            s1 = peg$c114();\n                        }\n                        s0 = s1;\n                        if (s0 === peg$FAILED) {\n                            s0 = peg$currPos;\n                            if (input.charCodeAt(peg$currPos) === 39) {\n                                s1 = peg$c117;\n                                peg$currPos++;\n                            }\n                            else {\n                                s1 = peg$FAILED;\n                                if (peg$silentFails === 0) {\n                                    peg$fail(peg$c118);\n                                }\n                            }\n                            if (s1 !== peg$FAILED) {\n                                s2 = peg$parseAnyInput();\n                                if (s2 !== peg$FAILED) {\n                                    if (input.charCodeAt(peg$currPos) === 39) {\n                                        s3 = peg$c117;\n                                        peg$currPos++;\n                                    }\n                                    else {\n                                        s3 = peg$FAILED;\n                                        if (peg$silentFails === 0) {\n                                            peg$fail(peg$c118);\n                                        }\n                                    }\n                                    if (s3 !== peg$FAILED) {\n                                        peg$savedPos = s0;\n                                        s1 = peg$c119(s2);\n                                        s0 = s1;\n                                    }\n                                    else {\n                                        peg$currPos = s0;\n                                        s0 = peg$FAILED;\n                                    }\n                                }\n                                else {\n                                    peg$currPos = s0;\n                                    s0 = peg$FAILED;\n                                }\n                            }\n                            else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                            }\n                            if (s0 === peg$FAILED) {\n                                s0 = peg$currPos;\n                                if (input.charCodeAt(peg$currPos) === 34) {\n                                    s1 = peg$c120;\n                                    peg$currPos++;\n                                }\n                                else {\n                                    s1 = peg$FAILED;\n                                    if (peg$silentFails === 0) {\n                                        peg$fail(peg$c121);\n                                    }\n                                }\n                                if (s1 !== peg$FAILED) {\n                                    s2 = peg$parseAnyInput();\n                                    if (s2 !== peg$FAILED) {\n                                        if (input.charCodeAt(peg$currPos) === 34) {\n                                            s3 = peg$c120;\n                                            peg$currPos++;\n                                        }\n                                        else {\n                                            s3 = peg$FAILED;\n                                            if (peg$silentFails === 0) {\n                                                peg$fail(peg$c121);\n                                            }\n                                        }\n                                        if (s3 !== peg$FAILED) {\n                                            peg$savedPos = s0;\n                                            s1 = peg$c119(s2);\n                                            s0 = s1;\n                                        }\n                                        else {\n                                            peg$currPos = s0;\n                                            s0 = peg$FAILED;\n                                        }\n                                    }\n                                    else {\n                                        peg$currPos = s0;\n                                        s0 = peg$FAILED;\n                                    }\n                                }\n                                else {\n                                    peg$currPos = s0;\n                                    s0 = peg$FAILED;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseArrayOp() {\n        var s0, s1, s2, s3;\n        var key = peg$currPos * 34 + 20;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 91) {\n            s1 = peg$c122;\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c123);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            s2 = peg$parseSequence();\n            if (s2 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 93) {\n                    s3 = peg$c124;\n                    peg$currPos++;\n                }\n                else {\n                    s3 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c125);\n                    }\n                }\n                if (s3 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c126(s2);\n                    s0 = s1;\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseSequence() {\n        var s0, s1, s2, s3, s4, s5, s6, s7;\n        var key = peg$currPos * 34 + 21;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseExpression();\n        if (s1 === peg$FAILED) {\n            s1 = null;\n        }\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 44) {\n                    s5 = peg$c127;\n                    peg$currPos++;\n                }\n                else {\n                    s5 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c128);\n                    }\n                }\n                if (s5 !== peg$FAILED) {\n                    s6 = peg$parse_();\n                    if (s6 !== peg$FAILED) {\n                        s7 = peg$parseExpression();\n                        if (s7 !== peg$FAILED) {\n                            s4 = [s4, s5, s6, s7];\n                            s3 = s4;\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 44) {\n                        s5 = peg$c127;\n                        peg$currPos++;\n                    }\n                    else {\n                        s5 = peg$FAILED;\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$c128);\n                        }\n                    }\n                    if (s5 !== peg$FAILED) {\n                        s6 = peg$parse_();\n                        if (s6 !== peg$FAILED) {\n                            s7 = peg$parseExpression();\n                            if (s7 !== peg$FAILED) {\n                                s4 = [s4, s5, s6, s7];\n                                s3 = s4;\n                            }\n                            else {\n                                peg$currPos = s3;\n                                s3 = peg$FAILED;\n                            }\n                        }\n                        else {\n                            peg$currPos = s3;\n                            s3 = peg$FAILED;\n                        }\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c129(s1, s2);\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseLogicValue() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 22;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 4).toLowerCase() === peg$c130) {\n            s1 = input.substr(peg$currPos, 4);\n            peg$currPos += 4;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c131);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c132();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 5).toLowerCase() === peg$c133) {\n                s1 = input.substr(peg$currPos, 5);\n                peg$currPos += 5;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c134);\n                }\n            }\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c135();\n            }\n            s0 = s1;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseArithmeticValue() {\n        var s0, s1, s2;\n        var key = peg$currPos * 34 + 23;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c136) {\n            s1 = peg$c136;\n            peg$currPos += 2;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c137);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            s2 = peg$parseDigits();\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c138();\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (peg$c139.test(input.charAt(peg$currPos))) {\n                s1 = input.charAt(peg$currPos);\n                peg$currPos++;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c140);\n                }\n            }\n            if (s1 === peg$FAILED) {\n                s1 = null;\n            }\n            if (s1 !== peg$FAILED) {\n                s2 = peg$parseNumber();\n                if (s2 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c141(s1, s2);\n                    s0 = s1;\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseNumber() {\n        var s0, s1, s2, s3;\n        var key = peg$currPos * 34 + 24;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseDigits();\n        if (s1 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 46) {\n                s2 = peg$c142;\n                peg$currPos++;\n            }\n            else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c143);\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                s3 = peg$parseDigits();\n                if (s3 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c144();\n                    s0 = s1;\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parseNonZeroDigits();\n            if (s1 !== peg$FAILED) {\n                s2 = peg$parseDigits();\n                if (s2 === peg$FAILED) {\n                    s2 = null;\n                }\n                if (s2 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c145();\n                    s0 = s1;\n                }\n                else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n            if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (input.charCodeAt(peg$currPos) === 48) {\n                    s1 = peg$c146;\n                    peg$currPos++;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c147);\n                    }\n                }\n                if (s1 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c148();\n                }\n                s0 = s1;\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseValueInput() {\n        var s0, s1, s2;\n        var key = peg$currPos * 34 + 25;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseValueCharacters();\n        if (s2 !== peg$FAILED) {\n            while (s2 !== peg$FAILED) {\n                s1.push(s2);\n                s2 = peg$parseValueCharacters();\n            }\n        }\n        else {\n            s1 = peg$FAILED;\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c149(s1);\n        }\n        s0 = s1;\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseAnyInput() {\n        var s0, s1, s2;\n        var key = peg$currPos * 34 + 26;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = [];\n        s2 = peg$parseAnyCharacters();\n        if (s2 !== peg$FAILED) {\n            while (s2 !== peg$FAILED) {\n                s1.push(s2);\n                s2 = peg$parseAnyCharacters();\n            }\n        }\n        else {\n            s1 = peg$FAILED;\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c149(s1);\n        }\n        s0 = s1;\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseAnyCharacters() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 27;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c150) {\n            s1 = peg$c150;\n            peg$currPos += 2;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c151);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c152();\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 2) === peg$c153) {\n                s1 = peg$c153;\n                peg$currPos += 2;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c154);\n                }\n            }\n            if (s1 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c155();\n            }\n            s0 = s1;\n            if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (peg$c156.test(input.charAt(peg$currPos))) {\n                    s1 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c157);\n                    }\n                }\n                if (s1 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c158();\n                }\n                s0 = s1;\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseValueCharacters() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 28;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        if (peg$c159.test(input.charAt(peg$currPos))) {\n            s1 = input.charAt(peg$currPos);\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c160);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c158();\n        }\n        s0 = s1;\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseLettersAndDigits() {\n        var s0, s1, s2, s3, s4, s5, s6;\n        var key = peg$currPos * 34 + 29;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = peg$currPos;\n        s1 = peg$parseLetters();\n        if (s1 !== peg$FAILED) {\n            s2 = [];\n            s3 = peg$currPos;\n            s4 = peg$parseDigits();\n            if (s4 !== peg$FAILED) {\n                s5 = [];\n                s6 = peg$parseLetters();\n                while (s6 !== peg$FAILED) {\n                    s5.push(s6);\n                    s6 = peg$parseLetters();\n                }\n                if (s5 !== peg$FAILED) {\n                    s4 = [s4, s5];\n                    s3 = s4;\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n            }\n            while (s3 !== peg$FAILED) {\n                s2.push(s3);\n                s3 = peg$currPos;\n                s4 = peg$parseDigits();\n                if (s4 !== peg$FAILED) {\n                    s5 = [];\n                    s6 = peg$parseLetters();\n                    while (s6 !== peg$FAILED) {\n                        s5.push(s6);\n                        s6 = peg$parseLetters();\n                    }\n                    if (s5 !== peg$FAILED) {\n                        s4 = [s4, s5];\n                        s3 = s4;\n                    }\n                    else {\n                        peg$currPos = s3;\n                        s3 = peg$FAILED;\n                    }\n                }\n                else {\n                    peg$currPos = s3;\n                    s3 = peg$FAILED;\n                }\n            }\n            if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c158();\n                s0 = s1;\n            }\n            else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n            }\n        }\n        else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseDigits() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 30;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = [];\n        if (peg$c161.test(input.charAt(peg$currPos))) {\n            s1 = input.charAt(peg$currPos);\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c162);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            while (s1 !== peg$FAILED) {\n                s0.push(s1);\n                if (peg$c161.test(input.charAt(peg$currPos))) {\n                    s1 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c162);\n                    }\n                }\n            }\n        }\n        else {\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseNonZeroDigits() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 31;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = [];\n        if (peg$c163.test(input.charAt(peg$currPos))) {\n            s1 = input.charAt(peg$currPos);\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c164);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            while (s1 !== peg$FAILED) {\n                s0.push(s1);\n                if (peg$c163.test(input.charAt(peg$currPos))) {\n                    s1 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c164);\n                    }\n                }\n            }\n        }\n        else {\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parseLetters() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 32;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        s0 = [];\n        if (peg$c165.test(input.charAt(peg$currPos))) {\n            s1 = input.charAt(peg$currPos);\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c166);\n            }\n        }\n        if (s1 !== peg$FAILED) {\n            while (s1 !== peg$FAILED) {\n                s0.push(s1);\n                if (peg$c165.test(input.charAt(peg$currPos))) {\n                    s1 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                }\n                else {\n                    s1 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                        peg$fail(peg$c166);\n                    }\n                }\n            }\n        }\n        else {\n            s0 = peg$FAILED;\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function peg$parse_() {\n        var s0, s1;\n        var key = peg$currPos * 34 + 33;\n        var cached = peg$resultsCache[key];\n        if (cached) {\n            peg$currPos = cached.nextPos;\n            return cached.result;\n        }\n        peg$silentFails++;\n        s0 = [];\n        if (peg$c168.test(input.charAt(peg$currPos))) {\n            s1 = input.charAt(peg$currPos);\n            peg$currPos++;\n        }\n        else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c169);\n            }\n        }\n        while (s1 !== peg$FAILED) {\n            s0.push(s1);\n            if (peg$c168.test(input.charAt(peg$currPos))) {\n                s1 = input.charAt(peg$currPos);\n                peg$currPos++;\n            }\n            else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                    peg$fail(peg$c169);\n                }\n            }\n        }\n        peg$silentFails--;\n        if (s0 === peg$FAILED) {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n                peg$fail(peg$c167);\n            }\n        }\n        peg$resultsCache[key] = { nextPos: peg$currPos, result: s0 };\n        return s0;\n    }\n    function buildBinaryOperand(head, tail, isArithmeticOp) {\n        if (isArithmeticOp === void 0) { isArithmeticOp = false; }\n        return tail.reduce(function (result, elements) {\n            return new _expressions__WEBPACK_IMPORTED_MODULE_0__[\"BinaryOperand\"](elements[1], result, elements[3], isArithmeticOp);\n        }, head);\n    }\n    function flattenArray(array) {\n        return [].concat.apply([], array);\n    }\n    peg$result = peg$startRuleFunction();\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n        return peg$result;\n    }\n    else {\n        if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n            peg$fail(peg$endExpectation());\n        }\n        throw peg$buildStructuredError(peg$maxFailExpected, peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null, peg$maxFailPos < input.length\n            ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n            : peg$computeLocation(peg$maxFailPos, peg$maxFailPos));\n    }\n}\nvar parse = peg$parse;\n\n\n/***/ }),\n\n/***/ \"./src/expressions/expressions.ts\":\n/*!****************************************!*\\\n  !*** ./src/expressions/expressions.ts ***!\n  \\****************************************/\n/*! exports provided: Operand, BinaryOperand, UnaryOperand, ArrayOperand, Const, Variable, FunctionOperand, OperandMaker */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_290431__) {\n\n\"use strict\";\n__nested_webpack_require_290431__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"Operand\", function() { return Operand; });\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"BinaryOperand\", function() { return BinaryOperand; });\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"UnaryOperand\", function() { return UnaryOperand; });\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"ArrayOperand\", function() { return ArrayOperand; });\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"Const\", function() { return Const; });\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"Variable\", function() { return Variable; });\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"FunctionOperand\", function() { return FunctionOperand; });\n/* harmony export (binding) */ __nested_webpack_require_290431__.d(__nested_webpack_exports__, \"OperandMaker\", function() { return OperandMaker; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_290431__(/*! ../helpers */ \"./src/helpers.ts\");\n/* harmony import */ var _functionsfactory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_290431__(/*! ../functionsfactory */ \"./src/functionsfactory.ts\");\n/* harmony import */ var _conditionProcessValue__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_290431__(/*! ../conditionProcessValue */ \"./src/conditionProcessValue.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_290431__(/*! ../settings */ \"./src/settings.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Operand = /** @class */ (function () {\n    function Operand() {\n    }\n    Operand.prototype.toString = function (func) {\n        if (func === void 0) { func = undefined; }\n        return \"\";\n    };\n    Operand.prototype.hasFunction = function () {\n        return false;\n    };\n    Operand.prototype.hasAsyncFunction = function () { return false; };\n    Operand.prototype.addToAsyncList = function (list) { };\n    Operand.prototype.isEqual = function (op) {\n        return !!op && op.getType() === this.getType() && this.isContentEqual(op);\n    };\n    Operand.prototype.areOperatorsEquals = function (op1, op2) {\n        return !op1 && !op2 || !!op1 && op1.isEqual(op2);\n    };\n    return Operand;\n}());\n\nvar BinaryOperand = /** @class */ (function (_super) {\n    __extends(BinaryOperand, _super);\n    function BinaryOperand(operatorName, left, right, isArithmeticOp) {\n        if (left === void 0) { left = null; }\n        if (right === void 0) { right = null; }\n        if (isArithmeticOp === void 0) { isArithmeticOp = false; }\n        var _this = _super.call(this) || this;\n        _this.operatorName = operatorName;\n        _this.left = left;\n        _this.right = right;\n        _this.isArithmeticValue = isArithmeticOp;\n        if (isArithmeticOp) {\n            _this.consumer = OperandMaker.binaryFunctions[\"arithmeticOp\"](operatorName);\n        }\n        else {\n            _this.consumer = OperandMaker.binaryFunctions[operatorName];\n        }\n        if (_this.consumer == null) {\n            OperandMaker.throwInvalidOperatorError(operatorName);\n        }\n        return _this;\n    }\n    Object.defineProperty(BinaryOperand.prototype, \"requireStrictCompare\", {\n        get: function () {\n            return this.getIsOperandRequireStrict(this.left) ||\n                this.getIsOperandRequireStrict(this.right);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BinaryOperand.prototype.getIsOperandRequireStrict = function (op) {\n        return !!op && op.requireStrictCompare;\n    };\n    BinaryOperand.prototype.getType = function () {\n        return \"binary\";\n    };\n    Object.defineProperty(BinaryOperand.prototype, \"isArithmetic\", {\n        get: function () {\n            return this.isArithmeticValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BinaryOperand.prototype, \"isConjunction\", {\n        get: function () {\n            return this.operatorName == \"or\" || this.operatorName == \"and\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BinaryOperand.prototype, \"conjunction\", {\n        get: function () {\n            return this.isConjunction ? this.operatorName : \"\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BinaryOperand.prototype, \"operator\", {\n        get: function () {\n            return this.operatorName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BinaryOperand.prototype, \"leftOperand\", {\n        get: function () {\n            return this.left;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BinaryOperand.prototype, \"rightOperand\", {\n        get: function () {\n            return this.right;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BinaryOperand.prototype.isContentEqual = function (op) {\n        var bOp = op;\n        return bOp.operator === this.operator &&\n            this.areOperatorsEquals(this.left, bOp.left) &&\n            this.areOperatorsEquals(this.right, bOp.right);\n    };\n    BinaryOperand.prototype.evaluateParam = function (x, processValue) {\n        return x == null ? null : x.evaluate(processValue);\n    };\n    BinaryOperand.prototype.evaluate = function (processValue) {\n        return this.consumer.call(this, this.evaluateParam(this.left, processValue), this.evaluateParam(this.right, processValue), this.requireStrictCompare);\n    };\n    BinaryOperand.prototype.toString = function (func) {\n        if (func === void 0) { func = undefined; }\n        if (!!func) {\n            var res = func(this);\n            if (!!res)\n                return res;\n        }\n        return (\"(\" +\n            OperandMaker.safeToString(this.left, func) +\n            \" \" +\n            OperandMaker.operatorToString(this.operatorName) +\n            \" \" +\n            OperandMaker.safeToString(this.right, func) +\n            \")\");\n    };\n    BinaryOperand.prototype.setVariables = function (variables) {\n        if (this.left != null)\n            this.left.setVariables(variables);\n        if (this.right != null)\n            this.right.setVariables(variables);\n    };\n    BinaryOperand.prototype.hasFunction = function () {\n        return ((!!this.left && this.left.hasFunction()) ||\n            (!!this.right && this.right.hasFunction()));\n    };\n    BinaryOperand.prototype.hasAsyncFunction = function () {\n        return ((!!this.left && this.left.hasAsyncFunction()) ||\n            (!!this.right && this.right.hasAsyncFunction()));\n    };\n    BinaryOperand.prototype.addToAsyncList = function (list) {\n        if (!!this.left)\n            this.left.addToAsyncList(list);\n        if (!!this.right)\n            this.right.addToAsyncList(list);\n    };\n    return BinaryOperand;\n}(Operand));\n\nvar UnaryOperand = /** @class */ (function (_super) {\n    __extends(UnaryOperand, _super);\n    function UnaryOperand(expressionValue, operatorName) {\n        var _this = _super.call(this) || this;\n        _this.expressionValue = expressionValue;\n        _this.operatorName = operatorName;\n        _this.consumer = OperandMaker.unaryFunctions[operatorName];\n        if (_this.consumer == null) {\n            OperandMaker.throwInvalidOperatorError(operatorName);\n        }\n        return _this;\n    }\n    Object.defineProperty(UnaryOperand.prototype, \"operator\", {\n        get: function () {\n            return this.operatorName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(UnaryOperand.prototype, \"expression\", {\n        get: function () {\n            return this.expressionValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    UnaryOperand.prototype.getType = function () {\n        return \"unary\";\n    };\n    UnaryOperand.prototype.toString = function (func) {\n        if (func === void 0) { func = undefined; }\n        if (!!func) {\n            var res = func(this);\n            if (!!res)\n                return res;\n        }\n        return (OperandMaker.operatorToString(this.operatorName) +\n            \" \" +\n            this.expression.toString(func));\n    };\n    UnaryOperand.prototype.isContentEqual = function (op) {\n        var uOp = op;\n        return uOp.operator == this.operator && this.areOperatorsEquals(this.expression, uOp.expression);\n    };\n    UnaryOperand.prototype.hasFunction = function () {\n        return this.expression.hasFunction();\n    };\n    UnaryOperand.prototype.hasAsyncFunction = function () {\n        return this.expression.hasAsyncFunction();\n    };\n    UnaryOperand.prototype.addToAsyncList = function (list) {\n        this.expression.addToAsyncList(list);\n    };\n    UnaryOperand.prototype.evaluate = function (processValue) {\n        var value = this.expression.evaluate(processValue);\n        return this.consumer.call(this, value);\n    };\n    UnaryOperand.prototype.setVariables = function (variables) {\n        this.expression.setVariables(variables);\n    };\n    return UnaryOperand;\n}(Operand));\n\nvar ArrayOperand = /** @class */ (function (_super) {\n    __extends(ArrayOperand, _super);\n    function ArrayOperand(values) {\n        var _this = _super.call(this) || this;\n        _this.values = values;\n        return _this;\n    }\n    ArrayOperand.prototype.getType = function () {\n        return \"array\";\n    };\n    ArrayOperand.prototype.toString = function (func) {\n        if (func === void 0) { func = undefined; }\n        if (!!func) {\n            var res = func(this);\n            if (!!res)\n                return res;\n        }\n        return (\"[\" +\n            this.values\n                .map(function (el) {\n                return el.toString(func);\n            })\n                .join(\", \") +\n            \"]\");\n    };\n    ArrayOperand.prototype.evaluate = function (processValue) {\n        return this.values.map(function (el) {\n            return el.evaluate(processValue);\n        });\n    };\n    ArrayOperand.prototype.setVariables = function (variables) {\n        this.values.forEach(function (el) {\n            el.setVariables(variables);\n        });\n    };\n    ArrayOperand.prototype.hasFunction = function () {\n        return this.values.some(function (operand) { return operand.hasFunction(); });\n    };\n    ArrayOperand.prototype.hasAsyncFunction = function () {\n        return this.values.some(function (operand) { return operand.hasAsyncFunction(); });\n    };\n    ArrayOperand.prototype.addToAsyncList = function (list) {\n        this.values.forEach(function (operand) { return operand.addToAsyncList(list); });\n    };\n    ArrayOperand.prototype.isContentEqual = function (op) {\n        var aOp = op;\n        if (aOp.values.length !== this.values.length)\n            return false;\n        for (var i = 0; i < this.values.length; i++) {\n            if (!aOp.values[i].isEqual(this.values[i]))\n                return false;\n        }\n        return true;\n    };\n    return ArrayOperand;\n}(Operand));\n\nvar Const = /** @class */ (function (_super) {\n    __extends(Const, _super);\n    function Const(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        return _this;\n    }\n    Const.prototype.getType = function () {\n        return \"const\";\n    };\n    Const.prototype.toString = function (func) {\n        if (func === void 0) { func = undefined; }\n        if (!!func) {\n            var res = func(this);\n            if (!!res)\n                return res;\n        }\n        return this.value.toString();\n    };\n    Object.defineProperty(Const.prototype, \"correctValue\", {\n        get: function () {\n            return this.getCorrectValue(this.value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Const.prototype, \"requireStrictCompare\", {\n        get: function () { return false; },\n        enumerable: false,\n        configurable: true\n    });\n    Const.prototype.evaluate = function () {\n        return this.getCorrectValue(this.value);\n    };\n    Const.prototype.setVariables = function (variables) { };\n    Const.prototype.getCorrectValue = function (value) {\n        if (!value || typeof value != \"string\")\n            return value;\n        if (this.isBooleanValue(value))\n            return value.toLowerCase() === \"true\";\n        if (value.length > 1 &&\n            this.isQuote(value[0]) &&\n            this.isQuote(value[value.length - 1]))\n            return value.substring(1, value.length - 1);\n        if (OperandMaker.isNumeric(value)) {\n            if (value.indexOf(\"0x\") == 0)\n                return parseInt(value);\n            if (value.length > 1 && value[0] == \"0\" && (value.length < 2 || (value[1] !== \".\" && value[1] !== \",\")))\n                return value;\n            return parseFloat(value);\n        }\n        return value;\n    };\n    Const.prototype.isContentEqual = function (op) {\n        var cOp = op;\n        return cOp.value == this.value;\n    };\n    Const.prototype.isQuote = function (ch) {\n        return ch == \"'\" || ch == '\"';\n    };\n    Const.prototype.isBooleanValue = function (value) {\n        return (value &&\n            (value.toLowerCase() === \"true\" || value.toLowerCase() === \"false\"));\n    };\n    return Const;\n}(Operand));\n\nvar Variable = /** @class */ (function (_super) {\n    __extends(Variable, _super);\n    function Variable(variableName) {\n        var _this = _super.call(this, variableName) || this;\n        _this.variableName = variableName;\n        _this.valueInfo = {};\n        _this.useValueAsItIs = false;\n        if (!!_this.variableName &&\n            _this.variableName.length > 1 &&\n            _this.variableName[0] === Variable.DisableConversionChar) {\n            _this.variableName = _this.variableName.substring(1);\n            _this.useValueAsItIs = true;\n        }\n        return _this;\n    }\n    Object.defineProperty(Variable, \"DisableConversionChar\", {\n        get: function () { return _settings__WEBPACK_IMPORTED_MODULE_3__[\"settings\"].expressionDisableConversionChar; },\n        set: function (val) { _settings__WEBPACK_IMPORTED_MODULE_3__[\"settings\"].expressionDisableConversionChar = val; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Variable.prototype, \"requireStrictCompare\", {\n        get: function () {\n            return this.valueInfo.sctrictCompare === true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Variable.prototype.getType = function () {\n        return \"variable\";\n    };\n    Variable.prototype.toString = function (func) {\n        if (func === void 0) { func = undefined; }\n        if (!!func) {\n            var res = func(this);\n            if (!!res)\n                return res;\n        }\n        var prefix = this.useValueAsItIs ? Variable.DisableConversionChar : \"\";\n        return \"{\" + prefix + this.variableName + \"}\";\n    };\n    Object.defineProperty(Variable.prototype, \"variable\", {\n        get: function () {\n            return this.variableName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Variable.prototype.evaluate = function (processValue) {\n        this.valueInfo.name = this.variableName;\n        processValue.getValueInfo(this.valueInfo);\n        return this.valueInfo.hasValue\n            ? this.getCorrectValue(this.valueInfo.value)\n            : null;\n    };\n    Variable.prototype.setVariables = function (variables) {\n        variables.push(this.variableName);\n    };\n    Variable.prototype.getCorrectValue = function (value) {\n        if (this.useValueAsItIs)\n            return value;\n        return _super.prototype.getCorrectValue.call(this, value);\n    };\n    Variable.prototype.isContentEqual = function (op) {\n        var vOp = op;\n        return vOp.variable == this.variable;\n    };\n    return Variable;\n}(Const));\n\nvar FunctionOperand = /** @class */ (function (_super) {\n    __extends(FunctionOperand, _super);\n    function FunctionOperand(originalValue, parameters) {\n        var _this = _super.call(this) || this;\n        _this.originalValue = originalValue;\n        _this.parameters = parameters;\n        _this.isReadyValue = false;\n        if (Array.isArray(parameters) && parameters.length === 0) {\n            _this.parameters = new ArrayOperand([]);\n        }\n        return _this;\n    }\n    FunctionOperand.prototype.getType = function () {\n        return \"function\";\n    };\n    FunctionOperand.prototype.evaluateAsync = function (processValue) {\n        var _this = this;\n        this.isReadyValue = false;\n        var asyncProcessValue = new _conditionProcessValue__WEBPACK_IMPORTED_MODULE_2__[\"ProcessValue\"]();\n        asyncProcessValue.values = _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].createCopy(processValue.values);\n        asyncProcessValue.properties = _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].createCopy(processValue.properties);\n        asyncProcessValue.properties.returnResult = function (result) {\n            _this.asynResult = result;\n            _this.isReadyValue = true;\n            _this.onAsyncReady();\n        };\n        this.evaluateCore(asyncProcessValue);\n    };\n    FunctionOperand.prototype.evaluate = function (processValue) {\n        if (this.isReady)\n            return this.asynResult;\n        return this.evaluateCore(processValue);\n    };\n    FunctionOperand.prototype.evaluateCore = function (processValue) {\n        return _functionsfactory__WEBPACK_IMPORTED_MODULE_1__[\"FunctionFactory\"].Instance.run(this.originalValue, this.parameters.evaluate(processValue), processValue.properties);\n    };\n    FunctionOperand.prototype.toString = function (func) {\n        if (func === void 0) { func = undefined; }\n        if (!!func) {\n            var res = func(this);\n            if (!!res)\n                return res;\n        }\n        return this.originalValue + \"(\" + this.parameters.toString(func) + \")\";\n    };\n    FunctionOperand.prototype.setVariables = function (variables) {\n        this.parameters.setVariables(variables);\n    };\n    Object.defineProperty(FunctionOperand.prototype, \"isReady\", {\n        get: function () {\n            return this.isReadyValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FunctionOperand.prototype.hasFunction = function () {\n        return true;\n    };\n    FunctionOperand.prototype.hasAsyncFunction = function () {\n        return _functionsfactory__WEBPACK_IMPORTED_MODULE_1__[\"FunctionFactory\"].Instance.isAsyncFunction(this.originalValue);\n    };\n    FunctionOperand.prototype.addToAsyncList = function (list) {\n        if (this.hasAsyncFunction()) {\n            list.push(this);\n        }\n    };\n    FunctionOperand.prototype.isContentEqual = function (op) {\n        var fOp = op;\n        return fOp.originalValue == this.originalValue && this.areOperatorsEquals(fOp.parameters, this.parameters);\n    };\n    return FunctionOperand;\n}(Operand));\n\nvar OperandMaker = /** @class */ (function () {\n    function OperandMaker() {\n    }\n    OperandMaker.throwInvalidOperatorError = function (op) {\n        throw new Error(\"Invalid operator: '\" + op + \"'\");\n    };\n    OperandMaker.safeToString = function (operand, func) {\n        return operand == null ? \"\" : operand.toString(func);\n    };\n    OperandMaker.toOperandString = function (value) {\n        if (!!value &&\n            !OperandMaker.isNumeric(value) &&\n            !OperandMaker.isBooleanValue(value))\n            value = \"'\" + value + \"'\";\n        return value;\n    };\n    OperandMaker.isSpaceString = function (str) {\n        return !!str && !str.replace(\" \", \"\");\n    };\n    OperandMaker.isNumeric = function (value) {\n        if (!!value &&\n            (value.indexOf(\"-\") > -1 ||\n                value.indexOf(\"+\") > 1 ||\n                value.indexOf(\"*\") > -1 ||\n                value.indexOf(\"^\") > -1 ||\n                value.indexOf(\"/\") > -1 ||\n                value.indexOf(\"%\") > -1))\n            return false;\n        if (OperandMaker.isSpaceString(value))\n            return false;\n        return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isNumber(value);\n    };\n    OperandMaker.isBooleanValue = function (value) {\n        return (!!value &&\n            (value.toLowerCase() === \"true\" || value.toLowerCase() === \"false\"));\n    };\n    OperandMaker.countDecimals = function (value) {\n        if (_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isNumber(value) && Math.floor(value) !== value) {\n            var strs = value.toString().split(\".\");\n            return strs.length > 1 && strs[1].length || 0;\n        }\n        return 0;\n    };\n    OperandMaker.plusMinus = function (a, b, res) {\n        var digitsA = OperandMaker.countDecimals(a);\n        var digitsB = OperandMaker.countDecimals(b);\n        if (digitsA > 0 || digitsB > 0) {\n            var digits = Math.max(digitsA, digitsB);\n            res = parseFloat(res.toFixed(digits));\n        }\n        return res;\n    };\n    OperandMaker.isTwoValueEquals = function (x, y, ignoreOrder) {\n        if (ignoreOrder === void 0) { ignoreOrder = true; }\n        if (x === \"undefined\")\n            x = undefined;\n        if (y === \"undefined\")\n            y = undefined;\n        return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isTwoValueEquals(x, y, ignoreOrder);\n    };\n    OperandMaker.operatorToString = function (operatorName) {\n        var opStr = OperandMaker.signs[operatorName];\n        return opStr == null ? operatorName : opStr;\n    };\n    OperandMaker.convertValForDateCompare = function (val, second) {\n        if (second instanceof Date && typeof val === \"string\") {\n            var res = new Date(val);\n            res.setHours(0, 0, 0);\n            return res;\n        }\n        return val;\n    };\n    OperandMaker.unaryFunctions = {\n        empty: function (value) {\n            return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(value);\n        },\n        notempty: function (value) {\n            return !OperandMaker.unaryFunctions.empty(value);\n        },\n        negate: function (value) {\n            return !value;\n        },\n    };\n    OperandMaker.binaryFunctions = {\n        arithmeticOp: function (operatorName) {\n            var convertForArithmeticOp = function (val, second) {\n                if (!_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(val))\n                    return val;\n                if (typeof second === \"number\")\n                    return 0;\n                if (typeof val === \"string\")\n                    return val;\n                if (typeof second === \"string\")\n                    return \"\";\n                if (Array.isArray(second))\n                    return [];\n                return 0;\n            };\n            return function (a, b) {\n                a = convertForArithmeticOp(a, b);\n                b = convertForArithmeticOp(b, a);\n                var consumer = OperandMaker.binaryFunctions[operatorName];\n                return consumer == null ? null : consumer.call(this, a, b);\n            };\n        },\n        and: function (a, b) {\n            return a && b;\n        },\n        or: function (a, b) {\n            return a || b;\n        },\n        plus: function (a, b) {\n            return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].sumAnyValues(a, b);\n        },\n        minus: function (a, b) {\n            return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].correctAfterPlusMinis(a, b, a - b);\n        },\n        mul: function (a, b) {\n            return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].correctAfterMultiple(a, b, a * b);\n        },\n        div: function (a, b) {\n            if (!b)\n                return null;\n            return a / b;\n        },\n        mod: function (a, b) {\n            if (!b)\n                return null;\n            return a % b;\n        },\n        power: function (a, b) {\n            return Math.pow(a, b);\n        },\n        greater: function (left, right) {\n            if (left == null || right == null)\n                return false;\n            left = OperandMaker.convertValForDateCompare(left, right);\n            right = OperandMaker.convertValForDateCompare(right, left);\n            return left > right;\n        },\n        less: function (left, right) {\n            if (left == null || right == null)\n                return false;\n            left = OperandMaker.convertValForDateCompare(left, right);\n            right = OperandMaker.convertValForDateCompare(right, left);\n            return left < right;\n        },\n        greaterorequal: function (left, right) {\n            if (OperandMaker.binaryFunctions.equal(left, right))\n                return true;\n            return OperandMaker.binaryFunctions.greater(left, right);\n        },\n        lessorequal: function (left, right) {\n            if (OperandMaker.binaryFunctions.equal(left, right))\n                return true;\n            return OperandMaker.binaryFunctions.less(left, right);\n        },\n        equal: function (left, right, strictCompare) {\n            left = OperandMaker.convertValForDateCompare(left, right);\n            right = OperandMaker.convertValForDateCompare(right, left);\n            return OperandMaker.isTwoValueEquals(left, right, strictCompare !== true);\n        },\n        notequal: function (left, right, strictCompare) {\n            return !OperandMaker.binaryFunctions.equal(left, right, strictCompare);\n        },\n        contains: function (left, right) {\n            return OperandMaker.binaryFunctions.containsCore(left, right, true);\n        },\n        notcontains: function (left, right) {\n            if (!left && !_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(right))\n                return true;\n            return OperandMaker.binaryFunctions.containsCore(left, right, false);\n        },\n        anyof: function (left, right) {\n            if (_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(left) && _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(right))\n                return true;\n            if (_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(left) ||\n                (!Array.isArray(left) && left.length === 0))\n                return false;\n            if (_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(right))\n                return true;\n            if (!Array.isArray(left))\n                return OperandMaker.binaryFunctions.contains(right, left);\n            if (!Array.isArray(right))\n                return OperandMaker.binaryFunctions.contains(left, right);\n            for (var i = 0; i < right.length; i++) {\n                if (OperandMaker.binaryFunctions.contains(left, right[i]))\n                    return true;\n            }\n            return false;\n        },\n        allof: function (left, right) {\n            if (!left && !_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(right))\n                return false;\n            if (!Array.isArray(right))\n                return OperandMaker.binaryFunctions.contains(left, right);\n            for (var i = 0; i < right.length; i++) {\n                if (!OperandMaker.binaryFunctions.contains(left, right[i]))\n                    return false;\n            }\n            return true;\n        },\n        containsCore: function (left, right, isContains) {\n            if (!left && left !== 0 && left !== false)\n                return false;\n            if (!left.length) {\n                left = left.toString();\n                if (typeof right === \"string\" || right instanceof String) {\n                    left = left.toUpperCase();\n                    right = right.toUpperCase();\n                }\n            }\n            if (typeof left === \"string\" || left instanceof String) {\n                if (!right)\n                    return false;\n                right = right.toString();\n                var found = left.indexOf(right) > -1;\n                return isContains ? found : !found;\n            }\n            var rightArray = Array.isArray(right) ? right : [right];\n            for (var rIndex = 0; rIndex < rightArray.length; rIndex++) {\n                var i = 0;\n                right = rightArray[rIndex];\n                for (; i < left.length; i++) {\n                    if (OperandMaker.isTwoValueEquals(left[i], right))\n                        break;\n                }\n                if (i == left.length)\n                    return !isContains;\n            }\n            return isContains;\n        },\n    };\n    OperandMaker.signs = {\n        less: \"<\",\n        lessorequal: \"<=\",\n        greater: \">\",\n        greaterorequal: \">=\",\n        equal: \"==\",\n        notequal: \"!=\",\n        plus: \"+\",\n        minus: \"-\",\n        mul: \"*\",\n        div: \"/\",\n        and: \"and\",\n        or: \"or\",\n        power: \"^\",\n        mod: \"%\",\n        negate: \"!\",\n    };\n    return OperandMaker;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/functionsfactory.ts\":\n/*!*********************************!*\\\n  !*** ./src/functionsfactory.ts ***!\n  \\*********************************/\n/*! exports provided: FunctionFactory, registerFunction */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_320506__) {\n\n\"use strict\";\n__nested_webpack_require_320506__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_320506__.d(__nested_webpack_exports__, \"FunctionFactory\", function() { return FunctionFactory; });\n/* harmony export (binding) */ __nested_webpack_require_320506__.d(__nested_webpack_exports__, \"registerFunction\", function() { return registerFunction; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_320506__(/*! ./helpers */ \"./src/helpers.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_320506__(/*! ./settings */ \"./src/settings.ts\");\n/* harmony import */ var _console_warnings__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_320506__(/*! ./console-warnings */ \"./src/console-warnings.ts\");\n\n\n\nvar FunctionFactory = /** @class */ (function () {\n    function FunctionFactory() {\n        this.functionHash = {};\n        this.isAsyncHash = {};\n    }\n    FunctionFactory.prototype.register = function (name, func, isAsync) {\n        if (isAsync === void 0) { isAsync = false; }\n        this.functionHash[name] = func;\n        if (isAsync)\n            this.isAsyncHash[name] = true;\n    };\n    FunctionFactory.prototype.unregister = function (name) {\n        delete this.functionHash[name];\n        delete this.isAsyncHash[name];\n    };\n    FunctionFactory.prototype.hasFunction = function (name) {\n        return !!this.functionHash[name];\n    };\n    FunctionFactory.prototype.isAsyncFunction = function (name) {\n        return !!this.isAsyncHash[name];\n    };\n    FunctionFactory.prototype.clear = function () {\n        this.functionHash = {};\n    };\n    FunctionFactory.prototype.getAll = function () {\n        var result = [];\n        for (var key in this.functionHash) {\n            result.push(key);\n        }\n        return result.sort();\n    };\n    FunctionFactory.prototype.run = function (name, params, properties) {\n        if (properties === void 0) { properties = null; }\n        var func = this.functionHash[name];\n        if (!func) {\n            _console_warnings__WEBPACK_IMPORTED_MODULE_2__[\"ConsoleWarnings\"].warn(\"Unknown function name: \" + name);\n            return null;\n        }\n        var classRunner = {\n            func: func,\n        };\n        if (properties) {\n            for (var key in properties) {\n                classRunner[key] = properties[key];\n            }\n        }\n        return classRunner.func(params);\n    };\n    FunctionFactory.Instance = new FunctionFactory();\n    return FunctionFactory;\n}());\n\nvar registerFunction = FunctionFactory.Instance.register;\nfunction getParamsAsArray(value, arr) {\n    if (value === undefined || value === null)\n        return;\n    if (Array.isArray(value)) {\n        for (var i = 0; i < value.length; i++) {\n            getParamsAsArray(value[i], arr);\n        }\n    }\n    else {\n        if (_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isNumber(value)) {\n            value = _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].getNumber(value);\n        }\n        arr.push(value);\n    }\n}\nfunction sum(params) {\n    var arr = [];\n    getParamsAsArray(params, arr);\n    var res = 0;\n    for (var i = 0; i < arr.length; i++) {\n        res = _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].correctAfterPlusMinis(res, arr[i], res + arr[i]);\n    }\n    return res;\n}\nFunctionFactory.Instance.register(\"sum\", sum);\nfunction min_max(params, isMin) {\n    var arr = [];\n    getParamsAsArray(params, arr);\n    var res = undefined;\n    for (var i = 0; i < arr.length; i++) {\n        if (res === undefined) {\n            res = arr[i];\n        }\n        if (isMin) {\n            if (res > arr[i])\n                res = arr[i];\n        }\n        else {\n            if (res < arr[i])\n                res = arr[i];\n        }\n    }\n    return res;\n}\nfunction min(params) {\n    return min_max(params, true);\n}\nFunctionFactory.Instance.register(\"min\", min);\nfunction max(params) {\n    return min_max(params, false);\n}\nFunctionFactory.Instance.register(\"max\", max);\nfunction count(params) {\n    var arr = [];\n    getParamsAsArray(params, arr);\n    return arr.length;\n}\nFunctionFactory.Instance.register(\"count\", count);\nfunction avg(params) {\n    var arr = [];\n    getParamsAsArray(params, arr);\n    var res = sum(params);\n    return arr.length > 0 ? res / arr.length : 0;\n}\nFunctionFactory.Instance.register(\"avg\", avg);\nfunction getInArrayParams(params) {\n    if (params.length != 2)\n        return null;\n    var arr = params[0];\n    if (!arr)\n        return null;\n    if (!Array.isArray(arr) && !Array.isArray(Object.keys(arr)))\n        return null;\n    var name = params[1];\n    if (typeof name !== \"string\" && !(name instanceof String))\n        return null;\n    return { data: arr, name: name };\n}\nfunction convertToNumber(val) {\n    if (typeof val === \"string\")\n        return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isNumber(val) ? _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].getNumber(val) : undefined;\n    return val;\n}\nfunction processItemInArray(item, name, res, func, needToConvert) {\n    if (!item || _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isValueEmpty(item[name]))\n        return res;\n    var val = needToConvert ? convertToNumber(item[name]) : 1;\n    return func(res, val);\n}\nfunction calcInArray(params, func, needToConvert) {\n    if (needToConvert === void 0) { needToConvert = true; }\n    var v = getInArrayParams(params);\n    if (!v)\n        return undefined;\n    var res = undefined;\n    if (Array.isArray(v.data)) {\n        for (var i = 0; i < v.data.length; i++) {\n            res = processItemInArray(v.data[i], v.name, res, func, needToConvert);\n        }\n    }\n    else {\n        for (var key in v.data) {\n            res = processItemInArray(v.data[key], v.name, res, func, needToConvert);\n        }\n    }\n    return res;\n}\nfunction sumInArray(params) {\n    var res = calcInArray(params, function (res, val) {\n        if (res == undefined)\n            res = 0;\n        if (val == undefined || val == null)\n            return res;\n        return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].correctAfterPlusMinis(res, val, res + val);\n    });\n    return res !== undefined ? res : 0;\n}\nFunctionFactory.Instance.register(\"sumInArray\", sumInArray);\nfunction minInArray(params) {\n    return calcInArray(params, function (res, val) {\n        if (res == undefined)\n            return val;\n        if (val == undefined || val == null)\n            return res;\n        return res < val ? res : val;\n    });\n}\nFunctionFactory.Instance.register(\"minInArray\", minInArray);\nfunction maxInArray(params) {\n    return calcInArray(params, function (res, val) {\n        if (res == undefined)\n            return val;\n        if (val == undefined || val == null)\n            return res;\n        return res > val ? res : val;\n    });\n}\nFunctionFactory.Instance.register(\"maxInArray\", maxInArray);\nfunction countInArray(params) {\n    var res = calcInArray(params, function (res, val) {\n        if (res == undefined)\n            res = 0;\n        if (val == undefined || val == null)\n            return res;\n        return res + 1;\n    }, false);\n    return res !== undefined ? res : 0;\n}\nFunctionFactory.Instance.register(\"countInArray\", countInArray);\nfunction avgInArray(params) {\n    var count = countInArray(params);\n    if (count == 0)\n        return 0;\n    return sumInArray(params) / count;\n}\nFunctionFactory.Instance.register(\"avgInArray\", avgInArray);\nfunction iif(params) {\n    if (!params && params.length !== 3)\n        return \"\";\n    return params[0] ? params[1] : params[2];\n}\nFunctionFactory.Instance.register(\"iif\", iif);\nfunction getDate(params) {\n    if (!params && params.length < 1)\n        return null;\n    if (!params[0])\n        return null;\n    return new Date(params[0]);\n}\nFunctionFactory.Instance.register(\"getDate\", getDate);\nfunction age(params) {\n    if (!params && params.length < 1)\n        return null;\n    if (!params[0])\n        return null;\n    var birthDate = new Date(params[0]);\n    var today = new Date();\n    var age = today.getFullYear() - birthDate.getFullYear();\n    if (age > 0) {\n        var m = today.getMonth() - birthDate.getMonth();\n        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n            age -= 1;\n        }\n    }\n    return age;\n}\nFunctionFactory.Instance.register(\"age\", age);\nfunction isContainerReadyCore(container) {\n    if (!container)\n        return false;\n    var questions = container.questions;\n    for (var i = 0; i < questions.length; i++) {\n        if (!questions[i].validate(false))\n            return false;\n    }\n    return true;\n}\nfunction isContainerReady(params) {\n    if (!params && params.length < 1)\n        return false;\n    if (!params[0] || !this.survey)\n        return false;\n    var name = params[0];\n    var container = this.survey.getPageByName(name);\n    if (!container)\n        container = this.survey.getPanelByName(name);\n    if (!container) {\n        var question = this.survey.getQuestionByName(name);\n        if (!question || !Array.isArray(question.panels))\n            return false;\n        if (params.length > 1) {\n            if (params[1] < question.panels.length) {\n                container = question.panels[params[1]];\n            }\n        }\n        else {\n            for (var i = 0; i < question.panels.length; i++) {\n                if (!isContainerReadyCore(question.panels[i]))\n                    return false;\n            }\n            return true;\n        }\n    }\n    return isContainerReadyCore(container);\n}\nFunctionFactory.Instance.register(\"isContainerReady\", isContainerReady);\nfunction isDisplayMode() {\n    return this.survey && this.survey.isDisplayMode;\n}\nFunctionFactory.Instance.register(\"isDisplayMode\", isDisplayMode);\nfunction currentDate() {\n    return new Date();\n}\nFunctionFactory.Instance.register(\"currentDate\", currentDate);\nfunction today(params) {\n    var res = new Date();\n    if (_settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].localization.useLocalTimeZone) {\n        res.setHours(0, 0, 0, 0);\n    }\n    else {\n        res.setUTCHours(0, 0, 0, 0);\n    }\n    if (Array.isArray(params) && params.length == 1) {\n        res.setDate(res.getDate() + params[0]);\n    }\n    return res;\n}\nFunctionFactory.Instance.register(\"today\", today);\nfunction getYear(params) {\n    if (params.length !== 1 || !params[0])\n        return undefined;\n    return new Date(params[0]).getFullYear();\n}\nFunctionFactory.Instance.register(\"getYear\", getYear);\nfunction currentYear() {\n    return new Date().getFullYear();\n}\nFunctionFactory.Instance.register(\"currentYear\", currentYear);\nfunction diffDays(params) {\n    if (!Array.isArray(params) || params.length !== 2)\n        return 0;\n    if (!params[0] || !params[1])\n        return 0;\n    var date1 = new Date(params[0]);\n    var date2 = new Date(params[1]);\n    var diffTime = Math.abs(date2 - date1);\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n}\nFunctionFactory.Instance.register(\"diffDays\", diffDays);\nfunction dateFromFirstParameterOrToday(params) {\n    var date = today(undefined);\n    if (params && params[0]) {\n        date = new Date(params[0]);\n    }\n    return date;\n}\nfunction year(params) {\n    var date = dateFromFirstParameterOrToday(params);\n    return date.getFullYear();\n}\nFunctionFactory.Instance.register(\"year\", year);\nfunction month(params) {\n    var date = dateFromFirstParameterOrToday(params);\n    return date.getMonth() + 1;\n}\nFunctionFactory.Instance.register(\"month\", month);\nfunction day(params) {\n    var date = dateFromFirstParameterOrToday(params);\n    return date.getDate();\n}\nFunctionFactory.Instance.register(\"day\", day);\nfunction weekday(params) {\n    var date = dateFromFirstParameterOrToday(params);\n    return date.getDay();\n}\nFunctionFactory.Instance.register(\"weekday\", weekday);\nfunction getQuestionValueByContext(context, name) {\n    if (!context || !name)\n        return undefined;\n    var keys = [\"row\", \"panel\", \"survey\"];\n    for (var i = 0; i < keys.length; i++) {\n        var ctx = context[keys[i]];\n        if (ctx && ctx.getQuestionByName) {\n            var res = ctx.getQuestionByName(name);\n            if (res)\n                return res;\n        }\n    }\n    return null;\n}\nfunction displayValue(params) {\n    var q = getQuestionValueByContext(this, params[0]);\n    return q ? q.displayValue : \"\";\n}\nFunctionFactory.Instance.register(\"displayValue\", displayValue);\nfunction propertyValue(params) {\n    if (params.length !== 2 || !params[0] || !params[1])\n        return undefined;\n    var q = getQuestionValueByContext(this, params[0]);\n    return q ? q[params[1]] : undefined;\n}\nFunctionFactory.Instance.register(\"propertyValue\", propertyValue);\nfunction substring_(params) {\n    if (params.length < 2)\n        return \"\";\n    var s = params[0];\n    if (!s || typeof s !== \"string\")\n        return \"\";\n    var start = params[1];\n    if (!_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isNumber(start))\n        return \"\";\n    var end = params.length > 2 ? params[2] : undefined;\n    if (!_helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isNumber(end))\n        return s.substring(start);\n    return s.substring(start, end);\n}\nFunctionFactory.Instance.register(\"substring\", substring_);\n\n\n/***/ }),\n\n/***/ \"./src/global_variables_utils.ts\":\n/*!***************************************!*\\\n  !*** ./src/global_variables_utils.ts ***!\n  \\***************************************/\n/*! exports provided: DomWindowHelper, DomDocumentHelper */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_333988__) {\n\n\"use strict\";\n__nested_webpack_require_333988__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_333988__.d(__nested_webpack_exports__, \"DomWindowHelper\", function() { return DomWindowHelper; });\n/* harmony export (binding) */ __nested_webpack_require_333988__.d(__nested_webpack_exports__, \"DomDocumentHelper\", function() { return DomDocumentHelper; });\n/* eslint-disable no-restricted-globals */\nvar DomWindowHelper = /** @class */ (function () {\n    function DomWindowHelper() {\n    }\n    DomWindowHelper.isAvailable = function () {\n        return \"undefined\" !== typeof window;\n    };\n    DomWindowHelper.isFileReaderAvailable = function () {\n        if (!DomWindowHelper.isAvailable())\n            return false;\n        return !!window[\"FileReader\"];\n    };\n    DomWindowHelper.getLocation = function () {\n        if (!DomWindowHelper.isAvailable())\n            return;\n        return window.location;\n    };\n    DomWindowHelper.getVisualViewport = function () {\n        if (!DomWindowHelper.isAvailable())\n            return null;\n        return window.visualViewport;\n    };\n    DomWindowHelper.getInnerWidth = function () {\n        if (!DomWindowHelper.isAvailable())\n            return;\n        return window.innerWidth;\n    };\n    DomWindowHelper.getInnerHeight = function () {\n        if (!DomWindowHelper.isAvailable())\n            return null;\n        return window.innerHeight;\n    };\n    DomWindowHelper.getWindow = function () {\n        if (!DomWindowHelper.isAvailable())\n            return;\n        return window;\n    };\n    DomWindowHelper.hasOwn = function (propertyName) {\n        if (!DomWindowHelper.isAvailable())\n            return;\n        return propertyName in window;\n    };\n    DomWindowHelper.getSelection = function () {\n        if (DomWindowHelper.isAvailable() && window.getSelection) {\n            return window.getSelection();\n        }\n    };\n    DomWindowHelper.requestAnimationFrame = function (callback) {\n        if (DomWindowHelper.isAvailable()) {\n            return window.requestAnimationFrame(callback);\n        }\n    };\n    DomWindowHelper.addEventListener = function (type, listener) {\n        if (!DomWindowHelper.isAvailable())\n            return;\n        window.addEventListener(type, listener);\n    };\n    DomWindowHelper.removeEventListener = function (type, listener) {\n        if (!DomWindowHelper.isAvailable())\n            return;\n        window.removeEventListener(type, listener);\n    };\n    return DomWindowHelper;\n}());\n\nvar DomDocumentHelper = /** @class */ (function () {\n    function DomDocumentHelper() {\n    }\n    DomDocumentHelper.isAvailable = function () {\n        return \"undefined\" !== typeof document;\n    };\n    DomDocumentHelper.getBody = function () {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        return document.body;\n    };\n    DomDocumentHelper.getDocumentElement = function () {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        return document.documentElement;\n    };\n    DomDocumentHelper.getDocument = function () {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        return document;\n    };\n    DomDocumentHelper.getCookie = function () {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        return document.cookie;\n    };\n    DomDocumentHelper.setCookie = function (newCookie) {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        document.cookie = newCookie;\n    };\n    DomDocumentHelper.activeElementBlur = function () {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        var activeElement = document.activeElement;\n        if (!!activeElement && !!activeElement.blur) {\n            activeElement.blur();\n        }\n    };\n    DomDocumentHelper.createElement = function (tagName) {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        return document.createElement(tagName);\n    };\n    DomDocumentHelper.getComputedStyle = function (elt) {\n        if (!DomDocumentHelper.isAvailable())\n            return new CSSStyleDeclaration();\n        return document.defaultView.getComputedStyle(elt);\n    };\n    DomDocumentHelper.addEventListener = function (type, listener) {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        document.addEventListener(type, listener);\n    };\n    DomDocumentHelper.removeEventListener = function (type, listener) {\n        if (!DomDocumentHelper.isAvailable())\n            return;\n        document.removeEventListener(type, listener);\n    };\n    return DomDocumentHelper;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/helpers.ts\":\n/*!************************!*\\\n  !*** ./src/helpers.ts ***!\n  \\************************/\n/*! exports provided: Helpers */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_338767__) {\n\n\"use strict\";\n__nested_webpack_require_338767__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_338767__.d(__nested_webpack_exports__, \"Helpers\", function() { return Helpers; });\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_338767__(/*! ./settings */ \"./src/settings.ts\");\n\nvar Helpers = /** @class */ (function () {\n    function Helpers() {\n    }\n    /**\n     * A static methods that returns true if a value undefined, null, empty string or empty array.\n     * @param value\n     */\n    Helpers.isValueEmpty = function (value) {\n        if (Array.isArray(value) && value.length === 0)\n            return true;\n        if (!!value && Helpers.isValueObject(value) && value.constructor === Object) {\n            for (var key in value) {\n                if (!Helpers.isValueEmpty(value[key]))\n                    return false;\n            }\n            return true;\n        }\n        return !value && value !== 0 && value !== false;\n    };\n    Helpers.isArrayContainsEqual = function (x, y) {\n        if (!Array.isArray(x) || !Array.isArray(y))\n            return false;\n        if (x.length !== y.length)\n            return false;\n        for (var i = 0; i < x.length; i++) {\n            var j = 0;\n            for (; j < y.length; j++) {\n                if (Helpers.isTwoValueEquals(x[i], y[j]))\n                    break;\n            }\n            if (j === y.length)\n                return false;\n        }\n        return true;\n    };\n    Helpers.isArraysEqual = function (x, y, ignoreOrder, caseSensitive, trimStrings) {\n        if (ignoreOrder === void 0) { ignoreOrder = false; }\n        if (!Array.isArray(x) || !Array.isArray(y))\n            return false;\n        if (x.length !== y.length)\n            return false;\n        if (ignoreOrder) {\n            var xSorted = [];\n            var ySorted = [];\n            for (var i = 0; i < x.length; i++) {\n                xSorted.push(x[i]);\n                ySorted.push(y[i]);\n            }\n            xSorted.sort();\n            ySorted.sort();\n            x = xSorted;\n            y = ySorted;\n        }\n        for (var i = 0; i < x.length; i++) {\n            if (!Helpers.isTwoValueEquals(x[i], y[i], ignoreOrder, caseSensitive, trimStrings))\n                return false;\n        }\n        return true;\n    };\n    Helpers.compareStrings = function (x, y) {\n        var normalize = _settings__WEBPACK_IMPORTED_MODULE_0__[\"settings\"].comparator.normalizeTextCallback;\n        if (!!x)\n            x = normalize(x, \"compare\").trim();\n        if (!!y)\n            y = normalize(y, \"compare\").trim();\n        if (!x && !y)\n            return 0;\n        if (!x)\n            return -1;\n        if (!y)\n            return 1;\n        if (x === y)\n            return 0;\n        var digitIndex = -1;\n        for (var i = 0; i < x.length && i < y.length; i++) {\n            if (this.isCharDigit(x[i]) && this.isCharDigit(y[i])) {\n                digitIndex = i;\n                break;\n            }\n            if (x[i] !== y[i])\n                break;\n        }\n        if (digitIndex > -1) {\n            var nX = this.getNumberFromStr(x, digitIndex);\n            var nY = this.getNumberFromStr(y, digitIndex);\n            if (!Number.isNaN(nX) && !Number.isNaN(nY) && nX !== nY) {\n                return nX > nY ? 1 : -1;\n            }\n        }\n        return x > y ? 1 : -1;\n    };\n    Helpers.isTwoValueEquals = function (x, y, ignoreOrder, caseSensitive, trimStrings) {\n        if (ignoreOrder === void 0) { ignoreOrder = false; }\n        if (x === y)\n            return true;\n        if (Array.isArray(x) && x.length === 0 && typeof y === \"undefined\")\n            return true;\n        if (Array.isArray(y) && y.length === 0 && typeof x === \"undefined\")\n            return true;\n        if ((x === undefined || x === null) && y === \"\")\n            return true;\n        if ((y === undefined || y === null) && x === \"\")\n            return true;\n        if (trimStrings === undefined)\n            trimStrings = _settings__WEBPACK_IMPORTED_MODULE_0__[\"settings\"].comparator.trimStrings;\n        if (caseSensitive === undefined)\n            caseSensitive = _settings__WEBPACK_IMPORTED_MODULE_0__[\"settings\"].comparator.caseSensitive;\n        if (typeof x === \"string\" && typeof y === \"string\") {\n            var normalize = _settings__WEBPACK_IMPORTED_MODULE_0__[\"settings\"].comparator.normalizeTextCallback;\n            x = normalize(x, \"compare\");\n            y = normalize(y, \"compare\");\n            if (trimStrings) {\n                x = x.trim();\n                y = y.trim();\n            }\n            if (!caseSensitive) {\n                x = x.toLowerCase();\n                y = y.toLowerCase();\n            }\n            return x === y;\n        }\n        if (x instanceof Date && y instanceof Date)\n            return x.getTime() == y.getTime();\n        if (Helpers.isConvertibleToNumber(x) && Helpers.isConvertibleToNumber(y)) {\n            if (parseInt(x) === parseInt(y) && parseFloat(x) === parseFloat(y)) {\n                return true;\n            }\n        }\n        if ((!Helpers.isValueEmpty(x) && Helpers.isValueEmpty(y)) ||\n            (Helpers.isValueEmpty(x) && !Helpers.isValueEmpty(y)))\n            return false;\n        if ((x === true || x === false) && typeof y == \"string\") {\n            return x.toString() === y.toLocaleLowerCase();\n        }\n        if ((y === true || y === false) && typeof x == \"string\") {\n            return y.toString() === x.toLocaleLowerCase();\n        }\n        if (!Helpers.isValueObject(x) && !Helpers.isValueObject(y))\n            return x == y;\n        if (!Helpers.isValueObject(x) || !Helpers.isValueObject(y))\n            return false;\n        if (x[\"equals\"] && y[\"equals\"])\n            return x.equals(y);\n        if (Array.isArray(x) && Array.isArray(y)) {\n            return Helpers.isArraysEqual(x, y, ignoreOrder, caseSensitive, trimStrings);\n        }\n        for (var p in x) {\n            if (!x.hasOwnProperty(p))\n                continue;\n            if (!y.hasOwnProperty(p))\n                return false;\n            if (!this.isTwoValueEquals(x[p], y[p], ignoreOrder, caseSensitive, trimStrings))\n                return false;\n        }\n        for (p in y) {\n            if (y.hasOwnProperty(p) && !x.hasOwnProperty(p))\n                return false;\n        }\n        return true;\n    };\n    Helpers.randomizeArray = function (array) {\n        for (var i = array.length - 1; i > 0; i--) {\n            var j = Math.floor(Math.random() * (i + 1));\n            var temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n        return array;\n    };\n    Helpers.getUnbindValue = function (value) {\n        if (Array.isArray(value)) {\n            var res = [];\n            for (var i = 0; i < value.length; i++) {\n                res.push(Helpers.getUnbindValue(value[i]));\n            }\n            return res;\n        }\n        if (!!value && Helpers.isValueObject(value) && !(value instanceof Date)) {\n            return JSON.parse(JSON.stringify(value));\n        }\n        return value;\n    };\n    Helpers.createCopy = function (obj) {\n        var res = {};\n        if (!obj)\n            return res;\n        for (var key in obj) {\n            res[key] = obj[key];\n        }\n        return res;\n    };\n    Helpers.isConvertibleToNumber = function (value) {\n        return (value !== undefined &&\n            value !== null &&\n            !Array.isArray(value) &&\n            !isNaN(value));\n    };\n    Helpers.isValueObject = function (val, excludeArray) {\n        return val instanceof Object && (!excludeArray || !Array.isArray(val));\n    };\n    Helpers.isNumber = function (value) {\n        return !isNaN(this.getNumber(value));\n    };\n    Helpers.getNumber = function (value) {\n        if (typeof value == \"string\" &&\n            !!value &&\n            value.indexOf(\"0x\") == 0 &&\n            value.length > 32)\n            return NaN;\n        value = this.prepareStringToNumber(value);\n        var res = parseFloat(value);\n        if (isNaN(res) || !isFinite(value))\n            return NaN;\n        return res;\n    };\n    Helpers.prepareStringToNumber = function (val) {\n        if (typeof val !== \"string\" || !val)\n            return val;\n        var i = val.indexOf(\",\");\n        if (i > -1 && val.indexOf(\",\", i + 1) < 0) {\n            return val.replace(\",\", \".\");\n        }\n        return val;\n    };\n    Helpers.getMaxLength = function (maxLength, surveyLength) {\n        if (maxLength < 0) {\n            maxLength = surveyLength;\n        }\n        return maxLength > 0 ? maxLength : null;\n    };\n    Helpers.getRemainingCharacterCounterText = function (newValue, maxLength) {\n        if (!maxLength || maxLength <= 0 || !_settings__WEBPACK_IMPORTED_MODULE_0__[\"settings\"].showMaxLengthIndicator) {\n            return \"\";\n        }\n        var value = newValue ? newValue.length : \"0\";\n        return [value, maxLength].join(\"/\");\n    };\n    Helpers.getNumberByIndex = function (index, startIndexStr) {\n        if (index < 0)\n            return \"\";\n        var startIndex = 1;\n        var prefix = \"\";\n        var postfix = \".\";\n        var isNumeric = true;\n        var strIndex = \"A\";\n        var str = \"\";\n        if (!!startIndexStr) {\n            str = startIndexStr;\n            var ind = str.length - 1;\n            var hasDigit = false;\n            for (var i = 0; i < str.length; i++) {\n                if (Helpers.isCharDigit(str[i])) {\n                    hasDigit = true;\n                    break;\n                }\n            }\n            var checkLetter = function () {\n                return ((hasDigit && !Helpers.isCharDigit(str[ind])) ||\n                    Helpers.isCharNotLetterAndDigit(str[ind]));\n            };\n            while (ind >= 0 && checkLetter())\n                ind--;\n            var newPostfix = \"\";\n            if (ind < str.length - 1) {\n                newPostfix = str.substring(ind + 1);\n                str = str.substring(0, ind + 1);\n            }\n            ind = str.length - 1;\n            while (ind >= 0) {\n                if (checkLetter())\n                    break;\n                ind--;\n                if (!hasDigit)\n                    break;\n            }\n            strIndex = str.substring(ind + 1);\n            prefix = str.substring(0, ind + 1);\n            if (parseInt(strIndex))\n                startIndex = parseInt(strIndex);\n            else if (strIndex.length == 1)\n                isNumeric = false;\n            if (!!newPostfix || !!prefix) {\n                postfix = newPostfix;\n            }\n        }\n        if (isNumeric) {\n            var val = (index + startIndex).toString();\n            while (val.length < strIndex.length)\n                val = \"0\" + val;\n            return prefix + val + postfix;\n        }\n        return (prefix + String.fromCharCode(strIndex.charCodeAt(0) + index) + postfix);\n    };\n    Helpers.isCharNotLetterAndDigit = function (ch) {\n        return ch.toUpperCase() == ch.toLowerCase() && !Helpers.isCharDigit(ch);\n    };\n    Helpers.isCharDigit = function (ch) {\n        return ch >= \"0\" && ch <= \"9\";\n    };\n    Helpers.getNumberFromStr = function (str, index) {\n        if (!this.isCharDigit(str[index]))\n            return NaN;\n        var nStr = \"\";\n        while (index < str.length && this.isCharDigit(str[index])) {\n            nStr += str[index];\n            index++;\n        }\n        if (!nStr)\n            return NaN;\n        return this.getNumber(nStr);\n    };\n    Helpers.countDecimals = function (value) {\n        if (Helpers.isNumber(value) && Math.floor(value) !== value) {\n            var strs = value.toString().split(\".\");\n            return strs.length > 1 && strs[1].length || 0;\n        }\n        return 0;\n    };\n    Helpers.correctAfterPlusMinis = function (a, b, res) {\n        var digitsA = Helpers.countDecimals(a);\n        var digitsB = Helpers.countDecimals(b);\n        if (digitsA > 0 || digitsB > 0) {\n            var digits = Math.max(digitsA, digitsB);\n            res = parseFloat(res.toFixed(digits));\n        }\n        return res;\n    };\n    Helpers.sumAnyValues = function (a, b) {\n        if (!Helpers.isNumber(a) || !Helpers.isNumber(b)) {\n            if (Array.isArray(a) && Array.isArray(b))\n                return [].concat(a).concat(b);\n            if (Array.isArray(a) || Array.isArray(b)) {\n                var arr = Array.isArray(a) ? a : b;\n                var val = arr === a ? b : a;\n                if (typeof val === \"string\") {\n                    var str = arr.join(\", \");\n                    return arr === a ? str + val : val + str;\n                }\n                if (typeof val === \"number\") {\n                    var res = 0;\n                    for (var i = 0; i < arr.length; i++) {\n                        if (typeof arr[i] === \"number\") {\n                            res = Helpers.correctAfterPlusMinis(res, arr[i], res + arr[i]);\n                        }\n                    }\n                    return Helpers.correctAfterPlusMinis(res, val, res + val);\n                }\n            }\n            return a + b;\n        }\n        if (typeof a === \"string\" || typeof b === \"string\")\n            return a + b;\n        return Helpers.correctAfterPlusMinis(a, b, a + b);\n    };\n    Helpers.correctAfterMultiple = function (a, b, res) {\n        var digits = Helpers.countDecimals(a) + Helpers.countDecimals(b);\n        if (digits > 0) {\n            res = parseFloat(res.toFixed(digits));\n        }\n        return res;\n    };\n    Helpers.convertArrayValueToObject = function (src, propName, dest) {\n        if (dest === void 0) { dest = undefined; }\n        var res = new Array();\n        if (!src || !Array.isArray(src))\n            return res;\n        for (var i = 0; i < src.length; i++) {\n            var item = void 0;\n            if (Array.isArray(dest)) {\n                item = Helpers.findObjByPropValue(dest, propName, src[i]);\n            }\n            if (!item) {\n                item = {};\n                item[propName] = src[i];\n            }\n            res.push(item);\n        }\n        return res;\n    };\n    Helpers.findObjByPropValue = function (arr, propName, val) {\n        for (var i = 0; i < arr.length; i++) {\n            if (Helpers.isTwoValueEquals(arr[i][propName], val))\n                return arr[i];\n        }\n        return undefined;\n    };\n    Helpers.convertArrayObjectToValue = function (src, propName) {\n        var res = new Array();\n        if (!src || !Array.isArray(src))\n            return res;\n        for (var i = 0; i < src.length; i++) {\n            var itemVal = !!src[i] ? src[i][propName] : undefined;\n            if (!Helpers.isValueEmpty(itemVal))\n                res.push(itemVal);\n        }\n        return res;\n    };\n    Helpers.convertDateToString = function (date) {\n        var toStr = function (val) {\n            if (val < 10)\n                return \"0\" + val.toString();\n            return val.toString();\n        };\n        return date.getFullYear() + \"-\" + toStr(date.getMonth() + 1) + \"-\" + toStr(date.getDate());\n    };\n    Helpers.convertDateTimeToString = function (date) {\n        var toStr = function (val) {\n            if (val < 10)\n                return \"0\" + val.toString();\n            return val.toString();\n        };\n        return this.convertDateToString(date) + \" \" + toStr(date.getHours()) + \":\" + toStr(date.getMinutes());\n    };\n    Helpers.convertValToQuestionVal = function (val, inputType) {\n        if (val instanceof Date) {\n            if (inputType === \"datetime-local\")\n                return Helpers.convertDateTimeToString(val);\n            return Helpers.convertDateToString(val);\n        }\n        return val;\n    };\n    Helpers.compareVerions = function (ver1, ver2) {\n        if (!ver1 && !ver2)\n            return 0;\n        var ver1Ar = ver1.split(\".\");\n        var ver2Ar = ver2.split(\".\");\n        var len1 = ver1Ar.length;\n        var len2 = ver2Ar.length;\n        for (var i = 0; i < len1 && i < len2; i++) {\n            var str1 = ver1Ar[i];\n            var str2 = ver2Ar[i];\n            if (str1.length === str2.length) {\n                if (str1 !== str2) {\n                    return str1 < str2 ? -1 : 1;\n                }\n            }\n            else {\n                return str1.length < str2.length ? -1 : 1;\n            }\n        }\n        return len1 === len2 ? 0 : (len1 < len2 ? -1 : 1);\n    };\n    return Helpers;\n}());\n\nif (!String.prototype[\"format\"]) {\n    String.prototype[\"format\"] = function () {\n        var args = arguments;\n        return this.replace(/{(\\d+)}/g, function (match, number) {\n            return typeof args[number] != \"undefined\" ? args[number] : match;\n        });\n    };\n}\n\n\n/***/ }),\n\n/***/ \"./src/jsonobject.ts\":\n/*!***************************!*\\\n  !*** ./src/jsonobject.ts ***!\n  \\***************************/\n/*! exports provided: property, propertyArray, JsonObjectProperty, CustomPropertiesCollection, JsonMetadataClass, JsonMetadata, JsonError, JsonUnknownPropertyError, JsonMissingTypeErrorBase, JsonMissingTypeError, JsonIncorrectTypeError, JsonRequiredPropertyError, JsonRequiredArrayPropertyError, JsonIncorrectPropertyValueError, JsonObject, Serializer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_356022__) {\n\n\"use strict\";\n__nested_webpack_require_356022__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"property\", function() { return property; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"propertyArray\", function() { return propertyArray; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonObjectProperty\", function() { return JsonObjectProperty; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"CustomPropertiesCollection\", function() { return CustomPropertiesCollection; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonMetadataClass\", function() { return JsonMetadataClass; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonMetadata\", function() { return JsonMetadata; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonError\", function() { return JsonError; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonUnknownPropertyError\", function() { return JsonUnknownPropertyError; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonMissingTypeErrorBase\", function() { return JsonMissingTypeErrorBase; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonMissingTypeError\", function() { return JsonMissingTypeError; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonIncorrectTypeError\", function() { return JsonIncorrectTypeError; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonRequiredPropertyError\", function() { return JsonRequiredPropertyError; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonRequiredArrayPropertyError\", function() { return JsonRequiredArrayPropertyError; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonIncorrectPropertyValueError\", function() { return JsonIncorrectPropertyValueError; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"JsonObject\", function() { return JsonObject; });\n/* harmony export (binding) */ __nested_webpack_require_356022__.d(__nested_webpack_exports__, \"Serializer\", function() { return Serializer; });\n/* harmony import */ var _surveyStrings__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_356022__(/*! ./surveyStrings */ \"./src/surveyStrings.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_356022__(/*! ./base */ \"./src/base.ts\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_356022__(/*! ./helpers */ \"./src/helpers.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = ( false) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\n\n\n\nfunction ensureLocString(target, options, key) {\n    var locString = target.getLocalizableString(key);\n    if (!locString) {\n        var defaultStr = void 0;\n        if (typeof options.localizable === \"object\" && options.localizable.defaultStr) {\n            defaultStr = options.localizable.defaultStr;\n        }\n        locString = target.createLocalizableString(key, target, true, defaultStr);\n        if (typeof options.localizable === \"object\" &&\n            typeof options.localizable.onGetTextCallback === \"function\") {\n            locString.onGetTextCallback = options.localizable.onGetTextCallback;\n        }\n    }\n}\nfunction getLocStringValue(target, options, key) {\n    ensureLocString(target, options, key);\n    var res = target.getLocalizableStringText(key);\n    if (!!res)\n        return res;\n    if (typeof options.localizable === \"object\" && options.localizable.defaultStr) {\n        var loc = !!target.getLocale ? target.getLocale() : \"\";\n        return _surveyStrings__WEBPACK_IMPORTED_MODULE_0__[\"surveyLocalization\"].getString(options.localizable.defaultStr, loc);\n    }\n    return \"\";\n}\nfunction property(options) {\n    if (options === void 0) { options = {}; }\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    return function (target, key) {\n        var processComputedUpdater = function (obj, val) {\n            if (!!val && typeof val === \"object\" && val.type === _base__WEBPACK_IMPORTED_MODULE_1__[\"ComputedUpdater\"].ComputedUpdaterType) {\n                _base__WEBPACK_IMPORTED_MODULE_1__[\"Base\"].startCollectDependencies(function () { return obj[key] = val.updater(); }, obj, key);\n                var result = val.updater();\n                var dependencies = _base__WEBPACK_IMPORTED_MODULE_1__[\"Base\"].finishCollectDependencies();\n                val.setDependencies(dependencies);\n                if (obj.dependencies[key]) {\n                    obj.dependencies[key].dispose();\n                }\n                obj.dependencies[key] = val;\n                return result;\n            }\n            return val;\n        };\n        if (!options || !options.localizable) {\n            Object.defineProperty(target, key, {\n                get: function () {\n                    // const serializationProperty = Serializer.getProperty(target.getType(), key);\n                    // if(!!serializationProperty && options.defaultValue !== undefined) {\n                    //   ConsoleWarnings.error(\"remove defaultValue from @property for class \" + target.getType() + \" property name is \" + key);\n                    // }\n                    var defaultVal = null;\n                    if (!!options) {\n                        if (typeof options.getDefaultValue === \"function\") {\n                            defaultVal = options.getDefaultValue(this);\n                        }\n                        if (options.defaultValue !== undefined) {\n                            defaultVal = options.defaultValue;\n                        }\n                    }\n                    return this.getPropertyValue(key, defaultVal);\n                },\n                set: function (val) {\n                    var newValue = processComputedUpdater(this, val);\n                    this.setPropertyValue(key, newValue);\n                    if (!!options && options.onSet) {\n                        options.onSet(newValue, this);\n                    }\n                },\n            });\n        }\n        else {\n            Object.defineProperty(target, key, {\n                get: function () {\n                    return getLocStringValue(this, options, key);\n                },\n                set: function (val) {\n                    ensureLocString(this, options, key);\n                    var newValue = processComputedUpdater(this, val);\n                    this.setLocalizableStringText(key, newValue);\n                    if (!!options && options.onSet) {\n                        options.onSet(newValue, this);\n                    }\n                },\n            });\n            Object.defineProperty(target, typeof options.localizable === \"object\" && !!options.localizable.name ?\n                options.localizable.name : \"loc\" + key.charAt(0).toUpperCase() + key.slice(1), {\n                get: function () {\n                    ensureLocString(this, options, key);\n                    return this.getLocalizableString(key);\n                },\n            });\n        }\n    };\n}\nfunction ensureArray(target, options, key) {\n    target.ensureArray(key, function (item, index) {\n        var handler = !!options ? options.onPush : null;\n        handler && handler(item, index, target);\n    }, function (item, index) {\n        var handler = !!options ? options.onRemove : null;\n        handler && handler(item, index, target);\n    });\n}\nfunction propertyArray(options) {\n    return function (target, key) {\n        Object.defineProperty(target, key, {\n            get: function () {\n                ensureArray(this, options, key);\n                return this.getPropertyValue(key);\n            },\n            set: function (val) {\n                ensureArray(this, options, key);\n                var arr = this.getPropertyValue(key);\n                if (val === arr) {\n                    return;\n                }\n                if (arr) {\n                    arr.splice.apply(arr, __spreadArray([0, arr.length], (val || [])));\n                }\n                else {\n                    this.setPropertyValue(key, val);\n                }\n                if (!!options && options.onSet) {\n                    options.onSet(val, this);\n                }\n            },\n        });\n    };\n}\n/**\n * Contains information about a property of a survey element (page, panel, questions, and etc).\n * @see addProperty\n * @see removeProperty\n * @see [Add Properties](https://surveyjs.io/Documentation/Survey-Creator#addproperties)\n * @see [Remove Properties](https://surveyjs.io/Documentation/Survey-Creator#removeproperties)\n */\nvar JsonObjectProperty = /** @class */ (function () {\n    function JsonObjectProperty(classInfo, name, isRequired) {\n        if (isRequired === void 0) { isRequired = false; }\n        this.name = name;\n        this.isRequiredValue = false;\n        this.isUniqueValue = false;\n        this.isSerializable = true;\n        this.isLightSerializable = true;\n        this.isCustom = false;\n        this.isDynamicChoices = false; //TODO obsolete, use dependsOn attribute\n        this.isBindable = false;\n        this.category = \"\";\n        this.categoryIndex = -1;\n        this.visibleIndex = -1;\n        this.maxLength = -1;\n        this.isArray = false;\n        this.classInfoValue = classInfo;\n        this.isRequiredValue = isRequired;\n        this.idValue = JsonObjectProperty.Index++;\n    }\n    Object.defineProperty(JsonObjectProperty.prototype, \"id\", {\n        get: function () {\n            return this.idValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"classInfo\", {\n        get: function () {\n            return this.classInfoValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"type\", {\n        get: function () {\n            return this.typeValue ? this.typeValue : \"string\";\n        },\n        set: function (value) {\n            if (value === \"itemvalues\")\n                value = \"itemvalue[]\";\n            if (value === \"textitems\")\n                value = \"textitem[]\";\n            this.typeValue = value;\n            if (this.typeValue.indexOf(\"[]\") === this.typeValue.length - 2) {\n                this.isArray = true;\n                this.className = this.typeValue.substring(0, this.typeValue.length - 2);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"isRequired\", {\n        get: function () {\n            return this.isRequiredValue;\n        },\n        set: function (val) {\n            if (val !== this.isRequired) {\n                this.isRequiredValue = val;\n                if (!!this.classInfo) {\n                    this.classInfo.resetAllProperties();\n                }\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"isUnique\", {\n        get: function () {\n            return this.isUniqueValue;\n        },\n        set: function (val) {\n            this.isUniqueValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"uniquePropertyName\", {\n        get: function () {\n            return this.uniquePropertyValue;\n        },\n        set: function (val) {\n            this.uniquePropertyValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"hasToUseGetValue\", {\n        get: function () {\n            return this.onGetValue || this.serializationProperty;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObjectProperty.prototype.getDefaultValue = function (obj) {\n        var result = !!this.defaultValueFunc ? this.defaultValueFunc(obj) : this.defaultValueValue;\n        if (!!JsonObjectProperty.getItemValuesDefaultValue &&\n            Serializer.isDescendantOf(this.className, \"itemvalue\")) {\n            result = JsonObjectProperty.getItemValuesDefaultValue(this.defaultValueValue || [], this.className);\n        }\n        return result;\n    };\n    Object.defineProperty(JsonObjectProperty.prototype, \"defaultValue\", {\n        get: function () {\n            return this.getDefaultValue(undefined);\n        },\n        set: function (newValue) {\n            this.defaultValueValue = newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObjectProperty.prototype.isDefaultValue = function (value) {\n        return this.isDefaultValueByObj(undefined, value);\n    };\n    JsonObjectProperty.prototype.isDefaultValueByObj = function (obj, value) {\n        var dValue = this.getDefaultValue(obj);\n        if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(dValue)) {\n            return _helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isTwoValueEquals(value, dValue, false, true, false);\n        }\n        if (this.isLocalizable)\n            return value === null || value === undefined;\n        return ((value === false && (this.type == \"boolean\" || this.type == \"switch\")) ||\n            value === \"\" || _helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(value));\n    };\n    JsonObjectProperty.prototype.getSerializableValue = function (obj) {\n        if (!!this.onSerializeValue)\n            return this.onSerializeValue(obj);\n        return this.getValue(obj);\n    };\n    JsonObjectProperty.prototype.getValue = function (obj) {\n        if (this.onGetValue)\n            return this.onGetValue(obj);\n        if (this.serializationProperty && !!obj[this.serializationProperty])\n            return obj[this.serializationProperty].getJson();\n        return obj[this.name];\n    };\n    JsonObjectProperty.prototype.getPropertyValue = function (obj) {\n        if (this.isLocalizable) {\n            return !!obj[this.serializationProperty]\n                ? obj[this.serializationProperty].text\n                : null;\n        }\n        return this.getValue(obj);\n    };\n    Object.defineProperty(JsonObjectProperty.prototype, \"hasToUseSetValue\", {\n        get: function () {\n            return this.onSetValue || this.serializationProperty;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObjectProperty.prototype.settingValue = function (obj, value) {\n        if (!this.onSettingValue || obj.isLoadingFromJson)\n            return value;\n        return this.onSettingValue(obj, value);\n    };\n    JsonObjectProperty.prototype.setValue = function (obj, value, jsonConv) {\n        if (this.onSetValue) {\n            this.onSetValue(obj, value, jsonConv);\n        }\n        else {\n            if (this.serializationProperty && !!obj[this.serializationProperty])\n                obj[this.serializationProperty].setJson(value);\n            else {\n                if (value && typeof value === \"string\") {\n                    if (this.type == \"number\") {\n                        value = parseInt(value);\n                    }\n                    if (this.type == \"boolean\" || this.type == \"switch\") {\n                        value = value.toLowerCase() === \"true\";\n                    }\n                }\n                obj[this.name] = value;\n            }\n        }\n    };\n    JsonObjectProperty.prototype.validateValue = function (value) {\n        var choices = this.choices;\n        if (!Array.isArray(choices) || choices.length === 0)\n            return true;\n        return choices.indexOf(value) > -1;\n    };\n    JsonObjectProperty.prototype.getObjType = function (objType) {\n        if (!this.classNamePart)\n            return objType;\n        return objType.replace(this.classNamePart, \"\");\n    };\n    Object.defineProperty(JsonObjectProperty.prototype, \"choices\", {\n        /**\n         * Depricated, please use getChoices\n         */\n        get: function () {\n            return this.getChoices(null);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"hasChoices\", {\n        get: function () {\n            return !!this.choicesValue || !!this.choicesfunc;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObjectProperty.prototype.getChoices = function (obj, choicesCallback) {\n        if (choicesCallback === void 0) { choicesCallback = null; }\n        if (this.choicesValue != null)\n            return this.choicesValue;\n        if (this.choicesfunc != null)\n            return this.choicesfunc(obj, choicesCallback);\n        return null;\n    };\n    JsonObjectProperty.prototype.setChoices = function (value, valueFunc) {\n        if (valueFunc === void 0) { valueFunc = null; }\n        this.choicesValue = value;\n        this.choicesfunc = valueFunc;\n    };\n    JsonObjectProperty.prototype.getBaseValue = function () {\n        if (!this.baseValue)\n            return \"\";\n        if (typeof this.baseValue == \"function\")\n            return this.baseValue();\n        return this.baseValue;\n    };\n    JsonObjectProperty.prototype.setBaseValue = function (val) {\n        this.baseValue = val;\n    };\n    Object.defineProperty(JsonObjectProperty.prototype, \"readOnly\", {\n        get: function () {\n            return this.readOnlyValue != null ? this.readOnlyValue : false;\n        },\n        set: function (val) {\n            this.readOnlyValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObjectProperty.prototype.isEnable = function (obj) {\n        if (this.readOnly)\n            return false;\n        if (!obj || !this.enableIf)\n            return true;\n        return this.enableIf(this.getOriginalObj(obj));\n    };\n    JsonObjectProperty.prototype.isVisible = function (layout, obj) {\n        if (obj === void 0) { obj = null; }\n        var isLayout = !this.layout || this.layout == layout;\n        if (!this.visible || !isLayout)\n            return false;\n        if (!!this.visibleIf && !!obj) {\n            return this.visibleIf(this.getOriginalObj(obj));\n        }\n        return true;\n    };\n    JsonObjectProperty.prototype.getOriginalObj = function (obj) {\n        if (obj && obj.getOriginalObj) {\n            var orjObj = obj.getOriginalObj();\n            if (orjObj && Serializer.findProperty(orjObj.getType(), this.name)) {\n                return orjObj;\n            }\n        }\n        return obj;\n    };\n    Object.defineProperty(JsonObjectProperty.prototype, \"visible\", {\n        get: function () {\n            return this.visibleValue != null ? this.visibleValue : true;\n        },\n        set: function (val) {\n            this.visibleValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObjectProperty.prototype.isAvailableInVersion = function (ver) {\n        if (!!this.alternativeName || this.oldName)\n            return true;\n        return this.isAvailableInVersionCore(ver);\n    };\n    JsonObjectProperty.prototype.getSerializedName = function (ver) {\n        if (!this.alternativeName)\n            return this.name;\n        return this.isAvailableInVersionCore(ver) ? this.name : this.alternativeName || this.oldName;\n    };\n    JsonObjectProperty.prototype.getSerializedProperty = function (obj, ver) {\n        if (!this.oldName || this.isAvailableInVersionCore(ver))\n            return this;\n        if (!obj || !obj.getType)\n            return null;\n        return Serializer.findProperty(obj.getType(), this.oldName);\n    };\n    JsonObjectProperty.prototype.isAvailableInVersionCore = function (ver) {\n        if (!ver || !this.version)\n            return true;\n        return _helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].compareVerions(this.version, ver) <= 0;\n    };\n    Object.defineProperty(JsonObjectProperty.prototype, \"isLocalizable\", {\n        get: function () {\n            return this.isLocalizableValue != null ? this.isLocalizableValue : false;\n        },\n        set: function (val) {\n            this.isLocalizableValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(JsonObjectProperty.prototype, \"dataList\", {\n        get: function () {\n            return Array.isArray(this.dataListValue) ? this.dataListValue : [];\n        },\n        set: function (val) {\n            this.dataListValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObjectProperty.prototype.mergeWith = function (prop) {\n        var valuesNames = JsonObjectProperty.mergableValues;\n        for (var i = 0; i < valuesNames.length; i++) {\n            this.mergeValue(prop, valuesNames[i]);\n        }\n    };\n    JsonObjectProperty.prototype.addDependedProperty = function (name) {\n        if (!this.dependedProperties) {\n            this.dependedProperties = [];\n        }\n        if (this.dependedProperties.indexOf(name) < 0) {\n            this.dependedProperties.push(name);\n        }\n    };\n    JsonObjectProperty.prototype.getDependedProperties = function () {\n        return !!this.dependedProperties ? this.dependedProperties : [];\n    };\n    JsonObjectProperty.prototype.schemaType = function () {\n        if (this.className === \"choicesByUrl\")\n            return undefined;\n        if (this.className === \"string\")\n            return this.className;\n        if (!!this.className)\n            return \"array\";\n        if (!!this.baseClassName)\n            return \"array\";\n        if (this.type == \"switch\")\n            return \"boolean\";\n        if (this.type == \"boolean\" || this.type == \"number\")\n            return this.type;\n        return \"string\";\n    };\n    JsonObjectProperty.prototype.schemaRef = function () {\n        if (!!this.className)\n            return this.className;\n        return undefined;\n    };\n    JsonObjectProperty.prototype.mergeValue = function (prop, valueName) {\n        if (this[valueName] == null && prop[valueName] != null) {\n            this[valueName] = prop[valueName];\n        }\n    };\n    JsonObjectProperty.Index = 1;\n    JsonObjectProperty.mergableValues = [\n        \"typeValue\",\n        \"choicesValue\",\n        \"baseValue\",\n        \"readOnlyValue\",\n        \"visibleValue\",\n        \"isSerializable\",\n        \"isLightSerializable\",\n        \"isCustom\",\n        \"isBindable\",\n        \"isUnique\",\n        \"uniquePropertyName\",\n        \"isDynamicChoices\",\n        \"isLocalizableValue\",\n        \"className\",\n        \"alternativeName\",\n        \"oldName\",\n        \"layout\",\n        \"version\",\n        \"classNamePart\",\n        \"baseClassName\",\n        \"defaultValue\",\n        \"defaultValueFunc\",\n        \"serializationProperty\",\n        \"onGetValue\",\n        \"onSetValue\",\n        \"onSettingValue\",\n        \"displayName\",\n        \"category\",\n        \"categoryIndex\",\n        \"visibleIndex\",\n        \"nextToProperty\",\n        \"overridingProperty\",\n        \"showMode\",\n        \"dependedProperties\",\n        \"visibleIf\",\n        \"enableIf\",\n        \"onExecuteExpression\",\n        \"onPropertyEditorUpdate\",\n        \"maxLength\",\n        \"maxValue\",\n        \"minValue\",\n        \"dataListValue\",\n    ];\n    return JsonObjectProperty;\n}());\n\nvar CustomPropertiesCollection = /** @class */ (function () {\n    function CustomPropertiesCollection() {\n    }\n    CustomPropertiesCollection.addProperty = function (className, property) {\n        className = className.toLowerCase();\n        var props = CustomPropertiesCollection.properties;\n        if (!props[className]) {\n            props[className] = [];\n        }\n        props[className].push(property);\n    };\n    CustomPropertiesCollection.removeProperty = function (className, propertyName) {\n        className = className.toLowerCase();\n        var props = CustomPropertiesCollection.properties;\n        if (!props[className])\n            return;\n        var properties = props[className];\n        for (var i = 0; i < properties.length; i++) {\n            if (properties[i].name == propertyName) {\n                props[className].splice(i, 1);\n                break;\n            }\n        }\n    };\n    CustomPropertiesCollection.removeAllProperties = function (className) {\n        className = className.toLowerCase();\n        delete CustomPropertiesCollection.properties[className];\n    };\n    CustomPropertiesCollection.addClass = function (className, parentClassName) {\n        className = className.toLowerCase();\n        if (parentClassName) {\n            parentClassName = parentClassName.toLowerCase();\n        }\n        CustomPropertiesCollection.parentClasses[className] = parentClassName;\n    };\n    CustomPropertiesCollection.getProperties = function (className) {\n        className = className.toLowerCase();\n        var res = [];\n        var props = CustomPropertiesCollection.properties;\n        while (className) {\n            var properties = props[className];\n            if (properties) {\n                for (var i = 0; i < properties.length; i++) {\n                    res.push(properties[i]);\n                }\n            }\n            className = CustomPropertiesCollection.parentClasses[className];\n        }\n        return res;\n    };\n    CustomPropertiesCollection.createProperties = function (obj) {\n        if (!obj || !obj.getType)\n            return;\n        CustomPropertiesCollection.createPropertiesCore(obj, obj.getType());\n    };\n    CustomPropertiesCollection.createPropertiesCore = function (obj, className) {\n        var props = CustomPropertiesCollection.properties;\n        if (props[className]) {\n            CustomPropertiesCollection.createPropertiesInObj(obj, props[className]);\n        }\n        var parentClass = CustomPropertiesCollection.parentClasses[className];\n        if (parentClass) {\n            CustomPropertiesCollection.createPropertiesCore(obj, parentClass);\n        }\n    };\n    CustomPropertiesCollection.createPropertiesInObj = function (obj, properties) {\n        for (var i = 0; i < properties.length; i++) {\n            CustomPropertiesCollection.createPropertyInObj(obj, properties[i]);\n        }\n    };\n    CustomPropertiesCollection.createPropertyInObj = function (obj, prop) {\n        if (CustomPropertiesCollection.checkIsPropertyExists(obj, prop.name))\n            return;\n        if (!!prop.serializationProperty && CustomPropertiesCollection.checkIsPropertyExists(obj, prop.serializationProperty))\n            return;\n        if (prop.isLocalizable &&\n            prop.serializationProperty &&\n            obj.createCustomLocalizableObj) {\n            var locStr = obj.createCustomLocalizableObj(prop.name);\n            locStr.defaultValue = prop.defaultValue;\n            var locDesc = {\n                get: function () {\n                    return obj.getLocalizableString(prop.name);\n                },\n            };\n            Object.defineProperty(obj, prop.serializationProperty, locDesc);\n            var desc = {\n                get: function () {\n                    return obj.getLocalizableStringText(prop.name);\n                },\n                set: function (v) {\n                    obj.setLocalizableStringText(prop.name, v);\n                },\n            };\n            Object.defineProperty(obj, prop.name, desc);\n        }\n        else {\n            var defaultValue = prop.defaultValue;\n            var isArrayProp = prop.isArray || prop.type === \"multiplevalues\";\n            if (typeof obj.createNewArray === \"function\") {\n                if (Serializer.isDescendantOf(prop.className, \"itemvalue\")) {\n                    obj.createNewArray(prop.name, function (item) {\n                        item.locOwner = obj;\n                        item.ownerPropertyName = prop.name;\n                    });\n                    isArrayProp = true;\n                }\n                else {\n                    //It is a simple array property\n                    if (isArrayProp) {\n                        obj.createNewArray(prop.name);\n                    }\n                }\n                if (isArrayProp) {\n                    if (Array.isArray(defaultValue)) {\n                        obj.setPropertyValue(prop.name, defaultValue);\n                    }\n                    defaultValue = null;\n                }\n            }\n            if (!!obj.getPropertyValue && !!obj.setPropertyValue) {\n                var desc = {\n                    get: function () {\n                        if (!!prop.onGetValue) {\n                            return prop.onGetValue(obj);\n                        }\n                        return obj.getPropertyValue(prop.name, defaultValue);\n                    },\n                    set: function (v) {\n                        if (!!prop.onSetValue) {\n                            prop.onSetValue(obj, v, null);\n                        }\n                        else {\n                            obj.setPropertyValue(prop.name, v);\n                        }\n                    },\n                };\n                Object.defineProperty(obj, prop.name, desc);\n            }\n        }\n        if (prop.type === \"condition\" || prop.type === \"expression\") {\n            if (!!prop.onExecuteExpression) {\n                obj.addExpressionProperty(prop.name, prop.onExecuteExpression);\n            }\n        }\n    };\n    CustomPropertiesCollection.checkIsPropertyExists = function (obj, name) {\n        return obj.hasOwnProperty(name) || obj[name];\n    };\n    CustomPropertiesCollection.properties = {};\n    CustomPropertiesCollection.parentClasses = {};\n    return CustomPropertiesCollection;\n}());\n\nvar JsonMetadataClass = /** @class */ (function () {\n    function JsonMetadataClass(name, properties, creator, parentName) {\n        if (creator === void 0) { creator = null; }\n        if (parentName === void 0) { parentName = null; }\n        this.name = name;\n        this.creator = creator;\n        this.parentName = parentName;\n        name = name.toLowerCase();\n        this.isCustomValue = !creator && name !== \"survey\";\n        if (this.parentName) {\n            this.parentName = this.parentName.toLowerCase();\n            CustomPropertiesCollection.addClass(name, this.parentName);\n            if (!!creator) {\n                this.makeParentRegularClass();\n            }\n        }\n        this.properties = new Array();\n        for (var i = 0; i < properties.length; i++) {\n            this.createProperty(properties[i], this.isCustom);\n        }\n    }\n    //Obsolete\n    JsonMetadataClass.prototype.find = function (name) {\n        for (var i = 0; i < this.properties.length; i++) {\n            if (this.properties[i].name == name)\n                return this.properties[i];\n        }\n        return null;\n    };\n    JsonMetadataClass.prototype.findProperty = function (name) {\n        this.fillAllProperties();\n        return this.hashProperties[name];\n    };\n    JsonMetadataClass.prototype.getAllProperties = function () {\n        this.fillAllProperties();\n        return this.allProperties;\n    };\n    JsonMetadataClass.prototype.getRequiredProperties = function () {\n        if (!!this.requiredProperties)\n            return this.requiredProperties;\n        this.requiredProperties = [];\n        var props = this.getAllProperties();\n        for (var i = 0; i < props.length; i++) {\n            if (props[i].isRequired)\n                this.requiredProperties.push(props[i]);\n        }\n        return this.requiredProperties;\n    };\n    JsonMetadataClass.prototype.resetAllProperties = function () {\n        this.allProperties = undefined;\n        this.requiredProperties = undefined;\n        this.hashProperties = undefined;\n        var childClasses = Serializer.getChildrenClasses(this.name);\n        for (var i = 0; i < childClasses.length; i++) {\n            childClasses[i].resetAllProperties();\n        }\n    };\n    Object.defineProperty(JsonMetadataClass.prototype, \"isCustom\", {\n        get: function () { return this.isCustomValue; },\n        enumerable: false,\n        configurable: true\n    });\n    JsonMetadataClass.prototype.fillAllProperties = function () {\n        var _this = this;\n        if (!!this.allProperties)\n            return;\n        this.allProperties = [];\n        this.hashProperties = {};\n        var localProperties = {};\n        this.properties.forEach(function (prop) { return localProperties[prop.name] = prop; });\n        var parentClass = !!this.parentName ? Serializer.findClass(this.parentName) : null;\n        if (!!parentClass) {\n            var parentProperties = parentClass.getAllProperties();\n            parentProperties.forEach(function (prop) {\n                var overridedProp = localProperties[prop.name];\n                if (!!overridedProp) {\n                    overridedProp.mergeWith(prop);\n                    _this.addPropCore(overridedProp);\n                }\n                else {\n                    _this.addPropCore(prop);\n                }\n            });\n        }\n        this.properties.forEach(function (prop) {\n            if (!_this.hashProperties[prop.name]) {\n                _this.addPropCore(prop);\n            }\n        });\n    };\n    JsonMetadataClass.prototype.addPropCore = function (prop) {\n        this.allProperties.push(prop);\n        this.hashProperties[prop.name] = prop;\n        if (!!prop.alternativeName) {\n            this.hashProperties[prop.alternativeName] = prop;\n        }\n    };\n    JsonMetadataClass.prototype.isOverridedProp = function (propName) {\n        return !!this.parentName && !!Serializer.findProperty(this.parentName, propName);\n    };\n    JsonMetadataClass.prototype.hasRegularChildClass = function () {\n        if (!this.isCustom)\n            return;\n        this.isCustomValue = false;\n        for (var i = 0; i < this.properties.length; i++) {\n            this.properties[i].isCustom = false;\n        }\n        CustomPropertiesCollection.removeAllProperties(this.name);\n        this.makeParentRegularClass();\n    };\n    JsonMetadataClass.prototype.makeParentRegularClass = function () {\n        if (!this.parentName)\n            return;\n        var parent = Serializer.findClass(this.parentName);\n        if (!!parent) {\n            parent.hasRegularChildClass();\n        }\n    };\n    JsonMetadataClass.prototype.createProperty = function (propInfo, isCustom) {\n        if (isCustom === void 0) { isCustom = false; }\n        var propertyName = typeof propInfo === \"string\" ? propInfo : propInfo.name;\n        if (!propertyName)\n            return;\n        var propertyType = null;\n        var typeIndex = propertyName.indexOf(JsonMetadataClass.typeSymbol);\n        if (typeIndex > -1) {\n            propertyType = propertyName.substring(typeIndex + 1);\n            propertyName = propertyName.substring(0, typeIndex);\n        }\n        var isRequired = this.getIsPropertyNameRequired(propertyName) || !!propInfo.isRequired;\n        propertyName = this.getPropertyName(propertyName);\n        var prop = new JsonObjectProperty(this, propertyName, isRequired);\n        if (propertyType) {\n            prop.type = propertyType;\n        }\n        if (typeof propInfo === \"object\") {\n            if (propInfo.type) {\n                prop.type = propInfo.type;\n            }\n            if (propInfo.default !== undefined) {\n                prop.defaultValue = propInfo.default;\n            }\n            if (propInfo.defaultFunc !== undefined) {\n                prop.defaultValueFunc = propInfo.defaultFunc;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.isSerializable)) {\n                prop.isSerializable = propInfo.isSerializable;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.isLightSerializable)) {\n                prop.isLightSerializable = propInfo.isLightSerializable;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.maxLength)) {\n                prop.maxLength = propInfo.maxLength;\n            }\n            if (propInfo.displayName !== undefined) {\n                prop.displayName = propInfo.displayName;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.category)) {\n                prop.category = propInfo.category;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.categoryIndex)) {\n                prop.categoryIndex = propInfo.categoryIndex;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.nextToProperty)) {\n                prop.nextToProperty = propInfo.nextToProperty;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.overridingProperty)) {\n                prop.overridingProperty = propInfo.overridingProperty;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.visibleIndex)) {\n                prop.visibleIndex = propInfo.visibleIndex;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.showMode)) {\n                prop.showMode = propInfo.showMode;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.maxValue)) {\n                prop.maxValue = propInfo.maxValue;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.minValue)) {\n                prop.minValue = propInfo.minValue;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.dataList)) {\n                prop.dataList = propInfo.dataList;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.isDynamicChoices)) {\n                prop.isDynamicChoices = propInfo.isDynamicChoices;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.isBindable)) {\n                prop.isBindable = propInfo.isBindable;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.isUnique)) {\n                prop.isUnique = propInfo.isUnique;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.uniqueProperty)) {\n                prop.uniquePropertyName = propInfo.uniqueProperty;\n            }\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(propInfo.isArray)) {\n                prop.isArray = propInfo.isArray;\n            }\n            if (propInfo.visible === true || propInfo.visible === false) {\n                prop.visible = propInfo.visible;\n            }\n            if (!!propInfo.visibleIf) {\n                prop.visibleIf = propInfo.visibleIf;\n            }\n            if (!!propInfo.enableIf) {\n                prop.enableIf = propInfo.enableIf;\n            }\n            if (!!propInfo.onExecuteExpression) {\n                prop.onExecuteExpression = propInfo.onExecuteExpression;\n            }\n            if (!!propInfo.onPropertyEditorUpdate) {\n                prop.onPropertyEditorUpdate = propInfo.onPropertyEditorUpdate;\n            }\n            if (propInfo.readOnly === true) {\n                prop.readOnly = true;\n            }\n            if (propInfo.choices) {\n                var choicesFunc = typeof propInfo.choices === \"function\" ? propInfo.choices : null;\n                var choicesValue = typeof propInfo.choices !== \"function\" ? propInfo.choices : null;\n                prop.setChoices(choicesValue, choicesFunc);\n            }\n            if (!!propInfo.baseValue) {\n                prop.setBaseValue(propInfo.baseValue);\n            }\n            if (propInfo.onSerializeValue) {\n                prop.onSerializeValue = propInfo.onSerializeValue;\n            }\n            if (propInfo.onGetValue) {\n                prop.onGetValue = propInfo.onGetValue;\n            }\n            if (propInfo.onSetValue) {\n                prop.onSetValue = propInfo.onSetValue;\n            }\n            if (propInfo.onSettingValue) {\n                prop.onSettingValue = propInfo.onSettingValue;\n            }\n            if (propInfo.isLocalizable) {\n                propInfo.serializationProperty = \"loc\" + prop.name;\n            }\n            if (propInfo.serializationProperty) {\n                prop.serializationProperty = propInfo.serializationProperty;\n                var s;\n                if (prop.serializationProperty &&\n                    prop.serializationProperty.indexOf(\"loc\") == 0) {\n                    prop.isLocalizable = true;\n                }\n            }\n            if (propInfo.isLocalizable) {\n                prop.isLocalizable = propInfo.isLocalizable;\n            }\n            if (propInfo.className) {\n                prop.className = propInfo.className;\n            }\n            if (propInfo.baseClassName) {\n                prop.baseClassName = propInfo.baseClassName;\n                prop.isArray = true;\n            }\n            if (prop.isArray === true) {\n                prop.isArray = true;\n            }\n            if (propInfo.classNamePart) {\n                prop.classNamePart = propInfo.classNamePart;\n            }\n            if (propInfo.alternativeName) {\n                prop.alternativeName = propInfo.alternativeName;\n            }\n            if (propInfo.oldName) {\n                prop.oldName = propInfo.oldName;\n            }\n            if (propInfo.layout) {\n                prop.layout = propInfo.layout;\n            }\n            if (propInfo.version) {\n                prop.version = propInfo.version;\n            }\n            if (propInfo.dependsOn) {\n                this.addDependsOnProperties(prop, propInfo.dependsOn);\n            }\n        }\n        this.properties.push(prop);\n        if (isCustom && !this.isOverridedProp(prop.name)) {\n            prop.isCustom = true;\n            CustomPropertiesCollection.addProperty(this.name, prop);\n        }\n        return prop;\n    };\n    JsonMetadataClass.prototype.addDependsOnProperties = function (prop, dependsOn) {\n        if (Array.isArray(dependsOn)) {\n            for (var i = 0; i < dependsOn.length; i++) {\n                this.addDependsOnProperty(prop, dependsOn[i]);\n            }\n        }\n        else {\n            this.addDependsOnProperty(prop, dependsOn);\n        }\n    };\n    JsonMetadataClass.prototype.addDependsOnProperty = function (prop, dependsOn) {\n        var property = this.find(dependsOn);\n        if (!property) {\n            property = Serializer.findProperty(this.parentName, dependsOn);\n        }\n        if (!property)\n            return;\n        property.addDependedProperty(prop.name);\n    };\n    JsonMetadataClass.prototype.getIsPropertyNameRequired = function (propertyName) {\n        return (propertyName.length > 0 &&\n            propertyName[0] == JsonMetadataClass.requiredSymbol);\n    };\n    JsonMetadataClass.prototype.getPropertyName = function (propertyName) {\n        if (!this.getIsPropertyNameRequired(propertyName))\n            return propertyName;\n        propertyName = propertyName.slice(1);\n        return propertyName;\n    };\n    JsonMetadataClass.requiredSymbol = \"!\";\n    JsonMetadataClass.typeSymbol = \":\";\n    return JsonMetadataClass;\n}());\n\n/**\n * The metadata object. It contains object properties' runtime information and allows you to modify it.\n */\nvar JsonMetadata = /** @class */ (function () {\n    function JsonMetadata() {\n        this.classes = {};\n        this.alternativeNames = {};\n        this.childrenClasses = {};\n        this.dynamicPropsCache = {};\n    }\n    JsonMetadata.prototype.getObjPropertyValue = function (obj, name) {\n        if (this.isObjWrapper(obj) && this.isNeedUseObjWrapper(obj, name)) {\n            var orignalObj = obj.getOriginalObj();\n            var prop_1 = Serializer.findProperty(orignalObj.getType(), name);\n            if (!!prop_1)\n                return this.getObjPropertyValueCore(orignalObj, prop_1);\n        }\n        var prop = Serializer.findProperty(obj.getType(), name);\n        if (!prop)\n            return obj[name];\n        return this.getObjPropertyValueCore(obj, prop);\n    };\n    JsonMetadata.prototype.setObjPropertyValue = function (obj, name, val) {\n        if (obj[name] === val)\n            return;\n        if (!!obj[name] && !!obj[name].setJson) {\n            obj[name].setJson(val);\n        }\n        else {\n            if (Array.isArray(val)) {\n                var newVal = [];\n                for (var i = 0; i < val.length; i++)\n                    newVal.push(val[i]);\n                val = newVal;\n            }\n            obj[name] = val;\n        }\n    };\n    JsonMetadata.prototype.getObjPropertyValueCore = function (obj, prop) {\n        if (!prop.isSerializable)\n            return obj[prop.name];\n        if (prop.isLocalizable) {\n            if (prop.isArray)\n                return obj[prop.name];\n            if (!!prop.serializationProperty)\n                return obj[prop.serializationProperty].text;\n        }\n        return obj.getPropertyValue(prop.name);\n    };\n    JsonMetadata.prototype.isObjWrapper = function (obj) {\n        return !!obj.getOriginalObj && !!obj.getOriginalObj();\n    };\n    JsonMetadata.prototype.isNeedUseObjWrapper = function (obj, name) {\n        if (!obj.getDynamicProperties)\n            return true;\n        var props = obj.getDynamicProperties();\n        if (!Array.isArray(props))\n            return false;\n        for (var i = 0; i < props.length; i++) {\n            if (props[i].name === name)\n                return true;\n        }\n        return false;\n    };\n    JsonMetadata.prototype.addClass = function (name, properties, creator, parentName) {\n        if (creator === void 0) { creator = null; }\n        if (parentName === void 0) { parentName = null; }\n        name = name.toLowerCase();\n        var metaDataClass = new JsonMetadataClass(name, properties, creator, parentName);\n        this.classes[name] = metaDataClass;\n        if (parentName) {\n            parentName = parentName.toLowerCase();\n            var children = this.childrenClasses[parentName];\n            if (!children) {\n                this.childrenClasses[parentName] = [];\n            }\n            this.childrenClasses[parentName].push(metaDataClass);\n        }\n        return metaDataClass;\n    };\n    JsonMetadata.prototype.removeClass = function (name) {\n        var metaClass = this.findClass(name);\n        if (!metaClass)\n            return;\n        delete this.classes[metaClass.name];\n        if (!!metaClass.parentName) {\n            var index = this.childrenClasses[metaClass.parentName].indexOf(metaClass);\n            if (index > -1) {\n                this.childrenClasses[metaClass.parentName].splice(index, 1);\n            }\n        }\n    };\n    JsonMetadata.prototype.overrideClassCreatore = function (name, creator) {\n        this.overrideClassCreator(name, creator);\n    };\n    JsonMetadata.prototype.overrideClassCreator = function (name, creator) {\n        name = name.toLowerCase();\n        var metaDataClass = this.findClass(name);\n        if (metaDataClass) {\n            metaDataClass.creator = creator;\n        }\n    };\n    JsonMetadata.prototype.getProperties = function (className) {\n        var metaClass = this.findClass(className);\n        if (!metaClass)\n            return [];\n        return metaClass.getAllProperties();\n    };\n    JsonMetadata.prototype.getPropertiesByObj = function (obj) {\n        if (!obj || !obj.getType)\n            return [];\n        var props = this.getProperties(obj.getType());\n        var dynamicProps = this.getDynamicPropertiesByObj(obj);\n        return [].concat(props).concat(dynamicProps);\n    };\n    JsonMetadata.prototype.addDynamicPropertiesIntoObj = function (dest, src, props) {\n        var _this = this;\n        props.forEach(function (prop) {\n            _this.addDynamicPropertyIntoObj(dest, src, prop.name, false);\n            if (prop.serializationProperty) {\n                _this.addDynamicPropertyIntoObj(dest, src, prop.serializationProperty, true);\n            }\n            if (prop.alternativeName) {\n                _this.addDynamicPropertyIntoObj(dest, src, prop.alternativeName, false);\n            }\n        });\n    };\n    JsonMetadata.prototype.addDynamicPropertyIntoObj = function (dest, src, propName, isReadOnly) {\n        var desc = {\n            configurable: true,\n            get: function () {\n                return src[propName];\n            },\n        };\n        if (!isReadOnly) {\n            desc[\"set\"] = function (v) {\n                src[propName] = v;\n            };\n        }\n        Object.defineProperty(dest, propName, desc);\n    };\n    JsonMetadata.prototype.getDynamicPropertiesByObj = function (obj, dynamicType) {\n        if (dynamicType === void 0) { dynamicType = null; }\n        if (!obj || !obj.getType)\n            return [];\n        if (!!obj.getDynamicProperties)\n            return obj.getDynamicProperties();\n        if (!obj.getDynamicType && !dynamicType)\n            return [];\n        var dType = !!dynamicType ? dynamicType : obj.getDynamicType();\n        return this.getDynamicPropertiesByTypes(obj.getType(), dType);\n    };\n    JsonMetadata.prototype.getDynamicPropertiesByTypes = function (objType, dynamicType, invalidNames) {\n        if (!dynamicType)\n            return [];\n        var cacheType = dynamicType + \"-\" + objType;\n        if (this.dynamicPropsCache[cacheType])\n            return this.dynamicPropsCache[cacheType];\n        var dynamicProps = this.getProperties(dynamicType);\n        if (!dynamicProps || dynamicProps.length == 0)\n            return [];\n        var hash = {};\n        var props = this.getProperties(objType);\n        for (var i = 0; i < props.length; i++) {\n            hash[props[i].name] = props[i];\n        }\n        var res = [];\n        if (!invalidNames)\n            invalidNames = [];\n        for (var i_1 = 0; i_1 < dynamicProps.length; i_1++) {\n            var dProp = dynamicProps[i_1];\n            if (!hash[dProp.name] && invalidNames.indexOf(dProp.name) < 0) {\n                res.push(dProp);\n            }\n        }\n        this.dynamicPropsCache[cacheType] = res;\n        return res;\n    };\n    JsonMetadata.prototype.hasOriginalProperty = function (obj, propName) {\n        return !!this.getOriginalProperty(obj, propName);\n    };\n    JsonMetadata.prototype.getOriginalProperty = function (obj, propName) {\n        var res = this.findProperty(obj.getType(), propName);\n        if (!!res)\n            return res;\n        if (this.isObjWrapper(obj))\n            return this.findProperty(obj.getOriginalObj().getType(), propName);\n        return null;\n    };\n    JsonMetadata.prototype.getProperty = function (className, propertyName) {\n        var prop = this.findProperty(className, propertyName);\n        if (!prop)\n            return prop;\n        var classInfo = this.findClass(className);\n        if (prop.classInfo === classInfo)\n            return prop;\n        var newProp = new JsonObjectProperty(classInfo, prop.name, prop.isRequired);\n        newProp.mergeWith(prop);\n        newProp.isArray = prop.isArray;\n        classInfo.properties.push(newProp);\n        classInfo.resetAllProperties();\n        return newProp;\n    };\n    JsonMetadata.prototype.findProperty = function (className, propertyName) {\n        var cl = this.findClass(className);\n        return !!cl ? cl.findProperty(propertyName) : null;\n    };\n    JsonMetadata.prototype.findProperties = function (className, propertyNames) {\n        var result = new Array();\n        var cl = this.findClass(className);\n        if (!cl)\n            return result;\n        for (var i = 0; i < propertyNames.length; i++) {\n            var prop = cl.findProperty(propertyNames[i]);\n            if (prop) {\n                result.push(prop);\n            }\n        }\n        return result;\n    };\n    JsonMetadata.prototype.getAllPropertiesByName = function (propertyName) {\n        var res = new Array();\n        var classes = this.getAllClasses();\n        for (var i = 0; i < classes.length; i++) {\n            var classInfo = this.findClass(classes[i]);\n            for (var j = 0; j < classInfo.properties.length; j++) {\n                if (classInfo.properties[j].name == propertyName) {\n                    res.push(classInfo.properties[j]);\n                    break;\n                }\n            }\n        }\n        return res;\n    };\n    JsonMetadata.prototype.getAllClasses = function () {\n        var res = new Array();\n        for (var name in this.classes) {\n            res.push(name);\n        }\n        return res;\n    };\n    JsonMetadata.prototype.createClass = function (name, json) {\n        if (json === void 0) { json = undefined; }\n        name = name.toLowerCase();\n        var metaDataClass = this.findClass(name);\n        if (!metaDataClass)\n            return null;\n        if (metaDataClass.creator)\n            return metaDataClass.creator(json);\n        var parentName = metaDataClass.parentName;\n        while (parentName) {\n            metaDataClass = this.findClass(parentName);\n            if (!metaDataClass)\n                return null;\n            parentName = metaDataClass.parentName;\n            if (metaDataClass.creator)\n                return this.createCustomType(name, metaDataClass.creator, json);\n        }\n        return null;\n    };\n    JsonMetadata.prototype.createCustomType = function (name, creator, json) {\n        if (json === void 0) { json = undefined; }\n        name = name.toLowerCase();\n        var res = creator(json);\n        var customTypeName = name;\n        var customTemplateName = res.getTemplate\n            ? res.getTemplate()\n            : res.getType();\n        res.getType = function () {\n            return customTypeName;\n        };\n        res.getTemplate = function () {\n            return customTemplateName;\n        };\n        CustomPropertiesCollection.createProperties(res);\n        return res;\n    };\n    JsonMetadata.prototype.getChildrenClasses = function (name, canBeCreated) {\n        if (canBeCreated === void 0) { canBeCreated = false; }\n        name = name.toLowerCase();\n        var result = [];\n        this.fillChildrenClasses(name, canBeCreated, result);\n        return result;\n    };\n    JsonMetadata.prototype.getRequiredProperties = function (name) {\n        var metaClass = this.findClass(name);\n        if (!metaClass)\n            return [];\n        var props = metaClass.getRequiredProperties();\n        var res = [];\n        for (var i = 0; i < props.length; i++) {\n            res.push(props[i].name);\n        }\n        return res;\n    };\n    JsonMetadata.prototype.addProperties = function (className, propertiesInfos) {\n        className = className.toLowerCase();\n        var metaDataClass = this.findClass(className);\n        for (var i = 0; i < propertiesInfos.length; i++) {\n            this.addCustomPropertyCore(metaDataClass, propertiesInfos[i]);\n        }\n    };\n    JsonMetadata.prototype.addProperty = function (className, propertyInfo) {\n        return this.addCustomPropertyCore(this.findClass(className), propertyInfo);\n    };\n    JsonMetadata.prototype.addCustomPropertyCore = function (metaDataClass, propertyInfo) {\n        if (!metaDataClass)\n            return null;\n        var property = metaDataClass.createProperty(propertyInfo, true);\n        if (property) {\n            this.clearDynamicPropsCache(metaDataClass);\n            metaDataClass.resetAllProperties();\n        }\n        return property;\n    };\n    JsonMetadata.prototype.removeProperty = function (className, propertyName) {\n        var metaDataClass = this.findClass(className);\n        if (!metaDataClass)\n            return false;\n        var property = metaDataClass.find(propertyName);\n        if (property) {\n            this.clearDynamicPropsCache(metaDataClass);\n            this.removePropertyFromClass(metaDataClass, property);\n            metaDataClass.resetAllProperties();\n            CustomPropertiesCollection.removeProperty(metaDataClass.name, propertyName);\n        }\n    };\n    JsonMetadata.prototype.clearDynamicPropsCache = function (metaDataClass) {\n        this.dynamicPropsCache = {};\n    };\n    JsonMetadata.prototype.removePropertyFromClass = function (metaDataClass, property) {\n        var index = metaDataClass.properties.indexOf(property);\n        if (index < 0)\n            return;\n        metaDataClass.properties.splice(index, 1);\n    };\n    JsonMetadata.prototype.fillChildrenClasses = function (name, canBeCreated, result) {\n        var children = this.childrenClasses[name];\n        if (!children)\n            return;\n        for (var i = 0; i < children.length; i++) {\n            if (!canBeCreated || children[i].creator) {\n                result.push(children[i]);\n            }\n            this.fillChildrenClasses(children[i].name, canBeCreated, result);\n        }\n    };\n    JsonMetadata.prototype.findClass = function (name) {\n        name = name.toLowerCase();\n        var res = this.classes[name];\n        if (!res) {\n            var newName = this.alternativeNames[name];\n            if (!!newName && newName != name)\n                return this.findClass(newName);\n        }\n        return res;\n    };\n    JsonMetadata.prototype.isDescendantOf = function (className, ancestorClassName) {\n        if (!className || !ancestorClassName) {\n            return false;\n        }\n        className = className.toLowerCase();\n        ancestorClassName = ancestorClassName.toLowerCase();\n        var class_ = this.findClass(className);\n        if (!class_) {\n            return false;\n        }\n        var parentClass = class_;\n        do {\n            if (parentClass.name === ancestorClassName) {\n                return true;\n            }\n            parentClass = this.classes[parentClass.parentName];\n        } while (!!parentClass);\n        return false;\n    };\n    JsonMetadata.prototype.addAlterNativeClassName = function (name, alternativeName) {\n        this.alternativeNames[alternativeName.toLowerCase()] = name.toLowerCase();\n    };\n    JsonMetadata.prototype.generateSchema = function (className) {\n        if (className === void 0) { className = undefined; }\n        if (!className)\n            className = \"survey\";\n        var classInfo = this.findClass(className);\n        if (!classInfo)\n            return null;\n        var res = {\n            $schema: \"http://json-schema.org/draft-07/schema#\",\n            title: \"SurveyJS Library json schema\",\n            type: \"object\",\n            properties: {},\n            definitions: { locstring: this.generateLocStrClass() },\n        };\n        this.generateSchemaProperties(classInfo, res, res.definitions, true);\n        return res;\n    };\n    JsonMetadata.prototype.generateLocStrClass = function () {\n        var props = {};\n        var locProp = Serializer.findProperty(\"survey\", \"locale\");\n        if (!!locProp) {\n            var choices = locProp.getChoices(null);\n            if (Array.isArray(choices)) {\n                if (choices.indexOf(\"en\") < 0) {\n                    choices.splice(0, 0, \"en\");\n                }\n                choices.splice(0, 0, \"default\");\n                choices.forEach(function (l) { if (!!l) {\n                    props[l] = { type: \"string\" };\n                } });\n            }\n        }\n        return {\n            $id: \"locstring\",\n            type: \"object\",\n            properties: props\n        };\n    };\n    JsonMetadata.prototype.generateSchemaProperties = function (classInfo, classSchema, schemaDef, isRoot) {\n        if (!classInfo)\n            return;\n        var schemaProperties = classSchema.properties;\n        var requiredProps = [];\n        if (classInfo.name === \"question\" || classInfo.name === \"panel\") {\n            schemaProperties.type = { type: \"string\" };\n            requiredProps.push(\"type\");\n        }\n        for (var i = 0; i < classInfo.properties.length; i++) {\n            var prop = classInfo.properties[i];\n            if (!!classInfo.parentName && !!Serializer.findProperty(classInfo.parentName, prop.name))\n                continue;\n            schemaProperties[prop.name] = this.generateSchemaProperty(prop, schemaDef, isRoot);\n            if (prop.isRequired)\n                requiredProps.push(prop.name);\n        }\n        if (requiredProps.length > 0) {\n            classSchema.required = requiredProps;\n        }\n    };\n    JsonMetadata.prototype.generateSchemaProperty = function (prop, schemaDef, isRoot) {\n        if (prop.isLocalizable) {\n            return { oneOf: [\n                    { \"type\": \"string\" },\n                    { \"$ref\": this.getChemeRefName(\"locstring\", isRoot) }\n                ] };\n        }\n        var propType = prop.schemaType();\n        var refType = prop.schemaRef();\n        var res = {};\n        if (!!propType) {\n            res.type = propType;\n        }\n        if (prop.hasChoices) {\n            var enumRes = prop.getChoices(null);\n            if (Array.isArray(enumRes) && enumRes.length > 0) {\n                res.enum = this.getChoicesValues(enumRes);\n            }\n        }\n        if (!!refType) {\n            if (propType === \"array\") {\n                if (prop.className === \"string\") {\n                    res.items = { type: prop.className };\n                }\n                else {\n                    res.items = { $ref: this.getChemeRefName(prop.className, isRoot) };\n                }\n            }\n            else {\n                res[\"$ref\"] = this.getChemeRefName(refType, isRoot);\n            }\n            this.generateChemaClass(prop.className, schemaDef, false);\n        }\n        if (!!prop.baseClassName) {\n            var usedClasses = this.getChildrenClasses(prop.baseClassName, true);\n            if (prop.baseClassName == \"question\") {\n                usedClasses.push(this.findClass(\"panel\"));\n            }\n            res.items = { anyOf: [] };\n            for (var i = 0; i < usedClasses.length; i++) {\n                var className = usedClasses[i].name;\n                res.items.anyOf.push({ $ref: this.getChemeRefName(className, isRoot) });\n                this.generateChemaClass(className, schemaDef, false);\n            }\n        }\n        return res;\n    };\n    JsonMetadata.prototype.getChemeRefName = function (className, isRoot) {\n        //Fix for #6486, according to https://niem.github.io/json/reference/json-schema/references/#:~:text=In%20a%20JSON%20schema%2C%20a,%2C%20an%20in%2Dschema%20reference\n        //Checked by https://www.jsonschemavalidator.net/\n        return isRoot ? \"#/definitions/\" + className : className;\n    };\n    JsonMetadata.prototype.generateChemaClass = function (className, schemaDef, isRoot) {\n        if (!!schemaDef[className])\n            return;\n        var classInfo = this.findClass(className);\n        if (!classInfo)\n            return;\n        var hasParent = !!classInfo.parentName && classInfo.parentName != \"base\";\n        if (hasParent) {\n            this.generateChemaClass(classInfo.parentName, schemaDef, isRoot);\n        }\n        var res = { type: \"object\", $id: className };\n        schemaDef[className] = res;\n        var chemaProps = { properties: {} };\n        this.generateSchemaProperties(classInfo, chemaProps, schemaDef, isRoot);\n        if (hasParent) {\n            res.allOf = [\n                { $ref: this.getChemeRefName(classInfo.parentName, isRoot) },\n                { properties: chemaProps.properties },\n            ];\n        }\n        else {\n            res.properties = chemaProps.properties;\n        }\n        if (Array.isArray(chemaProps.required)) {\n            res.required = chemaProps.required;\n        }\n    };\n    JsonMetadata.prototype.getChoicesValues = function (enumRes) {\n        var res = new Array();\n        enumRes.forEach(function (item) {\n            if (typeof item === \"object\" && item.value !== undefined) {\n                res.push(item.value);\n            }\n            else {\n                res.push(item);\n            }\n        });\n        return res;\n    };\n    return JsonMetadata;\n}());\n\nvar JsonError = /** @class */ (function () {\n    function JsonError(type, message) {\n        this.type = type;\n        this.message = message;\n        this.description = \"\";\n        this.at = -1;\n        this.end = -1;\n    }\n    JsonError.prototype.getFullDescription = function () {\n        return this.message + (this.description ? \"\\n\" + this.description : \"\");\n    };\n    return JsonError;\n}());\n\nvar JsonUnknownPropertyError = /** @class */ (function (_super) {\n    __extends(JsonUnknownPropertyError, _super);\n    function JsonUnknownPropertyError(propertyName, className) {\n        var _this = _super.call(this, \"unknownproperty\", \"Unknown property in class '\" + className + \"': '\" + propertyName + \"'.\") || this;\n        _this.propertyName = propertyName;\n        _this.className = className;\n        return _this;\n    }\n    return JsonUnknownPropertyError;\n}(JsonError));\n\nvar JsonMissingTypeErrorBase = /** @class */ (function (_super) {\n    __extends(JsonMissingTypeErrorBase, _super);\n    function JsonMissingTypeErrorBase(baseClassName, type, message) {\n        var _this = _super.call(this, type, message) || this;\n        _this.baseClassName = baseClassName;\n        _this.type = type;\n        _this.message = message;\n        return _this;\n    }\n    return JsonMissingTypeErrorBase;\n}(JsonError));\n\nvar JsonMissingTypeError = /** @class */ (function (_super) {\n    __extends(JsonMissingTypeError, _super);\n    function JsonMissingTypeError(propertyName, baseClassName) {\n        var _this = _super.call(this, baseClassName, \"missingtypeproperty\", \"The property type is missing in the object. Please take a look at property: '\" +\n            propertyName +\n            \"'.\") || this;\n        _this.propertyName = propertyName;\n        _this.baseClassName = baseClassName;\n        return _this;\n    }\n    return JsonMissingTypeError;\n}(JsonMissingTypeErrorBase));\n\nvar JsonIncorrectTypeError = /** @class */ (function (_super) {\n    __extends(JsonIncorrectTypeError, _super);\n    function JsonIncorrectTypeError(propertyName, baseClassName) {\n        var _this = _super.call(this, baseClassName, \"incorrecttypeproperty\", \"The property type is incorrect in the object. Please take a look at property: '\" +\n            propertyName +\n            \"'.\") || this;\n        _this.propertyName = propertyName;\n        _this.baseClassName = baseClassName;\n        return _this;\n    }\n    return JsonIncorrectTypeError;\n}(JsonMissingTypeErrorBase));\n\nvar JsonRequiredPropertyError = /** @class */ (function (_super) {\n    __extends(JsonRequiredPropertyError, _super);\n    function JsonRequiredPropertyError(propertyName, className) {\n        var _this = _super.call(this, \"requiredproperty\", \"The property '\" +\n            propertyName +\n            \"' is required in class '\" +\n            className +\n            \"'.\") || this;\n        _this.propertyName = propertyName;\n        _this.className = className;\n        return _this;\n    }\n    return JsonRequiredPropertyError;\n}(JsonError));\n\nvar JsonRequiredArrayPropertyError = /** @class */ (function (_super) {\n    __extends(JsonRequiredArrayPropertyError, _super);\n    function JsonRequiredArrayPropertyError(propertyName, className) {\n        var _this = _super.call(this, \"arrayproperty\", \"The property '\" + propertyName + \"' should be an array in '\" + className + \"'.\") || this;\n        _this.propertyName = propertyName;\n        _this.className = className;\n        return _this;\n    }\n    return JsonRequiredArrayPropertyError;\n}(JsonError));\n\nvar JsonIncorrectPropertyValueError = /** @class */ (function (_super) {\n    __extends(JsonIncorrectPropertyValueError, _super);\n    function JsonIncorrectPropertyValueError(property, value) {\n        var _this = _super.call(this, \"incorrectvalue\", \"The property value: '\" + value + \"' is incorrect for property '\" + property.name + \"'.\") || this;\n        _this.property = property;\n        _this.value = value;\n        return _this;\n    }\n    return JsonIncorrectPropertyValueError;\n}(JsonError));\n\nvar JsonObject = /** @class */ (function () {\n    function JsonObject() {\n        this.errors = new Array();\n        this.lightSerializing = false;\n    }\n    Object.defineProperty(JsonObject, \"metaData\", {\n        get: function () {\n            return JsonObject.metaDataValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JsonObject.prototype.toJsonObject = function (obj, options) {\n        return this.toJsonObjectCore(obj, null, options);\n    };\n    JsonObject.prototype.toObject = function (jsonObj, obj, options) {\n        this.toObjectCore(jsonObj, obj, options);\n        var error = this.getRequiredError(obj, jsonObj);\n        if (!!error) {\n            this.addNewError(error, jsonObj, obj);\n        }\n    };\n    JsonObject.prototype.toObjectCore = function (jsonObj, obj, options) {\n        if (!jsonObj)\n            return;\n        var properties = null;\n        var objType = undefined;\n        var needAddErrors = true;\n        if (obj.getType) {\n            objType = obj.getType();\n            properties = Serializer.getProperties(objType);\n            needAddErrors =\n                !!objType && !Serializer.isDescendantOf(objType, \"itemvalue\");\n        }\n        if (!properties)\n            return;\n        if (obj.startLoadingFromJson) {\n            obj.startLoadingFromJson(jsonObj);\n        }\n        properties = this.addDynamicProperties(obj, jsonObj, properties);\n        this.options = options;\n        for (var key in jsonObj) {\n            if (key === JsonObject.typePropertyName)\n                continue;\n            if (key === JsonObject.positionPropertyName) {\n                obj[key] = jsonObj[key];\n                continue;\n            }\n            var property = this.findProperty(properties, key);\n            if (!property) {\n                if (needAddErrors) {\n                    this.addNewError(new JsonUnknownPropertyError(key.toString(), objType), jsonObj, obj);\n                }\n                continue;\n            }\n            this.valueToObj(jsonObj[key], obj, property, jsonObj, options);\n        }\n        this.options = undefined;\n        if (obj.endLoadingFromJson) {\n            obj.endLoadingFromJson();\n        }\n    };\n    JsonObject.prototype.toJsonObjectCore = function (obj, property, options) {\n        if (!obj || !obj.getType)\n            return obj;\n        if (typeof obj.getData === \"function\")\n            return obj.getData();\n        var result = {};\n        if (property != null && !property.className) {\n            result[JsonObject.typePropertyName] = property.getObjType(obj.getType());\n        }\n        var storeDefaults = options === true;\n        if (!options || options === true) {\n            options = {};\n        }\n        if (storeDefaults) {\n            options.storeDefaults = storeDefaults;\n        }\n        this.propertiesToJson(obj, Serializer.getProperties(obj.getType()), result, options);\n        this.propertiesToJson(obj, this.getDynamicProperties(obj), result, options);\n        return result;\n    };\n    JsonObject.prototype.getDynamicProperties = function (obj) {\n        return Serializer.getDynamicPropertiesByObj(obj);\n    };\n    JsonObject.prototype.addDynamicProperties = function (obj, jsonObj, props) {\n        if (!obj.getDynamicPropertyName && !obj.getDynamicProperties)\n            return props;\n        if (obj.getDynamicPropertyName) {\n            var dynamicPropName = obj.getDynamicPropertyName();\n            if (!dynamicPropName)\n                return props;\n            if (dynamicPropName && jsonObj[dynamicPropName]) {\n                obj[dynamicPropName] = jsonObj[dynamicPropName];\n            }\n        }\n        var dynamicProps = this.getDynamicProperties(obj);\n        return dynamicProps.length === 0 ? props : [].concat(props).concat(dynamicProps);\n    };\n    JsonObject.prototype.propertiesToJson = function (obj, properties, json, options) {\n        for (var i = 0; i < properties.length; i++) {\n            this.valueToJson(obj, json, properties[i], options);\n        }\n    };\n    JsonObject.prototype.valueToJson = function (obj, result, prop, options) {\n        if (!options)\n            options = {};\n        if (prop.isSerializable === false || (prop.isLightSerializable === false && this.lightSerializing))\n            return;\n        if (options.version && !prop.isAvailableInVersion(options.version))\n            return;\n        this.valueToJsonCore(obj, result, prop, options);\n    };\n    JsonObject.prototype.valueToJsonCore = function (obj, result, prop, options) {\n        var serProp = prop.getSerializedProperty(obj, options.version);\n        if (serProp && serProp !== prop) {\n            this.valueToJsonCore(obj, result, serProp, options);\n            return;\n        }\n        var value = prop.getSerializableValue(obj);\n        if (!options.storeDefaults && prop.isDefaultValueByObj(obj, value))\n            return;\n        if (this.isValueArray(value)) {\n            var arrValue = [];\n            for (var i = 0; i < value.length; i++) {\n                arrValue.push(this.toJsonObjectCore(value[i], prop, options));\n            }\n            value = arrValue.length > 0 ? arrValue : null;\n        }\n        else {\n            value = this.toJsonObjectCore(value, prop, options);\n        }\n        if (value === undefined || value === null)\n            return;\n        var name = prop.getSerializedName(options.version);\n        var hasValue = typeof obj[\"getPropertyValue\"] === \"function\" &&\n            obj[\"getPropertyValue\"](name, null) !== null;\n        if ((options.storeDefaults && hasValue) || !prop.isDefaultValueByObj(obj, value)) {\n            if (!Serializer.onSerializingProperty || !Serializer.onSerializingProperty(obj, prop, value, result)) {\n                result[name] = this.removePosOnValueToJson(prop, value);\n            }\n        }\n    };\n    JsonObject.prototype.valueToObj = function (value, obj, property, jsonObj, options) {\n        if (value === null || value === undefined)\n            return;\n        this.removePos(property, value);\n        if (property != null && property.hasToUseSetValue) {\n            property.setValue(obj, value, this);\n            return;\n        }\n        if (property.isArray && !Array.isArray(value) && !!value) {\n            value = [value];\n            var propName = !!jsonObj && property.alternativeName && !!jsonObj[property.alternativeName] ? property.alternativeName : property.name;\n            this.addNewError(new JsonRequiredArrayPropertyError(propName, obj.getType()), !!jsonObj ? jsonObj : value, obj);\n        }\n        if (this.isValueArray(value)) {\n            this.valueToArray(value, obj, property.name, property, options);\n            return;\n        }\n        var newObj = this.createNewObj(value, property);\n        if (newObj.newObj) {\n            this.toObjectCore(value, newObj.newObj, options);\n            value = newObj.newObj;\n        }\n        if (!newObj.error) {\n            if (property != null) {\n                property.setValue(obj, value, this);\n                if (!!options && options.validatePropertyValues) {\n                    if (!property.validateValue(value)) {\n                        this.addNewError(new JsonIncorrectPropertyValueError(property, value), jsonObj, obj);\n                    }\n                }\n            }\n            else {\n                obj[property.name] = value;\n            }\n        }\n    };\n    JsonObject.prototype.removePosOnValueToJson = function (property, value) {\n        if (!property.isCustom || !value)\n            return value;\n        this.removePosFromObj(value);\n        return value;\n    };\n    JsonObject.prototype.removePos = function (property, value) {\n        if (!property || !property.type || property.type.indexOf(\"value\") < 0)\n            return;\n        this.removePosFromObj(value);\n    };\n    JsonObject.prototype.removePosFromObj = function (obj) {\n        if (!obj)\n            return;\n        if (Array.isArray(obj)) {\n            for (var i = 0; i < obj.length; i++) {\n                this.removePosFromObj(obj[i]);\n            }\n        }\n        if (typeof obj !== \"object\")\n            return;\n        if (!!obj[JsonObject.positionPropertyName]) {\n            delete obj[JsonObject.positionPropertyName];\n        }\n        for (var key in obj) {\n            this.removePosFromObj(obj[key]);\n        }\n    };\n    JsonObject.prototype.isValueArray = function (value) {\n        return value && Array.isArray(value);\n    };\n    JsonObject.prototype.createNewObj = function (value, property) {\n        var result = { newObj: null, error: null };\n        var className = this.getClassNameForNewObj(value, property);\n        result.newObj = className\n            ? Serializer.createClass(className, value)\n            : null;\n        result.error = this.checkNewObjectOnErrors(result.newObj, value, property, className);\n        return result;\n    };\n    JsonObject.prototype.getClassNameForNewObj = function (value, property) {\n        var res = property != null && property.className ? property.className : undefined;\n        if (!res) {\n            res = value[JsonObject.typePropertyName];\n        }\n        if (!res)\n            return res;\n        res = res.toLowerCase();\n        var classNamePart = property.classNamePart;\n        if (classNamePart && res.indexOf(classNamePart) < 0) {\n            res += classNamePart;\n        }\n        return res;\n    };\n    JsonObject.prototype.checkNewObjectOnErrors = function (newObj, value, property, className) {\n        var error = null;\n        if (newObj) {\n            error = this.getRequiredError(newObj, value);\n        }\n        else {\n            if (property.baseClassName) {\n                if (!className) {\n                    error = new JsonMissingTypeError(property.name, property.baseClassName);\n                }\n                else {\n                    error = new JsonIncorrectTypeError(property.name, property.baseClassName);\n                }\n            }\n        }\n        if (error) {\n            this.addNewError(error, value, newObj);\n        }\n        return error;\n    };\n    JsonObject.prototype.getRequiredError = function (obj, jsonValue) {\n        if (!obj.getType || typeof obj.getData === \"function\")\n            return null;\n        var metaClass = Serializer.findClass(obj.getType());\n        if (!metaClass)\n            return null;\n        var props = metaClass.getRequiredProperties();\n        if (!Array.isArray(props))\n            return null;\n        for (var i = 0; i < props.length; i++) {\n            var prop = props[i];\n            if (!_helpers__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isValueEmpty(prop.defaultValue))\n                continue;\n            if (!jsonValue[prop.name]) {\n                return new JsonRequiredPropertyError(prop.name, obj.getType());\n            }\n        }\n        return null;\n    };\n    JsonObject.prototype.addNewError = function (error, jsonObj, element) {\n        error.jsonObj = jsonObj;\n        error.element = element;\n        this.errors.push(error);\n        if (!jsonObj)\n            return;\n        var posObj = jsonObj[JsonObject.positionPropertyName];\n        if (!posObj)\n            return;\n        error.at = posObj.start;\n        error.end = posObj.end;\n    };\n    JsonObject.prototype.valueToArray = function (value, obj, key, property, options) {\n        if (obj[key] && !this.isValueArray(obj[key]))\n            return;\n        if (obj[key] && value.length > 0)\n            obj[key].splice(0, obj[key].length);\n        var valueRes = obj[key] ? obj[key] : [];\n        this.addValuesIntoArray(value, valueRes, property, options);\n        if (!obj[key])\n            obj[key] = valueRes;\n    };\n    JsonObject.prototype.addValuesIntoArray = function (value, result, property, options) {\n        for (var i = 0; i < value.length; i++) {\n            var newValue = this.createNewObj(value[i], property);\n            if (newValue.newObj) {\n                if (!!value[i].name) {\n                    newValue.newObj.name = value[i].name;\n                }\n                if (!!value[i].valueName) {\n                    newValue.newObj.valueName = value[i].valueName.toString();\n                }\n                result.push(newValue.newObj);\n                this.toObjectCore(value[i], newValue.newObj, options);\n            }\n            else {\n                if (!newValue.error) {\n                    result.push(value[i]);\n                }\n            }\n        }\n    };\n    JsonObject.prototype.findProperty = function (properties, key) {\n        if (!properties)\n            return null;\n        for (var i = 0; i < properties.length; i++) {\n            var prop = properties[i];\n            if (prop.name == key || prop.alternativeName == key)\n                return prop;\n        }\n        return null;\n    };\n    JsonObject.typePropertyName = \"type\";\n    JsonObject.positionPropertyName = \"pos\";\n    JsonObject.metaDataValue = new JsonMetadata();\n    return JsonObject;\n}());\n\n/**\n * An alias for the metadata object. It contains object properties' runtime information and allows you to modify it.\n * @see JsonMetadata\n */\nvar Serializer = JsonObject.metaData;\n\n\n/***/ }),\n\n/***/ \"./src/list.ts\":\n/*!*********************!*\\\n  !*** ./src/list.ts ***!\n  \\*********************/\n/*! exports provided: defaultListCss, ListModel */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_438437__) {\n\n\"use strict\";\n__nested_webpack_require_438437__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_438437__.d(__nested_webpack_exports__, \"defaultListCss\", function() { return defaultListCss; });\n/* harmony export (binding) */ __nested_webpack_require_438437__.d(__nested_webpack_exports__, \"ListModel\", function() { return ListModel; });\n/* harmony import */ var _jsonobject__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_438437__(/*! ./jsonobject */ \"./src/jsonobject.ts\");\n/* harmony import */ var _actions_container__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_438437__(/*! ./actions/container */ \"./src/actions/container.ts\");\n/* harmony import */ var _actions_action__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_438437__(/*! ./actions/action */ \"./src/actions/action.ts\");\n/* harmony import */ var _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_438437__(/*! ./utils/cssClassBuilder */ \"./src/utils/cssClassBuilder.ts\");\n/* harmony import */ var _element_helper__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_438437__(/*! ./element-helper */ \"./src/element-helper.ts\");\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_438437__(/*! ./utils/utils */ \"./src/utils/utils.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_438437__(/*! ./settings */ \"./src/settings.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = ( false) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\nvar defaultListCss = {\n    root: \"sv-list__container\",\n    item: \"sv-list__item\",\n    searchClearButtonIcon: \"sv-list__filter-clear-button\",\n    loadingIndicator: \"sv-list__loading-indicator\",\n    itemSelected: \"sv-list__item--selected\",\n    itemWithIcon: \"sv-list__item--with-icon\",\n    itemDisabled: \"sv-list__item--disabled\",\n    itemFocused: \"sv-list__item--focused\",\n    itemTextWrap: \"sv-list__item-text--wrap\",\n    itemIcon: \"sv-list__item-icon\",\n    itemSeparator: \"sv-list__item-separator\",\n    itemBody: \"sv-list__item-body\",\n    itemsContainer: \"sv-list\",\n    itemsContainerFiltering: \"sv-list--filtering\",\n    filter: \"sv-list__filter\",\n    filterIcon: \"sv-list__filter-icon\",\n    filterInput: \"sv-list__input\",\n    emptyContainer: \"sv-list__empty-container\",\n    emptyText: \"sv-list__empty-text\"\n};\nvar ListModel = /** @class */ (function (_super) {\n    __extends(ListModel, _super);\n    function ListModel(items, onSelectionChanged, allowSelection, selectedItem, onFilterStringChangedCallback, elementId) {\n        var _this = _super.call(this) || this;\n        _this.onSelectionChanged = onSelectionChanged;\n        _this.allowSelection = allowSelection;\n        _this.onFilterStringChangedCallback = onFilterStringChangedCallback;\n        _this.elementId = elementId;\n        _this.onItemClick = function (itemValue) {\n            if (_this.isItemDisabled(itemValue)) {\n                return;\n            }\n            _this.isExpanded = false;\n            if (_this.allowSelection) {\n                _this.selectedItem = itemValue;\n            }\n            if (!!_this.onSelectionChanged) {\n                _this.onSelectionChanged(itemValue);\n            }\n        };\n        _this.isItemDisabled = function (itemValue) {\n            return itemValue.enabled !== undefined && !itemValue.enabled;\n        };\n        _this.isItemSelected = function (itemValue) {\n            return _this.areSameItems(_this.selectedItem, itemValue);\n        };\n        _this.isItemFocused = function (itemValue) {\n            return _this.areSameItems(_this.focusedItem, itemValue);\n        };\n        _this.getListClass = function () {\n            return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_3__[\"CssClassBuilder\"]()\n                .append(_this.cssClasses.itemsContainer)\n                .append(_this.cssClasses.itemsContainerFiltering, !!_this.filterString && _this.visibleActions.length !== _this.visibleItems.length)\n                .toString();\n        };\n        _this.getItemClass = function (itemValue) {\n            return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_3__[\"CssClassBuilder\"]()\n                .append(_this.cssClasses.item)\n                .append(_this.cssClasses.itemWithIcon, !!itemValue.iconName)\n                .append(_this.cssClasses.itemDisabled, _this.isItemDisabled(itemValue))\n                .append(_this.cssClasses.itemFocused, _this.isItemFocused(itemValue))\n                .append(_this.cssClasses.itemSelected, _this.isItemSelected(itemValue))\n                .append(_this.cssClasses.itemTextWrap, _this.textWrapEnabled)\n                .append(itemValue.css)\n                .toString();\n        };\n        _this.getItemIndent = function (itemValue) {\n            var level = itemValue.level || 0;\n            return (level + 1) * ListModel.INDENT + \"px\";\n        };\n        _this.setItems(items);\n        _this.selectedItem = selectedItem;\n        return _this;\n    }\n    ListModel.prototype.hasText = function (item, filterStringInLow) {\n        if (!filterStringInLow)\n            return true;\n        var text = item.title || \"\";\n        if (this.onTextSearchCallback)\n            return this.onTextSearchCallback(item, filterStringInLow);\n        var textInLow = text.toLocaleLowerCase();\n        textInLow = _settings__WEBPACK_IMPORTED_MODULE_6__[\"settings\"].comparator.normalizeTextCallback(textInLow, \"filter\");\n        return textInLow.indexOf(filterStringInLow.toLocaleLowerCase()) > -1;\n    };\n    ListModel.prototype.isItemVisible = function (item) {\n        return item.visible && (!this.shouldProcessFilter || this.hasText(item, this.filterString));\n    };\n    Object.defineProperty(ListModel.prototype, \"visibleItems\", {\n        get: function () {\n            var _this = this;\n            return this.visibleActions.filter(function (item) { return _this.isItemVisible(item); });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ListModel.prototype, \"shouldProcessFilter\", {\n        get: function () {\n            return !this.onFilterStringChangedCallback;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ListModel.prototype.onFilterStringChanged = function (text) {\n        var _this = this;\n        if (!!this.onFilterStringChangedCallback) {\n            this.onFilterStringChangedCallback(text);\n        }\n        this.isEmpty = this.renderedActions.filter(function (action) { return _this.isItemVisible(action); }).length === 0;\n    };\n    ListModel.prototype.scrollToItem = function (selector, ms) {\n        var _this = this;\n        if (ms === void 0) { ms = 0; }\n        setTimeout(function () {\n            if (!_this.listContainerHtmlElement)\n                return;\n            var item = _this.listContainerHtmlElement.querySelector(\".\" + selector);\n            if (item) {\n                setTimeout(function () {\n                    item.scrollIntoView({ behavior: \"smooth\", block: \"nearest\", inline: \"start\" });\n                }, ms);\n            }\n        }, ms);\n    };\n    ListModel.prototype.setOnFilterStringChangedCallback = function (callback) {\n        this.onFilterStringChangedCallback = callback;\n    };\n    ListModel.prototype.setOnTextSearchCallback = function (callback) {\n        this.onTextSearchCallback = callback;\n    };\n    ListModel.prototype.setItems = function (items, sortByVisibleIndex) {\n        var _this = this;\n        if (sortByVisibleIndex === void 0) { sortByVisibleIndex = true; }\n        _super.prototype.setItems.call(this, items, sortByVisibleIndex);\n        if (this.elementId) {\n            this.renderedActions.forEach(function (action) { action.elementId = _this.elementId + action.id; });\n        }\n        if (!this.isAllDataLoaded && !!this.actions.length) {\n            this.actions.push(this.loadingIndicator);\n        }\n    };\n    ListModel.prototype.onSet = function () {\n        this.showFilter = this.searchEnabled && (this.forceShowFilter || (this.actions || []).length > ListModel.MINELEMENTCOUNT);\n        _super.prototype.onSet.call(this);\n    };\n    ListModel.prototype.getDefaultCssClasses = function () {\n        return defaultListCss;\n    };\n    ListModel.prototype.areSameItems = function (item1, item2) {\n        if (!!this.areSameItemsCallback)\n            return this.areSameItemsCallback(item1, item2);\n        return !!item1 && !!item2 && item1.id == item2.id;\n    };\n    Object.defineProperty(ListModel.prototype, \"filterStringPlaceholder\", {\n        get: function () {\n            return this.getLocalizationString(\"filterStringPlaceholder\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ListModel.prototype, \"emptyMessage\", {\n        get: function () {\n            return this.isAllDataLoaded ? this.getLocalizationString(\"emptyMessage\") : this.loadingText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ListModel.prototype, \"scrollableContainer\", {\n        get: function () {\n            return this.listContainerHtmlElement.querySelector(\".\" + this.getDefaultCssClasses().itemsContainer);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ListModel.prototype, \"loadingText\", {\n        get: function () {\n            return this.getLocalizationString(\"loadingFile\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ListModel.prototype, \"loadingIndicator\", {\n        get: function () {\n            if (!this.loadingIndicatorValue) {\n                this.loadingIndicatorValue = (new _actions_action__WEBPACK_IMPORTED_MODULE_2__[\"Action\"]({\n                    id: \"loadingIndicator\",\n                    title: this.loadingText,\n                    action: function () { },\n                    css: this.cssClasses.loadingIndicator\n                }));\n            }\n            return this.loadingIndicatorValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ListModel.prototype.goToItems = function (event) {\n        if (event.key === \"ArrowDown\" || event.keyCode === 40) {\n            var currentElement = event.target.parentElement;\n            var listElement = currentElement.parentElement.querySelector(\"ul\");\n            var firstChild = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__[\"getFirstVisibleChild\"])(listElement);\n            if (!!listElement && !!firstChild) {\n                _element_helper__WEBPACK_IMPORTED_MODULE_4__[\"ElementHelper\"].focusElement(firstChild);\n                event.preventDefault();\n            }\n        }\n    };\n    ListModel.prototype.onMouseMove = function (event) {\n        this.resetFocusedItem();\n    };\n    ListModel.prototype.onKeyDown = function (event) {\n        var currentElement = event.target;\n        if (event.key === \"ArrowDown\" || event.keyCode === 40) {\n            _element_helper__WEBPACK_IMPORTED_MODULE_4__[\"ElementHelper\"].focusElement(_element_helper__WEBPACK_IMPORTED_MODULE_4__[\"ElementHelper\"].getNextElementPreorder(currentElement));\n            event.preventDefault();\n        }\n        else if (event.key === \"ArrowUp\" || event.keyCode === 38) {\n            _element_helper__WEBPACK_IMPORTED_MODULE_4__[\"ElementHelper\"].focusElement(_element_helper__WEBPACK_IMPORTED_MODULE_4__[\"ElementHelper\"].getNextElementPostorder(currentElement));\n            event.preventDefault();\n        }\n    };\n    ListModel.prototype.onPointerDown = function (event, item) { };\n    ListModel.prototype.refresh = function () {\n        this.filterString = \"\";\n        this.resetFocusedItem();\n    };\n    ListModel.prototype.onClickSearchClearButton = function (event) {\n        event.currentTarget.parentElement.querySelector(\"input\").focus();\n        this.refresh();\n    };\n    ListModel.prototype.resetFocusedItem = function () {\n        this.focusedItem = undefined;\n    };\n    ListModel.prototype.focusFirstVisibleItem = function () {\n        this.focusedItem = this.visibleItems[0];\n    };\n    ListModel.prototype.focusLastVisibleItem = function () {\n        this.focusedItem = this.visibleItems[this.visibleItems.length - 1];\n    };\n    ListModel.prototype.initFocusedItem = function () {\n        var _this = this;\n        this.focusedItem = this.visibleItems.filter(function (item) { return item.visible && _this.isItemSelected(item); })[0];\n        if (!this.focusedItem) {\n            this.focusFirstVisibleItem();\n        }\n    };\n    ListModel.prototype.focusNextVisibleItem = function () {\n        if (!this.focusedItem) {\n            this.initFocusedItem();\n        }\n        else {\n            var items = this.visibleItems;\n            var currentFocusedItemIndex = items.indexOf(this.focusedItem);\n            var nextItem = items[currentFocusedItemIndex + 1];\n            if (nextItem) {\n                this.focusedItem = nextItem;\n            }\n            else {\n                this.focusFirstVisibleItem();\n            }\n        }\n    };\n    ListModel.prototype.focusPrevVisibleItem = function () {\n        if (!this.focusedItem) {\n            this.initFocusedItem();\n        }\n        else {\n            var items = this.visibleItems;\n            var currentFocusedItemIndex = items.indexOf(this.focusedItem);\n            var prevItem = items[currentFocusedItemIndex - 1];\n            if (prevItem) {\n                this.focusedItem = prevItem;\n            }\n            else {\n                this.focusLastVisibleItem();\n            }\n        }\n    };\n    ListModel.prototype.selectFocusedItem = function () {\n        !!this.focusedItem && this.onItemClick(this.focusedItem);\n    };\n    ListModel.prototype.initListContainerHtmlElement = function (htmlElement) {\n        this.listContainerHtmlElement = htmlElement;\n    };\n    ListModel.prototype.onLastItemRended = function (item) {\n        if (this.isAllDataLoaded)\n            return;\n        if (item === this.actions[this.actions.length - 1] && !!this.listContainerHtmlElement) {\n            this.hasVerticalScroller = _element_helper__WEBPACK_IMPORTED_MODULE_4__[\"ElementHelper\"].hasVerticalScroller(this.scrollableContainer);\n        }\n    };\n    ListModel.prototype.scrollToFocusedItem = function () {\n        this.scrollToItem(this.getDefaultCssClasses().itemFocused);\n    };\n    ListModel.prototype.scrollToSelectedItem = function () {\n        this.scrollToItem(this.getDefaultCssClasses().itemSelected, 110);\n    };\n    ListModel.prototype.addScrollEventListener = function (handler) {\n        if (!!handler) {\n            this.scrollHandler = handler;\n        }\n        if (!!this.scrollHandler) {\n            this.scrollableContainer.addEventListener(\"scroll\", this.scrollHandler);\n        }\n    };\n    ListModel.prototype.removeScrollEventListener = function () {\n        if (!!this.scrollHandler) {\n            this.scrollableContainer.removeEventListener(\"scroll\", this.scrollHandler);\n        }\n    };\n    ListModel.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (!!this.loadingIndicatorValue) {\n            this.loadingIndicatorValue.dispose();\n        }\n        this.listContainerHtmlElement = undefined;\n    };\n    ListModel.INDENT = 16;\n    ListModel.MINELEMENTCOUNT = 10;\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({\n            defaultValue: true,\n            onSet: function (newValue, target) {\n                target.onSet();\n            }\n        })\n    ], ListModel.prototype, \"searchEnabled\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], ListModel.prototype, \"showFilter\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], ListModel.prototype, \"forceShowFilter\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], ListModel.prototype, \"isExpanded\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({})\n    ], ListModel.prototype, \"selectedItem\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])()\n    ], ListModel.prototype, \"focusedItem\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({\n            onSet: function (_, target) {\n                target.onFilterStringChanged(target.filterString);\n            }\n        })\n    ], ListModel.prototype, \"filterString\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], ListModel.prototype, \"hasVerticalScroller\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: true })\n    ], ListModel.prototype, \"isAllDataLoaded\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], ListModel.prototype, \"showSearchClearButton\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: true })\n    ], ListModel.prototype, \"renderElements\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], ListModel.prototype, \"textWrapEnabled\", void 0);\n    return ListModel;\n}(_actions_container__WEBPACK_IMPORTED_MODULE_1__[\"ActionContainer\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/localizablestring.ts\":\n/*!**********************************!*\\\n  !*** ./src/localizablestring.ts ***!\n  \\**********************************/\n/*! exports provided: LocalizableString, LocalizableStrings */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_457429__) {\n\n\"use strict\";\n__nested_webpack_require_457429__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_457429__.d(__nested_webpack_exports__, \"LocalizableString\", function() { return LocalizableString; });\n/* harmony export (binding) */ __nested_webpack_require_457429__.d(__nested_webpack_exports__, \"LocalizableStrings\", function() { return LocalizableStrings; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_457429__(/*! ./helpers */ \"./src/helpers.ts\");\n/* harmony import */ var _surveyStrings__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_457429__(/*! ./surveyStrings */ \"./src/surveyStrings.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_457429__(/*! ./settings */ \"./src/settings.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_457429__(/*! ./base */ \"./src/base.ts\");\n/* harmony import */ var _jsonobject__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_457429__(/*! ./jsonobject */ \"./src/jsonobject.ts\");\n/* harmony import */ var _survey_element__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_457429__(/*! ./survey-element */ \"./src/survey-element.ts\");\n\n\n\n\n\n\n/**\n * The class represents the string that supports multi-languages and markdown.\n * It uses in all objects where support for multi-languages and markdown is required.\n */\nvar LocalizableString = /** @class */ (function () {\n    function LocalizableString(owner, useMarkdown, name) {\n        if (useMarkdown === void 0) { useMarkdown = false; }\n        var _a;\n        this.owner = owner;\n        this.useMarkdown = useMarkdown;\n        this.name = name;\n        this.values = {};\n        this.htmlValues = {};\n        this._allowLineBreaks = false;\n        this.onStringChanged = new _base__WEBPACK_IMPORTED_MODULE_3__[\"EventBase\"]();\n        if (owner instanceof _survey_element__WEBPACK_IMPORTED_MODULE_5__[\"SurveyElementCore\"]) {\n            this._allowLineBreaks = ((_a = _jsonobject__WEBPACK_IMPORTED_MODULE_4__[\"Serializer\"].findProperty(owner.getType(), name)) === null || _a === void 0 ? void 0 : _a.type) == \"text\";\n        }\n        this.onCreating();\n    }\n    Object.defineProperty(LocalizableString, \"defaultLocale\", {\n        get: function () {\n            return _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName;\n        },\n        set: function (val) {\n            _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"localizationName\", {\n        get: function () {\n            return this._localizationName;\n        },\n        set: function (val) {\n            if (this._localizationName != val) {\n                this._localizationName = val;\n                this.strChanged();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"allowLineBreaks\", {\n        get: function () {\n            return this._allowLineBreaks;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.prototype.getIsMultiple = function () { return false; };\n    Object.defineProperty(LocalizableString.prototype, \"locale\", {\n        get: function () {\n            if (this.owner && this.owner.getLocale) {\n                var res = this.owner.getLocale();\n                if (!!res || !this.sharedData)\n                    return res;\n            }\n            if (!!this.sharedData)\n                return this.sharedData.locale;\n            return \"\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.prototype.strChanged = function () {\n        this.searchableText = undefined;\n        if (this.renderedText === undefined)\n            return;\n        this.calculatedTextValue = this.calcText();\n        if (this.renderedText !== this.calculatedTextValue) {\n            this.renderedText = undefined;\n            this.calculatedTextValue = undefined;\n        }\n        this.htmlValues = {};\n        this.onChanged();\n        this.onStringChanged.fire(this, {});\n    };\n    Object.defineProperty(LocalizableString.prototype, \"text\", {\n        get: function () {\n            return this.pureText;\n        },\n        set: function (value) {\n            this.setLocaleText(this.locale, value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"calculatedText\", {\n        get: function () {\n            this.renderedText =\n                this.calculatedTextValue !== undefined\n                    ? this.calculatedTextValue\n                    : this.calcText();\n            this.calculatedTextValue = undefined;\n            return this.renderedText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.prototype.calcText = function () {\n        var res = this.pureText;\n        if (res &&\n            this.owner &&\n            this.owner.getProcessedText &&\n            res.indexOf(\"{\") > -1) {\n            res = this.owner.getProcessedText(res);\n        }\n        if (this.onGetTextCallback)\n            res = this.onGetTextCallback(res);\n        return res;\n    };\n    Object.defineProperty(LocalizableString.prototype, \"pureText\", {\n        get: function () {\n            var loc = this.locale;\n            if (!loc)\n                loc = this.defaultLoc;\n            var res = this.getValue(loc);\n            if (this.isValueEmpty(res) && loc === this.defaultLoc) {\n                res = this.getValue(_surveyStrings__WEBPACK_IMPORTED_MODULE_1__[\"surveyLocalization\"].defaultLocale);\n            }\n            if (this.isValueEmpty(res)) {\n                var dialect = this.getRootDialect(loc);\n                if (!!dialect) {\n                    res = this.getValue(dialect);\n                }\n            }\n            if (this.isValueEmpty(res) && loc !== this.defaultLoc) {\n                res = this.getValue(this.defaultLoc);\n            }\n            if (this.isValueEmpty(res) && !!this.getLocalizationName()) {\n                res = this.getLocalizationStr();\n                if (!!this.onGetLocalizationTextCallback) {\n                    res = this.onGetLocalizationTextCallback(res);\n                }\n            }\n            if (!res)\n                res = this.defaultValue || \"\";\n            return res;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.prototype.getRootDialect = function (loc) {\n        if (!loc)\n            return loc;\n        var index = loc.indexOf(\"-\");\n        return index > -1 ? loc.substring(0, index) : \"\";\n    };\n    LocalizableString.prototype.getLocalizationName = function () {\n        return !!this.sharedData ? this.sharedData.localizationName : this.localizationName;\n    };\n    LocalizableString.prototype.getLocalizationStr = function () {\n        var name = this.getLocalizationName();\n        return !!name ? _surveyStrings__WEBPACK_IMPORTED_MODULE_1__[\"surveyLocalization\"].getString(name, this.locale) : \"\";\n    };\n    Object.defineProperty(LocalizableString.prototype, \"hasHtml\", {\n        get: function () {\n            return this.hasHtmlValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"html\", {\n        get: function () {\n            if (!this.hasHtml)\n                return \"\";\n            return this.getHtmlValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"isEmpty\", {\n        get: function () {\n            return this.getValuesKeys().length == 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"textOrHtml\", {\n        get: function () {\n            return this.hasHtml ? this.getHtmlValue() : this.calculatedText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"renderedHtml\", {\n        get: function () {\n            return this.textOrHtml;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.prototype.getLocaleText = function (loc) {\n        var res = this.getLocaleTextCore(loc);\n        return res ? res : \"\";\n    };\n    LocalizableString.prototype.getLocaleTextCore = function (loc) {\n        if (!loc)\n            loc = this.defaultLoc;\n        return this.getValue(loc);\n    };\n    LocalizableString.prototype.isLocaleTextEqualsWithDefault = function (loc, val) {\n        var res = this.getLocaleTextCore(loc);\n        if (res === val)\n            return true;\n        return this.isValueEmpty(res) && this.isValueEmpty(val);\n    };\n    LocalizableString.prototype.clear = function () {\n        this.setJson(undefined);\n    };\n    LocalizableString.prototype.clearLocale = function (loc) {\n        this.setLocaleText(loc, undefined);\n    };\n    LocalizableString.prototype.setLocaleText = function (loc, value) {\n        loc = this.getValueLoc(loc);\n        if (!this.storeDefaultText && this.isLocaleTextEqualsWithDefault(loc, value)) {\n            if (!this.isValueEmpty(value) || !!loc && loc !== this.defaultLoc)\n                return;\n            var dl = _surveyStrings__WEBPACK_IMPORTED_MODULE_1__[\"surveyLocalization\"].defaultLocale;\n            var oldValue_1 = this.getValue(dl);\n            if (!!dl && !this.isValueEmpty(oldValue_1)) {\n                this.setValue(dl, value);\n                this.fireStrChanged(dl, oldValue_1);\n            }\n            return;\n        }\n        if (!_settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.storeDuplicatedTranslations &&\n            !this.isValueEmpty(value) && loc && loc != this.defaultLoc &&\n            !this.getValue(loc) &&\n            value == this.getLocaleText(this.defaultLoc))\n            return;\n        var curLoc = this.curLocale;\n        if (!loc)\n            loc = this.defaultLoc;\n        var oldValue = this.onStrChanged && loc === curLoc ? this.pureText : undefined;\n        delete this.htmlValues[loc];\n        if (this.isValueEmpty(value)) {\n            this.deleteValue(loc);\n        }\n        else {\n            if (typeof value === \"string\") {\n                if (this.canRemoveLocValue(loc, value)) {\n                    this.setLocaleText(loc, null);\n                }\n                else {\n                    this.setValue(loc, value);\n                    if (loc == this.defaultLoc) {\n                        this.deleteValuesEqualsToDefault(value);\n                    }\n                }\n            }\n        }\n        this.fireStrChanged(loc, oldValue);\n    };\n    LocalizableString.prototype.isValueEmpty = function (val) {\n        if (val === undefined || val === null)\n            return true;\n        if (this.localizationName)\n            return false;\n        return val === \"\";\n    };\n    Object.defineProperty(LocalizableString.prototype, \"curLocale\", {\n        get: function () {\n            return !!this.locale ? this.locale : this.defaultLoc;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.prototype.canRemoveLocValue = function (loc, val) {\n        if (_settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.storeDuplicatedTranslations)\n            return false;\n        if (loc === this.defaultLoc)\n            return false;\n        var dialect = this.getRootDialect(loc);\n        if (!!dialect) {\n            var dialectVal = this.getLocaleText(dialect);\n            if (!!dialectVal)\n                return dialectVal == val;\n            return this.canRemoveLocValue(dialect, val);\n        }\n        else {\n            return val == this.getLocaleText(this.defaultLoc);\n        }\n    };\n    LocalizableString.prototype.fireStrChanged = function (loc, oldValue) {\n        this.strChanged();\n        if (!this.onStrChanged)\n            return;\n        var value = this.pureText;\n        if (loc !== this.curLocale || oldValue !== value) {\n            this.onStrChanged(oldValue, value);\n        }\n    };\n    LocalizableString.prototype.hasNonDefaultText = function () {\n        var keys = this.getValuesKeys();\n        if (keys.length == 0)\n            return false;\n        return keys.length > 1 || keys[0] != this.defaultLoc;\n    };\n    LocalizableString.prototype.getLocales = function () {\n        var keys = this.getValuesKeys();\n        if (keys.length == 0)\n            return [];\n        return keys;\n    };\n    LocalizableString.prototype.getJson = function () {\n        if (!!this.sharedData)\n            return this.sharedData.getJson();\n        var keys = this.getValuesKeys();\n        if (keys.length == 0)\n            return null;\n        if (keys.length == 1 &&\n            keys[0] == _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName &&\n            !_settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].serialization.localizableStringSerializeAsObject)\n            return this.values[keys[0]];\n        var res = {};\n        for (var key in this.values) {\n            res[key] = this.values[key];\n        }\n        return res;\n    };\n    LocalizableString.prototype.setJson = function (value) {\n        if (!!this.sharedData) {\n            this.sharedData.setJson(value);\n            return;\n        }\n        this.values = {};\n        this.htmlValues = {};\n        if (value === null || value === undefined)\n            return;\n        if (typeof value === \"string\") {\n            this.setLocaleText(null, value);\n        }\n        else {\n            for (var key in value) {\n                this.setLocaleText(key, value[key]);\n            }\n        }\n        this.strChanged();\n    };\n    Object.defineProperty(LocalizableString.prototype, \"renderAs\", {\n        get: function () {\n            if (!this.owner || typeof this.owner.getRenderer !== \"function\") {\n                return LocalizableString.defaultRenderer;\n            }\n            return this.owner.getRenderer(this.name) || LocalizableString.defaultRenderer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableString.prototype, \"renderAsData\", {\n        get: function () {\n            if (!this.owner || typeof this.owner.getRendererContext !== \"function\") {\n                return this;\n            }\n            return this.owner.getRendererContext(this) || this;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.prototype.equals = function (obj) {\n        if (!!this.sharedData)\n            return this.sharedData.equals(obj);\n        if (!obj || !obj.values)\n            return false;\n        return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].isTwoValueEquals(this.values, obj.values, false, true, false);\n    };\n    LocalizableString.prototype.setFindText = function (text) {\n        if (this.searchText == text)\n            return;\n        this.searchText = text;\n        if (!this.searchableText) {\n            var textOrHtml = this.textOrHtml;\n            this.searchableText = !!textOrHtml ? textOrHtml.toLowerCase() : \"\";\n        }\n        var str = this.searchableText;\n        var index = !!str && !!text ? str.indexOf(text) : undefined;\n        if (index < 0)\n            index = undefined;\n        if (index != undefined || this.searchIndex != index) {\n            this.searchIndex = index;\n            if (!!this.onSearchChanged) {\n                this.onSearchChanged();\n            }\n        }\n        return this.searchIndex != undefined;\n    };\n    LocalizableString.prototype.onChanged = function () { };\n    LocalizableString.prototype.onCreating = function () { };\n    LocalizableString.prototype.hasHtmlValue = function () {\n        if (!this.owner || !this.useMarkdown)\n            return false;\n        var loc = this.locale;\n        if (!loc)\n            loc = this.defaultLoc;\n        if (this.htmlValues[loc] !== undefined)\n            return !!this.htmlValues[loc];\n        var renderedText = this.calculatedText;\n        if (!renderedText) {\n            this.setHtmlValue(loc, \"\");\n            return false;\n        }\n        if (!!this.getLocalizationName() && renderedText === this.getLocalizationStr()) {\n            this.setHtmlValue(loc, \"\");\n            return false;\n        }\n        var res = this.owner.getMarkdownHtml(renderedText, this.name);\n        this.setHtmlValue(loc, res);\n        return !!res;\n    };\n    LocalizableString.prototype.setHtmlValue = function (loc, val) {\n        this.htmlValues[loc] = val;\n    };\n    LocalizableString.prototype.getHtmlValue = function () {\n        var loc = this.locale;\n        if (!loc)\n            loc = this.defaultLoc;\n        return this.htmlValues[loc];\n    };\n    LocalizableString.prototype.deleteValuesEqualsToDefault = function (defaultValue) {\n        if (_settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.storeDuplicatedTranslations)\n            return;\n        var keys = this.getValuesKeys();\n        for (var i = 0; i < keys.length; i++) {\n            if (keys[i] == this.defaultLoc)\n                continue;\n            if (this.getValue(keys[i]) == defaultValue) {\n                this.deleteValue(keys[i]);\n            }\n        }\n    };\n    LocalizableString.prototype.getValue = function (loc) {\n        if (!!this.sharedData)\n            return this.sharedData.getValue(loc);\n        return this.values[this.getValueLoc(loc)];\n    };\n    LocalizableString.prototype.setValue = function (loc, value) {\n        if (!!this.sharedData)\n            this.sharedData.setValue(loc, value);\n        else\n            this.values[this.getValueLoc(loc)] = value;\n    };\n    LocalizableString.prototype.deleteValue = function (loc) {\n        if (!!this.sharedData)\n            this.sharedData.deleteValue(loc);\n        else\n            delete this.values[this.getValueLoc(loc)];\n    };\n    LocalizableString.prototype.getValueLoc = function (loc) {\n        if (this.disableLocalization)\n            return _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName;\n        return loc;\n    };\n    LocalizableString.prototype.getValuesKeys = function () {\n        if (!!this.sharedData)\n            return this.sharedData.getValuesKeys();\n        return Object.keys(this.values);\n    };\n    Object.defineProperty(LocalizableString.prototype, \"defaultLoc\", {\n        get: function () {\n            return _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableString.SerializeAsObject = false;\n    LocalizableString.defaultRenderer = \"sv-string-viewer\";\n    LocalizableString.editableRenderer = \"sv-string-editor\";\n    return LocalizableString;\n}());\n\n/**\n * The class represents the list of strings that supports multi-languages.\n */\nvar LocalizableStrings = /** @class */ (function () {\n    function LocalizableStrings(owner) {\n        this.owner = owner;\n        this.values = {};\n    }\n    LocalizableStrings.prototype.getIsMultiple = function () { return true; };\n    Object.defineProperty(LocalizableStrings.prototype, \"locale\", {\n        get: function () {\n            return this.owner && this.owner.getLocale ? this.owner.getLocale() : \"\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableStrings.prototype, \"value\", {\n        get: function () {\n            return this.getValue(\"\");\n        },\n        set: function (val) {\n            this.setValue(\"\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizableStrings.prototype, \"text\", {\n        get: function () {\n            return Array.isArray(this.value) ? this.value.join(\"\\n\") : \"\";\n        },\n        set: function (val) {\n            this.value = !!val ? val.split(\"\\n\") : [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableStrings.prototype.getLocaleText = function (loc) {\n        var res = this.getValueCore(loc, !loc || loc === this.locale);\n        if (!res || !Array.isArray(res) || res.length == 0)\n            return \"\";\n        return res.join(\"\\n\");\n    };\n    LocalizableStrings.prototype.setLocaleText = function (loc, newValue) {\n        var val = !!newValue ? newValue.split(\"\\n\") : null;\n        this.setValue(loc, val);\n    };\n    LocalizableStrings.prototype.getValue = function (loc) {\n        return this.getValueCore(loc);\n    };\n    LocalizableStrings.prototype.getValueCore = function (loc, useDefault) {\n        if (useDefault === void 0) { useDefault = true; }\n        loc = this.getLocale(loc);\n        if (this.values[loc])\n            return this.values[loc];\n        if (useDefault) {\n            var defLoc = _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName;\n            if (loc !== defLoc && this.values[defLoc])\n                return this.values[defLoc];\n        }\n        return [];\n    };\n    LocalizableStrings.prototype.setValue = function (loc, val) {\n        loc = this.getLocale(loc);\n        var oldValue = _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].createCopy(this.values);\n        if (!val || val.length == 0) {\n            delete this.values[loc];\n        }\n        else {\n            this.values[loc] = val;\n        }\n        if (!!this.onValueChanged) {\n            this.onValueChanged(oldValue, this.values);\n        }\n    };\n    LocalizableStrings.prototype.hasValue = function (loc) {\n        if (loc === void 0) { loc = \"\"; }\n        return !this.isEmpty && this.getValue(loc).length > 0;\n    };\n    Object.defineProperty(LocalizableStrings.prototype, \"isEmpty\", {\n        get: function () {\n            return this.getValuesKeys().length == 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizableStrings.prototype.getLocale = function (loc) {\n        if (!!loc)\n            return loc;\n        loc = this.locale;\n        return !!loc ? loc : _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName;\n    };\n    LocalizableStrings.prototype.getLocales = function () {\n        var keys = this.getValuesKeys();\n        if (keys.length == 0)\n            return [];\n        return keys;\n    };\n    LocalizableStrings.prototype.getJson = function () {\n        var keys = this.getValuesKeys();\n        if (keys.length == 0)\n            return null;\n        if (keys.length == 1 &&\n            keys[0] == _settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].localization.defaultLocaleName &&\n            !_settings__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].serialization.localizableStringSerializeAsObject)\n            return this.values[keys[0]];\n        return _helpers__WEBPACK_IMPORTED_MODULE_0__[\"Helpers\"].createCopy(this.values);\n    };\n    LocalizableStrings.prototype.setJson = function (value) {\n        this.values = {};\n        if (!value)\n            return;\n        if (Array.isArray(value)) {\n            this.setValue(null, value);\n        }\n        else {\n            for (var key in value) {\n                this.setValue(key, value[key]);\n            }\n        }\n    };\n    LocalizableStrings.prototype.getValuesKeys = function () {\n        return Object.keys(this.values);\n    };\n    return LocalizableStrings;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/localization/english.ts\":\n/*!*************************************!*\\\n  !*** ./src/localization/english.ts ***!\n  \\*************************************/\n/*! exports provided: englishStrings */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_481198__) {\n\n\"use strict\";\n__nested_webpack_require_481198__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_481198__.d(__nested_webpack_exports__, \"englishStrings\", function() { return englishStrings; });\n// Uncomment the line below if you create a custom dictionary\n// import { surveyLocalization } from \"survey-core\";\nvar englishStrings = {\n    pagePrevText: \"Previous\",\n    pageNextText: \"Next\",\n    completeText: \"Complete\",\n    previewText: \"Preview\",\n    editText: \"Edit\",\n    startSurveyText: \"Start\",\n    otherItemText: \"Other (describe)\",\n    noneItemText: \"None\",\n    refuseItemText: \"Refuse to answer\",\n    dontKnowItemText: \"Don't know\",\n    selectAllItemText: \"Select All\",\n    progressText: \"Page {0} of {1}\",\n    indexText: \"{0} of {1}\",\n    panelDynamicProgressText: \"{0} of {1}\",\n    panelDynamicTabTextFormat: \"Panel {panelIndex}\",\n    questionsProgressText: \"Answered {0}/{1} questions\",\n    emptySurvey: \"The survey doesn't contain any visible elements.\",\n    completingSurvey: \"Thank you for completing the survey\",\n    completingSurveyBefore: \"Our records show that you have already completed this survey.\",\n    loadingSurvey: \"Loading Survey...\",\n    placeholder: \"Select...\",\n    ratingOptionsCaption: \"Select...\",\n    value: \"value\",\n    requiredError: \"Response required.\",\n    requiredErrorInPanel: \"Response required: answer at least one question.\",\n    requiredInAllRowsError: \"Response required: answer questions in all rows.\",\n    eachRowUniqueError: \"Each row must have a unique value.\",\n    numericError: \"The value should be numeric.\",\n    minError: \"The value should not be less than {0}\",\n    maxError: \"The value should not be greater than {0}\",\n    textMinLength: \"Please enter at least {0} character(s).\",\n    textMaxLength: \"Please enter no more than {0} character(s).\",\n    textMinMaxLength: \"Please enter at least {0} and no more than {1} characters.\",\n    minRowCountError: \"Please fill in at least {0} row(s).\",\n    minSelectError: \"Please select at least {0} option(s).\",\n    maxSelectError: \"Please select no more than {0} option(s).\",\n    numericMinMax: \"The '{0}' should be at least {1} and at most {2}\",\n    numericMin: \"The '{0}' should be at least {1}\",\n    numericMax: \"The '{0}' should be at most {1}\",\n    invalidEmail: \"Please enter a valid e-mail address.\",\n    invalidExpression: \"The expression: {0} should return 'true'.\",\n    urlRequestError: \"The request returned error '{0}'. {1}\",\n    urlGetChoicesError: \"The request returned empty data or the 'path' property is incorrect\",\n    exceedMaxSize: \"The file size should not exceed {0}.\",\n    noUploadFilesHandler: \"Files cannot be uploaded. Please add a handler for the 'onUploadFiles' event.\",\n    otherRequiredError: \"Response required: enter another value.\",\n    uploadingFile: \"Your file is uploading. Please wait several seconds and try again.\",\n    loadingFile: \"Loading...\",\n    chooseFile: \"Choose file(s)...\",\n    noFileChosen: \"No file chosen\",\n    filePlaceholder: \"Drag and drop a file here or click the button below to select a file to upload.\",\n    confirmDelete: \"Are you sure you want to delete this record?\",\n    keyDuplicationError: \"This value should be unique.\",\n    addColumn: \"Add Column\",\n    addRow: \"Add Row\",\n    removeRow: \"Remove\",\n    emptyRowsText: \"There are no rows.\",\n    addPanel: \"Add new\",\n    removePanel: \"Remove\",\n    showDetails: \"Show Details\",\n    hideDetails: \"Hide Details\",\n    choices_Item: \"item\",\n    matrix_column: \"Column\",\n    matrix_row: \"Row\",\n    multipletext_itemname: \"text\",\n    savingData: \"The results are being saved on the server...\",\n    savingDataError: \"An error occurred and we could not save the results.\",\n    savingDataSuccess: \"The results were saved successfully!\",\n    saveAgainButton: \"Try again\",\n    timerMin: \"min\",\n    timerSec: \"sec\",\n    timerSpentAll: \"You have spent {0} on this page and {1} in total.\",\n    timerSpentPage: \"You have spent {0} on this page.\",\n    timerSpentSurvey: \"You have spent {0} in total.\",\n    timerLimitAll: \"You have spent {0} of {1} on this page and {2} of {3} in total.\",\n    timerLimitPage: \"You have spent {0} of {1} on this page.\",\n    timerLimitSurvey: \"You have spent {0} of {1} in total.\",\n    clearCaption: \"Clear\",\n    signaturePlaceHolder: \"Sign here\",\n    chooseFileCaption: \"Select File\",\n    takePhotoCaption: \"Take Photo\",\n    photoPlaceholder: \"Click the button below to take a photo using the camera.\",\n    fileOrPhotoPlaceholder: \"Drag and drop or select a file to upload or take a photo using the camera.\",\n    replaceFileCaption: \"Replace file\",\n    removeFileCaption: \"Remove this file\",\n    booleanCheckedLabel: \"Yes\",\n    booleanUncheckedLabel: \"No\",\n    confirmRemoveFile: \"Are you sure that you want to remove this file: {0}?\",\n    confirmRemoveAllFiles: \"Are you sure that you want to remove all files?\",\n    questionTitlePatternText: \"Question Title\",\n    modalCancelButtonText: \"Cancel\",\n    modalApplyButtonText: \"Apply\",\n    filterStringPlaceholder: \"Type to search...\",\n    emptyMessage: \"No data to display\",\n    noEntriesText: \"No entries yet.\\nClick the button below to add a new entry.\",\n    noEntriesReadonlyText: \"No entries.\",\n    more: \"More\",\n    tagboxDoneButtonCaption: \"OK\",\n    selectToRankEmptyRankedAreaText: \"All choices are selected for ranking\",\n    selectToRankEmptyUnrankedAreaText: \"Drag choices here to rank them\",\n    ok: \"OK\",\n    cancel: \"Cancel\",\n};\n// Uncomment the lines below if you create a custom dictionary.\n// Replace \"en\" with a custom locale code (for example, \"fr\" or \"de\"),\n// Replace `englishStrings` with the name of the variable that contains the custom dictionary.\n// surveyLocalization.locales[\"en\"] = englishStrings;\n// surveyLocalization.localeNames[\"en\"] = \"English\";\n\n\n/***/ }),\n\n/***/ \"./src/popup.ts\":\n/*!**********************!*\\\n  !*** ./src/popup.ts ***!\n  \\**********************/\n/*! exports provided: PopupModel, createDialogOptions */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_487189__) {\n\n\"use strict\";\n__nested_webpack_require_487189__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_487189__.d(__nested_webpack_exports__, \"PopupModel\", function() { return PopupModel; });\n/* harmony export (binding) */ __nested_webpack_require_487189__.d(__nested_webpack_exports__, \"createDialogOptions\", function() { return createDialogOptions; });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_487189__(/*! ./base */ \"./src/base.ts\");\n/* harmony import */ var _jsonobject__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_487189__(/*! ./jsonobject */ \"./src/jsonobject.ts\");\n/* harmony import */ var _console_warnings__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_487189__(/*! ./console-warnings */ \"./src/console-warnings.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = ( false) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\nvar PopupModel = /** @class */ (function (_super) {\n    __extends(PopupModel, _super);\n    function PopupModel(contentComponentName, contentComponentData, verticalPosition, horizontalPosition, showPointer, isModal, onCancel, onApply, onHide, onShow, cssClass, title, onDispose) {\n        if (verticalPosition === void 0) { verticalPosition = \"bottom\"; }\n        if (horizontalPosition === void 0) { horizontalPosition = \"left\"; }\n        if (showPointer === void 0) { showPointer = true; }\n        if (isModal === void 0) { isModal = false; }\n        if (onCancel === void 0) { onCancel = function () { }; }\n        if (onApply === void 0) { onApply = function () { return true; }; }\n        if (onHide === void 0) { onHide = function () { }; }\n        if (onShow === void 0) { onShow = function () { }; }\n        if (cssClass === void 0) { cssClass = \"\"; }\n        if (title === void 0) { title = \"\"; }\n        if (onDispose === void 0) { onDispose = function () { }; }\n        var _this = _super.call(this) || this;\n        _this.onDispose = onDispose;\n        _this.focusFirstInputSelector = \"\";\n        _this.onVisibilityChanged = _this.addEvent();\n        _this.onFooterActionsCreated = _this.addEvent();\n        _this.onRecalculatePosition = _this.addEvent();\n        _this.contentComponentName = contentComponentName;\n        _this.contentComponentData = contentComponentData;\n        _this.verticalPosition = verticalPosition;\n        _this.horizontalPosition = horizontalPosition;\n        _this.showPointer = showPointer;\n        _this.isModal = isModal;\n        _this.onCancel = onCancel;\n        _this.onApply = onApply;\n        _this.onHide = onHide;\n        _this.onShow = onShow;\n        _this.cssClass = cssClass;\n        _this.title = title;\n        return _this;\n    }\n    PopupModel.prototype.refreshInnerModel = function () {\n        var innerModel = this.contentComponentData[\"model\"];\n        innerModel && innerModel.refresh && innerModel.refresh();\n    };\n    Object.defineProperty(PopupModel.prototype, \"isVisible\", {\n        get: function () {\n            return this.getPropertyValue(\"isVisible\", false);\n        },\n        set: function (value) {\n            if (this.isVisible === value) {\n                return;\n            }\n            this.setPropertyValue(\"isVisible\", value);\n            this.onVisibilityChanged.fire(this, { model: this, isVisible: value });\n            if (this.isVisible) {\n                this.onShow();\n            }\n            else {\n                this.refreshInnerModel();\n                this.onHide();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PopupModel.prototype.toggleVisibility = function () {\n        this.isVisible = !this.isVisible;\n    };\n    PopupModel.prototype.recalculatePosition = function (isResetHeight) {\n        this.onRecalculatePosition.fire(this, { isResetHeight: isResetHeight });\n    };\n    PopupModel.prototype.updateFooterActions = function (footerActions) {\n        var options = { actions: footerActions };\n        this.onFooterActionsCreated.fire(this, options);\n        return options.actions;\n    };\n    PopupModel.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.onDispose();\n    };\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])()\n    ], PopupModel.prototype, \"contentComponentName\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])()\n    ], PopupModel.prototype, \"contentComponentData\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: \"bottom\" })\n    ], PopupModel.prototype, \"verticalPosition\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: \"left\" })\n    ], PopupModel.prototype, \"horizontalPosition\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: false })\n    ], PopupModel.prototype, \"showPointer\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: false })\n    ], PopupModel.prototype, \"isModal\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: true })\n    ], PopupModel.prototype, \"isFocusedContent\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: true })\n    ], PopupModel.prototype, \"isFocusedContainer\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: function () { } })\n    ], PopupModel.prototype, \"onCancel\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: function () { return true; } })\n    ], PopupModel.prototype, \"onApply\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: function () { } })\n    ], PopupModel.prototype, \"onHide\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: function () { } })\n    ], PopupModel.prototype, \"onShow\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: \"\" })\n    ], PopupModel.prototype, \"cssClass\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: \"\" })\n    ], PopupModel.prototype, \"title\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: \"auto\" })\n    ], PopupModel.prototype, \"overlayDisplayMode\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: \"popup\" })\n    ], PopupModel.prototype, \"displayMode\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_1__[\"property\"])({ defaultValue: \"flex\" })\n    ], PopupModel.prototype, \"positionMode\", void 0);\n    return PopupModel;\n}(_base__WEBPACK_IMPORTED_MODULE_0__[\"Base\"]));\n\nfunction createDialogOptions(componentName, data, onApply, onCancel, onHide, onShow, cssClass, title, displayMode) {\n    if (onHide === void 0) { onHide = function () { }; }\n    if (onShow === void 0) { onShow = function () { }; }\n    if (displayMode === void 0) { displayMode = \"popup\"; }\n    _console_warnings__WEBPACK_IMPORTED_MODULE_2__[\"ConsoleWarnings\"].warn(\"The `showModal()` and `createDialogOptions()` methods are obsolete. Use the `showDialog()` method instead.\");\n    return {\n        componentName: componentName,\n        data: data,\n        onApply: onApply,\n        onCancel: onCancel,\n        onHide: onHide,\n        onShow: onShow,\n        cssClass: cssClass,\n        title: title,\n        displayMode: displayMode\n    };\n}\n\n\n/***/ }),\n\n/***/ \"./src/react/boolean-checkbox.tsx\":\n/*!****************************************!*\\\n  !*** ./src/react/boolean-checkbox.tsx ***!\n  \\****************************************/\n/*! exports provided: SurveyQuestionBooleanCheckbox */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_496480__) {\n\n\"use strict\";\n__nested_webpack_require_496480__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_496480__.d(__nested_webpack_exports__, \"SurveyQuestionBooleanCheckbox\", function() { return SurveyQuestionBooleanCheckbox; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_496480__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_496480__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_496480__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_496480__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_496480__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _boolean__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_496480__(/*! ./boolean */ \"./src/react/boolean.tsx\");\n/* harmony import */ var _components_title_title_actions__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_496480__(/*! ./components/title/title-actions */ \"./src/react/components/title/title-actions.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_496480__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar SurveyQuestionBooleanCheckbox = /** @class */ (function (_super) {\n    __extends(SurveyQuestionBooleanCheckbox, _super);\n    function SurveyQuestionBooleanCheckbox(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionBooleanCheckbox.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        var itemClass = this.question.getCheckboxItemCss();\n        var description = this.question.canRenderLabelDescription ?\n            _reactquestion_element__WEBPACK_IMPORTED_MODULE_5__[\"SurveyElementBase\"].renderQuestionDescription(this.question) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.rootCheckbox },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: itemClass },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { className: cssClasses.checkboxLabel },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { ref: this.checkRef, type: \"checkbox\", name: this.question.name, value: this.question.booleanValue === null\n                            ? \"\"\n                            : this.question.booleanValue, id: this.question.inputId, className: cssClasses.controlCheckbox, disabled: this.isDisplayMode, checked: this.question.booleanValue || false, onChange: this.handleOnChange, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage }),\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.checkboxMaterialDecorator },\n                        this.question.svgIcon ?\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: cssClasses.checkboxItemDecorator },\n                                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.svgIcon })) : null,\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: \"check\" })),\n                    this.question.isLabelRendered && (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.checkboxControlLabel, id: this.question.labelRenderedAriaID },\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_title_title_actions__WEBPACK_IMPORTED_MODULE_4__[\"TitleActions\"], { element: this.question, cssClasses: this.question.cssClasses })))),\n                description)));\n    };\n    return SurveyQuestionBooleanCheckbox;\n}(_boolean__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionBoolean\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"sv-boolean-checkbox\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionBooleanCheckbox, props);\n});\nsurvey_core__WEBPACK_IMPORTED_MODULE_1__[\"RendererFactory\"].Instance.registerRenderer(\"boolean\", \"checkbox\", \"sv-boolean-checkbox\");\n\n\n/***/ }),\n\n/***/ \"./src/react/boolean-radio.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/boolean-radio.tsx ***!\n  \\*************************************/\n/*! exports provided: SurveyQuestionBooleanRadio */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_502086__) {\n\n\"use strict\";\n__nested_webpack_require_502086__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_502086__.d(__nested_webpack_exports__, \"SurveyQuestionBooleanRadio\", function() { return SurveyQuestionBooleanRadio; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_502086__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_502086__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_502086__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_502086__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_502086__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _boolean__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_502086__(/*! ./boolean */ \"./src/react/boolean.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionBooleanRadio = /** @class */ (function (_super) {\n    __extends(SurveyQuestionBooleanRadio, _super);\n    function SurveyQuestionBooleanRadio(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnChange = function (event) {\n            _this.question.booleanValue = event.nativeEvent.target.value == \"true\";\n        };\n        return _this;\n    }\n    SurveyQuestionBooleanRadio.prototype.renderRadioItem = function (value, locText) {\n        var cssClasses = this.question.cssClasses;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { role: \"presentation\", className: this.question.getRadioItemClass(cssClasses, value) },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { className: cssClasses.radioLabel },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { type: \"radio\", name: this.question.name, value: value, \"aria-errormessage\": this.question.ariaErrormessage, checked: value === this.question.booleanValueRendered, disabled: this.question.isInputReadOnly, className: cssClasses.itemRadioControl, onChange: this.handleOnChange }),\n                this.question.cssClasses.materialRadioDecorator ?\n                    (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.materialRadioDecorator }, this.question.itemSvgIcon ?\n                        (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: cssClasses.itemRadioDecorator },\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.itemSvgIcon }))) : null)) : null,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.radioControlLabel }, this.renderLocString(locText)))));\n    };\n    SurveyQuestionBooleanRadio.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.rootRadio },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"fieldset\", { role: \"presentation\", className: cssClasses.radioFieldset }, !this.question.swapOrder ?\n                (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n                    this.renderRadioItem(false, this.question.locLabelFalse),\n                    this.renderRadioItem(true, this.question.locLabelTrue)))\n                :\n                    (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n                        this.renderRadioItem(true, this.question.locLabelTrue),\n                        this.renderRadioItem(false, this.question.locLabelFalse))))));\n    };\n    return SurveyQuestionBooleanRadio;\n}(_boolean__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionBoolean\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"sv-boolean-radio\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionBooleanRadio, props);\n});\nsurvey_core__WEBPACK_IMPORTED_MODULE_1__[\"RendererFactory\"].Instance.registerRenderer(\"boolean\", \"radio\", \"sv-boolean-radio\");\n\n\n/***/ }),\n\n/***/ \"./src/react/boolean.tsx\":\n/*!*******************************!*\\\n  !*** ./src/react/boolean.tsx ***!\n  \\*******************************/\n/*! exports provided: SurveyQuestionBoolean */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_507482__) {\n\n\"use strict\";\n__nested_webpack_require_507482__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_507482__.d(__nested_webpack_exports__, \"SurveyQuestionBoolean\", function() { return SurveyQuestionBoolean; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_507482__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_507482__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_507482__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_507482__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionBoolean = /** @class */ (function (_super) {\n    __extends(SurveyQuestionBoolean, _super);\n    function SurveyQuestionBoolean(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnChange = _this.handleOnChange.bind(_this);\n        _this.handleOnClick = _this.handleOnClick.bind(_this);\n        _this.handleOnLabelClick = _this.handleOnLabelClick.bind(_this);\n        _this.handleOnSwitchClick = _this.handleOnSwitchClick.bind(_this);\n        _this.handleOnKeyDown = _this.handleOnKeyDown.bind(_this);\n        _this.checkRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        return _this;\n    }\n    SurveyQuestionBoolean.prototype.getStateElement = function () {\n        return this.question;\n    };\n    Object.defineProperty(SurveyQuestionBoolean.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /*\n    private get allowClick(): boolean {\n      return this.question.isIndeterminate && !this.isDisplayMode;\n    }\n    */\n    SurveyQuestionBoolean.prototype.doCheck = function (value) {\n        this.question.booleanValue = value;\n    };\n    SurveyQuestionBoolean.prototype.handleOnChange = function (event) {\n        this.doCheck(event.target.checked);\n    };\n    SurveyQuestionBoolean.prototype.handleOnClick = function (event) {\n        this.question.onLabelClick(event, true);\n    };\n    SurveyQuestionBoolean.prototype.handleOnSwitchClick = function (event) {\n        this.question.onSwitchClickModel(event.nativeEvent);\n    };\n    SurveyQuestionBoolean.prototype.handleOnLabelClick = function (event, value) {\n        this.question.onLabelClick(event, value);\n    };\n    SurveyQuestionBoolean.prototype.handleOnKeyDown = function (event) {\n        this.question.onKeyDownCore(event);\n    };\n    SurveyQuestionBoolean.prototype.updateDomElement = function () {\n        if (!this.question)\n            return;\n        var el = this.checkRef.current;\n        if (el) {\n            el.indeterminate = this.question.isIndeterminate;\n        }\n        this.setControl(el);\n        _super.prototype.updateDomElement.call(this);\n    };\n    SurveyQuestionBoolean.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.cssClasses;\n        var itemClass = this.question.getItemCss();\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.root, onKeyDown: this.handleOnKeyDown },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { className: itemClass, onClick: this.handleOnClick },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { ref: this.checkRef, type: \"checkbox\", name: this.question.name, value: this.question.booleanValue === null\n                        ? \"\"\n                        : this.question.booleanValue, id: this.question.inputId, className: cssClasses.control, disabled: this.isDisplayMode, checked: this.question.booleanValue || false, onChange: this.handleOnChange, role: this.question.a11y_input_ariaRole, \"aria-required\": this.question.a11y_input_ariaRequired, \"aria-label\": this.question.a11y_input_ariaLabel, \"aria-labelledby\": this.question.a11y_input_ariaLabelledBy, \"aria-describedby\": this.question.a11y_input_ariaDescribedBy, \"aria-invalid\": this.question.a11y_input_ariaInvalid, \"aria-errormessage\": this.question.a11y_input_ariaErrormessage }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.sliderGhost, onClick: function (event) { return _this.handleOnLabelClick(event, _this.question.swapOrder); } },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.getLabelCss(this.question.swapOrder) }, this.renderLocString(this.question.locLabelLeft))),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.switch, onClick: this.handleOnSwitchClick },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.slider }, this.question.isDeterminated && cssClasses.sliderText ?\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.sliderText }, this.renderLocString(this.question.getCheckedLabel()))\n                        : null)),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.sliderGhost, onClick: function (event) { return _this.handleOnLabelClick(event, !_this.question.swapOrder); } },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.getLabelCss(!this.question.swapOrder) }, this.renderLocString(this.question.locLabelRight))))));\n    };\n    return SurveyQuestionBoolean;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"boolean\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionBoolean, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/action-bar/action-bar-item-dropdown.tsx\":\n/*!**********************************************************************!*\\\n  !*** ./src/react/components/action-bar/action-bar-item-dropdown.tsx ***!\n  \\**********************************************************************/\n/*! exports provided: SurveyActionBarItemDropdown */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_514692__) {\n\n\"use strict\";\n__nested_webpack_require_514692__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_514692__.d(__nested_webpack_exports__, \"SurveyActionBarItemDropdown\", function() { return SurveyActionBarItemDropdown; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_514692__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_514692__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_514692__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_514692__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_514692__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _popup_popup__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_514692__(/*! ../popup/popup */ \"./src/react/components/popup/popup.tsx\");\n/* harmony import */ var _action_bar_item__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_514692__(/*! ./action-bar-item */ \"./src/react/components/action-bar/action-bar-item.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyActionBarItemDropdown = /** @class */ (function (_super) {\n    __extends(SurveyActionBarItemDropdown, _super);\n    function SurveyActionBarItemDropdown(props) {\n        var _this = _super.call(this, props) || this;\n        _this.viewModel = new survey_core__WEBPACK_IMPORTED_MODULE_1__[\"ActionDropdownViewModel\"](_this.item);\n        return _this;\n    }\n    SurveyActionBarItemDropdown.prototype.renderInnerButton = function () {\n        var button = _super.prototype.renderInnerButton.call(this);\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,\n            button,\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_popup_popup__WEBPACK_IMPORTED_MODULE_3__[\"Popup\"], { model: this.item.popupModel, getTarget: survey_core__WEBPACK_IMPORTED_MODULE_1__[\"getActionDropdownButtonTarget\"] })));\n    };\n    SurveyActionBarItemDropdown.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.viewModel.dispose();\n    };\n    return SurveyActionBarItemDropdown;\n}(_action_bar_item__WEBPACK_IMPORTED_MODULE_4__[\"SurveyActionBarItem\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"sv-action-bar-item-dropdown\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyActionBarItemDropdown, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/action-bar/action-bar-item.tsx\":\n/*!*************************************************************!*\\\n  !*** ./src/react/components/action-bar/action-bar-item.tsx ***!\n  \\*************************************************************/\n/*! exports provided: SurveyAction, SurveyActionBarItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_518566__) {\n\n\"use strict\";\n__nested_webpack_require_518566__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_518566__.d(__nested_webpack_exports__, \"SurveyAction\", function() { return SurveyAction; });\n/* harmony export (binding) */ __nested_webpack_require_518566__.d(__nested_webpack_exports__, \"SurveyActionBarItem\", function() { return SurveyActionBarItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_518566__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_518566__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_518566__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_518566__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactSurvey__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_518566__(/*! ../../reactSurvey */ \"./src/react/reactSurvey.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_518566__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _action_bar_separator__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_518566__(/*! ./action-bar-separator */ \"./src/react/components/action-bar/action-bar-separator.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar SurveyAction = /** @class */ (function (_super) {\n    __extends(SurveyAction, _super);\n    function SurveyAction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyAction.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyAction.prototype.getStateElement = function () {\n        return this.item;\n    };\n    SurveyAction.prototype.renderElement = function () {\n        //refactor\n        var itemClass = this.item.getActionRootCss();\n        var separator = this.item.needSeparator ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_action_bar_separator__WEBPACK_IMPORTED_MODULE_5__[\"SurveyActionBarSeparator\"], null)) : null;\n        var itemComponent = _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(this.item.component || \"sv-action-bar-item\", {\n            item: this.item,\n        });\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: itemClass, id: this.item.id },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-action__content\" },\n                separator,\n                itemComponent)));\n    };\n    return SurveyAction;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\nvar SurveyActionBarItem = /** @class */ (function (_super) {\n    __extends(SurveyActionBarItem, _super);\n    function SurveyActionBarItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyActionBarItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyActionBarItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    SurveyActionBarItem.prototype.renderElement = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, this.renderInnerButton());\n    };\n    SurveyActionBarItem.prototype.renderText = function () {\n        if (!this.item.hasTitle)\n            return null;\n        var titleClass = this.item.getActionBarItemTitleCss();\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: titleClass }, this.item.title);\n    };\n    SurveyActionBarItem.prototype.renderButtonContent = function () {\n        var text = this.renderText();\n        var svgIcon = !!this.item.iconName ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__[\"SvgIcon\"], { className: this.item.cssClasses.itemIcon, size: this.item.iconSize, iconName: this.item.iconName, title: this.item.tooltip || this.item.title })) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,\n            svgIcon,\n            text));\n    };\n    SurveyActionBarItem.prototype.renderInnerButton = function () {\n        var _this = this;\n        var className = this.item.getActionBarItemCss();\n        var title = this.item.tooltip || this.item.title;\n        var buttonContent = this.renderButtonContent();\n        var tabIndex = this.item.disableTabStop ? -1 : undefined;\n        var button = Object(_reactSurvey__WEBPACK_IMPORTED_MODULE_3__[\"attachKey2click\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", { className: className, type: \"button\", disabled: this.item.disabled, onClick: function (args) { return _this.item.action(_this.item, _this.item.getIsTrusted(args)); }, title: title, tabIndex: tabIndex, \"aria-checked\": this.item.ariaChecked, \"aria-expanded\": this.item.ariaExpanded, role: this.item.ariaRole }, buttonContent), this.item, { processEsc: false });\n        return button;\n    };\n    return SurveyActionBarItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-action-bar-item\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyActionBarItem, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/action-bar/action-bar-separator.tsx\":\n/*!******************************************************************!*\\\n  !*** ./src/react/components/action-bar/action-bar-separator.tsx ***!\n  \\******************************************************************/\n/*! exports provided: SurveyActionBarSeparator */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_525538__) {\n\n\"use strict\";\n__nested_webpack_require_525538__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_525538__.d(__nested_webpack_exports__, \"SurveyActionBarSeparator\", function() { return SurveyActionBarSeparator; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_525538__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_525538__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_525538__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar SurveyActionBarSeparator = /** @class */ (function (_super) {\n    __extends(SurveyActionBarSeparator, _super);\n    function SurveyActionBarSeparator(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyActionBarSeparator.prototype.render = function () {\n        var className = \"sv-action-bar-separator \" + this.props.cssClasses;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: className });\n    };\n    return SurveyActionBarSeparator;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-action-bar-separator\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyActionBarSeparator, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/action-bar/action-bar.tsx\":\n/*!********************************************************!*\\\n  !*** ./src/react/components/action-bar/action-bar.tsx ***!\n  \\********************************************************/\n/*! exports provided: SurveyActionBarItemDropdown, SurveyActionBarSeparator, SurveyActionBar */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_528165__) {\n\n\"use strict\";\n__nested_webpack_require_528165__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_528165__.d(__nested_webpack_exports__, \"SurveyActionBar\", function() { return SurveyActionBar; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_528165__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_528165__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_528165__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_528165__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _action_bar_item__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_528165__(/*! ./action-bar-item */ \"./src/react/components/action-bar/action-bar-item.tsx\");\n/* harmony import */ var _action_bar_item_dropdown__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_528165__(/*! ./action-bar-item-dropdown */ \"./src/react/components/action-bar/action-bar-item-dropdown.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_528165__.d(__nested_webpack_exports__, \"SurveyActionBarItemDropdown\", function() { return _action_bar_item_dropdown__WEBPACK_IMPORTED_MODULE_4__[\"SurveyActionBarItemDropdown\"]; });\n\n/* harmony import */ var _action_bar_separator__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_528165__(/*! ./action-bar-separator */ \"./src/react/components/action-bar/action-bar-separator.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_528165__.d(__nested_webpack_exports__, \"SurveyActionBarSeparator\", function() { return _action_bar_separator__WEBPACK_IMPORTED_MODULE_5__[\"SurveyActionBarSeparator\"]; });\n\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar SurveyActionBar = /** @class */ (function (_super) {\n    __extends(SurveyActionBar, _super);\n    function SurveyActionBar(props) {\n        var _this = _super.call(this, props) || this;\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n        return _this;\n    }\n    Object.defineProperty(SurveyActionBar.prototype, \"handleClick\", {\n        get: function () {\n            return this.props.handleClick !== undefined ? this.props.handleClick : true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyActionBar.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyActionBar.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        if (!this.model.hasActions)\n            return;\n        var container = this.rootRef.current;\n        if (!!container) {\n            this.model.initResponsivityManager(container, function (callback) { setTimeout(callback); });\n        }\n    };\n    SurveyActionBar.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (!!this.model.hasActions) {\n            this.model.resetResponsivityManager();\n        }\n    };\n    SurveyActionBar.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        if (prevProps.model == this.props.model) {\n            return;\n        }\n        if (!!this.model.hasActions) {\n            this.model.resetResponsivityManager();\n            var container = this.rootRef.current;\n            if (!!container) {\n                this.model.initResponsivityManager(container, function (callback) { setTimeout(callback); });\n            }\n        }\n    };\n    SurveyActionBar.prototype.getStateElement = function () {\n        return this.model;\n    };\n    SurveyActionBar.prototype.renderElement = function () {\n        if (!this.model.hasActions)\n            return null;\n        var items = this.renderItems();\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { ref: this.rootRef, className: this.model.getRootCss(), onClick: this.handleClick ? function (event) {\n                event.stopPropagation();\n            } : undefined }, items));\n    };\n    SurveyActionBar.prototype.renderItems = function () {\n        return this.model.renderedActions.map(function (item, itemIndex) {\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_action_bar_item__WEBPACK_IMPORTED_MODULE_3__[\"SurveyAction\"], { item: item, key: \"item\" + itemIndex }));\n        });\n    };\n    return SurveyActionBar;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-action-bar\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyActionBar, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/brand-info.tsx\":\n/*!*********************************************!*\\\n  !*** ./src/react/components/brand-info.tsx ***!\n  \\*********************************************/\n/*! exports provided: BrandInfo */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_534145__) {\n\n\"use strict\";\n__nested_webpack_require_534145__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_534145__.d(__nested_webpack_exports__, \"BrandInfo\", function() { return BrandInfo; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_534145__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_534145__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar BrandInfo = /** @class */ (function (_super) {\n    __extends(BrandInfo, _super);\n    function BrandInfo() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BrandInfo.prototype.render = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-brand-info\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", { className: \"sv-brand-info__logo\", href: \"https://surveyjs.io/?utm_source=built-in_links&utm_medium=online_survey_tool&utm_campaign=landing_page\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", { src: \"https://surveyjs.io/Content/Images/poweredby.svg\" })),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-brand-info__text\" },\n                \"Try and see how easy it is to \",\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", { href: \"https://surveyjs.io/create-survey?utm_source=built-in_links&utm_medium=online_survey_tool&utm_campaign=create_survey\" }, \"create a survey\")),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-brand-info__terms\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", { href: \"https://surveyjs.io/TermsOfUse\" }, \"Terms of Use & Privacy Statement\"))));\n    };\n    return BrandInfo;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/components/character-counter.tsx\":\n/*!****************************************************!*\\\n  !*** ./src/react/components/character-counter.tsx ***!\n  \\****************************************************/\n/*! exports provided: CharacterCounterComponent */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_537197__) {\n\n\"use strict\";\n__nested_webpack_require_537197__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_537197__.d(__nested_webpack_exports__, \"CharacterCounterComponent\", function() { return CharacterCounterComponent; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_537197__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_537197__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_537197__(/*! ../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_537197__(/*! ../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar CharacterCounterComponent = /** @class */ (function (_super) {\n    __extends(CharacterCounterComponent, _super);\n    function CharacterCounterComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CharacterCounterComponent.prototype.getStateElement = function () {\n        return this.props.counter;\n    };\n    CharacterCounterComponent.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.props.remainingCharacterCounter }, this.props.counter.remainingCharacterCounter));\n    };\n    return CharacterCounterComponent;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-character-counter\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CharacterCounterComponent, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/components-container.tsx\":\n/*!*******************************************************!*\\\n  !*** ./src/react/components/components-container.tsx ***!\n  \\*******************************************************/\n/*! exports provided: ComponentsContainer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_540102__) {\n\n\"use strict\";\n__nested_webpack_require_540102__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_540102__.d(__nested_webpack_exports__, \"ComponentsContainer\", function() { return ComponentsContainer; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_540102__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_540102__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_540102__(/*! ../element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar ComponentsContainer = /** @class */ (function (_super) {\n    __extends(ComponentsContainer, _super);\n    function ComponentsContainer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ComponentsContainer.prototype.render = function () {\n        var _this = this;\n        var components = this.props.survey.getContainerContent(this.props.container);\n        var needRenderWrapper = this.props.needRenderWrapper === false ? false : true;\n        if (components.length == 0) {\n            return null;\n        }\n        if (!needRenderWrapper) {\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, components.map(function (component) {\n                return _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(component.component, { survey: _this.props.survey, model: component.data, container: _this.props.container, key: component.id });\n            }));\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-components-column\" }, components.map(function (component) {\n            return _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(component.component, { survey: _this.props.survey, model: component.data, container: _this.props.container, key: component.id });\n        }));\n    };\n    return ComponentsContainer;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-components-container\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ComponentsContainer, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/file/file-choose-button.tsx\":\n/*!**********************************************************!*\\\n  !*** ./src/react/components/file/file-choose-button.tsx ***!\n  \\**********************************************************/\n/*! exports provided: SurveyFileChooseButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_543648__) {\n\n\"use strict\";\n__nested_webpack_require_543648__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_543648__.d(__nested_webpack_exports__, \"SurveyFileChooseButton\", function() { return SurveyFileChooseButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_543648__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_543648__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactSurvey__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_543648__(/*! ../../reactSurvey */ \"./src/react/reactSurvey.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_543648__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_543648__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_543648__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyFileChooseButton = /** @class */ (function (_super) {\n    __extends(SurveyFileChooseButton, _super);\n    function SurveyFileChooseButton(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyFileChooseButton.prototype, \"question\", {\n        get: function () {\n            return (this.props.item && this.props.item.data.question) || this.props.data.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyFileChooseButton.prototype.render = function () {\n        var _this = this;\n        return Object(_reactSurvey__WEBPACK_IMPORTED_MODULE_1__[\"attachKey2click\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", { tabIndex: 0, className: this.question.getChooseFileCss(), htmlFor: this.question.inputId, \"aria-label\": this.question.chooseButtonText, onClick: function (e) { return _this.question.chooseFile(e.nativeEvent); } },\n            (!!this.question.cssClasses.chooseFileIconId) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { title: this.question.chooseButtonText, iconName: this.question.cssClasses.chooseFileIconId, size: \"auto\" }) : null,\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, this.question.chooseButtonText)));\n    };\n    return SurveyFileChooseButton;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_4__[\"ReactElementFactory\"].Instance.registerElement(\"sv-file-choose-btn\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyFileChooseButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/file/file-preview.tsx\":\n/*!****************************************************!*\\\n  !*** ./src/react/components/file/file-preview.tsx ***!\n  \\****************************************************/\n/*! exports provided: SurveyFilePreview */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_547601__) {\n\n\"use strict\";\n__nested_webpack_require_547601__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_547601__.d(__nested_webpack_exports__, \"SurveyFilePreview\", function() { return SurveyFilePreview; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_547601__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_547601__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_547601__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_547601__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_547601__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyFilePreview = /** @class */ (function (_super) {\n    __extends(SurveyFilePreview, _super);\n    function SurveyFilePreview() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyFilePreview.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyFilePreview.prototype.renderFileSign = function (className, val) {\n        var _this = this;\n        if (!className || !val.name)\n            return null;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: className },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", { href: val.content, onClick: function (event) {\n                    _this.question.doDownloadFile(event, val);\n                }, title: val.name, download: val.name, style: { width: this.question.imageWidth } }, val.name)));\n    };\n    SurveyFilePreview.prototype.renderElement = function () {\n        var _this = this;\n        var previews = this.question.previewValue.map(function (val, index) {\n            if (!val)\n                return null;\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { key: _this.question.inputId + \"_\" + index, className: _this.question.cssClasses.preview, style: { display: _this.question.isPreviewVisible(index) ? undefined : \"none\" } },\n                _this.renderFileSign(_this.question.cssClasses.fileSign, val),\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _this.question.getImageWrapperCss(val) },\n                    _this.question.canPreviewImage(val) ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", { src: val.content, style: { height: _this.question.imageHeight, width: _this.question.imageWidth }, alt: \"File preview\" })) : (_this.question.cssClasses.defaultImage ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { iconName: _this.question.cssClasses.defaultImageIconId, size: \"auto\", className: _this.question.cssClasses.defaultImage })) : null),\n                    val.name && !_this.question.isReadOnly ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _this.question.getRemoveButtonCss(), onClick: function () { return _this.question.doRemoveFile(val); } },\n                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: _this.question.cssClasses.removeFile }, _this.question.removeFileCaption),\n                        (_this.question.cssClasses.removeFileSvgIconId) ?\n                            (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { title: _this.question.removeFileCaption, iconName: _this.question.cssClasses.removeFileSvgIconId, size: \"auto\", className: _this.question.cssClasses.removeFileSvg })) : null)) : null),\n                _this.renderFileSign(_this.question.cssClasses.fileSignBottom, val)));\n        });\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.question.cssClasses.fileList || undefined }, previews);\n    };\n    SurveyFilePreview.prototype.canRender = function () {\n        return this.question.showPreviewContainer;\n    };\n    return SurveyFilePreview;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-file-preview\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyFilePreview, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/header.tsx\":\n/*!*****************************************!*\\\n  !*** ./src/react/components/header.tsx ***!\n  \\*****************************************/\n/*! exports provided: HeaderMobile, HeaderCell, Header */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_553454__) {\n\n\"use strict\";\n__nested_webpack_require_553454__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_553454__.d(__nested_webpack_exports__, \"HeaderMobile\", function() { return HeaderMobile; });\n/* harmony export (binding) */ __nested_webpack_require_553454__.d(__nested_webpack_exports__, \"HeaderCell\", function() { return HeaderCell; });\n/* harmony export (binding) */ __nested_webpack_require_553454__.d(__nested_webpack_exports__, \"Header\", function() { return Header; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_553454__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_553454__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_553454__(/*! ../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_553454__(/*! ../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _title_title_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_553454__(/*! ./title/title-element */ \"./src/react/components/title/title-element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar HeaderMobile = /** @class */ (function (_super) {\n    __extends(HeaderMobile, _super);\n    function HeaderMobile() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(HeaderMobile.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HeaderMobile.prototype.renderLogoImage = function () {\n        var componentName = this.model.survey.getElementWrapperComponentName(this.model.survey, \"logo-image\");\n        var componentData = this.model.survey.getElementWrapperComponentData(this.model.survey, \"logo-image\");\n        return _element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            data: componentData,\n        });\n    };\n    HeaderMobile.prototype.render = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header--mobile\" },\n            this.model.survey.hasLogo ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header__logo\" }, this.renderLogoImage())) : null,\n            this.model.survey.hasTitle ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header__title\", style: { maxWidth: this.model.textAreaWidth } },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_title_title_element__WEBPACK_IMPORTED_MODULE_3__[\"TitleElement\"], { element: this.model.survey }))) : null,\n            this.model.survey.renderedHasDescription ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header__description\", style: { maxWidth: this.model.textAreaWidth } },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.survey.css.description }, _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"].renderLocString(this.model.survey.locDescription)))) : null));\n    };\n    return HeaderMobile;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\nvar HeaderCell = /** @class */ (function (_super) {\n    __extends(HeaderCell, _super);\n    function HeaderCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(HeaderCell.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HeaderCell.prototype.renderLogoImage = function () {\n        var componentName = this.model.survey.getElementWrapperComponentName(this.model.survey, \"logo-image\");\n        var componentData = this.model.survey.getElementWrapperComponentData(this.model.survey, \"logo-image\");\n        return _element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            data: componentData,\n        });\n    };\n    HeaderCell.prototype.render = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.css, style: this.model.style },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header__cell-content\", style: this.model.contentStyle },\n                this.model.showLogo ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header__logo\" }, this.renderLogoImage())) : null,\n                this.model.showTitle ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header__title\", style: { maxWidth: this.model.textAreaWidth } },\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_title_title_element__WEBPACK_IMPORTED_MODULE_3__[\"TitleElement\"], { element: this.model.survey }))) : null,\n                this.model.showDescription ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-header__description\", style: { maxWidth: this.model.textAreaWidth } },\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.survey.css.description }, _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"].renderLocString(this.model.survey.locDescription)))) : null)));\n    };\n    return HeaderCell;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\nvar Header = /** @class */ (function (_super) {\n    __extends(Header, _super);\n    function Header() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Header.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Header.prototype.getStateElement = function () {\n        return this.model;\n    };\n    Header.prototype.renderElement = function () {\n        this.model.survey = this.props.survey;\n        if (!(this.props.survey.headerView === \"advanced\")) {\n            return null;\n        }\n        var headerContent = null;\n        if (this.props.survey.isMobile) {\n            headerContent = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(HeaderMobile, { model: this.model });\n        }\n        else {\n            headerContent = (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.contentClasses, style: { maxWidth: this.model.maxWidth } }, this.model.cells.map(function (cell, index) { return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(HeaderCell, { key: index, model: cell }); })));\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.headerClasses, style: { height: this.model.renderedHeight } },\n            this.model.backgroundImage ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: this.model.backgroundImageStyle, className: this.model.backgroundImageClasses }) : null,\n            headerContent));\n    };\n    return Header;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"sv-header\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/list/list-item.tsx\":\n/*!*************************************************!*\\\n  !*** ./src/react/components/list/list-item.tsx ***!\n  \\*************************************************/\n/*! exports provided: ListItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_562132__) {\n\n\"use strict\";\n__nested_webpack_require_562132__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_562132__.d(__nested_webpack_exports__, \"ListItem\", function() { return ListItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_562132__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_562132__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_562132__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_562132__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactSurvey__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_562132__(/*! ../../reactSurvey */ \"./src/react/reactSurvey.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_562132__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar ListItem = /** @class */ (function (_super) {\n    __extends(ListItem, _super);\n    function ListItem() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleKeydown = function (event) {\n            _this.model.onKeyDown(event);\n        };\n        return _this;\n    }\n    Object.defineProperty(ListItem.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ListItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ListItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    ListItem.prototype.render = function () {\n        var _this = this;\n        if (!this.item)\n            return null;\n        var contentWrapStyle = {\n            paddingInlineStart: this.model.getItemIndent(this.item)\n        };\n        var className = this.model.getItemClass(this.item);\n        var content = [];\n        if (!this.item.component) {\n            var text = this.renderLocString(this.item.locTitle, undefined, \"locString\");\n            if (this.item.iconName) {\n                var icon = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__[\"SvgIcon\"], { key: 1, className: this.model.cssClasses.itemIcon, iconName: this.item.iconName, size: this.item.iconSize, \"aria-label\": this.item.title });\n                content.push(icon);\n                content.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { key: 2 }, text));\n            }\n            else {\n                content.push(text);\n            }\n        }\n        else {\n            var newElement = _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(this.item.component, { item: this.item, key: this.item.id });\n            if (!!newElement) {\n                content.push(newElement);\n            }\n        }\n        var contentWrap = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: contentWrapStyle, className: this.model.cssClasses.itemBody, title: this.item.locTitle.calculatedText }, content);\n        var separator = this.item.needSeparator ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.cssClasses.itemSeparator }) : null;\n        var isVisible = this.model.isItemVisible(this.item);\n        var style = {\n            display: isVisible ? null : \"none\"\n        };\n        return Object(_reactSurvey__WEBPACK_IMPORTED_MODULE_3__[\"attachKey2click\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", { className: className, role: \"option\", style: style, id: this.item.elementId, \"aria-selected\": this.model.isItemSelected(this.item), onClick: function (event) {\n                _this.model.onItemClick(_this.item);\n                event.stopPropagation();\n            }, onPointerDown: function (event) { return _this.model.onPointerDown(event, _this.item); } },\n            separator,\n            contentWrap));\n    };\n    ListItem.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.model.onLastItemRended(this.item);\n    };\n    return ListItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-list-item\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ListItem, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/list/list.tsx\":\n/*!********************************************!*\\\n  !*** ./src/react/components/list/list.tsx ***!\n  \\********************************************/\n/*! exports provided: List */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_567987__) {\n\n\"use strict\";\n__nested_webpack_require_567987__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_567987__.d(__nested_webpack_exports__, \"List\", function() { return List; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_567987__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_567987__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_567987__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_567987__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_567987__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_567987__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_567987__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _list_item__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_567987__(/*! ./list-item */ \"./src/react/components/list/list-item.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar List = /** @class */ (function (_super) {\n    __extends(List, _super);\n    function List(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleKeydown = function (event) {\n            _this.model.onKeyDown(event);\n        };\n        _this.handleMouseMove = function (event) {\n            _this.model.onMouseMove(event);\n        };\n        _this.state = {\n            filterString: _this.model.filterString || \"\"\n        };\n        _this.listContainerRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n        return _this;\n    }\n    Object.defineProperty(List.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    List.prototype.getStateElement = function () {\n        return this.model;\n    };\n    List.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        if (!!this.listContainerRef && !!this.listContainerRef.current) {\n            this.model.initListContainerHtmlElement(this.listContainerRef.current);\n        }\n    };\n    List.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (!!this.model) {\n            this.model.initListContainerHtmlElement(undefined);\n        }\n    };\n    List.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.cssClasses.root, ref: this.listContainerRef },\n            this.searchElementContent(),\n            this.emptyContent(),\n            this.renderList()));\n    };\n    List.prototype.renderList = function () {\n        if (!this.model.renderElements)\n            return null;\n        var items = this.renderItems();\n        var ulStyle = { display: this.model.isEmpty ? \"none\" : null };\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", { className: this.model.getListClass(), style: ulStyle, role: \"listbox\", id: this.model.elementId, onMouseDown: function (e) {\n                e.preventDefault();\n            }, onKeyDown: this.handleKeydown, onMouseMove: this.handleMouseMove }, items));\n    };\n    List.prototype.renderItems = function () {\n        var _this = this;\n        if (!this.model) {\n            return null;\n        }\n        var items = this.model.renderedActions;\n        if (!items) {\n            return null;\n        }\n        return items.map(function (item, itemIndex) {\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_list_item__WEBPACK_IMPORTED_MODULE_5__[\"ListItem\"], { model: _this.model, item: item, key: \"item\" + itemIndex }));\n        });\n    };\n    List.prototype.searchElementContent = function () {\n        var _this = this;\n        if (!this.model.showFilter)\n            return null;\n        else {\n            var onChange = function (e) {\n                var root = survey_core__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment.root;\n                if (e.target === root.activeElement) {\n                    _this.model.filterString = e.target.value;\n                }\n            };\n            var onKeyUp = function (e) {\n                _this.model.goToItems(e);\n            };\n            var clearButton = this.model.showSearchClearButton && !!this.model.filterString ?\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", { className: this.model.cssClasses.searchClearButtonIcon, onClick: function (event) { _this.model.onClickSearchClearButton(event); } },\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__[\"SvgIcon\"], { iconName: \"icon-searchclear\", size: \"auto\" })) : null;\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.cssClasses.filter },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.cssClasses.filterIcon },\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__[\"SvgIcon\"], { iconName: \"icon-search\", size: \"auto\" })),\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { type: \"text\", className: this.model.cssClasses.filterInput, \"aria-label\": this.model.filterStringPlaceholder, placeholder: this.model.filterStringPlaceholder, value: this.state.filterString, onKeyUp: onKeyUp, onChange: onChange }),\n                clearButton));\n        }\n    };\n    List.prototype.emptyContent = function () {\n        var style = { display: this.model.isEmpty ? null : \"none\" };\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.cssClasses.emptyContainer, style: style },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.model.cssClasses.emptyText, \"aria-label\": this.model.emptyMessage }, this.model.emptyMessage)));\n    };\n    return List;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"sv-list\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(List, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/loading-indicator.tsx\":\n/*!****************************************************!*\\\n  !*** ./src/react/components/loading-indicator.tsx ***!\n  \\****************************************************/\n/*! exports provided: LoadingIndicatorComponent */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_575867__) {\n\n\"use strict\";\n__nested_webpack_require_575867__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_575867__.d(__nested_webpack_exports__, \"LoadingIndicatorComponent\", function() { return LoadingIndicatorComponent; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_575867__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_575867__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_575867__(/*! ./svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar LoadingIndicatorComponent = /** @class */ (function (_super) {\n    __extends(LoadingIndicatorComponent, _super);\n    function LoadingIndicatorComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LoadingIndicatorComponent.prototype.render = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"sd-loading-indicator\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_1__[\"SvgIcon\"], { iconName: \"icon-loading\", size: \"auto\" })));\n    };\n    return LoadingIndicatorComponent;\n}(react__WEBPACK_IMPORTED_MODULE_0__[\"Component\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/components/matrix-actions/detail-button/detail-button.tsx\":\n/*!*****************************************************************************!*\\\n  !*** ./src/react/components/matrix-actions/detail-button/detail-button.tsx ***!\n  \\*****************************************************************************/\n/*! exports provided: SurveyQuestionMatrixDetailButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_578425__) {\n\n\"use strict\";\n__nested_webpack_require_578425__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_578425__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDetailButton\", function() { return SurveyQuestionMatrixDetailButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_578425__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_578425__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_578425__(/*! ../../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_578425__(/*! ../../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_578425__(/*! ../../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionMatrixDetailButton = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDetailButton, _super);\n    function SurveyQuestionMatrixDetailButton(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnShowHideClick = _this.handleOnShowHideClick.bind(_this);\n        return _this;\n    }\n    SurveyQuestionMatrixDetailButton.prototype.getStateElement = function () {\n        return this.props.item;\n    };\n    Object.defineProperty(SurveyQuestionMatrixDetailButton.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixDetailButton.prototype, \"question\", {\n        get: function () {\n            return this.props.item.data.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixDetailButton.prototype, \"row\", {\n        get: function () {\n            return this.props.item.data.row;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixDetailButton.prototype.handleOnShowHideClick = function (event) {\n        this.row.showHideDetailPanelClick();\n    };\n    SurveyQuestionMatrixDetailButton.prototype.renderElement = function () {\n        var isExpanded = this.row.isDetailPanelShowing;\n        var ariaExpanded = isExpanded;\n        var ariaControls = isExpanded ? this.row.detailPanelId : undefined;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", { type: \"button\", onClick: this.handleOnShowHideClick, className: this.question.getDetailPanelButtonCss(this.row), \"aria-expanded\": ariaExpanded, \"aria-controls\": ariaControls },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { className: this.question.getDetailPanelIconCss(this.row), iconName: this.question.getDetailPanelIconId(this.row), size: \"auto\" })));\n    };\n    return SurveyQuestionMatrixDetailButton;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-matrix-detail-button\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionMatrixDetailButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/matrix-actions/drag-drop-icon/drag-drop-icon.tsx\":\n/*!*******************************************************************************!*\\\n  !*** ./src/react/components/matrix-actions/drag-drop-icon/drag-drop-icon.tsx ***!\n  \\*******************************************************************************/\n/*! exports provided: SurveyQuestionMatrixDynamicDragDropIcon */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_583119__) {\n\n\"use strict\";\n__nested_webpack_require_583119__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_583119__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicDragDropIcon\", function() { return SurveyQuestionMatrixDynamicDragDropIcon; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_583119__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_583119__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_583119__(/*! ../../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_583119__(/*! ../../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionMatrixDynamicDragDropIcon = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDynamicDragDropIcon, _super);\n    function SurveyQuestionMatrixDynamicDragDropIcon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixDynamicDragDropIcon.prototype, \"question\", {\n        get: function () {\n            return this.props.item.data.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixDynamicDragDropIcon.prototype.renderElement = function () {\n        if (this.question.iconDragElement) {\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"svg\", { className: this.question.cssClasses.dragElementDecorator },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"use\", { xlinkHref: this.question.iconDragElement })));\n        }\n        else {\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: this.question.cssClasses.iconDrag }));\n        }\n    };\n    return SurveyQuestionMatrixDynamicDragDropIcon;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-matrix-drag-drop-icon\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionMatrixDynamicDragDropIcon, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/matrix-actions/remove-button/remove-button.tsx\":\n/*!*****************************************************************************!*\\\n  !*** ./src/react/components/matrix-actions/remove-button/remove-button.tsx ***!\n  \\*****************************************************************************/\n/*! exports provided: SurveyQuestionMatrixDynamicRemoveButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_586703__) {\n\n\"use strict\";\n__nested_webpack_require_586703__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_586703__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicRemoveButton\", function() { return SurveyQuestionMatrixDynamicRemoveButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_586703__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_586703__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_586703__(/*! ../../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_586703__(/*! ../../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionMatrixDynamicRemoveButton = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDynamicRemoveButton, _super);\n    function SurveyQuestionMatrixDynamicRemoveButton(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnRowRemoveClick = _this.handleOnRowRemoveClick.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixDynamicRemoveButton.prototype, \"question\", {\n        get: function () {\n            return this.props.item.data.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixDynamicRemoveButton.prototype, \"row\", {\n        get: function () {\n            return this.props.item.data.row;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixDynamicRemoveButton.prototype.handleOnRowRemoveClick = function (event) {\n        this.question.removeRowUI(this.row);\n    };\n    SurveyQuestionMatrixDynamicRemoveButton.prototype.renderElement = function () {\n        var removeRowText = this.renderLocString(this.question.locRemoveRowText);\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", { className: this.question.getRemoveRowButtonCss(), type: \"button\", onClick: this.handleOnRowRemoveClick, disabled: this.question.isInputReadOnly },\n            removeRowText,\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: this.question.cssClasses.iconRemove })));\n    };\n    return SurveyQuestionMatrixDynamicRemoveButton;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-matrix-remove-button\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionMatrixDynamicRemoveButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/matrix/row.tsx\":\n/*!*********************************************!*\\\n  !*** ./src/react/components/matrix/row.tsx ***!\n  \\*********************************************/\n/*! exports provided: MatrixRow */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_590577__) {\n\n\"use strict\";\n__nested_webpack_require_590577__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_590577__.d(__nested_webpack_exports__, \"MatrixRow\", function() { return MatrixRow; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_590577__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_590577__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_590577__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_590577__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar MatrixRow = /** @class */ (function (_super) {\n    __extends(MatrixRow, _super);\n    function MatrixRow(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onPointerDownHandler = function (event) {\n            _this.parentMatrix.onPointerDown(event.nativeEvent, _this.model.row);\n        };\n        return _this;\n    }\n    Object.defineProperty(MatrixRow.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MatrixRow.prototype, \"parentMatrix\", {\n        get: function () {\n            return this.props.parentMatrix;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MatrixRow.prototype.getStateElement = function () {\n        return this.model;\n    };\n    MatrixRow.prototype.render = function () {\n        var _this = this;\n        var model = this.model;\n        if (!model.visible)\n            return null;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", { className: model.className, \"data-sv-drop-target-matrix-row\": model.row && model.row.id, onPointerDown: function (event) { return _this.onPointerDownHandler(event); } }, this.props.children));\n    };\n    return MatrixRow;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-matrix-row\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MatrixRow, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/notifier.tsx\":\n/*!*******************************************!*\\\n  !*** ./src/react/components/notifier.tsx ***!\n  \\*******************************************/\n/*! exports provided: NotifierComponent */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_594037__) {\n\n\"use strict\";\n__nested_webpack_require_594037__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_594037__.d(__nested_webpack_exports__, \"NotifierComponent\", function() { return NotifierComponent; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_594037__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_594037__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_594037__(/*! ../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_594037__(/*! ../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _action_bar_action_bar__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_594037__(/*! ./action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar NotifierComponent = /** @class */ (function (_super) {\n    __extends(NotifierComponent, _super);\n    function NotifierComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(NotifierComponent.prototype, \"notifier\", {\n        get: function () {\n            return this.props.notifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NotifierComponent.prototype.getStateElement = function () {\n        return this.notifier;\n    };\n    NotifierComponent.prototype.renderElement = function () {\n        if (!this.notifier.isDisplayed)\n            return null;\n        var style = { visibility: this.notifier.active ? \"visible\" : \"hidden\" };\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.notifier.css, style: style, role: \"alert\", \"aria-live\": \"polite\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, this.notifier.message),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_3__[\"SurveyActionBar\"], { model: this.notifier.actionBar })));\n    };\n    return NotifierComponent;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"sv-notifier\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(NotifierComponent, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/paneldynamic-actions/paneldynamic-add-btn.tsx\":\n/*!****************************************************************************!*\\\n  !*** ./src/react/components/paneldynamic-actions/paneldynamic-add-btn.tsx ***!\n  \\****************************************************************************/\n/*! exports provided: SurveyQuestionPanelDynamicAction, SurveyQuestionPanelDynamicAddButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_597805__) {\n\n\"use strict\";\n__nested_webpack_require_597805__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_597805__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicAction\", function() { return SurveyQuestionPanelDynamicAction; });\n/* harmony export (binding) */ __nested_webpack_require_597805__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicAddButton\", function() { return SurveyQuestionPanelDynamicAddButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_597805__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_597805__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_597805__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_597805__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionPanelDynamicAction = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamicAction, _super);\n    function SurveyQuestionPanelDynamicAction(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionPanelDynamicAction.prototype, \"data\", {\n        get: function () {\n            return (this.props.item && this.props.item.data) || this.props.data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionPanelDynamicAction.prototype, \"question\", {\n        get: function () {\n            return (this.props.item && this.props.item.data.question) || this.props.data.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return SurveyQuestionPanelDynamicAction;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"ReactSurveyElement\"]));\n\nvar SurveyQuestionPanelDynamicAddButton = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamicAddButton, _super);\n    function SurveyQuestionPanelDynamicAddButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            _this.question.addPanelUI();\n        };\n        return _this;\n    }\n    SurveyQuestionPanelDynamicAddButton.prototype.renderElement = function () {\n        if (!this.question.canAddPanel)\n            return null;\n        var btnText = this.renderLocString(this.question.locPanelAddText);\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", { type: \"button\", className: this.question.getAddButtonCss(), onClick: this.handleClick },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: this.question.cssClasses.buttonAddText }, btnText)));\n    };\n    return SurveyQuestionPanelDynamicAddButton;\n}(SurveyQuestionPanelDynamicAction));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-paneldynamic-add-btn\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionPanelDynamicAddButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/paneldynamic-actions/paneldynamic-next-btn.tsx\":\n/*!*****************************************************************************!*\\\n  !*** ./src/react/components/paneldynamic-actions/paneldynamic-next-btn.tsx ***!\n  \\*****************************************************************************/\n/*! exports provided: SurveyQuestionPanelDynamicNextButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_602233__) {\n\n\"use strict\";\n__nested_webpack_require_602233__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_602233__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicNextButton\", function() { return SurveyQuestionPanelDynamicNextButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_602233__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_602233__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_602233__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_602233__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_602233__(/*! ./paneldynamic-add-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-add-btn.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionPanelDynamicNextButton = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamicNextButton, _super);\n    function SurveyQuestionPanelDynamicNextButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            _this.question.goToNextPanel();\n        };\n        return _this;\n    }\n    SurveyQuestionPanelDynamicNextButton.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { title: this.question.panelNextText, onClick: this.handleClick, className: this.question.getNextButtonCss() },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { iconName: this.question.cssClasses.progressBtnIcon, size: \"auto\" })));\n    };\n    return SurveyQuestionPanelDynamicNextButton;\n}(_paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionPanelDynamicAction\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-paneldynamic-next-btn\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionPanelDynamicNextButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/paneldynamic-actions/paneldynamic-prev-btn.tsx\":\n/*!*****************************************************************************!*\\\n  !*** ./src/react/components/paneldynamic-actions/paneldynamic-prev-btn.tsx ***!\n  \\*****************************************************************************/\n/*! exports provided: SurveyQuestionPanelDynamicPrevButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_605783__) {\n\n\"use strict\";\n__nested_webpack_require_605783__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_605783__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicPrevButton\", function() { return SurveyQuestionPanelDynamicPrevButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_605783__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_605783__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_605783__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_605783__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_605783__(/*! ./paneldynamic-add-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-add-btn.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionPanelDynamicPrevButton = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamicPrevButton, _super);\n    function SurveyQuestionPanelDynamicPrevButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            _this.question.goToPrevPanel();\n        };\n        return _this;\n    }\n    SurveyQuestionPanelDynamicPrevButton.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { title: this.question.panelPrevText, onClick: this.handleClick, className: this.question.getPrevButtonCss() },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { iconName: this.question.cssClasses.progressBtnIcon, size: \"auto\" })));\n    };\n    return SurveyQuestionPanelDynamicPrevButton;\n}(_paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionPanelDynamicAction\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-paneldynamic-prev-btn\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionPanelDynamicPrevButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/paneldynamic-actions/paneldynamic-progress-text.tsx\":\n/*!**********************************************************************************!*\\\n  !*** ./src/react/components/paneldynamic-actions/paneldynamic-progress-text.tsx ***!\n  \\**********************************************************************************/\n/*! exports provided: SurveyQuestionPanelDynamicProgressText */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_609355__) {\n\n\"use strict\";\n__nested_webpack_require_609355__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_609355__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicProgressText\", function() { return SurveyQuestionPanelDynamicProgressText; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_609355__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_609355__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_609355__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_609355__(/*! ./paneldynamic-add-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-add-btn.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionPanelDynamicProgressText = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamicProgressText, _super);\n    function SurveyQuestionPanelDynamicProgressText() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SurveyQuestionPanelDynamicProgressText.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.question.cssClasses.progressText }, this.question.progressText));\n    };\n    return SurveyQuestionPanelDynamicProgressText;\n}(_paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionPanelDynamicAction\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-paneldynamic-progress-text\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionPanelDynamicProgressText, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/paneldynamic-actions/paneldynamic-remove-btn.tsx\":\n/*!*******************************************************************************!*\\\n  !*** ./src/react/components/paneldynamic-actions/paneldynamic-remove-btn.tsx ***!\n  \\*******************************************************************************/\n/*! exports provided: SurveyQuestionPanelDynamicRemoveButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_612402__) {\n\n\"use strict\";\n__nested_webpack_require_612402__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_612402__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicRemoveButton\", function() { return SurveyQuestionPanelDynamicRemoveButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_612402__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_612402__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_612402__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_612402__(/*! ./paneldynamic-add-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-add-btn.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionPanelDynamicRemoveButton = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamicRemoveButton, _super);\n    function SurveyQuestionPanelDynamicRemoveButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            _this.question.removePanelUI(_this.data.panel);\n        };\n        return _this;\n    }\n    SurveyQuestionPanelDynamicRemoveButton.prototype.renderElement = function () {\n        var btnText = this.renderLocString(this.question.locPanelRemoveText);\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", { className: this.question.getPanelRemoveButtonCss(), onClick: this.handleClick, type: \"button\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: this.question.cssClasses.buttonRemoveText }, btnText),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: this.question.cssClasses.iconRemove })));\n    };\n    return SurveyQuestionPanelDynamicRemoveButton;\n}(_paneldynamic_add_btn__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionPanelDynamicAction\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-paneldynamic-remove-btn\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyQuestionPanelDynamicRemoveButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/popup/popup.tsx\":\n/*!**********************************************!*\\\n  !*** ./src/react/components/popup/popup.tsx ***!\n  \\**********************************************/\n/*! exports provided: Popup, PopupContainer, PopupDropdownContainer, showModal, showDialog */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_615866__) {\n\n\"use strict\";\n__nested_webpack_require_615866__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_615866__.d(__nested_webpack_exports__, \"Popup\", function() { return Popup; });\n/* harmony export (binding) */ __nested_webpack_require_615866__.d(__nested_webpack_exports__, \"PopupContainer\", function() { return PopupContainer; });\n/* harmony export (binding) */ __nested_webpack_require_615866__.d(__nested_webpack_exports__, \"PopupDropdownContainer\", function() { return PopupDropdownContainer; });\n/* harmony export (binding) */ __nested_webpack_require_615866__.d(__nested_webpack_exports__, \"showModal\", function() { return showModal; });\n/* harmony export (binding) */ __nested_webpack_require_615866__.d(__nested_webpack_exports__, \"showDialog\", function() { return showDialog; });\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_615866__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_615866__.n(react_dom__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_615866__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_615866__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_615866__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__nested_webpack_require_615866__.n(survey_core__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_615866__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_615866__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _action_bar_action_bar__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_615866__(/*! ../action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Popup = /** @class */ (function (_super) {\n    __extends(Popup, _super);\n    function Popup(props) {\n        var _this = _super.call(this, props) || this;\n        _this.containerRef = react__WEBPACK_IMPORTED_MODULE_1___default.a.createRef();\n        _this.createModel();\n        return _this;\n    }\n    Object.defineProperty(Popup.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Popup.prototype.getStateElement = function () {\n        return this.model;\n    };\n    Popup.prototype.createModel = function () {\n        this.popup = Object(survey_core__WEBPACK_IMPORTED_MODULE_2__[\"createPopupViewModel\"])(this.props.model, undefined);\n    };\n    Popup.prototype.setTargetElement = function () {\n        var container = this.containerRef.current;\n        this.popup.setComponentElement(container, this.props.getTarget ? this.props.getTarget(container) : undefined);\n    };\n    Popup.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.setTargetElement();\n    };\n    Popup.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.setTargetElement();\n    };\n    Popup.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.popup.resetComponentElement();\n    };\n    Popup.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        var _a;\n        if (!_super.prototype.shouldComponentUpdate.call(this, nextProps, nextState))\n            return false;\n        var isNeedUpdate = nextProps.model !== this.popup.model;\n        if (isNeedUpdate) {\n            (_a = this.popup) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.createModel();\n        }\n        return isNeedUpdate;\n    };\n    Popup.prototype.render = function () {\n        this.popup.model = this.model;\n        var popupContainer;\n        if (this.model.isModal) {\n            popupContainer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PopupContainer, { model: this.popup });\n        }\n        else {\n            popupContainer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PopupDropdownContainer, { model: this.popup });\n        }\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { ref: this.containerRef }, popupContainer);\n    };\n    return Popup;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_4__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-popup\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Popup, props);\n});\nvar PopupContainer = /** @class */ (function (_super) {\n    __extends(PopupContainer, _super);\n    function PopupContainer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.prevIsVisible = false;\n        _this.handleKeydown = function (event) {\n            _this.model.onKeyDown(event);\n        };\n        _this.clickInside = function (ev) {\n            ev.stopPropagation();\n        };\n        return _this;\n    }\n    Object.defineProperty(PopupContainer.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PopupContainer.prototype.getStateElement = function () {\n        return this.model;\n    };\n    PopupContainer.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        if (!this.prevIsVisible && this.model.isVisible) {\n            this.model.updateOnShowing();\n        }\n        this.prevIsVisible = this.model.isVisible;\n    };\n    PopupContainer.prototype.renderContainer = function (popupBaseViewModel) {\n        var _this = this;\n        var headerPopup = popupBaseViewModel.showHeader ? this.renderHeaderPopup(popupBaseViewModel) : null;\n        var headerContent = !!popupBaseViewModel.title ? this.renderHeaderContent() : null;\n        var content = this.renderContent();\n        var footerContent = popupBaseViewModel.showFooter ? this.renderFooter(this.model) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: \"sv-popup__container\", style: {\n                left: popupBaseViewModel.left,\n                top: popupBaseViewModel.top,\n                height: popupBaseViewModel.height,\n                width: popupBaseViewModel.width,\n                minWidth: popupBaseViewModel.minWidth,\n            }, onClick: function (ev) {\n                _this.clickInside(ev);\n            } },\n            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: \"sv-popup__shadow\" },\n                headerPopup,\n                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: \"sv-popup__body-content\" },\n                    headerContent,\n                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: \"sv-popup__scrolling-content\" }, content),\n                    footerContent))));\n    };\n    PopupContainer.prototype.renderHeaderContent = function () {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: \"sv-popup__body-header\" }, this.model.title);\n    };\n    PopupContainer.prototype.renderContent = function () {\n        var contentComponent = _element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.createElement(this.model.contentComponentName, this.model.contentComponentData);\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: \"sv-popup__content\" }, contentComponent);\n    };\n    PopupContainer.prototype.renderHeaderPopup = function (popupModel) {\n        return null;\n    };\n    PopupContainer.prototype.renderFooter = function (popuModel) {\n        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: \"sv-popup__body-footer\" },\n            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_5__[\"SurveyActionBar\"], { model: popuModel.footerToolbar })));\n    };\n    PopupContainer.prototype.render = function () {\n        var _this = this;\n        var container = this.renderContainer(this.model);\n        var className = new survey_core__WEBPACK_IMPORTED_MODULE_2__[\"CssClassBuilder\"]()\n            .append(\"sv-popup\")\n            .append(this.model.styleClass)\n            .toString();\n        var style = { display: this.model.isVisible ? \"\" : \"none\", };\n        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { tabIndex: -1, className: className, style: style, onClick: function (e) {\n                _this.model.clickOutside(e);\n            }, onKeyDown: this.handleKeydown }, container));\n    };\n    return PopupContainer;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_4__[\"SurveyElementBase\"]));\n\nvar PopupDropdownContainer = /** @class */ (function (_super) {\n    __extends(PopupDropdownContainer, _super);\n    function PopupDropdownContainer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopupDropdownContainer.prototype.renderHeaderPopup = function (popupModel) {\n        var popupDropdownModel = popupModel;\n        if (!popupDropdownModel)\n            return null;\n        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"span\", { style: {\n                left: popupDropdownModel.pointerTarget.left,\n                top: popupDropdownModel.pointerTarget.top,\n            }, className: \"sv-popup__pointer\" }));\n    };\n    return PopupDropdownContainer;\n}(PopupContainer));\n\n// replace to showDialog then delete\nfunction showModal(componentName, data, onApply, onCancel, cssClass, title, displayMode) {\n    if (displayMode === void 0) { displayMode = \"popup\"; }\n    var options = Object(survey_core__WEBPACK_IMPORTED_MODULE_2__[\"createDialogOptions\"])(componentName, data, onApply, onCancel, undefined, undefined, cssClass, title, displayMode);\n    return showDialog(options);\n}\nfunction showDialog(dialogOptions, rootElement) {\n    var popupViewModel = Object(survey_core__WEBPACK_IMPORTED_MODULE_2__[\"createPopupModalViewModel\"])(dialogOptions, rootElement);\n    var onVisibilityChangedCallback = function (_, options) {\n        if (!options.isVisible) {\n            react_dom__WEBPACK_IMPORTED_MODULE_0___default.a.unmountComponentAtNode(popupViewModel.container);\n            popupViewModel.dispose();\n        }\n    };\n    popupViewModel.onVisibilityChanged.add(onVisibilityChangedCallback);\n    react_dom__WEBPACK_IMPORTED_MODULE_0___default.a.render(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PopupContainer, { model: popupViewModel }), popupViewModel.container);\n    popupViewModel.model.isVisible = true;\n    return popupViewModel;\n}\nsurvey_core__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].showModal = showModal;\nsurvey_core__WEBPACK_IMPORTED_MODULE_2__[\"settings\"].showDialog = showDialog;\n\n\n/***/ }),\n\n/***/ \"./src/react/components/rating/rating-dropdown-item.tsx\":\n/*!**************************************************************!*\\\n  !*** ./src/react/components/rating/rating-dropdown-item.tsx ***!\n  \\**************************************************************/\n/*! exports provided: RatingDropdownItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_628296__) {\n\n\"use strict\";\n__nested_webpack_require_628296__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_628296__.d(__nested_webpack_exports__, \"RatingDropdownItem\", function() { return RatingDropdownItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_628296__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_628296__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_628296__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_628296__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar RatingDropdownItem = /** @class */ (function (_super) {\n    __extends(RatingDropdownItem, _super);\n    function RatingDropdownItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(RatingDropdownItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RatingDropdownItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    RatingDropdownItem.prototype.render = function () {\n        if (!this.item)\n            return null;\n        var item = this.props.item;\n        var description = this.renderDescription(item);\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sd-rating-dropdown-item\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sd-rating-dropdown-item_text\" }, item.title),\n            description));\n    };\n    RatingDropdownItem.prototype.renderDescription = function (item) {\n        if (!item.description)\n            return null;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sd-rating-dropdown-item_description\" }, this.renderLocString(item.description, undefined, \"locString\")));\n    };\n    return RatingDropdownItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-rating-dropdown-item\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RatingDropdownItem, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/rating/rating-item-smiley.tsx\":\n/*!************************************************************!*\\\n  !*** ./src/react/components/rating/rating-item-smiley.tsx ***!\n  \\************************************************************/\n/*! exports provided: RatingItemSmiley */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_631934__) {\n\n\"use strict\";\n__nested_webpack_require_631934__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_631934__.d(__nested_webpack_exports__, \"RatingItemSmiley\", function() { return RatingItemSmiley; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_631934__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_631934__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_631934__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_631934__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _rating_item__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_631934__(/*! ./rating-item */ \"./src/react/components/rating/rating-item.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar RatingItemSmiley = /** @class */ (function (_super) {\n    __extends(RatingItemSmiley, _super);\n    function RatingItemSmiley() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RatingItemSmiley.prototype.render = function () {\n        var _this = this;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", { onMouseDown: this.handleOnMouseDown, style: this.question.getItemStyle(this.item.itemValue, this.item.highlight), className: this.question.getItemClass(this.item.itemValue), onMouseOver: function (e) { return _this.question.onItemMouseIn(_this.item); }, onMouseOut: function (e) { return _this.question.onItemMouseOut(_this.item); } },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { type: \"radio\", className: \"sv-visuallyhidden\", name: this.question.name, id: this.question.getInputId(this.index), value: this.item.value, disabled: this.isDisplayMode, checked: this.question.value == this.item.value, onClick: this.props.handleOnClick, onChange: function () { }, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage }),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { size: \"auto\", iconName: this.question.getItemSmileyIconName(this.item.itemValue), title: this.item.text })));\n    };\n    return RatingItemSmiley;\n}(_rating_item__WEBPACK_IMPORTED_MODULE_3__[\"RatingItemBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-rating-item-smiley\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RatingItemSmiley, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/rating/rating-item-star.tsx\":\n/*!**********************************************************!*\\\n  !*** ./src/react/components/rating/rating-item-star.tsx ***!\n  \\**********************************************************/\n/*! exports provided: RatingItemStar */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_635857__) {\n\n\"use strict\";\n__nested_webpack_require_635857__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_635857__.d(__nested_webpack_exports__, \"RatingItemStar\", function() { return RatingItemStar; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_635857__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_635857__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_635857__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_635857__(/*! ../svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _rating_item__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_635857__(/*! ./rating-item */ \"./src/react/components/rating/rating-item.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar RatingItemStar = /** @class */ (function (_super) {\n    __extends(RatingItemStar, _super);\n    function RatingItemStar() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RatingItemStar.prototype.render = function () {\n        var _this = this;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", { onMouseDown: this.handleOnMouseDown, className: this.question.getItemClass(this.item.itemValue), onMouseOver: function (e) { return _this.question.onItemMouseIn(_this.item); }, onMouseOut: function (e) { return _this.question.onItemMouseOut(_this.item); } },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { type: \"radio\", className: \"sv-visuallyhidden\", name: this.question.name, id: this.question.getInputId(this.index), value: this.item.value, disabled: this.isDisplayMode, checked: this.question.value == this.item.value, onClick: this.props.handleOnClick, onChange: function () { }, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage }),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { className: \"sv-star\", size: \"auto\", iconName: this.question.itemStarIcon, title: this.item.text }),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { className: \"sv-star-2\", size: \"auto\", iconName: this.question.itemStarIconAlt, title: this.item.text })));\n    };\n    return RatingItemStar;\n}(_rating_item__WEBPACK_IMPORTED_MODULE_3__[\"RatingItemBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-rating-item-star\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RatingItemStar, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/rating/rating-item.tsx\":\n/*!*****************************************************!*\\\n  !*** ./src/react/components/rating/rating-item.tsx ***!\n  \\*****************************************************/\n/*! exports provided: RatingItemBase, RatingItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_639907__) {\n\n\"use strict\";\n__nested_webpack_require_639907__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_639907__.d(__nested_webpack_exports__, \"RatingItemBase\", function() { return RatingItemBase; });\n/* harmony export (binding) */ __nested_webpack_require_639907__.d(__nested_webpack_exports__, \"RatingItem\", function() { return RatingItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_639907__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_639907__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_639907__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_639907__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar RatingItemBase = /** @class */ (function (_super) {\n    __extends(RatingItemBase, _super);\n    function RatingItemBase(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnMouseDown = _this.handleOnMouseDown.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(RatingItemBase.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RatingItemBase.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RatingItemBase.prototype, \"index\", {\n        get: function () {\n            return this.props.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RatingItemBase.prototype.getStateElement = function () {\n        return this.item;\n    };\n    RatingItemBase.prototype.handleOnMouseDown = function (event) {\n        this.question.onMouseDown();\n    };\n    return RatingItemBase;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"]));\n\nvar RatingItem = /** @class */ (function (_super) {\n    __extends(RatingItem, _super);\n    function RatingItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RatingItem.prototype.render = function () {\n        var itemText = this.renderLocString(this.item.locText);\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", { onMouseDown: this.handleOnMouseDown, className: this.question.getItemClassByText(this.item.itemValue, this.item.text) },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { type: \"radio\", className: \"sv-visuallyhidden\", name: this.question.name, id: this.question.getInputId(this.index), value: this.item.value, disabled: this.isDisplayMode, checked: this.question.value == this.item.value, onClick: this.props.handleOnClick, onChange: function () { }, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage }),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: this.question.cssClasses.itemText }, itemText)));\n    };\n    RatingItem.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n    };\n    return RatingItem;\n}(RatingItemBase));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-rating-item\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RatingItem, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/skeleton.tsx\":\n/*!*******************************************!*\\\n  !*** ./src/react/components/skeleton.tsx ***!\n  \\*******************************************/\n/*! exports provided: Skeleton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_644683__) {\n\n\"use strict\";\n__nested_webpack_require_644683__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_644683__.d(__nested_webpack_exports__, \"Skeleton\", function() { return Skeleton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_644683__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_644683__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_644683__(/*! ../element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Skeleton = /** @class */ (function (_super) {\n    __extends(Skeleton, _super);\n    function Skeleton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Skeleton.prototype.render = function () {\n        var _a;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-skeleton-element\", id: (_a = this.props.element) === null || _a === void 0 ? void 0 : _a.id }));\n    };\n    return Skeleton;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-skeleton\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Skeleton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/survey-actions/survey-nav-button.tsx\":\n/*!*******************************************************************!*\\\n  !*** ./src/react/components/survey-actions/survey-nav-button.tsx ***!\n  \\*******************************************************************/\n/*! exports provided: SurveyNavigationButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_647210__) {\n\n\"use strict\";\n__nested_webpack_require_647210__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_647210__.d(__nested_webpack_exports__, \"SurveyNavigationButton\", function() { return SurveyNavigationButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_647210__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_647210__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_647210__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_647210__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyNavigationButton = /** @class */ (function (_super) {\n    __extends(SurveyNavigationButton, _super);\n    function SurveyNavigationButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyNavigationButton.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyNavigationButton.prototype.canRender = function () {\n        return this.item.isVisible;\n    };\n    SurveyNavigationButton.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { className: this.item.innerCss, type: \"button\", disabled: this.item.disabled, onMouseDown: this.item.data && this.item.data.mouseDown, onClick: this.item.action, title: this.item.getTooltip(), value: this.item.title }));\n    };\n    return SurveyNavigationButton;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-nav-btn\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyNavigationButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/survey-header/logo-image.tsx\":\n/*!***********************************************************!*\\\n  !*** ./src/react/components/survey-header/logo-image.tsx ***!\n  \\***********************************************************/\n/*! exports provided: LogoImage */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_650415__) {\n\n\"use strict\";\n__nested_webpack_require_650415__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_650415__.d(__nested_webpack_exports__, \"LogoImage\", function() { return LogoImage; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_650415__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_650415__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_650415__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar LogoImage = /** @class */ (function (_super) {\n    __extends(LogoImage, _super);\n    function LogoImage(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(LogoImage.prototype, \"survey\", {\n        get: function () {\n            return this.props.data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LogoImage.prototype.render = function () {\n        var content = [];\n        content.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { key: \"logo-image\", className: this.survey.logoClassNames },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", { className: this.survey.css.logoImage, src: this.survey.locLogo.renderedHtml, alt: this.survey.locTitle.renderedHtml, width: this.survey.renderedLogoWidth, height: this.survey.renderedLogoHeight, style: { objectFit: this.survey.logoFit, width: this.survey.renderedStyleLogoWidth, height: this.survey.renderedStyleLogoHeight } })));\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, content);\n    };\n    return LogoImage;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-logo-image\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LogoImage, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/survey-header/survey-header.tsx\":\n/*!**************************************************************!*\\\n  !*** ./src/react/components/survey-header/survey-header.tsx ***!\n  \\**************************************************************/\n/*! exports provided: SurveyHeader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_653620__) {\n\n\"use strict\";\n__nested_webpack_require_653620__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_653620__.d(__nested_webpack_exports__, \"SurveyHeader\", function() { return SurveyHeader; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_653620__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_653620__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_653620__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_653620__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _title_title_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_653620__(/*! ../title/title-element */ \"./src/react/components/title/title-element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyHeader = /** @class */ (function (_super) {\n    __extends(SurveyHeader, _super);\n    function SurveyHeader(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { changed: 0 };\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n        return _this;\n    }\n    Object.defineProperty(SurveyHeader.prototype, \"survey\", {\n        get: function () {\n            return this.props.survey;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyHeader.prototype, \"css\", {\n        get: function () {\n            return this.survey.css;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyHeader.prototype.componentDidMount = function () {\n        var self = this;\n        this.survey.afterRenderHeader(this.rootRef.current);\n        this.survey.locLogo.onChanged = function () {\n            self.setState({ changed: self.state.changed + 1 });\n        };\n    };\n    SurveyHeader.prototype.componentWillUnmount = function () {\n        this.survey.locLogo.onChanged = function () { };\n    };\n    SurveyHeader.prototype.renderTitle = function () {\n        if (!this.survey.renderedHasTitle)\n            return null;\n        var description = _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"].renderLocString(this.survey.locDescription);\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.css.headerText, style: { maxWidth: this.survey.titleMaxWidth } },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_title_title_element__WEBPACK_IMPORTED_MODULE_3__[\"TitleElement\"], { element: this.survey }),\n            this.survey.renderedHasDescription ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.css.description }, description) : null));\n    };\n    SurveyHeader.prototype.renderLogoImage = function (isRender) {\n        if (!isRender)\n            return null;\n        var componentName = this.survey.getElementWrapperComponentName(this.survey, \"logo-image\");\n        var componentData = this.survey.getElementWrapperComponentData(this.survey, \"logo-image\");\n        return _element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            data: componentData,\n        });\n    };\n    SurveyHeader.prototype.render = function () {\n        if (!this.survey.renderedHasHeader)\n            return null;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.css.header, ref: this.rootRef },\n            this.renderLogoImage(this.survey.isLogoBefore),\n            this.renderTitle(),\n            this.renderLogoImage(this.survey.isLogoAfter),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: this.css.headerClose })));\n    };\n    return SurveyHeader;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"survey-header\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyHeader, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/svg-icon/svg-icon.tsx\":\n/*!****************************************************!*\\\n  !*** ./src/react/components/svg-icon/svg-icon.tsx ***!\n  \\****************************************************/\n/*! exports provided: SvgIcon */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_658927__) {\n\n\"use strict\";\n__nested_webpack_require_658927__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_658927__.d(__nested_webpack_exports__, \"SvgIcon\", function() { return SvgIcon; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_658927__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_658927__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_658927__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_658927__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__nested_webpack_require_658927__.n(survey_core__WEBPACK_IMPORTED_MODULE_2__);\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SvgIcon = /** @class */ (function (_super) {\n    __extends(SvgIcon, _super);\n    function SvgIcon(props) {\n        var _this = _super.call(this, props) || this;\n        _this.svgIconRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n        return _this;\n    }\n    SvgIcon.prototype.updateSvg = function () {\n        if (this.props.iconName)\n            Object(survey_core__WEBPACK_IMPORTED_MODULE_2__[\"createSvg\"])(this.props.size, this.props.width, this.props.height, this.props.iconName, this.svgIconRef.current, this.props.title);\n    };\n    SvgIcon.prototype.componentDidUpdate = function () {\n        this.updateSvg();\n    };\n    SvgIcon.prototype.render = function () {\n        var className = \"sv-svg-icon\";\n        if (this.props.className) {\n            className += \" \" + this.props.className;\n        }\n        return (this.props.iconName ?\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"svg\", { className: className, style: this.props.style, onClick: this.props.onClick, ref: this.svgIconRef, role: \"img\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"use\", null))\n            : null);\n    };\n    SvgIcon.prototype.componentDidMount = function () {\n        this.updateSvg();\n    };\n    return SvgIcon;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"sv-svg-icon\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIcon, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/title/title-actions.tsx\":\n/*!******************************************************!*\\\n  !*** ./src/react/components/title/title-actions.tsx ***!\n  \\******************************************************/\n/*! exports provided: TitleActions */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_662485__) {\n\n\"use strict\";\n__nested_webpack_require_662485__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_662485__.d(__nested_webpack_exports__, \"TitleActions\", function() { return TitleActions; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_662485__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_662485__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_662485__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_662485__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_662485__(/*! ../../element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _action_bar_action_bar__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_662485__(/*! ../action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\n/* harmony import */ var _title_content__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_662485__(/*! ./title-content */ \"./src/react/components/title/title-content.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar TitleActions = /** @class */ (function (_super) {\n    __extends(TitleActions, _super);\n    function TitleActions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(TitleActions.prototype, \"cssClasses\", {\n        get: function () {\n            return this.props.cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TitleActions.prototype, \"element\", {\n        get: function () {\n            return this.props.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TitleActions.prototype.render = function () {\n        var titleContent = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_title_content__WEBPACK_IMPORTED_MODULE_4__[\"TitleContent\"], { element: this.element, cssClasses: this.cssClasses });\n        if (!this.element.hasTitleActions)\n            return titleContent;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sv-title-actions\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sv-title-actions__title\" }, titleContent),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_3__[\"SurveyActionBar\"], { model: this.element.getTitleToolbar() })));\n    };\n    return TitleActions;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\nsurvey_core__WEBPACK_IMPORTED_MODULE_1__[\"RendererFactory\"].Instance.registerRenderer(\"element\", \"title-actions\", \"sv-title-actions\");\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"sv-title-actions\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TitleActions, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/components/title/title-content.tsx\":\n/*!******************************************************!*\\\n  !*** ./src/react/components/title/title-content.tsx ***!\n  \\******************************************************/\n/*! exports provided: TitleContent */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_666674__) {\n\n\"use strict\";\n__nested_webpack_require_666674__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_666674__.d(__nested_webpack_exports__, \"TitleContent\", function() { return TitleContent; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_666674__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_666674__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_666674__(/*! ../../reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar TitleContent = /** @class */ (function (_super) {\n    __extends(TitleContent, _super);\n    function TitleContent(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(TitleContent.prototype, \"cssClasses\", {\n        get: function () {\n            return this.props.cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TitleContent.prototype, \"element\", {\n        get: function () {\n            return this.props.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TitleContent.prototype.render = function () {\n        if (this.element.isTitleRenderedAsString)\n            return _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"].renderLocString(this.element.locTitle);\n        var spans = this.renderTitleSpans(this.element.getTitleOwner(), this.cssClasses);\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, spans);\n    };\n    TitleContent.prototype.renderTitleSpans = function (element, cssClasses) {\n        var getSpaceSpan = function (key) {\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { \"data-key\": key, key: key }, \"\\u00A0\"));\n        };\n        var spans = [];\n        if (element.isRequireTextOnStart) {\n            spans.push(this.renderRequireText(element, cssClasses));\n            spans.push(getSpaceSpan(\"req-sp\"));\n        }\n        var questionNumber = element.no;\n        if (questionNumber) {\n            var panelNumber = !!cssClasses.panel ? cssClasses.panel.number : undefined;\n            spans.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { \"data-key\": \"q_num\", key: \"q_num\", className: cssClasses.number || panelNumber, style: { position: \"static\" }, \"aria-hidden\": true }, questionNumber));\n            spans.push(getSpaceSpan(\"num-sp\"));\n        }\n        if (element.isRequireTextBeforeTitle) {\n            spans.push(this.renderRequireText(element, cssClasses));\n            spans.push(getSpaceSpan(\"req-sp\"));\n        }\n        spans.push(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"].renderLocString(element.locTitle, null, \"q_title\"));\n        if (element.isRequireTextAfterTitle) {\n            spans.push(getSpaceSpan(\"req-sp\"));\n            spans.push(this.renderRequireText(element, cssClasses));\n        }\n        return spans;\n    };\n    TitleContent.prototype.renderRequireText = function (element, cssClasses) {\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { \"data-key\": \"req-text\", key: \"req-text\", className: cssClasses.requiredText || cssClasses.panel.requiredText, \"aria-hidden\": true }, element.requiredText));\n    };\n    return TitleContent;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/components/title/title-element.tsx\":\n/*!******************************************************!*\\\n  !*** ./src/react/components/title/title-element.tsx ***!\n  \\******************************************************/\n/*! exports provided: TitleElement */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_671334__) {\n\n\"use strict\";\n__nested_webpack_require_671334__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_671334__.d(__nested_webpack_exports__, \"TitleElement\", function() { return TitleElement; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_671334__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_671334__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_671334__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_671334__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _title_actions__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_671334__(/*! ./title-actions */ \"./src/react/components/title/title-actions.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar TitleElement = /** @class */ (function (_super) {\n    __extends(TitleElement, _super);\n    function TitleElement(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(TitleElement.prototype, \"element\", {\n        get: function () {\n            return this.props.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TitleElement.prototype.render = function () {\n        var element = this.element;\n        if (!element || !element.hasTitle)\n            return null;\n        var ariaLabel = element.titleAriaLabel || undefined;\n        var titleContent = (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_title_actions__WEBPACK_IMPORTED_MODULE_2__[\"TitleActions\"], { element: element, cssClasses: element.cssClasses }));\n        var onClick = undefined;\n        var onKeyUp = undefined;\n        if (element.hasTitleEvents) {\n            onKeyUp = function (evt) {\n                Object(survey_core__WEBPACK_IMPORTED_MODULE_1__[\"doKey2ClickUp\"])(evt.nativeEvent);\n            };\n        }\n        var CustomTag = element.titleTagName;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CustomTag, { className: element.cssTitle, id: element.ariaTitleId, \"aria-label\": ariaLabel, tabIndex: element.titleTabIndex, \"aria-expanded\": element.titleAriaExpanded, role: element.titleAriaRole, onClick: onClick, onKeyUp: onKeyUp }, titleContent));\n    };\n    return TitleElement;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/custom-widget.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/custom-widget.tsx ***!\n  \\*************************************/\n/*! exports provided: SurveyCustomWidget */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_674814__) {\n\n\"use strict\";\n__nested_webpack_require_674814__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_674814__.d(__nested_webpack_exports__, \"SurveyCustomWidget\", function() { return SurveyCustomWidget; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_674814__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_674814__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_674814__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar SurveyCustomWidget = /** @class */ (function (_super) {\n    __extends(SurveyCustomWidget, _super);\n    function SurveyCustomWidget(props) {\n        var _this = _super.call(this, props) || this;\n        _this.widgetRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        return _this;\n    }\n    SurveyCustomWidget.prototype._afterRender = function () {\n        if (this.questionBase.customWidget) {\n            var el = this.widgetRef.current;\n            if (!!el) {\n                this.questionBase.customWidget.afterRender(this.questionBase, el);\n                this.questionBase.customWidgetData.isNeedRender = false;\n            }\n        }\n    };\n    SurveyCustomWidget.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        if (this.questionBase) {\n            this._afterRender();\n        }\n    };\n    SurveyCustomWidget.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        var isDefaultRender = !!this.questionBase.customWidget &&\n            this.questionBase.customWidget.isDefaultRender;\n        if (this.questionBase && !isDefaultRender) {\n            this._afterRender();\n        }\n    };\n    SurveyCustomWidget.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (this.questionBase.customWidget) {\n            var el = this.widgetRef.current;\n            if (!!el) {\n                this.questionBase.customWidget.willUnmount(this.questionBase, el);\n            }\n        }\n    };\n    SurveyCustomWidget.prototype.canRender = function () {\n        return _super.prototype.canRender.call(this) && this.questionBase.visible;\n    };\n    SurveyCustomWidget.prototype.renderElement = function () {\n        var customWidget = this.questionBase.customWidget;\n        if (customWidget.isDefaultRender) {\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { ref: this.widgetRef }, this.creator.createQuestionElement(this.questionBase)));\n        }\n        var widget = null;\n        if (customWidget.widgetJson.render) {\n            widget = customWidget.widgetJson.render(this.questionBase);\n        }\n        else {\n            if (customWidget.htmlTemplate) {\n                var htmlValue = { __html: customWidget.htmlTemplate };\n                return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { ref: this.widgetRef, dangerouslySetInnerHTML: htmlValue });\n            }\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { ref: this.widgetRef }, widget);\n    };\n    return SurveyCustomWidget;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/dropdown-base.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/dropdown-base.tsx ***!\n  \\*************************************/\n/*! exports provided: SurveyQuestionDropdownBase */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_679304__) {\n\n\"use strict\";\n__nested_webpack_require_679304__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_679304__.d(__nested_webpack_exports__, \"SurveyQuestionDropdownBase\", function() { return SurveyQuestionDropdownBase; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_679304__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_679304__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_679304__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_679304__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_popup_popup__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_679304__(/*! ./components/popup/popup */ \"./src/react/components/popup/popup.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_679304__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_679304__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_comment__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_679304__(/*! ./reactquestion_comment */ \"./src/react/reactquestion_comment.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_679304__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar SurveyQuestionDropdownBase = /** @class */ (function (_super) {\n    __extends(SurveyQuestionDropdownBase, _super);\n    function SurveyQuestionDropdownBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.click = function (event) {\n            var _a;\n            (_a = _this.question.dropdownListModel) === null || _a === void 0 ? void 0 : _a.onClick(event);\n        };\n        _this.chevronPointerDown = function (event) {\n            var _a;\n            (_a = _this.question.dropdownListModel) === null || _a === void 0 ? void 0 : _a.chevronPointerDown(event);\n        };\n        _this.clear = function (event) {\n            var _a;\n            (_a = _this.question.dropdownListModel) === null || _a === void 0 ? void 0 : _a.onClear(event);\n        };\n        _this.keyhandler = function (event) {\n            var _a;\n            (_a = _this.question.dropdownListModel) === null || _a === void 0 ? void 0 : _a.keyHandler(event);\n        };\n        _this.blur = function (event) {\n            var _a;\n            (_a = _this.question.dropdownListModel) === null || _a === void 0 ? void 0 : _a.onBlur(event);\n            _this.updateInputDomElement();\n        };\n        _this.focus = function (event) {\n            var _a;\n            (_a = _this.question.dropdownListModel) === null || _a === void 0 ? void 0 : _a.onFocus(event);\n        };\n        return _this;\n    }\n    SurveyQuestionDropdownBase.prototype.getStateElement = function () {\n        return this.question[\"dropdownListModel\"];\n    };\n    SurveyQuestionDropdownBase.prototype.setValueCore = function (newValue) {\n        this.questionBase.renderedValue = newValue;\n    };\n    SurveyQuestionDropdownBase.prototype.getValueCore = function () {\n        return this.questionBase.renderedValue;\n    };\n    SurveyQuestionDropdownBase.prototype.renderReadOnlyElement = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null, this.question.readOnlyText);\n    };\n    SurveyQuestionDropdownBase.prototype.renderSelect = function (cssClasses) {\n        var _a, _b;\n        var selectElement = null;\n        if (this.question.isReadOnly) {\n            var text = (this.question.selectedItemLocText) ? this.renderLocString(this.question.selectedItemLocText) : \"\";\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            selectElement = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: this.question.inputId, className: this.question.getControlClass(), disabled: true },\n                text,\n                this.renderReadOnlyElement());\n        }\n        else {\n            if (!this.question[\"dropdownListModel\"]) {\n                this.question[\"dropdownListModel\"] = new survey_core__WEBPACK_IMPORTED_MODULE_1__[\"DropdownListModel\"](this.question);\n            }\n            selectElement = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n                this.renderInput(this.question[\"dropdownListModel\"]),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_popup_popup__WEBPACK_IMPORTED_MODULE_2__[\"Popup\"], { model: (_b = (_a = this.question) === null || _a === void 0 ? void 0 : _a.dropdownListModel) === null || _b === void 0 ? void 0 : _b.popupModel }));\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.selectWrapper, onClick: this.click },\n            selectElement,\n            this.createChevronButton()));\n    };\n    SurveyQuestionDropdownBase.prototype.renderValueElement = function (dropdownListModel) {\n        if (this.question.showInputFieldComponent) {\n            return _element_factory__WEBPACK_IMPORTED_MODULE_4__[\"ReactElementFactory\"].Instance.createElement(this.question.inputFieldComponentName, { item: dropdownListModel.getSelectedAction(), question: this.question });\n        }\n        else if (this.question.showSelectedItemLocText) {\n            return this.renderLocString(this.question.selectedItemLocText);\n        }\n        return null;\n    };\n    SurveyQuestionDropdownBase.prototype.renderInput = function (dropdownListModel) {\n        var _this = this;\n        var valueElement = this.renderValueElement(dropdownListModel);\n        var root = survey_core__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment.root;\n        var onInputChange = function (e) {\n            if (e.target === root.activeElement) {\n                dropdownListModel.inputStringRendered = e.target.value;\n            }\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: this.question.inputId, className: this.question.getControlClass(), tabIndex: dropdownListModel.noTabIndex ? undefined : 0, \n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            disabled: this.question.isInputReadOnly, required: this.question.isRequired, onKeyDown: this.keyhandler, onBlur: this.blur, role: this.question.ariaRole, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage, \"aria-expanded\": this.question.ariaExpanded === null ? undefined : this.question.ariaExpanded === \"true\", \"aria-controls\": dropdownListModel.listElementId, \"aria-activedescendant\": dropdownListModel.ariaActivedescendant },\n            dropdownListModel.showHintPrefix ?\n                (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.hintPrefix },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, dropdownListModel.hintStringPrefix))) : null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.controlValue },\n                dropdownListModel.showHintString ?\n                    (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.hintSuffix },\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { style: { visibility: \"hidden\" }, \"data-bind\": \"text: model.filterString\" }, dropdownListModel.inputStringRendered),\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, dropdownListModel.hintStringSuffix))) : null,\n                valueElement,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { type: \"text\", autoComplete: \"off\", id: this.question.getInputId(), ref: function (element) { return (_this.inputElement = element); }, className: this.question.cssClasses.filterStringInput, role: dropdownListModel.filterStringEnabled ? this.question.ariaRole : undefined, \"aria-expanded\": this.question.ariaExpanded === null ? undefined : this.question.ariaExpanded === \"true\", \"aria-label\": this.question.a11y_input_ariaLabel, \"aria-labelledby\": this.question.a11y_input_ariaLabelledBy, \"aria-describedby\": this.question.a11y_input_ariaDescribedBy, \"aria-controls\": dropdownListModel.listElementId, \"aria-activedescendant\": dropdownListModel.ariaActivedescendant, placeholder: dropdownListModel.placeholderRendered, readOnly: dropdownListModel.filterReadOnly ? true : undefined, tabIndex: dropdownListModel.noTabIndex ? undefined : -1, disabled: this.question.isInputReadOnly, inputMode: dropdownListModel.inputMode, onChange: function (e) { onInputChange(e); }, onBlur: this.blur, onFocus: this.focus })),\n            this.createClearButton()));\n    };\n    SurveyQuestionDropdownBase.prototype.createClearButton = function () {\n        if (!this.question.allowClear || !this.question.cssClasses.cleanButtonIconId)\n            return null;\n        var style = { display: !this.question.showClearButton ? \"none\" : \"\" };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.cleanButton, style: style, onClick: this.clear, \"aria-hidden\": \"true\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { className: this.question.cssClasses.cleanButtonSvg, iconName: this.question.cssClasses.cleanButtonIconId, title: this.question.clearCaption, size: \"auto\" })));\n    };\n    SurveyQuestionDropdownBase.prototype.createChevronButton = function () {\n        if (!this.question.cssClasses.chevronButtonIconId)\n            return null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.chevronButton, \"aria-hidden\": \"true\", onPointerDown: this.chevronPointerDown },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { className: this.question.cssClasses.chevronButtonSvg, iconName: this.question.cssClasses.chevronButtonIconId, size: \"auto\" })));\n    };\n    SurveyQuestionDropdownBase.prototype.renderOther = function (cssClasses) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getCommentAreaCss(true) },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion_comment__WEBPACK_IMPORTED_MODULE_5__[\"SurveyQuestionOtherValueItem\"], { question: this.question, otherCss: cssClasses.other, cssClasses: cssClasses, isDisplayMode: this.isDisplayMode, isOther: true })));\n    };\n    SurveyQuestionDropdownBase.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.updateInputDomElement();\n    };\n    SurveyQuestionDropdownBase.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.updateInputDomElement();\n    };\n    SurveyQuestionDropdownBase.prototype.updateInputDomElement = function () {\n        if (!!this.inputElement) {\n            var control = this.inputElement;\n            var newValue = this.question.dropdownListModel.inputStringRendered;\n            if (!survey_core__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isTwoValueEquals(newValue, control.value, false, true, false)) {\n                control.value = this.question.dropdownListModel.inputStringRendered;\n            }\n        }\n    };\n    return SurveyQuestionDropdownBase;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_6__[\"SurveyQuestionUncontrolledElement\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/dropdown-item.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/dropdown-item.tsx ***!\n  \\*************************************/\n/*! exports provided: SurveyQuestionOptionItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_692484__) {\n\n\"use strict\";\n__nested_webpack_require_692484__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_692484__.d(__nested_webpack_exports__, \"SurveyQuestionOptionItem\", function() { return SurveyQuestionOptionItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_692484__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_692484__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_692484__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar SurveyQuestionOptionItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionOptionItem, _super);\n    function SurveyQuestionOptionItem(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { changed: 0 };\n        _this.setupModel();\n        return _this;\n    }\n    SurveyQuestionOptionItem.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.setupModel();\n    };\n    SurveyQuestionOptionItem.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (!!this.item) {\n            this.item.locText.onChanged = function () { };\n        }\n    };\n    SurveyQuestionOptionItem.prototype.setupModel = function () {\n        if (!this.item.locText)\n            return;\n        var self = this;\n        this.item.locText.onChanged = function () {\n            self.setState({ changed: self.state.changed + 1 });\n        };\n    };\n    SurveyQuestionOptionItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    Object.defineProperty(SurveyQuestionOptionItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionOptionItem.prototype.canRender = function () {\n        return !!this.item;\n    };\n    SurveyQuestionOptionItem.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"option\", { value: this.item.value, disabled: !this.item.isEnabled }, this.item.text));\n    };\n    return SurveyQuestionOptionItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/dropdown-select.tsx\":\n/*!***************************************!*\\\n  !*** ./src/react/dropdown-select.tsx ***!\n  \\***************************************/\n/*! exports provided: SurveyQuestionDropdownSelect */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_695990__) {\n\n\"use strict\";\n__nested_webpack_require_695990__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_695990__.d(__nested_webpack_exports__, \"SurveyQuestionDropdownSelect\", function() { return SurveyQuestionDropdownSelect; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_695990__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_695990__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_695990__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_695990__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_695990__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactquestion_dropdown__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_695990__(/*! ./reactquestion_dropdown */ \"./src/react/reactquestion_dropdown.tsx\");\n/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_695990__(/*! ./dropdown-item */ \"./src/react/dropdown-item.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionDropdownSelect = /** @class */ (function (_super) {\n    __extends(SurveyQuestionDropdownSelect, _super);\n    function SurveyQuestionDropdownSelect(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionDropdownSelect.prototype.renderSelect = function (cssClasses) {\n        var _this = this;\n        var click = function (event) {\n            _this.question.onClick(event);\n        };\n        var keyup = function (event) {\n            _this.question.onKeyUp(event);\n        };\n        var selectElement = this.isDisplayMode ? (\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: this.question.inputId, className: this.question.getControlClass(), disabled: true }, this.question.readOnlyText)) :\n            (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"select\", { id: this.question.inputId, className: this.question.getControlClass(), ref: function (select) { return (_this.setControl(select)); }, autoComplete: this.question.autocomplete, onChange: this.updateValueOnEvent, onInput: this.updateValueOnEvent, onClick: click, onKeyUp: keyup, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage, required: this.question.isRequired },\n                this.question.allowClear ? (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"option\", { value: \"\" }, this.question.placeholder)) : null,\n                this.question.visibleChoices.map(function (item, i) { return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_dropdown_item__WEBPACK_IMPORTED_MODULE_4__[\"SurveyQuestionOptionItem\"], { key: \"item\" + i, item: item }); })));\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.selectWrapper },\n            selectElement,\n            this.createChevronButton()));\n    };\n    return SurveyQuestionDropdownSelect;\n}(_reactquestion_dropdown__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionDropdown\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"sv-dropdown-select\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionDropdownSelect, props);\n});\nsurvey_core__WEBPACK_IMPORTED_MODULE_1__[\"RendererFactory\"].Instance.registerRenderer(\"dropdown\", \"select\", \"sv-dropdown-select\");\n\n\n/***/ }),\n\n/***/ \"./src/react/element-factory.tsx\":\n/*!***************************************!*\\\n  !*** ./src/react/element-factory.tsx ***!\n  \\***************************************/\n/*! exports provided: ReactElementFactory */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_700830__) {\n\n\"use strict\";\n__nested_webpack_require_700830__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_700830__.d(__nested_webpack_exports__, \"ReactElementFactory\", function() { return ReactElementFactory; });\nvar ReactElementFactory = /** @class */ (function () {\n    function ReactElementFactory() {\n        this.creatorHash = {};\n    }\n    ReactElementFactory.prototype.registerElement = function (elementType, elementCreator) {\n        this.creatorHash[elementType] = elementCreator;\n    };\n    ReactElementFactory.prototype.getAllTypes = function () {\n        var result = new Array();\n        for (var key in this.creatorHash) {\n            result.push(key);\n        }\n        return result.sort();\n    };\n    ReactElementFactory.prototype.isElementRegistered = function (elementType) {\n        return !!this.creatorHash[elementType];\n    };\n    ReactElementFactory.prototype.createElement = function (elementType, params) {\n        var creator = this.creatorHash[elementType];\n        if (creator == null)\n            return null;\n        return creator(params);\n    };\n    ReactElementFactory.Instance = new ReactElementFactory();\n    return ReactElementFactory;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/react/element-header.tsx\":\n/*!**************************************!*\\\n  !*** ./src/react/element-header.tsx ***!\n  \\**************************************/\n/*! exports provided: SurveyElementHeader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_702296__) {\n\n\"use strict\";\n__nested_webpack_require_702296__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_702296__.d(__nested_webpack_exports__, \"SurveyElementHeader\", function() { return SurveyElementHeader; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_702296__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_702296__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_702296__(/*! ./components/action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\n/* harmony import */ var _components_title_title_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_702296__(/*! ./components/title/title-element */ \"./src/react/components/title/title-element.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_702296__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyElementHeader = /** @class */ (function (_super) {\n    __extends(SurveyElementHeader, _super);\n    function SurveyElementHeader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyElementHeader.prototype, \"element\", {\n        get: function () {\n            return this.props.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementHeader.prototype.render = function () {\n        var element = this.element;\n        var title = element.hasTitle ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_title_title_element__WEBPACK_IMPORTED_MODULE_2__[\"TitleElement\"], { element: element })) : null;\n        var description = element.hasDescriptionUnderTitle\n            ? _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyElementBase\"].renderQuestionDescription(this.element)\n            : null;\n        var additionalTitleToolbarElement = !!element.additionalTitleToolbar ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_1__[\"SurveyActionBar\"], { model: element.additionalTitleToolbar }) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: element.cssHeader, onClick: function (e) { return element.clickTitleFunction && element.clickTitleFunction(e.nativeEvent); } },\n            title,\n            description,\n            additionalTitleToolbarElement));\n    };\n    return SurveyElementHeader;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/element.tsx\":\n/*!*******************************!*\\\n  !*** ./src/react/element.tsx ***!\n  \\*******************************/\n/*! exports provided: SurveyRowElement */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_705984__) {\n\n\"use strict\";\n__nested_webpack_require_705984__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_705984__.d(__nested_webpack_exports__, \"SurveyRowElement\", function() { return SurveyRowElement; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_705984__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_705984__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_705984__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_705984__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyRowElement = /** @class */ (function (_super) {\n    __extends(SurveyRowElement, _super);\n    function SurveyRowElement(props) {\n        var _this = _super.call(this, props) || this;\n        _this.element.cssClasses;\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        return _this;\n    }\n    SurveyRowElement.prototype.getStateElement = function () {\n        return this.element;\n    };\n    Object.defineProperty(SurveyRowElement.prototype, \"element\", {\n        get: function () {\n            return this.props.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRowElement.prototype, \"index\", {\n        get: function () {\n            return this.props.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRowElement.prototype, \"row\", {\n        get: function () {\n            return this.props.row;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRowElement.prototype, \"survey\", {\n        get: function () {\n            return this.props.survey;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRowElement.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRowElement.prototype, \"css\", {\n        get: function () {\n            return this.props.css;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyRowElement.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        if (this.rootRef.current) {\n            (this.element).setWrapperElement(this.rootRef.current);\n        }\n    };\n    SurveyRowElement.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.element.setWrapperElement(undefined);\n    };\n    SurveyRowElement.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (!_super.prototype.shouldComponentUpdate.call(this, nextProps, nextState))\n            return false;\n        if (nextProps.element !== this.element) {\n            if (nextProps.element) {\n                nextProps.element.setWrapperElement(this.rootRef.current);\n            }\n            if (this.element) {\n                this.element.setWrapperElement(undefined);\n            }\n        }\n        this.element.cssClasses;\n        return true;\n    };\n    SurveyRowElement.prototype.renderElement = function () {\n        var element = this.element;\n        var innerElement = this.createElement(element, this.index);\n        var css = element.cssClassesValue;\n        var focusIn = function () {\n            var el = element;\n            if (el && el.isQuestion) {\n                el.focusIn();\n            }\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: css.questionWrapper, style: element.rootStyle, \"data-key\": innerElement.key, key: innerElement.key, onFocus: focusIn, ref: this.rootRef }, this.row.isNeedRender ? innerElement : _element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.createElement(element.skeletonComponentName, { element: element, css: this.css, })));\n    };\n    SurveyRowElement.prototype.createElement = function (element, elementIndex) {\n        var index = elementIndex ? \"-\" + elementIndex : 0;\n        var elementType = element.getType();\n        if (!_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.isElementRegistered(elementType)) {\n            elementType = \"question\";\n        }\n        return _element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.createElement(elementType, {\n            key: element.name + index,\n            element: element,\n            creator: this.creator,\n            survey: this.survey,\n            css: this.css,\n        });\n    };\n    return SurveyRowElement;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/flow-panel.tsx\":\n/*!**********************************!*\\\n  !*** ./src/react/flow-panel.tsx ***!\n  \\**********************************/\n/*! exports provided: SurveyFlowPanel */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_712004__) {\n\n\"use strict\";\n__nested_webpack_require_712004__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_712004__.d(__nested_webpack_exports__, \"SurveyFlowPanel\", function() { return SurveyFlowPanel; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_712004__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_712004__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_712004__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_712004__(/*! ./panel */ \"./src/react/panel.tsx\");\n/* harmony import */ var _reactquestion__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_712004__(/*! ./reactquestion */ \"./src/react/reactquestion.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyFlowPanel = /** @class */ (function (_super) {\n    __extends(SurveyFlowPanel, _super);\n    function SurveyFlowPanel(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyFlowPanel.prototype, \"flowPanel\", {\n        get: function () {\n            return this.panel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyFlowPanel.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        if (!!this.flowPanel) {\n            this.flowPanel.onCustomHtmlProducing = function () {\n                return \"\";\n            };\n            this.flowPanel.onGetHtmlForQuestion = this.renderQuestion;\n        }\n    };\n    SurveyFlowPanel.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (!!this.flowPanel) {\n            this.flowPanel.onCustomHtmlProducing = null;\n            this.flowPanel.onGetHtmlForQuestion = null;\n        }\n    };\n    SurveyFlowPanel.prototype.getQuestion = function (name) {\n        return this.flowPanel.getQuestionByName(name);\n    };\n    SurveyFlowPanel.prototype.renderQuestion = function (question) {\n        return \"<question>\" + question.name + \"</question>\";\n    };\n    SurveyFlowPanel.prototype.renderRows = function () {\n        var result = this.renderHtml();\n        if (!!result) {\n            return [result];\n        }\n        else {\n            return [];\n        }\n    };\n    SurveyFlowPanel.prototype.getNodeIndex = function () {\n        return this.renderedIndex++;\n    };\n    SurveyFlowPanel.prototype.renderHtml = function () {\n        if (!this.flowPanel)\n            return null;\n        var html = \"<span>\" + this.flowPanel.produceHtml() + \"</span>\";\n        if (!DOMParser) {\n            var htmlValue = { __html: html };\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { dangerouslySetInnerHTML: htmlValue });\n        }\n        var doc = new DOMParser().parseFromString(html, \"text/xml\");\n        this.renderedIndex = 0;\n        return this.renderParentNode(doc);\n    };\n    SurveyFlowPanel.prototype.renderNodes = function (domNodes) {\n        var nodes = [];\n        for (var i = 0; i < domNodes.length; i++) {\n            var node = this.renderNode(domNodes[i]);\n            if (!!node) {\n                nodes.push(node);\n            }\n        }\n        return nodes;\n    };\n    SurveyFlowPanel.prototype.getStyle = function (nodeType) {\n        var style = {};\n        if (nodeType.toLowerCase() === \"b\") {\n            style.fontWeight = \"bold\";\n        }\n        if (nodeType.toLowerCase() === \"i\") {\n            style.fontStyle = \"italic\";\n        }\n        if (nodeType.toLowerCase() === \"u\") {\n            style.textDecoration = \"underline\";\n        }\n        return style;\n    };\n    SurveyFlowPanel.prototype.renderParentNode = function (node) {\n        var nodeType = node.nodeName.toLowerCase();\n        var children = this.renderNodes(this.getChildDomNodes(node));\n        if (nodeType === \"div\")\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { key: this.getNodeIndex() }, children);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { key: this.getNodeIndex(), style: this.getStyle(nodeType) }, children));\n    };\n    SurveyFlowPanel.prototype.renderNode = function (node) {\n        if (!this.hasTextChildNodesOnly(node)) {\n            return this.renderParentNode(node);\n        }\n        var nodeType = node.nodeName.toLowerCase();\n        if (nodeType === \"question\") {\n            var question = this.flowPanel.getQuestionByName(node.textContent);\n            if (!question)\n                return null;\n            var questionBody = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestion\"], { key: question.name, element: question, creator: this.creator, css: this.css }));\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { key: this.getNodeIndex() }, questionBody);\n        }\n        if (nodeType === \"div\") {\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { key: this.getNodeIndex() }, node.textContent);\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { key: this.getNodeIndex(), style: this.getStyle(nodeType) }, node.textContent));\n    };\n    SurveyFlowPanel.prototype.getChildDomNodes = function (node) {\n        var domNodes = [];\n        for (var i = 0; i < node.childNodes.length; i++) {\n            domNodes.push(node.childNodes[i]);\n        }\n        return domNodes;\n    };\n    SurveyFlowPanel.prototype.hasTextChildNodesOnly = function (node) {\n        var nodes = node.childNodes;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].nodeName.toLowerCase() !== \"#text\")\n                return false;\n        }\n        return true;\n    };\n    SurveyFlowPanel.prototype.renderContent = function (style, rows) {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"f-panel\", { style: style }, rows);\n    };\n    return SurveyFlowPanel;\n}(_panel__WEBPACK_IMPORTED_MODULE_2__[\"SurveyPanel\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.registerElement(\"flowpanel\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyFlowPanel, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/image.tsx\":\n/*!*****************************!*\\\n  !*** ./src/react/image.tsx ***!\n  \\*****************************/\n/*! exports provided: SurveyQuestionImage */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_719367__) {\n\n\"use strict\";\n__nested_webpack_require_719367__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_719367__.d(__nested_webpack_exports__, \"SurveyQuestionImage\", function() { return SurveyQuestionImage; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_719367__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_719367__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_719367__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_719367__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_719367__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionImage = /** @class */ (function (_super) {\n    __extends(SurveyQuestionImage, _super);\n    function SurveyQuestionImage(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionImage.prototype.componentDidMount = function () {\n        var _this = this;\n        _super.prototype.componentDidMount.call(this);\n        this.question.locImageLink.onChanged = function () {\n            _this.forceUpdate();\n        };\n    };\n    SurveyQuestionImage.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.question.locImageLink.onChanged = function () { };\n    };\n    Object.defineProperty(SurveyQuestionImage.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionImage.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.getImageCss();\n        var style = { objectFit: this.question.imageFit, width: this.question.renderedStyleWidth, height: this.question.renderedStyleHeight };\n        if (!this.question.imageLink || this.question.contentNotLoaded) {\n            style[\"display\"] = \"none\";\n        }\n        var control = null;\n        if (this.question.renderedMode === \"image\") {\n            control = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"img\", { className: cssClasses, src: this.question.locImageLink.renderedHtml, alt: this.question.altText || this.question.title, width: this.question.renderedWidth, height: this.question.renderedHeight, \n                //alt={item.text || item.value}\n                style: style, onLoad: function (event) { _this.question.onLoadHandler(); }, onError: function (event) { _this.question.onErrorHandler(); } }));\n        }\n        if (this.question.renderedMode === \"video\") {\n            control = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"video\", { controls: true, className: cssClasses, src: this.question.locImageLink.renderedHtml, width: this.question.renderedWidth, height: this.question.renderedHeight, style: style, onLoadedMetadata: function (event) { _this.question.onLoadHandler(); }, onError: function (event) { _this.question.onErrorHandler(); } }));\n        }\n        if (this.question.renderedMode === \"youtube\") {\n            control = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"iframe\", { className: cssClasses, src: this.question.locImageLink.renderedHtml, width: this.question.renderedWidth, height: this.question.renderedHeight, style: style }));\n        }\n        var noImage = null;\n        if (!this.question.imageLink || this.question.contentNotLoaded) {\n            noImage = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.noImage },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { iconName: this.question.cssClasses.noImageSvgIconId, size: 48 })));\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.root },\n            control,\n            noImage);\n    };\n    return SurveyQuestionImage;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"image\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionImage, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/imagepicker.tsx\":\n/*!***********************************!*\\\n  !*** ./src/react/imagepicker.tsx ***!\n  \\***********************************/\n/*! exports provided: SurveyQuestionImagePicker, SurveyQuestionImagePickerItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_725056__) {\n\n\"use strict\";\n__nested_webpack_require_725056__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_725056__.d(__nested_webpack_exports__, \"SurveyQuestionImagePicker\", function() { return SurveyQuestionImagePicker; });\n/* harmony export (binding) */ __nested_webpack_require_725056__.d(__nested_webpack_exports__, \"SurveyQuestionImagePickerItem\", function() { return SurveyQuestionImagePickerItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_725056__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_725056__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_725056__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_725056__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_725056__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_725056__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionImagePicker = /** @class */ (function (_super) {\n    __extends(SurveyQuestionImagePicker, _super);\n    function SurveyQuestionImagePicker(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionImagePicker.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionImagePicker.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"fieldset\", { className: this.question.getSelectBaseRootCss() },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"legend\", { className: \"sv-hidden\" }, this.question.locTitle.renderedHtml),\n            this.question.hasColumns ? this.getColumns(cssClasses) : this.getItems(cssClasses)));\n    };\n    SurveyQuestionImagePicker.prototype.getColumns = function (cssClasses) {\n        var _this = this;\n        return this.question.columns.map(function (column, ci) {\n            var items = column.map(function (item, ii) {\n                return _this.renderItem(\"item\" + ii, item, cssClasses);\n            });\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { key: \"column\" + ci, className: _this.question.getColumnClass(), role: \"presentation\" }, items));\n        });\n    };\n    SurveyQuestionImagePicker.prototype.getItems = function (cssClasses) {\n        var items = [];\n        for (var i = 0; i < this.question.visibleChoices.length; i++) {\n            var item = this.question.visibleChoices[i];\n            var key = \"item\" + i;\n            items.push(this.renderItem(key, item, cssClasses));\n        }\n        return items;\n    };\n    Object.defineProperty(SurveyQuestionImagePicker.prototype, \"textStyle\", {\n        get: function () {\n            return { marginLeft: \"3px\", display: \"inline\", position: \"static\" };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionImagePicker.prototype.renderItem = function (key, item, cssClasses) {\n        var renderedItem = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionImagePickerItem, { key: key, question: this.question, item: item, cssClasses: cssClasses });\n        var survey = this.question.survey;\n        var wrappedItem = null;\n        if (!!survey) {\n            wrappedItem = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__[\"ReactSurveyElementsWrapper\"].wrapItemValue(survey, renderedItem, this.question, item);\n        }\n        return wrappedItem !== null && wrappedItem !== void 0 ? wrappedItem : renderedItem;\n    };\n    return SurveyQuestionImagePicker;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyQuestionImagePickerItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionImagePickerItem, _super);\n    function SurveyQuestionImagePickerItem(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnChange = _this.handleOnChange.bind(_this);\n        return _this;\n    }\n    SurveyQuestionImagePickerItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    SurveyQuestionImagePickerItem.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.reactOnStrChanged();\n    };\n    SurveyQuestionImagePickerItem.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.item.locImageLink.onChanged = function () { };\n    };\n    SurveyQuestionImagePickerItem.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.reactOnStrChanged();\n    };\n    SurveyQuestionImagePickerItem.prototype.reactOnStrChanged = function () {\n        var _this = this;\n        this.item.locImageLink.onChanged = function () {\n            _this.setState({ locImageLinkchanged: !!_this.state && _this.state.locImageLink ? _this.state.locImageLink + 1 : 1 });\n        };\n    };\n    Object.defineProperty(SurveyQuestionImagePickerItem.prototype, \"cssClasses\", {\n        get: function () {\n            return this.props.cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionImagePickerItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionImagePickerItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionImagePickerItem.prototype.handleOnChange = function (event) {\n        if (this.question.multiSelect) {\n            if (event.target.checked) {\n                this.question.value = this.question.value.concat(event.target.value);\n            }\n            else {\n                var currValue = this.question.value;\n                currValue.splice(this.question.value.indexOf(event.target.value), 1);\n                this.question.value = currValue;\n            }\n        }\n        else {\n            this.question.value = event.target.value;\n        }\n        this.setState({ value: this.question.value });\n    };\n    SurveyQuestionImagePickerItem.prototype.renderElement = function () {\n        var _this = this;\n        var item = this.item;\n        var question = this.question;\n        var cssClasses = this.cssClasses;\n        var isChecked = question.isItemSelected(item);\n        var itemClass = question.getItemClass(item);\n        var text = null;\n        if (question.showLabel) {\n            text = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: question.cssClasses.itemText }, item.text ? _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"].renderLocString(item.locText) : item.value));\n        }\n        var style = { objectFit: this.question.imageFit };\n        var control = null;\n        if (item.locImageLink.renderedHtml && this.question.contentMode === \"image\") {\n            control = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"img\", { className: cssClasses.image, src: item.locImageLink.renderedHtml, width: this.question.renderedImageWidth, height: this.question.renderedImageHeight, alt: item.locText.renderedHtml, style: style, onLoad: function (event) { _this.question[\"onContentLoaded\"](item, event.nativeEvent); }, onError: function (event) { item.onErrorHandler(item, event.nativeEvent); } }));\n        }\n        if (item.locImageLink.renderedHtml && this.question.contentMode === \"video\") {\n            control = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"video\", { controls: true, className: cssClasses.image, src: item.locImageLink.renderedHtml, width: this.question.renderedImageWidth, height: this.question.renderedImageHeight, style: style, onLoadedMetadata: function (event) { _this.question[\"onContentLoaded\"](item, event.nativeEvent); }, onError: function (event) { item.onErrorHandler(item, event.nativeEvent); } }));\n        }\n        if (!item.locImageLink.renderedHtml || item.contentNotLoaded) {\n            var style_1 = {\n                width: this.question.renderedImageWidth,\n                height: this.question.renderedImageHeight,\n                objectFit: this.question.imageFit\n            };\n            control = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.itemNoImage, style: style_1 }, cssClasses.itemNoImageSvgIcon ?\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__[\"SvgIcon\"], { className: cssClasses.itemNoImageSvgIcon, iconName: this.question.cssClasses.itemNoImageSvgIconId, size: 48 }) :\n                null));\n        }\n        var renderedItem = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: itemClass },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { className: cssClasses.label },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { className: cssClasses.itemControl, id: this.question.getItemId(item), type: this.question.inputType, name: this.question.questionName, checked: isChecked, value: item.value, disabled: !this.question.getItemEnabled(item), onChange: this.handleOnChange, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.itemDecorator },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.imageContainer },\n                        !!this.question.cssClasses.checkedItemDecorator ?\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.cssClasses.checkedItemDecorator }, !!this.question.cssClasses.checkedItemSvgIconId ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_4__[\"SvgIcon\"], { size: \"auto\", className: this.question.cssClasses.checkedItemSvgIcon, iconName: this.question.cssClasses.checkedItemSvgIconId }) : null) : null,\n                        control),\n                    text))));\n        return renderedItem;\n    };\n    return SurveyQuestionImagePickerItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"imagepicker\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionImagePicker, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/page.tsx\":\n/*!****************************!*\\\n  !*** ./src/react/page.tsx ***!\n  \\****************************/\n/*! exports provided: SurveyPage */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_737428__) {\n\n\"use strict\";\n__nested_webpack_require_737428__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_737428__.d(__nested_webpack_exports__, \"SurveyPage\", function() { return SurveyPage; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_737428__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_737428__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_737428__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _panel_base__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_737428__(/*! ./panel-base */ \"./src/react/panel-base.tsx\");\n/* harmony import */ var _components_title_title_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_737428__(/*! ./components/title/title-element */ \"./src/react/components/title/title-element.tsx\");\n/* harmony import */ var _reactquestion__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_737428__(/*! ./reactquestion */ \"./src/react/reactquestion.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyPage = /** @class */ (function (_super) {\n    __extends(SurveyPage, _super);\n    function SurveyPage(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyPage.prototype.getPanelBase = function () {\n        return this.props.page;\n    };\n    Object.defineProperty(SurveyPage.prototype, \"page\", {\n        get: function () {\n            return this.panelBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // shouldComponentUpdate(nextProps: any, nextState: any): boolean {\n    //   if(!super.shouldComponentUpdate(nextProps, nextState)) return false;\n    //   return true;\n    // }\n    SurveyPage.prototype.renderElement = function () {\n        var title = this.renderTitle();\n        var description = this.renderDescription();\n        var rows = this.renderRows(this.panelBase.cssClasses);\n        var errors = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion__WEBPACK_IMPORTED_MODULE_4__[\"SurveyElementErrors\"], { element: this.panelBase, cssClasses: this.panelBase.cssClasses, creator: this.creator }));\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { ref: this.rootRef, className: this.page.cssRoot },\n            title,\n            description,\n            errors,\n            rows));\n    };\n    SurveyPage.prototype.renderTitle = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_title_title_element__WEBPACK_IMPORTED_MODULE_3__[\"TitleElement\"], { element: this.page });\n    };\n    SurveyPage.prototype.renderDescription = function () {\n        if (!this.page._showDescription)\n            return null;\n        var text = _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"].renderLocString(this.page.locDescription);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.panelBase.cssClasses.page.description }, text));\n    };\n    return SurveyPage;\n}(_panel_base__WEBPACK_IMPORTED_MODULE_2__[\"SurveyPanelBase\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/panel-base.tsx\":\n/*!**********************************!*\\\n  !*** ./src/react/panel-base.tsx ***!\n  \\**********************************/\n/*! exports provided: SurveyPanelBase */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_741605__) {\n\n\"use strict\";\n__nested_webpack_require_741605__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_741605__.d(__nested_webpack_exports__, \"SurveyPanelBase\", function() { return SurveyPanelBase; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_741605__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_741605__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_741605__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _row__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_741605__(/*! ./row */ \"./src/react/row.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyPanelBase = /** @class */ (function (_super) {\n    __extends(SurveyPanelBase, _super);\n    function SurveyPanelBase(props) {\n        var _this = _super.call(this, props) || this;\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        return _this;\n    }\n    SurveyPanelBase.prototype.getStateElement = function () {\n        return this.panelBase;\n    };\n    SurveyPanelBase.prototype.canUsePropInState = function (key) {\n        return key !== \"elements\" && _super.prototype.canUsePropInState.call(this, key);\n    };\n    Object.defineProperty(SurveyPanelBase.prototype, \"survey\", {\n        get: function () {\n            return this.getSurvey();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyPanelBase.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyPanelBase.prototype, \"css\", {\n        get: function () {\n            return this.getCss();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyPanelBase.prototype, \"panelBase\", {\n        get: function () {\n            return this.getPanelBase();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyPanelBase.prototype.getPanelBase = function () {\n        return this.props.element || this.props.question;\n    };\n    SurveyPanelBase.prototype.getSurvey = function () {\n        return (this.props.survey || (!!this.panelBase ? this.panelBase.survey : null));\n    };\n    SurveyPanelBase.prototype.getCss = function () {\n        return this.props.css;\n    };\n    SurveyPanelBase.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.doAfterRender();\n    };\n    SurveyPanelBase.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        var el = this.rootRef.current;\n        if (!!el) {\n            el.removeAttribute(\"data-rendered\");\n        }\n    };\n    SurveyPanelBase.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        if (!!prevProps.page &&\n            !!this.survey &&\n            !!this.survey.activePage &&\n            prevProps.page.id === this.survey.activePage.id)\n            return;\n        this.doAfterRender();\n    };\n    SurveyPanelBase.prototype.doAfterRender = function () {\n        var el = this.rootRef.current;\n        if (el && this.survey) {\n            if (this.panelBase.isPanel) {\n                this.survey.afterRenderPanel(this.panelBase, el);\n            }\n            else {\n                this.survey.afterRenderPage(el);\n            }\n        }\n    };\n    SurveyPanelBase.prototype.getIsVisible = function () {\n        return this.panelBase.isVisible;\n    };\n    SurveyPanelBase.prototype.canRender = function () {\n        return (_super.prototype.canRender.call(this) && !!this.survey && !!this.panelBase && !!this.panelBase.survey && this.getIsVisible());\n    };\n    SurveyPanelBase.prototype.renderRows = function (css) {\n        var _this = this;\n        return this.panelBase.visibleRows.map(function (row) { return _this.createRow(row, css); });\n    };\n    SurveyPanelBase.prototype.createRow = function (row, css) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_row__WEBPACK_IMPORTED_MODULE_2__[\"SurveyRow\"], { key: row.id, row: row, survey: this.survey, creator: this.creator, css: css }));\n    };\n    return SurveyPanelBase;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/panel.tsx\":\n/*!*****************************!*\\\n  !*** ./src/react/panel.tsx ***!\n  \\*****************************/\n/*! exports provided: SurveyPanel */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_747122__) {\n\n\"use strict\";\n__nested_webpack_require_747122__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_747122__.d(__nested_webpack_exports__, \"SurveyPanel\", function() { return SurveyPanel; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_747122__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_747122__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_747122__(/*! ./reactquestion */ \"./src/react/reactquestion.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_747122__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_747122__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _panel_base__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_747122__(/*! ./panel-base */ \"./src/react/panel-base.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_747122__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\n/* harmony import */ var _components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_747122__(/*! ./components/action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\n/* harmony import */ var _components_title_title_element__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_747122__(/*! ./components/title/title-element */ \"./src/react/components/title/title-element.tsx\");\n/* harmony import */ var _element_header__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_747122__(/*! ./element-header */ \"./src/react/element-header.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\nvar SurveyPanel = /** @class */ (function (_super) {\n    __extends(SurveyPanel, _super);\n    function SurveyPanel(props) {\n        var _this = _super.call(this, props) || this;\n        _this.hasBeenExpanded = false;\n        return _this;\n    }\n    Object.defineProperty(SurveyPanel.prototype, \"panel\", {\n        get: function () {\n            return this.panelBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyPanel.prototype.renderElement = function () {\n        var _this = this;\n        var header = this.renderHeader();\n        var errors = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementErrors\"], { element: this.panelBase, cssClasses: this.panelBase.cssClasses, creator: this.creator }));\n        var style = {\n            paddingLeft: this.panel.innerPaddingLeft,\n            display: this.panel.renderedIsExpanded ? undefined : \"none\",\n        };\n        var content = null;\n        if (this.panel.renderedIsExpanded) {\n            // this.hasBeenExpanded = true;\n            var rows = this.renderRows(this.panelBase.cssClasses);\n            var className = this.panelBase.cssClasses.panel.content;\n            content = this.renderContent(style, rows, className);\n        }\n        var focusIn = function () {\n            if (_this.panelBase)\n                _this.panelBase.focusIn();\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { ref: this.rootRef, className: this.panelBase.getContainerCss(), onFocus: focusIn, id: this.panelBase.id },\n            this.panel.showErrorsAbovePanel ? errors : null,\n            header,\n            this.panel.showErrorsAbovePanel ? null : errors,\n            content));\n    };\n    SurveyPanel.prototype.renderHeader = function () {\n        if (!this.panel.hasTitle && !this.panel.hasDescription) {\n            return null;\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_element_header__WEBPACK_IMPORTED_MODULE_8__[\"SurveyElementHeader\"], { element: this.panel });\n    };\n    SurveyPanel.prototype.wrapElement = function (element) {\n        var survey = this.panel.survey;\n        var wrapper = null;\n        if (survey) {\n            wrapper = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_5__[\"ReactSurveyElementsWrapper\"].wrapElement(survey, element, this.panel);\n        }\n        return wrapper !== null && wrapper !== void 0 ? wrapper : element;\n    };\n    SurveyPanel.prototype.renderContent = function (style, rows, className) {\n        var bottom = this.renderBottom();\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { style: style, className: className, id: this.panel.contentId },\n            rows,\n            bottom));\n    };\n    SurveyPanel.prototype.renderTitle = function () {\n        if (!this.panelBase.title)\n            return null;\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_title_title_element__WEBPACK_IMPORTED_MODULE_7__[\"TitleElement\"], { element: this.panelBase });\n    };\n    SurveyPanel.prototype.renderDescription = function () {\n        if (!this.panelBase.description)\n            return null;\n        var text = _reactquestion_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyElementBase\"].renderLocString(this.panelBase.locDescription);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.panel.cssClasses.panel.description }, text));\n    };\n    SurveyPanel.prototype.renderBottom = function () {\n        var footerToolbar = this.panel.getFooterToolbar();\n        if (!footerToolbar.hasActions)\n            return null;\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_6__[\"SurveyActionBar\"], { model: footerToolbar });\n    };\n    SurveyPanel.prototype.getIsVisible = function () {\n        return this.panelBase.getIsContentVisible();\n    };\n    return SurveyPanel;\n}(_panel_base__WEBPACK_IMPORTED_MODULE_4__[\"SurveyPanelBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"panel\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyPanel, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/progress.tsx\":\n/*!********************************!*\\\n  !*** ./src/react/progress.tsx ***!\n  \\********************************/\n/*! exports provided: SurveyProgress */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_754197__) {\n\n\"use strict\";\n__nested_webpack_require_754197__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_754197__.d(__nested_webpack_exports__, \"SurveyProgress\", function() { return SurveyProgress; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_754197__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_754197__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_754197__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_754197__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_754197__(/*! ./reactSurveyNavigationBase */ \"./src/react/reactSurveyNavigationBase.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_754197__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyProgress = /** @class */ (function (_super) {\n    __extends(SurveyProgress, _super);\n    function SurveyProgress(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyProgress.prototype, \"isTop\", {\n        get: function () {\n            return this.props.isTop;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyProgress.prototype, \"progress\", {\n        get: function () {\n            return this.survey.progressValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyProgress.prototype, \"progressText\", {\n        get: function () {\n            return this.survey.progressText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyProgress.prototype.render = function () {\n        var progressStyle = {\n            width: this.progress + \"%\",\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.survey.getProgressCssClasses(this.props.container) },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { style: progressStyle, className: this.css.progressBar, role: \"progressbar\", \"aria-valuemin\": 0, \"aria-valuemax\": 100, \"aria-label\": \"progress\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: survey_core__WEBPACK_IMPORTED_MODULE_1__[\"SurveyProgressModel\"].getProgressTextInBarCss(this.css) }, this.progressText)),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: survey_core__WEBPACK_IMPORTED_MODULE_1__[\"SurveyProgressModel\"].getProgressTextUnderBarCss(this.css) }, this.progressText)));\n    };\n    return SurveyProgress;\n}(_reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_2__[\"SurveyNavigationBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-progress-pages\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyProgress, props);\n});\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-progress-questions\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyProgress, props);\n});\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-progress-correctquestions\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyProgress, props);\n});\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-progress-requiredquestions\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyProgress, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/progressButtons.tsx\":\n/*!***************************************!*\\\n  !*** ./src/react/progressButtons.tsx ***!\n  \\***************************************/\n/*! exports provided: SurveyProgressButtons */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_759112__) {\n\n\"use strict\";\n__nested_webpack_require_759112__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_759112__.d(__nested_webpack_exports__, \"SurveyProgressButtons\", function() { return SurveyProgressButtons; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_759112__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_759112__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_759112__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_759112__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_759112__(/*! ./reactSurveyNavigationBase */ \"./src/react/reactSurveyNavigationBase.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_759112__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyProgressButtons = /** @class */ (function (_super) {\n    __extends(SurveyProgressButtons, _super);\n    function SurveyProgressButtons(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listContainerRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        return _this;\n    }\n    Object.defineProperty(SurveyProgressButtons.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyProgressButtons.prototype, \"container\", {\n        get: function () {\n            return this.props.container;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyProgressButtons.prototype.onResize = function (canShowItemTitles) {\n        this.setState({ canShowItemTitles: canShowItemTitles });\n        this.setState({ canShowHeader: !canShowItemTitles });\n    };\n    SurveyProgressButtons.prototype.onUpdateScroller = function (hasScroller) {\n        this.setState({ hasScroller: hasScroller });\n    };\n    SurveyProgressButtons.prototype.onUpdateSettings = function () {\n        this.setState({ canShowItemTitles: this.model.showItemTitles });\n        this.setState({ canShowFooter: !this.model.showItemTitles });\n    };\n    SurveyProgressButtons.prototype.render = function () {\n        var _this = this;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.model.getRootCss(this.props.container), style: { \"maxWidth\": this.model.progressWidth }, role: \"progressbar\", \"aria-valuemin\": 0, \"aria-valuemax\": 100, \"aria-label\": \"progress\" },\n            this.state.canShowHeader ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsHeader },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsPageTitle, title: this.model.headerText }, this.model.headerText)) : null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsContainer },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.model.getScrollButtonCss(this.state.hasScroller, true), role: \"button\", onClick: function () {\n                        return _this.clickScrollButton(_this.listContainerRef.current, true);\n                    } }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsListContainer, ref: this.listContainerRef },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"ul\", { className: this.css.progressButtonsList }, this.getListElements())),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.model.getScrollButtonCss(this.state.hasScroller, false), role: \"button\", onClick: function () {\n                        return _this.clickScrollButton(_this.listContainerRef.current, false);\n                    } })),\n            this.state.canShowFooter ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsFooter },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsPageTitle, title: this.model.footerText }, this.model.footerText)) : null));\n    };\n    SurveyProgressButtons.prototype.getListElements = function () {\n        var _this = this;\n        var buttons = [];\n        this.survey.visiblePages.forEach(function (page, index) {\n            buttons.push(_this.renderListElement(page, index));\n        });\n        return buttons;\n    };\n    SurveyProgressButtons.prototype.renderListElement = function (page, index) {\n        var _this = this;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"li\", { key: \"listelement\" + index, className: this.model.getListElementCss(index), onClick: this.model.isListElementClickable(index)\n                ? function () { return _this.model.clickListElement(page); }\n                : undefined, \"data-page-number\": this.model.getItemNumber(page) },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsConnector }),\n            this.state.canShowItemTitles ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsPageTitle, title: page.renderedNavigationTitle }, page.renderedNavigationTitle),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsPageDescription, title: page.navigationDescription }, page.navigationDescription)) : null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsButton },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsButtonBackground }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.progressButtonsButtonContent }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, this.model.getItemNumber(page)))));\n    };\n    SurveyProgressButtons.prototype.clickScrollButton = function (listContainerElement, isLeftScroll) {\n        if (!!listContainerElement) {\n            listContainerElement.scrollLeft += (isLeftScroll ? -1 : 1) * 70;\n        }\n    };\n    SurveyProgressButtons.prototype.componentDidMount = function () {\n        var _this = this;\n        _super.prototype.componentDidMount.call(this);\n        setTimeout(function () {\n            _this.respManager = new survey_core__WEBPACK_IMPORTED_MODULE_1__[\"ProgressButtonsResponsivityManager\"](_this.model, _this.listContainerRef.current, _this);\n        }, 10);\n    };\n    SurveyProgressButtons.prototype.componentWillUnmount = function () {\n        if (!!this.respManager) {\n            this.respManager.dispose();\n        }\n        _super.prototype.componentWillUnmount.call(this);\n    };\n    return SurveyProgressButtons;\n}(_reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_2__[\"SurveyNavigationBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-progress-buttons\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyProgressButtons, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/progressToc.tsx\":\n/*!***********************************!*\\\n  !*** ./src/react/progressToc.tsx ***!\n  \\***********************************/\n/*! exports provided: SurveyProgressToc */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_767750__) {\n\n\"use strict\";\n__nested_webpack_require_767750__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_767750__.d(__nested_webpack_exports__, \"SurveyProgressToc\", function() { return SurveyProgressToc; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_767750__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_767750__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_767750__(/*! ./reactSurveyNavigationBase */ \"./src/react/reactSurveyNavigationBase.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_767750__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _components_list_list__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_767750__(/*! ./components/list/list */ \"./src/react/components/list/list.tsx\");\n/* harmony import */ var _components_popup_popup__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_767750__(/*! ./components/popup/popup */ \"./src/react/components/popup/popup.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_767750__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar SurveyProgressToc = /** @class */ (function (_super) {\n    __extends(SurveyProgressToc, _super);\n    function SurveyProgressToc() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SurveyProgressToc.prototype.render = function () {\n        var tocModel = this.props.model;\n        var content;\n        if (tocModel.isMobile) {\n            content = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { onClick: tocModel.togglePopup },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_5__[\"SvgIcon\"], { iconName: tocModel.icon, size: 24 }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_popup_popup__WEBPACK_IMPORTED_MODULE_4__[\"Popup\"], { model: tocModel.popupModel }));\n        }\n        else {\n            content = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_list_list__WEBPACK_IMPORTED_MODULE_3__[\"List\"], { model: tocModel.listModel });\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: tocModel.containerCss }, content));\n    };\n    return SurveyProgressToc;\n}(_reactSurveyNavigationBase__WEBPACK_IMPORTED_MODULE_1__[\"SurveyNavigationBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"sv-navigation-toc\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyProgressToc, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/rating-dropdown.tsx\":\n/*!***************************************!*\\\n  !*** ./src/react/rating-dropdown.tsx ***!\n  \\***************************************/\n/*! exports provided: RatingDropdownItem, SurveyQuestionRatingDropdown */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_771679__) {\n\n\"use strict\";\n__nested_webpack_require_771679__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_771679__.d(__nested_webpack_exports__, \"SurveyQuestionRatingDropdown\", function() { return SurveyQuestionRatingDropdown; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_771679__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_771679__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_771679__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_771679__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _dropdown_base__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_771679__(/*! ./dropdown-base */ \"./src/react/dropdown-base.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_771679__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_rating_rating_dropdown_item__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_771679__(/*! ./components/rating/rating-dropdown-item */ \"./src/react/components/rating/rating-dropdown-item.tsx\");\n/* harmony reexport (safe) */ __nested_webpack_require_771679__.d(__nested_webpack_exports__, \"RatingDropdownItem\", function() { return _components_rating_rating_dropdown_item__WEBPACK_IMPORTED_MODULE_4__[\"RatingDropdownItem\"]; });\n\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionRatingDropdown = /** @class */ (function (_super) {\n    __extends(SurveyQuestionRatingDropdown, _super);\n    function SurveyQuestionRatingDropdown(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionRatingDropdown.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        var select = this.renderSelect(cssClasses);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.rootDropdown }, select));\n    };\n    return SurveyQuestionRatingDropdown;\n}(_dropdown_base__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionDropdownBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"sv-rating-dropdown\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionRatingDropdown, props);\n});\nsurvey_core__WEBPACK_IMPORTED_MODULE_1__[\"RendererFactory\"].Instance.registerRenderer(\"rating\", \"dropdown\", \"sv-rating-dropdown\");\n\n\n/***/ }),\n\n/***/ \"./src/react/react-popup-survey.tsx\":\n/*!******************************************!*\\\n  !*** ./src/react/react-popup-survey.tsx ***!\n  \\******************************************/\n/*! exports provided: PopupSurvey, SurveyWindow */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_775325__) {\n\n\"use strict\";\n__nested_webpack_require_775325__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_775325__.d(__nested_webpack_exports__, \"PopupSurvey\", function() { return PopupSurvey; });\n/* harmony export (binding) */ __nested_webpack_require_775325__.d(__nested_webpack_exports__, \"SurveyWindow\", function() { return SurveyWindow; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_775325__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_775325__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_775325__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_775325__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _reactSurvey__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_775325__(/*! ./reactSurvey */ \"./src/react/reactSurvey.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_775325__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PopupSurvey = /** @class */ (function (_super) {\n    __extends(PopupSurvey, _super);\n    function PopupSurvey(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnExpanded = _this.handleOnExpanded.bind(_this);\n        return _this;\n    }\n    PopupSurvey.prototype.getStateElements = function () {\n        return [this.popup, this.popup.survey];\n    };\n    PopupSurvey.prototype.handleOnExpanded = function (event) {\n        this.popup.changeExpandCollapse();\n    };\n    PopupSurvey.prototype.canRender = function () {\n        return _super.prototype.canRender.call(this) && this.popup.isShowing;\n    };\n    PopupSurvey.prototype.renderElement = function () {\n        var _this = this;\n        var header = this.renderWindowHeader();\n        var body = this.renderBody();\n        var style = {};\n        if (!!this.popup.renderedWidth) {\n            style.width = this.popup.renderedWidth;\n            style.maxWidth = this.popup.renderedWidth;\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.popup.cssRoot, style: style, onScroll: function () { return _this.popup.onScroll(); } },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.popup.cssRootContent },\n                header,\n                body)));\n    };\n    PopupSurvey.prototype.renderWindowHeader = function () {\n        var popup = this.popup;\n        var headerCss = popup.cssHeaderRoot;\n        var titleCollapsed = null;\n        var expandCollapseIcon;\n        var closeButton = null;\n        var allowFullScreenButon = null;\n        if (popup.isCollapsed) {\n            headerCss += \" \" + popup.cssRootCollapsedMod;\n            titleCollapsed = this.renderTitleCollapsed(popup);\n            expandCollapseIcon = this.renderExpandIcon();\n        }\n        else {\n            expandCollapseIcon = this.renderCollapseIcon();\n        }\n        if (popup.allowClose) {\n            closeButton = this.renderCloseButton(this.popup);\n        }\n        if (popup.allowFullScreen) {\n            allowFullScreenButon = this.renderAllowFullScreenButon(this.popup);\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: popup.cssHeaderRoot },\n            titleCollapsed,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: popup.cssHeaderButtonsContainer },\n                allowFullScreenButon,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: popup.cssHeaderCollapseButton, onClick: this.handleOnExpanded }, expandCollapseIcon),\n                closeButton)));\n    };\n    PopupSurvey.prototype.renderTitleCollapsed = function (popup) {\n        if (!popup.locTitle)\n            return null;\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: popup.cssHeaderTitleCollapsed }, popup.locTitle.renderedHtml);\n    };\n    PopupSurvey.prototype.renderExpandIcon = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { iconName: \"icon-restore_16x16\", size: 16 });\n    };\n    PopupSurvey.prototype.renderCollapseIcon = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { iconName: \"icon-minimize_16x16\", size: 16 });\n    };\n    PopupSurvey.prototype.renderCloseButton = function (popup) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: popup.cssHeaderCloseButton, onClick: function () { popup.hide(); } },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { iconName: \"icon-close_16x16\", size: 16 })));\n    };\n    PopupSurvey.prototype.renderAllowFullScreenButon = function (popup) {\n        var Icon;\n        if (popup.isFullScreen) {\n            Icon = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { iconName: \"icon-back-to-panel_16x16\", size: 16 });\n        }\n        else {\n            Icon = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { iconName: \"icon-full-screen_16x16\", size: 16 });\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: popup.cssHeaderFullScreenButton, onClick: function () { popup.toggleFullScreen(); } }, Icon));\n    };\n    PopupSurvey.prototype.renderBody = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.popup.cssBody }, this.doRender());\n    };\n    PopupSurvey.prototype.createSurvey = function (newProps) {\n        if (!newProps)\n            newProps = {};\n        _super.prototype.createSurvey.call(this, newProps);\n        this.popup = new survey_core__WEBPACK_IMPORTED_MODULE_1__[\"PopupSurveyModel\"](null, this.survey);\n        if (newProps.closeOnCompleteTimeout) {\n            this.popup.closeOnCompleteTimeout = newProps.closeOnCompleteTimeout;\n        }\n        this.popup.allowClose = newProps.allowClose;\n        this.popup.allowFullScreen = newProps.allowFullScreen;\n        this.popup.isShowing = true;\n        if (!this.popup.isExpanded && (newProps.expanded || newProps.isExpanded))\n            this.popup.expand();\n    };\n    return PopupSurvey;\n}(_reactSurvey__WEBPACK_IMPORTED_MODULE_2__[\"Survey\"]));\n\n/**\n * Obsolete. Please use PopupSurvey\n */\nvar SurveyWindow = /** @class */ (function (_super) {\n    __extends(SurveyWindow, _super);\n    function SurveyWindow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SurveyWindow;\n}(PopupSurvey));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/reactSurvey.tsx\":\n/*!***********************************!*\\\n  !*** ./src/react/reactSurvey.tsx ***!\n  \\***********************************/\n/*! exports provided: Survey, attachKey2click */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_783412__) {\n\n\"use strict\";\n__nested_webpack_require_783412__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_783412__.d(__nested_webpack_exports__, \"Survey\", function() { return Survey; });\n/* harmony export (binding) */ __nested_webpack_require_783412__.d(__nested_webpack_exports__, \"attachKey2click\", function() { return attachKey2click; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_783412__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_783412__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_783412__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_783412__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_783412__(/*! ./page */ \"./src/react/page.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_783412__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _string_viewer__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_783412__(/*! ./string-viewer */ \"./src/react/string-viewer.tsx\");\n/* harmony import */ var _components_survey_header_survey_header__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_783412__(/*! ./components/survey-header/survey-header */ \"./src/react/components/survey-header/survey-header.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_783412__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_783412__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _components_brand_info__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_783412__(/*! ./components/brand-info */ \"./src/react/components/brand-info.tsx\");\n/* harmony import */ var _components_notifier__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_783412__(/*! ./components/notifier */ \"./src/react/components/notifier.tsx\");\n/* harmony import */ var _components_components_container__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_783412__(/*! ./components/components-container */ \"./src/react/components/components-container.tsx\");\n/* harmony import */ var _svgbundle__WEBPACK_IMPORTED_MODULE_11__ = __nested_webpack_require_783412__(/*! ./svgbundle */ \"./src/react/svgbundle.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = ( false) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n\n\n\n\n\n\n\n\n\n\nvar Survey = /** @class */ (function (_super) {\n    __extends(Survey, _super);\n    function Survey(props) {\n        var _this = _super.call(this, props) || this;\n        _this.previousJSON = {};\n        _this.isSurveyUpdated = false;\n        _this.createSurvey(props);\n        _this.updateSurvey(props, {});\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        _this.rootNodeId = props.id || null;\n        _this.rootNodeClassName = props.className || \"\";\n        return _this;\n    }\n    Object.defineProperty(Survey, \"cssType\", {\n        get: function () {\n            return survey_core__WEBPACK_IMPORTED_MODULE_1__[\"surveyCss\"].currentType;\n        },\n        set: function (value) {\n            survey_core__WEBPACK_IMPORTED_MODULE_1__[\"StylesManager\"].applyTheme(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Survey.prototype.getStateElement = function () {\n        return this.survey;\n    };\n    Survey.prototype.onSurveyUpdated = function () {\n        if (!!this.survey) {\n            var el = this.rootRef.current;\n            if (!!el)\n                this.survey.afterRenderSurvey(el);\n            this.survey.startTimerFromUI();\n        }\n    };\n    Survey.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (!_super.prototype.shouldComponentUpdate.call(this, nextProps, nextState))\n            return false;\n        if (this.isModelJSONChanged(nextProps)) {\n            this.destroySurvey();\n            this.createSurvey(nextProps);\n            this.updateSurvey(nextProps, {});\n            this.isSurveyUpdated = true;\n        }\n        return true;\n    };\n    Survey.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.updateSurvey(this.props, prevProps);\n        if (this.isSurveyUpdated) {\n            this.onSurveyUpdated();\n            this.isSurveyUpdated = false;\n        }\n    };\n    Survey.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.onSurveyUpdated();\n    };\n    Survey.prototype.destroySurvey = function () {\n        if (this.survey) {\n            this.survey.renderCallback = undefined;\n            this.survey.onPartialSend.clear();\n            this.survey.stopTimer();\n            this.survey.destroyResizeObserver();\n        }\n    };\n    Survey.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.destroySurvey();\n    };\n    Survey.prototype.doRender = function () {\n        var renderResult;\n        if (this.survey.state == \"completed\") {\n            renderResult = this.renderCompleted();\n        }\n        else if (this.survey.state == \"completedbefore\") {\n            renderResult = this.renderCompletedBefore();\n        }\n        else if (this.survey.state == \"loading\") {\n            renderResult = this.renderLoading();\n        }\n        else if (this.survey.state == \"empty\") {\n            renderResult = this.renderEmptySurvey();\n        }\n        else {\n            renderResult = this.renderSurvey();\n        }\n        var backgroundImage = !!this.survey.backgroundImage ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.rootBackgroundImage, style: this.survey.backgroundImageStyle }) : null;\n        var header = this.survey.headerView === \"basic\" ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_survey_header_survey_header__WEBPACK_IMPORTED_MODULE_5__[\"SurveyHeader\"], { survey: this.survey }) : null;\n        var onSubmit = function (event) {\n            event.preventDefault();\n        };\n        var customHeader = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"sv_custom_header\" });\n        if (this.survey.hasLogo) {\n            customHeader = null;\n        }\n        var rootCss = this.survey.getRootCss();\n        var cssClasses = this.rootNodeClassName ? this.rootNodeClassName + \" \" + rootCss : rootCss;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: this.rootNodeId, ref: this.rootRef, className: cssClasses, style: this.survey.themeVariables },\n            this.survey.needRenderIcons ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_svgbundle__WEBPACK_IMPORTED_MODULE_11__[\"SvgBundleComponent\"], null) : null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.survey.wrapperFormCss },\n                backgroundImage,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"form\", { onSubmit: onSubmit },\n                    customHeader,\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.container },\n                        header,\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"header\", needRenderWrapper: false }),\n                        renderResult,\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"footer\", needRenderWrapper: false }))),\n                this.survey.showBrandInfo ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_brand_info__WEBPACK_IMPORTED_MODULE_8__[\"BrandInfo\"], null) : null,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_notifier__WEBPACK_IMPORTED_MODULE_9__[\"NotifierComponent\"], { notifier: this.survey.notifier }))));\n    };\n    Survey.prototype.renderElement = function () {\n        return this.doRender();\n    };\n    Object.defineProperty(Survey.prototype, \"css\", {\n        get: function () {\n            return this.survey.css;\n        },\n        set: function (value) {\n            this.survey.css = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Survey.prototype.renderCompleted = function () {\n        if (!this.survey.showCompletedPage)\n            return null;\n        var htmlValue = { __html: this.survey.processedCompletedHtml };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { dangerouslySetInnerHTML: htmlValue, className: this.survey.completedCss }),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"completePage\", needRenderWrapper: false })));\n    };\n    Survey.prototype.renderCompletedBefore = function () {\n        var htmlValue = { __html: this.survey.processedCompletedBeforeHtml };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { dangerouslySetInnerHTML: htmlValue, className: this.survey.completedBeforeCss }));\n    };\n    Survey.prototype.renderLoading = function () {\n        var htmlValue = { __html: this.survey.processedLoadingHtml };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { dangerouslySetInnerHTML: htmlValue, className: this.survey.loadingBodyCss }));\n    };\n    Survey.prototype.renderSurvey = function () {\n        var activePage = this.survey.activePage\n            ? this.renderPage(this.survey.activePage)\n            : null;\n        var isStaring = this.survey.isShowStartingPage;\n        var pageId = this.survey.activePage ? this.survey.activePage.id : \"\";\n        var className = this.survey.bodyCss;\n        var style = {};\n        if (!!this.survey.renderedWidth) {\n            style.maxWidth = this.survey.renderedWidth;\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.survey.bodyContainerCss },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"left\" }),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"sv-components-column sv-components-column--expandable\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"center\" }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: pageId, className: className, style: style },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"contentTop\" }),\n                    activePage,\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"contentBottom\" }))),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_components_container__WEBPACK_IMPORTED_MODULE_10__[\"ComponentsContainer\"], { survey: this.survey, container: \"right\" })));\n    };\n    Survey.prototype.renderPage = function (page) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_page__WEBPACK_IMPORTED_MODULE_2__[\"SurveyPage\"], { survey: this.survey, page: page, css: this.css, creator: this }));\n    };\n    Survey.prototype.renderEmptySurvey = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.css.bodyEmpty }, this.survey.emptySurveyText);\n    };\n    Survey.prototype.createSurvey = function (newProps) {\n        if (!newProps)\n            newProps = {};\n        this.previousJSON = {};\n        if (newProps) {\n            if (newProps.model) {\n                this.survey = newProps.model;\n            }\n            else {\n                if (newProps.json) {\n                    this.previousJSON = newProps.json;\n                    this.survey = new survey_core__WEBPACK_IMPORTED_MODULE_1__[\"SurveyModel\"](newProps.json);\n                }\n            }\n        }\n        else {\n            this.survey = new survey_core__WEBPACK_IMPORTED_MODULE_1__[\"SurveyModel\"]();\n        }\n        if (!!newProps.css) {\n            this.survey.css = this.css;\n        }\n        this.setSurveyEvents();\n    };\n    Survey.prototype.isModelJSONChanged = function (newProps) {\n        if (!!newProps[\"model\"]) {\n            return this.survey !== newProps[\"model\"];\n        }\n        if (!!newProps[\"json\"]) {\n            return !survey_core__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isTwoValueEquals(newProps[\"json\"], this.previousJSON);\n        }\n        return false;\n    };\n    Survey.prototype.updateSurvey = function (newProps, oldProps) {\n        if (!newProps)\n            return;\n        oldProps = oldProps || {};\n        for (var key in newProps) {\n            if (key == \"model\" || key == \"children\" || key == \"json\") {\n                continue;\n            }\n            if (key == \"css\") {\n                this.survey.mergeValues(newProps.css, this.survey.getCss());\n                this.survey[\"updateNavigationCss\"]();\n                this.survey[\"updateElementCss\"]();\n                continue;\n            }\n            if (newProps[key] === oldProps[key])\n                continue;\n            if (key.indexOf(\"on\") == 0 && this.survey[key] && this.survey[key].add) {\n                if (!!oldProps[key]) {\n                    this.survey[key].remove(oldProps[key]);\n                }\n                this.survey[key].add(newProps[key]);\n            }\n            else {\n                this.survey[key] = newProps[key];\n            }\n        }\n    };\n    Survey.prototype.setSurveyEvents = function () {\n        var self = this;\n        this.survey.renderCallback = function () {\n            var counter = !!self.state && !!self.state.modelChanged ? self.state.modelChanged : 0;\n            self.setState({ modelChanged: counter + 1 });\n        };\n        this.survey.onPartialSend.add(function (sender) {\n            if (!!self.state) {\n                self.setState(self.state);\n            }\n        });\n    };\n    //ISurveyCreator\n    Survey.prototype.createQuestionElement = function (question) {\n        return _reactquestion_factory__WEBPACK_IMPORTED_MODULE_6__[\"ReactQuestionFactory\"].Instance.createQuestion(question.isDefaultRendering() ? question.getTemplate() : question.getComponentName(), {\n            question: question,\n            isDisplayMode: question.isInputReadOnly,\n            creator: this,\n        });\n    };\n    Survey.prototype.renderError = function (key, error, cssClasses) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { key: key },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.error.icon || undefined, \"aria-hidden\": \"true\" }),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.error.item || undefined },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_string_viewer__WEBPACK_IMPORTED_MODULE_4__[\"SurveyLocStringViewer\"], { locStr: error.locText }))));\n    };\n    Survey.prototype.questionTitleLocation = function () {\n        return this.survey.questionTitleLocation;\n    };\n    Survey.prototype.questionErrorLocation = function () {\n        return this.survey.questionErrorLocation;\n    };\n    return Survey;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_7__[\"ReactElementFactory\"].Instance.registerElement(\"survey\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](Survey, props);\n});\nfunction attachKey2click(element, viewModel, options) {\n    if (options === void 0) { options = { processEsc: true, disableTabStop: false }; }\n    if ((!!viewModel && viewModel.disableTabStop) || (!!options && options.disableTabStop)) {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"cloneElement\"](element, { tabIndex: -1 });\n    }\n    options = __assign({}, options);\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"cloneElement\"](element, {\n        tabIndex: 0,\n        onKeyUp: function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            Object(survey_core__WEBPACK_IMPORTED_MODULE_1__[\"doKey2ClickUp\"])(evt, options);\n            return false;\n        },\n        onKeyDown: function (evt) { return Object(survey_core__WEBPACK_IMPORTED_MODULE_1__[\"doKey2ClickDown\"])(evt, options); },\n        onBlur: function (evt) { return Object(survey_core__WEBPACK_IMPORTED_MODULE_1__[\"doKey2ClickBlur\"])(evt); }\n    });\n}\n\n\n/***/ }),\n\n/***/ \"./src/react/reactSurveyNavigationBase.tsx\":\n/*!*************************************************!*\\\n  !*** ./src/react/reactSurveyNavigationBase.tsx ***!\n  \\*************************************************/\n/*! exports provided: SurveyNavigationBase */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_802277__) {\n\n\"use strict\";\n__nested_webpack_require_802277__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_802277__.d(__nested_webpack_exports__, \"SurveyNavigationBase\", function() { return SurveyNavigationBase; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_802277__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_802277__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar SurveyNavigationBase = /** @class */ (function (_super) {\n    __extends(SurveyNavigationBase, _super);\n    function SurveyNavigationBase(props) {\n        var _this = _super.call(this, props) || this;\n        _this.updateStateFunction = null;\n        _this.state = { update: 0 };\n        return _this;\n    }\n    Object.defineProperty(SurveyNavigationBase.prototype, \"survey\", {\n        get: function () {\n            return this.props.survey;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyNavigationBase.prototype, \"css\", {\n        get: function () {\n            return this.props.css || this.survey.css;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyNavigationBase.prototype.componentDidMount = function () {\n        if (this.survey) {\n            var self = this;\n            this.updateStateFunction = function () {\n                self.setState({ update: self.state.update + 1 });\n            };\n            this.survey.onPageVisibleChanged.add(this.updateStateFunction);\n        }\n    };\n    SurveyNavigationBase.prototype.componentWillUnmount = function () {\n        if (this.survey && this.updateStateFunction) {\n            this.survey.onPageVisibleChanged.remove(this.updateStateFunction);\n            this.updateStateFunction = null;\n        }\n    };\n    return SurveyNavigationBase;\n}(react__WEBPACK_IMPORTED_MODULE_0__[\"Component\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/reactquestion.tsx ***!\n  \\*************************************/\n/*! exports provided: SurveyQuestion, SurveyElementErrors, SurveyQuestionAndErrorsWrapped, SurveyQuestionAndErrorsCell, SurveyQuestionErrorCell */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_805343__) {\n\n\"use strict\";\n__nested_webpack_require_805343__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_805343__.d(__nested_webpack_exports__, \"SurveyQuestion\", function() { return SurveyQuestion; });\n/* harmony export (binding) */ __nested_webpack_require_805343__.d(__nested_webpack_exports__, \"SurveyElementErrors\", function() { return SurveyElementErrors; });\n/* harmony export (binding) */ __nested_webpack_require_805343__.d(__nested_webpack_exports__, \"SurveyQuestionAndErrorsWrapped\", function() { return SurveyQuestionAndErrorsWrapped; });\n/* harmony export (binding) */ __nested_webpack_require_805343__.d(__nested_webpack_exports__, \"SurveyQuestionAndErrorsCell\", function() { return SurveyQuestionAndErrorsCell; });\n/* harmony export (binding) */ __nested_webpack_require_805343__.d(__nested_webpack_exports__, \"SurveyQuestionErrorCell\", function() { return SurveyQuestionErrorCell; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_805343__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_805343__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_805343__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_805343__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_805343__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_comment__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_805343__(/*! ./reactquestion_comment */ \"./src/react/reactquestion_comment.tsx\");\n/* harmony import */ var _custom_widget__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_805343__(/*! ./custom-widget */ \"./src/react/custom-widget.tsx\");\n/* harmony import */ var _element_header__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_805343__(/*! ./element-header */ \"./src/react/element-header.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar SurveyQuestion = /** @class */ (function (_super) {\n    __extends(SurveyQuestion, _super);\n    function SurveyQuestion(props) {\n        var _this = _super.call(this, props) || this;\n        _this.isNeedFocus = false;\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        return _this;\n    }\n    SurveyQuestion.renderQuestionBody = function (creator, question) {\n        // if (!question.isVisible) return null;\n        var customWidget = question.customWidget;\n        if (!customWidget) {\n            return creator.createQuestionElement(question);\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_custom_widget__WEBPACK_IMPORTED_MODULE_5__[\"SurveyCustomWidget\"], { creator: creator, question: question });\n    };\n    SurveyQuestion.prototype.getStateElement = function () {\n        return this.question;\n    };\n    Object.defineProperty(SurveyQuestion.prototype, \"question\", {\n        get: function () {\n            return this.props.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestion.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestion.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        if (!!this.question) {\n            this.question[\"react\"] = this;\n        }\n        this.doAfterRender();\n    };\n    SurveyQuestion.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (!!this.question) {\n            this.question[\"react\"] = null;\n        }\n        var el = this.rootRef.current;\n        if (!!el) {\n            el.removeAttribute(\"data-rendered\");\n        }\n    };\n    SurveyQuestion.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.doAfterRender();\n    };\n    SurveyQuestion.prototype.doAfterRender = function () {\n        if (this.isNeedFocus) {\n            if (!this.question.isCollapsed) {\n                this.question.clickTitleFunction();\n            }\n            this.isNeedFocus = false;\n        }\n        if (this.question) {\n            var el = this.rootRef.current;\n            if (el && el.getAttribute(\"data-rendered\") !== \"r\") {\n                el.setAttribute(\"data-rendered\", \"r\");\n                el.setAttribute(\"data-name\", this.question.name);\n                if (this.question.afterRender) {\n                    this.question.afterRender(el);\n                }\n            }\n        }\n    };\n    SurveyQuestion.prototype.canRender = function () {\n        return (_super.prototype.canRender.call(this) &&\n            !!this.question &&\n            !!this.creator);\n    };\n    SurveyQuestion.prototype.renderQuestionContent = function () {\n        var question = this.question;\n        var contentStyle = {\n            display: this.question.renderedIsExpanded ? \"\" : \"none\",\n        };\n        var cssClasses = question.cssClasses;\n        var questionRender = this.renderQuestion();\n        var errorsTop = this.question.showErrorOnTop\n            ? this.renderErrors(cssClasses, \"top\")\n            : null;\n        var errorsBottom = this.question.showErrorOnBottom\n            ? this.renderErrors(cssClasses, \"bottom\")\n            : null;\n        var comment = question && question.hasComment ? this.renderComment(cssClasses) : null;\n        var descriptionUnderInput = question.hasDescriptionUnderInput\n            ? this.renderDescription()\n            : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: question.cssContent || undefined, style: contentStyle, role: \"presentation\" },\n            errorsTop,\n            questionRender,\n            comment,\n            errorsBottom,\n            descriptionUnderInput));\n    };\n    SurveyQuestion.prototype.renderElement = function () {\n        var question = this.question;\n        var cssClasses = question.cssClasses;\n        var header = this.renderHeader(question);\n        var headerTop = question.hasTitleOnLeftTop ? header : null;\n        var headerBottom = question.hasTitleOnBottom ? header : null;\n        var errorsAboveQuestion = this.question.showErrorsAboveQuestion\n            ? this.renderErrors(cssClasses, \"\")\n            : null;\n        var errorsBelowQuestion = this.question.showErrorsBelowQuestion\n            ? this.renderErrors(cssClasses, \"\")\n            : null;\n        var rootStyle = question.getRootStyle();\n        var questionContent = this.wrapQuestionContent(this.renderQuestionContent());\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { ref: this.rootRef, id: question.id, className: question.getRootCss(), style: rootStyle, role: question.ariaRole, \"aria-required\": this.question.ariaRequired, \"aria-invalid\": this.question.ariaInvalid, \"aria-labelledby\": question.ariaLabelledBy, \"aria-describedby\": question.ariaDescribedBy, \"aria-expanded\": question.ariaExpanded === null ? undefined : question.ariaExpanded === \"true\" },\n                errorsAboveQuestion,\n                headerTop,\n                questionContent,\n                headerBottom,\n                errorsBelowQuestion)));\n    };\n    SurveyQuestion.prototype.wrapElement = function (element) {\n        var survey = this.question.survey;\n        var wrapper = null;\n        if (survey) {\n            wrapper = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElementsWrapper\"].wrapElement(survey, element, this.question);\n        }\n        return wrapper !== null && wrapper !== void 0 ? wrapper : element;\n    };\n    SurveyQuestion.prototype.wrapQuestionContent = function (element) {\n        var survey = this.question.survey;\n        var wrapper = null;\n        if (survey) {\n            wrapper = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElementsWrapper\"].wrapQuestionContent(survey, element, this.question);\n        }\n        return wrapper !== null && wrapper !== void 0 ? wrapper : element;\n    };\n    SurveyQuestion.prototype.renderQuestion = function () {\n        return SurveyQuestion.renderQuestionBody(this.creator, this.question);\n    };\n    SurveyQuestion.prototype.renderDescription = function () {\n        return _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyElementBase\"].renderQuestionDescription(this.question);\n    };\n    SurveyQuestion.prototype.renderComment = function (cssClasses) {\n        var commentText = _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyElementBase\"].renderLocString(this.question.locCommentText);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getCommentAreaCss() },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null, commentText),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion_comment__WEBPACK_IMPORTED_MODULE_4__[\"SurveyQuestionCommentItem\"], { question: this.question, cssClasses: cssClasses, otherCss: cssClasses.other, isDisplayMode: this.question.isInputReadOnly })));\n    };\n    SurveyQuestion.prototype.renderHeader = function (question) {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_element_header__WEBPACK_IMPORTED_MODULE_6__[\"SurveyElementHeader\"], { element: question });\n    };\n    SurveyQuestion.prototype.renderErrors = function (cssClasses, location) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyElementErrors, { element: this.question, cssClasses: cssClasses, creator: this.creator, location: location, id: this.question.id + \"_errors\" }));\n    };\n    return SurveyQuestion;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyElementBase\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"question\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestion, props);\n});\nvar SurveyElementErrors = /** @class */ (function (_super) {\n    __extends(SurveyElementErrors, _super);\n    function SurveyElementErrors(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = _this.getState();\n        return _this;\n    }\n    Object.defineProperty(SurveyElementErrors.prototype, \"id\", {\n        get: function () {\n            return this.props.element.id + \"_errors\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementErrors.prototype, \"element\", {\n        get: function () {\n            return this.props.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementErrors.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementErrors.prototype, \"location\", {\n        get: function () {\n            return this.props.location;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementErrors.prototype.getState = function (prevState) {\n        if (prevState === void 0) { prevState = null; }\n        return !prevState ? { error: 0 } : { error: prevState.error + 1 };\n    };\n    SurveyElementErrors.prototype.canRender = function () {\n        return !!this.element && this.element.hasVisibleErrors;\n    };\n    SurveyElementErrors.prototype.componentWillUnmount = function () {\n    };\n    SurveyElementErrors.prototype.renderElement = function () {\n        var errors = [];\n        for (var i = 0; i < this.element.errors.length; i++) {\n            var key = \"error\" + i;\n            errors.push(this.creator.renderError(key, this.element.errors[i], this.cssClasses));\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { role: \"alert\", \"aria-live\": \"polite\", className: this.element.cssError, id: this.id }, errors));\n    };\n    return SurveyElementErrors;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"ReactSurveyElement\"]));\n\nvar SurveyQuestionAndErrorsWrapped = /** @class */ (function (_super) {\n    __extends(SurveyQuestionAndErrorsWrapped, _super);\n    function SurveyQuestionAndErrorsWrapped(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionAndErrorsWrapped.prototype.getStateElement = function () {\n        return this.question;\n    };\n    Object.defineProperty(SurveyQuestionAndErrorsWrapped.prototype, \"question\", {\n        get: function () {\n            return this.getQuestion();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionAndErrorsWrapped.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionAndErrorsWrapped.prototype.getQuestion = function () {\n        return this.props.question;\n    };\n    Object.defineProperty(SurveyQuestionAndErrorsWrapped.prototype, \"itemCss\", {\n        get: function () {\n            return this.props.itemCss;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionAndErrorsWrapped.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.doAfterRender();\n    };\n    SurveyQuestionAndErrorsWrapped.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.doAfterRender();\n    };\n    SurveyQuestionAndErrorsWrapped.prototype.doAfterRender = function () { };\n    SurveyQuestionAndErrorsWrapped.prototype.canRender = function () {\n        return !!this.question;\n    };\n    SurveyQuestionAndErrorsWrapped.prototype.renderContent = function () {\n        var renderedQuestion = this.renderQuestion();\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null, renderedQuestion));\n    };\n    SurveyQuestionAndErrorsWrapped.prototype.getShowErrors = function () {\n        return this.question.isVisible;\n    };\n    SurveyQuestionAndErrorsWrapped.prototype.renderQuestion = function () {\n        return SurveyQuestion.renderQuestionBody(this.creator, this.question);\n    };\n    return SurveyQuestionAndErrorsWrapped;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"ReactSurveyElement\"]));\n\nvar SurveyQuestionAndErrorsCell = /** @class */ (function (_super) {\n    __extends(SurveyQuestionAndErrorsCell, _super);\n    function SurveyQuestionAndErrorsCell(props) {\n        var _this = _super.call(this, props) || this;\n        _this.cellRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        return _this;\n    }\n    SurveyQuestionAndErrorsCell.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (this.question) {\n            var el = this.cellRef.current;\n            if (!!el) {\n                el.removeAttribute(\"data-rendered\");\n            }\n        }\n    };\n    SurveyQuestionAndErrorsCell.prototype.renderElement = function () {\n        var style = this.getCellStyle();\n        var cell = this.props.cell;\n        var focusIn = function () { cell.focusIn(); };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { ref: this.cellRef, className: this.itemCss, colSpan: cell.colSpans, \"data-responsive-title\": this.getHeaderText(), title: cell.getTitle(), style: style, onFocus: focusIn }, this.wrapCell(this.props.cell, (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.props.cell.cellQuestionWrapperClassName }, this.renderQuestion())))));\n    };\n    SurveyQuestionAndErrorsCell.prototype.getCellStyle = function () {\n        return null;\n    };\n    SurveyQuestionAndErrorsCell.prototype.getHeaderText = function () {\n        return \"\";\n    };\n    SurveyQuestionAndErrorsCell.prototype.wrapCell = function (cell, element) {\n        if (!cell) {\n            return element;\n        }\n        var survey = this.question.survey;\n        var wrapper = null;\n        if (survey) {\n            wrapper = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElementsWrapper\"].wrapMatrixCell(survey, element, cell, this.props.reason);\n        }\n        return wrapper !== null && wrapper !== void 0 ? wrapper : element;\n    };\n    return SurveyQuestionAndErrorsCell;\n}(SurveyQuestionAndErrorsWrapped));\n\nvar SurveyQuestionErrorCell = /** @class */ (function (_super) {\n    __extends(SurveyQuestionErrorCell, _super);\n    function SurveyQuestionErrorCell(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            changed: 0\n        };\n        if (_this.question) {\n            _this.registerCallback(_this.question);\n        }\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionErrorCell.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionErrorCell.prototype.update = function () {\n        this.setState({ changed: this.state.changed + 1 });\n    };\n    SurveyQuestionErrorCell.prototype.registerCallback = function (question) {\n        var _this = this;\n        question.registerFunctionOnPropertyValueChanged(\"errors\", function () {\n            _this.update();\n        }, \"__reactSubscription\");\n    };\n    SurveyQuestionErrorCell.prototype.unRegisterCallback = function (question) {\n        question.unRegisterFunctionOnPropertyValueChanged(\"errors\", \"__reactSubscription\");\n    };\n    SurveyQuestionErrorCell.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.question && prevProps.question !== this.question) {\n            this.unRegisterCallback(prevProps.cell);\n        }\n        if (this.question) {\n            this.registerCallback(this.question);\n        }\n    };\n    SurveyQuestionErrorCell.prototype.componentWillUnmount = function () {\n        if (this.question) {\n            this.unRegisterCallback(this.question);\n        }\n    };\n    SurveyQuestionErrorCell.prototype.render = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyElementErrors, { element: this.question, creator: this.props.creator, cssClasses: this.question.cssClasses });\n    };\n    return SurveyQuestionErrorCell;\n}(react__WEBPACK_IMPORTED_MODULE_0__[\"Component\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_buttongroup.tsx\":\n/*!*************************************************!*\\\n  !*** ./src/react/reactquestion_buttongroup.tsx ***!\n  \\*************************************************/\n/*! exports provided: SurveyQuestionButtonGroup, SurveyButtonGroupItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_825263__) {\n\n\"use strict\";\n__nested_webpack_require_825263__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_825263__.d(__nested_webpack_exports__, \"SurveyQuestionButtonGroup\", function() { return SurveyQuestionButtonGroup; });\n/* harmony export (binding) */ __nested_webpack_require_825263__.d(__nested_webpack_exports__, \"SurveyButtonGroupItem\", function() { return SurveyButtonGroupItem; });\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_825263__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_825263__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_825263__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_825263__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_825263__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__nested_webpack_require_825263__.n(survey_core__WEBPACK_IMPORTED_MODULE_3__);\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionButtonGroup = /** @class */ (function (_super) {\n    __extends(SurveyQuestionButtonGroup, _super);\n    function SurveyQuestionButtonGroup(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionButtonGroup.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionButtonGroup.prototype.getStateElement = function () {\n        return this.question;\n    };\n    SurveyQuestionButtonGroup.prototype.renderElement = function () {\n        var items = this.renderItems();\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: this.question.cssClasses.root }, items);\n    };\n    SurveyQuestionButtonGroup.prototype.renderItems = function () {\n        var _this = this;\n        return this.question.visibleChoices.map(function (item, index) {\n            return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SurveyButtonGroupItem, { key: _this.question.inputId + \"_\" + index, item: item, question: _this.question, index: index }));\n        });\n    };\n    return SurveyQuestionButtonGroup;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_0__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyButtonGroupItem = /** @class */ (function (_super) {\n    __extends(SurveyButtonGroupItem, _super);\n    function SurveyButtonGroupItem(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyButtonGroupItem.prototype, \"index\", {\n        get: function () {\n            return this.props.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyButtonGroupItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyButtonGroupItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyButtonGroupItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    SurveyButtonGroupItem.prototype.renderElement = function () {\n        this.model = new survey_core__WEBPACK_IMPORTED_MODULE_3__[\"ButtonGroupItemModel\"](this.question, this.item, this.index);\n        var icon = this.renderIcon();\n        var input = this.renderInput();\n        var caption = this.renderCaption();\n        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"label\", { role: \"radio\", className: this.model.css.label, title: this.model.caption.renderedHtml },\n            input,\n            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", { className: this.model.css.decorator },\n                icon,\n                caption)));\n    };\n    SurveyButtonGroupItem.prototype.renderIcon = function () {\n        if (!!this.model.iconName) {\n            return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { className: this.model.css.icon, iconName: this.model.iconName, size: this.model.iconSize || 24 }));\n        }\n        return null;\n    };\n    SurveyButtonGroupItem.prototype.renderInput = function () {\n        var _this = this;\n        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"input\", { className: this.model.css.control, id: this.model.id, type: \"radio\", name: this.model.name, checked: this.model.selected, value: this.model.value, disabled: this.model.readOnly, onChange: function () {\n                _this.model.onChange();\n            }, \"aria-required\": this.model.isRequired, \"aria-label\": this.model.caption.renderedHtml, \"aria-invalid\": this.model.hasErrors, \"aria-errormessage\": this.model.describedBy, role: \"radio\" }));\n    };\n    SurveyButtonGroupItem.prototype.renderCaption = function () {\n        if (!this.model.showCaption)\n            return null;\n        var caption = this.renderLocString(this.model.caption);\n        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"span\", { className: this.model.css.caption, title: this.model.caption.renderedHtml }, caption));\n    };\n    return SurveyButtonGroupItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_0__[\"SurveyElementBase\"]));\n\n// ReactQuestionFactory.Instance.registerQuestion(\"buttongroup\", props => {\n//   return React.createElement(SurveyQuestionButtonGroup, props);\n// });\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_checkbox.tsx\":\n/*!**********************************************!*\\\n  !*** ./src/react/reactquestion_checkbox.tsx ***!\n  \\**********************************************/\n/*! exports provided: SurveyQuestionCheckbox, SurveyQuestionCheckboxItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_832235__) {\n\n\"use strict\";\n__nested_webpack_require_832235__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_832235__.d(__nested_webpack_exports__, \"SurveyQuestionCheckbox\", function() { return SurveyQuestionCheckbox; });\n/* harmony export (binding) */ __nested_webpack_require_832235__.d(__nested_webpack_exports__, \"SurveyQuestionCheckboxItem\", function() { return SurveyQuestionCheckboxItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_832235__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_832235__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_832235__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_comment__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_832235__(/*! ./reactquestion_comment */ \"./src/react/reactquestion_comment.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_832235__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_832235__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_832235__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar SurveyQuestionCheckbox = /** @class */ (function (_super) {\n    __extends(SurveyQuestionCheckbox, _super);\n    function SurveyQuestionCheckbox(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionCheckbox.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionCheckbox.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.cssClasses;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"fieldset\", { className: this.question.getSelectBaseRootCss(), ref: function (fieldset) { return (_this.setControl(fieldset)); }, role: this.question.a11y_input_ariaRole, \"aria-required\": this.question.a11y_input_ariaRequired, \"aria-label\": this.question.a11y_input_ariaLabel, \"aria-labelledby\": this.question.a11y_input_ariaLabelledBy, \"aria-describedby\": this.question.a11y_input_ariaDescribedBy, \"aria-invalid\": this.question.a11y_input_ariaInvalid, \"aria-errormessage\": this.question.a11y_input_ariaErrormessage },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"legend\", { className: \"sv-hidden\" }, this.question.locTitle.renderedHtml),\n            this.getHeader(),\n            this.question.hasColumns\n                ? this.getColumnedBody(cssClasses)\n                : this.getBody(cssClasses),\n            this.getFooter(),\n            this.question.isOtherSelected ? this.renderOther() : null));\n    };\n    SurveyQuestionCheckbox.prototype.getHeader = function () {\n        var _this = this;\n        if (this.question.hasHeadItems) {\n            return this.question.headItems.map(function (item, ii) {\n                return _this.renderItem(\"item_h\" + ii, item, false, _this.question.cssClasses);\n            });\n        }\n    };\n    SurveyQuestionCheckbox.prototype.getFooter = function () {\n        var _this = this;\n        if (this.question.hasFootItems) {\n            return this.question.footItems.map(function (item, ii) {\n                return _this.renderItem(\"item_f\" + ii, item, false, _this.question.cssClasses);\n            });\n        }\n    };\n    SurveyQuestionCheckbox.prototype.getColumnedBody = function (cssClasses) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.rootMultiColumn }, this.getColumns(cssClasses)));\n    };\n    SurveyQuestionCheckbox.prototype.getColumns = function (cssClasses) {\n        var _this = this;\n        return this.question.columns.map(function (column, ci) {\n            var items = column.map(function (item, ii) {\n                return _this.renderItem(\"item\" + ii, item, ci === 0 && ii === 0, cssClasses, \"\" + ci + ii);\n            });\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { key: \"column\" + ci, className: _this.question.getColumnClass(), role: \"presentation\" }, items));\n        });\n    };\n    SurveyQuestionCheckbox.prototype.getBody = function (cssClasses) {\n        if (this.question.blockedRow) {\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.rootRow }, this.getItems(cssClasses, this.question.dataChoices));\n        }\n        else\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null, this.getItems(cssClasses, this.question.bodyItems));\n    };\n    SurveyQuestionCheckbox.prototype.getItems = function (cssClasses, choices) {\n        var renderedItems = [];\n        for (var i = 0; i < choices.length; i++) {\n            var item = choices[i];\n            var key = \"item\" + i;\n            var renderedItem = this.renderItem(key, item, i == 0, cssClasses, \"\" + i);\n            if (!!renderedItem) {\n                renderedItems.push(renderedItem);\n            }\n        }\n        return renderedItems;\n    };\n    Object.defineProperty(SurveyQuestionCheckbox.prototype, \"textStyle\", {\n        get: function () {\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionCheckbox.prototype.renderOther = function () {\n        var cssClasses = this.question.cssClasses;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getCommentAreaCss(true) },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion_comment__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionOtherValueItem\"], { question: this.question, otherCss: cssClasses.other, cssClasses: cssClasses, isDisplayMode: this.isDisplayMode })));\n    };\n    SurveyQuestionCheckbox.prototype.renderItem = function (key, item, isFirst, cssClasses, index) {\n        var renderedItem = _element_factory__WEBPACK_IMPORTED_MODULE_5__[\"ReactElementFactory\"].Instance.createElement(this.question.itemComponent, {\n            key: key,\n            question: this.question,\n            cssClasses: cssClasses,\n            isDisplayMode: this.isDisplayMode,\n            item: item,\n            textStyle: this.textStyle,\n            index: index,\n            isFirst: isFirst,\n        });\n        var survey = this.question.survey;\n        var wrappedItem = null;\n        if (!!survey && !!renderedItem) {\n            wrappedItem = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_4__[\"ReactSurveyElementsWrapper\"].wrapItemValue(survey, renderedItem, this.question, item);\n        }\n        return wrappedItem !== null && wrappedItem !== void 0 ? wrappedItem : renderedItem;\n    };\n    return SurveyQuestionCheckbox;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyQuestionCheckboxItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionCheckboxItem, _super);\n    function SurveyQuestionCheckboxItem(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnChange = function (event) {\n            _this.question.clickItemHandler(_this.item, event.target.checked);\n        };\n        return _this;\n    }\n    SurveyQuestionCheckboxItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    Object.defineProperty(SurveyQuestionCheckboxItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionCheckboxItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionCheckboxItem.prototype, \"textStyle\", {\n        get: function () {\n            return this.props.textStyle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionCheckboxItem.prototype, \"isFirst\", {\n        get: function () {\n            return this.props.isFirst;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionCheckboxItem.prototype, \"index\", {\n        get: function () {\n            return this.props.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionCheckboxItem.prototype, \"hideCaption\", {\n        get: function () {\n            return this.props.hideCaption === true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionCheckboxItem.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (!_super.prototype.shouldComponentUpdate.call(this, nextProps, nextState))\n            return false;\n        if (!this.question)\n            return false;\n        return (!this.question.customWidget ||\n            !!this.question.customWidgetData.isNeedRender ||\n            !!this.question.customWidget.widgetJson.isDefaultRender ||\n            !!this.question.customWidget.widgetJson.render);\n    };\n    SurveyQuestionCheckboxItem.prototype.canRender = function () {\n        return !!this.item && !!this.question;\n    };\n    SurveyQuestionCheckboxItem.prototype.renderElement = function () {\n        var isChecked = this.question.isItemSelected(this.item);\n        return this.renderCheckbox(isChecked, null);\n    };\n    Object.defineProperty(SurveyQuestionCheckboxItem.prototype, \"inputStyle\", {\n        get: function () {\n            return null; //{ marginRight: \"3px\" };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionCheckboxItem.prototype.renderCheckbox = function (isChecked, otherItem) {\n        var id = this.question.getItemId(this.item);\n        var itemClass = this.question.getItemClass(this.item);\n        var labelClass = this.question.getLabelClass(this.item);\n        var itemLabel = !this.hideCaption ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.cssClasses.controlLabel }, this.renderLocString(this.item.locText, this.textStyle)) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: itemClass, role: \"presentation\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { className: labelClass },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { className: this.cssClasses.itemControl, type: \"checkbox\", role: \"option\", name: this.question.name + this.item.id, value: this.item.value, id: id, style: this.inputStyle, disabled: !this.question.getItemEnabled(this.item), checked: isChecked, onChange: this.handleOnChange }),\n                this.cssClasses.materialDecorator ?\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.cssClasses.materialDecorator }, this.question.itemSvgIcon ?\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: this.cssClasses.itemDecorator },\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.itemSvgIcon })) :\n                        null) :\n                    null,\n                itemLabel),\n            otherItem));\n    };\n    return SurveyQuestionCheckboxItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_5__[\"ReactElementFactory\"].Instance.registerElement(\"survey-checkbox-item\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionCheckboxItem, props);\n});\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"checkbox\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionCheckbox, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_comment.tsx\":\n/*!*********************************************!*\\\n  !*** ./src/react/reactquestion_comment.tsx ***!\n  \\*********************************************/\n/*! exports provided: SurveyQuestionComment, SurveyQuestionCommentItem, SurveyQuestionOtherValueItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_845653__) {\n\n\"use strict\";\n__nested_webpack_require_845653__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_845653__.d(__nested_webpack_exports__, \"SurveyQuestionComment\", function() { return SurveyQuestionComment; });\n/* harmony export (binding) */ __nested_webpack_require_845653__.d(__nested_webpack_exports__, \"SurveyQuestionCommentItem\", function() { return SurveyQuestionCommentItem; });\n/* harmony export (binding) */ __nested_webpack_require_845653__.d(__nested_webpack_exports__, \"SurveyQuestionOtherValueItem\", function() { return SurveyQuestionOtherValueItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_845653__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_845653__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_845653__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_845653__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__nested_webpack_require_845653__.n(survey_core__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_845653__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_character_counter__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_845653__(/*! ./components/character-counter */ \"./src/react/components/character-counter.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionComment = /** @class */ (function (_super) {\n    __extends(SurveyQuestionComment, _super);\n    function SurveyQuestionComment(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionComment.prototype.renderElement = function () {\n        var _this = this;\n        var onBlur = !this.question.isInputTextUpdate ? this.updateValueOnEvent : undefined;\n        var onInput = function (event) {\n            if (_this.question.isInputTextUpdate) {\n                _this.updateValueOnEvent(event);\n            }\n            else {\n                _this.question.updateElement();\n            }\n            var newValue = event.target.value;\n            _this.question.updateRemainingCharacterCounter(newValue);\n        };\n        var placeholder = this.question.renderedPlaceholder;\n        if (this.question.isReadOnlyRenderDiv()) {\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null, this.question.value);\n        }\n        var counter = !!this.question.getMaxLength() ? (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_character_counter__WEBPACK_IMPORTED_MODULE_4__[\"CharacterCounterComponent\"], { counter: this.question.characterCounter, remainingCharacterCounter: this.question.cssClasses.remainingCharacterCounter })) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { id: this.question.inputId, className: this.question.className, disabled: this.question.isInputReadOnly, readOnly: this.question.isInputReadOnly, ref: function (textarea) { return (_this.setControl(textarea)); }, maxLength: this.question.getMaxLength(), placeholder: placeholder, onBlur: onBlur, onInput: onInput, onKeyDown: function (event) { _this.question.onKeyDown(event); }, cols: this.question.cols, rows: this.question.rows, \"aria-required\": this.question.a11y_input_ariaRequired, \"aria-label\": this.question.a11y_input_ariaLabel, \"aria-labelledby\": this.question.a11y_input_ariaLabelledBy, \"aria-describedby\": this.question.a11y_input_ariaDescribedBy, \"aria-invalid\": this.question.a11y_input_ariaInvalid, \"aria-errormessage\": this.question.a11y_input_ariaErrormessage, style: { resize: this.question.resizeStyle } }),\n            counter));\n    };\n    return SurveyQuestionComment;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionUncontrolledElement\"]));\n\nvar SurveyQuestionCommentItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionCommentItem, _super);\n    function SurveyQuestionCommentItem(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { comment: _this.getComment() || \"\" };\n        return _this;\n    }\n    SurveyQuestionCommentItem.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.updateDomElement();\n    };\n    SurveyQuestionCommentItem.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.updateDomElement();\n    };\n    SurveyQuestionCommentItem.prototype.updateDomElement = function () {\n        if (!!this.control) {\n            var control = this.control;\n            var newValue = this.getComment() || \"\";\n            if (!survey_core__WEBPACK_IMPORTED_MODULE_2__[\"Helpers\"].isTwoValueEquals(newValue, control.value, false, true, false)) {\n                control.value = newValue;\n            }\n        }\n    };\n    SurveyQuestionCommentItem.prototype.setControl = function (element) {\n        if (!!element) {\n            this.control = element;\n        }\n    };\n    SurveyQuestionCommentItem.prototype.canRender = function () {\n        return !!this.props.question;\n    };\n    SurveyQuestionCommentItem.prototype.onCommentChange = function (event) {\n        this.props.question.onCommentChange(event);\n    };\n    SurveyQuestionCommentItem.prototype.onCommentInput = function (event) {\n        this.props.question.onCommentInput(event);\n    };\n    SurveyQuestionCommentItem.prototype.getComment = function () {\n        return this.props.question.comment;\n    };\n    SurveyQuestionCommentItem.prototype.setComment = function (value) {\n        this.props.question.comment = value;\n    };\n    SurveyQuestionCommentItem.prototype.getId = function () {\n        return this.props.question.commentId;\n    };\n    SurveyQuestionCommentItem.prototype.getPlaceholder = function () {\n        return this.props.question.renderedCommentPlaceholder;\n    };\n    SurveyQuestionCommentItem.prototype.renderElement = function () {\n        var _this = this;\n        var question = this.props.question;\n        var className = this.props.otherCss || this.cssClasses.comment;\n        if (question.isReadOnlyRenderDiv()) {\n            var comment = this.getComment() || \"\";\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null, comment);\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"textarea\", { id: this.getId(), className: className, ref: function (textarea) { return (_this.setControl(textarea)); }, disabled: this.isDisplayMode, maxLength: question.getOthersMaxLength(), placeholder: this.getPlaceholder(), onBlur: function (e) { _this.onCommentChange(e); }, onInput: function (e) { return _this.onCommentInput(e); }, \"aria-required\": question.isRequired || question.a11y_input_ariaRequired, \"aria-label\": question.ariaLabel || question.a11y_input_ariaLabel, style: { resize: question.resizeStyle } }));\n    };\n    return SurveyQuestionCommentItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\nvar SurveyQuestionOtherValueItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionOtherValueItem, _super);\n    function SurveyQuestionOtherValueItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SurveyQuestionOtherValueItem.prototype.onCommentChange = function (event) {\n        this.props.question.onOtherValueChange(event);\n    };\n    SurveyQuestionOtherValueItem.prototype.onCommentInput = function (event) {\n        this.props.question.onOtherValueInput(event);\n    };\n    SurveyQuestionOtherValueItem.prototype.getComment = function () {\n        return this.props.question.otherValue;\n    };\n    SurveyQuestionOtherValueItem.prototype.setComment = function (value) {\n        this.props.question.otherValue = value;\n    };\n    SurveyQuestionOtherValueItem.prototype.getId = function () {\n        return this.props.question.otherId;\n    };\n    SurveyQuestionOtherValueItem.prototype.getPlaceholder = function () {\n        return this.props.question.otherPlaceholder;\n    };\n    return SurveyQuestionOtherValueItem;\n}(SurveyQuestionCommentItem));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"comment\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionComment, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_custom.tsx\":\n/*!********************************************!*\\\n  !*** ./src/react/reactquestion_custom.tsx ***!\n  \\********************************************/\n/*! exports provided: SurveyQuestionCustom, SurveyQuestionComposite */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_855451__) {\n\n\"use strict\";\n__nested_webpack_require_855451__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_855451__.d(__nested_webpack_exports__, \"SurveyQuestionCustom\", function() { return SurveyQuestionCustom; });\n/* harmony export (binding) */ __nested_webpack_require_855451__.d(__nested_webpack_exports__, \"SurveyQuestionComposite\", function() { return SurveyQuestionComposite; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_855451__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_855451__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_855451__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_855451__(/*! ./reactquestion */ \"./src/react/reactquestion.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_855451__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_855451__(/*! ./panel */ \"./src/react/panel.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionCustom = /** @class */ (function (_super) {\n    __extends(SurveyQuestionCustom, _super);\n    function SurveyQuestionCustom(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionCustom.prototype.getStateElements = function () {\n        var res = _super.prototype.getStateElements.call(this);\n        if (!!this.question.contentQuestion) {\n            res.push(this.question.contentQuestion);\n        }\n        return res;\n    };\n    SurveyQuestionCustom.prototype.renderElement = function () {\n        return _reactquestion__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestion\"].renderQuestionBody(this.creator, this.question.contentQuestion);\n    };\n    return SurveyQuestionCustom;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionUncontrolledElement\"]));\n\nvar SurveyQuestionComposite = /** @class */ (function (_super) {\n    __extends(SurveyQuestionComposite, _super);\n    function SurveyQuestionComposite(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionComposite.prototype.canRender = function () {\n        return !!this.question.contentPanel;\n    };\n    SurveyQuestionComposite.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_panel__WEBPACK_IMPORTED_MODULE_4__[\"SurveyPanel\"], { element: this.question.contentPanel, creator: this.creator, survey: this.question.survey }));\n    };\n    return SurveyQuestionComposite;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionUncontrolledElement\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"custom\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionCustom, props);\n});\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"composite\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionComposite, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_dropdown.tsx\":\n/*!**********************************************!*\\\n  !*** ./src/react/reactquestion_dropdown.tsx ***!\n  \\**********************************************/\n/*! exports provided: SurveyQuestionDropdown */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_859807__) {\n\n\"use strict\";\n__nested_webpack_require_859807__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_859807__.d(__nested_webpack_exports__, \"SurveyQuestionDropdown\", function() { return SurveyQuestionDropdown; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_859807__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_859807__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_859807__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _dropdown_base__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_859807__(/*! ./dropdown-base */ \"./src/react/dropdown-base.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionDropdown = /** @class */ (function (_super) {\n    __extends(SurveyQuestionDropdown, _super);\n    function SurveyQuestionDropdown(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionDropdown.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        var comment = this.question.isOtherSelected ? this.renderOther(cssClasses) : null;\n        var select = this.renderSelect(cssClasses);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.renderCssRoot },\n            select,\n            comment));\n    };\n    return SurveyQuestionDropdown;\n}(_dropdown_base__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionDropdownBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"dropdown\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionDropdown, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_element.tsx\":\n/*!*********************************************!*\\\n  !*** ./src/react/reactquestion_element.tsx ***!\n  \\*********************************************/\n/*! exports provided: SurveyElementBase, ReactSurveyElement, SurveyQuestionElementBase, SurveyQuestionUncontrolledElement */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_862750__) {\n\n\"use strict\";\n__nested_webpack_require_862750__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_862750__.d(__nested_webpack_exports__, \"SurveyElementBase\", function() { return SurveyElementBase; });\n/* harmony export (binding) */ __nested_webpack_require_862750__.d(__nested_webpack_exports__, \"ReactSurveyElement\", function() { return ReactSurveyElement; });\n/* harmony export (binding) */ __nested_webpack_require_862750__.d(__nested_webpack_exports__, \"SurveyQuestionElementBase\", function() { return SurveyQuestionElementBase; });\n/* harmony export (binding) */ __nested_webpack_require_862750__.d(__nested_webpack_exports__, \"SurveyQuestionUncontrolledElement\", function() { return SurveyQuestionUncontrolledElement; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_862750__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_862750__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_862750__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_862750__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_862750__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_862750__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyElementBase = /** @class */ (function (_super) {\n    __extends(SurveyElementBase, _super);\n    function SurveyElementBase(props) {\n        var _this = _super.call(this, props) || this;\n        _this._allowComponentUpdate = true;\n        return _this;\n    }\n    SurveyElementBase.renderLocString = function (locStr, style, key) {\n        if (style === void 0) { style = null; }\n        return _element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.createElement(locStr.renderAs, {\n            locStr: locStr.renderAsData,\n            style: style,\n            key: key,\n        });\n    };\n    SurveyElementBase.renderQuestionDescription = function (question) {\n        var descriptionText = SurveyElementBase.renderLocString(question.locDescription);\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { style: question.hasDescription ? undefined : { display: \"none\" }, id: question.ariaDescriptionId, className: question.cssDescription }, descriptionText);\n    };\n    SurveyElementBase.prototype.componentDidMount = function () {\n        this.makeBaseElementsReact();\n    };\n    SurveyElementBase.prototype.componentWillUnmount = function () {\n        this.unMakeBaseElementsReact();\n    };\n    SurveyElementBase.prototype.componentDidUpdate = function (prevProps, prevState) {\n        this.makeBaseElementsReact();\n    };\n    SurveyElementBase.prototype.allowComponentUpdate = function () {\n        this._allowComponentUpdate = true;\n        this.forceUpdate();\n    };\n    SurveyElementBase.prototype.denyComponentUpdate = function () {\n        this._allowComponentUpdate = false;\n    };\n    SurveyElementBase.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (this._allowComponentUpdate) {\n            this.unMakeBaseElementsReact();\n        }\n        return this._allowComponentUpdate;\n    };\n    SurveyElementBase.prototype.render = function () {\n        if (!this.canRender()) {\n            return null;\n        }\n        this.startEndRendering(1);\n        var res = this.renderElement();\n        this.startEndRendering(-1);\n        if (!!res) {\n            res = this.wrapElement(res);\n        }\n        this.changedStatePropNameValue = undefined;\n        return res;\n    };\n    SurveyElementBase.prototype.wrapElement = function (element) {\n        return element;\n    };\n    Object.defineProperty(SurveyElementBase.prototype, \"isRendering\", {\n        get: function () {\n            var stateEls = this.getRenderedElements();\n            for (var _i = 0, stateEls_1 = stateEls; _i < stateEls_1.length; _i++) {\n                var stateEl = stateEls_1[_i];\n                if (stateEl.reactRendering > 0)\n                    return true;\n            }\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementBase.prototype.getRenderedElements = function () {\n        return this.getStateElements();\n    };\n    SurveyElementBase.prototype.startEndRendering = function (val) {\n        var stateEls = this.getRenderedElements();\n        for (var _i = 0, stateEls_2 = stateEls; _i < stateEls_2.length; _i++) {\n            var stateEl = stateEls_2[_i];\n            if (!stateEl.reactRendering)\n                stateEl.reactRendering = 0;\n            stateEl.reactRendering += val;\n        }\n    };\n    SurveyElementBase.prototype.canRender = function () {\n        return true;\n    };\n    SurveyElementBase.prototype.renderElement = function () {\n        return null;\n    };\n    Object.defineProperty(SurveyElementBase.prototype, \"changedStatePropName\", {\n        get: function () {\n            return this.changedStatePropNameValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementBase.prototype.makeBaseElementsReact = function () {\n        var els = this.getStateElements();\n        for (var i = 0; i < els.length; i++) {\n            this.makeBaseElementReact(els[i]);\n        }\n    };\n    SurveyElementBase.prototype.unMakeBaseElementsReact = function () {\n        var els = this.getStateElements();\n        for (var i = 0; i < els.length; i++) {\n            this.unMakeBaseElementReact(els[i]);\n        }\n    };\n    SurveyElementBase.prototype.getStateElements = function () {\n        var el = this.getStateElement();\n        return !!el ? [el] : [];\n    };\n    SurveyElementBase.prototype.getStateElement = function () {\n        return null;\n    };\n    Object.defineProperty(SurveyElementBase.prototype, \"isDisplayMode\", {\n        get: function () {\n            var props = this.props;\n            return props.isDisplayMode || false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementBase.prototype.renderLocString = function (locStr, style, key) {\n        if (style === void 0) { style = null; }\n        return SurveyElementBase.renderLocString(locStr, style, key);\n    };\n    SurveyElementBase.prototype.canMakeReact = function (stateElement) {\n        return !!stateElement && !!stateElement.iteratePropertiesHash;\n    };\n    SurveyElementBase.prototype.makeBaseElementReact = function (stateElement) {\n        var _this = this;\n        if (!this.canMakeReact(stateElement))\n            return;\n        stateElement.iteratePropertiesHash(function (hash, key) {\n            if (!_this.canUsePropInState(key))\n                return;\n            var val = hash[key];\n            if (Array.isArray(val)) {\n                var val = val;\n                val[\"onArrayChanged\"] = function (arrayChanges) {\n                    if (_this.isRendering)\n                        return;\n                    _this.changedStatePropNameValue = key;\n                    _this.setState(function (state) {\n                        var newState = {};\n                        newState[key] = val;\n                        return newState;\n                    });\n                };\n            }\n        });\n        stateElement.setPropertyValueCoreHandler = function (hash, key, val) {\n            if (hash[key] !== val) {\n                hash[key] = val;\n                if (!_this.canUsePropInState(key))\n                    return;\n                if (_this.isRendering)\n                    return;\n                _this.changedStatePropNameValue = key;\n                _this.setState(function (state) {\n                    var newState = {};\n                    newState[key] = val;\n                    return newState;\n                });\n            }\n        };\n    };\n    SurveyElementBase.prototype.canUsePropInState = function (key) {\n        return true;\n    };\n    SurveyElementBase.prototype.unMakeBaseElementReact = function (stateElement) {\n        if (!this.canMakeReact(stateElement))\n            return;\n        stateElement.setPropertyValueCoreHandler = undefined;\n        stateElement.iteratePropertiesHash(function (hash, key) {\n            var val = hash[key];\n            if (Array.isArray(val)) {\n                var val = val;\n                val[\"onArrayChanged\"] = function () { };\n            }\n        });\n    };\n    return SurveyElementBase;\n}(react__WEBPACK_IMPORTED_MODULE_0__[\"Component\"]));\n\nvar ReactSurveyElement = /** @class */ (function (_super) {\n    __extends(ReactSurveyElement, _super);\n    function ReactSurveyElement(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(ReactSurveyElement.prototype, \"cssClasses\", {\n        get: function () {\n            return this.props.cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ReactSurveyElement;\n}(SurveyElementBase));\n\nvar SurveyQuestionElementBase = /** @class */ (function (_super) {\n    __extends(SurveyQuestionElementBase, _super);\n    function SurveyQuestionElementBase(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionElementBase.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.updateDomElement();\n    };\n    SurveyQuestionElementBase.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.updateDomElement();\n    };\n    SurveyQuestionElementBase.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (!!this.questionBase) {\n            var el = this.control;\n            this.questionBase.beforeDestroyQuestionElement(el);\n            if (!!el) {\n                el.removeAttribute(\"data-rendered\");\n            }\n        }\n    };\n    SurveyQuestionElementBase.prototype.updateDomElement = function () {\n        var el = this.control;\n        if (!!el) {\n            if (el.getAttribute(\"data-rendered\") !== \"r\") {\n                el.setAttribute(\"data-rendered\", \"r\");\n                this.questionBase.afterRenderQuestionElement(el);\n            }\n        }\n    };\n    Object.defineProperty(SurveyQuestionElementBase.prototype, \"questionBase\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionElementBase.prototype.getRenderedElements = function () {\n        return [this.questionBase];\n    };\n    Object.defineProperty(SurveyQuestionElementBase.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionElementBase.prototype.canRender = function () {\n        return !!this.questionBase && !!this.creator;\n    };\n    SurveyQuestionElementBase.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (!_super.prototype.shouldComponentUpdate.call(this, nextProps, nextState))\n            return false;\n        return (!this.questionBase.customWidget ||\n            !!this.questionBase.customWidgetData.isNeedRender ||\n            !!this.questionBase.customWidget.widgetJson.isDefaultRender ||\n            !!this.questionBase.customWidget.widgetJson.render);\n    };\n    Object.defineProperty(SurveyQuestionElementBase.prototype, \"isDisplayMode\", {\n        get: function () {\n            var props = this.props;\n            return (props.isDisplayMode ||\n                (!!this.questionBase && this.questionBase.isInputReadOnly) || false);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionElementBase.prototype.wrapCell = function (cell, element, reason) {\n        if (!reason) {\n            return element;\n        }\n        var survey = this.questionBase\n            .survey;\n        var wrapper = null;\n        if (survey) {\n            wrapper = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__[\"ReactSurveyElementsWrapper\"].wrapMatrixCell(survey, element, cell, reason);\n        }\n        return wrapper !== null && wrapper !== void 0 ? wrapper : element;\n    };\n    SurveyQuestionElementBase.prototype.setControl = function (element) {\n        if (!!element) {\n            this.control = element;\n        }\n    };\n    return SurveyQuestionElementBase;\n}(SurveyElementBase));\n\nvar SurveyQuestionUncontrolledElement = /** @class */ (function (_super) {\n    __extends(SurveyQuestionUncontrolledElement, _super);\n    function SurveyQuestionUncontrolledElement(props) {\n        var _this = _super.call(this, props) || this;\n        _this.updateValueOnEvent = function (event) {\n            if (!survey_core__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isTwoValueEquals(_this.questionBase.value, event.target.value, false, true, false)) {\n                _this.setValueCore(event.target.value);\n            }\n        };\n        _this.updateValueOnEvent = _this.updateValueOnEvent.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionUncontrolledElement.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionUncontrolledElement.prototype.setValueCore = function (newValue) {\n        this.questionBase.value = newValue;\n    };\n    SurveyQuestionUncontrolledElement.prototype.getValueCore = function () {\n        return this.questionBase.value;\n    };\n    SurveyQuestionUncontrolledElement.prototype.updateDomElement = function () {\n        if (!!this.control) {\n            var control = this.control;\n            var newValue = this.getValueCore();\n            if (!survey_core__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isTwoValueEquals(newValue, control.value, false, true, false)) {\n                control.value = this.getValue(newValue);\n            }\n        }\n        _super.prototype.updateDomElement.call(this);\n    };\n    SurveyQuestionUncontrolledElement.prototype.getValue = function (val) {\n        if (survey_core__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isValueEmpty(val))\n            return \"\";\n        return val;\n    };\n    return SurveyQuestionUncontrolledElement;\n}(SurveyQuestionElementBase));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_empty.tsx\":\n/*!*******************************************!*\\\n  !*** ./src/react/reactquestion_empty.tsx ***!\n  \\*******************************************/\n/*! exports provided: SurveyQuestionEmpty */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_878355__) {\n\n\"use strict\";\n__nested_webpack_require_878355__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_878355__.d(__nested_webpack_exports__, \"SurveyQuestionEmpty\", function() { return SurveyQuestionEmpty; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_878355__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_878355__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_878355__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_878355__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionEmpty = /** @class */ (function (_super) {\n    __extends(SurveyQuestionEmpty, _super);\n    function SurveyQuestionEmpty(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { value: _this.question.value };\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionEmpty.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionEmpty.prototype.renderElement = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null);\n    };\n    return SurveyQuestionEmpty;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"empty\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionEmpty, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_expression.tsx\":\n/*!************************************************!*\\\n  !*** ./src/react/reactquestion_expression.tsx ***!\n  \\************************************************/\n/*! exports provided: SurveyQuestionExpression */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_881255__) {\n\n\"use strict\";\n__nested_webpack_require_881255__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_881255__.d(__nested_webpack_exports__, \"SurveyQuestionExpression\", function() { return SurveyQuestionExpression; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_881255__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_881255__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_881255__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_881255__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionExpression = /** @class */ (function (_super) {\n    __extends(SurveyQuestionExpression, _super);\n    function SurveyQuestionExpression(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionExpression.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionExpression.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.cssClasses;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: this.question.inputId, className: cssClasses.root, ref: function (div) { return (_this.setControl(div)); } }, this.question.formatedValue));\n    };\n    return SurveyQuestionExpression;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"expression\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionExpression, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_factory.tsx\":\n/*!*********************************************!*\\\n  !*** ./src/react/reactquestion_factory.tsx ***!\n  \\*********************************************/\n/*! exports provided: ReactQuestionFactory */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_884325__) {\n\n\"use strict\";\n__nested_webpack_require_884325__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_884325__.d(__nested_webpack_exports__, \"ReactQuestionFactory\", function() { return ReactQuestionFactory; });\nvar ReactQuestionFactory = /** @class */ (function () {\n    function ReactQuestionFactory() {\n        this.creatorHash = {};\n    }\n    ReactQuestionFactory.prototype.registerQuestion = function (questionType, questionCreator) {\n        this.creatorHash[questionType] = questionCreator;\n    };\n    ReactQuestionFactory.prototype.getAllTypes = function () {\n        var result = new Array();\n        for (var key in this.creatorHash) {\n            result.push(key);\n        }\n        return result.sort();\n    };\n    ReactQuestionFactory.prototype.createQuestion = function (questionType, params) {\n        var creator = this.creatorHash[questionType];\n        if (creator == null)\n            return null;\n        return creator(params);\n    };\n    ReactQuestionFactory.Instance = new ReactQuestionFactory();\n    return ReactQuestionFactory;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_file.tsx\":\n/*!******************************************!*\\\n  !*** ./src/react/reactquestion_file.tsx ***!\n  \\******************************************/\n/*! exports provided: SurveyQuestionFile */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_885688__) {\n\n\"use strict\";\n__nested_webpack_require_885688__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_885688__.d(__nested_webpack_exports__, \"SurveyQuestionFile\", function() { return SurveyQuestionFile; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_885688__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_885688__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_885688__(/*! ./components/action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_885688__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_885688__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_885688__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_885688__(/*! ./components/loading-indicator */ \"./src/react/components/loading-indicator.tsx\");\n/* harmony import */ var _components_action_bar_action_bar_item__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_885688__(/*! ./components/action-bar/action-bar-item */ \"./src/react/components/action-bar/action-bar-item.tsx\");\n/* harmony import */ var _entries_react_ui_model__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_885688__(/*! ../entries/react-ui-model */ \"./src/entries/react-ui-model.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar SurveyQuestionFile = /** @class */ (function (_super) {\n    __extends(SurveyQuestionFile, _super);\n    function SurveyQuestionFile(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionFile.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionFile.prototype.renderElement = function () {\n        var _this = this;\n        var preview = this.question.allowShowPreview ? this.renderPreview() : null;\n        var loadingIndicator = this.question.showLoadingIndicator ? this.renderLoadingIndicator() : null;\n        var video = this.question.isPlayingVideo ? this.renderVideo() : null;\n        var fileDecorator = this.question.showFileDecorator ? this.renderFileDecorator() : null;\n        var clearButton = this.question.showRemoveButton ? this.renderClearButton(this.question.cssClasses.removeButton) : null;\n        var clearButtonBottom = this.question.showRemoveButtonBottom ? this.renderClearButton(this.question.cssClasses.removeButtonBottom) : null;\n        var fileNavigator = this.question.fileNavigatorVisible ? (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_1__[\"SurveyActionBar\"], { model: this.question.fileNavigator })) : null;\n        var fileInput = (this.isDisplayMode ?\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { type: \"file\", disabled: this.isDisplayMode, className: !this.isDisplayMode ? this.question.cssClasses.fileInput : this.question.getReadOnlyFileCss(), id: this.question.inputId, ref: function (input) { return (_this.setControl(input)); }, style: !this.isDisplayMode ? {} : { color: \"transparent\" }, multiple: this.question.allowMultiple, placeholder: this.question.title, accept: this.question.acceptedTypes }) : this.question.hasFileUI ?\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { type: \"file\", disabled: this.isDisplayMode, tabIndex: -1, className: !this.isDisplayMode ? this.question.cssClasses.fileInput : this.question.getReadOnlyFileCss(), id: this.question.inputId, ref: function (input) { return (_this.setControl(input)); }, style: !this.isDisplayMode ? {} : { color: \"transparent\" }, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage, multiple: this.question.allowMultiple, title: this.question.inputTitle, accept: this.question.acceptedTypes, capture: this.question.renderCapture }) : null);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.fileRootCss },\n            fileInput,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.dragArea, onDrop: this.question.onDrop, onDragOver: this.question.onDragOver, onDragLeave: this.question.onDragLeave, onDragEnter: this.question.onDragEnter },\n                fileDecorator,\n                loadingIndicator,\n                video,\n                clearButton,\n                preview,\n                clearButtonBottom,\n                fileNavigator)));\n    };\n    SurveyQuestionFile.prototype.renderFileDecorator = function () {\n        var chooseButton = this.question.showChooseButton ? this.renderChooseButton() : null;\n        var actionsContainer = this.question.actionsContainerVisible ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_1__[\"SurveyActionBar\"], { model: this.question.actionsContainer }) : null;\n        var noFileChosen = this.question.isEmpty() ? (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.cssClasses.noFileChosen }, this.question.noFileChosenCaption)) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getFileDecoratorCss() },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.cssClasses.dragAreaPlaceholder }, this.renderLocString(this.question.locRenderedPlaceholder)),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.wrapper },\n                chooseButton,\n                actionsContainer,\n                noFileChosen)));\n    };\n    SurveyQuestionFile.prototype.renderChooseButton = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_entries_react_ui_model__WEBPACK_IMPORTED_MODULE_7__[\"SurveyFileChooseButton\"], { data: { question: this.question } });\n    };\n    SurveyQuestionFile.prototype.renderClearButton = function (className) {\n        return !this.question.isUploading ? (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"button\", { type: \"button\", onClick: this.question.doClean, className: className },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, this.question.clearButtonCaption),\n            (!!this.question.cssClasses.removeButtonIconId) ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { iconName: this.question.cssClasses.removeButtonIconId, size: \"auto\", title: this.question.clearButtonCaption }) : null)) : null;\n    };\n    SurveyQuestionFile.prototype.renderPreview = function () {\n        return _entries_react_ui_model__WEBPACK_IMPORTED_MODULE_7__[\"ReactElementFactory\"].Instance.createElement(\"sv-file-preview\", { question: this.question });\n    };\n    SurveyQuestionFile.prototype.renderLoadingIndicator = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.loadingIndicator },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__[\"LoadingIndicatorComponent\"], null));\n    };\n    SurveyQuestionFile.prototype.renderVideo = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.videoContainer },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar_item__WEBPACK_IMPORTED_MODULE_6__[\"SurveyAction\"], { item: this.question.changeCameraAction }),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar_item__WEBPACK_IMPORTED_MODULE_6__[\"SurveyAction\"], { item: this.question.closeCameraAction }),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"video\", { autoPlay: true, playsInline: true, id: this.question.videoId, className: this.question.cssClasses.video }),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar_item__WEBPACK_IMPORTED_MODULE_6__[\"SurveyAction\"], { item: this.question.takePictureAction })));\n    };\n    return SurveyQuestionFile;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_4__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"file\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionFile, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_html.tsx\":\n/*!******************************************!*\\\n  !*** ./src/react/reactquestion_html.tsx ***!\n  \\******************************************/\n/*! exports provided: SurveyQuestionHtml */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_895892__) {\n\n\"use strict\";\n__nested_webpack_require_895892__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_895892__.d(__nested_webpack_exports__, \"SurveyQuestionHtml\", function() { return SurveyQuestionHtml; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_895892__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_895892__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_895892__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_895892__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionHtml = /** @class */ (function (_super) {\n    __extends(SurveyQuestionHtml, _super);\n    function SurveyQuestionHtml(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionHtml.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionHtml.prototype.componentDidMount = function () {\n        this.reactOnStrChanged();\n    };\n    SurveyQuestionHtml.prototype.componentWillUnmount = function () {\n        this.question.locHtml.onChanged = function () { };\n    };\n    SurveyQuestionHtml.prototype.componentDidUpdate = function (prevProps, prevState) {\n        this.reactOnStrChanged();\n    };\n    SurveyQuestionHtml.prototype.reactOnStrChanged = function () {\n        var _this = this;\n        this.question.locHtml.onChanged = function () {\n            _this.setState({ changed: !!_this.state && _this.state.changed ? _this.state.changed + 1 : 1 });\n        };\n    };\n    SurveyQuestionHtml.prototype.canRender = function () {\n        return _super.prototype.canRender.call(this) && !!this.question.html;\n    };\n    SurveyQuestionHtml.prototype.renderElement = function () {\n        var htmlValue = { __html: this.question.locHtml.renderedHtml };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.renderCssRoot, dangerouslySetInnerHTML: htmlValue }));\n    };\n    return SurveyQuestionHtml;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"html\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionHtml, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_matrix.tsx\":\n/*!********************************************!*\\\n  !*** ./src/react/reactquestion_matrix.tsx ***!\n  \\********************************************/\n/*! exports provided: SurveyQuestionMatrix, SurveyQuestionMatrixRow, SurveyQuestionMatrixCell */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_899672__) {\n\n\"use strict\";\n__nested_webpack_require_899672__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_899672__.d(__nested_webpack_exports__, \"SurveyQuestionMatrix\", function() { return SurveyQuestionMatrix; });\n/* harmony export (binding) */ __nested_webpack_require_899672__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixRow\", function() { return SurveyQuestionMatrixRow; });\n/* harmony export (binding) */ __nested_webpack_require_899672__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixCell\", function() { return SurveyQuestionMatrixCell; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_899672__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_899672__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_899672__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_899672__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_899672__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_899672__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionMatrix = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrix, _super);\n    function SurveyQuestionMatrix(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { rowsChanged: 0 };\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionMatrix.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrix.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        if (this.question) {\n            var self = this;\n            this.question.visibleRowsChangedCallback = function () {\n                self.setState({ rowsChanged: self.state.rowsChanged + 1 });\n            };\n        }\n    };\n    SurveyQuestionMatrix.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        if (this.question) {\n            this.question.visibleRowsChangedCallback = null;\n        }\n    };\n    SurveyQuestionMatrix.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.cssClasses;\n        var rowsTH = this.question.hasRows ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", null) : null;\n        var headers = [];\n        for (var i = 0; i < this.question.visibleColumns.length; i++) {\n            var column = this.question.visibleColumns[i];\n            var key = \"column\" + i;\n            var columText = this.renderLocString(column.locText);\n            var style = {};\n            if (!!this.question.columnMinWidth) {\n                style.minWidth = this.question.columnMinWidth;\n                style.width = this.question.columnMinWidth;\n            }\n            headers.push(react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { className: this.question.cssClasses.headerCell, style: style, key: key }, this.wrapCell({ column: column }, columText, \"column-header\")));\n        }\n        var rows = [];\n        var visibleRows = this.question.visibleRows;\n        for (var i = 0; i < visibleRows.length; i++) {\n            var row = visibleRows[i];\n            var key = \"row-\" + row.name + \"-\" + i;\n            rows.push(react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixRow, { key: key, question: this.question, cssClasses: cssClasses, row: row, isFirst: i == 0 }));\n        }\n        var header = !this.question.showHeader ? null : (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"thead\", null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", null,\n                rowsTH,\n                headers)));\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.tableWrapper, ref: function (root) { return (_this.setControl(root)); } },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"fieldset\", null,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"legend\", { className: \"sv-hidden\" }, this.question.locTitle.renderedHtml),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"table\", { className: this.question.getTableCss() },\n                    header,\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tbody\", null, rows)))));\n    };\n    return SurveyQuestionMatrix;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyQuestionMatrixRow = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixRow, _super);\n    function SurveyQuestionMatrixRow(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionMatrixRow.prototype.getStateElement = function () {\n        if (!!this.row)\n            return this.row.item;\n        return _super.prototype.getStateElement.call(this);\n    };\n    Object.defineProperty(SurveyQuestionMatrixRow.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixRow.prototype, \"row\", {\n        get: function () {\n            return this.props.row;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixRow.prototype.wrapCell = function (cell, element, reason) {\n        if (!reason) {\n            return element;\n        }\n        var survey = this.question.survey;\n        var wrapper = null;\n        if (survey) {\n            wrapper = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__[\"ReactSurveyElementsWrapper\"].wrapMatrixCell(survey, element, cell, reason);\n        }\n        return wrapper !== null && wrapper !== void 0 ? wrapper : element;\n    };\n    SurveyQuestionMatrixRow.prototype.canRender = function () {\n        return !!this.row;\n    };\n    SurveyQuestionMatrixRow.prototype.renderElement = function () {\n        var rowsTD = null;\n        if (this.question.hasRows) {\n            var rowText = this.renderLocString(this.row.locText);\n            var style = {};\n            if (!!this.question.rowTitleWidth) {\n                style.minWidth = this.question.rowTitleWidth;\n                style.width = this.question.rowTitleWidth;\n            }\n            rowsTD = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { style: style, className: this.row.rowTextClasses }, this.wrapCell({ row: this.row }, rowText, \"row-header\"));\n        }\n        var tds = this.generateTds();\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", { className: this.row.rowClasses || undefined },\n            rowsTD,\n            tds));\n    };\n    SurveyQuestionMatrixRow.prototype.generateTds = function () {\n        var _this = this;\n        var tds = [];\n        var row = this.row;\n        var cellComponent = this.question.cellComponent;\n        var _loop_1 = function () {\n            var td = null;\n            var column = this_1.question.visibleColumns[i];\n            var key = \"value\" + i;\n            var itemClass = this_1.question.getItemClass(row, column);\n            if (this_1.question.hasCellText) {\n                var getHandler = function (column) { return function () { return _this.cellClick(row, column); }; };\n                td = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: key, className: itemClass, onClick: getHandler ? getHandler(column) : function () { } }, this_1.renderLocString(this_1.question.getCellDisplayLocText(row.name, column))));\n            }\n            else {\n                var renderedCell = _element_factory__WEBPACK_IMPORTED_MODULE_4__[\"ReactElementFactory\"].Instance.createElement(cellComponent, {\n                    question: this_1.question,\n                    row: this_1.row,\n                    column: column,\n                    columnIndex: i,\n                    cssClasses: this_1.cssClasses,\n                    cellChanged: function () { _this.cellClick(_this.row, column); }\n                });\n                td = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: key, \"data-responsive-title\": column.locText.renderedHtml, className: this_1.question.cssClasses.cell }, renderedCell));\n            }\n            tds.push(td);\n        };\n        var this_1 = this;\n        for (var i = 0; i < this.question.visibleColumns.length; i++) {\n            _loop_1();\n        }\n        return tds;\n    };\n    SurveyQuestionMatrixRow.prototype.cellClick = function (row, column) {\n        row.value = column.value;\n        this.setState({ value: this.row.value });\n    };\n    return SurveyQuestionMatrixRow;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\nvar SurveyQuestionMatrixCell = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixCell, _super);\n    function SurveyQuestionMatrixCell(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnMouseDown = _this.handleOnMouseDown.bind(_this);\n        _this.handleOnChange = _this.handleOnChange.bind(_this);\n        return _this;\n    }\n    SurveyQuestionMatrixCell.prototype.handleOnChange = function (event) {\n        if (!!this.props.cellChanged) {\n            this.props.cellChanged();\n        }\n    };\n    SurveyQuestionMatrixCell.prototype.handleOnMouseDown = function (event) {\n        this.question.onMouseDown();\n    };\n    Object.defineProperty(SurveyQuestionMatrixCell.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixCell.prototype, \"row\", {\n        get: function () {\n            return this.props.row;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixCell.prototype, \"column\", {\n        get: function () {\n            return this.props.column;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixCell.prototype, \"columnIndex\", {\n        get: function () {\n            return this.props.columnIndex;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixCell.prototype.canRender = function () {\n        return !!this.question && !!this.row;\n    };\n    SurveyQuestionMatrixCell.prototype.renderElement = function () {\n        var isChecked = this.row.value == this.column.value;\n        var inputId = this.question.inputId + \"_\" + this.row.name + \"_\" + this.columnIndex;\n        var itemClass = this.question.getItemClass(this.row, this.column);\n        var mobileSpan = this.question.isMobile ?\n            (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.cssClasses.cellResponsiveTitle }, this.renderLocString(this.column.locText)))\n            : undefined;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { onMouseDown: this.handleOnMouseDown, className: itemClass },\n            this.renderInput(inputId, isChecked),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.cssClasses.materialDecorator }, this.question.itemSvgIcon ?\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: this.cssClasses.itemDecorator },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.itemSvgIcon })) :\n                null),\n            mobileSpan));\n    };\n    SurveyQuestionMatrixCell.prototype.renderInput = function (inputId, isChecked) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { id: inputId, type: \"radio\", className: this.cssClasses.itemValue, name: this.row.fullName, value: this.column.value, disabled: this.row.isReadOnly, checked: isChecked, onChange: this.handleOnChange, \"aria-required\": this.question.a11y_input_ariaRequired, \"aria-label\": this.question.getCellAriaLabel(this.row.locText.renderedHtml, this.column.locText.renderedHtml), \"aria-invalid\": this.question.a11y_input_ariaInvalid, \"aria-errormessage\": this.question.a11y_input_ariaErrormessage }));\n    };\n    return SurveyQuestionMatrixCell;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_4__[\"ReactElementFactory\"].Instance.registerElement(\"survey-matrix-cell\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixCell, props);\n});\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"matrix\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrix, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_matrixdropdown.tsx\":\n/*!****************************************************!*\\\n  !*** ./src/react/reactquestion_matrixdropdown.tsx ***!\n  \\****************************************************/\n/*! exports provided: SurveyQuestionMatrixDropdown */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_914059__) {\n\n\"use strict\";\n__nested_webpack_require_914059__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_914059__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdown\", function() { return SurveyQuestionMatrixDropdown; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_914059__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_914059__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_matrixdropdownbase__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_914059__(/*! ./reactquestion_matrixdropdownbase */ \"./src/react/reactquestion_matrixdropdownbase.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_914059__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionMatrixDropdown = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDropdown, _super);\n    function SurveyQuestionMatrixDropdown(props) {\n        return _super.call(this, props) || this;\n    }\n    return SurveyQuestionMatrixDropdown;\n}(_reactquestion_matrixdropdownbase__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionMatrixDropdownBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"matrixdropdown\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixDropdown, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_matrixdropdownbase.tsx\":\n/*!********************************************************!*\\\n  !*** ./src/react/reactquestion_matrixdropdownbase.tsx ***!\n  \\********************************************************/\n/*! exports provided: SurveyQuestionMatrixDropdownBase, SurveyQuestionMatrixDropdownCell */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_916713__) {\n\n\"use strict\";\n__nested_webpack_require_916713__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_916713__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdownBase\", function() { return SurveyQuestionMatrixDropdownBase; });\n/* harmony export (binding) */ __nested_webpack_require_916713__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDropdownCell\", function() { return SurveyQuestionMatrixDropdownCell; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_916713__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_916713__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_916713__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_916713__(/*! ./reactquestion */ \"./src/react/reactquestion.tsx\");\n/* harmony import */ var _reactquestion_checkbox__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_916713__(/*! ./reactquestion_checkbox */ \"./src/react/reactquestion_checkbox.tsx\");\n/* harmony import */ var _reactquestion_radiogroup__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_916713__(/*! ./reactquestion_radiogroup */ \"./src/react/reactquestion_radiogroup.tsx\");\n/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_916713__(/*! ./panel */ \"./src/react/panel.tsx\");\n/* harmony import */ var _components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_916713__(/*! ./components/action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\n/* harmony import */ var _components_matrix_row__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_916713__(/*! ./components/matrix/row */ \"./src/react/components/matrix/row.tsx\");\n/* harmony import */ var _components_matrix_actions_drag_drop_icon_drag_drop_icon__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_916713__(/*! ./components/matrix-actions/drag-drop-icon/drag-drop-icon */ \"./src/react/components/matrix-actions/drag-drop-icon/drag-drop-icon.tsx\");\n/* harmony import */ var _reactquestion_comment__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_916713__(/*! ./reactquestion_comment */ \"./src/react/reactquestion_comment.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_916713__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\nvar SurveyQuestionMatrixDropdownBase = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDropdownBase, _super);\n    function SurveyQuestionMatrixDropdownBase(props) {\n        var _this = _super.call(this, props) || this;\n        //Create rendered table in contructor and not on rendering\n        var table = _this.question.renderedTable;\n        _this.state = _this.getState();\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixDropdownBase.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixDropdownBase.prototype.getState = function (prevState) {\n        if (prevState === void 0) { prevState = null; }\n        return { rowCounter: !prevState ? 0 : prevState.rowCounter + 1 };\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.updateStateOnCallback = function () {\n        if (this.isRendering)\n            return;\n        this.setState(this.getState(this.state));\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.componentDidMount = function () {\n        var _this = this;\n        _super.prototype.componentDidMount.call(this);\n        this.question.visibleRowsChangedCallback = function () {\n            _this.updateStateOnCallback();\n        };\n        this.question.onRenderedTableResetCallback = function () {\n            _this.question.renderedTable.renderedRowsChangedCallback = function () {\n                _this.updateStateOnCallback();\n            };\n            _this.updateStateOnCallback();\n        };\n        this.question.renderedTable.renderedRowsChangedCallback = function () {\n            _this.updateStateOnCallback();\n        };\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.question.visibleRowsChangedCallback = function () { };\n        this.question.onRenderedTableResetCallback = function () { };\n        this.question.renderedTable.renderedRowsChangedCallback = function () { };\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderElement = function () {\n        return this.renderTableDiv();\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderTableDiv = function () {\n        var _this = this;\n        var header = this.renderHeader();\n        var footers = this.renderFooter();\n        var rows = this.renderRows();\n        var divStyle = this.question.showHorizontalScroll\n            ? { overflowX: \"scroll\" }\n            : {};\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { style: divStyle, className: this.question.cssClasses.tableWrapper, ref: function (root) { return (_this.setControl(root)); } },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"table\", { className: this.question.getTableCss() },\n                header,\n                rows,\n                footers)));\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderHeader = function () {\n        var table = this.question.renderedTable;\n        if (!table.showHeader)\n            return null;\n        var headers = [];\n        var cells = table.headerRow.cells;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            var key = \"column\" + i;\n            var columnStyle = {};\n            if (!!cell.width) {\n                columnStyle.width = cell.width;\n            }\n            if (!!cell.minWidth) {\n                columnStyle.minWidth = cell.minWidth;\n            }\n            var cellContent = this.renderCellContent(cell, \"column-header\", {});\n            var header = cell.hasTitle ?\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"th\", { className: cell.className, key: key, style: columnStyle },\n                    \" \",\n                    cellContent,\n                    \" \")\n                : react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { className: cell.className, key: key, style: columnStyle });\n            headers.push(header);\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"thead\", null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", null, headers)));\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderFooter = function () {\n        var table = this.question.renderedTable;\n        if (!table.showFooter)\n            return null;\n        var row = this.renderRow(\"footer\", table.footerRow, this.question.cssClasses, \"row-footer\");\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tfoot\", null, row);\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderRows = function () {\n        var cssClasses = this.question.cssClasses;\n        var rows = [];\n        var renderedRows = this.question.renderedTable.rows;\n        for (var i = 0; i < renderedRows.length; i++) {\n            rows.push(this.renderRow(renderedRows[i].id, renderedRows[i], cssClasses));\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tbody\", null, rows);\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderRow = function (keyValue, row, cssClasses, reason) {\n        var matrixrow = [];\n        var cells = row.cells;\n        for (var i = 0; i < cells.length; i++) {\n            matrixrow.push(this.renderCell(cells[i], i, cssClasses, reason));\n        }\n        var key = \"row\" + keyValue;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], { key: key }, (reason == \"row-footer\") ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", null, matrixrow) : react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_matrix_row__WEBPACK_IMPORTED_MODULE_7__[\"MatrixRow\"], { model: row, parentMatrix: this.question }, matrixrow)));\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderCell = function (cell, index, cssClasses, reason) {\n        var key = \"cell\" + index;\n        if (cell.hasQuestion) {\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixDropdownCell, { key: key, cssClasses: cssClasses, cell: cell, creator: this.creator, reason: reason }));\n        }\n        var calcReason = reason;\n        if (!calcReason) {\n            calcReason = cell.hasTitle ? \"row-header\" : \"\";\n        }\n        var cellContent = this.renderCellContent(cell, calcReason, cssClasses);\n        var cellStyle = null;\n        if (!!cell.width || !!cell.minWidth) {\n            cellStyle = {};\n            if (!!cell.width)\n                cellStyle.width = cell.width;\n            if (!!cell.minWidth)\n                cellStyle.minWidth = cell.minWidth;\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { className: cell.className, key: key, style: cellStyle, colSpan: cell.colSpans, \"data-responsive-title\": cell.headers, title: cell.getTitle() }, cellContent));\n    };\n    SurveyQuestionMatrixDropdownBase.prototype.renderCellContent = function (cell, reason, cssClasses) {\n        var cellContent = null;\n        var cellStyle = null;\n        if (!!cell.width || !!cell.minWidth) {\n            cellStyle = {};\n            if (!!cell.width)\n                cellStyle.width = cell.width;\n            if (!!cell.minWidth)\n                cellStyle.minWidth = cell.minWidth;\n        }\n        if (cell.hasTitle) {\n            reason = \"row-header\";\n            var str = this.renderLocString(cell.locTitle);\n            var require_1 = !!cell.column ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixHeaderRequired, { column: cell.column, question: this.question }) : null;\n            cellContent = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n                str,\n                require_1));\n        }\n        if (cell.isDragHandlerCell) {\n            cellContent = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_matrix_actions_drag_drop_icon_drag_drop_icon__WEBPACK_IMPORTED_MODULE_8__[\"SurveyQuestionMatrixDynamicDragDropIcon\"], { item: { data: { row: cell.row, question: this.question } } })));\n        }\n        if (cell.isActionsCell) {\n            cellContent = (_element_factory__WEBPACK_IMPORTED_MODULE_10__[\"ReactElementFactory\"].Instance.createElement(\"sv-matrixdynamic-actions-cell\", {\n                question: this.question,\n                cssClasses: cssClasses, cell: cell,\n                model: cell.item.getData()\n            }));\n        }\n        if (cell.hasPanel) {\n            cellContent = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_panel__WEBPACK_IMPORTED_MODULE_5__[\"SurveyPanel\"], { key: cell.panel.id, element: cell.panel, survey: this.question.survey, cssClasses: cssClasses, isDisplayMode: this.isDisplayMode, creator: this.creator }));\n        }\n        if (cell.isErrorsCell) {\n            if (cell.isErrorsCell) {\n                return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionErrorCell\"], { question: cell.question, creator: this.creator }));\n            }\n        }\n        if (!cellContent)\n            return null;\n        var readyCell = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null, cellContent));\n        return this.wrapCell(cell, readyCell, reason);\n    };\n    return SurveyQuestionMatrixDropdownBase;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyQuestionMatrixActionsCell = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixActionsCell, _super);\n    function SurveyQuestionMatrixActionsCell(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixActionsCell.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixActionsCell.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_6__[\"SurveyActionBar\"], { model: this.model, handleClick: false }));\n    };\n    return SurveyQuestionMatrixActionsCell;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n_element_factory__WEBPACK_IMPORTED_MODULE_10__[\"ReactElementFactory\"].Instance.registerElement(\"sv-matrixdynamic-actions-cell\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixActionsCell, props);\n});\nvar SurveyQuestionMatrixHeaderRequired = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixHeaderRequired, _super);\n    function SurveyQuestionMatrixHeaderRequired(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixHeaderRequired.prototype, \"column\", {\n        get: function () {\n            return this.props.column;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixHeaderRequired.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixHeaderRequired.prototype.getStateElement = function () {\n        return this.column;\n    };\n    SurveyQuestionMatrixHeaderRequired.prototype.renderElement = function () {\n        if (!this.column.isRenderedRequired)\n            return null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, \"\\u00A0\"),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.question.cssClasses.cellRequiredText }, this.column.requiredText)));\n    };\n    return SurveyQuestionMatrixHeaderRequired;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\nvar SurveyQuestionMatrixDropdownCell = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDropdownCell, _super);\n    function SurveyQuestionMatrixDropdownCell(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixDropdownCell.prototype, \"cell\", {\n        get: function () {\n            return this.props.cell;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionMatrixDropdownCell.prototype, \"itemCss\", {\n        get: function () {\n            return !!this.cell ? this.cell.className : \"\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixDropdownCell.prototype.getQuestion = function () {\n        var q = _super.prototype.getQuestion.call(this);\n        if (!!q)\n            return q;\n        return !!this.cell ? this.cell.question : null;\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.doAfterRender = function () {\n        var el = this.cellRef.current;\n        if (el &&\n            this.cell &&\n            this.question &&\n            this.question.survey &&\n            el.getAttribute(\"data-rendered\") !== \"r\") {\n            el.setAttribute(\"data-rendered\", \"r\");\n            var options = {\n                cell: this.cell,\n                cellQuestion: this.question,\n                htmlElement: el,\n                row: this.cell.row,\n                column: this.cell.cell.column,\n            };\n            this.question.survey.matrixAfterCellRender(this.question, options);\n            this.question.afterRenderCore(el);\n        }\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.getShowErrors = function () {\n        return (this.question.isVisible &&\n            (!this.cell.isChoice || this.cell.isFirstChoice));\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.getCellStyle = function () {\n        var res = _super.prototype.getCellStyle.call(this);\n        if (!!this.cell.width || !!this.cell.minWidth) {\n            if (!res)\n                res = {};\n            if (!!this.cell.width)\n                res.width = this.cell.width;\n            if (!!this.cell.minWidth)\n                res.minWidth = this.cell.minWidth;\n        }\n        return res;\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.getHeaderText = function () {\n        return this.cell.headers;\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.renderQuestion = function () {\n        if (!this.cell.isChoice)\n            return _reactquestion__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestion\"].renderQuestionBody(this.creator, this.question);\n        if (this.cell.isOtherChoice)\n            return this.renderOtherComment();\n        if (this.cell.isCheckbox)\n            return this.renderCellCheckboxButton();\n        return this.renderCellRadiogroupButton();\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.renderOtherComment = function () {\n        var question = this.cell.question;\n        var cssClasses = question.cssClasses || {};\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion_comment__WEBPACK_IMPORTED_MODULE_9__[\"SurveyQuestionOtherValueItem\"], { question: question, cssClasses: cssClasses, otherCss: cssClasses.other, isDisplayMode: question.isInputReadOnly });\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.renderCellCheckboxButton = function () {\n        var key = this.cell.question.id + \"item\" + this.cell.choiceIndex;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion_checkbox__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionCheckboxItem\"], { key: key, question: this.cell.question, cssClasses: this.cell.question.cssClasses, isDisplayMode: this.cell.question.isInputReadOnly, item: this.cell.item, isFirst: this.cell.isFirstChoice, index: this.cell.choiceIndex.toString(), hideCaption: true }));\n    };\n    SurveyQuestionMatrixDropdownCell.prototype.renderCellRadiogroupButton = function () {\n        var key = this.cell.question.id + \"item\" + this.cell.choiceIndex;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion_radiogroup__WEBPACK_IMPORTED_MODULE_4__[\"SurveyQuestionRadioItem\"], { key: key, question: this.cell.question, cssClasses: this.cell.question.cssClasses, isDisplayMode: this.cell.question.isInputReadOnly, item: this.cell.item, index: this.cell.choiceIndex.toString(), isChecked: this.cell.question.value === this.cell.item.value, isDisabled: this.cell.question.isReadOnly || !this.cell.item.isEnabled, hideCaption: true }));\n    };\n    return SurveyQuestionMatrixDropdownCell;\n}(_reactquestion__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionAndErrorsCell\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_matrixdynamic.tsx\":\n/*!***************************************************!*\\\n  !*** ./src/react/reactquestion_matrixdynamic.tsx ***!\n  \\***************************************************/\n/*! exports provided: SurveyQuestionMatrixDynamic, SurveyQuestionMatrixDynamicAddButton */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_937302__) {\n\n\"use strict\";\n__nested_webpack_require_937302__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_937302__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamic\", function() { return SurveyQuestionMatrixDynamic; });\n/* harmony export (binding) */ __nested_webpack_require_937302__.d(__nested_webpack_exports__, \"SurveyQuestionMatrixDynamicAddButton\", function() { return SurveyQuestionMatrixDynamicAddButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_937302__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_937302__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_937302__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactquestion_matrixdropdownbase__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_937302__(/*! ./reactquestion_matrixdropdownbase */ \"./src/react/reactquestion_matrixdropdownbase.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_937302__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_937302__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionMatrixDynamic = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDynamic, _super);\n    function SurveyQuestionMatrixDynamic(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnRowAddClick = _this.handleOnRowAddClick.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixDynamic.prototype, \"matrix\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixDynamic.prototype.handleOnRowAddClick = function (event) {\n        this.matrix.addRowUI();\n    };\n    SurveyQuestionMatrixDynamic.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        var showTable = this.question.renderedTable.showTable;\n        var mainDiv = showTable\n            ? this.renderTableDiv()\n            : this.renderNoRowsContent(cssClasses);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null,\n            this.renderAddRowButtonOnTop(cssClasses),\n            mainDiv,\n            this.renderAddRowButtonOnBottom(cssClasses)));\n    };\n    SurveyQuestionMatrixDynamic.prototype.renderAddRowButtonOnTop = function (cssClasses) {\n        if (!this.matrix.renderedTable.showAddRowOnTop)\n            return null;\n        return this.renderAddRowButton(cssClasses);\n    };\n    SurveyQuestionMatrixDynamic.prototype.renderAddRowButtonOnBottom = function (cssClasses) {\n        if (!this.matrix.renderedTable.showAddRowOnBottom)\n            return null;\n        return this.renderAddRowButton(cssClasses);\n    };\n    SurveyQuestionMatrixDynamic.prototype.renderNoRowsContent = function (cssClasses) {\n        var text = this.renderLocString(this.matrix.locEmptyRowsText);\n        var textDiv = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.emptyRowsText }, text);\n        var btn = this.matrix.renderedTable.showAddRow ? this.renderAddRowButton(cssClasses, true) : undefined;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.emptyRowsSection },\n            textDiv,\n            btn));\n    };\n    SurveyQuestionMatrixDynamic.prototype.renderAddRowButton = function (cssClasses, isEmptySection) {\n        if (isEmptySection === void 0) { isEmptySection = false; }\n        return _element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.createElement(\"sv-matrixdynamic-add-btn\", {\n            question: this.question,\n            cssClasses: cssClasses, isEmptySection: isEmptySection\n        });\n    };\n    return SurveyQuestionMatrixDynamic;\n}(_reactquestion_matrixdropdownbase__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionMatrixDropdownBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"matrixdynamic\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixDynamic, props);\n});\nvar SurveyQuestionMatrixDynamicAddButton = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMatrixDynamicAddButton, _super);\n    function SurveyQuestionMatrixDynamicAddButton(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnRowAddClick = _this.handleOnRowAddClick.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionMatrixDynamicAddButton.prototype, \"matrix\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMatrixDynamicAddButton.prototype.handleOnRowAddClick = function (event) {\n        this.matrix.addRowUI();\n    };\n    SurveyQuestionMatrixDynamicAddButton.prototype.renderElement = function () {\n        var addRowText = this.renderLocString(this.matrix.locAddRowText);\n        var addButton = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"button\", { className: this.matrix.getAddRowButtonCss(this.props.isEmptySection), type: \"button\", disabled: this.matrix.isInputReadOnly, onClick: this.matrix.isDesignMode ? undefined : this.handleOnRowAddClick },\n            addRowText,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.props.cssClasses.iconAdd })));\n        return (this.props.isEmptySection ? addButton : react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.props.cssClasses.footer }, addButton));\n    };\n    return SurveyQuestionMatrixDynamicAddButton;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_4__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.registerElement(\"sv-matrixdynamic-add-btn\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMatrixDynamicAddButton, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_multipletext.tsx\":\n/*!**************************************************!*\\\n  !*** ./src/react/reactquestion_multipletext.tsx ***!\n  \\**************************************************/\n/*! exports provided: SurveyQuestionMultipleText, SurveyMultipleTextItem, SurveyMultipleTextItemEditor */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_944740__) {\n\n\"use strict\";\n__nested_webpack_require_944740__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_944740__.d(__nested_webpack_exports__, \"SurveyQuestionMultipleText\", function() { return SurveyQuestionMultipleText; });\n/* harmony export (binding) */ __nested_webpack_require_944740__.d(__nested_webpack_exports__, \"SurveyMultipleTextItem\", function() { return SurveyMultipleTextItem; });\n/* harmony export (binding) */ __nested_webpack_require_944740__.d(__nested_webpack_exports__, \"SurveyMultipleTextItemEditor\", function() { return SurveyMultipleTextItemEditor; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_944740__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_944740__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_944740__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_944740__(/*! ./reactquestion */ \"./src/react/reactquestion.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_944740__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_title_title_content__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_944740__(/*! ./components/title/title-content */ \"./src/react/components/title/title-content.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar SurveyQuestionMultipleText = /** @class */ (function (_super) {\n    __extends(SurveyQuestionMultipleText, _super);\n    function SurveyQuestionMultipleText(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionMultipleText.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionMultipleText.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        var tableRows = this.question.getRows();\n        var rows = [];\n        for (var i = 0; i < tableRows.length; i++) {\n            if (tableRows[i].isVisible) {\n                rows.push(this.renderRow(i, tableRows[i].cells, cssClasses));\n            }\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"table\", { className: this.question.getQuestionRootCss() },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tbody\", null, rows)));\n    };\n    SurveyQuestionMultipleText.prototype.renderCell = function (cell, cssClasses, index) {\n        var cellContent;\n        var focusIn = function () { cell.item.focusIn(); };\n        if (cell.isErrorsCell) {\n            cellContent = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionErrorCell\"], { question: cell.item.editor, creator: this.creator });\n        }\n        else {\n            cellContent = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyMultipleTextItem, { question: this.question, item: cell.item, creator: this.creator, cssClasses: cssClasses });\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"td\", { key: \"item\" + index, className: cell.className, onFocus: focusIn }, cellContent));\n    };\n    SurveyQuestionMultipleText.prototype.renderRow = function (rowIndex, cells, cssClasses) {\n        var key = \"item\" + rowIndex;\n        var tds = [];\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            tds.push(this.renderCell(cell, cssClasses, i));\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"tr\", { key: key, className: cssClasses.row }, tds));\n    };\n    return SurveyQuestionMultipleText;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyMultipleTextItem = /** @class */ (function (_super) {\n    __extends(SurveyMultipleTextItem, _super);\n    function SurveyMultipleTextItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyMultipleTextItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyMultipleTextItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyMultipleTextItem.prototype.getStateElements = function () {\n        return [this.item, this.item.editor];\n    };\n    Object.defineProperty(SurveyMultipleTextItem.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyMultipleTextItem.prototype.renderElement = function () {\n        var item = this.item;\n        var cssClasses = this.cssClasses;\n        var titleStyle = {};\n        if (!!this.question.itemTitleWidth) {\n            titleStyle.minWidth = this.question.itemTitleWidth;\n            titleStyle.width = this.question.itemTitleWidth;\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { className: this.question.getItemLabelCss(item) },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.itemTitle, style: titleStyle },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_title_title_content__WEBPACK_IMPORTED_MODULE_4__[\"TitleContent\"], { element: item.editor, cssClasses: item.editor.cssClasses })),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyMultipleTextItemEditor, { cssClasses: cssClasses, itemCss: this.question.getItemCss(), question: item.editor, creator: this.creator })));\n    };\n    return SurveyMultipleTextItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\nvar SurveyMultipleTextItemEditor = /** @class */ (function (_super) {\n    __extends(SurveyMultipleTextItemEditor, _super);\n    function SurveyMultipleTextItemEditor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SurveyMultipleTextItemEditor.prototype.renderElement = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.itemCss }, this.renderContent());\n    };\n    return SurveyMultipleTextItemEditor;\n}(_reactquestion__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionAndErrorsWrapped\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"multipletext\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionMultipleText, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_paneldynamic.tsx\":\n/*!**************************************************!*\\\n  !*** ./src/react/reactquestion_paneldynamic.tsx ***!\n  \\**************************************************/\n/*! exports provided: SurveyQuestionPanelDynamic, SurveyQuestionPanelDynamicItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_952739__) {\n\n\"use strict\";\n__nested_webpack_require_952739__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_952739__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamic\", function() { return SurveyQuestionPanelDynamic; });\n/* harmony export (binding) */ __nested_webpack_require_952739__.d(__nested_webpack_exports__, \"SurveyQuestionPanelDynamicItem\", function() { return SurveyQuestionPanelDynamicItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_952739__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_952739__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_952739__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_952739__(/*! ./panel */ \"./src/react/panel.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_952739__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_952739__(/*! ./components/action-bar/action-bar */ \"./src/react/components/action-bar/action-bar.tsx\");\n/* harmony import */ var _components_paneldynamic_actions_paneldynamic_next_btn__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_952739__(/*! ./components/paneldynamic-actions/paneldynamic-next-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-next-btn.tsx\");\n/* harmony import */ var _components_paneldynamic_actions_paneldynamic_prev_btn__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_952739__(/*! ./components/paneldynamic-actions/paneldynamic-prev-btn */ \"./src/react/components/paneldynamic-actions/paneldynamic-prev-btn.tsx\");\n/* harmony import */ var _components_paneldynamic_actions_paneldynamic_progress_text__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_952739__(/*! ./components/paneldynamic-actions/paneldynamic-progress-text */ \"./src/react/components/paneldynamic-actions/paneldynamic-progress-text.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_952739__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\nvar SurveyQuestionPanelDynamic = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamic, _super);\n    function SurveyQuestionPanelDynamic(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionPanelDynamic.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionPanelDynamic.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.setState({ panelCounter: 0 });\n        var self = this;\n        this.question.panelCountChangedCallback = function () {\n            self.updateQuestionRendering();\n        };\n        this.question.currentIndexChangedCallback = function () {\n            self.updateQuestionRendering();\n        };\n        this.question.renderModeChangedCallback = function () {\n            self.updateQuestionRendering();\n        };\n    };\n    SurveyQuestionPanelDynamic.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.question.panelCountChangedCallback = function () { };\n        this.question.currentIndexChangedCallback = function () { };\n        this.question.renderModeChangedCallback = function () { };\n    };\n    SurveyQuestionPanelDynamic.prototype.updateQuestionRendering = function () {\n        this.setState({\n            panelCounter: this.state ? this.state.panelCounter + 1 : 1,\n        });\n    };\n    SurveyQuestionPanelDynamic.prototype.renderElement = function () {\n        var panels = [];\n        if (this.question.isRenderModeList) {\n            for (var i = 0; i < this.question.panels.length; i++) {\n                var panel = this.question.panels[i];\n                panels.push(react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionPanelDynamicItem, { key: panel.id, element: panel, question: this.question, index: i, cssClasses: this.question.cssClasses, isDisplayMode: this.isDisplayMode, creator: this.creator }));\n            }\n        }\n        else {\n            if (this.question.currentPanel != null) {\n                var panel = this.question.currentPanel;\n                panels.push(react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionPanelDynamicItem, { key: this.question.currentIndex, element: panel, question: this.question, index: this.question.currentIndex, cssClasses: this.question.cssClasses, isDisplayMode: this.isDisplayMode, creator: this.creator }));\n            }\n        }\n        var btnAdd = this.question.isRenderModeList && this.question[\"showLegacyNavigation\"]\n            ? this.renderAddRowButton()\n            : null;\n        var navTop = this.question.isProgressTopShowing\n            ? this.renderNavigator()\n            : null;\n        var navBottom = this.question.isProgressBottomShowing\n            ? this.renderNavigator()\n            : null;\n        var style = {};\n        var navV2 = this.renderNavigatorV2();\n        var noEntriesPlaceholder = this.renderPlaceholder();\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.root },\n            noEntriesPlaceholder,\n            navTop,\n            panels,\n            navBottom,\n            btnAdd,\n            navV2));\n    };\n    SurveyQuestionPanelDynamic.prototype.renderNavigator = function () {\n        if (!this.question[\"showLegacyNavigation\"]) {\n            if (this.question.isRangeShowing && this.question.isProgressTopShowing) {\n                return this.renderRange();\n            }\n            else {\n                return null;\n            }\n        }\n        var range = this.question.isRangeShowing ? this.renderRange() : null;\n        var btnPrev = this.rendrerPrevButton();\n        var btnNext = this.rendrerNextButton();\n        var btnAdd = this.renderAddRowButton();\n        var progressClass = this.question.isProgressTopShowing\n            ? this.question.cssClasses.progressTop\n            : this.question.cssClasses.progressBottom;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: progressClass },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { style: { clear: \"both\" } },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.progressContainer },\n                    btnPrev,\n                    range,\n                    btnNext),\n                btnAdd,\n                this.renderProgressText())));\n    };\n    SurveyQuestionPanelDynamic.prototype.renderProgressText = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_paneldynamic_actions_paneldynamic_progress_text__WEBPACK_IMPORTED_MODULE_7__[\"SurveyQuestionPanelDynamicProgressText\"], { data: { question: this.question } }));\n    };\n    SurveyQuestionPanelDynamic.prototype.rendrerPrevButton = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_paneldynamic_actions_paneldynamic_prev_btn__WEBPACK_IMPORTED_MODULE_6__[\"SurveyQuestionPanelDynamicPrevButton\"], { data: { question: this.question } }));\n    };\n    SurveyQuestionPanelDynamic.prototype.rendrerNextButton = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_paneldynamic_actions_paneldynamic_next_btn__WEBPACK_IMPORTED_MODULE_5__[\"SurveyQuestionPanelDynamicNextButton\"], { data: { question: this.question } }));\n    };\n    SurveyQuestionPanelDynamic.prototype.renderRange = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.progress },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.progressBar, style: { width: this.question.progress }, role: \"progressbar\" })));\n    };\n    SurveyQuestionPanelDynamic.prototype.renderAddRowButton = function () {\n        return _element_factory__WEBPACK_IMPORTED_MODULE_8__[\"ReactElementFactory\"].Instance.createElement(\"sv-paneldynamic-add-btn\", {\n            data: { question: this.question }\n        });\n    };\n    SurveyQuestionPanelDynamic.prototype.renderNavigatorV2 = function () {\n        if (!this.question.showNavigation)\n            return null;\n        var range = this.question.isRangeShowing && this.question.isProgressBottomShowing ? this.renderRange() : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.footer },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"hr\", { className: this.question.cssClasses.separator }),\n            range,\n            this.question.footerToolbar.visibleActions.length ? (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.footerButtonsContainer },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_action_bar_action_bar__WEBPACK_IMPORTED_MODULE_4__[\"SurveyActionBar\"], { model: this.question.footerToolbar }))) : null));\n    };\n    SurveyQuestionPanelDynamic.prototype.renderPlaceholder = function () {\n        if (this.question.getShowNoEntriesPlaceholder()) {\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.noEntriesPlaceholder },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, this.renderLocString(this.question.locNoEntriesText)),\n                this.renderAddRowButton()));\n        }\n        return null;\n    };\n    return SurveyQuestionPanelDynamic;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyQuestionPanelDynamicItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionPanelDynamicItem, _super);\n    function SurveyQuestionPanelDynamicItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyQuestionPanelDynamicItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionPanelDynamicItem.prototype, \"index\", {\n        get: function () {\n            return this.props.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionPanelDynamicItem.prototype.getSurvey = function () {\n        return !!this.question ? this.question.survey : null;\n    };\n    SurveyQuestionPanelDynamicItem.prototype.getCss = function () {\n        var survey = this.getSurvey();\n        return !!survey ? survey.getCss() : {};\n    };\n    SurveyQuestionPanelDynamicItem.prototype.render = function () {\n        var panel = _super.prototype.render.call(this);\n        var removeButton = this.renderButton();\n        var separator = this.question.showSeparator(this.index) ?\n            (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"hr\", { className: this.question.cssClasses.separator })) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getPanelWrapperCss(this.panel) },\n                panel,\n                removeButton),\n            separator));\n    };\n    SurveyQuestionPanelDynamicItem.prototype.renderButton = function () {\n        if (this.question.panelRemoveButtonLocation !== \"right\" ||\n            !this.question.canRemovePanel ||\n            (this.question.isRenderModeList && this.panel.isCollapsed)) {\n            return null;\n        }\n        return _element_factory__WEBPACK_IMPORTED_MODULE_8__[\"ReactElementFactory\"].Instance.createElement(\"sv-paneldynamic-remove-btn\", {\n            data: { question: this.question, panel: this.panel }\n        });\n    };\n    return SurveyQuestionPanelDynamicItem;\n}(_panel__WEBPACK_IMPORTED_MODULE_2__[\"SurveyPanel\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"paneldynamic\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionPanelDynamic, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_radiogroup.tsx\":\n/*!************************************************!*\\\n  !*** ./src/react/reactquestion_radiogroup.tsx ***!\n  \\************************************************/\n/*! exports provided: SurveyQuestionRadiogroup, SurveyQuestionRadioItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_966493__) {\n\n\"use strict\";\n__nested_webpack_require_966493__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_966493__.d(__nested_webpack_exports__, \"SurveyQuestionRadiogroup\", function() { return SurveyQuestionRadiogroup; });\n/* harmony export (binding) */ __nested_webpack_require_966493__.d(__nested_webpack_exports__, \"SurveyQuestionRadioItem\", function() { return SurveyQuestionRadioItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_966493__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_966493__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_966493__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_comment__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_966493__(/*! ./reactquestion_comment */ \"./src/react/reactquestion_comment.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_966493__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_966493__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_966493__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar SurveyQuestionRadiogroup = /** @class */ (function (_super) {\n    __extends(SurveyQuestionRadiogroup, _super);\n    function SurveyQuestionRadiogroup(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionRadiogroup.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionRadiogroup.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.cssClasses;\n        var clearButton = null;\n        if (this.question.showClearButtonInContent) {\n            clearButton = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { type: \"button\", className: this.question.cssClasses.clearButton, onClick: function () { return _this.question.clearValue(); }, value: this.question.clearButtonCaption })));\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"fieldset\", { className: this.question.getSelectBaseRootCss(), ref: function (fieldset) { return (_this.setControl(fieldset)); }, role: this.question.a11y_input_ariaRole, \"aria-required\": this.question.a11y_input_ariaRequired, \"aria-label\": this.question.a11y_input_ariaLabel, \"aria-labelledby\": this.question.a11y_input_ariaLabelledBy, \"aria-describedby\": this.question.a11y_input_ariaDescribedBy, \"aria-invalid\": this.question.a11y_input_ariaInvalid, \"aria-errormessage\": this.question.a11y_input_ariaErrormessage },\n            this.question.hasColumns\n                ? this.getColumnedBody(cssClasses)\n                : this.getBody(cssClasses),\n            this.getFooter(),\n            this.question.isOtherSelected ? this.renderOther(cssClasses) : null,\n            clearButton));\n    };\n    SurveyQuestionRadiogroup.prototype.getFooter = function () {\n        var _this = this;\n        if (this.question.hasFootItems) {\n            return this.question.footItems.map(function (item, ii) {\n                return _this.renderItem(\"item_f\" + ii, item, false, _this.question.cssClasses);\n            });\n        }\n    };\n    SurveyQuestionRadiogroup.prototype.getColumnedBody = function (cssClasses) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.rootMultiColumn }, this.getColumns(cssClasses)));\n    };\n    SurveyQuestionRadiogroup.prototype.getColumns = function (cssClasses) {\n        var _this = this;\n        var value = this.getStateValue();\n        return this.question.columns.map(function (column, ci) {\n            var items = column.map(function (item, ii) {\n                return _this.renderItem(\"item\" + ci + ii, item, value, cssClasses, \"\" + ci + ii);\n            });\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { key: \"column\" + ci, className: _this.question.getColumnClass(), role: \"presentation\" }, items));\n        });\n    };\n    SurveyQuestionRadiogroup.prototype.getBody = function (cssClasses) {\n        if (this.question.blockedRow) {\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.rootRow }, this.getItems(cssClasses, this.question.dataChoices));\n        }\n        else\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null, this.getItems(cssClasses, this.question.bodyItems));\n    };\n    SurveyQuestionRadiogroup.prototype.getItems = function (cssClasses, choices) {\n        var items = [];\n        var value = this.getStateValue();\n        for (var i = 0; i < choices.length; i++) {\n            var item = choices[i];\n            var renderedItem = this.renderItem(\"item\" + i, item, value, cssClasses, \"\" + i);\n            items.push(renderedItem);\n        }\n        return items;\n    };\n    Object.defineProperty(SurveyQuestionRadiogroup.prototype, \"textStyle\", {\n        get: function () {\n            return null; //{ display: \"inline\", position: \"static\" };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionRadiogroup.prototype.renderOther = function (cssClasses) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getCommentAreaCss(true) },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_reactquestion_comment__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionOtherValueItem\"], { question: this.question, otherCss: cssClasses.other, cssClasses: cssClasses, isDisplayMode: this.isDisplayMode })));\n    };\n    SurveyQuestionRadiogroup.prototype.renderItem = function (key, item, value, cssClasses, index) {\n        var renderedItem = _element_factory__WEBPACK_IMPORTED_MODULE_5__[\"ReactElementFactory\"].Instance.createElement(this.question.itemComponent, {\n            key: key,\n            question: this.question,\n            cssClasses: cssClasses,\n            isDisplayMode: this.isDisplayMode,\n            item: item,\n            textStyle: this.textStyle,\n            index: index,\n            isChecked: value === item.value,\n        });\n        var survey = this.question.survey;\n        var wrappedItem = null;\n        if (!!survey) {\n            wrappedItem = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_4__[\"ReactSurveyElementsWrapper\"].wrapItemValue(survey, renderedItem, this.question, item);\n        }\n        return wrappedItem !== null && wrappedItem !== void 0 ? wrappedItem : renderedItem;\n    };\n    SurveyQuestionRadiogroup.prototype.getStateValue = function () {\n        return !this.question.isEmpty() ? this.question.renderedValue : \"\";\n    };\n    return SurveyQuestionRadiogroup;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyQuestionRadioItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionRadioItem, _super);\n    function SurveyQuestionRadioItem(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnChange = _this.handleOnChange.bind(_this);\n        _this.handleOnMouseDown = _this.handleOnMouseDown.bind(_this);\n        return _this;\n    }\n    SurveyQuestionRadioItem.prototype.getStateElement = function () {\n        return this.item;\n    };\n    Object.defineProperty(SurveyQuestionRadioItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRadioItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRadioItem.prototype, \"textStyle\", {\n        get: function () {\n            return this.props.textStyle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRadioItem.prototype, \"index\", {\n        get: function () {\n            return this.props.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRadioItem.prototype, \"isChecked\", {\n        get: function () {\n            return this.props.isChecked;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRadioItem.prototype, \"hideCaption\", {\n        get: function () {\n            return this.props.hideCaption === true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionRadioItem.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (!_super.prototype.shouldComponentUpdate.call(this, nextProps, nextState))\n            return false;\n        if (!this.question)\n            return false;\n        return (!this.question.customWidget ||\n            !!this.question.customWidgetData.isNeedRender ||\n            !!this.question.customWidget.widgetJson.isDefaultRender ||\n            !!this.question.customWidget.widgetJson.render);\n    };\n    SurveyQuestionRadioItem.prototype.handleOnChange = function (event) {\n        this.question.clickItemHandler(this.item);\n    };\n    SurveyQuestionRadioItem.prototype.handleOnMouseDown = function (event) {\n        this.question.onMouseDown();\n    };\n    SurveyQuestionRadioItem.prototype.canRender = function () {\n        return !!this.question && !!this.item;\n    };\n    SurveyQuestionRadioItem.prototype.renderElement = function () {\n        var itemClass = this.question.getItemClass(this.item);\n        var labelClass = this.question.getLabelClass(this.item);\n        var controlLabelClass = this.question.getControlLabelClass(this.item);\n        var itemLabel = !this.hideCaption ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: controlLabelClass }, this.renderLocString(this.item.locText, this.textStyle)) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: itemClass, role: \"presentation\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"label\", { onMouseDown: this.handleOnMouseDown, className: labelClass },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { \"aria-errormessage\": this.question.ariaErrormessage, className: this.cssClasses.itemControl, id: this.question.getItemId(this.item), type: \"radio\", name: this.question.questionName, checked: this.isChecked, value: this.item.value, disabled: !this.question.getItemEnabled(this.item), onChange: this.handleOnChange }),\n                this.cssClasses.materialDecorator ?\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.cssClasses.materialDecorator }, this.question.itemSvgIcon ?\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: this.cssClasses.itemDecorator },\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.itemSvgIcon })) :\n                        null) :\n                    null,\n                itemLabel)));\n    };\n    return SurveyQuestionRadioItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_5__[\"ReactElementFactory\"].Instance.registerElement(\"survey-radiogroup-item\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionRadioItem, props);\n});\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"radiogroup\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionRadiogroup, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_ranking.tsx\":\n/*!*********************************************!*\\\n  !*** ./src/react/reactquestion_ranking.tsx ***!\n  \\*********************************************/\n/*! exports provided: SurveyQuestionRanking, SurveyQuestionRankingItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_979839__) {\n\n\"use strict\";\n__nested_webpack_require_979839__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_979839__.d(__nested_webpack_exports__, \"SurveyQuestionRanking\", function() { return SurveyQuestionRanking; });\n/* harmony export (binding) */ __nested_webpack_require_979839__.d(__nested_webpack_exports__, \"SurveyQuestionRankingItem\", function() { return SurveyQuestionRankingItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_979839__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_979839__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_979839__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_979839__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_979839__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionRanking = /** @class */ (function (_super) {\n    __extends(SurveyQuestionRanking, _super);\n    function SurveyQuestionRanking() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyQuestionRanking.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionRanking.prototype.renderElement = function () {\n        var _this = this;\n        if (!this.question.selectToRankEnabled) {\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.rootClass, ref: function (root) { return (_this.setControl(root)); } }, this.getItems()));\n        }\n        else {\n            var unrankedItem = true;\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.rootClass, ref: function (root) { return (_this.setControl(root)); } },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getContainerClasses(\"from\"), \"data-ranking\": \"from-container\" },\n                    this.getItems(this.question.unRankingChoices, unrankedItem),\n                    this.question.unRankingChoices.length === 0 ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.containerPlaceholder },\n                        \" \",\n                        this.renderLocString(this.question.locSelectToRankEmptyRankedAreaText),\n                        \" \") : null),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.containersDivider }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getContainerClasses(\"to\"), \"data-ranking\": \"to-container\" },\n                    this.getItems(),\n                    this.question.rankingChoices.length === 0 ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.containerPlaceholder },\n                        \" \",\n                        this.renderLocString(this.question.locSelectToRankEmptyUnrankedAreaText),\n                        \" \") : null)));\n        }\n    };\n    SurveyQuestionRanking.prototype.getItems = function (choices, unrankedItem) {\n        var _this = this;\n        if (choices === void 0) { choices = this.question.rankingChoices; }\n        var items = [];\n        var _loop_1 = function (i) {\n            var item = choices[i];\n            items.push(this_1.renderItem(item, i, function (event) {\n                _this.question.handleKeydown.call(_this.question, event, item);\n            }, function (event) {\n                event.persist();\n                //event.preventDefault();\n                _this.question.handlePointerDown.call(_this.question, event, item, event.currentTarget);\n            }, this_1.question.cssClasses, this_1.question.getItemClass(item), this_1.question, unrankedItem));\n        };\n        var this_1 = this;\n        for (var i = 0; i < choices.length; i++) {\n            _loop_1(i);\n        }\n        return items;\n    };\n    SurveyQuestionRanking.prototype.renderItem = function (item, i, handleKeydown, handlePointerDown, cssClasses, itemClass, question, unrankedItem) {\n        var key = item.value + \"-\" + i + \"-item\";\n        var text = this.renderLocString(item.locText);\n        var index = i;\n        var indexText = this.question.getNumberByIndex(i);\n        var tabIndex = this.question.getItemTabIndex(item);\n        var renderedItem = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionRankingItem, { key: key, text: text, index: index, indexText: indexText, itemTabIndex: tabIndex, handleKeydown: handleKeydown, handlePointerDown: handlePointerDown, cssClasses: cssClasses, itemClass: itemClass, question: question, unrankedItem: unrankedItem, item: item }));\n        var survey = this.question.survey;\n        var wrappedItem = null;\n        if (!!survey) {\n            wrappedItem = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_3__[\"ReactSurveyElementsWrapper\"].wrapItemValue(survey, renderedItem, this.question, item);\n        }\n        return wrappedItem !== null && wrappedItem !== void 0 ? wrappedItem : renderedItem;\n    };\n    return SurveyQuestionRanking;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\nvar SurveyQuestionRankingItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionRankingItem, _super);\n    function SurveyQuestionRankingItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"text\", {\n        get: function () {\n            return this.props.text;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"index\", {\n        get: function () {\n            return this.props.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"indexText\", {\n        get: function () {\n            return this.props.indexText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"handleKeydown\", {\n        get: function () {\n            return this.props.handleKeydown;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"handlePointerDown\", {\n        get: function () {\n            return this.props.handlePointerDown;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"cssClasses\", {\n        get: function () {\n            return this.props.cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"itemClass\", {\n        get: function () {\n            return this.props.itemClass;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"itemTabIndex\", {\n        get: function () {\n            return this.props.itemTabIndex;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"unrankedItem\", {\n        get: function () {\n            return this.props.unrankedItem;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionRankingItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionRankingItem.prototype.renderEmptyIcon = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.dashSvgIcon })));\n    };\n    SurveyQuestionRankingItem.prototype.renderElement = function () {\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { tabIndex: this.itemTabIndex, className: this.itemClass, onKeyDown: this.handleKeydown, onPointerDown: this.handlePointerDown, \"data-sv-drop-target-ranking-item\": this.index },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { tabIndex: -1, style: { outline: \"none\" } },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.cssClasses.itemGhostNode }),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.cssClasses.itemContent },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.cssClasses.itemIconContainer },\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: this.question.getIconHoverCss() },\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.dragDropSvgIcon })),\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", { className: this.question.getIconFocusCss() },\n                            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"use\", { xlinkHref: this.question.arrowsSvgIcon }))),\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.getItemIndexClasses(this.item) }, (!this.unrankedItem && this.indexText) ? this.indexText : this.renderEmptyIcon()),\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.cssClasses.controlLabel }, this.text)))));\n    };\n    return SurveyQuestionRankingItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"ranking\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionRanking, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_rating.tsx\":\n/*!********************************************!*\\\n  !*** ./src/react/reactquestion_rating.tsx ***!\n  \\********************************************/\n/*! exports provided: SurveyQuestionRating */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_991519__) {\n\n\"use strict\";\n__nested_webpack_require_991519__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_991519__.d(__nested_webpack_exports__, \"SurveyQuestionRating\", function() { return SurveyQuestionRating; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_991519__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_991519__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_991519__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_991519__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_991519__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionRating = /** @class */ (function (_super) {\n    __extends(SurveyQuestionRating, _super);\n    function SurveyQuestionRating(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleOnClick = _this.handleOnClick.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionRating.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionRating.prototype.handleOnClick = function (event) {\n        this.question.setValueFromClick(event.target.value);\n        this.setState({ value: this.question.value });\n    };\n    SurveyQuestionRating.prototype.renderItem = function (item, index) {\n        var renderedItem = _element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.createElement(this.question.itemComponent, {\n            question: this.question,\n            item: item,\n            index: index,\n            key: \"value\" + index,\n            handleOnClick: this.handleOnClick,\n            isDisplayMode: this.isDisplayMode\n        });\n        return renderedItem;\n    };\n    SurveyQuestionRating.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.cssClasses;\n        var minText = this.question.minRateDescription\n            ? this.renderLocString(this.question.locMinRateDescription)\n            : null;\n        var maxText = this.question.maxRateDescription\n            ? this.renderLocString(this.question.locMaxRateDescription)\n            : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.ratingRootCss, ref: function (div) { return (_this.setControl(div)); } },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"fieldset\", { role: \"radiogroup\" },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"legend\", { role: \"presentation\", className: \"sv-hidden\" }),\n                !!this.question.hasMinLabel ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.minText }, minText) : null,\n                this.question.renderedRateItems.map(function (item, index) { return _this.renderItem(item, index); }),\n                !!this.question.hasMaxLabel ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: cssClasses.maxText }, maxText) : null)));\n    };\n    return SurveyQuestionRating;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"rating\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionRating, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_tagbox.tsx\":\n/*!********************************************!*\\\n  !*** ./src/react/reactquestion_tagbox.tsx ***!\n  \\********************************************/\n/*! exports provided: SurveyQuestionTagbox */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_996383__) {\n\n\"use strict\";\n__nested_webpack_require_996383__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_996383__.d(__nested_webpack_exports__, \"SurveyQuestionTagbox\", function() { return SurveyQuestionTagbox; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_996383__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_996383__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_996383__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _dropdown_base__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_996383__(/*! ./dropdown-base */ \"./src/react/dropdown-base.tsx\");\n/* harmony import */ var _tagbox_item__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_996383__(/*! ./tagbox-item */ \"./src/react/tagbox-item.tsx\");\n/* harmony import */ var _tagbox_filter__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_996383__(/*! ./tagbox-filter */ \"./src/react/tagbox-filter.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionTagbox = /** @class */ (function (_super) {\n    __extends(SurveyQuestionTagbox, _super);\n    function SurveyQuestionTagbox(props) {\n        return _super.call(this, props) || this;\n    }\n    SurveyQuestionTagbox.prototype.renderItem = function (key, item) {\n        var renderedItem = (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_tagbox_item__WEBPACK_IMPORTED_MODULE_3__[\"SurveyQuestionTagboxItem\"], { key: key, question: this.question, item: item }));\n        return renderedItem;\n    };\n    SurveyQuestionTagbox.prototype.renderInput = function (dropdownListModel) {\n        var _this = this;\n        var dropdownMultiSelectListModel = dropdownListModel;\n        var items = this.question.selectedChoices.map(function (choice, index) { return _this.renderItem(\"item\" + index, choice); });\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { id: this.question.inputId, className: this.question.getControlClass(), tabIndex: dropdownListModel.noTabIndex ? undefined : 0, \n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            disabled: this.question.isInputReadOnly, required: this.question.isRequired, onKeyDown: this.keyhandler, onBlur: this.blur, role: this.question.ariaRole, \"aria-required\": this.question.ariaRequired, \"aria-label\": this.question.ariaLabel, \"aria-invalid\": this.question.ariaInvalid, \"aria-errormessage\": this.question.ariaErrormessage, \"aria-expanded\": this.question.ariaExpanded === null ? undefined : this.question.ariaExpanded === \"true\", \"aria-controls\": dropdownListModel.listElementId, \"aria-activedescendant\": dropdownListModel.ariaActivedescendant },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.controlValue },\n                items,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_tagbox_filter__WEBPACK_IMPORTED_MODULE_4__[\"TagboxFilterString\"], { model: dropdownMultiSelectListModel, question: this.question })),\n            this.createClearButton()));\n    };\n    SurveyQuestionTagbox.prototype.renderElement = function () {\n        var cssClasses = this.question.cssClasses;\n        var comment = this.question.isOtherSelected ? this.renderOther(cssClasses) : null;\n        var select = this.renderSelect(cssClasses);\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.renderCssRoot },\n            select,\n            comment));\n    };\n    SurveyQuestionTagbox.prototype.renderReadOnlyElement = function () {\n        if (this.question.locReadOnlyText) {\n            return this.renderLocString(this.question.locReadOnlyText);\n        }\n        else {\n            return null;\n        }\n    };\n    return SurveyQuestionTagbox;\n}(_dropdown_base__WEBPACK_IMPORTED_MODULE_2__[\"SurveyQuestionDropdownBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"tagbox\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionTagbox, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactquestion_text.tsx\":\n/*!******************************************!*\\\n  !*** ./src/react/reactquestion_text.tsx ***!\n  \\******************************************/\n/*! exports provided: SurveyQuestionText */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1001649__) {\n\n\"use strict\";\n__nested_webpack_require_1001649__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1001649__.d(__nested_webpack_exports__, \"SurveyQuestionText\", function() { return SurveyQuestionText; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1001649__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1001649__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1001649__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1001649__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_character_counter__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_1001649__(/*! ./components/character-counter */ \"./src/react/components/character-counter.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyQuestionText = /** @class */ (function (_super) {\n    __extends(SurveyQuestionText, _super);\n    //controlRef: React.RefObject<HTMLInputElement>;\n    function SurveyQuestionText(props) {\n        return _super.call(this, props) || this;\n        //this.controlRef = React.createRef();\n    }\n    SurveyQuestionText.prototype.renderInput = function () {\n        var _this = this;\n        var inputClass = this.question.getControlClass();\n        var placeholder = this.question.renderedPlaceholder;\n        if (this.question.isReadOnlyRenderDiv()) {\n            return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null, this.question.inputValue);\n        }\n        var counter = !!this.question.getMaxLength() ? (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_character_counter__WEBPACK_IMPORTED_MODULE_3__[\"CharacterCounterComponent\"], { counter: this.question.characterCounter, remainingCharacterCounter: this.question.cssClasses.remainingCharacterCounter })) : null;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { id: this.question.inputId, disabled: this.isDisplayMode, className: inputClass, type: this.question.inputType, \n                //ref={this.controlRef}\n                ref: function (input) { return (_this.setControl(input)); }, style: this.question.inputStyle, maxLength: this.question.getMaxLength(), min: this.question.renderedMin, max: this.question.renderedMax, step: this.question.renderedStep, size: this.question.inputSize, placeholder: placeholder, list: this.question.dataListId, autoComplete: this.question.autocomplete, onBlur: this.question.onBlur, onFocus: this.question.onFocus, onChange: this.question.onChange, onKeyUp: this.question.onKeyUp, onKeyDown: this.question.onKeyDown, onCompositionUpdate: function (event) { return _this.question.onCompositionUpdate(event.nativeEvent); }, \"aria-required\": this.question.a11y_input_ariaRequired, \"aria-label\": this.question.a11y_input_ariaLabel, \"aria-labelledby\": this.question.a11y_input_ariaLabelledBy, \"aria-describedby\": this.question.a11y_input_ariaDescribedBy, \"aria-invalid\": this.question.a11y_input_ariaInvalid, \"aria-errormessage\": this.question.a11y_input_ariaErrormessage }),\n            counter));\n    };\n    SurveyQuestionText.prototype.renderElement = function () {\n        return (this.question.dataListId ?\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null,\n                this.renderInput(),\n                this.renderDataList()) :\n            this.renderInput());\n    };\n    SurveyQuestionText.prototype.setValueCore = function (newValue) {\n        this.question.inputValue = newValue;\n    };\n    SurveyQuestionText.prototype.getValueCore = function () {\n        return this.question.inputValue;\n    };\n    SurveyQuestionText.prototype.renderDataList = function () {\n        if (!this.question.dataListId)\n            return null;\n        var items = this.question.dataList;\n        if (items.length == 0)\n            return null;\n        var options = [];\n        for (var i = 0; i < items.length; i++) {\n            options.push(react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"option\", { key: \"item\" + i, value: items[i] }));\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"datalist\", { id: this.question.dataListId }, options);\n    };\n    return SurveyQuestionText;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionUncontrolledElement\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"text\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionText, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/reactsurveymodel.tsx\":\n/*!****************************************!*\\\n  !*** ./src/react/reactsurveymodel.tsx ***!\n  \\****************************************/\n/*! exports provided: ReactSurveyElementsWrapper */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1007557__) {\n\n\"use strict\";\n__nested_webpack_require_1007557__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1007557__.d(__nested_webpack_exports__, \"ReactSurveyElementsWrapper\", function() { return ReactSurveyElementsWrapper; });\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1007557__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1007557__.n(survey_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1007557__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n\n\nvar ReactSurveyElementsWrapper = /** @class */ (function () {\n    function ReactSurveyElementsWrapper() {\n    }\n    ReactSurveyElementsWrapper.wrapRow = function (survey, element, row) {\n        var componentName = survey.getRowWrapperComponentName(row);\n        var componentData = survey.getRowWrapperComponentData(row);\n        return _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            element: element,\n            row: row,\n            componentData: componentData,\n        });\n    };\n    ReactSurveyElementsWrapper.wrapElement = function (survey, element, question) {\n        var componentName = survey.getElementWrapperComponentName(question);\n        var componentData = survey.getElementWrapperComponentData(question);\n        return _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            element: element,\n            question: question,\n            componentData: componentData,\n        });\n    };\n    ReactSurveyElementsWrapper.wrapQuestionContent = function (survey, element, question) {\n        var componentName = survey.getQuestionContentWrapperComponentName(question);\n        var componentData = survey.getElementWrapperComponentData(question);\n        return _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            element: element,\n            question: question,\n            componentData: componentData,\n        });\n    };\n    ReactSurveyElementsWrapper.wrapItemValue = function (survey, element, question, item) {\n        var componentName = survey.getItemValueWrapperComponentName(item, question);\n        var componentData = survey.getItemValueWrapperComponentData(item, question);\n        return _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            key: element === null || element === void 0 ? void 0 : element.key,\n            element: element,\n            question: question,\n            item: item,\n            componentData: componentData,\n        });\n    };\n    ReactSurveyElementsWrapper.wrapMatrixCell = function (survey, element, cell, reason) {\n        if (reason === void 0) { reason = \"cell\"; }\n        var componentName = survey.getElementWrapperComponentName(cell, reason);\n        var componentData = survey.getElementWrapperComponentData(cell, reason);\n        return _element_factory__WEBPACK_IMPORTED_MODULE_1__[\"ReactElementFactory\"].Instance.createElement(componentName, {\n            element: element,\n            cell: cell,\n            componentData: componentData,\n        });\n    };\n    return ReactSurveyElementsWrapper;\n}());\n\nsurvey_core__WEBPACK_IMPORTED_MODULE_0__[\"SurveyModel\"].platform = \"react\";\n\n\n/***/ }),\n\n/***/ \"./src/react/reacttimerpanel.tsx\":\n/*!***************************************!*\\\n  !*** ./src/react/reacttimerpanel.tsx ***!\n  \\***************************************/\n/*! exports provided: SurveyTimerPanel */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1011328__) {\n\n\"use strict\";\n__nested_webpack_require_1011328__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1011328__.d(__nested_webpack_exports__, \"SurveyTimerPanel\", function() { return SurveyTimerPanel; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1011328__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1011328__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1011328__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1011328__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_1011328__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar SurveyTimerPanel = /** @class */ (function (_super) {\n    __extends(SurveyTimerPanel, _super);\n    function SurveyTimerPanel(props) {\n        var _this = _super.call(this, props) || this;\n        _this.circleLength = 440;\n        return _this;\n    }\n    SurveyTimerPanel.prototype.getStateElement = function () {\n        return this.timerModel;\n    };\n    Object.defineProperty(SurveyTimerPanel.prototype, \"timerModel\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyTimerPanel.prototype, \"progress\", {\n        get: function () {\n            return -this.timerModel.progress * this.circleLength;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyTimerPanel.prototype.render = function () {\n        if (!this.timerModel.isRunning) {\n            return null;\n        }\n        var result = react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.timerModel.survey.getCss().timerRoot }, this.timerModel.text);\n        if (this.timerModel.showTimerAsClock) {\n            var style = { strokeDasharray: this.circleLength, strokeDashoffset: this.progress };\n            var progress = (this.timerModel.showProgress ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_1__[\"SvgIcon\"], { className: this.timerModel.getProgressCss(), style: style, iconName: \"icon-timercircle\", size: \"auto\" }) : null);\n            result =\n                (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.timerModel.rootCss },\n                    progress,\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.timerModel.textContainerCss },\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.timerModel.majorTextCss }, this.timerModel.clockMajorText),\n                        (this.timerModel.clockMinorText ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { className: this.timerModel.minorTextCss }, this.timerModel.clockMinorText) : null))));\n        }\n        return result;\n    };\n    return SurveyTimerPanel;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"ReactSurveyElement\"]));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(\"sv-timerpanel\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyTimerPanel, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/row.tsx\":\n/*!***************************!*\\\n  !*** ./src/react/row.tsx ***!\n  \\***************************/\n/*! exports provided: SurveyRow */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1015877__) {\n\n\"use strict\";\n__nested_webpack_require_1015877__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1015877__.d(__nested_webpack_exports__, \"SurveyRow\", function() { return SurveyRow; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1015877__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1015877__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1015877__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1015877__(/*! ./element */ \"./src/react/element.tsx\");\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_1015877__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\n/* harmony import */ var _reactsurveymodel__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_1015877__(/*! ./reactsurveymodel */ \"./src/react/reactsurveymodel.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyRow = /** @class */ (function (_super) {\n    __extends(SurveyRow, _super);\n    function SurveyRow(props) {\n        var _this = _super.call(this, props) || this;\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0__[\"createRef\"]();\n        _this.recalculateCss();\n        return _this;\n    }\n    SurveyRow.prototype.recalculateCss = function () {\n        this.row.visibleElements.map(function (element) { return element.cssClasses; });\n    };\n    SurveyRow.prototype.getStateElement = function () {\n        return this.row;\n    };\n    Object.defineProperty(SurveyRow.prototype, \"row\", {\n        get: function () {\n            return this.props.row;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRow.prototype, \"survey\", {\n        get: function () {\n            return this.props.survey;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRow.prototype, \"creator\", {\n        get: function () {\n            return this.props.creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyRow.prototype, \"css\", {\n        get: function () {\n            return this.props.css;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyRow.prototype.canRender = function () {\n        return !!this.row && !!this.survey && !!this.creator;\n    };\n    SurveyRow.prototype.renderElementContent = function () {\n        var _this = this;\n        var elements = this.row.visibleElements.map(function (element, elementIndex) {\n            var index = elementIndex ? \"-\" + elementIndex : 0;\n            var key = element.name + index;\n            return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_element__WEBPACK_IMPORTED_MODULE_2__[\"SurveyRowElement\"], { element: element, index: elementIndex, row: _this.row, survey: _this.survey, creator: _this.creator, css: _this.css, key: key }));\n        });\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { ref: this.rootRef, className: this.row.getRowCss() }, elements));\n    };\n    SurveyRow.prototype.renderElement = function () {\n        var survey = this.survey;\n        var content = this.renderElementContent();\n        var wrapper = _reactsurveymodel__WEBPACK_IMPORTED_MODULE_4__[\"ReactSurveyElementsWrapper\"].wrapRow(survey, content, this.row);\n        return wrapper || content;\n    };\n    SurveyRow.prototype.componentDidMount = function () {\n        var _this = this;\n        _super.prototype.componentDidMount.call(this);\n        var el = this.rootRef.current;\n        if (this.rootRef.current) {\n            this.row.setRootElement(this.rootRef.current);\n        }\n        if (!!el && !this.row.isNeedRender) {\n            var rowContainerDiv = el;\n            setTimeout(function () {\n                _this.row.startLazyRendering(rowContainerDiv);\n            }, 10);\n        }\n    };\n    SurveyRow.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (!_super.prototype.shouldComponentUpdate.call(this, nextProps, nextState))\n            return false;\n        if (nextProps.row !== this.row) {\n            nextProps.row.isNeedRender = this.row.isNeedRender;\n            nextProps.row.setRootElement(this.rootRef.current);\n            this.row.setRootElement(undefined);\n            this.stopLazyRendering();\n        }\n        this.recalculateCss();\n        return true;\n    };\n    SurveyRow.prototype.stopLazyRendering = function () {\n        this.row.stopLazyRendering();\n        this.row.isNeedRender = !this.row.isLazyRendering();\n    };\n    SurveyRow.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.row.setRootElement(undefined);\n        this.stopLazyRendering();\n    };\n    SurveyRow.prototype.createElement = function (element, elementIndex) {\n        var index = elementIndex ? \"-\" + elementIndex : 0;\n        var elementType = element.getType();\n        if (!_element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.isElementRegistered(elementType)) {\n            elementType = \"question\";\n        }\n        return _element_factory__WEBPACK_IMPORTED_MODULE_3__[\"ReactElementFactory\"].Instance.createElement(elementType, {\n            key: element.name + index,\n            element: element,\n            creator: this.creator,\n            survey: this.survey,\n            css: this.css,\n        });\n    };\n    return SurveyRow;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyElementBase\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/signaturepad.tsx\":\n/*!************************************!*\\\n  !*** ./src/react/signaturepad.tsx ***!\n  \\************************************/\n/*! exports provided: SurveyQuestionSignaturePad */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1022608__) {\n\n\"use strict\";\n__nested_webpack_require_1022608__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1022608__.d(__nested_webpack_exports__, \"SurveyQuestionSignaturePad\", function() { return SurveyQuestionSignaturePad; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1022608__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1022608__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1022608__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1022608__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_1022608__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\n/* harmony import */ var _components_loading_indicator__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_1022608__(/*! ./components/loading-indicator */ \"./src/react/components/loading-indicator.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar SurveyQuestionSignaturePad = /** @class */ (function (_super) {\n    __extends(SurveyQuestionSignaturePad, _super);\n    function SurveyQuestionSignaturePad(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { value: _this.question.value };\n        return _this;\n    }\n    Object.defineProperty(SurveyQuestionSignaturePad.prototype, \"question\", {\n        get: function () {\n            return this.questionBase;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionSignaturePad.prototype.renderElement = function () {\n        var _this = this;\n        var cssClasses = this.question.cssClasses;\n        var loadingIndicator = this.question.showLoadingIndicator ? this.renderLoadingIndicator() : null;\n        var clearButton = this.renderCleanButton();\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.root, ref: function (root) { return (_this.setControl(root)); }, style: { width: this.question.renderedCanvasWidth } },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.placeholder, style: { display: this.question.needShowPlaceholder() ? \"\" : \"none\" } }, this.renderLocString(this.question.locPlaceholder)),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null,\n                this.renderBackgroundImage(),\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"canvas\", { tabIndex: -1, className: this.question.cssClasses.canvas, onBlur: this.question.onBlur })),\n            clearButton,\n            loadingIndicator));\n    };\n    SurveyQuestionSignaturePad.prototype.renderBackgroundImage = function () {\n        if (!this.question.backgroundImage)\n            return null;\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"img\", { className: this.question.cssClasses.backgroundImage, src: this.question.backgroundImage, style: { width: this.question.renderedCanvasWidth } });\n    };\n    SurveyQuestionSignaturePad.prototype.renderLoadingIndicator = function () {\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.loadingIndicator },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_loading_indicator__WEBPACK_IMPORTED_MODULE_4__[\"LoadingIndicatorComponent\"], null));\n    };\n    SurveyQuestionSignaturePad.prototype.renderCleanButton = function () {\n        var _this = this;\n        if (!this.question.canShowClearButton)\n            return null;\n        var cssClasses = this.question.cssClasses;\n        return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: cssClasses.controls },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"button\", { type: \"button\", className: cssClasses.clearButton, title: this.question.clearButtonCaption, onClick: function () { return _this.question.clearValue(); } }, this.question.cssClasses.clearButtonIconId ? react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_3__[\"SvgIcon\"], { iconName: this.question.cssClasses.clearButtonIconId, size: \"auto\" }) : react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, \"\\u2716\")));\n    };\n    return SurveyQuestionSignaturePad;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"SurveyQuestionElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"signaturepad\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](SurveyQuestionSignaturePad, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/string-editor.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/string-editor.tsx ***!\n  \\*************************************/\n/*! exports provided: SurveyLocStringEditor */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1028528__) {\n\n\"use strict\";\n__nested_webpack_require_1028528__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1028528__.d(__nested_webpack_exports__, \"SurveyLocStringEditor\", function() { return SurveyLocStringEditor; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1028528__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1028528__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1028528__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_1028528__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1028528__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyLocStringEditor = /** @class */ (function (_super) {\n    __extends(SurveyLocStringEditor, _super);\n    function SurveyLocStringEditor(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onInput = function (event) {\n            _this.locStr.text = event.target.innerText;\n        };\n        _this.onClick = function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        };\n        _this.state = { changed: 0 };\n        return _this;\n    }\n    Object.defineProperty(SurveyLocStringEditor.prototype, \"locStr\", {\n        get: function () {\n            return this.props.locStr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyLocStringEditor.prototype, \"style\", {\n        get: function () {\n            return this.props.style;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyLocStringEditor.prototype.componentDidMount = function () {\n        if (!this.locStr)\n            return;\n        var self = this;\n        this.locStr.onChanged = function () {\n            self.setState({ changed: self.state.changed + 1 });\n        };\n    };\n    SurveyLocStringEditor.prototype.componentWillUnmount = function () {\n        if (!this.locStr)\n            return;\n        this.locStr.onChanged = function () { };\n    };\n    SurveyLocStringEditor.prototype.render = function () {\n        if (!this.locStr) {\n            return null;\n        }\n        if (this.locStr.hasHtml) {\n            var htmlValue = { __html: this.locStr.renderedHtml };\n            return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sv-string-editor\", contentEditable: \"true\", suppressContentEditableWarning: true, style: this.style, dangerouslySetInnerHTML: htmlValue, onBlur: this.onInput, onClick: this.onClick }));\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sv-string-editor\", contentEditable: \"true\", suppressContentEditableWarning: true, style: this.style, onBlur: this.onInput, onClick: this.onClick }, this.locStr.renderedHtml));\n    };\n    return SurveyLocStringEditor;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(survey_core__WEBPACK_IMPORTED_MODULE_1__[\"LocalizableString\"].editableRenderer, function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyLocStringEditor, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/string-viewer.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/string-viewer.tsx ***!\n  \\*************************************/\n/*! exports provided: SurveyLocStringViewer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1033045__) {\n\n\"use strict\";\n__nested_webpack_require_1033045__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1033045__.d(__nested_webpack_exports__, \"SurveyLocStringViewer\", function() { return SurveyLocStringViewer; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1033045__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1033045__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1033045__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_1033045__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _element_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1033045__(/*! ./element-factory */ \"./src/react/element-factory.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyLocStringViewer = /** @class */ (function (_super) {\n    __extends(SurveyLocStringViewer, _super);\n    function SurveyLocStringViewer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onChangedHandler = function (sender, options) {\n            if (_this.isRendering)\n                return;\n            _this.setState({ changed: !!_this.state && _this.state.changed ? _this.state.changed + 1 : 1 });\n        };\n        _this.rootRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n        return _this;\n    }\n    Object.defineProperty(SurveyLocStringViewer.prototype, \"locStr\", {\n        get: function () {\n            return this.props.locStr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyLocStringViewer.prototype, \"style\", {\n        get: function () {\n            return this.props.style;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyLocStringViewer.prototype.componentDidMount = function () {\n        this.reactOnStrChanged();\n    };\n    SurveyLocStringViewer.prototype.componentWillUnmount = function () {\n        if (!this.locStr)\n            return;\n        this.locStr.onStringChanged.remove(this.onChangedHandler);\n    };\n    SurveyLocStringViewer.prototype.componentDidUpdate = function (prevProps, prevState) {\n        if (!!prevProps.locStr) {\n            prevProps.locStr.onStringChanged.remove(this.onChangedHandler);\n        }\n        this.reactOnStrChanged();\n    };\n    SurveyLocStringViewer.prototype.reactOnStrChanged = function () {\n        if (!this.locStr)\n            return;\n        this.locStr.onStringChanged.add(this.onChangedHandler);\n    };\n    SurveyLocStringViewer.prototype.render = function () {\n        if (!this.locStr)\n            return null;\n        this.isRendering = true;\n        var strEl = this.renderString();\n        this.isRendering = false;\n        return strEl;\n    };\n    SurveyLocStringViewer.prototype.renderString = function () {\n        var className = this.locStr.allowLineBreaks ? \"sv-string-viewer sv-string-viewer--multiline\" : \"sv-string-viewer\";\n        if (this.locStr.hasHtml) {\n            var htmlValue = { __html: this.locStr.renderedHtml };\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { ref: this.rootRef, className: className, style: this.style, dangerouslySetInnerHTML: htmlValue });\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { ref: this.rootRef, className: className, style: this.style }, this.locStr.renderedHtml);\n    };\n    return SurveyLocStringViewer;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n_element_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactElementFactory\"].Instance.registerElement(survey_core__WEBPACK_IMPORTED_MODULE_1__[\"LocalizableString\"].defaultRenderer, function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SurveyLocStringViewer, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/svgbundle.tsx\":\n/*!*********************************!*\\\n  !*** ./src/react/svgbundle.tsx ***!\n  \\*********************************/\n/*! exports provided: SvgBundleComponent */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1038002__) {\n\n\"use strict\";\n__nested_webpack_require_1038002__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1038002__.d(__nested_webpack_exports__, \"SvgBundleComponent\", function() { return SvgBundleComponent; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1038002__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1038002__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1038002__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_1038002__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar SvgBundleComponent = /** @class */ (function (_super) {\n    __extends(SvgBundleComponent, _super);\n    function SvgBundleComponent(props) {\n        var _this = _super.call(this, props) || this;\n        _this.containerRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n        return _this;\n    }\n    SvgBundleComponent.prototype.componentDidMount = function () {\n        if (!!this.containerRef.current) {\n            this.containerRef.current.innerHTML = survey_core__WEBPACK_IMPORTED_MODULE_1__[\"SvgRegistry\"].iconsRenderedHtml();\n        }\n    };\n    SvgBundleComponent.prototype.render = function () {\n        var svgStyle = {\n            display: \"none\"\n        };\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"svg\", { style: svgStyle, id: \"sv-icon-holder-global-container\", ref: this.containerRef });\n    };\n    return SvgBundleComponent;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component));\n\n\n\n/***/ }),\n\n/***/ \"./src/react/tagbox-filter.tsx\":\n/*!*************************************!*\\\n  !*** ./src/react/tagbox-filter.tsx ***!\n  \\*************************************/\n/*! exports provided: TagboxFilterString */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1040744__) {\n\n\"use strict\";\n__nested_webpack_require_1040744__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1040744__.d(__nested_webpack_exports__, \"TagboxFilterString\", function() { return TagboxFilterString; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1040744__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1040744__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1040744__(/*! survey-core */ \"survey-core\");\n/* harmony import */ var survey_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_1040744__.n(survey_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1040744__(/*! ./reactquestion_factory */ \"./src/react/reactquestion_factory.tsx\");\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_1040744__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar TagboxFilterString = /** @class */ (function (_super) {\n    __extends(TagboxFilterString, _super);\n    function TagboxFilterString(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(TagboxFilterString.prototype, \"model\", {\n        get: function () {\n            return this.props.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TagboxFilterString.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TagboxFilterString.prototype.componentDidUpdate = function (prevProps, prevState) {\n        _super.prototype.componentDidUpdate.call(this, prevProps, prevState);\n        this.updateDomElement();\n    };\n    TagboxFilterString.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        this.updateDomElement();\n    };\n    TagboxFilterString.prototype.updateDomElement = function () {\n        if (!!this.inputElement) {\n            var control = this.inputElement;\n            var newValue = this.model.inputStringRendered;\n            if (!survey_core__WEBPACK_IMPORTED_MODULE_1__[\"Helpers\"].isTwoValueEquals(newValue, control.value, false, true, false)) {\n                control.value = this.model.inputStringRendered;\n            }\n        }\n    };\n    TagboxFilterString.prototype.onChange = function (e) {\n        var root = survey_core__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment.root;\n        if (e.target === root.activeElement) {\n            this.model.inputStringRendered = e.target.value;\n        }\n    };\n    TagboxFilterString.prototype.keyhandler = function (e) {\n        this.model.inputKeyHandler(e);\n    };\n    TagboxFilterString.prototype.onBlur = function (e) {\n        this.model.onBlur(e);\n    };\n    TagboxFilterString.prototype.onFocus = function (e) {\n        this.model.onFocus(e);\n    };\n    TagboxFilterString.prototype.getStateElement = function () {\n        return this.model;\n    };\n    TagboxFilterString.prototype.render = function () {\n        var _this = this;\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.hint },\n            this.model.showHintPrefix ?\n                (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.hintPrefix },\n                    react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, this.model.hintStringPrefix))) : null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.hintSuffixWrapper },\n                this.model.showHintString ?\n                    (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.hintSuffix },\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", { style: { visibility: \"hidden\" }, \"data-bind\": \"text: model.filterString\" }, this.model.inputStringRendered),\n                        react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, this.model.hintStringSuffix))) : null,\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"input\", { type: \"text\", autoComplete: \"off\", id: this.question.getInputId(), inputMode: this.model.inputMode, ref: function (element) { return (_this.inputElement = element); }, className: this.question.cssClasses.filterStringInput, disabled: this.question.isInputReadOnly, readOnly: this.model.filterReadOnly ? true : undefined, size: !this.model.inputStringRendered ? 1 : undefined, role: this.model.filterStringEnabled ? this.question.ariaRole : undefined, \"aria-expanded\": this.question.ariaExpanded === null ? undefined : this.question.ariaExpanded === \"true\", \"aria-label\": this.question.a11y_input_ariaLabel, \"aria-labelledby\": this.question.a11y_input_ariaLabelledBy, \"aria-describedby\": this.question.a11y_input_ariaDescribedBy, \"aria-controls\": this.model.listElementId, \"aria-activedescendant\": this.model.ariaActivedescendant, placeholder: this.model.filterStringPlaceholder, onKeyDown: function (e) { _this.keyhandler(e); }, onChange: function (e) { _this.onChange(e); }, onBlur: function (e) { _this.onBlur(e); }, onFocus: function (e) { _this.onFocus(e); } }))));\n    };\n    return TagboxFilterString;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_3__[\"SurveyElementBase\"]));\n\n_reactquestion_factory__WEBPACK_IMPORTED_MODULE_2__[\"ReactQuestionFactory\"].Instance.registerQuestion(\"sv-tagbox-filter\", function (props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](TagboxFilterString, props);\n});\n\n\n/***/ }),\n\n/***/ \"./src/react/tagbox-item.tsx\":\n/*!***********************************!*\\\n  !*** ./src/react/tagbox-item.tsx ***!\n  \\***********************************/\n/*! exports provided: SurveyQuestionTagboxItem */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1047590__) {\n\n\"use strict\";\n__nested_webpack_require_1047590__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1047590__.d(__nested_webpack_exports__, \"SurveyQuestionTagboxItem\", function() { return SurveyQuestionTagboxItem; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1047590__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_1047590__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _reactquestion_element__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1047590__(/*! ./reactquestion_element */ \"./src/react/reactquestion_element.tsx\");\n/* harmony import */ var _components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1047590__(/*! ./components/svg-icon/svg-icon */ \"./src/react/components/svg-icon/svg-icon.tsx\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar SurveyQuestionTagboxItem = /** @class */ (function (_super) {\n    __extends(SurveyQuestionTagboxItem, _super);\n    function SurveyQuestionTagboxItem(props) {\n        return _super.call(this, props) || this;\n    }\n    Object.defineProperty(SurveyQuestionTagboxItem.prototype, \"question\", {\n        get: function () {\n            return this.props.question;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyQuestionTagboxItem.prototype, \"item\", {\n        get: function () {\n            return this.props.item;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyQuestionTagboxItem.prototype.canRender = function () {\n        return !!this.item && !!this.question;\n    };\n    SurveyQuestionTagboxItem.prototype.renderElement = function () {\n        var _this = this;\n        var text = this.renderLocString(this.item.locText);\n        var removeItem = function (event) {\n            _this.question.dropdownListModel.deselectItem(_this.item.value);\n            event.stopPropagation();\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"sv-tagbox__item\" },\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: \"sv-tagbox__item-text\" }, text),\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", { className: this.question.cssClasses.cleanItemButton, onClick: removeItem },\n                react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](_components_svg_icon_svg_icon__WEBPACK_IMPORTED_MODULE_2__[\"SvgIcon\"], { className: this.question.cssClasses.cleanItemButtonSvg, iconName: this.question.cssClasses.cleanItemButtonIconId, size: \"auto\" }))));\n    };\n    return SurveyQuestionTagboxItem;\n}(_reactquestion_element__WEBPACK_IMPORTED_MODULE_1__[\"ReactSurveyElement\"]));\n\n\n\n/***/ }),\n\n/***/ \"./src/settings.ts\":\n/*!*************************!*\\\n  !*** ./src/settings.ts ***!\n  \\*************************/\n/*! exports provided: settings */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1051281__) {\n\n\"use strict\";\n__nested_webpack_require_1051281__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1051281__.d(__nested_webpack_exports__, \"settings\", function() { return settings; });\n/* harmony import */ var _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1051281__(/*! ./global_variables_utils */ \"./src/global_variables_utils.ts\");\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1051281__(/*! ./utils/utils */ \"./src/utils/utils.ts\");\n\n\nvar document = typeof globalThis !== \"undefined\" ? globalThis.document : undefined.document;\nvar defaultEnvironment = (!!document ? {\n    root: document,\n    _rootElement: _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomDocumentHelper\"].getBody(),\n    get rootElement() {\n        var _a;\n        return (_a = this._rootElement) !== null && _a !== void 0 ? _a : _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomDocumentHelper\"].getBody();\n    },\n    set rootElement(rootElement) {\n        this._rootElement = rootElement;\n    },\n    _popupMountContainer: _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomDocumentHelper\"].getBody(),\n    get popupMountContainer() {\n        var _a;\n        return (_a = this._popupMountContainer) !== null && _a !== void 0 ? _a : _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomDocumentHelper\"].getBody();\n    },\n    set popupMountContainer(popupMountContainer) {\n        this._popupMountContainer = popupMountContainer;\n    },\n    svgMountContainer: document.head,\n    stylesSheetsMountContainer: document.head,\n} : undefined);\nvar columnWidthsByType = {\n    \"file\": { minWidth: \"240px\" },\n    \"comment\": { minWidth: \"200px\" }\n};\n/**\n * Global settings that apply to all surveys on the page. To specify one of the settings, use the code below:\n *\n * ```js\n * import { settings } from \"survey-core\";\n *\n * settings.settingName = \"value\";\n * ```\n */\nvar settings = {\n    /**\n     * An object that configures survey appearance when the survey is being designed in Survey Creator.\n     *\n     * Nested properties:\n     *\n     * - `showEmptyDescriptions`: `boolean`\\\n     * Specifies whether to display an empty description for pages and panels. Default value: `true`.\n     *\n     * - `showEmptyTitles`: `boolean`\\\n     * Specifies whether to display an empty title for pages and panels. Default value: `true`.\n     */\n    designMode: {\n        showEmptyDescriptions: true,\n        showEmptyTitles: true\n    },\n    //#region designMode section, Obsolete properties\n    get allowShowEmptyDescriptionInDesignMode() { return this.designMode.showEmptyDescriptions; },\n    set allowShowEmptyDescriptionInDesignMode(val) { this.designMode.showEmptyDescriptions = val; },\n    get allowShowEmptyTitleInDesignMode() { return this.designMode.showEmptyTitles; },\n    set allowShowEmptyTitleInDesignMode(val) { this.designMode.showEmptyTitles = val; },\n    //#endregion\n    /**\n     * An object that contains properties related to localization.\n     *\n     * Nested properties:\n     *\n     * - `useLocalTimeZone`: `boolean`\\\n     * Disable this property if you want internal SurveyJS functions to use methods that work with UTC date and time (`setUTCDate()` `setUTCHours()`, etc.) instead of methods that work with local date and time (`setYear()`, `setHours()`, etc.). Default value: `true`.\n     *\n     * - `defaultLocaleName`: `string`\\\n     * A property key that stores a translation for the default locale. Default value: `\"default\"`.\n     *\n     * - `storeDuplicatedTranslations`: `boolean`\\\n     * Specifies whether surveys should store translation strings that equal the translation strings in the default locale. Default value: `false`.\n     */\n    localization: {\n        useLocalTimeZone: true,\n        storeDuplicatedTranslations: false,\n        defaultLocaleName: \"default\"\n    },\n    //#region localization section, obsolete properties\n    get useLocalTimeZone() { return this.localization.useLocalTimeZone; },\n    set useLocalTimeZone(val) { this.localization.useLocalTimeZone = val; },\n    get storeDuplicatedTranslations() { return this.localization.storeDuplicatedTranslations; },\n    set storeDuplicatedTranslations(val) { this.localization.storeDuplicatedTranslations = val; },\n    get defaultLocaleName() { return this.localization.defaultLocaleName; },\n    set defaultLocaleName(val) { this.localization.defaultLocaleName = val; },\n    //#endregion\n    /**\n     * An object with properties that configure surveys when they work with a web service.\n     *\n     * Nested properties:\n     *\n     * - `encodeUrlParams`: `boolean`\\\n     * Specifies whether to encode URL parameters when you access a web service. Default value: `true`.\n     *\n     * - `cacheLoadedChoices`: `boolean`\\\n     * Specifies whether to cache [choices loaded from a web service](https://surveyjs.io/form-library/documentation/api-reference/questionselectbase#choicesByUrl). Default value: `true`.\n     *\n     * - `disableQuestionWhileLoadingChoices`: `boolean`\\\n     * Disables a question while its choices are being loaded from a web service. Default value: `false`.\n     *\n     * - `surveyServiceUrl`: `string`\\\n     * The URL of the SurveyJS Service API endpoint.\n     *\n     * - `onBeforeRequestChoices`: `(sender: ChoicesRestful, options: { request: XMLHttpRequest })`\\\n     * An event that is raised before a request for choices is send. Applies to questions with a specified [`choiceByUrl`](https://surveyjs.io/form-library/documentation/api-reference/questionselectbase#choicesByUrl) property. Use the `options.request` parameter to access and modify the `XMLHttpRequest` object. For instance, you can add authentication headers to it:\n     *\n     *     ```js\n     *     import { settings } from \"survey-core\";\n     *\n     *     settings.web.onBeforeSendRequest = (sender, options) => {\n     *       options.request.setRequestHeader('RequestVerificationToken', requestVerificationToken);\n     *     };\n     *     ```\n     */\n    web: {\n        onBeforeRequestChoices: function (sender, options) { },\n        encodeUrlParams: true,\n        cacheLoadedChoices: true,\n        disableQuestionWhileLoadingChoices: false,\n        surveyServiceUrl: \"https://api.surveyjs.io/public/v1/Survey\"\n    },\n    //#region web section, obsolete properties\n    get webserviceEncodeParameters() { return this.web.encodeUrlParams; },\n    set webserviceEncodeParameters(val) { this.web.encodeUrlParams = val; },\n    get useCachingForChoicesRestful() { return this.web.cacheLoadedChoices; },\n    set useCachingForChoicesRestful(val) { this.web.cacheLoadedChoices = val; },\n    get useCachingForChoicesRestfull() { return this.web.cacheLoadedChoices; },\n    set useCachingForChoicesRestfull(val) { this.web.cacheLoadedChoices = val; },\n    get disableOnGettingChoicesFromWeb() { return this.web.disableQuestionWhileLoadingChoices; },\n    set disableOnGettingChoicesFromWeb(val) { this.web.disableQuestionWhileLoadingChoices = val; },\n    get surveyServiceUrl() { return this.web.surveyServiceUrl; },\n    set surveyServiceUrl(val) { this.web.surveyServiceUrl = val; },\n    //#endregion\n    /**\n     * An object that contains properties related to [triggers](https://surveyjs.io/form-library/documentation/design-survey/conditional-logic#conditional-survey-logic-triggers).\n     *\n     * Nested properties:\n     *\n     * - `changeNavigationButtonsOnComplete`: `boolean`\\\n     * Specifies whether to re-evaluate an expression associated with the [Complete trigger](https://surveyjs.io/form-library/documentation/design-survey/conditional-logic#complete) immediately when a question value changes. If the expression evaluates to `true`, the trigger is executed. Default value: `false`.\\\n     * Keep this property set to `false` if you want to re-evaluate the Complete trigger's expression only when the respondents navigate to another page.\n     *\n     * - `executeCompleteOnValueChanged`: `boolean`\\\n     * Specifies whether to replace the Next button with the Complete button when the [Complete trigger](https://surveyjs.io/form-library/documentation/design-survey/conditional-logic#complete) is going to be executed. Default value: `true`.\n     *\n     * - `executeSkipOnValueChanged`: `boolean`\\\n     * Specifies whether to re-evaluate an expression associated with the [Skip trigger](https://surveyjs.io/form-library/documentation/design-survey/conditional-logic#skip) immediately when a question value changes. If the expression evaluates to `true`, the trigger is executed. Default value: `true`.\\\n     * Disable this property if you want to re-evaluate the Skip trigger's expression only when respondents navigate to another page.\n     */\n    triggers: {\n        changeNavigationButtonsOnComplete: true,\n        executeCompleteOnValueChanged: false,\n        executeSkipOnValueChanged: true\n    },\n    //#region triggers section, Obsolete properties\n    get executeCompleteTriggerOnValueChanged() { return this.triggers.executeCompleteOnValueChanged; },\n    set executeCompleteTriggerOnValueChanged(val) { this.triggers.executeCompleteOnValueChanged = val; },\n    get changeNavigationButtonsOnCompleteTrigger() { return this.triggers.changeNavigationButtonsOnComplete; },\n    set changeNavigationButtonsOnCompleteTrigger(val) { this.triggers.changeNavigationButtonsOnComplete = val; },\n    get executeSkipTriggerOnValueChanged() { return this.triggers.executeSkipOnValueChanged; },\n    set executeSkipTriggerOnValueChanged(val) { this.triggers.executeSkipOnValueChanged = val; },\n    //#endregion\n    /**\n     * An object that contains properties related to JSON serialization.\n     *\n     * Nested properties:\n     *\n     * - `itemValueSerializeAsObject`: `boolean`\\\n     * Enable this property if you want to serialize [`ItemValue`](https://surveyjs.io/form-library/documentation/api-reference/itemvalue) instances as objects even when they include only the `value` property. Default value: `false`. View an example below.\n     *\n     * - `itemValueSerializeDisplayText`: `boolean`\\\n     * Enable this property if you want to serialize the `text` property of [`ItemValue`](https://surveyjs.io/form-library/documentation/api-reference/itemvalue) objects even when it is empty or equal to the `value` property. Default value: `false`. View an example below.\n     *\n     * - `localizableStringSerializeAsObject`: `boolean`\\\n     * Enable this property if you want to serialize [`LocalizableString`](https://surveyjs.io/form-library/documentation/api-reference/localizablestring) instances as objects even when they include only a translation string for the default locale. For example, `\"Custom String\"` will be serialized as `{ default: \"Custom String\" }`. Default value: `false`.\n     *\n     * ```js\n     * import { ItemValue, settings } from \"survey-core\";\n     *\n     * // `itemValueSerializeAsObject` example\n     * settings.serialization.itemValueSerializeAsObject = true;\n     * const item = new ItemValue(5);\n     * const itemString = item.toJSON(); // Produces { value: 5 } instead of 5\n     *\n     * // `itemValueSerializeDisplayText` example\n     * settings.serialization.itemValueSerializeDisplayText = true;\n     * const item = new ItemValue(\"item1\");\n     * const itemString = item.toJSON(); // Produces { value: \"item1\", text: \"item1\" } instead of \"item1\"\n     * ```\n     */\n    serialization: {\n        itemValueSerializeAsObject: false,\n        itemValueSerializeDisplayText: false,\n        localizableStringSerializeAsObject: false\n    },\n    //#region serialization section, Obsolete properties\n    get itemValueAlwaysSerializeAsObject() { return this.serialization.itemValueSerializeAsObject; },\n    set itemValueAlwaysSerializeAsObject(val) { this.serialization.itemValueSerializeAsObject = val; },\n    get itemValueAlwaysSerializeText() { return this.serialization.itemValueSerializeDisplayText; },\n    set itemValueAlwaysSerializeText(val) { this.serialization.itemValueSerializeDisplayText = val; },\n    get serializeLocalizableStringAsObject() { return this.serialization.localizableStringSerializeAsObject; },\n    set serializeLocalizableStringAsObject(val) { this.serialization.localizableStringSerializeAsObject = val; },\n    //#endregion\n    /**\n     * An object that configures lazy rendering.\n     *\n     * Nested properties:\n     *\n     * - `enabled`: `boolean`\\\n     * Specifies whether to add questions to the DOM only when they get into the viewport. Default value: `false`.\n     *\n     * [View Demo](https://surveyjs.io/form-library/examples/survey-lazy/ (linkStyle))\n     * @see [SurveyModel.lazyRendering](https://surveyjs.io/form-library/documentation/api-reference/survey-data-model#lazyRendering)\n     */\n    lazyRender: {\n        enabled: false,\n        firstBatchSize: 3\n    },\n    //#region lazyRender section, Obsolete properties\n    get lazyRowsRendering() { return this.lazyRender.enabled; },\n    set lazyRowsRendering(val) { this.lazyRender.enabled = val; },\n    get lazyRowsRenderingStartRow() { return this.lazyRender.firstBatchSize; },\n    set lazyRowsRenderingStartRow(val) { this.lazyRender.firstBatchSize = val; },\n    //#endregion\n    /**\n     * An object with properties that apply to [Single-Choice](https://surveyjs.io/form-library/documentation/api-reference/matrix-table-question-model), [Multiple-Choice](https://surveyjs.io/form-library/documentation/api-reference/matrix-table-with-dropdown-list), and [Dynamic Matrix](https://surveyjs.io/form-library/documentation/api-reference/dynamic-matrix-table-question-model) questions.\n     *\n     * Nested properties:\n     *\n     * - `defaultRowName`: `string`\\\n     * A property key that stores an object with default cell values. Default value: \"default\".\n     *\n     * - `defaultCellType`: `string`\\\n     * The default type of matrix cells. Default value: `\"dropdown\"`.\\\n     * You can specify this setting for individual questions or matrix columns: [`cellType`](https://surveyjs.io/form-library/documentation/api-reference/dynamic-matrix-table-question-model#cellType). Refer to the `cellType` property description for information on possible values.\n     *\n     * - `totalsSuffix`: `string`\\\n     * A suffix added to the name of the property that stores total values. The resulting property name consists of the matrix name and the suffix. Default value: `\"-total\"`.\n     *\n     * - `maxRowCount`: `number`\\\n     * A maximum number of rows in a Dynamic Matrix. Default value: 1000.\\\n     * You can specify this setting for an individual Dynamic Matrix: [`maxRowCount`](https://surveyjs.io/form-library/documentation/api-reference/dynamic-matrix-table-question-model#maxRowCount).\n     *\n     * - `maxRowCountInCondition`: `number`\\\n     * A maximum number of matrix rows included in the Condition drop-down menu in Survey Creator. This menu is used to configure conditional survey logic. Default value: 1.\\\n     * If you set this property to 0, the Condition menu does not include any matrix rows. Users still can specify conditions that use matrix rows but only with Manual Entry.\n     *\n     * - `renderRemoveAsIcon`: `boolean`\\\n     * Disable this property if you want to render the Remove action in Dynamic Matrix as a button. Otherwise, the action is rendered as an icon. Default value: `true`.\n     *\n     * - `columnWidthsByType`: `object`\\\n     * An object that specifies fixed and minimum column width based on the column type.\\\n     * Example: `settings.matrix.columnWidthsByType = { \"tagbox\": { minWidth: \"240px\", width: \"300px\" } }`\n     *\n     * - `rateSize`: `\"small\"` (default) | `\"normal\"`\\\n     * Specifies the size of rate values. Applies to [Rating Scale](https://surveyjs.io/form-library/examples/rating-scale/) questions within matrixes.\n     */\n    matrix: {\n        defaultCellType: \"dropdown\",\n        defaultRowName: \"default\",\n        totalsSuffix: \"-total\",\n        maxRowCount: 1000,\n        maxRowCountInCondition: 1,\n        renderRemoveAsIcon: true,\n        columnWidthsByType: columnWidthsByType,\n        rateSize: \"small\",\n    },\n    //#region matrix section, Obsolete properties\n    get matrixDefaultRowName() { return this.matrix.defaultRowName; },\n    set matrixDefaultRowName(val) { this.matrix.defaultRowName = val; },\n    get matrixDefaultCellType() { return this.matrix.defaultCellType; },\n    set matrixDefaultCellType(val) { this.matrix.defaultCellType = val; },\n    get matrixTotalValuePostFix() { return this.matrix.totalsSuffix; },\n    set matrixTotalValuePostFix(val) { this.matrix.totalsSuffix = val; },\n    get matrixMaximumRowCount() { return this.matrix.maxRowCount; },\n    set matrixMaximumRowCount(val) { this.matrix.maxRowCount = val; },\n    get matrixMaxRowCountInCondition() { return this.matrix.maxRowCountInCondition; },\n    set matrixMaxRowCountInCondition(val) { this.matrix.maxRowCountInCondition = val; },\n    get matrixRenderRemoveAsIcon() { return this.matrix.renderRemoveAsIcon; },\n    set matrixRenderRemoveAsIcon(val) { this.matrix.renderRemoveAsIcon = val; },\n    //#endregion\n    /**\n     * An object with properties that apply to [Dynamic Panel](https://surveyjs.io/form-library/documentation/api-reference/dynamic-panel-model) questions.\n     *\n     * Nested properties:\n     *\n     * - `maxPanelCount`: `number`\\\n     * A maximum number of panels in Dynamic Panel. Default value: 100.\\\n     * You can specify this setting for an individual Dynamic Panel: [`maxPanelCount`](https://surveyjs.io/form-library/documentation/api-reference/dynamic-panel-model#maxPanelCount).\n     *\n     * - `maxPanelCountInCondition`: `number`\\\n     * A maximum number of Dynamic Panel panels included in the Condition drop-down menu in Survey Creator. This menu is used to configure conditional survey logic. Default value: 1.\\\n     * If you set this property to 0, the Condition menu does not include any panel questions. Users still can specify conditions that use panel questions but only with Manual Entry.\n     */\n    panel: {\n        maxPanelCount: 100,\n        maxPanelCountInCondition: 1\n    },\n    //#region panel section, Obsolete properties\n    get panelDynamicMaxPanelCountInCondition() { return this.panel.maxPanelCountInCondition; },\n    set panelDynamicMaxPanelCountInCondition(val) { this.panel.maxPanelCountInCondition = val; },\n    get panelMaximumPanelCount() { return this.panel.maxPanelCount; },\n    set panelMaximumPanelCount(val) { this.panel.maxPanelCount = val; },\n    //#endregion\n    /**\n     * An object with properties that configure questions in read-only mode.\n     *\n     * Nested properties:\n     *\n     * - `commentRenderMode`: `\"textarea\"` (default) | `\"div\"`\\\n     * Specifies how to render the input field of [Comment](https://surveyjs.io/form-library/documentation/api-reference/comment-field-model) questions in [read-only](https://surveyjs.io/form-library/documentation/api-reference/comment-field-model#readOnly) mode: as a disabled `<textarea>` element or as a `<div>` element with a non-editable question value within it.\n     *\n     * - `textRenderMode`: `\"input\"` (default) | `\"div\"`\\\n     * Specifies how to render the input field of [Text](https://surveyjs.io/form-library/documentation/api-reference/text-entry-question-model) questions in [read-only](https://surveyjs.io/form-library/documentation/api-reference/text-entry-question-model#readOnly) mode: as a disabled `<input>` element or as a `<div>` element with a non-editable question value within it.\n     */\n    readOnly: {\n        enableValidation: false,\n        commentRenderMode: \"textarea\",\n        textRenderMode: \"input\"\n    },\n    //#region readOnly section, Obsolete properties\n    get readOnlyCommentRenderMode() { return this.readOnly.commentRenderMode; },\n    set readOnlyCommentRenderMode(val) { this.readOnly.commentRenderMode = val; },\n    get readOnlyTextRenderMode() { return this.readOnly.textRenderMode; },\n    set readOnlyTextRenderMode(val) { this.readOnly.textRenderMode = val; },\n    //#endregion\n    /**\n     * An object with properties that configure question numbering.\n     *\n     * Nested properties:\n     *\n     * - `includeQuestionsWithHiddenNumber`: `boolean`\\\n     * Specifies whether to number questions whose [`hideNumber`](https://surveyjs.io/form-library/documentation/api-reference/question#hideNumber) property is enabled. Default value: `false`.\n     *\n     * - `includeQuestionsWithHiddenTitle`: `boolean`\\\n     * Specifies whether to number questions whose [`titleLocation`](https://surveyjs.io/form-library/documentation/api-reference/question#titleLocation) property is set to `\"hidden\"`. Default value: `false`.\n     */\n    numbering: {\n        includeQuestionsWithHiddenNumber: false,\n        includeQuestionsWithHiddenTitle: false\n    },\n    //#region numbering section, Obsolete properties\n    get setQuestionVisibleIndexForHiddenTitle() { return this.numbering.includeQuestionsWithHiddenTitle; },\n    set setQuestionVisibleIndexForHiddenTitle(val) { this.numbering.includeQuestionsWithHiddenTitle = val; },\n    get setQuestionVisibleIndexForHiddenNumber() { return this.numbering.includeQuestionsWithHiddenNumber; },\n    set setQuestionVisibleIndexForHiddenNumber(val) { this.numbering.includeQuestionsWithHiddenNumber = val; },\n    //#endregion\n    /**\n     * Specifies an action to perform when users press the Enter key within a survey.\n     *\n     * Possible values:\n     *\n     * - `\"moveToNextEditor\"` - Moves focus to the next editor.\n     * - `\"loseFocus\"` - Removes focus from the current editor.\n     * - `\"default\"` - Behaves as a standard `<input>` element.\n     */\n    enterKeyAction: \"default\",\n    /**\n     * An object that configures string comparison.\n     *\n     * Nested properties:\n     *\n     * - `trimStrings`: `boolean`\\\n     * Specifies whether to remove whitespace from both ends of a string before the comparison. Default value: `true`.\n     *\n     * - `caseSensitive`: `boolean`\\\n     * Specifies whether to differentiate between capital and lower-case letters. Default value: `false`.\n     */\n    comparator: {\n        trimStrings: true,\n        caseSensitive: false,\n        normalizeTextCallback: function (str, reason) { return str; }\n    },\n    expressionDisableConversionChar: \"#\",\n    get commentPrefix() { return settings.commentSuffix; },\n    set commentPrefix(val) { settings.commentSuffix = val; },\n    /**\n     * A suffix added to the name of the property that stores comments.\n     *\n     * Default value: \"-Comment\"\n     *\n     * You can specify this setting for an individual survey: [`commentSuffix`](https://surveyjs.io/form-library/documentation/api-reference/survey-data-model#commentSuffix).\n     */\n    commentSuffix: \"-Comment\",\n    /**\n     * A separator used in a shorthand notation that specifies a value and display text for an [`ItemValue`](https://surveyjs.io/form-library/documentation/api-reference/itemvalue) object: `\"value|text\"`.\n     *\n     * Default value: `\"|\"`\n     */\n    itemValueSeparator: \"|\",\n    /**\n     * A maximum number of rate values in a [Rating](https://surveyjs.io/form-library/documentation/api-reference/rating-scale-question-model) question.\n     *\n     * Default value: 20\n     */\n    ratingMaximumRateValueCount: 20,\n    /**\n     * Specifies whether to close the drop-down menu of a [TagBox](https://surveyjs.io/form-library/examples/how-to-create-multiselect-tag-box/) question after a user selects a value.\n     *\n     * This setting applies to all TagBox questions on a page. You can use the [closeOnSelect](https://surveyjs.io/form-library/documentation/api-reference/dropdown-tag-box-model#closeOnSelect) property to specify the same setting for an individual TagBox question.\n     */\n    tagboxCloseOnSelect: false,\n    /**\n     * A function that activates a browser confirm dialog.\n     *\n     * Use the following code to execute this function:\n     *\n     * ```js\n     * import { settings } from \"survey-core\";\n     *\n     * // `result` contains `true` if the action was confirmed or `false` otherwise\n     * const result = settings.confirmActionFunc(\"Are you sure?\");\n     * ```\n     *\n     * You can redefine the `confirmActionFunc` function if you want to display a custom dialog window. Your function should return `true` if a user confirms an action or `false` otherwise.\n     * @param message A message to be displayed in the confirm dialog window.\n     */\n    confirmActionFunc: function (message) {\n        return confirm(message);\n    },\n    /**\n     * A function that activates a proprietary SurveyJS confirm dialog.\n     *\n     * Use the following code to execute this function:\n     *\n     * ```js\n     * import { settings } from \"survey-core\";\n     *\n     * settings.confirmActionAsync(\"Are you sure?\", (confirmed) => {\n     *   if (confirmed) {\n     *     // ...\n     *     // Proceed with the action\n     *     // ...\n     *   } else {\n     *     // ...\n     *     // Cancel the action\n     *     // ...\n     *   }\n     * });\n     * ```\n     *\n     * You can redefine the `confirmActionAsync` function if you want to display a custom dialog window. Your function should return `true` to be enabled; otherwise, a survey executes the [`confirmActionFunc`](#confirmActionFunc) function. Pass the dialog result as the `callback` parameter: `true` if a user confirms an action, `false` otherwise.\n     * @param message A message to be displayed in the confirm dialog window.\n     * @param callback A callback function that should be called with `true` if a user confirms an action or `false` otherwise.\n     */\n    confirmActionAsync: function (message, callback, applyTitle, locale, rootElement) {\n        return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__[\"showConfirmDialog\"])(message, callback, applyTitle, locale, rootElement);\n    },\n    /**\n     * A minimum width value for all survey elements.\n     *\n     * Default value: `\"300px\"`\n     *\n     * You can override this setting for individual elements: [`minWidth`](https://surveyjs.io/form-library/documentation/api-reference/surveyelement#minWidth).\n     */\n    minWidth: \"300px\",\n    /**\n     * A maximum width value for all survey elements.\n     *\n     * Default value: `\"100%\"`\n     *\n     * You can override this setting for individual elements: [`maxWidth`](https://surveyjs.io/form-library/documentation/api-reference/surveyelement#maxWidth).\n     */\n    maxWidth: \"100%\",\n    /**\n     * Specifies how many times surveys can re-evaluate expressions when a question value changes. This limit helps avoid recursions in expressions.\n     *\n     * Default value: 10\n     */\n    maxConditionRunCountOnValueChanged: 10,\n    /**\n     * An object that configures notifications.\n     *\n     * Nested properties:\n     *\n     * - `lifetime`: `number`\\\n     * Specifies a time period during which a notification is displayed; measured in milliseconds.\n     */\n    notifications: {\n        lifetime: 2000\n    },\n    /**\n     * Specifies how many milliseconds a survey should wait before it automatically switches to the next page. Applies only when [auto-advance](https://surveyjs.io/form-library/documentation/api-reference/survey-data-model#goNextPageAutomatic) is enabled.\n     *\n     * Default value: 300\n     */\n    autoAdvanceDelay: 300,\n    /**\n     * Specifies the direction in which to lay out Checkbox and Radiogroup items. This setting affects the resulting UI when items are arranged in [more than one column](https://surveyjs.io/form-library/documentation/api-reference/checkbox-question-model#colCount).\n     *\n     * Possible values:\n     *\n     * - `\"row\"` (default) - Items fill the current row, then move on to the next row.\n     * - `\"column\"` - Items fill the current column, then move on to the next column.\n     */\n    showItemsInOrder: \"default\",\n    /**\n     * A value to save in survey results when respondents select the \"None\" choice item.\n     *\n     * Default value: `\"none\"`\n     */\n    noneItemValue: \"none\",\n    /**\n     * A value to save in survey results when respondents select the \"Refuse to answer\" choice item.\n     *\n     * Default value: `\"refused\"`\n     */\n    refuseItemValue: \"refused\",\n    /**\n     * A value to save in survey results when respondents select the \"Don't know\" choice item.\n     *\n     * Default value: `\"dontknow\"`\n     */\n    dontKnowItemValue: \"dontknow\",\n    /**\n     * An object whose properties specify the order of the special choice items (\"None\", \"Other\", \"Select All\", \"Refuse to answer\", \"Don't know\") in select-based questions.\n     *\n     * Default value: `{ selectAllItem: [-1], noneItem: [1], otherItem: [2], dontKnowItem: [3], otherItem: [4] }`\n     *\n     * Use this object to reorder special choices. Each property accepts an array of integer numbers. Negative numbers place a special choice item above regular choice items, positive numbers place it below them. For instance, the code below specifies the following order of choices: None, Select All, regular choices, Other.\n     *\n     * ```js\n     * import { settings } from \"survey-core\";\n     *\n     * settings.specialChoicesOrder.noneItem = [-2];\n     * settings.specialChoicesOrder.selectAllItem = [-1];\n     * settings.specialChoicesOrder.otherItem = [1];\n     * ```\n     *\n     * If you want to duplicate a special choice item above and below other choices, add two numbers to the corresponding array:\n     *\n     * ```js\n     * settings.specialChoicesOrder.selectAllItem = [-1, 3] // Displays Select All above and below other choices\n     * ```\n     */\n    specialChoicesOrder: {\n        selectAllItem: [-1],\n        noneItem: [1],\n        refuseItem: [2],\n        dontKnowItem: [3],\n        otherItem: [4]\n    },\n    /**\n     * A list of supported validators by question type.\n     */\n    supportedValidators: {\n        question: [\"expression\"],\n        comment: [\"text\", \"regex\"],\n        text: [\"numeric\", \"text\", \"regex\", \"email\"],\n        checkbox: [\"answercount\"],\n        imagepicker: [\"answercount\"],\n    },\n    /**\n     * Specifies a minimum date that users can enter into a [Text](https://surveyjs.io/form-library/documentation/api-reference/text-entry-question-model) question with [`inputType`](https://surveyjs.io/form-library/documentation/api-reference/text-entry-question-model#inputType) set to `\"date\"` or `\"datetime-local\"`. Set this property to a string with the folllowing format: `\"yyyy-mm-dd\"`.\n     */\n    minDate: \"\",\n    /**\n     * Specifies a maximum date that users can enter into a [Text](https://surveyjs.io/form-library/documentation/api-reference/text-entry-question-model) question with [`inputType`](https://surveyjs.io/form-library/documentation/api-reference/text-entry-question-model#inputType) set to `\"date\"` or `\"datetime-local\"`. Set this property to a string with the folllowing format: `\"yyyy-mm-dd\"`.\n     */\n    maxDate: \"\",\n    showModal: undefined,\n    showDialog: undefined,\n    supportCreatorV2: false,\n    showDefaultItemsInCreatorV2: true,\n    /**\n     * An object that specifies icon replacements. Object keys are built-in icon names. To use a custom icon, assign its name to the key of the icon you want to replace:\n     *\n     * ```js\n     * import { settings } from \"survey-core\";\n     *\n     * settings.customIcons[\"icon-redo\"] = \"custom-redo-icon\";\n     * ```\n     *\n     * For more information about icons in SurveyJS, refer to the following help topic: [UI Icons](https://surveyjs.io/form-library/documentation/icons).\n     */\n    customIcons: {},\n    /**\n     * Specifies which part of a choice item responds to a drag gesture in Ranking questions.\n     *\n     * Possible values:\n     *\n     * - `\"entireItem\"` (default) - Users can use the entire choice item as a drag handle.\n     * - `\"icon\"` - Users can only use the choice item icon as a drag handle.\n     */\n    rankingDragHandleArea: \"entireItem\",\n    environment: defaultEnvironment,\n    /**\n     * Allows you to hide the maximum length indicator in text input questions.\n     *\n     * If you specify a question's [`maxLength`](https://surveyjs.io/form-library/documentation/api-reference/text-entry-question-model#maxLength) property or a survey's [`maxTextLength`](https://surveyjs.io/form-library/documentation/api-reference/survey-data-model#maxTextLength) property, text input questions indicate the number of entered characters and the character limit. Assign `false` to the `settings.showMaxLengthIndicator` property if you want to hide this indicator.\n     *\n     * Default value: `true`\n     */\n    showMaxLengthIndicator: true,\n    /**\n     * Specifies whether to animate survey elements.\n     *\n     * Default value: `true`\n    */\n    animationEnabled: true,\n    /**\n     * An object that specifies heading levels (`<h1>`, `<h2>`, etc.) to use when rendering survey, page, panel, and question titles.\n     *\n     * Default value: `{ survey: \"h3\", page: \"h4\", panel: \"h4\", question: \"h5\" }`\n     *\n     * If you want to modify heading levels for individual titles, handle `SurveyModel`'s [`onGetTitleTagName`](https://surveyjs.io/form-library/documentation/api-reference/survey-data-model#onGetTitleTagName) event.\n     */\n    titleTags: {\n        survey: \"h3\",\n        page: \"h4\",\n        panel: \"h4\",\n        question: \"h5\",\n    },\n    questions: {\n        inputTypes: [\n            \"color\",\n            \"date\",\n            \"datetime-local\",\n            \"email\",\n            \"month\",\n            \"number\",\n            \"password\",\n            \"range\",\n            \"tel\",\n            \"text\",\n            \"time\",\n            \"url\",\n            \"week\",\n        ],\n        dataList: [\n            \"\",\n            \"name\",\n            \"honorific-prefix\",\n            \"given-name\",\n            \"additional-name\",\n            \"family-name\",\n            \"honorific-suffix\",\n            \"nickname\",\n            \"organization-title\",\n            \"username\",\n            \"new-password\",\n            \"current-password\",\n            \"organization\",\n            \"street-address\",\n            \"address-line1\",\n            \"address-line2\",\n            \"address-line3\",\n            \"address-level4\",\n            \"address-level3\",\n            \"address-level2\",\n            \"address-level1\",\n            \"country\",\n            \"country-name\",\n            \"postal-code\",\n            \"cc-name\",\n            \"cc-given-name\",\n            \"cc-additional-name\",\n            \"cc-family-name\",\n            \"cc-number\",\n            \"cc-exp\",\n            \"cc-exp-month\",\n            \"cc-exp-year\",\n            \"cc-csc\",\n            \"cc-type\",\n            \"transaction-currency\",\n            \"transaction-amount\",\n            \"language\",\n            \"bday\",\n            \"bday-day\",\n            \"bday-month\",\n            \"bday-year\",\n            \"sex\",\n            \"url\",\n            \"photo\",\n            \"tel\",\n            \"tel-country-code\",\n            \"tel-national\",\n            \"tel-area-code\",\n            \"tel-local\",\n            \"tel-local-prefix\",\n            \"tel-local-suffix\",\n            \"tel-extension\",\n            \"email\",\n            \"impp\",\n        ]\n    },\n    legacyProgressBarView: false,\n    /**\n     * An object with properties that configure input masks.\n     *\n     * Nested properties:\n     *\n     * - `patternPlaceholderChar`: `string`\\\n     * A symbol used as a placeholder for characters to be entered in [pattern masks](https://surveyjs.io/form-library/documentation/api-reference/inputmaskpattern). Default value: `\"_\"`.\n     *\n     * - `patternEscapeChar`: `string`\\\n     * A symbol used to insert literal representations of special characters in [pattern masks](https://surveyjs.io/form-library/documentation/api-reference/inputmaskpattern). Default value: `\"\\\\\"`.\n     *\n     * - `patternDefinitions`: `<{ [key: string]: RegExp }>`\\\n     * An object that maps placeholder symbols to regular expressions in [pattern masks](https://surveyjs.io/form-library/documentation/api-reference/inputmaskpattern). Default value: `{ \"9\": /[0-9]/, \"a\": /[a-zA-Z]/, \"#\": /[a-zA-Z0-9]/ }`.\n     */\n    maskSettings: {\n        patternPlaceholderChar: \"_\",\n        patternEscapeChar: \"\\\\\",\n        patternDefinitions: {\n            \"9\": /[0-9]/,\n            \"a\": /[a-zA-Z]/,\n            \"#\": /[a-zA-Z0-9]/\n        }\n    }\n};\n\n\n/***/ }),\n\n/***/ \"./src/survey-element.ts\":\n/*!*******************************!*\\\n  !*** ./src/survey-element.ts ***!\n  \\*******************************/\n/*! exports provided: SurveyElementCore, DragTypeOverMeEnum, SurveyElement */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1087645__) {\n\n\"use strict\";\n__nested_webpack_require_1087645__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1087645__.d(__nested_webpack_exports__, \"SurveyElementCore\", function() { return SurveyElementCore; });\n/* harmony export (binding) */ __nested_webpack_require_1087645__.d(__nested_webpack_exports__, \"DragTypeOverMeEnum\", function() { return DragTypeOverMeEnum; });\n/* harmony export (binding) */ __nested_webpack_require_1087645__.d(__nested_webpack_exports__, \"SurveyElement\", function() { return SurveyElement; });\n/* harmony import */ var _jsonobject__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1087645__(/*! ./jsonobject */ \"./src/jsonobject.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1087645__(/*! ./base */ \"./src/base.ts\");\n/* harmony import */ var _actions_adaptive_container__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1087645__(/*! ./actions/adaptive-container */ \"./src/actions/adaptive-container.ts\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_1087645__(/*! ./helpers */ \"./src/helpers.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_1087645__(/*! ./settings */ \"./src/settings.ts\");\n/* harmony import */ var _actions_container__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_1087645__(/*! ./actions/container */ \"./src/actions/container.ts\");\n/* harmony import */ var _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_1087645__(/*! ./utils/cssClassBuilder */ \"./src/utils/cssClassBuilder.ts\");\n/* harmony import */ var _utils_animation__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_1087645__(/*! ./utils/animation */ \"./src/utils/animation.ts\");\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_1087645__(/*! ./utils/utils */ \"./src/utils/utils.ts\");\n/* harmony import */ var _global_variables_utils__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_1087645__(/*! ./global_variables_utils */ \"./src/global_variables_utils.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = ( false) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\n\n\n\n/**\n * A base class for the [`SurveyElement`](https://surveyjs.io/form-library/documentation/surveyelement) and [`SurveyModel`](https://surveyjs.io/form-library/documentation/surveymodel) classes.\n */\nvar SurveyElementCore = /** @class */ (function (_super) {\n    __extends(SurveyElementCore, _super);\n    function SurveyElementCore() {\n        var _this = _super.call(this) || this;\n        _this.createLocTitleProperty();\n        return _this;\n    }\n    SurveyElementCore.prototype.createLocTitleProperty = function () {\n        return this.createLocalizableString(\"title\", this, true);\n    };\n    Object.defineProperty(SurveyElementCore.prototype, \"title\", {\n        /**\n         * A title for the survey element. If `title` is undefined, the `name` property value is displayed instead.\n         *\n         * Empty pages and panels do not display their titles or names.\n         *\n         * @see [Configure Question Titles](https://surveyjs.io/form-library/documentation/design-survey-question-titles)\n        */\n        get: function () {\n            return this.getLocalizableStringText(\"title\", this.getDefaultTitleValue());\n        },\n        set: function (val) {\n            this.setLocalizableStringText(\"title\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"locTitle\", {\n        get: function () {\n            return this.getLocalizableString(\"title\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementCore.prototype.getDefaultTitleValue = function () { return undefined; };\n    SurveyElementCore.prototype.updateDescriptionVisibility = function (newDescription) {\n        var showPlaceholder = false;\n        if (this.isDesignMode) {\n            var property_1 = _jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"Serializer\"].findProperty(this.getType(), \"description\");\n            showPlaceholder = !!(property_1 === null || property_1 === void 0 ? void 0 : property_1.placeholder);\n        }\n        this.hasDescription = !!newDescription || (showPlaceholder && this.isDesignMode);\n    };\n    Object.defineProperty(SurveyElementCore.prototype, \"locDescription\", {\n        get: function () {\n            return this.getLocalizableString(\"description\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"titleTagName\", {\n        get: function () {\n            var titleTagName = this.getDefaultTitleTagName();\n            var survey = this.getSurvey();\n            return !!survey ? survey.getElementTitleTagName(this, titleTagName) : titleTagName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementCore.prototype.getDefaultTitleTagName = function () {\n        return _settings__WEBPACK_IMPORTED_MODULE_4__[\"settings\"].titleTags[this.getType()];\n    };\n    Object.defineProperty(SurveyElementCore.prototype, \"hasTitle\", {\n        get: function () { return this.title.length > 0; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"hasTitleActions\", {\n        get: function () { return false; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"hasTitleEvents\", {\n        get: function () {\n            return this.hasTitleActions;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementCore.prototype.getTitleToolbar = function () { return null; };\n    SurveyElementCore.prototype.getTitleOwner = function () { return undefined; };\n    Object.defineProperty(SurveyElementCore.prototype, \"isTitleOwner\", {\n        get: function () { return !!this.getTitleOwner(); },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"isTitleRenderedAsString\", {\n        get: function () { return this.getIsTitleRenderedAsString(); },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementCore.prototype.toggleState = function () { return undefined; };\n    Object.defineProperty(SurveyElementCore.prototype, \"cssClasses\", {\n        get: function () { return {}; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"cssTitle\", {\n        get: function () { return \"\"; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"ariaTitleId\", {\n        get: function () { return undefined; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"ariaDescriptionId\", {\n        get: function () { return undefined; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"titleTabIndex\", {\n        get: function () { return undefined; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"titleAriaExpanded\", {\n        get: function () { return undefined; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"titleAriaRole\", {\n        get: function () { return undefined; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"ariaLabel\", {\n        get: function () {\n            return this.locTitle.renderedHtml;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElementCore.prototype, \"titleAriaLabel\", {\n        get: function () {\n            return this.ariaLabel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElementCore.prototype.getIsTitleRenderedAsString = function () { return !this.isTitleOwner; };\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])()\n    ], SurveyElementCore.prototype, \"hasDescription\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({\n            localizable: true,\n            onSet: function (newDescription, self) {\n                self.updateDescriptionVisibility(newDescription);\n            }\n        })\n    ], SurveyElementCore.prototype, \"description\", void 0);\n    return SurveyElementCore;\n}(_base__WEBPACK_IMPORTED_MODULE_1__[\"Base\"]));\n\n// TODO: rename\nvar DragTypeOverMeEnum;\n(function (DragTypeOverMeEnum) {\n    DragTypeOverMeEnum[DragTypeOverMeEnum[\"InsideEmptyPanel\"] = 1] = \"InsideEmptyPanel\";\n    DragTypeOverMeEnum[DragTypeOverMeEnum[\"MultilineRight\"] = 2] = \"MultilineRight\";\n    DragTypeOverMeEnum[DragTypeOverMeEnum[\"MultilineLeft\"] = 3] = \"MultilineLeft\";\n    DragTypeOverMeEnum[DragTypeOverMeEnum[\"Top\"] = 4] = \"Top\";\n    DragTypeOverMeEnum[DragTypeOverMeEnum[\"Right\"] = 5] = \"Right\";\n    DragTypeOverMeEnum[DragTypeOverMeEnum[\"Bottom\"] = 6] = \"Bottom\";\n    DragTypeOverMeEnum[DragTypeOverMeEnum[\"Left\"] = 7] = \"Left\";\n})(DragTypeOverMeEnum || (DragTypeOverMeEnum = {}));\n/**\n * A base class for all survey elements.\n */\nvar SurveyElement = /** @class */ (function (_super) {\n    __extends(SurveyElement, _super);\n    function SurveyElement(name) {\n        var _this = _super.call(this) || this;\n        _this.selectedElementInDesignValue = _this;\n        _this.disableDesignActions = SurveyElement.CreateDisabledDesignElements;\n        _this.parentQuestionValue = null;\n        _this.isContentElement = false;\n        _this.isEditableTemplateElement = false;\n        _this.isInteractiveDesignElement = true;\n        _this.isSingleInRow = true;\n        _this._renderedIsExpanded = true;\n        _this._isAnimatingCollapseExpand = false;\n        _this.animationCollapsed = new _utils_animation__WEBPACK_IMPORTED_MODULE_7__[\"AnimationBoolean\"](_this.getExpandCollapseAnimationOptions(), function (val) {\n            _this._renderedIsExpanded = val;\n            if (_this.animationAllowed) {\n                if (val) {\n                    _this.isAnimatingCollapseExpand = true;\n                }\n                else {\n                    _this.updateElementCss(false);\n                }\n            }\n        }, function () { return _this.renderedIsExpanded; });\n        _this.animationAllowedValue = true;\n        _this.name = name;\n        _this.createNewArray(\"errors\");\n        _this.createNewArray(\"titleActions\");\n        _this.registerPropertyChangedHandlers([\"isReadOnly\"], function () { _this.onReadOnlyChanged(); });\n        _this.registerPropertyChangedHandlers([\"errors\"], function () { _this.updateVisibleErrors(); });\n        _this.registerPropertyChangedHandlers([\"isSingleInRow\"], function () { _this.updateElementCss(false); });\n        return _this;\n    }\n    SurveyElement.getProgressInfoByElements = function (children, isRequired) {\n        var info = _base__WEBPACK_IMPORTED_MODULE_1__[\"Base\"].createProgressInfo();\n        for (var i = 0; i < children.length; i++) {\n            if (!children[i].isVisible)\n                continue;\n            var childInfo = children[i].getProgressInfo();\n            info.questionCount += childInfo.questionCount;\n            info.answeredQuestionCount += childInfo.answeredQuestionCount;\n            info.requiredQuestionCount += childInfo.requiredQuestionCount;\n            info.requiredAnsweredQuestionCount +=\n                childInfo.requiredAnsweredQuestionCount;\n        }\n        if (isRequired && info.questionCount > 0) {\n            if (info.requiredQuestionCount == 0)\n                info.requiredQuestionCount = 1;\n            if (info.answeredQuestionCount > 0)\n                info.requiredAnsweredQuestionCount = 1;\n        }\n        return info;\n    };\n    SurveyElement.ScrollElementToTop = function (elementId, scrollIfVisible) {\n        var root = _settings__WEBPACK_IMPORTED_MODULE_4__[\"settings\"].environment.root;\n        if (!elementId || typeof root === \"undefined\")\n            return false;\n        var el = root.getElementById(elementId);\n        return SurveyElement.ScrollElementToViewCore(el, false, scrollIfVisible);\n    };\n    SurveyElement.ScrollElementToViewCore = function (el, checkLeft, scrollIfVisible) {\n        if (!el || !el.scrollIntoView)\n            return false;\n        var elTop = scrollIfVisible ? -1 : el.getBoundingClientRect().top;\n        var needScroll = elTop < 0;\n        var elLeft = -1;\n        if (!needScroll && checkLeft) {\n            elLeft = el.getBoundingClientRect().left;\n            needScroll = elLeft < 0;\n        }\n        if (!needScroll && _global_variables_utils__WEBPACK_IMPORTED_MODULE_9__[\"DomWindowHelper\"].isAvailable()) {\n            var height = _global_variables_utils__WEBPACK_IMPORTED_MODULE_9__[\"DomWindowHelper\"].getInnerHeight();\n            needScroll = height > 0 && height < elTop;\n            if (!needScroll && checkLeft) {\n                var width = _global_variables_utils__WEBPACK_IMPORTED_MODULE_9__[\"DomWindowHelper\"].getInnerWidth();\n                needScroll = width > 0 && width < elLeft;\n            }\n        }\n        if (needScroll) {\n            el.scrollIntoView();\n        }\n        return needScroll;\n    };\n    SurveyElement.GetFirstNonTextElement = function (elements, removeSpaces) {\n        if (removeSpaces === void 0) { removeSpaces = false; }\n        if (!elements || !elements.length || elements.length == 0)\n            return null;\n        if (removeSpaces) {\n            var tEl = elements[0];\n            if (tEl.nodeName === \"#text\")\n                tEl.data = \"\";\n            tEl = elements[elements.length - 1];\n            if (tEl.nodeName === \"#text\")\n                tEl.data = \"\";\n        }\n        for (var i = 0; i < elements.length; i++) {\n            if (elements[i].nodeName != \"#text\" && elements[i].nodeName != \"#comment\")\n                return elements[i];\n        }\n        return null;\n    };\n    SurveyElement.FocusElement = function (elementId) {\n        if (!elementId || !_global_variables_utils__WEBPACK_IMPORTED_MODULE_9__[\"DomDocumentHelper\"].isAvailable())\n            return false;\n        var res = SurveyElement.focusElementCore(elementId);\n        if (!res) {\n            setTimeout(function () {\n                SurveyElement.focusElementCore(elementId);\n            }, 10);\n        }\n        return res;\n    };\n    SurveyElement.focusElementCore = function (elementId) {\n        var root = _settings__WEBPACK_IMPORTED_MODULE_4__[\"settings\"].environment.root;\n        if (!root)\n            return false;\n        var el = root.getElementById(elementId);\n        // https://stackoverflow.com/questions/19669786/check-if-element-is-visible-in-dom\n        if (el && !el[\"disabled\"] && el.style.display !== \"none\" && el.offsetParent !== null) {\n            SurveyElement.ScrollElementToViewCore(el, true, false);\n            el.focus();\n            return true;\n        }\n        return false;\n    };\n    SurveyElement.prototype.onPropertyValueChanged = function (name, oldValue, newValue) {\n        _super.prototype.onPropertyValueChanged.call(this, name, oldValue, newValue);\n        if (name === \"state\") {\n            this.updateElementCss(false);\n            this.notifyStateChanged(oldValue);\n            if (this.stateChangedCallback)\n                this.stateChangedCallback();\n        }\n    };\n    SurveyElement.prototype.getSkeletonComponentNameCore = function () {\n        if (this.survey) {\n            return this.survey.getSkeletonComponentName(this);\n        }\n        return \"\";\n    };\n    Object.defineProperty(SurveyElement.prototype, \"parentQuestion\", {\n        /**\n         * A Dynamic Panel, Dynamic Matrix, or Dropdown Matrix that includes the current question.\n         *\n         * This property is `null` for standalone questions.\n         */\n        get: function () {\n            return this.parentQuestionValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.setParentQuestion = function (val) {\n        this.parentQuestionValue = val;\n        this.onParentQuestionChanged();\n    };\n    SurveyElement.prototype.onParentQuestionChanged = function () { };\n    Object.defineProperty(SurveyElement.prototype, \"skeletonComponentName\", {\n        get: function () {\n            return this.getSkeletonComponentNameCore();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"state\", {\n        /**\n         * Gets and sets the survey element's expand state.\n         *\n         * Possible values:\n         *\n         * - `\"default\"` (default) - The survey element is displayed in full and cannot be collapsed in the UI.\n         * - `\"expanded\"` - The survey element is displayed in full and can be collapsed in the UI.\n         * - `\"collapsed\"` - The survey element displays only `title` and `description` and can be expanded in the UI.\n         *\n         * @see toggleState\n         * @see collapse\n         * @see expand\n         * @see isCollapsed\n         * @see isExpanded\n         */\n        get: function () {\n            return this.getPropertyValue(\"state\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"state\", val);\n            this.renderedIsExpanded = !(this.state === \"collapsed\" && !this.isDesignMode);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.notifyStateChanged = function (prevState) {\n        if (this.survey) {\n            this.survey.elementContentVisibilityChanged(this);\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"isCollapsed\", {\n        /**\n         * Returns `true` if the survey element is collapsed.\n         * @see state\n         * @see toggleState\n         * @see collapse\n         * @see expand\n         * @see isExpanded\n         */\n        get: function () {\n            return this.state === \"collapsed\" && !this.isDesignMode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"isExpanded\", {\n        /**\n         * Returns `true` if the survey element is expanded.\n         * @see state\n         * @see toggleState\n         * @see collapse\n         * @see expand\n         * @see isCollapsed\n         */\n        get: function () {\n            return this.state === \"expanded\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Collapses the survey element.\n     *\n     * In collapsed state, the element displays only `title` and `description`.\n     * @see title\n     * @see description\n     * @see state\n     * @see toggleState\n     * @see expand\n     * @see isCollapsed\n     * @see isExpanded\n     */\n    SurveyElement.prototype.collapse = function () {\n        if (this.isDesignMode)\n            return;\n        this.state = \"collapsed\";\n    };\n    /**\n     * Expands the survey element.\n     * @see state\n     * @see toggleState\n     * @see collapse\n     * @see isCollapsed\n     * @see isExpanded\n     */\n    SurveyElement.prototype.expand = function () {\n        this.state = \"expanded\";\n    };\n    /**\n     * Toggles the survey element's `state` between collapsed and expanded.\n     * @see state\n     * @see collapse\n     * @see expand\n     * @see isCollapsed\n     * @see isExpanded\n     */\n    SurveyElement.prototype.toggleState = function () {\n        if (this.isCollapsed) {\n            this.expand();\n            return true;\n        }\n        if (this.isExpanded) {\n            this.collapse();\n            return false;\n        }\n        return true;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"hasStateButton\", {\n        get: function () {\n            return this.isExpanded || this.isCollapsed;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"shortcutText\", {\n        get: function () {\n            return this.title || this.name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getTitleToolbar = function () {\n        if (!this.titleToolbarValue) {\n            this.titleToolbarValue = this.createActionContainer(true);\n            this.titleToolbarValue.containerCss = (this.isPanel ? this.cssClasses.panel.titleBar : this.cssClasses.titleBar) || \"sv-action-title-bar\";\n            this.titleToolbarValue.setItems(this.getTitleActions());\n        }\n        return this.titleToolbarValue;\n    };\n    SurveyElement.prototype.createActionContainer = function (allowAdaptiveActions) {\n        var actionContainer = allowAdaptiveActions ? new _actions_adaptive_container__WEBPACK_IMPORTED_MODULE_2__[\"AdaptiveActionContainer\"]() : new _actions_container__WEBPACK_IMPORTED_MODULE_5__[\"ActionContainer\"]();\n        if (this.survey && !!this.survey.getCss().actionBar) {\n            actionContainer.cssClasses = this.survey.getCss().actionBar;\n        }\n        return actionContainer;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"titleActions\", {\n        get: function () {\n            return this.getPropertyValue(\"titleActions\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getTitleActions = function () {\n        if (!this.isTitleActionRequested) {\n            this.updateTitleActions();\n            this.isTitleActionRequested = true;\n        }\n        return this.titleActions;\n    };\n    SurveyElement.prototype.getDefaultTitleActions = function () {\n        return [];\n    };\n    SurveyElement.prototype.updateTitleActions = function () {\n        var actions = this.getDefaultTitleActions();\n        if (!!this.survey) {\n            actions = this.survey.getUpdatedElementTitleActions(this, actions);\n        }\n        this.setPropertyValue(\"titleActions\", actions);\n    };\n    Object.defineProperty(SurveyElement.prototype, \"hasTitleActions\", {\n        get: function () {\n            return this.getTitleActions().length > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"hasTitleEvents\", {\n        get: function () {\n            return this.state !== undefined && this.state !== \"default\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"titleTabIndex\", {\n        get: function () {\n            return !this.isPage && this.state !== \"default\" ? 0 : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"titleAriaExpanded\", {\n        get: function () {\n            if (this.isPage || this.state === \"default\")\n                return undefined;\n            return this.state === \"expanded\" ? \"true\" : \"false\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"titleAriaRole\", {\n        get: function () {\n            if (this.isPage || this.state === \"default\")\n                return undefined;\n            return \"button\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.setSurveyImpl = function (value, isLight) {\n        this.surveyImplValue = value;\n        if (!this.surveyImplValue) {\n            this.setSurveyCore(null);\n            this.surveyDataValue = null;\n        }\n        else {\n            this.surveyDataValue = this.surveyImplValue.getSurveyData();\n            this.setSurveyCore(this.surveyImplValue.getSurvey());\n            this.textProcessorValue = this.surveyImplValue.getTextProcessor();\n            this.onSetData();\n        }\n        if (!!this.survey) {\n            this.updateDescriptionVisibility(this.description);\n            this.clearCssClasses();\n        }\n    };\n    SurveyElement.prototype.canRunConditions = function () {\n        return _super.prototype.canRunConditions.call(this) && !!this.data;\n    };\n    SurveyElement.prototype.getDataFilteredValues = function () {\n        return !!this.data ? this.data.getFilteredValues() : {};\n    };\n    SurveyElement.prototype.getDataFilteredProperties = function () {\n        var props = !!this.data ? this.data.getFilteredProperties() : {};\n        props.question = this;\n        return props;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"surveyImpl\", {\n        get: function () {\n            return this.surveyImplValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /* You shouldn't use this method ever */\n    SurveyElement.prototype.__setData = function (data) {\n        if (_settings__WEBPACK_IMPORTED_MODULE_4__[\"settings\"].supportCreatorV2) {\n            this.surveyDataValue = data;\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"data\", {\n        get: function () {\n            return this.surveyDataValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"survey\", {\n        /**\n         * Returns the survey object.\n         */\n        get: function () {\n            return this.getSurvey();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getSurvey = function (live) {\n        if (live === void 0) { live = false; }\n        if (!!this.surveyValue)\n            return this.surveyValue;\n        if (!!this.surveyImplValue) {\n            this.setSurveyCore(this.surveyImplValue.getSurvey());\n        }\n        return this.surveyValue;\n    };\n    SurveyElement.prototype.setSurveyCore = function (value) {\n        this.surveyValue = value;\n        if (!!this.surveyChangedCallback) {\n            this.surveyChangedCallback();\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"isInternal\", {\n        get: function () {\n            return this.isContentElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"areInvisibleElementsShowing\", {\n        get: function () {\n            return (!!this.survey &&\n                this.survey.areInvisibleElementsShowing &&\n                !this.isContentElement);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"isVisible\", {\n        get: function () {\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"isReadOnly\", {\n        /**\n         * Returns `true` if the survey element or its parent element is read-only.\n         *\n         * If you want to switch a survey element to the read-only state based on a condition, specify the [`enableIf`](https://surveyjs.io/form-library/documentation/question#enableIf) property. Refer to the following help topic for information: [Conditional Visibility](https://surveyjs.io/form-library/documentation/design-survey-conditional-logic#conditional-visibility).\n         * @see readOnly\n         */\n        get: function () {\n            return this.readOnly;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"readOnly\", {\n        /**\n         * Makes the survey element read-only.\n         *\n         * If you want to switch a survey element to the read-only state based on a condition, specify the [`enableIf`](https://surveyjs.io/form-library/documentation/question#enableIf) property. Refer to the following help topic for information: [Conditional Visibility](https://surveyjs.io/form-library/documentation/design-survey-conditional-logic#conditional-visibility).\n         * @see isReadOnly\n         */\n        get: function () {\n            return this.getPropertyValue(\"readOnly\");\n        },\n        set: function (val) {\n            if (this.readOnly == val)\n                return;\n            this.setPropertyValue(\"readOnly\", val);\n            if (!this.isLoadingFromJson) {\n                this.setPropertyValue(\"isReadOnly\", this.isReadOnly);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.onReadOnlyChanged = function () {\n        if (!!this.readOnlyChangedCallback) {\n            this.readOnlyChangedCallback();\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"css\", {\n        get: function () {\n            return !!this.survey ? this.survey.getCss() : {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"cssClassesValue\", {\n        get: function () {\n            return this.getPropertyValueWithoutDefault(\"cssClassesValue\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"cssClassesValue\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.ensureCssClassesValue = function () {\n        if (!this.cssClassesValue) {\n            this.cssClassesValue = this.calcCssClasses(this.css);\n            this.updateElementCssCore(this.cssClassesValue);\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"cssClasses\", {\n        /**\n         * Returns an object in which keys are UI elements and values are CSS classes applied to them.\n         *\n         * Use the following events of the [`SurveyModel`](https://surveyjs.io/form-library/documentation/surveymodel) object to override CSS classes:\n         *\n         * - [`onUpdateQuestionCssClasses`](https://surveyjs.io/form-library/documentation/surveymodel#onUpdateQuestionCssClasses)\n         * - [`onUpdatePanelCssClasses`](https://surveyjs.io/form-library/documentation/surveymodel#onUpdatePanelCssClasses)\n         * - [`onUpdatePageCssClasses`](https://surveyjs.io/form-library/documentation/surveymodel#onUpdatePageCssClasses)\n         * - [`onUpdateChoiceItemCss`](https://surveyjs.io/form-library/documentation/api-reference/survey-data-model#onUpdateChoiceItemCss)\n         */\n        get: function () {\n            var _dummy = this.cssClassesValue;\n            if (!this.survey)\n                return this.calcCssClasses(this.css);\n            this.ensureCssClassesValue();\n            return this.cssClassesValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"cssTitleNumber\", {\n        get: function () {\n            var css = this.cssClasses;\n            if (css.number)\n                return css.number;\n            return css.panel ? css.panel.number : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.calcCssClasses = function (css) { return undefined; };\n    SurveyElement.prototype.updateElementCssCore = function (cssClasses) { };\n    Object.defineProperty(SurveyElement.prototype, \"cssError\", {\n        get: function () { return \"\"; },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.updateElementCss = function (reNew) {\n        this.clearCssClasses();\n    };\n    SurveyElement.prototype.clearCssClasses = function () {\n        this.cssClassesValue = undefined;\n    };\n    SurveyElement.prototype.getIsLoadingFromJson = function () {\n        if (_super.prototype.getIsLoadingFromJson.call(this))\n            return true;\n        return this.surveyValue ? this.surveyValue.isLoadingFromJson : false;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"name\", {\n        /**\n         * A survey element identifier.\n         *\n         * > Question names must be unique.\n         */\n        get: function () {\n            return this.getPropertyValue(\"name\", \"\");\n        },\n        set: function (val) {\n            var oldValue = this.name;\n            this.setPropertyValue(\"name\", this.getValidName(val));\n            if (!this.isLoadingFromJson && !!oldValue) {\n                this.onNameChanged(oldValue);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getValidName = function (name) {\n        return name;\n    };\n    SurveyElement.prototype.onNameChanged = function (oldValue) { };\n    SurveyElement.prototype.updateBindingValue = function (valueName, value) {\n        if (!!this.data &&\n            !this.isTwoValueEquals(value, this.data.getValue(valueName))) {\n            this.data.setValue(valueName, value, false);\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"errors\", {\n        /**\n         * Validation errors. Call the `validate()` method to validate survey element data.\n         * @see validate\n         */\n        get: function () {\n            return this.getPropertyValue(\"errors\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"errors\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.updateVisibleErrors = function () {\n        var counter = 0;\n        for (var i = 0; i < this.errors.length; i++) {\n            if (this.errors[i].visible)\n                counter++;\n        }\n        this.hasVisibleErrors = counter > 0;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"containsErrors\", {\n        /**\n         * Returns `true` if the survey element or its child elements have validation errors.\n         *\n         * This property contains the result of the most recent validation. This result may be outdated. Call the `validate` method to get an up-to-date value.\n         * @see errors\n         */\n        get: function () {\n            return this.getPropertyValue(\"containsErrors\", false);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.updateContainsErrors = function () {\n        this.setPropertyValue(\"containsErrors\", this.getContainsErrors());\n    };\n    SurveyElement.prototype.getContainsErrors = function () {\n        return this.errors.length > 0;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"selectedElementInDesign\", {\n        get: function () {\n            return this.selectedElementInDesignValue;\n        },\n        set: function (val) {\n            this.selectedElementInDesignValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.updateCustomWidgets = function () { };\n    SurveyElement.prototype.onSurveyLoad = function () { };\n    Object.defineProperty(SurveyElement.prototype, \"wasRendered\", {\n        get: function () { return !!this.wasRenderedValue; },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.onFirstRendering = function () {\n        this.wasRenderedValue = true;\n        this.ensureCssClassesValue();\n    };\n    SurveyElement.prototype.endLoadingFromJson = function () {\n        _super.prototype.endLoadingFromJson.call(this);\n        if (!this.survey) {\n            this.onSurveyLoad();\n        }\n        this.updateDescriptionVisibility(this.description);\n    };\n    SurveyElement.prototype.setVisibleIndex = function (index) {\n        return 0;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"isPage\", {\n        /**\n         * Returns `true` if the survey element is a page.\n         * @see Base.getType\n         */\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"isPanel\", {\n        /**\n         * Returns `true` if the survey element is a panel.\n         * @see Base.getType\n         */\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"isQuestion\", {\n        /**\n         * Returns `true` if the survey element is a question.\n         * @see Base.getType\n         */\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.delete = function (doDispose) { };\n    /**\n     * Returns the survey's [locale](https://surveyjs.io/form-library/documentation/surveymodel#locale).\n     *\n     * If a default locale is used, this method returns an empty string. To get the applied locale in this case, use the following code:\n     *\n     * ```js\n     * import { surveyLocalization } from 'survey-core';\n     * const defaultLocale = surveyLocalization.defaultLocale;\n     * ```\n     *\n     * @see [Localization & Globalization](https://surveyjs.io/form-library/documentation/localization)\n     */\n    SurveyElement.prototype.getLocale = function () {\n        return this.survey\n            ? this.survey.getLocale()\n            : this.locOwner\n                ? this.locOwner.getLocale()\n                : \"\";\n    };\n    SurveyElement.prototype.getMarkdownHtml = function (text, name) {\n        return this.survey\n            ? this.survey.getSurveyMarkdownHtml(this, text, name)\n            : this.locOwner\n                ? this.locOwner.getMarkdownHtml(text, name)\n                : undefined;\n    };\n    SurveyElement.prototype.getRenderer = function (name) {\n        return this.survey && typeof this.survey.getRendererForString === \"function\"\n            ? this.survey.getRendererForString(this, name)\n            : this.locOwner && typeof this.locOwner.getRenderer === \"function\"\n                ? this.locOwner.getRenderer(name)\n                : null;\n    };\n    SurveyElement.prototype.getRendererContext = function (locStr) {\n        return this.survey && typeof this.survey.getRendererContextForString === \"function\"\n            ? this.survey.getRendererContextForString(this, locStr)\n            : this.locOwner && typeof this.locOwner.getRendererContext === \"function\"\n                ? this.locOwner.getRendererContext(locStr)\n                : locStr;\n    };\n    SurveyElement.prototype.getProcessedText = function (text) {\n        if (this.isLoadingFromJson)\n            return text;\n        if (this.textProcessor)\n            return this.textProcessor.processText(text, this.getUseDisplayValuesInDynamicTexts());\n        if (this.locOwner)\n            return this.locOwner.getProcessedText(text);\n        return text;\n    };\n    SurveyElement.prototype.getUseDisplayValuesInDynamicTexts = function () { return true; };\n    SurveyElement.prototype.removeSelfFromList = function (list) {\n        if (!list || !Array.isArray(list))\n            return;\n        var index = list.indexOf(this);\n        if (index > -1) {\n            list.splice(index, 1);\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"textProcessor\", {\n        get: function () {\n            return this.textProcessorValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getProcessedHtml = function (html) {\n        if (!html || !this.textProcessor)\n            return html;\n        return this.textProcessor.processText(html, true);\n    };\n    SurveyElement.prototype.onSetData = function () { };\n    Object.defineProperty(SurveyElement.prototype, \"parent\", {\n        get: function () {\n            return this.getPropertyValue(\"parent\", null);\n        },\n        set: function (val) {\n            this.setPropertyValue(\"parent\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getPage = function (parent) {\n        while (parent && parent.parent)\n            parent = parent.parent;\n        if (parent && parent.getType() == \"page\")\n            return parent;\n        return null;\n    };\n    SurveyElement.prototype.moveToBase = function (parent, container, insertBefore) {\n        if (insertBefore === void 0) { insertBefore = null; }\n        if (!container)\n            return false;\n        parent.removeElement(this);\n        var index = -1;\n        if (_helpers__WEBPACK_IMPORTED_MODULE_3__[\"Helpers\"].isNumber(insertBefore)) {\n            index = parseInt(insertBefore);\n        }\n        if (index == -1 && !!insertBefore && !!insertBefore.getType) {\n            index = container.indexOf(insertBefore);\n        }\n        container.addElement(this, index);\n        return true;\n    };\n    SurveyElement.prototype.setPage = function (parent, newPage) {\n        var oldPage = this.getPage(parent);\n        //fix for the creator v1: https://github.com/surveyjs/survey-creator/issues/1744\n        if (typeof newPage === \"string\") {\n            var survey = this.getSurvey();\n            survey.pages.forEach(function (page) {\n                if (newPage === page.name)\n                    newPage = page;\n            });\n        }\n        if (oldPage === newPage)\n            return;\n        if (parent)\n            parent.removeElement(this);\n        if (newPage) {\n            newPage.addElement(this, -1);\n        }\n    };\n    SurveyElement.prototype.getSearchableLocKeys = function (keys) {\n        keys.push(\"title\");\n        keys.push(\"description\");\n    };\n    Object.defineProperty(SurveyElement.prototype, \"isDefaultV2Theme\", {\n        get: function () {\n            return this.survey && this.survey.getCss().root == \"sd-root-modern\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"hasParent\", {\n        get: function () {\n            return (this.parent && !this.parent.isPage && (!this.parent.originalPage)) || (this.parent === undefined);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.shouldAddRunnerStyles = function () {\n        return !this.isDesignMode && this.isDefaultV2Theme;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"isCompact\", {\n        get: function () {\n            return this.survey && this.survey[\"isCompact\"];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getHasFrameV2 = function () {\n        return this.shouldAddRunnerStyles() && (!this.hasParent);\n    };\n    SurveyElement.prototype.getIsNested = function () {\n        return this.shouldAddRunnerStyles() && (this.hasParent);\n    };\n    SurveyElement.prototype.getCssRoot = function (cssClasses) {\n        var isExpanadable = !!this.isCollapsed || !!this.isExpanded;\n        return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_6__[\"CssClassBuilder\"]()\n            .append(cssClasses.withFrame, this.getHasFrameV2() && !this.isCompact)\n            .append(cssClasses.compact, this.isCompact && this.getHasFrameV2())\n            .append(cssClasses.collapsed, !!this.isCollapsed)\n            .append(cssClasses.expandableAnimating, isExpanadable && this.isAnimatingCollapseExpand)\n            .append(cssClasses.expanded, !!this.isExpanded && this.renderedIsExpanded)\n            .append(cssClasses.expandable, isExpanadable)\n            .append(cssClasses.nested, this.getIsNested())\n            .toString();\n    };\n    Object.defineProperty(SurveyElement.prototype, \"width\", {\n        /**\n         * Sets survey element width in CSS values.\n         *\n         * Default value: \"\"\n         * @see minWidth\n         * @see maxWidth\n        */\n        get: function () {\n            return this.getPropertyValue(\"width\", \"\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"width\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"minWidth\", {\n        /**\n         * Gets or sets minimum survey element width in CSS values.\n         *\n         * Default value: \"300px\" (taken from [`settings.minWidth`](https://surveyjs.io/form-library/documentation/settings#minWidth))\n         * @see maxWidth\n         * @see renderWidth\n         * @see width\n         */\n        get: function () {\n            return this.getPropertyValue(\"minWidth\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"minWidth\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"maxWidth\", {\n        /**\n         * Gets or sets maximum survey element width in CSS values.\n         *\n         * Default value: \"100%\" (taken from [`settings.maxWidth`](https://surveyjs.io/form-library/documentation/settings#maxWidth))\n         * @see minWidth\n         * @see renderWidth\n         * @see width\n         */\n        get: function () {\n            return this.getPropertyValue(\"maxWidth\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"maxWidth\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"renderWidth\", {\n        /**\n         * Returns a calculated width of the rendered survey element in CSS values.\n         * @see width\n         * @see minWidth\n         * @see maxWidth\n         */\n        get: function () {\n            return this.getPropertyValue(\"renderWidth\", \"\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"renderWidth\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"indent\", {\n        /**\n         * Increases or decreases an indent of survey element content from the left edge. Accepts positive integer values and 0. Does not apply in the Default V2 theme.\n         * @see rightIndent\n         */\n        get: function () {\n            return this.getPropertyValue(\"indent\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"indent\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"rightIndent\", {\n        /**\n         * Increases or decreases an indent of survey element content from the right edge. Accepts positive integer values and 0. Does not apply in the Default V2 theme.\n         * @see indent\n         */\n        get: function () {\n            return this.getPropertyValue(\"rightIndent\", 0);\n        },\n        set: function (val) {\n            this.setPropertyValue(\"rightIndent\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getRootStyle = function () {\n        var style = {};\n        if (!!this.paddingLeft) {\n            style[\"--sv-element-add-padding-left\"] = this.paddingLeft;\n        }\n        if (!!this.paddingRight) {\n            style[\"--sv-element-add-padding-right\"] = this.paddingRight;\n        }\n        return style;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"paddingLeft\", {\n        get: function () {\n            return this.getPropertyValue(\"paddingLeft\", \"\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"paddingLeft\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"paddingRight\", {\n        get: function () {\n            return this.getPropertyValue(\"paddingRight\", \"\");\n        },\n        set: function (val) {\n            this.setPropertyValue(\"paddingRight\", val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"rootStyle\", {\n        get: function () {\n            var style = {};\n            var minWidth = this.minWidth;\n            if (minWidth != \"auto\")\n                minWidth = \"min(100%, \" + this.minWidth + \")\";\n            if (this.allowRootStyle && this.renderWidth) {\n                // style[\"width\"] = this.renderWidth;\n                style[\"flexGrow\"] = 1;\n                style[\"flexShrink\"] = 1;\n                style[\"flexBasis\"] = this.renderWidth;\n                style[\"minWidth\"] = minWidth;\n                style[\"maxWidth\"] = this.maxWidth;\n            }\n            return style;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.isContainsSelection = function (el) {\n        var elementWithSelection = undefined;\n        var _document = _global_variables_utils__WEBPACK_IMPORTED_MODULE_9__[\"DomDocumentHelper\"].getDocument();\n        if (_global_variables_utils__WEBPACK_IMPORTED_MODULE_9__[\"DomDocumentHelper\"].isAvailable() && !!_document && _document[\"selection\"]) {\n            elementWithSelection = _document[\"selection\"].createRange().parentElement();\n        }\n        else {\n            var selection = _global_variables_utils__WEBPACK_IMPORTED_MODULE_9__[\"DomWindowHelper\"].getSelection();\n            if (!!selection && selection.rangeCount > 0) {\n                var range = selection.getRangeAt(0);\n                if (range.startOffset !== range.endOffset) {\n                    elementWithSelection = range.startContainer.parentNode;\n                }\n            }\n        }\n        return elementWithSelection == el;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"clickTitleFunction\", {\n        get: function () {\n            var _this = this;\n            if (this.needClickTitleFunction()) {\n                return function (event) {\n                    if (!!event && _this.isContainsSelection(event.target)) {\n                        return;\n                    }\n                    return _this.processTitleClick();\n                };\n            }\n            return undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.needClickTitleFunction = function () {\n        return this.state !== \"default\";\n    };\n    SurveyElement.prototype.processTitleClick = function () {\n        if (this.state !== \"default\") {\n            this.toggleState();\n        }\n    };\n    Object.defineProperty(SurveyElement.prototype, \"additionalTitleToolbar\", {\n        get: function () {\n            return this.getAdditionalTitleToolbar();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getAdditionalTitleToolbar = function () {\n        return null;\n    };\n    SurveyElement.prototype.getCssTitle = function (cssClasses) {\n        var isExpandable = this.state !== \"default\";\n        var numInlineLimit = 4;\n        return new _utils_cssClassBuilder__WEBPACK_IMPORTED_MODULE_6__[\"CssClassBuilder\"]()\n            .append(cssClasses.title)\n            .append(cssClasses.titleNumInline, (this.no || \"\").length > numInlineLimit || isExpandable)\n            .append(cssClasses.titleExpandable, isExpandable)\n            .append(cssClasses.titleExpanded, this.isExpanded)\n            .append(cssClasses.titleCollapsed, this.isCollapsed)\n            .append(cssClasses.titleDisabled, this.isReadOnly)\n            .append(cssClasses.titleOnError, this.containsErrors).toString();\n    };\n    SurveyElement.prototype.localeChanged = function () {\n        _super.prototype.localeChanged.call(this);\n        this.updateDescriptionVisibility(this.description);\n        if (this.errors.length > 0) {\n            this.errors.forEach(function (err) {\n                err.updateText();\n            });\n        }\n    };\n    SurveyElement.prototype.setWrapperElement = function (element) {\n        this.wrapperElement = element;\n    };\n    SurveyElement.prototype.getWrapperElement = function () {\n        return this.wrapperElement;\n    };\n    Object.defineProperty(SurveyElement.prototype, \"isAnimatingCollapseExpand\", {\n        get: function () {\n            return this._isAnimatingCollapseExpand || this._renderedIsExpanded != this.isExpanded;\n        },\n        set: function (val) {\n            if (val !== this._isAnimatingCollapseExpand) {\n                this._isAnimatingCollapseExpand = val;\n                this.updateElementCss(false);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.getExpandCollapseAnimationOptions = function () {\n        var _this = this;\n        var beforeRunAnimation = function (el) {\n            _this.isAnimatingCollapseExpand = true;\n            el.style.setProperty(\"--animation-height\", el.offsetHeight + \"px\");\n        };\n        var afterRunAnimation = function (el) {\n            _this.isAnimatingCollapseExpand = false;\n        };\n        return {\n            getEnterOptions: function () {\n                var cssClasses = _this.isPanel ? _this.cssClasses.panel : _this.cssClasses;\n                return {\n                    cssClass: cssClasses.contentFadeIn,\n                    onBeforeRunAnimation: beforeRunAnimation,\n                    onAfterRunAnimation: afterRunAnimation,\n                };\n            },\n            getLeaveOptions: function () {\n                var cssClasses = _this.isPanel ? _this.cssClasses.panel : _this.cssClasses;\n                return { cssClass: cssClasses.contentFadeOut,\n                    onBeforeRunAnimation: beforeRunAnimation,\n                    onAfterRunAnimation: afterRunAnimation\n                };\n            },\n            getAnimatedElement: function () {\n                var _a;\n                var cssClasses = _this.isPanel ? _this.cssClasses.panel : _this.cssClasses;\n                if (cssClasses.content) {\n                    var selector = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__[\"classesToSelector\"])(cssClasses.content);\n                    if (selector) {\n                        return (_a = _this.getWrapperElement()) === null || _a === void 0 ? void 0 : _a.querySelector(selector);\n                    }\n                }\n                return undefined;\n            },\n            isAnimationEnabled: function () { return _settings__WEBPACK_IMPORTED_MODULE_4__[\"settings\"].animationEnabled && _this.animationAllowed && !_this.isDesignMode; }\n        };\n    };\n    Object.defineProperty(SurveyElement.prototype, \"renderedIsExpanded\", {\n        get: function () {\n            return !!this._renderedIsExpanded;\n        },\n        set: function (val) {\n            this.animationCollapsed.sync(val);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SurveyElement.prototype, \"animationAllowed\", {\n        get: function () {\n            return !this.isLoadingFromJson && !this.isDisposed && !!this.survey && this.animationAllowedValue;\n        },\n        set: function (val) {\n            this.animationAllowedValue = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SurveyElement.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this.titleToolbarValue) {\n            this.titleToolbarValue.dispose();\n        }\n    };\n    SurveyElement.CreateDisabledDesignElements = false;\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: null })\n    ], SurveyElement.prototype, \"dragTypeOverMe\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], SurveyElement.prototype, \"isDragMe\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: false })\n    ], SurveyElement.prototype, \"hasVisibleErrors\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: true })\n    ], SurveyElement.prototype, \"isSingleInRow\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({ defaultValue: true })\n    ], SurveyElement.prototype, \"allowRootStyle\", void 0);\n    __decorate([\n        Object(_jsonobject__WEBPACK_IMPORTED_MODULE_0__[\"property\"])()\n    ], SurveyElement.prototype, \"_renderedIsExpanded\", void 0);\n    return SurveyElement;\n}(SurveyElementCore));\n\n\n\n/***/ }),\n\n/***/ \"./src/surveyStrings.ts\":\n/*!******************************!*\\\n  !*** ./src/surveyStrings.ts ***!\n  \\******************************/\n/*! exports provided: surveyLocalization, surveyStrings */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1145030__) {\n\n\"use strict\";\n__nested_webpack_require_1145030__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1145030__.d(__nested_webpack_exports__, \"surveyLocalization\", function() { return surveyLocalization; });\n/* harmony export (binding) */ __nested_webpack_require_1145030__.d(__nested_webpack_exports__, \"surveyStrings\", function() { return surveyStrings; });\n/* harmony import */ var _localization_english__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1145030__(/*! ./localization/english */ \"./src/localization/english.ts\");\n\nvar surveyLocalization = {\n    currentLocaleValue: \"\",\n    defaultLocaleValue: \"en\",\n    locales: {},\n    localeNames: {},\n    supportedLocales: [],\n    get currentLocale() {\n        return this.currentLocaleValue === this.defaultLocaleValue ? \"\" : this.currentLocaleValue;\n    },\n    set currentLocale(val) {\n        if (val === \"cz\")\n            val = \"cs\";\n        this.currentLocaleValue = val;\n    },\n    get defaultLocale() {\n        return this.defaultLocaleValue;\n    },\n    set defaultLocale(val) {\n        if (val === \"cz\")\n            val = \"cs\";\n        this.defaultLocaleValue = val;\n    },\n    getLocaleStrings: function (loc) {\n        return this.locales[loc];\n    },\n    getString: function (strName, locale) {\n        var _this = this;\n        if (locale === void 0) { locale = null; }\n        var locs = new Array();\n        var addLocaleCore = function (locName) {\n            var strs = _this.locales[locName];\n            if (!!strs)\n                locs.push(strs);\n        };\n        var addLocale = function (locName) {\n            if (!locName)\n                return;\n            addLocaleCore(locName);\n            var index = locName.indexOf(\"-\");\n            if (index < 1)\n                return;\n            locName = locName.substring(0, index);\n            addLocaleCore(locName);\n        };\n        addLocale(locale);\n        addLocale(this.currentLocale);\n        addLocale(this.defaultLocale);\n        if (this.defaultLocale !== \"en\") {\n            addLocaleCore(\"en\");\n        }\n        for (var i = 0; i < locs.length; i++) {\n            var res = locs[i][strName];\n            if (res !== undefined)\n                return res;\n        }\n        return this.onGetExternalString(strName, locale);\n    },\n    getLocales: function (removeDefaultLoc) {\n        if (removeDefaultLoc === void 0) { removeDefaultLoc = false; }\n        var res = [];\n        res.push(\"\");\n        var locs = this.locales;\n        if (this.supportedLocales && this.supportedLocales.length > 0) {\n            locs = {};\n            for (var i = 0; i < this.supportedLocales.length; i++) {\n                locs[this.supportedLocales[i]] = true;\n            }\n        }\n        for (var key in locs) {\n            if (removeDefaultLoc && key == this.defaultLocale)\n                continue;\n            res.push(key);\n        }\n        var locName = function (loc) {\n            if (!loc)\n                return \"\";\n            var res = surveyLocalization.localeNames[loc];\n            if (!res)\n                res = loc;\n            return res.toLowerCase();\n        };\n        res.sort(function (a, b) {\n            var str1 = locName(a);\n            var str2 = locName(b);\n            if (str1 === str2)\n                return 0;\n            return str1 < str2 ? -1 : 1;\n        });\n        return res;\n    },\n    onGetExternalString: function (name, locale) { return undefined; }\n};\nvar surveyStrings = _localization_english__WEBPACK_IMPORTED_MODULE_0__[\"englishStrings\"];\nsurveyLocalization.locales[\"en\"] = _localization_english__WEBPACK_IMPORTED_MODULE_0__[\"englishStrings\"];\nsurveyLocalization.localeNames[\"en\"] = \"english\";\n\n\n/***/ }),\n\n/***/ \"./src/utils/animation.ts\":\n/*!********************************!*\\\n  !*** ./src/utils/animation.ts ***!\n  \\********************************/\n/*! exports provided: AnimationUtils, AnimationPropertyUtils, AnimationGroupUtils, AnimationBoolean, AnimationGroup */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1149014__) {\n\n\"use strict\";\n__nested_webpack_require_1149014__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1149014__.d(__nested_webpack_exports__, \"AnimationUtils\", function() { return AnimationUtils; });\n/* harmony export (binding) */ __nested_webpack_require_1149014__.d(__nested_webpack_exports__, \"AnimationPropertyUtils\", function() { return AnimationPropertyUtils; });\n/* harmony export (binding) */ __nested_webpack_require_1149014__.d(__nested_webpack_exports__, \"AnimationGroupUtils\", function() { return AnimationGroupUtils; });\n/* harmony export (binding) */ __nested_webpack_require_1149014__.d(__nested_webpack_exports__, \"AnimationBoolean\", function() { return AnimationBoolean; });\n/* harmony export (binding) */ __nested_webpack_require_1149014__.d(__nested_webpack_exports__, \"AnimationGroup\", function() { return AnimationGroup; });\n/* harmony import */ var _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1149014__(/*! ../global_variables_utils */ \"./src/global_variables_utils.ts\");\n/* harmony import */ var _taskmanager__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1149014__(/*! ./taskmanager */ \"./src/utils/taskmanager.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar AnimationUtils = /** @class */ (function () {\n    function AnimationUtils() {\n        this.cancelQueue = [];\n    }\n    AnimationUtils.prototype.getMsFromRule = function (value) {\n        if (value === \"auto\")\n            return 0;\n        return Number(value.slice(0, -1).replace(\",\", \".\")) * 1000;\n    };\n    AnimationUtils.prototype.getAnimationsCount = function (element) {\n        var animationName = \"\";\n        if (getComputedStyle) {\n            animationName = getComputedStyle(element).animationName;\n        }\n        return (animationName && animationName != \"none\" ? animationName.split(\", \").length : 0);\n    };\n    AnimationUtils.prototype.getAnimationDuration = function (element) {\n        var style = getComputedStyle(element);\n        var delays = style[\"animationDelay\"].split(\", \");\n        var durations = style[\"animationDuration\"].split(\", \");\n        var duration = 0;\n        for (var i = 0; i < Math.max(durations.length, delays.length); i++) {\n            duration = Math.max(duration, this.getMsFromRule(durations[i % durations.length]) + this.getMsFromRule(delays[i % delays.length]));\n        }\n        return duration;\n    };\n    AnimationUtils.prototype.onAnimationEnd = function (element, callback, options) {\n        var _this = this;\n        var cancelTimeout;\n        var animationsCount = this.getAnimationsCount(element);\n        var onEndCallback = function (isCancel) {\n            if (isCancel === void 0) { isCancel = true; }\n            options.onAfterRunAnimation && options.onAfterRunAnimation(element);\n            callback(isCancel);\n            clearTimeout(cancelTimeout);\n            _this.cancelQueue.splice(_this.cancelQueue.indexOf(onEndCallback), 1);\n            element.removeEventListener(\"animationend\", onAnimationEndCallback);\n        };\n        var onAnimationEndCallback = function (event) {\n            if (event.target == event.currentTarget && --animationsCount <= 0) {\n                onEndCallback(false);\n            }\n        };\n        if (animationsCount > 0) {\n            element.addEventListener(\"animationend\", onAnimationEndCallback);\n            this.cancelQueue.push(onEndCallback);\n            cancelTimeout = setTimeout(function () {\n                onEndCallback(false);\n            }, this.getAnimationDuration(element) + 10);\n        }\n        else {\n            callback(true);\n        }\n    };\n    AnimationUtils.prototype.beforeAnimationRun = function (element, options) {\n        if (element) {\n            options.onBeforeRunAnimation && options.onBeforeRunAnimation(element);\n        }\n    };\n    AnimationUtils.prototype.runLeaveAnimation = function (element, options, callback) {\n        if (element && options.cssClass) {\n            element.classList.add(options.cssClass);\n            var onAnimationEndCallback = function (isCancel) {\n                callback();\n                if (isCancel) {\n                    element.classList.remove(options.cssClass);\n                }\n                else {\n                    _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomWindowHelper\"].requestAnimationFrame(function () {\n                        _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomWindowHelper\"].requestAnimationFrame(function () {\n                            element.classList.remove(options.cssClass);\n                        });\n                    });\n                }\n            };\n            this.onAnimationEnd(element, onAnimationEndCallback, options);\n        }\n        else {\n            callback();\n        }\n    };\n    AnimationUtils.prototype.runEnterAnimation = function (element, options) {\n        if (element && options.cssClass) {\n            element.classList.add(options.cssClass);\n            this.onAnimationEnd(element, function () {\n                element.classList.remove(options.cssClass);\n            }, options);\n        }\n    };\n    AnimationUtils.prototype.cancel = function () {\n        var cancelQueue = [].concat(this.cancelQueue);\n        cancelQueue.forEach(function (callback) { return callback(); });\n        this.cancelQueue = [];\n    };\n    return AnimationUtils;\n}());\n\nvar AnimationPropertyUtils = /** @class */ (function (_super) {\n    __extends(AnimationPropertyUtils, _super);\n    function AnimationPropertyUtils() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationPropertyUtils.prototype.onEnter = function (getElement, options) {\n        var _this = this;\n        var callback = function () {\n            var element = getElement();\n            _this.beforeAnimationRun(element, options);\n            _this.runEnterAnimation(element, options);\n        };\n        _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomWindowHelper\"].requestAnimationFrame(function () {\n            if (getElement()) {\n                callback();\n            }\n            else {\n                _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomWindowHelper\"].requestAnimationFrame(callback);\n            }\n        });\n    };\n    AnimationPropertyUtils.prototype.onLeave = function (getElement, callback, options) {\n        var element = getElement();\n        this.beforeAnimationRun(element, options);\n        this.runLeaveAnimation(element, options, callback);\n    };\n    return AnimationPropertyUtils;\n}(AnimationUtils));\n\nvar AnimationGroupUtils = /** @class */ (function (_super) {\n    __extends(AnimationGroupUtils, _super);\n    function AnimationGroupUtils() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationGroupUtils.prototype.onEnter = function (getElement, getOptions, elements) {\n        var _this = this;\n        if (elements.length == 0)\n            return;\n        _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomWindowHelper\"].requestAnimationFrame(function () {\n            var callback = function () {\n                elements.forEach(function (el) {\n                    _this.beforeAnimationRun(getElement(el), getOptions(el));\n                });\n                elements.forEach(function (el) {\n                    _this.runEnterAnimation(getElement(el), getOptions(el));\n                });\n            };\n            if (!getElement(elements[0])) {\n                _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomWindowHelper\"].requestAnimationFrame(callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n    AnimationGroupUtils.prototype.onLeave = function (getElement, callback, getOptions, elements) {\n        var _this = this;\n        elements.forEach(function (el) {\n            _this.beforeAnimationRun(getElement(el), getOptions(el));\n        });\n        var counter = elements.length;\n        var onEndCallback = function () {\n            if (--counter <= 0) {\n                callback();\n            }\n        };\n        elements.forEach(function (el) {\n            _this.runLeaveAnimation(getElement(el), getOptions(el), onEndCallback);\n        });\n    };\n    return AnimationGroupUtils;\n}(AnimationUtils));\n\nvar AnimationProperty = /** @class */ (function () {\n    function AnimationProperty(animationOptions, update, getCurrentValue) {\n        var _this = this;\n        this.animationOptions = animationOptions;\n        this.update = update;\n        this.getCurrentValue = getCurrentValue;\n        this._debouncedSync = Object(_taskmanager__WEBPACK_IMPORTED_MODULE_1__[\"debounce\"])(function (newValue) {\n            _this.animation.cancel();\n            _this._sync(newValue);\n        });\n    }\n    AnimationProperty.prototype.sync = function (newValue) {\n        if (this.animationOptions.isAnimationEnabled()) {\n            this._debouncedSync.run(newValue);\n        }\n        else {\n            this.update(newValue);\n        }\n    };\n    AnimationProperty.prototype.cancel = function () {\n        this.animation.cancel();\n        this._debouncedSync.cancel();\n    };\n    return AnimationProperty;\n}());\nvar AnimationBoolean = /** @class */ (function (_super) {\n    __extends(AnimationBoolean, _super);\n    function AnimationBoolean() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.animation = new AnimationPropertyUtils();\n        return _this;\n    }\n    AnimationBoolean.prototype._sync = function (newValue) {\n        var _this = this;\n        if (newValue !== this.getCurrentValue()) {\n            if (newValue) {\n                this.update(newValue);\n                this.animation.onEnter(function () { return _this.animationOptions.getAnimatedElement(); }, this.animationOptions.getEnterOptions());\n            }\n            else {\n                this.animation.onLeave(function () { return _this.animationOptions.getAnimatedElement(); }, function () {\n                    _this.update(newValue);\n                }, this.animationOptions.getLeaveOptions());\n            }\n        }\n        else {\n            this.update(newValue);\n        }\n    };\n    return AnimationBoolean;\n}(AnimationProperty));\n\nvar AnimationGroup = /** @class */ (function (_super) {\n    __extends(AnimationGroup, _super);\n    function AnimationGroup() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.animation = new AnimationGroupUtils();\n        return _this;\n    }\n    AnimationGroup.prototype._sync = function (newValue) {\n        var _this = this;\n        var oldValue = this.getCurrentValue();\n        var itemsToAdd = newValue.filter(function (el) { return oldValue.indexOf(el) < 0; });\n        var deletedItems = oldValue.filter(function (el) { return newValue.indexOf(el) < 0; });\n        this.animation.onEnter(function (el) { return _this.animationOptions.getAnimatedElement(el); }, function (el) { return _this.animationOptions.getEnterOptions(el); }, itemsToAdd);\n        if (itemsToAdd.length == 0 && (deletedItems === null || deletedItems === void 0 ? void 0 : deletedItems.length) > 0) {\n            this.animation.onLeave(function (el) { return _this.animationOptions.getAnimatedElement(el); }, function () {\n                _this.update(newValue);\n            }, function (el) { return _this.animationOptions.getLeaveOptions(el); }, deletedItems);\n        }\n        else {\n            this.update(newValue);\n        }\n    };\n    return AnimationGroup;\n}(AnimationProperty));\n\n\n\n/***/ }),\n\n/***/ \"./src/utils/cssClassBuilder.ts\":\n/*!**************************************!*\\\n  !*** ./src/utils/cssClassBuilder.ts ***!\n  \\**************************************/\n/*! exports provided: CssClassBuilder */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1161474__) {\n\n\"use strict\";\n__nested_webpack_require_1161474__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1161474__.d(__nested_webpack_exports__, \"CssClassBuilder\", function() { return CssClassBuilder; });\nvar CssClassBuilder = /** @class */ (function () {\n    function CssClassBuilder() {\n        this.classes = [];\n    }\n    CssClassBuilder.prototype.isEmpty = function () {\n        return this.toString() === \"\";\n    };\n    CssClassBuilder.prototype.append = function (value, condition) {\n        if (condition === void 0) { condition = true; }\n        if (!!value && condition) {\n            if (typeof value === \"string\") {\n                value = value.trim();\n            }\n            this.classes.push(value);\n        }\n        return this;\n    };\n    CssClassBuilder.prototype.toString = function () {\n        return this.classes.join(\" \");\n    };\n    return CssClassBuilder;\n}());\n\n\n\n/***/ }),\n\n/***/ \"./src/utils/responsivity-manager.ts\":\n/*!*******************************************!*\\\n  !*** ./src/utils/responsivity-manager.ts ***!\n  \\*******************************************/\n/*! exports provided: ResponsivityManager, VerticalResponsivityManager */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1162700__) {\n\n\"use strict\";\n__nested_webpack_require_1162700__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1162700__.d(__nested_webpack_exports__, \"ResponsivityManager\", function() { return ResponsivityManager; });\n/* harmony export (binding) */ __nested_webpack_require_1162700__.d(__nested_webpack_exports__, \"VerticalResponsivityManager\", function() { return VerticalResponsivityManager; });\n/* harmony import */ var _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1162700__(/*! ../global_variables_utils */ \"./src/global_variables_utils.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1162700__(/*! ./utils */ \"./src/utils/utils.ts\");\nvar __extends = ( false) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar ResponsivityManager = /** @class */ (function () {\n    function ResponsivityManager(container, model, itemsSelector, dotsItemSize, delayedUpdateFunction) {\n        var _this = this;\n        if (dotsItemSize === void 0) { dotsItemSize = null; }\n        this.container = container;\n        this.model = model;\n        this.itemsSelector = itemsSelector;\n        this.dotsItemSize = dotsItemSize;\n        this.delayedUpdateFunction = delayedUpdateFunction;\n        this.resizeObserver = undefined;\n        this.isInitialized = false;\n        this.minDimensionConst = 56;\n        this.separatorSize = 17;\n        this.separatorAddConst = 1;\n        this.paddingSizeConst = 8;\n        this.dotsSizeConst = 48;\n        this.recalcMinDimensionConst = true;\n        this.getComputedStyle = function (elt) {\n            return _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomDocumentHelper\"].getComputedStyle(elt);\n        };\n        this.model.updateCallback = function (isResetInitialized) {\n            if (isResetInitialized)\n                _this.isInitialized = false;\n            setTimeout(function () { _this.process(); }, 1);\n        };\n        if (typeof ResizeObserver !== \"undefined\") {\n            this.resizeObserver = new ResizeObserver(function (entries) {\n                _global_variables_utils__WEBPACK_IMPORTED_MODULE_0__[\"DomWindowHelper\"].requestAnimationFrame(function () {\n                    _this.process();\n                });\n            });\n            this.resizeObserver.observe(this.container.parentElement);\n        }\n    }\n    ResponsivityManager.prototype.getDimensions = function (element) {\n        return {\n            scroll: element.scrollWidth,\n            offset: element.offsetWidth,\n        };\n    };\n    ResponsivityManager.prototype.getAvailableSpace = function () {\n        var style = this.getComputedStyle(this.container);\n        var space = this.container.offsetWidth;\n        if (style.boxSizing === \"border-box\") {\n            space -= parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);\n        }\n        return space;\n    };\n    ResponsivityManager.prototype.calcItemSize = function (item) {\n        return item.offsetWidth;\n    };\n    ResponsivityManager.prototype.calcMinDimension = function (currentAction) {\n        var minDimensionConst = this.minDimensionConst;\n        if (currentAction.iconSize && this.recalcMinDimensionConst) {\n            minDimensionConst = 2 * currentAction.iconSize + this.paddingSizeConst;\n        }\n        return currentAction.canShrink\n            ? minDimensionConst +\n                (currentAction.needSeparator ? this.separatorSize : 0)\n            : currentAction.maxDimension;\n    };\n    ResponsivityManager.prototype.getRenderedVisibleActionsCount = function () {\n        var _this = this;\n        var count = 0;\n        this.container.querySelectorAll(this.itemsSelector).forEach(function (item) {\n            if (_this.calcItemSize(item) > 0) {\n                count++;\n            }\n        });\n        return count;\n    };\n    ResponsivityManager.prototype.calcItemsSizes = function () {\n        var _this = this;\n        var actions = this.model.actions;\n        var _items = this.container.querySelectorAll(this.itemsSelector);\n        (_items || []).forEach(function (item, index) {\n            var currentAction = actions[index];\n            _this.calcActionDimensions(currentAction, item);\n        });\n    };\n    ResponsivityManager.prototype.calcActionDimensions = function (currentAction, item) {\n        currentAction.maxDimension = this.calcItemSize(item);\n        currentAction.minDimension = this.calcMinDimension(currentAction);\n    };\n    Object.defineProperty(ResponsivityManager.prototype, \"isContainerVisible\", {\n        get: function () {\n            return Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"isContainerVisible\"])(this.container);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ResponsivityManager.prototype.process = function () {\n        var _this = this;\n        if (this.isContainerVisible && !this.model.isResponsivenessDisabled) {\n            if (!this.isInitialized) {\n                this.model.setActionsMode(\"large\");\n            }\n            var processResponsiveness_1 = function () {\n                var _a;\n                var dotsItemSize = _this.dotsItemSize;\n                if (!_this.dotsItemSize) {\n                    var dotsItemElement = (_a = _this.container) === null || _a === void 0 ? void 0 : _a.querySelector(\".sv-dots\");\n                    dotsItemSize = dotsItemElement && _this.calcItemSize(dotsItemElement) || _this.dotsSizeConst;\n                }\n                _this.model.fit(_this.getAvailableSpace(), dotsItemSize);\n            };\n            if (!this.isInitialized) {\n                var callback = function () {\n                    _this.calcItemsSizes();\n                    _this.isInitialized = true;\n                    processResponsiveness_1();\n                };\n                if (this.getRenderedVisibleActionsCount() < this.model.visibleActions.length) {\n                    if (this.delayedUpdateFunction) {\n                        this.delayedUpdateFunction(callback);\n                    }\n                    else if (queueMicrotask) {\n                        queueMicrotask(callback);\n                    }\n                    else {\n                        callback();\n                    }\n                }\n                else {\n                    callback();\n                }\n            }\n            else {\n                processResponsiveness_1();\n            }\n        }\n    };\n    ResponsivityManager.prototype.dispose = function () {\n        this.model.updateCallback = undefined;\n        if (!!this.resizeObserver) {\n            this.resizeObserver.disconnect();\n        }\n    };\n    return ResponsivityManager;\n}());\n\nvar VerticalResponsivityManager = /** @class */ (function (_super) {\n    __extends(VerticalResponsivityManager, _super);\n    function VerticalResponsivityManager(container, model, itemsSelector, dotsItemSize, minDimension, delayedUpdateFunction) {\n        if (minDimension === void 0) { minDimension = 40; }\n        var _this = _super.call(this, container, model, itemsSelector, dotsItemSize, delayedUpdateFunction) || this;\n        _this.minDimensionConst = minDimension;\n        _this.recalcMinDimensionConst = false;\n        return _this;\n    }\n    VerticalResponsivityManager.prototype.getDimensions = function () {\n        return {\n            scroll: this.container.scrollHeight,\n            offset: this.container.offsetHeight,\n        };\n    };\n    VerticalResponsivityManager.prototype.getAvailableSpace = function () {\n        var style = this.getComputedStyle(this.container);\n        var space = this.container.offsetHeight;\n        if (style.boxSizing === \"border-box\") {\n            space -= parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);\n        }\n        return space;\n    };\n    VerticalResponsivityManager.prototype.calcItemSize = function (item) {\n        return item.offsetHeight;\n    };\n    VerticalResponsivityManager.prototype.calcActionDimensions = function (currentAction, item) {\n        currentAction.maxDimension = this.calcItemSize(item);\n        currentAction.minDimension = this.calcItemSize(item);\n    };\n    return VerticalResponsivityManager;\n}(ResponsivityManager));\n\n\n\n/***/ }),\n\n/***/ \"./src/utils/taskmanager.ts\":\n/*!**********************************!*\\\n  !*** ./src/utils/taskmanager.ts ***!\n  \\**********************************/\n/*! exports provided: Task, TaskManger, debounce */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1171804__) {\n\n\"use strict\";\n__nested_webpack_require_1171804__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1171804__.d(__nested_webpack_exports__, \"Task\", function() { return Task; });\n/* harmony export (binding) */ __nested_webpack_require_1171804__.d(__nested_webpack_exports__, \"TaskManger\", function() { return TaskManger; });\n/* harmony export (binding) */ __nested_webpack_require_1171804__.d(__nested_webpack_exports__, \"debounce\", function() { return debounce; });\nvar Task = /** @class */ (function () {\n    function Task(func, isMultiple) {\n        var _this = this;\n        if (isMultiple === void 0) { isMultiple = false; }\n        this.func = func;\n        this.isMultiple = isMultiple;\n        this._isCompleted = false;\n        this.execute = function () {\n            if (!_this._isCompleted) {\n                _this.func();\n                _this._isCompleted = !_this.isMultiple;\n            }\n        };\n    }\n    Task.prototype.discard = function () {\n        this._isCompleted = true;\n    };\n    Object.defineProperty(Task.prototype, \"isCompleted\", {\n        get: function () {\n            return this._isCompleted;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Task;\n}());\n\nvar TaskManger = /** @class */ (function () {\n    function TaskManger(interval) {\n        if (interval === void 0) { interval = 100; }\n        this.interval = interval;\n        setTimeout(TaskManger.Instance().tick, interval);\n    }\n    // dispose\n    TaskManger.Instance = function () {\n        if (!TaskManger.instance) {\n            TaskManger.instance = new TaskManger();\n        }\n        return TaskManger.instance;\n    };\n    TaskManger.prototype.tick = function () {\n        try {\n            var newTasks = [];\n            for (var i = 0; i < TaskManger.tasks.length; i++) {\n                var task = TaskManger.tasks[i];\n                task.execute();\n                if (!task.isCompleted) {\n                    newTasks.push(task);\n                }\n                else {\n                    if (typeof task.dispose === \"function\") {\n                        task.dispose();\n                    }\n                }\n            }\n            TaskManger.tasks = newTasks;\n        }\n        finally {\n            setTimeout(TaskManger.Instance().tick, this.interval);\n        }\n    };\n    TaskManger.schedule = function (task) {\n        TaskManger.tasks.push(task);\n    };\n    TaskManger.instance = undefined;\n    TaskManger.tasks = [];\n    return TaskManger;\n}());\n\nfunction debounce(func) {\n    var _this = this;\n    var isSheduled = false;\n    var isCanceled = false;\n    var funcArgs;\n    return { run: (function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            isCanceled = false;\n            funcArgs = args;\n            if (!isSheduled) {\n                isSheduled = true;\n                queueMicrotask(function () {\n                    if (!isCanceled) {\n                        func.apply(_this, funcArgs);\n                    }\n                    isCanceled = false;\n                    isSheduled = false;\n                });\n            }\n        }), cancel: function () {\n            isCanceled = true;\n        } };\n}\n\n\n/***/ }),\n\n/***/ \"./src/utils/utils.ts\":\n/*!****************************!*\\\n  !*** ./src/utils/utils.ts ***!\n  \\****************************/\n/*! exports provided: unwrap, getRenderedSize, getRenderedStyleSize, doKey2ClickBlur, doKey2ClickUp, doKey2ClickDown, sanitizeEditableContent, Logger, showConfirmDialog, configConfirmDialog, mergeValues, getElementWidth, isContainerVisible, classesToSelector, compareVersions, confirmAction, confirmActionAsync, detectIEOrEdge, detectIEBrowser, loadFileFromBase64, isMobile, isShadowDOM, getElement, isElementVisible, findScrollableParent, scrollElementByChildId, navigateToUrl, wrapUrlForBackgroundImage, createSvg, getIconNameFromProxy, increaseHeightByContent, getOriginalEvent, preventDefaults, findParentByClassNames, getFirstVisibleChild, chooseFiles */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_1175907__) {\n\n\"use strict\";\n__nested_webpack_require_1175907__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"unwrap\", function() { return unwrap; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"getRenderedSize\", function() { return getRenderedSize; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"getRenderedStyleSize\", function() { return getRenderedStyleSize; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"doKey2ClickBlur\", function() { return doKey2ClickBlur; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"doKey2ClickUp\", function() { return doKey2ClickUp; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"doKey2ClickDown\", function() { return doKey2ClickDown; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"sanitizeEditableContent\", function() { return sanitizeEditableContent; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"Logger\", function() { return Logger; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"showConfirmDialog\", function() { return showConfirmDialog; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"configConfirmDialog\", function() { return configConfirmDialog; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"mergeValues\", function() { return mergeValues; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"getElementWidth\", function() { return getElementWidth; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"isContainerVisible\", function() { return isContainerVisible; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"classesToSelector\", function() { return classesToSelector; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"compareVersions\", function() { return compareVersions; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"confirmAction\", function() { return confirmAction; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"confirmActionAsync\", function() { return confirmActionAsync; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"detectIEOrEdge\", function() { return detectIEOrEdge; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"detectIEBrowser\", function() { return detectIEBrowser; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"loadFileFromBase64\", function() { return loadFileFromBase64; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"isMobile\", function() { return isMobile; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"isShadowDOM\", function() { return isShadowDOM; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"getElement\", function() { return getElement; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"isElementVisible\", function() { return isElementVisible; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"findScrollableParent\", function() { return findScrollableParent; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"scrollElementByChildId\", function() { return scrollElementByChildId; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"navigateToUrl\", function() { return navigateToUrl; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"wrapUrlForBackgroundImage\", function() { return wrapUrlForBackgroundImage; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"createSvg\", function() { return createSvg; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"getIconNameFromProxy\", function() { return getIconNameFromProxy; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"increaseHeightByContent\", function() { return increaseHeightByContent; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"getOriginalEvent\", function() { return getOriginalEvent; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"preventDefaults\", function() { return preventDefaults; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"findParentByClassNames\", function() { return findParentByClassNames; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"getFirstVisibleChild\", function() { return getFirstVisibleChild; });\n/* harmony export (binding) */ __nested_webpack_require_1175907__.d(__nested_webpack_exports__, \"chooseFiles\", function() { return chooseFiles; });\n/* harmony import */ var _localizablestring__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_1175907__(/*! ../localizablestring */ \"./src/localizablestring.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_1175907__(/*! ./../settings */ \"./src/settings.ts\");\n/* harmony import */ var _surveyStrings__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_1175907__(/*! ../surveyStrings */ \"./src/surveyStrings.ts\");\n/* harmony import */ var _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_1175907__(/*! ../global_variables_utils */ \"./src/global_variables_utils.ts\");\n\n\n\n\nfunction compareVersions(a, b) {\n    var regExStrip0 = /(\\.0+)+$/;\n    var segmentsA = a.replace(regExStrip0, \"\").split(\".\");\n    var segmentsB = b.replace(regExStrip0, \"\").split(\".\");\n    var len = Math.min(segmentsA.length, segmentsB.length);\n    for (var i = 0; i < len; i++) {\n        var diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\n        if (diff) {\n            return diff;\n        }\n    }\n    return segmentsA.length - segmentsB.length;\n}\nfunction confirmAction(message) {\n    if (!!_settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"] && !!_settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].confirmActionFunc)\n        return _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].confirmActionFunc(message);\n    return confirm(message);\n}\nfunction confirmActionAsync(message, funcOnYes, funcOnNo, locale, rootElement) {\n    var callbackFunc = function (res) {\n        if (res)\n            funcOnYes();\n        else if (!!funcOnNo)\n            funcOnNo();\n    };\n    if (!!_settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"] && !!_settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].confirmActionAsync) {\n        if (_settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].confirmActionAsync(message, callbackFunc, undefined, locale, rootElement))\n            return;\n    }\n    callbackFunc(confirmAction(message));\n}\nfunction detectIEBrowser() {\n    var ua = navigator.userAgent;\n    var oldIe = ua.indexOf(\"MSIE \");\n    var elevenIe = ua.indexOf(\"Trident/\");\n    return oldIe > -1 || elevenIe > -1;\n}\nfunction detectIEOrEdge() {\n    if (typeof detectIEOrEdge.isIEOrEdge === \"undefined\") {\n        var ua = navigator.userAgent;\n        var msie = ua.indexOf(\"MSIE \");\n        var trident = ua.indexOf(\"Trident/\");\n        var edge = ua.indexOf(\"Edge/\");\n        detectIEOrEdge.isIEOrEdge = edge > 0 || trident > 0 || msie > 0;\n    }\n    return detectIEOrEdge.isIEOrEdge;\n}\nfunction loadFileFromBase64(b64Data, fileName) {\n    try {\n        var byteString = atob(b64Data.split(\",\")[1]);\n        // separate out the mime component\n        var mimeString = b64Data\n            .split(\",\")[0]\n            .split(\":\")[1]\n            .split(\";\")[0];\n        // write the bytes of the string to an ArrayBuffer\n        var ab = new ArrayBuffer(byteString.length);\n        var ia = new Uint8Array(ab);\n        for (var i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n        // write the ArrayBuffer to a blob, and you're done\n        var bb = new Blob([ab], { type: mimeString });\n        if (!!navigator && navigator[\"msSaveBlob\"]) {\n            navigator[\"msSaveOrOpenBlob\"](bb, fileName);\n        }\n    }\n    catch (err) { }\n}\nfunction isMobile() {\n    return (_global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].isAvailable() && _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].hasOwn(\"orientation\"));\n}\nvar isShadowDOM = function (rootElement) {\n    return !!rootElement && !!(\"host\" in rootElement && rootElement.host);\n};\nvar getElement = function (element) {\n    var root = _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment.root;\n    return typeof element === \"string\" ? root.getElementById(element) : element;\n};\nfunction isElementVisible(element, threshold) {\n    if (threshold === void 0) { threshold = 0; }\n    if (typeof _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment === \"undefined\") {\n        return false;\n    }\n    var root = _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment.root;\n    var clientHeight = isShadowDOM(root)\n        ? root.host.clientHeight\n        : root.documentElement.clientHeight;\n    var elementRect = element.getBoundingClientRect();\n    var viewHeight = Math.max(clientHeight, _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].getInnerHeight());\n    var topWin = -threshold;\n    var bottomWin = viewHeight + threshold;\n    var topEl = elementRect.top;\n    var bottomEl = elementRect.bottom;\n    var maxTop = Math.max(topWin, topEl);\n    var minBottom = Math.min(bottomWin, bottomEl);\n    return maxTop <= minBottom;\n}\nfunction findScrollableParent(element) {\n    var root = _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment.root;\n    if (!element) {\n        return isShadowDOM(root)\n            ? root.host\n            : root.documentElement;\n    }\n    if (element.scrollHeight > element.clientHeight &&\n        (getComputedStyle(element).overflowY === \"scroll\" ||\n            getComputedStyle(element).overflowY === \"auto\")) {\n        return element;\n    }\n    if (element.scrollWidth > element.clientWidth &&\n        (getComputedStyle(element).overflowX === \"scroll\" ||\n            getComputedStyle(element).overflowX === \"auto\")) {\n        return element;\n    }\n    return findScrollableParent(element.parentElement);\n}\nfunction scrollElementByChildId(id) {\n    var environment = _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].environment;\n    if (!environment)\n        return;\n    var root = environment.root;\n    var el = root.getElementById(id);\n    if (!el)\n        return;\n    var scrollableEl = findScrollableParent(el);\n    if (!!scrollableEl) {\n        setTimeout(function () { return scrollableEl.dispatchEvent(new CustomEvent(\"scroll\")); }, 10);\n    }\n}\nfunction navigateToUrl(url) {\n    var location = _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].getLocation();\n    if (!url || !location)\n        return;\n    location.href = url;\n}\nfunction wrapUrlForBackgroundImage(url) {\n    return !!url ? [\"url(\", url, \")\"].join(\"\") : \"\";\n}\nfunction getIconNameFromProxy(iconName) {\n    if (!iconName)\n        return iconName;\n    var proxyName = _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].customIcons[iconName];\n    return !!proxyName ? proxyName : iconName;\n}\nfunction createSvg(size, width, height, iconName, svgElem, title) {\n    if (!svgElem)\n        return;\n    if (size !== \"auto\") {\n        svgElem.style.width = (size || width || 16) + \"px\";\n        svgElem.style.height = (size || height || 16) + \"px\";\n    }\n    var node = svgElem.childNodes[0];\n    var realIconName = getIconNameFromProxy(iconName);\n    node.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", \"#\" + realIconName);\n    var titleElement = svgElem.getElementsByTagName(\"title\")[0];\n    if (!title) {\n        if (!!titleElement) {\n            svgElem.removeChild(titleElement);\n        }\n        return;\n    }\n    else {\n        if (!titleElement) {\n            titleElement = _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomDocumentHelper\"].getDocument().createElementNS(\"http://www.w3.org/2000/svg\", \"title\");\n            svgElem.appendChild(titleElement);\n        }\n    }\n    titleElement.textContent = title;\n}\nfunction unwrap(value) {\n    if (typeof value !== \"function\") {\n        return value;\n    }\n    else {\n        return value();\n    }\n}\n// export function getSize(value: any): number {\n//   if (typeof value === \"number\") {\n//     return value;\n//   }\n//   if (typeof value === \"string\" && value.includes(\"px\")) {\n//     return parseInt(value);\n//   }\n//   if (!!value && typeof value === \"string\" && value.length > 0) {\n//     const lastSymbol: string = value[value.length - 1];\n//     if ((lastSymbol >= \"0\" && lastSymbol <= \"9\") || lastSymbol == \".\") {\n//       try {\n//         const num: number = parseInt(value);\n//         return num;\n//       } catch { }\n//     }\n//   }\n//   return value;\n// }\nfunction getRenderedSize(val) {\n    if (typeof val == \"string\") {\n        if (!isNaN(Number(val))) {\n            return Number(val);\n        }\n        else if (val.includes(\"px\")) {\n            return parseFloat(val);\n        }\n    }\n    if (typeof val == \"number\") {\n        return val;\n    }\n    return undefined;\n}\nfunction getRenderedStyleSize(val) {\n    if (getRenderedSize(val) !== undefined) {\n        return undefined;\n    }\n    return val;\n}\nvar keyFocusedClassName = \"sv-focused--by-key\";\nfunction doKey2ClickBlur(evt) {\n    var element = evt.target;\n    if (!element || !element.classList)\n        return;\n    element.classList.remove(keyFocusedClassName);\n}\nfunction doKey2ClickUp(evt, options) {\n    if (!!evt.target && evt.target[\"contentEditable\"] === \"true\") {\n        return;\n    }\n    var element = evt.target;\n    if (!element)\n        return;\n    var char = evt.which || evt.keyCode;\n    if (char === 9) {\n        if (!!element.classList && !element.classList.contains(keyFocusedClassName)) {\n            element.classList.add(keyFocusedClassName);\n        }\n        return;\n    }\n    if (options) {\n        if (!options.__keyDownReceived)\n            return;\n        options.__keyDownReceived = false;\n    }\n    if (char === 13 || char === 32) {\n        if (element.click)\n            element.click();\n    }\n    else if ((!options || options.processEsc) && char === 27) {\n        if (element.blur)\n            element.blur();\n    }\n}\nfunction doKey2ClickDown(evt, options) {\n    if (options === void 0) { options = { processEsc: true }; }\n    if (options)\n        options.__keyDownReceived = true;\n    if (!!evt.target && evt.target[\"contentEditable\"] === \"true\") {\n        return;\n    }\n    var char = evt.which || evt.keyCode;\n    var supportedCodes = [13, 32];\n    if (options.processEsc) {\n        supportedCodes.push(27);\n    }\n    if (supportedCodes.indexOf(char) !== -1) {\n        evt.preventDefault();\n    }\n}\nfunction increaseHeightByContent(element, getComputedStyle) {\n    if (!element)\n        return;\n    if (!getComputedStyle)\n        getComputedStyle = function (elt) { return _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomDocumentHelper\"].getComputedStyle(elt); };\n    var style = getComputedStyle(element);\n    element.style.height = \"auto\";\n    if (!!element.scrollHeight) {\n        element.style.height = (element.scrollHeight + parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth)) + \"px\";\n    }\n}\nfunction getOriginalEvent(event) {\n    return event.originalEvent || event;\n}\nfunction preventDefaults(event) {\n    event.preventDefault();\n    event.stopPropagation();\n}\nfunction classesToSelector(str) {\n    var re = /\\s*?([\\w-]+)\\s*?/g;\n    return str.replace(re, \".$1\");\n}\nfunction getElementWidth(el) {\n    return !!getComputedStyle ? Number.parseFloat(getComputedStyle(el).width) : el.offsetWidth;\n}\nfunction isContainerVisible(el) {\n    return !!(el.offsetWidth ||\n        el.offsetHeight ||\n        el.getClientRects().length);\n}\nfunction getFirstVisibleChild(el) {\n    var result;\n    for (var index = 0; index < el.children.length; index++) {\n        if (!result && getComputedStyle(el.children[index]).display !== \"none\") {\n            result = el.children[index];\n        }\n    }\n    return result;\n}\nfunction findParentByClassNames(element, classNames) {\n    if (!!element) {\n        if (classNames.every(function (className) { return !className || element.classList.contains(className); })) {\n            return element;\n        }\n        else {\n            return findParentByClassNames(element.parentElement, classNames);\n        }\n    }\n}\nfunction sanitizeEditableContent(element, cleanLineBreaks) {\n    if (cleanLineBreaks === void 0) { cleanLineBreaks = true; }\n    if (_global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].isAvailable() && _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomDocumentHelper\"].isAvailable() && element.childNodes.length > 0) {\n        var selection = _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].getSelection();\n        if (selection.rangeCount == 0) {\n            return;\n        }\n        var range = selection.getRangeAt(0);\n        range.setStart(range.endContainer, range.endOffset);\n        range.setEndAfter(element.lastChild);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        var tail = selection.toString();\n        var innerText = element.innerText;\n        tail = tail.replace(/\\r/g, \"\");\n        if (cleanLineBreaks) {\n            tail = tail.replace(/\\n/g, \"\");\n            innerText = innerText.replace(/\\n/g, \"\");\n        }\n        var tail_len = tail.length;\n        element.innerText = innerText;\n        range = _global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomDocumentHelper\"].getDocument().createRange();\n        range.setStart(element.firstChild, 0);\n        range.setEnd(element.firstChild, 0);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        while (selection.toString().length < innerText.length - tail_len) {\n            var selLen = selection.toString().length;\n            selection.modify(\"extend\", \"forward\", \"character\");\n            if (selection.toString().length == selLen)\n                break;\n        }\n        range = selection.getRangeAt(0);\n        range.setStart(range.endContainer, range.endOffset);\n    }\n}\nfunction mergeValues(src, dest) {\n    if (!dest || !src)\n        return;\n    if (typeof dest !== \"object\")\n        return;\n    for (var key in src) {\n        var value = src[key];\n        if (!Array.isArray(value) && value && typeof value === \"object\") {\n            if (!dest[key] || typeof dest[key] !== \"object\")\n                dest[key] = {};\n            mergeValues(value, dest[key]);\n        }\n        else {\n            dest[key] = value;\n        }\n    }\n}\nvar Logger = /** @class */ (function () {\n    function Logger() {\n        this._result = \"\";\n    }\n    Logger.prototype.log = function (action) {\n        this._result += \"->\" + action;\n    };\n    Object.defineProperty(Logger.prototype, \"result\", {\n        get: function () {\n            return this._result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Logger;\n}());\n\nfunction showConfirmDialog(message, callback, applyTitle, locale, rootElement) {\n    var locStr = new _localizablestring__WEBPACK_IMPORTED_MODULE_0__[\"LocalizableString\"](undefined);\n    var popupViewModel = _settings__WEBPACK_IMPORTED_MODULE_1__[\"settings\"].showDialog({\n        componentName: \"sv-string-viewer\",\n        data: { locStr: locStr, locString: locStr, model: locStr },\n        onApply: function () {\n            callback(true);\n            return true;\n        },\n        onCancel: function () {\n            callback(false);\n            return false;\n        },\n        title: message,\n        displayMode: \"popup\",\n        isFocusedContent: false,\n        cssClass: \"sv-popup--confirm-delete\"\n    }, rootElement);\n    var toolbar = popupViewModel.footerToolbar;\n    var applyBtn = toolbar.getActionById(\"apply\");\n    var cancelBtn = toolbar.getActionById(\"cancel\");\n    cancelBtn.title = _surveyStrings__WEBPACK_IMPORTED_MODULE_2__[\"surveyLocalization\"].getString(\"cancel\", locale);\n    cancelBtn.innerCss = \"sv-popup__body-footer-item sv-popup__button sd-btn sd-btn--small\";\n    applyBtn.title = applyTitle || _surveyStrings__WEBPACK_IMPORTED_MODULE_2__[\"surveyLocalization\"].getString(\"ok\", locale);\n    applyBtn.innerCss = \"sv-popup__body-footer-item sv-popup__button sv-popup__button--danger sd-btn sd-btn--small sd-btn--danger\";\n    configConfirmDialog(popupViewModel);\n    return true;\n}\nfunction configConfirmDialog(popupViewModel) {\n    popupViewModel.width = \"min-content\";\n}\nfunction chooseFiles(input, callback) {\n    if (!_global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].isFileReaderAvailable())\n        return;\n    input.value = \"\";\n    input.onchange = function (event) {\n        if (!_global_variables_utils__WEBPACK_IMPORTED_MODULE_3__[\"DomWindowHelper\"].isFileReaderAvailable())\n            return;\n        if (!input || !input.files || input.files.length < 1)\n            return;\n        var files = [];\n        for (var i = 0; i < input.files.length; i++) {\n            files.push(input.files[i]);\n        }\n        callback(files);\n    };\n    input.click();\n}\n\n\n\n/***/ }),\n\n/***/ \"react\":\n/*!**************************************************************************************!*\\\n  !*** external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"} ***!\n  \\**************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_react__;\n\n/***/ }),\n\n/***/ \"react-dom\":\n/*!*****************************************************************************************************!*\\\n  !*** external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"} ***!\n  \\*****************************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_react_dom__;\n\n/***/ }),\n\n/***/ \"survey-core\":\n/*!*********************************************************************************************************!*\\\n  !*** external {\"root\":\"Survey\",\"commonjs2\":\"survey-core\",\"commonjs\":\"survey-core\",\"amd\":\"survey-core\"} ***!\n  \\*********************************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_survey_core__;\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=survey-react-ui.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3VydmV5LXJlYWN0LXVpL3N1cnZleS1yZWFjdC11aS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQXlEO0FBQzdELDJCQUEyQixtQkFBTyxDQUFDLHdHQUFPLEdBQUcsbUJBQU8sQ0FBQyxnSEFBVyxHQUFHLG1CQUFPLENBQUMsb0VBQWE7QUFDeEYsTUFBTSxFQUsyRTtBQUNqRixDQUFDO0FBQ0QscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtCQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSwrQkFBbUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLCtCQUFtQjtBQUM3QjtBQUNBO0FBQ0EsVUFBVSwrQkFBbUI7QUFDN0I7QUFDQTtBQUNBLFVBQVUsK0JBQW1CO0FBQzdCLGVBQWUsK0JBQW1CO0FBQ2xDLG1EQUFtRCwrQkFBK0I7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLCtCQUFtQjtBQUM3QjtBQUNBLGlFQUFpRSxpQkFBaUI7QUFDbEY7QUFDQSwwREFBMEQsYUFBYTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0JBQW1CO0FBQzdCLGdDQUFnQywrQkFBbUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQkFBbUI7QUFDOUIsa0RBQWtELGdDQUFnQztBQUNsRiwwRUFBMEUsK0JBQW1CLDRCQUE0QixvQkFBb0I7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLCtCQUFtQjtBQUM3QjtBQUNBLG9DQUFvQyw0QkFBNEI7QUFDaEUsMENBQTBDO0FBQzFDLFdBQVcsK0JBQW1CO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQkFBbUIsa0NBQWtDO0FBQy9EO0FBQ0E7QUFDQSxVQUFVLCtCQUFtQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0JBQW1CLENBQUMsK0JBQW1CO0FBQ3hELFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQW1CLEVBQUUsK0JBQW1COztBQUVoRTtBQUNBLCtCQUFtQixHQUFHLDBCQUFtQjtBQUN6QywrQkFBK0IsK0JBQW1CLEdBQUcsMEJBQW1CLDRDQUE0QyxtQ0FBbUM7QUFDdkosK0JBQStCLCtCQUFtQixHQUFHLDBCQUFtQixvREFBb0QsMkNBQTJDO0FBQ3ZLLCtCQUErQiwrQkFBbUIsR0FBRywwQkFBbUIsZ0RBQWdELHVDQUF1QztBQUMvSiwrQkFBK0IsK0JBQW1CLEdBQUcsMEJBQW1CLDZCQUE2QixvQkFBb0I7QUFDekgsK0JBQStCLCtCQUFtQixHQUFHLDBCQUFtQix5QkFBeUIsZ0JBQWdCO0FBQ2pILCtCQUErQiwrQkFBbUIsR0FBRywwQkFBbUIsMENBQTBDLGlDQUFpQztBQUNuSiw4REFBOEQsK0JBQW1CO0FBQ2pGLHVFQUF1RSwrQkFBbUI7QUFDMUYsb0VBQW9FLCtCQUFtQjtBQUN2Riw4REFBOEQsK0JBQW1CO0FBQ2pGLCtEQUErRCwrQkFBbUI7QUFDbEYsK0VBQStFLCtCQUFtQjtBQUNsRyxtRUFBbUUsK0JBQW1CO0FBQ3RGLGlCQUFpQixNQUFnQztBQUNqRDtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0Isc0NBQXNDLGtCQUFrQjtBQUN2Riw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWtCLE1BQWlDO0FBQ25EO0FBQ0E7QUFDQSw2Q0FBNkMsUUFBUTtBQUNyRDtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNkZBQTZGLGtCQUFrQjtBQUMvRztBQUNBLEtBQUs7QUFDTDtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLHVCQUF1QjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLHFCQUFxQjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLHdCQUF3QjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQywrREFBK0Q7QUFDL0QsMERB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsbUVBQW1FO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJCQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSwyQ0FBMkM7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx1Q0FBdUM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1Q0FBdUM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzQkFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7QUFJRCxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQW1CLEVBQUUsaUNBQW1COztBQUVoRTtBQUNBLGlDQUFtQixHQUFHLDBCQUFtQjtBQUN6QywrQkFBK0IsaUNBQW1CLEdBQUcsMEJBQW1CLHFDQUFxQyw0QkFBNEI7QUFDekksK0JBQStCLGlDQUFtQixHQUFHLDBCQUFtQix1Q0FBdUMsOEJBQThCO0FBQzdJLCtCQUErQixpQ0FBbUIsR0FBRywwQkFBbUIsa0NBQWtDLHlCQUF5QjtBQUNuSSwrQkFBK0IsaUNBQW1CLEdBQUcsMEJBQW1CLG1DQUFtQywwQkFBMEI7QUFDckksK0VBQStFLGlDQUFtQjtBQUNsRywwRUFBMEUsaUNBQW1CO0FBQzdGLDBFQUEwRSxpQ0FBbUI7QUFDN0YsaUJBQWlCLE1BQWdDO0FBQ2pEO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQixzQ0FBc0Msa0JBQWtCO0FBQ3ZGLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLENBQUM7Ozs7QUFJRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtCQUErQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQkFBK0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQkFBK0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFO0FBQzFFO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0U7QUFDbEU7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyx5QkFBeUI7QUFDekIsMkNBQTJDLEtBQUs7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvQkFBb0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDRCQUE0QjtBQUM3RDtBQUNBO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7QUFJRCxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQW1CLEVBQUUsaUNBQW1COztBQUVoRTtBQUNBLGlDQUFtQixHQUFHLDBCQUFtQjtBQUN6QywrQkFBK0IsaUNBQW1CLEdBQUcsMEJBQW1CLGtDQUFrQyx5QkFBeUI7QUFDbkksK0JBQStCLGlDQUFtQixHQUFHLDBCQUFtQixtQ0FBbUMsMEJBQTBCO0FBQ3JJLGlFQUFpRSxpQ0FBbUI7QUFDcEYsa0VBQWtFLGlDQUFtQjtBQUNyRiwwRUFBMEUsaUNBQW1COzs7O0FBSTdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0QkFBNEI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQW1CLEVBQUUsaUNBQW1COztBQUVoRTtBQUNBLGlDQUFtQixHQUFHLDBCQUFtQjtBQUN6QywrQkFBK0IsaUNBQW1CLEdBQUcsMEJBQW1CLGtDQUFrQyx5QkFBeUI7QUFDbkksK0JBQStCLGlDQUFtQixHQUFHLDBCQUFtQixvQ0FBb0MsMkJBQTJCO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7OztBQUlELE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBbUIsRUFBRSxpQ0FBbUI7O0FBRWhFO0FBQ0EsaUNBQW1CLEdBQUcsMEJBQW1CO0FBQ3pDLCtCQUErQixpQ0FBbUIsR0FBRywwQkFBbUIsMEJBQTBCLGlCQUFpQjtBQUNuSCxrRUFBa0UsaUNBQW1COztBQUVyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsY0FBYztBQUN0QztBQUNBLG1CQUFtQixjQUFjO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhCQUE4QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsT0FBTztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQkFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxnQkFBZ0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHVCQUF1QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNEJBQTRCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUJBQXlCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDRCQUE0QjtBQUN2RDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDJDQUEyQztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNEJBQTRCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQiw0QkFBNEIsd0JBQXdCO0FBQ3BEO0FBQ0EsdUNBQXVDLCtDQUErQztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwREFBMEQ7QUFDNUUsa0JBQWtCLG1DQUFtQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0Usb0RBQW9EO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHVFQUF1RSxxQkFBcUI7QUFDNUY7QUFDQTtBQUNBLHVFQUF1RSxxQkFBcUI7QUFDNUY7QUFDQTtBQUNBLHVFQUF1RSxxQkFBcUI7QUFDNUY7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHVFQUF1RSxxQkFBcUI7QUFDNUY7QUFDQTtBQUNBLHVFQUF1RSxvQkFBb0I7QUFDM0Y7QUFDQTtBQUNBLHVFQUF1RSxxQkFBcUI7QUFDNUY7QUFDQTtBQUNBLHVFQUF1RSxvQkFBb0I7QUFDM0Y7QUFDQTtBQUNBLHVFQUF1RSxxQkFBcUI7QUFDNUY7QUFDQTtBQUNBLENBQUM7Ozs7QUFJRCxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQW1CLEVBQUUsaUNBQW1COztBQUVoRTtBQUNBLGlDQUFtQixHQUFHLDBCQUFtQjtBQUN6QywrQkFBK0IsaUNBQW1CLEdBQUcsMEJBQW1CLG9DQUFvQywyQkFBMkI7QUFDdkksK0JBQStCLGlDQUFtQixHQUFHLDBCQUFtQixxQ0FBcUMsNEJBQTRCO0FBQ3pJLGlFQUFpRSxpQ0FBbUI7QUFDcEYsdUVBQXVFLGlDQUFtQjtBQUMxRixrRUFBa0UsaUNBQW1CO0FBQ3JGLDhEQUE4RCxpQ0FBbUI7QUFDakYsb0VBQW9FLGlDQUFtQjtBQUN2Rix3RUFBd0UsaUNBQW1COzs7Ozs7O0FBTzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTCw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxD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UztBQUNUO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7QUFJRCxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQW1CLEVBQUUsaUNBQW1COztBQUVoRTtBQUNBLGlDQUFtQixH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Q0E7QUFDQSx3TUFBd00sUUFBUSxRQUFRLDRDQUE0QztBQUNwUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHFJQUFxSSx5SkFBeUo7QUFDOVI7QUFDQTtBQUNBO0FBQ0Esc0pBQXNKLGdEQUFnRDtBQUN0TTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5SkFBeUosdUNBQXVDO0FBQ2hNO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSxzREFBc0Q7QUFDaEk7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTCw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBLDJCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlDQUFpQztBQUM1RDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsWUFBWTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRCQUE0QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELDZEQUE2RDtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtEQUFrRDtBQUNsRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBLE9BQU87O0FBRVA7QUFDQTtBQUNBLGlCQUFpQixxRUFBcUU7QUFDdEY7QUFDQTtBQUNBOztBQUVBOztBQUVBLE9BQU87O0FBRVA7QUFDQTtBQUNBLGlCQUFpQixvRkFBb0Y7QUFDckc7QUFDQTtBQUNBOztBQUVBOztBQUVBLE9BQU87O0FBRVA7QUFDQTtBQUNBLGlCQUFpQix3RkFBd0Y7QUFDekc7QUFDQTtBQUNBOztBQUVBOztBQUVBLE9BQU87O0FBRVAsVUFBVTtBQUNWLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3pvZmluZ2VuLXRyZXVoYW5kLXJlY2huZXIvLi9ub2RlX21vZHVsZXMvc3VydmV5LXJlYWN0LXVpL3N1cnZleS1yZWFjdC11aS5qcz9hMmFmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogc3VydmV5anMgLSBTdXJ2ZXkgSmF2YVNjcmlwdCBsaWJyYXJ5IHYxLjkuMTM4XG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtMjAyNCBEZXZzb2Z0IEJhbHRpYyBPw5wgIC0gaHR0cDovL3N1cnZleWpzLmlvL1xuICogTGljZW5zZTogTUlUIChodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocClcbiAqL1xuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIiksIHJlcXVpcmUoXCJyZWFjdC1kb21cIiksIHJlcXVpcmUoXCJzdXJ2ZXktY29yZVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcInN1cnZleS1yZWFjdC11aVwiLCBbXCJyZWFjdFwiLCBcInJlYWN0LWRvbVwiLCBcInN1cnZleS1jb3JlXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInN1cnZleS1yZWFjdC11aVwiXSA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpLCByZXF1aXJlKFwicmVhY3QtZG9tXCIpLCByZXF1aXJlKFwic3VydmV5LWNvcmVcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlN1cnZleVJlYWN0XCJdID0gZmFjdG9yeShyb290W1wiUmVhY3RcIl0sIHJvb3RbXCJSZWFjdERPTVwiXSwgcm9vdFtcIlN1cnZleVwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3JlYWN0X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcmVhY3RfZG9tX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfc3VydmV5X2NvcmVfXykge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4vKioqKioqLyBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vKioqKioqLyBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbi8qKioqKiovIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuLyoqKioqKi8gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbi8qKioqKiovIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuLyoqKioqKi8gXHRcdHJldHVybiBucztcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy9lbnRyaWVzL3JlYWN0LXVpLnRzXCIpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoe1xuXG4vKioqLyBcIi4vc3JjL2FjdGlvbnMvYWN0aW9uLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2FjdGlvbnMvYWN0aW9uLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGNyZWF0ZURyb3Bkb3duQWN0aW9uTW9kZWwsIGNyZWF0ZURyb3Bkb3duQWN0aW9uTW9kZWxBZHZhbmNlZCwgZ2V0QWN0aW9uRHJvcGRvd25CdXR0b25UYXJnZXQsIEJhc2VBY3Rpb24sIEFjdGlvbiwgQWN0aW9uRHJvcGRvd25WaWV3TW9kZWwgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY3JlYXRlRHJvcGRvd25BY3Rpb25Nb2RlbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNyZWF0ZURyb3Bkb3duQWN0aW9uTW9kZWw7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImNyZWF0ZURyb3Bkb3duQWN0aW9uTW9kZWxBZHZhbmNlZFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNyZWF0ZURyb3Bkb3duQWN0aW9uTW9kZWxBZHZhbmNlZDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0QWN0aW9uRHJvcGRvd25CdXR0b25UYXJnZXRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRBY3Rpb25Ecm9wZG93bkJ1dHRvblRhcmdldDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQmFzZUFjdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEJhc2VBY3Rpb247IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkFjdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFjdGlvbjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQWN0aW9uRHJvcGRvd25WaWV3TW9kZWxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBY3Rpb25Ecm9wZG93blZpZXdNb2RlbDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2Jhc2UgKi8gXCIuL3NyYy9iYXNlLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdXJ2ZXlTdHJpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zdXJ2ZXlTdHJpbmdzICovIFwiLi9zcmMvc3VydmV5U3RyaW5ncy50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vanNvbm9iamVjdCAqLyBcIi4vc3JjL2pzb25vYmplY3QudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2xpc3QgKi8gXCIuL3NyYy9saXN0LnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wb3B1cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcG9wdXAgKi8gXCIuL3NyYy9wb3B1cC50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbHNfY3NzQ2xhc3NCdWlsZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9jc3NDbGFzc0J1aWxkZXIgKi8gXCIuL3NyYy91dGlscy9jc3NDbGFzc0J1aWxkZXIudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb250YWluZXIgKi8gXCIuL3NyYy9hY3Rpb25zL2NvbnRhaW5lci50c1wiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcblxuXG5cblxuXG5cblxuZnVuY3Rpb24gY3JlYXRlRHJvcGRvd25BY3Rpb25Nb2RlbChhY3Rpb25PcHRpb25zLCBkcm9wZG93bk9wdGlvbnMsIGxvY093bmVyKSB7XG4gICAgcmV0dXJuIGNyZWF0ZURyb3Bkb3duQWN0aW9uTW9kZWxBZHZhbmNlZChhY3Rpb25PcHRpb25zLCBkcm9wZG93bk9wdGlvbnMsIGRyb3Bkb3duT3B0aW9ucywgbG9jT3duZXIpO1xufVxuZnVuY3Rpb24gY3JlYXRlRHJvcGRvd25BY3Rpb25Nb2RlbEFkdmFuY2VkKGFjdGlvbk9wdGlvbnMsIGxpc3RPcHRpb25zLCBwb3B1cE9wdGlvbnMsIGxvY093bmVyKSB7XG4gICAgdmFyIGxpc3RNb2RlbCA9IG5ldyBfbGlzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiTGlzdE1vZGVsXCJdKGxpc3RPcHRpb25zLml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAobmV3QWN0aW9uLmhhc1RpdGxlKSB7XG4gICAgICAgICAgICBuZXdBY3Rpb24udGl0bGUgPSBpdGVtLnRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RPcHRpb25zLm9uU2VsZWN0aW9uQ2hhbmdlZChpdGVtKTtcbiAgICAgICAgaW5uZXJQb3B1cE1vZGVsLnRvZ2dsZVZpc2liaWxpdHkoKTtcbiAgICB9LCBsaXN0T3B0aW9ucy5hbGxvd1NlbGVjdGlvbiwgbGlzdE9wdGlvbnMuc2VsZWN0ZWRJdGVtLCBsaXN0T3B0aW9ucy5vbkZpbHRlclN0cmluZ0NoYW5nZWRDYWxsYmFjayk7XG4gICAgbGlzdE1vZGVsLmxvY093bmVyID0gbG9jT3duZXI7XG4gICAgdmFyIGlubmVyUG9wdXBNb2RlbCA9IG5ldyBfcG9wdXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlBvcHVwTW9kZWxcIl0oXCJzdi1saXN0XCIsIHsgbW9kZWw6IGxpc3RNb2RlbCB9LCBwb3B1cE9wdGlvbnMgPT09IG51bGwgfHwgcG9wdXBPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3B1cE9wdGlvbnMudmVydGljYWxQb3NpdGlvbiwgcG9wdXBPcHRpb25zID09PSBudWxsIHx8IHBvcHVwT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wdXBPcHRpb25zLmhvcml6b250YWxQb3NpdGlvbiwgcG9wdXBPcHRpb25zID09PSBudWxsIHx8IHBvcHVwT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wdXBPcHRpb25zLnNob3dQb2ludGVyLCBwb3B1cE9wdGlvbnMgPT09IG51bGwgfHwgcG9wdXBPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3B1cE9wdGlvbnMuaXNNb2RhbCwgcG9wdXBPcHRpb25zID09PSBudWxsIHx8IHBvcHVwT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wdXBPcHRpb25zLm9uQ2FuY2VsLCBwb3B1cE9wdGlvbnMgPT09IG51bGwgfHwgcG9wdXBPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3B1cE9wdGlvbnMub25BcHBseSwgcG9wdXBPcHRpb25zID09PSBudWxsIHx8IHBvcHVwT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wdXBPcHRpb25zLm9uSGlkZSwgcG9wdXBPcHRpb25zID09PSBudWxsIHx8IHBvcHVwT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wdXBPcHRpb25zLm9uU2hvdywgcG9wdXBPcHRpb25zID09PSBudWxsIHx8IHBvcHVwT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wdXBPcHRpb25zLmNzc0NsYXNzLCBwb3B1cE9wdGlvbnMgPT09IG51bGwgfHwgcG9wdXBPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3B1cE9wdGlvbnMudGl0bGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGlzdE1vZGVsLmRpc3Bvc2UoKTtcbiAgICB9KTtcbiAgICBpbm5lclBvcHVwTW9kZWwuZGlzcGxheU1vZGUgPSBwb3B1cE9wdGlvbnMgPT09IG51bGwgfHwgcG9wdXBPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3B1cE9wdGlvbnMuZGlzcGxheU1vZGU7XG4gICAgdmFyIG5ld0FjdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBhY3Rpb25PcHRpb25zLCB7XG4gICAgICAgIGNvbXBvbmVudDogXCJzdi1hY3Rpb24tYmFyLWl0ZW0tZHJvcGRvd25cIixcbiAgICAgICAgcG9wdXBNb2RlbDogaW5uZXJQb3B1cE1vZGVsLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uIChhY3Rpb24sIGlzVXNlckFjdGlvbikge1xuICAgICAgICAgICAgISEoYWN0aW9uT3B0aW9ucy5hY3Rpb24pICYmIGFjdGlvbk9wdGlvbnMuYWN0aW9uKCk7XG4gICAgICAgICAgICBpbm5lclBvcHVwTW9kZWwuaXNGb2N1c2VkQ29udGVudCA9ICFpc1VzZXJBY3Rpb24gfHwgbGlzdE1vZGVsLnNob3dGaWx0ZXI7XG4gICAgICAgICAgICBpbm5lclBvcHVwTW9kZWwudG9nZ2xlVmlzaWJpbGl0eSgpO1xuICAgICAgICAgICAgbGlzdE1vZGVsLnNjcm9sbFRvU2VsZWN0ZWRJdGVtKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgdmFyIG5ld0FjdGlvbiA9IG5ldyBBY3Rpb24obmV3QWN0aW9uT3B0aW9ucyk7XG4gICAgbmV3QWN0aW9uLmRhdGEgPSBsaXN0TW9kZWw7XG4gICAgcmV0dXJuIG5ld0FjdGlvbjtcbn1cbmZ1bmN0aW9uIGdldEFjdGlvbkRyb3Bkb3duQnV0dG9uVGFyZ2V0KGNvbnRhaW5lcikge1xuICAgIHJldHVybiBjb250YWluZXIgPT09IG51bGwgfHwgY29udGFpbmVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250YWluZXIucHJldmlvdXNFbGVtZW50U2libGluZztcbn1cbnZhciBCYXNlQWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJhc2VBY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5pY29uU2l6ZSA9IDI0O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWaXNpYmxlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiZW5hYmxlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RW5hYmxlZCgpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlZCh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VBY3Rpb24ucHJvdG90eXBlLCBcImNvbXBvbmVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tcG9uZW50KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJsb2NUaXRsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9jVGl0bGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLnNldExvY1RpdGxlKHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwidGl0bGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpdGxlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VBY3Rpb24ucHJvdG90eXBlLCBcImNzc0NsYXNzZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNzc0NsYXNzZXNWYWx1ZSB8fCBfY29udGFpbmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bXCJkZWZhdWx0QWN0aW9uQmFyQ3NzXCJdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VBY3Rpb24ucHJvdG90eXBlLCBcImlzVmlzaWJsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZSAmJiB0aGlzLm1vZGUgIT09IFwicG9wdXBcIiAmJiB0aGlzLm1vZGUgIT09IFwicmVtb3ZlZFwiO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VBY3Rpb24ucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVkICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuZW5hYmxlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJjYW5TaHJpbmtcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuaWNvbk5hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiaGFzVGl0bGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAoKCh0aGlzLm1vZGUgIT0gXCJzbWFsbFwiICYmXG4gICAgICAgICAgICAgICAgKHRoaXMuc2hvd1RpdGxlIHx8IHRoaXMuc2hvd1RpdGxlID09PSB1bmRlZmluZWQpKSB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmljb25OYW1lKSAmJlxuICAgICAgICAgICAgICAgICEhdGhpcy50aXRsZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCYXNlQWN0aW9uLnByb3RvdHlwZS5nZXRBY3Rpb25CYXJJdGVtVGl0bGVDc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgX3V0aWxzX2Nzc0NsYXNzQnVpbGRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiQ3NzQ2xhc3NCdWlsZGVyXCJdKClcbiAgICAgICAgICAgIC5hcHBlbmQodGhpcy5jc3NDbGFzc2VzLml0ZW1UaXRsZSlcbiAgICAgICAgICAgIC5hcHBlbmQodGhpcy5jc3NDbGFzc2VzLml0ZW1UaXRsZVdpdGhJY29uLCAhIXRoaXMuaWNvbk5hbWUpXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICB9O1xuICAgIEJhc2VBY3Rpb24ucHJvdG90eXBlLmdldEFjdGlvbkJhckl0ZW1Dc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgX3V0aWxzX2Nzc0NsYXNzQnVpbGRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiQ3NzQ2xhc3NCdWlsZGVyXCJdKClcbiAgICAgICAgICAgIC5hcHBlbmQodGhpcy5jc3NDbGFzc2VzLml0ZW0pXG4gICAgICAgICAgICAuYXBwZW5kKHRoaXMuY3NzQ2xhc3Nlcy5pdGVtV2l0aFRpdGxlLCB0aGlzLmhhc1RpdGxlKVxuICAgICAgICAgICAgLmFwcGVuZCh0aGlzLmNzc0NsYXNzZXMuaXRlbUFzSWNvbiwgIXRoaXMuaGFzVGl0bGUpXG4gICAgICAgICAgICAuYXBwZW5kKHRoaXMuY3NzQ2xhc3Nlcy5pdGVtQWN0aXZlLCAhIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgLmFwcGVuZCh0aGlzLmNzc0NsYXNzZXMuaXRlbVByZXNzZWQsICEhdGhpcy5wcmVzc2VkKVxuICAgICAgICAgICAgLmFwcGVuZCh0aGlzLmlubmVyQ3NzKVxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgfTtcbiAgICBCYXNlQWN0aW9uLnByb3RvdHlwZS5nZXRBY3Rpb25Sb290Q3NzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IF91dGlsc19jc3NDbGFzc0J1aWxkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcIkNzc0NsYXNzQnVpbGRlclwiXSgpXG4gICAgICAgICAgICAuYXBwZW5kKFwic3YtYWN0aW9uXCIpXG4gICAgICAgICAgICAuYXBwZW5kKHRoaXMuY3NzKVxuICAgICAgICAgICAgLmFwcGVuZChcInN2LWFjdGlvbi0tc3BhY2VcIiwgdGhpcy5uZWVkU3BhY2UpXG4gICAgICAgICAgICAuYXBwZW5kKFwic3YtYWN0aW9uLS1oaWRkZW5cIiwgIXRoaXMuaXNWaXNpYmxlKVxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgfTtcbiAgICBCYXNlQWN0aW9uLnByb3RvdHlwZS5nZXRUb29sdGlwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b29sdGlwIHx8IHRoaXMudGl0bGU7XG4gICAgfTtcbiAgICBCYXNlQWN0aW9uLnByb3RvdHlwZS5nZXRJc1RydXN0ZWQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICBpZiAoISFhcmdzLm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBhcmdzLm9yaWdpbmFsRXZlbnQuaXNUcnVzdGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmdzLmlzVHJ1c3RlZDtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwidG9vbHRpcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwic2hvd1RpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJpbm5lckNzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiYWN0aXZlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJwcmVzc2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJkYXRhXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJwb3B1cE1vZGVsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJuZWVkU2VwYXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogXCJsYXJnZVwiIH0pXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwidmlzaWJsZUluZGV4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJkaXNhYmxlVGFiU3RvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiZGlzYWJsZVNocmlua1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiZGlzYWJsZUhpZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IGZhbHNlIH0pXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwibmVlZFNwYWNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJhcmlhQ2hlY2tlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiYXJpYUV4cGFuZGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBcImJ1dHRvblwiIH0pXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiYXJpYVJvbGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJwcm9wZXJ0eVwiXSkoKVxuICAgIF0sIEJhc2VBY3Rpb24ucHJvdG90eXBlLCBcImljb25OYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBCYXNlQWN0aW9uLnByb3RvdHlwZSwgXCJpY29uU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQmFzZUFjdGlvbi5wcm90b3R5cGUsIFwiY3NzXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIEJhc2VBY3Rpb247XG59KF9iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJCYXNlXCJdKSk7XG5cbnZhciBBY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBY3Rpb24oaW5uZXJJdGVtKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmlubmVySXRlbSA9IGlubmVySXRlbTtcbiAgICAgICAgX3RoaXMubG9jVGl0bGVDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IF90aGlzLmxvY1RpdGxlLnJlbmRlcmVkSHRtbDtcbiAgICAgICAgICAgIF90aGlzLnNldFByb3BlcnR5VmFsdWUoXCJfdGl0bGVcIiwgISF2YWwgPyB2YWwgOiB1bmRlZmluZWQpO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5sb2NUaXRsZSA9ICEhaW5uZXJJdGVtID8gaW5uZXJJdGVtW1wibG9jVGl0bGVcIl0gOiBudWxsO1xuICAgICAgICAvL09iamVjdC5hc3NpZ24odGhpcywgaXRlbSkgdG8gc3VwcG9ydCBJRTExXG4gICAgICAgIGlmICghIWlubmVySXRlbSkge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGlubmVySXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09IFwibG9jVGl0bGVcIikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpc1trZXldID0gaW5uZXJJdGVtW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIV90aGlzLmxvY1RpdGxlTmFtZSkge1xuICAgICAgICAgICAgX3RoaXMubG9jVGl0bGVDaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMucmVnaXN0ZXJGdW5jdGlvbk9uUHJvcGVydHlWYWx1ZUNoYW5nZWQoXCJfdGl0bGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmFpc2VVcGRhdGUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBfdGhpcy5sb2NTdHJDaGFuZ2VkSW5Qb3B1cE1vZGVsKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQWN0aW9uLnByb3RvdHlwZS5yYWlzZVVwZGF0ZSA9IGZ1bmN0aW9uIChpc1Jlc2V0SW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgaWYgKGlzUmVzZXRJbml0aWFsaXplZCA9PT0gdm9pZCAwKSB7IGlzUmVzZXRJbml0aWFsaXplZCA9IGZhbHNlOyB9XG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2sgJiYgdGhpcy51cGRhdGVDYWxsYmFjayhpc1Jlc2V0SW5pdGlhbGl6ZWQpO1xuICAgIH07XG4gICAgQWN0aW9uLnByb3RvdHlwZS5jcmVhdGVMb2NUaXRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlTG9jYWxpemFibGVTdHJpbmcoXCJ0aXRsZVwiLCB0aGlzLCB0cnVlKTtcbiAgICB9O1xuICAgIEFjdGlvbi5wcm90b3R5cGUuZ2V0TG9jVGl0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY1RpdGxlVmFsdWU7XG4gICAgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLnNldExvY1RpdGxlID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAoIXZhbCAmJiAhdGhpcy5sb2NUaXRsZVZhbHVlKSB7XG4gICAgICAgICAgICB2YWwgPSB0aGlzLmNyZWF0ZUxvY1RpdGxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhdGhpcy5sb2NUaXRsZVZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmxvY1RpdGxlVmFsdWUub25TdHJpbmdDaGFuZ2VkLnJlbW92ZSh0aGlzLmxvY1RpdGxlQ2hhbmdlZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2NUaXRsZVZhbHVlID0gdmFsO1xuICAgICAgICB0aGlzLmxvY1RpdGxlVmFsdWUub25TdHJpbmdDaGFuZ2VkLmFkZCh0aGlzLmxvY1RpdGxlQ2hhbmdlZCk7XG4gICAgICAgIHRoaXMubG9jVGl0bGVDaGFuZ2VkKCk7XG4gICAgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGl0bGU7XG4gICAgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLnNldFRpdGxlID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICB0aGlzLl90aXRsZSA9IHZhbDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY3Rpb24ucHJvdG90eXBlLCBcImxvY1RpdGxlTmFtZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jVGl0bGUubG9jYWxpemF0aW9uTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmxvY1RpdGxlLmxvY2FsaXphdGlvbk5hbWUgPSB2YWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLmxvY1N0cnNDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmxvY1N0cnNDaGFuZ2VkLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubG9jVG9vbHRpcENoYW5nZWQoKTtcbiAgICAgICAgdGhpcy5sb2NTdHJDaGFuZ2VkSW5Qb3B1cE1vZGVsKCk7XG4gICAgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLmxvY1N0ckNoYW5nZWRJblBvcHVwTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5wb3B1cE1vZGVsIHx8ICF0aGlzLnBvcHVwTW9kZWwuY29udGVudENvbXBvbmVudERhdGEgfHwgIXRoaXMucG9wdXBNb2RlbC5jb250ZW50Q29tcG9uZW50RGF0YS5tb2RlbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIG1vZGVsID0gdGhpcy5wb3B1cE1vZGVsLmNvbnRlbnRDb21wb25lbnREYXRhLm1vZGVsO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtb2RlbC5hY3Rpb25zKSkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbnMgPSBtb2RlbC5hY3Rpb25zO1xuICAgICAgICAgICAgYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhaXRlbS5sb2NTdHJzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmxvY1N0cnNDaGFuZ2VkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFjdGlvbi5wcm90b3R5cGUubG9jVG9vbHRpcENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5sb2NUb29sdGlwTmFtZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy50b29sdGlwID0gX3N1cnZleVN0cmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInN1cnZleUxvY2FsaXphdGlvblwiXS5nZXRTdHJpbmcodGhpcy5sb2NUb29sdGlwTmFtZSwgdGhpcy5sb2NUaXRsZS5sb2NhbGUpO1xuICAgIH07XG4gICAgLy9JTG9jYWxpemFibGVPd25lclxuICAgIEFjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5vd25lciA/IHRoaXMub3duZXIuZ2V0TG9jYWxlKCkgOiBcIlwiOyB9O1xuICAgIEFjdGlvbi5wcm90b3R5cGUuZ2V0TWFya2Rvd25IdG1sID0gZnVuY3Rpb24gKHRleHQsIG5hbWUpIHsgcmV0dXJuIHRoaXMub3duZXIgPyB0aGlzLm93bmVyLmdldE1hcmtkb3duSHRtbCh0ZXh0LCBuYW1lKSA6IHVuZGVmaW5lZDsgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLmdldFByb2Nlc3NlZFRleHQgPSBmdW5jdGlvbiAodGV4dCkgeyByZXR1cm4gdGhpcy5vd25lciA/IHRoaXMub3duZXIuZ2V0UHJvY2Vzc2VkVGV4dCh0ZXh0KSA6IHRleHQ7IH07XG4gICAgQWN0aW9uLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiB0aGlzLm93bmVyID8gdGhpcy5vd25lci5nZXRSZW5kZXJlcihuYW1lKSA6IG51bGw7IH07XG4gICAgQWN0aW9uLnByb3RvdHlwZS5nZXRSZW5kZXJlckNvbnRleHQgPSBmdW5jdGlvbiAobG9jU3RyKSB7IHJldHVybiB0aGlzLm93bmVyID8gdGhpcy5vd25lci5nZXRSZW5kZXJlckNvbnRleHQobG9jU3RyKSA6IGxvY1N0cjsgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHRoaXMuX3Zpc2libGUgPSB2YWw7XG4gICAgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLmdldFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aXNpYmxlO1xuICAgIH07XG4gICAgQWN0aW9uLnByb3RvdHlwZS5zZXRFbmFibGVkID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICB0aGlzLl9lbmFibGVkID0gdmFsO1xuICAgIH07XG4gICAgQWN0aW9uLnByb3RvdHlwZS5nZXRFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkSWYpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVkSWYoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gICAgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLnNldENvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50ID0gdmFsO1xuICAgIH07XG4gICAgQWN0aW9uLnByb3RvdHlwZS5nZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnQ7XG4gICAgfTtcbiAgICBBY3Rpb24ucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBNb2RlbCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cE1vZGVsLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLmxvY1RpdGxlVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubG9jVGl0bGVWYWx1ZS5vblN0cmluZ0NoYW5nZWQucmVtb3ZlKHRoaXMubG9jVGl0bGVDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMubG9jVGl0bGVDaGFuZ2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJwcm9wZXJ0eVwiXSkoKVxuICAgIF0sIEFjdGlvbi5wcm90b3R5cGUsIFwiaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJwcm9wZXJ0eVwiXSkoe1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgb25TZXQ6IGZ1bmN0aW9uIChfLCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQucmFpc2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICBdLCBBY3Rpb24ucHJvdG90eXBlLCBcIl92aXNpYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHJvcGVydHlcIl0pKHtcbiAgICAgICAgICAgIG9uU2V0OiBmdW5jdGlvbiAoXywgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmxvY1Rvb2x0aXBDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgXSwgQWN0aW9uLnByb3RvdHlwZSwgXCJsb2NUb29sdGlwTmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQWN0aW9uLnByb3RvdHlwZSwgXCJfZW5hYmxlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQWN0aW9uLnByb3RvdHlwZSwgXCJhY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJwcm9wZXJ0eVwiXSkoKVxuICAgIF0sIEFjdGlvbi5wcm90b3R5cGUsIFwiX2NvbXBvbmVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgQWN0aW9uLnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInByb3BlcnR5XCJdKSh7XG4gICAgICAgICAgICBvblNldDogZnVuY3Rpb24gKHZhbCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5sb2NUaXRsZVZhbHVlLnRleHQgPT09IHZhbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRhcmdldC5sb2NUaXRsZVZhbHVlLnRleHQgPSB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgXSwgQWN0aW9uLnByb3RvdHlwZSwgXCJfdGl0bGVcIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gQWN0aW9uO1xufShCYXNlQWN0aW9uKSk7XG5cbnZhciBBY3Rpb25Ecm9wZG93blZpZXdNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBY3Rpb25Ecm9wZG93blZpZXdNb2RlbChpdGVtKSB7XG4gICAgICAgIHRoaXMuaXRlbSA9IGl0ZW07XG4gICAgICAgIHRoaXMuZnVuY0tleSA9IFwic3YtZHJvcGRvd24tYWN0aW9uXCI7XG4gICAgICAgIHRoaXMuc2V0dXBQb3B1cENhbGxiYWNrcygpO1xuICAgIH1cbiAgICBBY3Rpb25Ecm9wZG93blZpZXdNb2RlbC5wcm90b3R5cGUuc2V0dXBQb3B1cENhbGxiYWNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHBvcHVwTW9kZWwgPSB0aGlzLnBvcHVwTW9kZWwgPSB0aGlzLml0ZW0ucG9wdXBNb2RlbDtcbiAgICAgICAgaWYgKCFwb3B1cE1vZGVsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwb3B1cE1vZGVsLnJlZ2lzdGVyUHJvcGVydHlDaGFuZ2VkSGFuZGxlcnMoW1wiaXNWaXNpYmxlXCJdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXBvcHVwTW9kZWwuaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaXRlbS5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pdGVtLnByZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLmZ1bmNLZXkpO1xuICAgIH07XG4gICAgQWN0aW9uRHJvcGRvd25WaWV3TW9kZWwucHJvdG90eXBlLnJlbW92ZVBvcHVwQ2FsbGJhY2tzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISF0aGlzLnBvcHVwTW9kZWwpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBNb2RlbC51bnJlZ2lzdGVyUHJvcGVydHlDaGFuZ2VkSGFuZGxlcnMoW1wiaXNWaXNpYmxlXCJdLCB0aGlzLmZ1bmNLZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBY3Rpb25Ecm9wZG93blZpZXdNb2RlbC5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVQb3B1cENhbGxiYWNrcygpO1xuICAgIH07XG4gICAgcmV0dXJuIEFjdGlvbkRyb3Bkb3duVmlld01vZGVsO1xufSgpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2FjdGlvbnMvYWRhcHRpdmUtY29udGFpbmVyLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2FjdGlvbnMvYWRhcHRpdmUtY29udGFpbmVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IEFkYXB0aXZlQWN0aW9uQ29udGFpbmVyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkFkYXB0aXZlQWN0aW9uQ29udGFpbmVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQWRhcHRpdmVBY3Rpb25Db250YWluZXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc19yZXNwb25zaXZpdHlfbWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvcmVzcG9uc2l2aXR5LW1hbmFnZXIgKi8gXCIuL3NyYy91dGlscy9yZXNwb25zaXZpdHktbWFuYWdlci50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FjdGlvbiAqLyBcIi4vc3JjL2FjdGlvbnMvYWN0aW9uLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29udGFpbmVyICovIFwiLi9zcmMvYWN0aW9ucy9jb250YWluZXIudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N1cnZleVN0cmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3N1cnZleVN0cmluZ3MgKi8gXCIuL3NyYy9zdXJ2ZXlTdHJpbmdzLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQWRhcHRpdmVBY3Rpb25Db250YWluZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQWRhcHRpdmVBY3Rpb25Db250YWluZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm1pblZpc2libGVJdGVtc0NvdW50ID0gMDtcbiAgICAgICAgX3RoaXMuaXNSZXNwb25zaXZlbmVzc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmRvdHNJdGVtID0gT2JqZWN0KF9hY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImNyZWF0ZURyb3Bkb3duQWN0aW9uTW9kZWxBZHZhbmNlZFwiXSkoe1xuICAgICAgICAgICAgaWQ6IFwiZG90c0l0ZW0taWRcIiArIEFkYXB0aXZlQWN0aW9uQ29udGFpbmVyLkNvbnRhaW5lcklEKyssXG4gICAgICAgICAgICBjc3M6IFwic3YtZG90c1wiLFxuICAgICAgICAgICAgaW5uZXJDc3M6IFwic3YtZG90c19faXRlbVwiLFxuICAgICAgICAgICAgaWNvbk5hbWU6IFwiaWNvbi1tb3JlXCIsXG4gICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHRvb2x0aXA6IF9zdXJ2ZXlTdHJpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJzdXJ2ZXlMb2NhbGl6YXRpb25cIl0uZ2V0U3RyaW5nKFwibW9yZVwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2VkOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmhpZGRlbkl0ZW1TZWxlY3RlZChpdGVtKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd1NlbGVjdGlvbjogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQWRhcHRpdmVBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmhpZGVJdGVtc0dyZWF0ZXJOID0gZnVuY3Rpb24gKHZpc2libGVJdGVtc0NvdW50KSB7XG4gICAgICAgIHZhciBhY3Rpb25zVG9IaWRlID0gdGhpcy5nZXRBY3Rpb25zVG9IaWRlKCk7XG4gICAgICAgIHZpc2libGVJdGVtc0NvdW50ID0gTWF0aC5tYXgodmlzaWJsZUl0ZW1zQ291bnQsIHRoaXMubWluVmlzaWJsZUl0ZW1zQ291bnQgLSAodGhpcy52aXNpYmxlQWN0aW9ucy5sZW5ndGggLSBhY3Rpb25zVG9IaWRlLmxlbmd0aCkpO1xuICAgICAgICB2YXIgaGlkZGVuSXRlbXMgPSBbXTtcbiAgICAgICAgYWN0aW9uc1RvSGlkZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAodmlzaWJsZUl0ZW1zQ291bnQgPD0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnJlbW92ZVByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ubW9kZSA9IFwicmVtb3ZlZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5tb2RlID0gXCJwb3B1cFwiO1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW5JdGVtcy5wdXNoKGl0ZW0uaW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aXNpYmxlSXRlbXNDb3VudC0tO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oaWRkZW5JdGVtc0xpc3RNb2RlbC5zZXRJdGVtcyhoaWRkZW5JdGVtcyk7XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0QWN0aW9uc1RvSGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZUFjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuICFhY3Rpb24uZGlzYWJsZUhpZGU7IH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEucmVtb3ZlUHJpb3JpdHkgfHwgMCAtIGIucmVtb3ZlUHJpb3JpdHkgfHwgMDsgfSk7XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0VmlzaWJsZUl0ZW1zQ291bnQgPSBmdW5jdGlvbiAoYXZhaWxhYmxlU2l6ZSkge1xuICAgICAgICB0aGlzLnZpc2libGVBY3Rpb25zLmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBhY3Rpb24uZGlzYWJsZUhpZGU7IH0pLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gYXZhaWxhYmxlU2l6ZSAtPSBhY3Rpb24ubWluRGltZW5zaW9uOyB9KTtcbiAgICAgICAgdmFyIGl0ZW1zU2l6ZXMgPSB0aGlzLmdldEFjdGlvbnNUb0hpZGUoKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ubWluRGltZW5zaW9uOyB9KTtcbiAgICAgICAgdmFyIGN1cnJTaXplID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtc1NpemVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjdXJyU2l6ZSArPSBpdGVtc1NpemVzW2ldO1xuICAgICAgICAgICAgaWYgKGN1cnJTaXplID4gYXZhaWxhYmxlU2l6ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9O1xuICAgIEFkYXB0aXZlQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVJdGVtTW9kZSA9IGZ1bmN0aW9uIChhdmFpbGFibGVTaXplLCBpdGVtc1NpemUpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy52aXNpYmxlQWN0aW9ucztcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSBpdGVtcy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICAgICAgICBpZiAoaXRlbXNTaXplID4gYXZhaWxhYmxlU2l6ZSAmJiAhaXRlbXNbaW5kZXhdLmRpc2FibGVTaHJpbmspIHtcbiAgICAgICAgICAgICAgICBpdGVtc1NpemUgLT0gaXRlbXNbaW5kZXhdLm1heERpbWVuc2lvbiAtIGl0ZW1zW2luZGV4XS5taW5EaW1lbnNpb247XG4gICAgICAgICAgICAgICAgaXRlbXNbaW5kZXhdLm1vZGUgPSBcInNtYWxsXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtc1tpbmRleF0ubW9kZSA9IFwibGFyZ2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbXNTaXplID4gYXZhaWxhYmxlU2l6ZSkge1xuICAgICAgICAgICAgdmFyIGhpZGFibGVJdGVtcyA9IHRoaXMudmlzaWJsZUFjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnJlbW92ZVByaW9yaXR5OyB9KTtcbiAgICAgICAgICAgIGhpZGFibGVJdGVtcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLnJlbW92ZVByaW9yaXR5IC0gYi5yZW1vdmVQcmlvcml0eTsgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgaGlkYWJsZUl0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1NpemUgPiBhdmFpbGFibGVTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zU2l6ZSAtPSBpdGVtc1tpbmRleF0uZGlzYWJsZVNocmluayA/IGhpZGFibGVJdGVtc1tpbmRleF0ubWF4RGltZW5zaW9uIDogaGlkYWJsZUl0ZW1zW2luZGV4XS5taW5EaW1lbnNpb247XG4gICAgICAgICAgICAgICAgICAgIGhpZGFibGVJdGVtc1tpbmRleF0ubW9kZSA9IFwicmVtb3ZlZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFkYXB0aXZlQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZSwgXCJoaWRkZW5JdGVtc0xpc3RNb2RlbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG90c0l0ZW0uZGF0YTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEFkYXB0aXZlQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZS5oaWRkZW5JdGVtU2VsZWN0ZWQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAoISFpdGVtICYmIHR5cGVvZiBpdGVtLmFjdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBpdGVtLmFjdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUub25TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi51cGRhdGVDYWxsYmFjayA9IGZ1bmN0aW9uIChpc1Jlc2V0SW5pdGlhbGl6ZWQpIHsgcmV0dXJuIF90aGlzLnJhaXNlVXBkYXRlKGlzUmVzZXRJbml0aWFsaXplZCk7IH07IH0pO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm9uU2V0LmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUub25QdXNoID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaXRlbS51cGRhdGVDYWxsYmFjayA9IGZ1bmN0aW9uIChpc1Jlc2V0SW5pdGlhbGl6ZWQpIHsgcmV0dXJuIF90aGlzLnJhaXNlVXBkYXRlKGlzUmVzZXRJbml0aWFsaXplZCk7IH07XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUub25QdXNoLmNhbGwodGhpcywgaXRlbSk7XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0UmVuZGVyZWRBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5hY3Rpb25zLmxlbmd0aCA9PT0gMSAmJiAhIXRoaXMuYWN0aW9uc1swXS5pY29uTmFtZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGlvbnM7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbnMuY29uY2F0KFt0aGlzLmRvdHNJdGVtXSk7XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUucmFpc2VVcGRhdGUgPSBmdW5jdGlvbiAoaXNSZXNldEluaXRpYWxpemVkKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1Jlc3BvbnNpdmVuZXNzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmFpc2VVcGRhdGUuY2FsbCh0aGlzLCBpc1Jlc2V0SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZml0ID0gZnVuY3Rpb24gKGRpbWVuc2lvbiwgZG90c0l0ZW1TaXplKSB7XG4gICAgICAgIGlmIChkaW1lbnNpb24gPD0gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5kb3RzSXRlbS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5TaXplID0gMDtcbiAgICAgICAgdmFyIG1heFNpemUgPSAwO1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnZpc2libGVBY3Rpb25zO1xuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBtaW5TaXplICs9IGl0ZW0ubWluRGltZW5zaW9uO1xuICAgICAgICAgICAgbWF4U2l6ZSArPSBpdGVtLm1heERpbWVuc2lvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChkaW1lbnNpb24gPj0gbWF4U2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRBY3Rpb25zTW9kZShcImxhcmdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpbWVuc2lvbiA8IG1pblNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aW9uc01vZGUoXCJzbWFsbFwiKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUl0ZW1zR3JlYXRlck4odGhpcy5nZXRWaXNpYmxlSXRlbXNDb3VudChkaW1lbnNpb24gLSBkb3RzSXRlbVNpemUpKTtcbiAgICAgICAgICAgIHRoaXMuZG90c0l0ZW0udmlzaWJsZSA9ICEhdGhpcy5oaWRkZW5JdGVtc0xpc3RNb2RlbC5hY3Rpb25zLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSXRlbU1vZGUoZGltZW5zaW9uLCBtYXhTaXplKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQWRhcHRpdmVBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmluaXRSZXNwb25zaXZpdHlNYW5hZ2VyID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgZGVsYXllZFVwZGF0ZUZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2l2aXR5TWFuYWdlciA9IG5ldyBfdXRpbHNfcmVzcG9uc2l2aXR5X21hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlJlc3BvbnNpdml0eU1hbmFnZXJcIl0oY29udGFpbmVyLCB0aGlzLCBcIjpzY29wZSA+IC5zdi1hY3Rpb246bm90KC5zdi1kb3RzKSA+IC5zdi1hY3Rpb25fX2NvbnRlbnRcIiwgbnVsbCwgZGVsYXllZFVwZGF0ZUZ1bmN0aW9uKTtcbiAgICB9O1xuICAgIEFkYXB0aXZlQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZS5yZXNldFJlc3BvbnNpdml0eU1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghIXRoaXMucmVzcG9uc2l2aXR5TWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5yZXNwb25zaXZpdHlNYW5hZ2VyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2l2aXR5TWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQWRhcHRpdmVBY3Rpb25Db250YWluZXIucHJvdG90eXBlLnNldEFjdGlvbnNNb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcbiAgICAgICAgdGhpcy5hY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgaWYgKG1vZGUgPT0gXCJzbWFsbFwiICYmIGFjdGlvbi5kaXNhYmxlU2hyaW5rKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGFjdGlvbi5tb2RlID0gbW9kZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuZG90c0l0ZW0uZGF0YS5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuZG90c0l0ZW0uZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnJlc2V0UmVzcG9uc2l2aXR5TWFuYWdlcigpO1xuICAgIH07XG4gICAgQWRhcHRpdmVBY3Rpb25Db250YWluZXIuQ29udGFpbmVySUQgPSAxO1xuICAgIHJldHVybiBBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lcjtcbn0oX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiQWN0aW9uQ29udGFpbmVyXCJdKSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9hY3Rpb25zL2NvbnRhaW5lci50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9hY3Rpb25zL2NvbnRhaW5lci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0QWN0aW9uQmFyQ3NzLCBBY3Rpb25Db250YWluZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZGVmYXVsdEFjdGlvbkJhckNzc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRlZmF1bHRBY3Rpb25CYXJDc3M7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkFjdGlvbkNvbnRhaW5lclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFjdGlvbkNvbnRhaW5lcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2pzb25vYmplY3QgKi8gXCIuL3NyYy9qc29ub2JqZWN0LnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9iYXNlICovIFwiLi9zcmMvYmFzZS50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FjdGlvbiAqLyBcIi4vc3JjL2FjdGlvbnMvYWN0aW9uLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc19jc3NDbGFzc0J1aWxkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL2Nzc0NsYXNzQnVpbGRlciAqLyBcIi4vc3JjL3V0aWxzL2Nzc0NsYXNzQnVpbGRlci50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbHNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL3V0aWxzICovIFwiLi9zcmMvdXRpbHMvdXRpbHMudHNcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5cblxuXG5cblxudmFyIGRlZmF1bHRBY3Rpb25CYXJDc3MgPSB7XG4gICAgcm9vdDogXCJzdi1hY3Rpb24tYmFyXCIsXG4gICAgZGVmYXVsdFNpemVNb2RlOiBcInN2LWFjdGlvbi1iYXItLWRlZmF1bHQtc2l6ZS1tb2RlXCIsXG4gICAgc21hbGxTaXplTW9kZTogXCJzdi1hY3Rpb24tYmFyLS1zbWFsbC1zaXplLW1vZGVcIixcbiAgICBpdGVtOiBcInN2LWFjdGlvbi1iYXItaXRlbVwiLFxuICAgIGl0ZW1XaXRoVGl0bGU6IFwiXCIsXG4gICAgaXRlbUFzSWNvbjogXCJzdi1hY3Rpb24tYmFyLWl0ZW0tLWljb25cIixcbiAgICBpdGVtQWN0aXZlOiBcInN2LWFjdGlvbi1iYXItaXRlbS0tYWN0aXZlXCIsXG4gICAgaXRlbVByZXNzZWQ6IFwic3YtYWN0aW9uLWJhci1pdGVtLS1wcmVzc2VkXCIsXG4gICAgaXRlbUljb246IFwic3YtYWN0aW9uLWJhci1pdGVtX19pY29uXCIsXG4gICAgaXRlbVRpdGxlOiBcInN2LWFjdGlvbi1iYXItaXRlbV9fdGl0bGVcIixcbiAgICBpdGVtVGl0bGVXaXRoSWNvbjogXCJzdi1hY3Rpb24tYmFyLWl0ZW1fX3RpdGxlLS13aXRoLWljb25cIixcbn07XG52YXIgQWN0aW9uQ29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBY3Rpb25Db250YWluZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQWN0aW9uQ29udGFpbmVyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2l6ZU1vZGUgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmdldE1hcmtkb3duSHRtbCA9IGZ1bmN0aW9uICh0ZXh0LCBuYW1lKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMubG9jT3duZXIgPyB0aGlzLmxvY093bmVyLmdldE1hcmtkb3duSHRtbCh0ZXh0LCBuYW1lKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmxvY093bmVyID8gdGhpcy5sb2NPd25lci5nZXRSZW5kZXJlcihuYW1lKSA6IG51bGw7XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmdldFJlbmRlcmVyQ29udGV4dCA9IGZ1bmN0aW9uIChsb2NTdHIpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5sb2NPd25lciA/IHRoaXMubG9jT3duZXIuZ2V0UmVuZGVyZXJDb250ZXh0KGxvY1N0cikgOiBsb2NTdHI7XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmdldFByb2Nlc3NlZFRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NPd25lciA/IHRoaXMubG9jT3duZXIuZ2V0UHJvY2Vzc2VkVGV4dCh0ZXh0KSA6IHRleHQ7XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmdldExvY2FsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5sb2NPd25lciA/IHRoaXMubG9jT3duZXIuZ2V0TG9jYWxlKCkgOiBcIlwiO1xuICAgIH07XG4gICAgQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZS5nZXRSZW5kZXJlZEFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbnM7XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmxvY1N0cnNDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmxvY1N0cnNDaGFuZ2VkLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5sb2NUaXRsZSlcbiAgICAgICAgICAgICAgICBpdGVtLmxvY1RpdGxlLnN0ckNoYW5nZWQoKTtcbiAgICAgICAgICAgIGl0ZW0ubG9jU3Ryc0NoYW5nZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLnJhaXNlVXBkYXRlID0gZnVuY3Rpb24gKGlzUmVzZXRJbml0aWFsaXplZCkge1xuICAgICAgICB0aGlzLmlzRW1wdHkgPSAhdGhpcy5hY3Rpb25zLnNvbWUoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gYWN0aW9uLnZpc2libGU7IH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbGxiYWNrICYmIHRoaXMudXBkYXRlQ2FsbGJhY2soaXNSZXNldEluaXRpYWxpemVkKTtcbiAgICB9O1xuICAgIEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUub25TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7IF90aGlzLnNldEFjdGlvbkNzc0NsYXNzZXMoaXRlbSk7IH0pO1xuICAgICAgICB0aGlzLnJhaXNlVXBkYXRlKHRydWUpO1xuICAgIH07XG4gICAgQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZS5vblB1c2ggPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnNldEFjdGlvbkNzc0NsYXNzZXMoaXRlbSk7XG4gICAgICAgIGl0ZW0ub3duZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLnJhaXNlVXBkYXRlKHRydWUpO1xuICAgIH07XG4gICAgQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGl0ZW0ub3duZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnJhaXNlVXBkYXRlKHRydWUpO1xuICAgIH07XG4gICAgQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZS5zZXRBY3Rpb25Dc3NDbGFzc2VzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaXRlbS5jc3NDbGFzc2VzID0gdGhpcy5jc3NDbGFzc2VzO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUsIFwiaGFzQWN0aW9uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmFjdGlvbnMgfHwgW10pLmxlbmd0aCA+IDA7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZSwgXCJyZW5kZXJlZEFjdGlvbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlbmRlcmVkQWN0aW9ucygpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUsIFwidmlzaWJsZUFjdGlvbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi52aXNpYmxlICE9PSBmYWxzZTsgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmdldFJvb3RDc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzaXplTW9kZUNsYXNzID0gdGhpcy5zaXplTW9kZSA9PT0gXCJzbWFsbFwiID8gdGhpcy5jc3NDbGFzc2VzLnNtYWxsU2l6ZU1vZGUgOiB0aGlzLmNzc0NsYXNzZXMuZGVmYXVsdFNpemVNb2RlO1xuICAgICAgICByZXR1cm4gbmV3IF91dGlsc19jc3NDbGFzc0J1aWxkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIkNzc0NsYXNzQnVpbGRlclwiXSgpLmFwcGVuZCh0aGlzLmNzc0NsYXNzZXMucm9vdCArICghIXNpemVNb2RlQ2xhc3MgPyBcIiBcIiArIHNpemVNb2RlQ2xhc3MgOiBcIlwiKSArICghIXRoaXMuY29udGFpbmVyQ3NzID8gXCIgXCIgKyB0aGlzLmNvbnRhaW5lckNzcyA6IFwiXCIpKVxuICAgICAgICAgICAgLmFwcGVuZCh0aGlzLmNzc0NsYXNzZXMucm9vdCArIFwiLS1lbXB0eVwiLCB0aGlzLmlzRW1wdHkpXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICB9O1xuICAgIEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0RGVmYXVsdENzc0NsYXNzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0QWN0aW9uQmFyQ3NzO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUsIFwiY3NzQ2xhc3Nlc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNzc0NsYXNzZXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlID0gdGhpcy5nZXREZWZhdWx0Q3NzQ2xhc3NlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNzc0NsYXNzZXNWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jb3B5Q3NzQ2xhc3Nlcyh0aGlzLmNzc0NsYXNzZXNWYWx1ZSwgdGhpcy5nZXREZWZhdWx0Q3NzQ2xhc3NlcygpKTtcbiAgICAgICAgICAgIE9iamVjdChfdXRpbHNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIm1lcmdlVmFsdWVzXCJdKSh2YWwsIHRoaXMuY3NzQ2xhc3Nlcyk7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0QWN0aW9uQ3NzQ2xhc3NlcyhhY3Rpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmNyZWF0ZUFjdGlvbiA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiAoaXRlbSBpbnN0YW5jZW9mIF9hY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkJhc2VBY3Rpb25cIl0gPyBpdGVtIDogbmV3IF9hY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkFjdGlvblwiXShpdGVtKSk7XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmFkZEFjdGlvbiA9IGZ1bmN0aW9uICh2YWwsIHNvcnRCeVZpc2libGVJbmRleCkge1xuICAgICAgICBpZiAoc29ydEJ5VmlzaWJsZUluZGV4ID09PSB2b2lkIDApIHsgc29ydEJ5VmlzaWJsZUluZGV4ID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgcmVzID0gdGhpcy5jcmVhdGVBY3Rpb24odmFsKTtcbiAgICAgICAgdGhpcy5hY3Rpb25zLnB1c2gocmVzKTtcbiAgICAgICAgdGhpcy5zb3J0SXRlbXMoKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuc29ydEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFjdGlvbnMgPSBbXVxuICAgICAgICAgICAgLmNvbmNhdCh0aGlzLmFjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLnZpc2libGVJbmRleCA9PT0gdW5kZWZpbmVkIHx8IGl0ZW0udmlzaWJsZUluZGV4ID49IDA7IH0pKVxuICAgICAgICAgICAgLnNvcnQoZnVuY3Rpb24gKGZpcnN0SXRlbSwgc2Vjb25kSXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0SXRlbS52aXNpYmxlSW5kZXggLSBzZWNvbmRJdGVtLnZpc2libGVJbmRleDtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLnNldEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBzb3J0QnlWaXNpYmxlSW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHNvcnRCeVZpc2libGVJbmRleCA9PT0gdm9pZCAwKSB7IHNvcnRCeVZpc2libGVJbmRleCA9IHRydWU7IH1cbiAgICAgICAgdGhpcy5hY3Rpb25zID0gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBfdGhpcy5jcmVhdGVBY3Rpb24oaXRlbSk7IH0pO1xuICAgICAgICBpZiAoc29ydEJ5VmlzaWJsZUluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRJdGVtcygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLmluaXRSZXNwb25zaXZpdHlNYW5hZ2VyID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgZGVsYXllZFVwZGF0ZUZ1bmN0aW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUucmVzZXRSZXNwb25zaXZpdHlNYW5hZ2VyID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9uc1tpXS5pZCA9PT0gaWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIEFjdGlvbkNvbnRhaW5lci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi5kaXNwb3NlKCk7IH0pO1xuICAgICAgICB0aGlzLmFjdGlvbnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5QXJyYXlcIl0pKHtcbiAgICAgICAgICAgIG9uU2V0OiBmdW5jdGlvbiAoXywgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lm9uU2V0KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25QdXNoOiBmdW5jdGlvbiAoaXRlbSwgaSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lm9uUHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlbW92ZTogZnVuY3Rpb24gKGl0ZW0sIGksIHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5vblJlbW92ZShpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICBdLCBBY3Rpb25Db250YWluZXIucHJvdG90eXBlLCBcImFjdGlvbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoe30pXG4gICAgXSwgQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZSwgXCJjb250YWluZXJDc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IGZhbHNlIH0pXG4gICAgXSwgQWN0aW9uQ29udGFpbmVyLnByb3RvdHlwZSwgXCJpc0VtcHR5XCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIEFjdGlvbkNvbnRhaW5lcjtcbn0oX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkJhc2VcIl0pKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2Jhc2UudHNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9iYXNlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogQmluZGluZ3MsIERlcGVuZGVuY2llcywgQ29tcHV0ZWRVcGRhdGVyLCBCYXNlLCBBcnJheUNoYW5nZXMsIEV2ZW50LCBFdmVudEJhc2UgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQmluZGluZ3NcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBCaW5kaW5nczsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiRGVwZW5kZW5jaWVzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRGVwZW5kZW5jaWVzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJDb21wdXRlZFVwZGF0ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBDb21wdXRlZFVwZGF0ZXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBCYXNlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJBcnJheUNoYW5nZXNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBcnJheUNoYW5nZXM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkV2ZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRXZlbnQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkV2ZW50QmFzZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEV2ZW50QmFzZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvY2FsaXphYmxlc3RyaW5nX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xvY2FsaXphYmxlc3RyaW5nICovIFwiLi9zcmMvbG9jYWxpemFibGVzdHJpbmcudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaGVscGVycyAqLyBcIi4vc3JjL2hlbHBlcnMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vanNvbm9iamVjdCAqLyBcIi4vc3JjL2pzb25vYmplY3QudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NldHRpbmdzICovIFwiLi9zcmMvc2V0dGluZ3MudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbmRpdGlvbnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uZGl0aW9ucyAqLyBcIi4vc3JjL2NvbmRpdGlvbnMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N1cnZleVN0cmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3VydmV5U3RyaW5ncyAqLyBcIi4vc3JjL3N1cnZleVN0cmluZ3MudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbnNvbGVfd2FybmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uc29sZS13YXJuaW5ncyAqLyBcIi4vc3JjL2NvbnNvbGUtd2FybmluZ3MudHNcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlsID0gZnJvbS5sZW5ndGgsIGogPSB0by5sZW5ndGg7IGkgPCBpbDsgaSsrLCBqKyspXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcbiAgICByZXR1cm4gdG87XG59O1xuXG5cblxuXG5cblxuXG52YXIgQmluZGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmluZGluZ3Mob2JqKSB7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG51bGw7XG4gICAgfVxuICAgIEJpbmRpbmdzLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJiaW5kaW5nc1wiO1xuICAgIH07XG4gICAgQmluZGluZ3MucHJvdG90eXBlLmdldE5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIHRoaXMuZmlsbFByb3BlcnRpZXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXNbaV0uaXNWaXNpYmxlKFwiXCIsIHRoaXMub2JqKSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKHRoaXMucHJvcGVydGllc1tpXS5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgQmluZGluZ3MucHJvdG90eXBlLmdldFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgdGhpcy5maWxsUHJvcGVydGllcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzLnB1c2godGhpcy5wcm9wZXJ0aWVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgQmluZGluZ3MucHJvdG90eXBlLnNldEJpbmRpbmcgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lLCB2YWx1ZU5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlcylcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMuZ2V0SnNvbigpO1xuICAgICAgICBpZiAob2xkVmFsdWUgPT09IHZhbHVlTmFtZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCEhdmFsdWVOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1twcm9wZXJ0eU5hbWVdID0gdmFsdWVOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWVzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy52YWx1ZXMpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub25DaGFuZ2VkSlNPTihvbGRWYWx1ZSk7XG4gICAgfTtcbiAgICBCaW5kaW5ncy5wcm90b3R5cGUuY2xlYXJCaW5kaW5nID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgICAgICB0aGlzLnNldEJpbmRpbmcocHJvcGVydHlOYW1lLCBcIlwiKTtcbiAgICB9O1xuICAgIEJpbmRpbmdzLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMudmFsdWVzKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnZhbHVlcylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBCaW5kaW5ncy5wcm90b3R5cGUuZ2V0VmFsdWVOYW1lQnlQcm9wZXJ0eU5hbWUgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZXMpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbcHJvcGVydHlOYW1lXTtcbiAgICB9O1xuICAgIEJpbmRpbmdzLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzQnlWYWx1ZU5hbWUgPSBmdW5jdGlvbiAodmFsdWVOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZXMpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMudmFsdWVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZXNba2V5XSA9PSB2YWx1ZU5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBCaW5kaW5ncy5wcm90b3R5cGUuZ2V0SnNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSgpKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy52YWx1ZXMpIHtcbiAgICAgICAgICAgIHJlc1trZXldID0gdGhpcy52YWx1ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgQmluZGluZ3MucHJvdG90eXBlLnNldEpzb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5nZXRKc29uKCk7XG4gICAgICAgIHRoaXMudmFsdWVzID0gbnVsbDtcbiAgICAgICAgaWYgKCEhdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1trZXldID0gdmFsdWVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uQ2hhbmdlZEpTT04ob2xkVmFsdWUpO1xuICAgIH07XG4gICAgQmluZGluZ3MucHJvdG90eXBlLmZpbGxQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgdmFyIG9ialByb3BlcnRpZXMgPSBfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU2VyaWFsaXplclwiXS5nZXRQcm9wZXJ0aWVzQnlPYmoodGhpcy5vYmopO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9ialByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChvYmpQcm9wZXJ0aWVzW2ldLmlzQmluZGFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMucHVzaChvYmpQcm9wZXJ0aWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQmluZGluZ3MucHJvdG90eXBlLm9uQ2hhbmdlZEpTT04gPSBmdW5jdGlvbiAob2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICB0aGlzLm9iai5vbkJpbmRpbmdDaGFuZ2VkKG9sZFZhbHVlLCB0aGlzLmdldEpzb24oKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCaW5kaW5ncztcbn0oKSk7XG5cbnZhciBEZXBlbmRlbmNpZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVwZW5kZW5jaWVzKGN1cnJlbnREZXBlbmRlbmN5LCB0YXJnZXQsIHByb3BlcnR5KSB7XG4gICAgICAgIHRoaXMuY3VycmVudERlcGVuZGVuY3kgPSBjdXJyZW50RGVwZW5kZW5jeTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eTtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5pZCA9IFwiXCIgKyAoKytEZXBlbmRlbmNpZXMuRGVwZW5kZW5jaWVzQ291bnQpO1xuICAgIH1cbiAgICBEZXBlbmRlbmNpZXMucHJvdG90eXBlLmFkZERlcGVuZGVuY3kgPSBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IHRhcmdldCAmJiB0aGlzLnByb3BlcnR5ID09PSBwcm9wZXJ0eSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuZGVwZW5kZW5jaWVzLnNvbWUoZnVuY3Rpb24gKGRlcGVuZGVuY3kpIHsgcmV0dXJuIGRlcGVuZGVuY3kub2JqID09PSB0YXJnZXQgJiYgZGVwZW5kZW5jeS5wcm9wID09PSBwcm9wZXJ0eTsgfSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzLnB1c2goe1xuICAgICAgICAgICAgb2JqOiB0YXJnZXQsXG4gICAgICAgICAgICBwcm9wOiBwcm9wZXJ0eSxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkXG4gICAgICAgIH0pO1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXJQcm9wZXJ0eUNoYW5nZWRIYW5kbGVycyhbcHJvcGVydHldLCB0aGlzLmN1cnJlbnREZXBlbmRlbmN5LCB0aGlzLmlkKTtcbiAgICB9O1xuICAgIERlcGVuZGVuY2llcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMuZm9yRWFjaChmdW5jdGlvbiAoZGVwZW5kZW5jeSkge1xuICAgICAgICAgICAgZGVwZW5kZW5jeS5vYmoudW5yZWdpc3RlclByb3BlcnR5Q2hhbmdlZEhhbmRsZXJzKFtkZXBlbmRlbmN5LnByb3BdLCBkZXBlbmRlbmN5LmlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHRoaXMuY3VycmVudERlcGVuZGVuY3kgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBEZXBlbmRlbmNpZXMuRGVwZW5kZW5jaWVzQ291bnQgPSAwO1xuICAgIHJldHVybiBEZXBlbmRlbmNpZXM7XG59KCkpO1xuXG52YXIgQ29tcHV0ZWRVcGRhdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbXB1dGVkVXBkYXRlcihfdXBkYXRlcikge1xuICAgICAgICB0aGlzLl91cGRhdGVyID0gX3VwZGF0ZXI7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnR5cGUgPSBDb21wdXRlZFVwZGF0ZXIuQ29tcHV0ZWRVcGRhdGVyVHlwZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbXB1dGVkVXBkYXRlci5wcm90b3R5cGUsIFwidXBkYXRlclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb21wdXRlZFVwZGF0ZXIucHJvdG90eXBlLnNldERlcGVuZGVuY2llcyA9IGZ1bmN0aW9uIChkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgdGhpcy5jbGVhckRlcGVuZGVuY2llcygpO1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IGRlcGVuZGVuY2llcztcbiAgICB9O1xuICAgIENvbXB1dGVkVXBkYXRlci5wcm90b3R5cGUuZ2V0RGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXBlbmRlbmNpZXM7XG4gICAgfTtcbiAgICBDb21wdXRlZFVwZGF0ZXIucHJvdG90eXBlLmNsZWFyRGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21wdXRlZFVwZGF0ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJEZXBlbmRlbmNpZXMoKTtcbiAgICB9O1xuICAgIENvbXB1dGVkVXBkYXRlci5Db21wdXRlZFVwZGF0ZXJUeXBlID0gXCJfX2RlcGVuZGVuY3lfY29tcHV0ZWRcIjtcbiAgICByZXR1cm4gQ29tcHV0ZWRVcGRhdGVyO1xufSgpKTtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgZm9yIGFsbCBTdXJ2ZXlKUyBvYmplY3RzLlxuICovXG52YXIgQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCYXNlKCkge1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IHt9O1xuICAgICAgICB0aGlzLnByb3BlcnR5SGFzaCA9IEJhc2UuY3JlYXRlUHJvcGVydGllc0hhc2goKTtcbiAgICAgICAgdGhpcy5ldmVudExpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5pc0xvYWRpbmdGcm9tSnNvblZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9hZGluZ093bmVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gYSBwcm9wZXJ0eSBvZiB0aGlzIFN1cnZleUpTIG9iamVjdCBoYXMgY2hhbmdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUGFyYW1ldGVyczpcbiAgICAgICAgICpcbiAgICAgICAgICogLSBgc2VuZGVyYDogYHRoaXNgXFxcbiAgICAgICAgICogQSBTdXJ2ZXlKUyBvYmplY3Qgd2hvc2UgcHJvcGVydHkgaGFzIGNoYW5nZWQuXG4gICAgICAgICAqIC0gYG9wdGlvbnMubmFtZWA6IGBzdHJpbmdgXFxcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhlIGNoYW5nZWQgcHJvcGVydHkuXG4gICAgICAgICAqIC0gYG9wdGlvbnMubmV3VmFsdWVgOiBgYW55YFxcXG4gICAgICAgICAqIEEgbmV3IHZhbHVlIGZvciB0aGUgcHJvcGVydHkuXG4gICAgICAgICAqIC0gYG9wdGlvbnMub2xkVmFsdWVgOiBgYW55YFxcXG4gICAgICAgICAqIEFuIG9sZCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuIElmIHRoZSBwcm9wZXJ0eSBpcyBhbiBhcnJheSwgYG9sZFZhbHVlYCBjb250YWlucyB0aGUgc2FtZSBhcnJheSBhcyBgbmV3VmFsdWVgIGRvZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkID0gdGhpcy5hZGRFdmVudCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiBhbiBbYEl0ZW1WYWx1ZWBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vaXRlbXZhbHVlKSBwcm9wZXJ0eSBpcyBjaGFuZ2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQYXJhbWV0ZXJzOlxuICAgICAgICAgKlxuICAgICAgICAgKiAtIGBzZW5kZXJgOiBgdGhpc2BcXFxuICAgICAgICAgKiBBIFN1cnZleUpTIG9iamVjdCB3aG9zZSBwcm9wZXJ0eSBjb250YWlucyBhbiBhcnJheSBvZiBgSXRlbVZhbHVlYCBvYmplY3RzLlxuICAgICAgICAgKiAtIGBvcHRpb25zLm9iamA6IFtgSXRlbVZhbHVlYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9pdGVtdmFsdWUpXFxcbiAgICAgICAgICogQW4gYEl0ZW1WYWx1ZWAgb2JqZWN0LlxuICAgICAgICAgKiAtIGBvcHRpb25zLnByb3BlcnR5TmFtZWA6IGBzdHJpbmdgXFxcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHdoaWNoIGFuIGFycmF5IG9mIGBJdGVtVmFsdWVgIG9iamVjdHMgaXMgYXNzaWduZWQgKGZvciBleGFtcGxlLCBgXCJjaG9pY2VzXCJgIG9yIGBcInJvd3NcImApLlxuICAgICAgICAgKiAtIGBvcHRpb25zLm5hbWVgOiBgXCJ0ZXh0XCJgIHwgYFwidmFsdWVcImBcXFxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgY2hhbmdlZCBwcm9wZXJ0eS5cbiAgICAgICAgICogLSBgb3B0aW9ucy5uZXdWYWx1ZWA6IGBhbnlgXFxcbiAgICAgICAgICogQSBuZXcgdmFsdWUgZm9yIHRoZSBwcm9wZXJ0eS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25JdGVtVmFsdWVQcm9wZXJ0eUNoYW5nZWQgPSB0aGlzLmFkZEV2ZW50KCk7XG4gICAgICAgIHRoaXMuaXNDcmVhdGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuYmluZGluZ3NWYWx1ZSA9IG5ldyBCaW5kaW5ncyh0aGlzKTtcbiAgICAgICAgX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uXCJdLmNyZWF0ZVByb3BlcnRpZXModGhpcyk7XG4gICAgICAgIHRoaXMub25CYXNlQ3JlYXRpbmcoKTtcbiAgICAgICAgdGhpcy5pc0NyZWF0aW5nID0gZmFsc2U7XG4gICAgfVxuICAgIEJhc2UuZmluaXNoQ29sbGVjdERlcGVuZGVuY2llcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlcHMgPSBCYXNlLmN1cnJlbnREZXBlbmRlbmNpcztcbiAgICAgICAgQmFzZS5jdXJyZW50RGVwZW5kZW5jaXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBkZXBzO1xuICAgIH07XG4gICAgQmFzZS5zdGFydENvbGxlY3REZXBlbmRlbmNpZXMgPSBmdW5jdGlvbiAodXBkYXRlciwgdGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgICAgICBpZiAoQmFzZS5jdXJyZW50RGVwZW5kZW5jaXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdCB0byBjb2xsZWN0IG5lc3RlZCBkZXBlbmRlbmNpZXMuIE5lc3RlZCBkZXBlbmRlbmNpZXMgYXJlIG5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIEJhc2UuY3VycmVudERlcGVuZGVuY2lzID0gbmV3IERlcGVuZGVuY2llcyh1cGRhdGVyLCB0YXJnZXQsIHByb3BlcnR5KTtcbiAgICB9O1xuICAgIEJhc2UuY29sbGVjdERlcGVuZGVuY3kgPSBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgICAgICBpZiAoQmFzZS5jdXJyZW50RGVwZW5kZW5jaXMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgQmFzZS5jdXJyZW50RGVwZW5kZW5jaXMuYWRkRGVwZW5kZW5jeSh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlLCBcImNvbW1lbnRTdWZmaXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcInNldHRpbmdzXCJdLmNvbW1lbnRTdWZmaXg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJzZXR0aW5nc1wiXS5jb21tZW50U3VmZml4ID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2UsIFwiY29tbWVudFByZWZpeFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEJhc2UuY29tbWVudFN1ZmZpeDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBCYXNlLmNvbW1lbnRTdWZmaXggPSB2YWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBhIHBhc3NlZCBgdmFsdWVgIGlzIGFuIGVtcHR5IHN0cmluZywgYXJyYXksIG9yIG9iamVjdCBvciBpZiBpdCBlcXVhbHMgdG8gYHVuZGVmaW5lZGAgb3IgYG51bGxgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAgICAgKiBAcGFyYW0gdHJpbVN0cmluZyAqKE9wdGlvbmFsKSogV2hlbiB0aGlzIHBhcmFtZXRlciBpcyBgdHJ1ZWAsIHRoZSBtZXRob2QgaWdub3JlcyB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMgYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nIHZhbHVlLiBQYXNzIGBmYWxzZWAgdG8gZGlzYWJsZSB0aGlzIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgQmFzZS5wcm90b3R5cGUuaXNWYWx1ZUVtcHR5ID0gZnVuY3Rpb24gKHZhbHVlLCB0cmltU3RyaW5nKSB7XG4gICAgICAgIGlmICh0cmltU3RyaW5nID09PSB2b2lkIDApIHsgdHJpbVN0cmluZyA9IHRydWU7IH1cbiAgICAgICAgaWYgKHRyaW1TdHJpbmcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy50cmltVmFsdWUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiSGVscGVyc1wiXS5pc1ZhbHVlRW1wdHkodmFsdWUpO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBpZiAoIW9iailcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCB8fCBvYmouaXNEaXNwb3NlZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0VHlwZSgpICE9IG9iai5nZXRUeXBlKCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLmVxdWFsc0NvcmUob2JqKTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmVxdWFsc0NvcmUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICh0aGlzLm5hbWUgIT09IG9iai5uYW1lKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkhlbHBlcnNcIl0uaXNUd29WYWx1ZUVxdWFscyh0aGlzLnRvSlNPTigpLCBvYmoudG9KU09OKCksIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS50cmltVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCEhdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZykpXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudHJpbSgpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5pc1Byb3BlcnR5RW1wdHkgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9PSBcIlwiICYmIHRoaXMuaXNWYWx1ZUVtcHR5KHZhbHVlKTtcbiAgICB9O1xuICAgIEJhc2UuY3JlYXRlUHJvcGVydGllc0hhc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ldmVudExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0W2ldLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblByb3BlcnR5VmFsdWVDaGFuZ2VkQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZFZhbHVlID0gdHJ1ZTtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5kZXBlbmRlbmNpZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gX3RoaXMuZGVwZW5kZW5jaWVzW2tleV0uZGlzcG9zZSgpOyB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlLnByb3RvdHlwZSwgXCJpc0Rpc3Bvc2VkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0Rpc3Bvc2VkVmFsdWUgPT09IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCYXNlLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBFdmVudEJhc2UoKTtcbiAgICAgICAgdGhpcy5ldmVudExpc3QucHVzaChyZXMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUub25CYXNlQ3JlYXRpbmcgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgb2JqZWN0IHR5cGUgYXMgaXQgaXMgdXNlZCBpbiB0aGUgSlNPTiBzY2hlbWEuXG4gICAgICovXG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiYmFzZVwiO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGZpbmQgb3V0IGlmIHRoZSBjdXJyZW50IG9iamVjdCBpcyBvZiBhIGdpdmVuIGB0eXBlTmFtZWAgb3IgaW5oZXJpdGVkIGZyb20gaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZU5hbWUgT25lIG9mIHRoZSB2YWx1ZXMgbGlzdGVkIGluIHRoZSBbZ2V0VHlwZSgpXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL3F1ZXN0aW9uI2dldFR5cGUpIGRlc2NyaXB0aW9uLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgY3VycmVudCBvYmplY3QgaXMgb2YgYSBnaXZlbiBgdHlwZU5hbWVgIG9yIGluaGVyaXRlZCBmcm9tIGl0LlxuICAgICAqIEBzZWUgZ2V0VHlwZVxuICAgICAqL1xuICAgIEJhc2UucHJvdG90eXBlLmlzRGVzY2VuZGFudE9mID0gZnVuY3Rpb24gKHR5cGVOYW1lKSB7XG4gICAgICAgIHJldHVybiBfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU2VyaWFsaXplclwiXS5pc0Rlc2NlbmRhbnRPZih0aGlzLmdldFR5cGUoKSwgdHlwZU5hbWUpO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0U3VydmV5ID0gZnVuY3Rpb24gKGlzTGl2ZSkge1xuICAgICAgICBpZiAoaXNMaXZlID09PSB2b2lkIDApIHsgaXNMaXZlID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZS5wcm90b3R5cGUsIFwiaXNEZXNpZ25Nb2RlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzdXJ2ZXkgaXMgYmVpbmcgZGVzaWduZWQgaW4gU3VydmV5IENyZWF0b3IuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdXJ2ZXkgPSB0aGlzLmdldFN1cnZleSgpO1xuICAgICAgICAgICAgcmV0dXJuICEhc3VydmV5ICYmIHN1cnZleS5pc0Rlc2lnbk1vZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZS5wcm90b3R5cGUsIFwiaXNEZXNpZ25Nb2RlVjJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcInNldHRpbmdzXCJdLnN1cHBvcnRDcmVhdG9yVjIgJiYgdGhpcy5pc0Rlc2lnbk1vZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZS5wcm90b3R5cGUsIFwiaW5TdXJ2ZXlcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBpcyBpbmNsdWRlZCBpbiBhIHN1cnZleS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBwcm9wZXJ0eSBtYXkgcmV0dXJuIGBmYWxzZWAsIGZvciBleGFtcGxlLCB3aGVuIHlvdSBbY3JlYXRlIGEgc3VydmV5IG1vZGVsIGR5bmFtaWNhbGx5XShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2Rlc2lnbi1zdXJ2ZXktY3JlYXRlLWEtc2ltcGxlLXN1cnZleSNjcmVhdGUtb3ItY2hhbmdlLWEtc3VydmV5LW1vZGVsLWR5bmFtaWNhbGx5KS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRTdXJ2ZXkodHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZS5wcm90b3R5cGUsIFwiYmluZGluZ3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmdzVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCYXNlLnByb3RvdHlwZS5jaGVja0JpbmRpbmdzID0gZnVuY3Rpb24gKHZhbHVlTmFtZSwgdmFsdWUpIHsgfTtcbiAgICBCYXNlLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncyA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHZhciB2YWx1ZU5hbWUgPSB0aGlzLmJpbmRpbmdzLmdldFZhbHVlTmFtZUJ5UHJvcGVydHlOYW1lKHByb3BlcnR5TmFtZSk7XG4gICAgICAgIGlmICghIXZhbHVlTmFtZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCaW5kaW5nVmFsdWUodmFsdWVOYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZU5hbWUsIHZhbHVlKSB7IH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFR5cGUoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlLnByb3RvdHlwZSwgXCJpc0xvYWRpbmdGcm9tSnNvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGNvbmZpZ3VyYXRpb24gaXMgYmVpbmcgbG9hZGVkIGZyb20gSlNPTi5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNMb2FkaW5nRnJvbUpzb25WYWx1ZSB8fCB0aGlzLmdldElzTG9hZGluZ0Zyb21Kc29uKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCYXNlLnByb3RvdHlwZS5nZXRJc0xvYWRpbmdGcm9tSnNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5sb2FkaW5nT3duZXIgJiYgdGhpcy5sb2FkaW5nT3duZXIuaXNMb2FkaW5nRnJvbUpzb24pXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNMb2FkaW5nRnJvbUpzb25WYWx1ZTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLnN0YXJ0TG9hZGluZ0Zyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgdGhpcy5pc0xvYWRpbmdGcm9tSnNvblZhbHVlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5qc29uT2JqID0ganNvbjtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmVuZExvYWRpbmdGcm9tSnNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0xvYWRpbmdGcm9tSnNvblZhbHVlID0gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTiBvYmplY3QgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgY3VycmVudCBTdXJ2ZXlKUyBvYmplY3QuXG4gICAgICogQHNlZSBmcm9tSlNPTlxuICAgICAqL1xuICAgIEJhc2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkpzb25PYmplY3RcIl0oKS50b0pzb25PYmplY3QodGhpcywgb3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIGEgbmV3IGNvbmZpZ3VyYXRpb24gdG8gdGhlIGN1cnJlbnQgU3VydmV5SlMgb2JqZWN0LiBUaGlzIGNvbmZpZ3VyYXRpb24gaXMgdGFrZW4gZnJvbSBhIHBhc3NlZCBKU09OIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoZSBKU09OIG9iamVjdCBzaG91bGQgY29udGFpbiBvbmx5IHNlcmlhbGl6YWJsZSBwcm9wZXJ0aWVzIG9mIHRoaXMgU3VydmV5SlMgb2JqZWN0LiBFdmVudCBoYW5kbGVycyBhbmQgcHJvcGVydGllcyB0aGF0IGRvIG5vdCBiZWxvbmcgdG8gdGhlIFN1cnZleUpTIG9iamVjdCBhcmUgaWdub3JlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqc29uIEEgSlNPTiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHRoYXQgeW91IHdhbnQgdG8gYXBwbHkgdG8gdGhlIGN1cnJlbnQgU3VydmV5SlMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCB3aXRoIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMudmFsaWRhdGVQcm9wZXJ0eVZhbHVlcyBQYXNzIGB0cnVlYCBpZiB5b3Ugd2FudCB0byB2YWxpZGF0ZSBwcm9wZXJ0eSB2YWx1ZXMuIFVzZSB0aGUgW2Bqc29uRXJyb3JzYF0oI2pzb25FcnJvcnMpIGFycmF5IHRvIGFjY2VzcyB2YWxpZGF0aW9uIGVycm9ycy5cbiAgICAgKiBAc2VlIHRvSlNPTlxuICAgICAqL1xuICAgIEJhc2UucHJvdG90eXBlLmZyb21KU09OID0gZnVuY3Rpb24gKGpzb24sIG9wdGlvbnMpIHtcbiAgICAgICAgbmV3IF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJKc29uT2JqZWN0XCJdKCkudG9PYmplY3QoanNvbiwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub25TdXJ2ZXlMb2FkKCk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5vblN1cnZleUxvYWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3QgdGhhdCBoYXMgdGhlIHNhbWUgdHlwZSBhbmQgcHJvcGVydGllcyBhcyB0aGUgY3VycmVudCBTdXJ2ZXlKUyBvYmplY3QuXG4gICAgICovXG4gICAgQmFzZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjbG9uZWRPYmogPSBfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU2VyaWFsaXplclwiXS5jcmVhdGVDbGFzcyh0aGlzLmdldFR5cGUoKSk7XG4gICAgICAgIGNsb25lZE9iai5mcm9tSlNPTih0aGlzLnRvSlNPTigpKTtcbiAgICAgICAgcmV0dXJuIGNsb25lZE9iajtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBgSnNvbk9iamVjdFByb3BlcnR5YCBvYmplY3Qgd2l0aCBtZXRhZGF0YSBhYm91dCBhIHNlcmlhbGl6YWJsZSBwcm9wZXJ0eSB0aGF0IGJlbG9uZ3MgdG8gdGhlIGN1cnJlbnQgU3VydmV5SlMgb2JqZWN0LlxuICAgICAqXG4gICAgICogSWYgdGhlIHByb3BlcnR5IGlzIG5vdCBmb3VuZCwgdGhpcyBtZXRob2QgcmV0dXJucyBgbnVsbGAuXG4gICAgICogQHBhcmFtIHByb3BOYW1lIEEgcHJvcGVydHkgbmFtZS5cbiAgICAgKi9cbiAgICBCYXNlLnByb3RvdHlwZS5nZXRQcm9wZXJ0eUJ5TmFtZSA9IGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgICB2YXIgdHlwZSA9IHRoaXMuZ2V0VHlwZSgpO1xuICAgICAgICBpZiAoIXRoaXMuY2xhc3NNZXRhRGF0YSB8fCB0aGlzLmNsYXNzTWV0YURhdGEubmFtZSAhPT0gdHlwZSkge1xuICAgICAgICAgICAgdGhpcy5jbGFzc01ldGFEYXRhID0gX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlNlcmlhbGl6ZXJcIl0uZmluZENsYXNzKHR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhIXRoaXMuY2xhc3NNZXRhRGF0YSA/IHRoaXMuY2xhc3NNZXRhRGF0YS5maW5kUHJvcGVydHkocHJvcE5hbWUpIDogbnVsbDtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmlzUHJvcGVydHlWaXNpYmxlID0gZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgICAgIHZhciBwcm9wID0gdGhpcy5nZXRQcm9wZXJ0eUJ5TmFtZShwcm9wTmFtZSk7XG4gICAgICAgIHJldHVybiAhIXByb3AgPyBwcm9wLmlzVmlzaWJsZShcIlwiLCB0aGlzKSA6IGZhbHNlO1xuICAgIH07XG4gICAgQmFzZS5jcmVhdGVQcm9ncmVzc0luZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBxdWVzdGlvbkNvdW50OiAwLFxuICAgICAgICAgICAgYW5zd2VyZWRRdWVzdGlvbkNvdW50OiAwLFxuICAgICAgICAgICAgcmVxdWlyZWRRdWVzdGlvbkNvdW50OiAwLFxuICAgICAgICAgICAgcmVxdWlyZWRBbnN3ZXJlZFF1ZXN0aW9uQ291bnQ6IDAsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5nZXRQcm9ncmVzc0luZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBCYXNlLmNyZWF0ZVByb2dyZXNzSW5mbygpO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUubG9jYWxlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5sb2NTdHJzQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5hcnJheXNJbmZvKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hcnJheXNJbmZvKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmFycmF5c0luZm9ba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmlzSXRlbVZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyID0gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnIgJiYgISFCYXNlLml0ZW1WYWx1ZUxvY1N0ckNoYW5nZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNlLml0ZW1WYWx1ZUxvY1N0ckNoYW5nZWQoYXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhdGhpcy5sb2NhbGl6YWJsZVN0cmluZ3MpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmxvY2FsaXphYmxlU3RyaW5ncykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5nZXRMb2NhbGl6YWJsZVN0cmluZyhrZXkpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtKVxuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0ckNoYW5nZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSB3aXRoIGEgc3BlY2lmaWVkIG5hbWUuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgcHJvcGVydHkgaXMgbm90IGZvdW5kIG9yIGRvZXMgbm90IGhhdmUgYSB2YWx1ZSwgdGhpcyBtZXRob2QgcmV0dXJucyBlaXRoZXIgYHVuZGVmaW5lZGAsIGBkZWZhdWx0VmFsdWVgIHNwZWNpZmllZCBpbiB0aGUgcHJvcGVydHkgY29uZmlndXJhdGlvbiwgb3IgYSB2YWx1ZSBwYXNzZWQgYXMgdGhlIGBkZWZhdWx0VmFsdWVgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIEEgcHJvcGVydHkgbmFtZS5cbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlICooT3B0aW9uYWwpKiBBIHZhbHVlIHRvIHJldHVybiBpZiB0aGUgcHJvcGVydHkgaXMgbm90IGZvdW5kIG9yIGRvZXMgbm90IGhhdmUgYSB2YWx1ZS5cbiAgICAgKi9cbiAgICBCYXNlLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICBpZiAoZGVmYXVsdFZhbHVlID09PSB2b2lkIDApIHsgZGVmYXVsdFZhbHVlID0gbnVsbDsgfVxuICAgICAgICB2YXIgcmVzID0gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlV2l0aG91dERlZmF1bHQobmFtZSk7XG4gICAgICAgIGlmICh0aGlzLmlzUHJvcGVydHlFbXB0eShyZXMpKSB7XG4gICAgICAgICAgICB2YXIgbG9jU3RyID0gdGhpcy5sb2NhbGl6YWJsZVN0cmluZ3MgPyB0aGlzLmxvY2FsaXphYmxlU3RyaW5nc1tuYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChsb2NTdHIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY1N0ci50ZXh0O1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gbnVsbCAmJiBkZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgdmFyIHByb3BEZWZhdWx0VmFsdWUgPSB0aGlzLmdldERlZmF1bHRQcm9wZXJ0eVZhbHVlKG5hbWUpO1xuICAgICAgICAgICAgaWYgKHByb3BEZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcERlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0RGVmYXVsdFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZ2V0UHJvcGVydHlCeU5hbWUobmFtZSk7XG4gICAgICAgIGlmICghcHJvcCB8fCBwcm9wLmlzQ3VzdG9tICYmIHRoaXMuaXNDcmVhdGluZylcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBkVmFsdWUgPSBwcm9wLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJvcGVydHlFbXB0eShkVmFsdWUpICYmICFBcnJheS5pc0FycmF5KGRWYWx1ZSkpXG4gICAgICAgICAgICByZXR1cm4gZFZhbHVlO1xuICAgICAgICB2YXIgbG9jU3RyID0gdGhpcy5sb2NhbGl6YWJsZVN0cmluZ3MgPyB0aGlzLmxvY2FsaXphYmxlU3RyaW5nc1tuYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGxvY1N0ciAmJiBsb2NTdHIubG9jYWxpemF0aW9uTmFtZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExvY2FsaXphdGlvblN0cmluZyhsb2NTdHIubG9jYWxpemF0aW9uTmFtZSk7XG4gICAgICAgIGlmIChwcm9wLnR5cGUgPT0gXCJib29sZWFuXCIgfHwgcHJvcC50eXBlID09IFwic3dpdGNoXCIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChwcm9wLmlzQ3VzdG9tICYmICEhcHJvcC5vbkdldFZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuIHByb3Aub25HZXRWYWx1ZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmhhc0RlZmF1bHRQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdFByb3BlcnR5VmFsdWUobmFtZSkgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLnJlc2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBsb2NTdHIgPSB0aGlzLmxvY2FsaXphYmxlU3RyaW5ncyA/IHRoaXMubG9jYWxpemFibGVTdHJpbmdzW25hbWVdIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAobG9jU3RyKSB7XG4gICAgICAgICAgICB0aGlzLnNldExvY2FsaXphYmxlU3RyaW5nVGV4dChuYW1lLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgbG9jU3RyLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWUobmFtZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZVdpdGhvdXREZWZhdWx0ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZUNvcmUodGhpcy5wcm9wZXJ0eUhhc2gsIG5hbWUpO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZUNvcmUgPSBmdW5jdGlvbiAocHJvcGVydGllc0hhc2gsIG5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTG9hZGluZ0Zyb21Kc29uKSB7XG4gICAgICAgICAgICBCYXNlLmNvbGxlY3REZXBlbmRlbmN5KHRoaXMsIG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldFByb3BlcnR5VmFsdWVDb3JlSGFuZGxlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWVDb3JlSGFuZGxlcihwcm9wZXJ0aWVzSGFzaCwgbmFtZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzSGFzaFtuYW1lXTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmdlVmFsdWVGcm9tSGFzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydHlIYXNoW1widmFsdWVcIl07XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5zZXRQcm9wZXJ0eVZhbHVlQ29yZSA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzSGFzaCwgbmFtZSwgdmFsKSB7XG4gICAgICAgIGlmICh0aGlzLnNldFByb3BlcnR5VmFsdWVDb3JlSGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZUNvcmVIYW5kbGVyKHByb3BlcnRpZXNIYXNoLCBuYW1lLCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX2NvbnNvbGVfd2FybmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcIkNvbnNvbGVXYXJuaW5nc1wiXS5kaXNwb3NlZE9iamVjdENoYW5nZWRQcm9wZXJ0eShuYW1lLCB0aGlzLmdldFR5cGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcHJvcGVydGllc0hhc2hbbmFtZV0gPSB2YWw7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZS5wcm90b3R5cGUsIFwiaXNFZGl0aW5nU3VydmV5RWxlbWVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMuZ2V0U3VydmV5KCk7XG4gICAgICAgICAgICByZXR1cm4gISFzdXJ2ZXkgJiYgc3VydmV5LmlzRWRpdGluZ1N1cnZleUVsZW1lbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCYXNlLnByb3RvdHlwZS5pdGVyYXRlUHJvcGVydGllc0hhc2ggPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5wcm9wZXJ0eUhhc2gpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwidmFsdWVcIiAmJlxuICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nU3VydmV5RWxlbWVudCAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZnVuYyhfdGhpcy5wcm9wZXJ0eUhhc2gsIGtleSk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXNzaWducyBhIG5ldyB2YWx1ZSB0byBhIHNwZWNpZmllZCBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0gbmFtZSBBIHByb3BlcnR5IG5hbWUuXG4gICAgICogQHBhcmFtIHZhbCBBIG5ldyB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5LlxuICAgICAqL1xuICAgIEJhc2UucHJvdG90eXBlLnNldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiAobmFtZSwgdmFsKSB7XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzTG9hZGluZ0Zyb21Kc29uKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZ2V0UHJvcGVydHlCeU5hbWUobmFtZSk7XG4gICAgICAgICAgICBpZiAoISFwcm9wKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gcHJvcC5zZXR0aW5nVmFsdWUodGhpcywgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLmdldFByb3BlcnR5VmFsdWUobmFtZSk7XG4gICAgICAgIGlmIChvbGRWYWx1ZSAmJlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvbGRWYWx1ZSkgJiZcbiAgICAgICAgICAgICEhdGhpcy5hcnJheXNJbmZvICYmXG4gICAgICAgICAgICAoIXZhbCB8fCBBcnJheS5pc0FycmF5KHZhbCkpKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUd29WYWx1ZUVxdWFscyhvbGRWYWx1ZSwgdmFsKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXJyYXlQcm9wZXJ0eURpcmVjdGx5KG5hbWUsIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWVEaXJlY3RseShuYW1lLCB2YWwpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWRWYWx1ZSAmJiAhdGhpcy5pc1R3b1ZhbHVlRXF1YWxzKG9sZFZhbHVlLCB2YWwpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eVZhbHVlQ2hhbmdlZChuYW1lLCBvbGRWYWx1ZSwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuc2V0QXJyYXlQcm9wZXJ0eURpcmVjdGx5ID0gZnVuY3Rpb24gKG5hbWUsIHZhbCwgc2VuZE5vdGlmaWNhdGlvbikge1xuICAgICAgICBpZiAoc2VuZE5vdGlmaWNhdGlvbiA9PT0gdm9pZCAwKSB7IHNlbmROb3RpZmljYXRpb24gPSB0cnVlOyB9XG4gICAgICAgIHZhciBhcnJheUluZm8gPSB0aGlzLmFycmF5c0luZm9bbmFtZV07XG4gICAgICAgIHRoaXMuc2V0QXJyYXkobmFtZSwgdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpLCB2YWwsIGFycmF5SW5mbyA/IGFycmF5SW5mby5pc0l0ZW1WYWx1ZXMgOiBmYWxzZSwgYXJyYXlJbmZvID8gc2VuZE5vdGlmaWNhdGlvbiAmJiBhcnJheUluZm8ub25QdXNoIDogbnVsbCk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5zZXRQcm9wZXJ0eVZhbHVlRGlyZWN0bHkgPSBmdW5jdGlvbiAobmFtZSwgdmFsKSB7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZUNvcmUodGhpcy5wcm9wZXJ0eUhhc2gsIG5hbWUsIHZhbCk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5jbGVhclByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWVDb3JlKHRoaXMucHJvcGVydHlIYXNoLCBuYW1lLCBudWxsKTtcbiAgICAgICAgZGVsZXRlIHRoaXMucHJvcGVydHlIYXNoW25hbWVdO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUub25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZENhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSwgc2VuZGVyLCBhcnJheUNoYW5nZXMpIHsgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5pdGVtVmFsdWVQcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoaXRlbSwgbmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMub25JdGVtVmFsdWVQcm9wZXJ0eUNoYW5nZWQuZmlyZSh0aGlzLCB7XG4gICAgICAgICAgICBvYmo6IGl0ZW0sXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgb2xkVmFsdWU6IG9sZFZhbHVlLFxuICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbHVlLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBpdGVtLm93bmVyUHJvcGVydHlOYW1lLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLm9uUHJvcGVydHlWYWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiAobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7IH07XG4gICAgQmFzZS5wcm90b3R5cGUucHJvcGVydHlWYWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiAobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlLCBhcnJheUNoYW5nZXMsIHRhcmdldCkge1xuICAgICAgICBpZiAodGhpcy5pc0xvYWRpbmdGcm9tSnNvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy51cGRhdGVCaW5kaW5ncyhuYW1lLCBuZXdWYWx1ZSk7XG4gICAgICAgIHRoaXMub25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZChuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLmZpcmUodGhpcywge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIG9sZFZhbHVlOiBvbGRWYWx1ZSxcbiAgICAgICAgICAgIG5ld1ZhbHVlOiBuZXdWYWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZG9Qcm9wZXJ0eVZhbHVlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSwgYXJyYXlDaGFuZ2VzLCB0aGlzKTtcbiAgICAgICAgdGhpcy5jaGVja0NvbmRpdGlvblByb3BlcnR5Q2hhbmdlZChuYW1lKTtcbiAgICAgICAgaWYgKCF0aGlzLm9uUHJvcENoYW5nZUZ1bmN0aW9ucylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9uUHJvcENoYW5nZUZ1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMub25Qcm9wQ2hhbmdlRnVuY3Rpb25zW2ldLm5hbWUgPT0gbmFtZSlcbiAgICAgICAgICAgICAgICB0aGlzLm9uUHJvcENoYW5nZUZ1bmN0aW9uc1tpXS5mdW5jKG5ld1ZhbHVlLCBhcnJheUNoYW5nZXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5vbkJpbmRpbmdDaGFuZ2VkID0gZnVuY3Rpb24gKG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pc0xvYWRpbmdGcm9tSnNvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5kb1Byb3BlcnR5VmFsdWVDaGFuZ2VkQ2FsbGJhY2soXCJiaW5kaW5nc1wiLCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2UucHJvdG90eXBlLCBcImlzSW50ZXJuYWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEJhc2UucHJvdG90eXBlLmRvUHJvcGVydHlWYWx1ZUNoYW5nZWRDYWxsYmFjayA9IGZ1bmN0aW9uIChuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUsIGFycmF5Q2hhbmdlcywgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBmaXJlQ2FsbGJhY2sgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICBpZiAoISFvYmogJiYgISFvYmoub25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgb2JqLm9uUHJvcGVydHlWYWx1ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUsIHRhcmdldCwgYXJyYXlDaGFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNJbnRlcm5hbCkge1xuICAgICAgICAgICAgZmlyZUNhbGxiYWNrKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcztcbiAgICAgICAgdmFyIG5vdGlmaWVyID0gdGhpcy5nZXRTdXJ2ZXkoKTtcbiAgICAgICAgaWYgKCFub3RpZmllcilcbiAgICAgICAgICAgIG5vdGlmaWVyID0gdGhpcztcbiAgICAgICAgZmlyZUNhbGxiYWNrKG5vdGlmaWVyKTtcbiAgICAgICAgaWYgKG5vdGlmaWVyICE9PSB0aGlzKSB7XG4gICAgICAgICAgICBmaXJlQ2FsbGJhY2sodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmFkZEV4cHJlc3Npb25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCBvbkV4ZWN1dGUsIGNhblJ1bikge1xuICAgICAgICBpZiAoIXRoaXMuZXhwcmVzc2lvbkluZm8pIHtcbiAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkluZm8gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV4cHJlc3Npb25JbmZvW25hbWVdID0geyBvbkV4ZWN1dGU6IG9uRXhlY3V0ZSwgY2FuUnVuOiBjYW5SdW4gfTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmdldERhdGFGaWx0ZXJlZFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0RGF0YUZpbHRlcmVkUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUucnVuQ29uZGl0aW9uQ29yZSA9IGZ1bmN0aW9uICh2YWx1ZXMsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmV4cHJlc3Npb25JbmZvKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5leHByZXNzaW9uSW5mbykge1xuICAgICAgICAgICAgdGhpcy5ydW5Db25kaXRpb25JdGVtQ29yZShrZXksIHZhbHVlcywgcHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmNhblJ1bkNvbmRpdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc0Rlc2lnbk1vZGU7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5jaGVja0NvbmRpdGlvblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgICBpZiAoIXRoaXMuZXhwcmVzc2lvbkluZm8gfHwgIXRoaXMuZXhwcmVzc2lvbkluZm9bcHJvcE5hbWVdKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMuY2FuUnVuQ29uZGl0aW9ucygpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnJ1bkNvbmRpdGlvbkl0ZW1Db3JlKHByb3BOYW1lLCB0aGlzLmdldERhdGFGaWx0ZXJlZFZhbHVlcygpLCB0aGlzLmdldERhdGFGaWx0ZXJlZFByb3BlcnRpZXMoKSk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5ydW5Db25kaXRpb25JdGVtQ29yZSA9IGZ1bmN0aW9uIChwcm9wTmFtZSwgdmFsdWVzLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBpbmZvID0gdGhpcy5leHByZXNzaW9uSW5mb1twcm9wTmFtZV07XG4gICAgICAgIHZhciBleHByZXNzaW9uID0gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKHByb3BOYW1lKTtcbiAgICAgICAgaWYgKCFleHByZXNzaW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoISFpbmZvLmNhblJ1biAmJiAhaW5mby5jYW5SdW4odGhpcykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghaW5mby5ydW5uZXIpIHtcbiAgICAgICAgICAgIGluZm8ucnVubmVyID0gdGhpcy5jcmVhdGVFeHByZXNzaW9uUnVubmVyKGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgaW5mby5ydW5uZXIub25SdW5Db21wbGV0ZSA9IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBpbmZvLm9uRXhlY3V0ZShfdGhpcywgcmVzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5ydW5uZXIuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICAgIGluZm8ucnVubmVyLnJ1bih2YWx1ZXMsIHByb3BlcnRpZXMpO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZG9CZWZvcmVBc3luUnVuID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGlmICghdGhpcy5hc3luRXhwcmVzc2lvbkhhc2gpXG4gICAgICAgICAgICB0aGlzLmFzeW5FeHByZXNzaW9uSGFzaCA9IFtdO1xuICAgICAgICB2YXIgaXNDaGFuZ2VkID0gIXRoaXMuaXNBc3luY0V4cHJlc3Npb25SdW5uaW5nO1xuICAgICAgICB0aGlzLmFzeW5FeHByZXNzaW9uSGFzaFtpZF0gPSB0cnVlO1xuICAgICAgICBpZiAoaXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLm9uQXN5bmNSdW5uaW5nQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5kb0FmdGVyQXN5blJ1biA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAoISF0aGlzLmFzeW5FeHByZXNzaW9uSGFzaCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXN5bkV4cHJlc3Npb25IYXNoW2lkXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FzeW5jRXhwcmVzc2lvblJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQXN5bmNSdW5uaW5nQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5vbkFzeW5jUnVubmluZ0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2UucHJvdG90eXBlLCBcImlzQXN5bmNFeHByZXNzaW9uUnVubmluZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5hc3luRXhwcmVzc2lvbkhhc2ggJiYgT2JqZWN0LmtleXModGhpcy5hc3luRXhwcmVzc2lvbkhhc2gpLmxlbmd0aCA+IDA7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCYXNlLnByb3RvdHlwZS5jcmVhdGVFeHByZXNzaW9uUnVubmVyID0gZnVuY3Rpb24gKGV4cHJlc3Npb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBfY29uZGl0aW9uc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiRXhwcmVzc2lvblJ1bm5lclwiXShleHByZXNzaW9uKTtcbiAgICAgICAgcmVzLm9uQmVmb3JlQXN5bmNSdW4gPSBmdW5jdGlvbiAoaWQpIHsgX3RoaXMuZG9CZWZvcmVBc3luUnVuKGlkKTsgfTtcbiAgICAgICAgcmVzLm9uQWZ0ZXJBc3luY1J1biA9IGZ1bmN0aW9uIChpZCkgeyBfdGhpcy5kb0FmdGVyQXN5blJ1bihpZCk7IH07XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gYSBwcm9wZXJ0eSB2YWx1ZSBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWVzIEFuIGFycmF5IG9mIG9uZSBvciBtdWx0aXBsZSBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcGFyYW0gaGFuZGxlciBBIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBvbmUgb2YgdGhlIGxpc3RlZCBwcm9wZXJ0aWVzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0ga2V5ICooT3B0aW9uYWwpKiBBIGtleSB0aGF0IGlkZW50aWZpZXMgdGhlIGN1cnJlbnQgcmVnaXN0cmF0aW9uLiBJZiBhIGZ1bmN0aW9uIGZvciBvbmUgb2YgdGhlIHByb3BlcnRpZXMgaXMgYWxyZWFkeSByZWdpc3RlcmVkIHdpdGggdGhlIHNhbWUga2V5LCB0aGUgZnVuY3Rpb24gd2lsbCBiZSBvdmVyd3JpdHRlbi4gWW91IGNhbiBhbHNvIHVzZSB0aGUga2V5IHRvIHN1YnNlcXVlbnRseSB1bnJlZ2lzdGVyIGhhbmRsZXJzLlxuICAgICAqIEBzZWUgdW5yZWdpc3RlclByb3BlcnR5Q2hhbmdlZEhhbmRsZXJzXG4gICAgICovXG4gICAgQmFzZS5wcm90b3R5cGUucmVnaXN0ZXJQcm9wZXJ0eUNoYW5nZWRIYW5kbGVycyA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWVzLCBoYW5kbGVyLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7IGtleSA9IG51bGw7IH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0eU5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRnVuY3Rpb25PblByb3BlcnR5VmFsdWVDaGFuZ2VkKHByb3BlcnR5TmFtZXNbaV0sIGhhbmRsZXIsIGtleSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIHZhbHVlIGNoYW5nZSBldmVudCBoYW5kbGVycyBmb3IgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWVzIEFuIGFycmF5IG9mIG9uZSBvciBtdWx0aXBsZSBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcGFyYW0ga2V5ICooT3B0aW9uYWwpKiBBIGtleSBvZiB0aGUgcmVnaXN0cmF0aW9uIHRoYXQgeW91IHdhbnQgdG8gY2FuY2VsLlxuICAgICAqIEBzZWUgcmVnaXN0ZXJQcm9wZXJ0eUNoYW5nZWRIYW5kbGVyc1xuICAgICAqL1xuICAgIEJhc2UucHJvdG90eXBlLnVucmVnaXN0ZXJQcm9wZXJ0eUNoYW5nZWRIYW5kbGVycyA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWVzLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7IGtleSA9IG51bGw7IH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0eU5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnVuUmVnaXN0ZXJGdW5jdGlvbk9uUHJvcGVydHlWYWx1ZUNoYW5nZWQocHJvcGVydHlOYW1lc1tpXSwga2V5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUucmVnaXN0ZXJGdW5jdGlvbk9uUHJvcGVydHlWYWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiAobmFtZSwgZnVuYywga2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09IHZvaWQgMCkgeyBrZXkgPSBudWxsOyB9XG4gICAgICAgIGlmICghdGhpcy5vblByb3BDaGFuZ2VGdW5jdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMub25Qcm9wQ2hhbmdlRnVuY3Rpb25zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9uUHJvcENoYW5nZUZ1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5vblByb3BDaGFuZ2VGdW5jdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PSBuYW1lICYmIGl0ZW0ua2V5ID09IGtleSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmZ1bmMgPSBmdW5jO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub25Qcm9wQ2hhbmdlRnVuY3Rpb25zLnB1c2goeyBuYW1lOiBuYW1lLCBmdW5jOiBmdW5jLCBrZXk6IGtleSB9KTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLnJlZ2lzdGVyRnVuY3Rpb25PblByb3BlcnRpZXNWYWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiAobmFtZXMsIGZ1bmMsIGtleSkge1xuICAgICAgICBpZiAoa2V5ID09PSB2b2lkIDApIHsga2V5ID0gbnVsbDsgfVxuICAgICAgICB0aGlzLnJlZ2lzdGVyUHJvcGVydHlDaGFuZ2VkSGFuZGxlcnMobmFtZXMsIGZ1bmMsIGtleSk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS51blJlZ2lzdGVyRnVuY3Rpb25PblByb3BlcnR5VmFsdWVDaGFuZ2VkID0gZnVuY3Rpb24gKG5hbWUsIGtleSkge1xuICAgICAgICBpZiAoa2V5ID09PSB2b2lkIDApIHsga2V5ID0gbnVsbDsgfVxuICAgICAgICBpZiAoIXRoaXMub25Qcm9wQ2hhbmdlRnVuY3Rpb25zKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub25Qcm9wQ2hhbmdlRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMub25Qcm9wQ2hhbmdlRnVuY3Rpb25zW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PSBuYW1lICYmIGl0ZW0ua2V5ID09IGtleSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9wQ2hhbmdlRnVuY3Rpb25zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLnVuUmVnaXN0ZXJGdW5jdGlvbk9uUHJvcGVydGllc1ZhbHVlQ2hhbmdlZCA9IGZ1bmN0aW9uIChuYW1lcywga2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09IHZvaWQgMCkgeyBrZXkgPSBudWxsOyB9XG4gICAgICAgIHRoaXMudW5yZWdpc3RlclByb3BlcnR5Q2hhbmdlZEhhbmRsZXJzKG5hbWVzLCBrZXkpO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuY3JlYXRlQ3VzdG9tTG9jYWxpemFibGVPYmogPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgbG9jU3RyID0gdGhpcy5nZXRMb2NhbGl6YWJsZVN0cmluZyhuYW1lKTtcbiAgICAgICAgaWYgKGxvY1N0cilcbiAgICAgICAgICAgIHJldHVybiBsb2NTdHI7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUxvY2FsaXphYmxlU3RyaW5nKG5hbWUsIHRoaXMsIGZhbHNlLCB0cnVlKTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmdldExvY2FsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxvY093bmVyID0gdGhpcy5nZXRTdXJ2ZXkoKTtcbiAgICAgICAgcmV0dXJuICEhbG9jT3duZXIgPyBsb2NPd25lci5nZXRMb2NhbGUoKSA6IFwiXCI7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5nZXRMb2NhbGl6YXRpb25TdHJpbmcgPSBmdW5jdGlvbiAoc3RyTmFtZSkge1xuICAgICAgICByZXR1cm4gX3N1cnZleVN0cmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcInN1cnZleUxvY2FsaXphdGlvblwiXS5nZXRTdHJpbmcoc3RyTmFtZSwgdGhpcy5nZXRMb2NhbGUoKSk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5nZXRMb2NhbGl6YXRpb25Gb3JtYXRTdHJpbmcgPSBmdW5jdGlvbiAoc3RyTmFtZSkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyID0gdGhpcy5nZXRMb2NhbGl6YXRpb25TdHJpbmcoc3RyTmFtZSk7XG4gICAgICAgIGlmICghc3RyIHx8ICFzdHIuZm9ybWF0KVxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIHJldHVybiBzdHIuZm9ybWF0LmFwcGx5KHN0ciwgYXJncyk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5jcmVhdGVMb2NhbGl6YWJsZVN0cmluZyA9IGZ1bmN0aW9uIChuYW1lLCBvd25lciwgdXNlTWFya0Rvd24sIGRlZmF1bHRTdHIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHVzZU1hcmtEb3duID09PSB2b2lkIDApIHsgdXNlTWFya0Rvd24gPSBmYWxzZTsgfVxuICAgICAgICBpZiAoZGVmYXVsdFN0ciA9PT0gdm9pZCAwKSB7IGRlZmF1bHRTdHIgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgbG9jU3RyID0gbmV3IF9sb2NhbGl6YWJsZXN0cmluZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiTG9jYWxpemFibGVTdHJpbmdcIl0ob3duZXIsIHVzZU1hcmtEb3duLCBuYW1lKTtcbiAgICAgICAgaWYgKGRlZmF1bHRTdHIpIHtcbiAgICAgICAgICAgIGxvY1N0ci5sb2NhbGl6YXRpb25OYW1lID0gZGVmYXVsdFN0ciA9PT0gdHJ1ZSA/IG5hbWUgOiBkZWZhdWx0U3RyO1xuICAgICAgICB9XG4gICAgICAgIGxvY1N0ci5vblN0ckNoYW5nZWQgPSBmdW5jdGlvbiAob2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBfdGhpcy5wcm9wZXJ0eVZhbHVlQ2hhbmdlZChuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXMubG9jYWxpemFibGVTdHJpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsaXphYmxlU3RyaW5ncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9jYWxpemFibGVTdHJpbmdzW25hbWVdID0gbG9jU3RyO1xuICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZ2V0UHJvcGVydHlCeU5hbWUobmFtZSk7XG4gICAgICAgIGxvY1N0ci5kaXNhYmxlTG9jYWxpemF0aW9uID0gcHJvcCAmJiBwcm9wLmlzTG9jYWxpemFibGUgPT09IGZhbHNlO1xuICAgICAgICByZXR1cm4gbG9jU3RyO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0TG9jYWxpemFibGVTdHJpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmxvY2FsaXphYmxlU3RyaW5ncyA/IHRoaXMubG9jYWxpemFibGVTdHJpbmdzW25hbWVdIDogbnVsbDtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmdldExvY2FsaXphYmxlU3RyaW5nVGV4dCA9IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0U3RyKSB7XG4gICAgICAgIGlmIChkZWZhdWx0U3RyID09PSB2b2lkIDApIHsgZGVmYXVsdFN0ciA9IFwiXCI7IH1cbiAgICAgICAgQmFzZS5jb2xsZWN0RGVwZW5kZW5jeSh0aGlzLCBuYW1lKTtcbiAgICAgICAgdmFyIGxvY1N0ciA9IHRoaXMuZ2V0TG9jYWxpemFibGVTdHJpbmcobmFtZSk7XG4gICAgICAgIGlmICghbG9jU3RyKVxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIHZhciByZXMgPSBsb2NTdHIudGV4dDtcbiAgICAgICAgcmV0dXJuIHJlcyA/IHJlcyA6IGRlZmF1bHRTdHI7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5zZXRMb2NhbGl6YWJsZVN0cmluZ1RleHQgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGxvY1N0ciA9IHRoaXMuZ2V0TG9jYWxpemFibGVTdHJpbmcobmFtZSk7XG4gICAgICAgIGlmICghbG9jU3RyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgb2xkVmFsdWUgPSBsb2NTdHIudGV4dDtcbiAgICAgICAgaWYgKG9sZFZhbHVlICE9IHZhbHVlKSB7XG4gICAgICAgICAgICBsb2NTdHIudGV4dCA9IHZhbHVlO1xuICAgICAgICAgICAgLy8gdGhpcy5wcm9wZXJ0eVZhbHVlQ2hhbmdlZChuYW1lLCBvbGRWYWx1ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5hZGRVc2VkTG9jYWxlcyA9IGZ1bmN0aW9uIChsb2NhbGVzKSB7XG4gICAgICAgIGlmICghIXRoaXMubG9jYWxpemFibGVTdHJpbmdzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5sb2NhbGl6YWJsZVN0cmluZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0TG9jYWxpemFibGVTdHJpbmcoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGRMb2NTdHJpbmdUb1VzZWRMb2NhbGVzKGl0ZW0sIGxvY2FsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMuYXJyYXlzSW5mbykge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuYXJyYXlzSW5mbykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0UHJvcGVydHlWYWx1ZShrZXkpO1xuICAgICAgICAgICAgICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmFkZFVzZWRMb2NhbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZFVzZWRMb2NhbGVzKGxvY2FsZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5zZWFyY2hUZXh0ID0gZnVuY3Rpb24gKHRleHQsIGZvdW5kZWQpIHtcbiAgICAgICAgdmFyIHN0cnMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRTZWFyY2hhYmxlTG9jYWxpemVkU3RyaW5ncyhzdHJzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc3Ryc1tpXS5zZXRGaW5kVGV4dCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIGZvdW5kZWQucHVzaCh7IGVsZW1lbnQ6IHRoaXMsIHN0cjogc3Ryc1tpXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0U2VhcmNoYWJsZUxvY2FsaXplZFN0cmluZ3MgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIGlmICghIXRoaXMubG9jYWxpemFibGVTdHJpbmdzKSB7XG4gICAgICAgICAgICB2YXIga2V5c18xID0gW107XG4gICAgICAgICAgICB0aGlzLmdldFNlYXJjaGFibGVMb2NLZXlzKGtleXNfMSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXNfMS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5nZXRMb2NhbGl6YWJsZVN0cmluZyhrZXlzXzFbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtKVxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYXJyYXlzSW5mbylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGtleXMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRTZWFyY2hhYmxlSXRlbVZhbHVlS2V5cyhrZXlzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldFByb3BlcnR5VmFsdWUoa2V5c1tpXSk7XG4gICAgICAgICAgICBpZiAoIWl0ZW1zKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpdGVtcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKGl0ZW1zW2pdLmxvY1RleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5nZXRTZWFyY2hhYmxlTG9jS2V5cyA9IGZ1bmN0aW9uIChrZXlzKSB7IH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0U2VhcmNoYWJsZUl0ZW1WYWx1ZUtleXMgPSBmdW5jdGlvbiAoa2V5cykgeyB9O1xuICAgIEJhc2UucHJvdG90eXBlLkFkZExvY1N0cmluZ1RvVXNlZExvY2FsZXMgPSBmdW5jdGlvbiAobG9jU3RyLCBsb2NhbGVzKSB7XG4gICAgICAgIHZhciBsb2NzID0gbG9jU3RyLmdldExvY2FsZXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2NzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxlcy5pbmRleE9mKGxvY3NbaV0pIDwgMCkge1xuICAgICAgICAgICAgICAgIGxvY2FsZXMucHVzaChsb2NzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuY3JlYXRlSXRlbVZhbHVlcyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY3JlYXRlTmV3QXJyYXkobmFtZSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0ubG9jT3duZXIgPSBzZWxmO1xuICAgICAgICAgICAgaXRlbS5vd25lclByb3BlcnR5TmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uZ2V0U3VydmV5ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHZhciBzdXJ2ZXkgPSBpdGVtLmdldFN1cnZleSgpO1xuICAgICAgICAgICAgICAgIGlmICghIXN1cnZleSAmJiB0eXBlb2Ygc3VydmV5Lm1ha2VSZWFjdGl2ZSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VydmV5Lm1ha2VSZWFjdGl2ZShpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFycmF5c0luZm9bbmFtZV0uaXNJdGVtVmFsdWVzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLm5vdGlmeUFycmF5Q2hhbmdlZCA9IGZ1bmN0aW9uIChhciwgYXJyYXlDaGFuZ2VzKSB7XG4gICAgICAgICEhYXIub25BcnJheUNoYW5nZWQgJiYgYXIub25BcnJheUNoYW5nZWQoYXJyYXlDaGFuZ2VzKTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmNyZWF0ZU5ld0FycmF5Q29yZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciByZXMgPSBudWxsO1xuICAgICAgICBpZiAoISF0aGlzLmNyZWF0ZUFycmF5Q29yZUhhbmRsZXIpIHtcbiAgICAgICAgICAgIHJlcyA9IHRoaXMuY3JlYXRlQXJyYXlDb3JlSGFuZGxlcih0aGlzLnByb3BlcnR5SGFzaCwgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICAgIHJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlQ29yZSh0aGlzLnByb3BlcnR5SGFzaCwgbmFtZSwgcmVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZW5zdXJlQXJyYXkgPSBmdW5jdGlvbiAobmFtZSwgb25QdXNoLCBvblJlbW92ZSkge1xuICAgICAgICBpZiAob25QdXNoID09PSB2b2lkIDApIHsgb25QdXNoID0gbnVsbDsgfVxuICAgICAgICBpZiAob25SZW1vdmUgPT09IHZvaWQgMCkgeyBvblJlbW92ZSA9IG51bGw7IH1cbiAgICAgICAgaWYgKHRoaXMuYXJyYXlzSW5mbyAmJiB0aGlzLmFycmF5c0luZm9bbmFtZV0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVOZXdBcnJheShuYW1lLCBvblB1c2gsIG9uUmVtb3ZlKTtcbiAgICB9O1xuICAgIEJhc2UucHJvdG90eXBlLmNyZWF0ZU5ld0FycmF5ID0gZnVuY3Rpb24gKG5hbWUsIG9uUHVzaCwgb25SZW1vdmUpIHtcbiAgICAgICAgaWYgKG9uUHVzaCA9PT0gdm9pZCAwKSB7IG9uUHVzaCA9IG51bGw7IH1cbiAgICAgICAgaWYgKG9uUmVtb3ZlID09PSB2b2lkIDApIHsgb25SZW1vdmUgPSBudWxsOyB9XG4gICAgICAgIHZhciBuZXdBcnJheSA9IHRoaXMuY3JlYXRlTmV3QXJyYXlDb3JlKG5hbWUpO1xuICAgICAgICBpZiAoIXRoaXMuYXJyYXlzSW5mbykge1xuICAgICAgICAgICAgdGhpcy5hcnJheXNJbmZvID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJheXNJbmZvW25hbWVdID0geyBvblB1c2g6IG9uUHVzaCwgaXNJdGVtVmFsdWVzOiBmYWxzZSB9O1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIG5ld0FycmF5LnB1c2ggPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3QXJyYXkpLnB1c2guY2FsbChuZXdBcnJheSwgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFzZWxmLmlzRGlzcG9zZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChvblB1c2gpXG4gICAgICAgICAgICAgICAgICAgIG9uUHVzaCh2YWx1ZSwgbmV3QXJyYXkubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgdmFyIGFycmF5Q2hhbmdlcyA9IG5ldyBBcnJheUNoYW5nZXMobmV3QXJyYXkubGVuZ3RoIC0gMSwgMCwgW3ZhbHVlXSwgW10pO1xuICAgICAgICAgICAgICAgIHNlbGYucHJvcGVydHlWYWx1ZUNoYW5nZWQobmFtZSwgbmV3QXJyYXksIG5ld0FycmF5LCBhcnJheUNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIHNlbGYubm90aWZ5QXJyYXlDaGFuZ2VkKG5ld0FycmF5LCBhcnJheUNoYW5nZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgbmV3QXJyYXkuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ld0FycmF5KS5zaGlmdC5jYWxsKG5ld0FycmF5KTtcbiAgICAgICAgICAgIGlmICghc2VsZi5pc0Rpc3Bvc2VkVmFsdWUgJiYgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uUmVtb3ZlKVxuICAgICAgICAgICAgICAgICAgICBvblJlbW92ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHZhciBhcnJheUNoYW5nZXMgPSBuZXcgQXJyYXlDaGFuZ2VzKG5ld0FycmF5Lmxlbmd0aCAtIDEsIDEsIFtdLCBbXSk7XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9wZXJ0eVZhbHVlQ2hhbmdlZChuYW1lLCBuZXdBcnJheSwgbmV3QXJyYXksIGFycmF5Q2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgc2VsZi5ub3RpZnlBcnJheUNoYW5nZWQobmV3QXJyYXksIGFycmF5Q2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBuZXdBcnJheS51bnNoaWZ0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ld0FycmF5KS51bnNoaWZ0LmNhbGwobmV3QXJyYXksIHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghc2VsZi5pc0Rpc3Bvc2VkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAob25QdXNoKVxuICAgICAgICAgICAgICAgICAgICBvblB1c2godmFsdWUsIG5ld0FycmF5Lmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIHZhciBhcnJheUNoYW5nZXMgPSBuZXcgQXJyYXlDaGFuZ2VzKDAsIDAsIFt2YWx1ZV0sIFtdKTtcbiAgICAgICAgICAgICAgICBzZWxmLnByb3BlcnR5VmFsdWVDaGFuZ2VkKG5hbWUsIG5ld0FycmF5LCBuZXdBcnJheSwgYXJyYXlDaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeUFycmF5Q2hhbmdlZChuZXdBcnJheSwgYXJyYXlDaGFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIG5ld0FycmF5LnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3QXJyYXkpLnBvcC5jYWxsKG5ld0FycmF5KTtcbiAgICAgICAgICAgIGlmICghc2VsZi5pc0Rpc3Bvc2VkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAob25SZW1vdmUpXG4gICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgdmFyIGFycmF5Q2hhbmdlcyA9IG5ldyBBcnJheUNoYW5nZXMobmV3QXJyYXkubGVuZ3RoIC0gMSwgMSwgW10sIFtdKTtcbiAgICAgICAgICAgICAgICBzZWxmLnByb3BlcnR5VmFsdWVDaGFuZ2VkKG5hbWUsIG5ld0FycmF5LCBuZXdBcnJheSwgYXJyYXlDaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeUFycmF5Q2hhbmdlZChuZXdBcnJheSwgYXJyYXlDaGFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIG5ld0FycmF5LnNwbGljZSA9IGZ1bmN0aW9uIChzdGFydCwgZGVsZXRlQ291bnQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc3RhcnQpXG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgaWYgKCFkZWxldGVDb3VudClcbiAgICAgICAgICAgICAgICBkZWxldGVDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gKF9hID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ld0FycmF5KS5zcGxpY2UpLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW25ld0FycmF5LFxuICAgICAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgICAgIGRlbGV0ZUNvdW50XSwgaXRlbXMpKTtcbiAgICAgICAgICAgIGlmICghaXRlbXMpXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGlmICghc2VsZi5pc0Rpc3Bvc2VkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAob25SZW1vdmUgJiYgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZShyZXN1bHRbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvblB1c2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25QdXNoKGl0ZW1zW2ldLCBzdGFydCArIGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhcnJheUNoYW5nZXMgPSBuZXcgQXJyYXlDaGFuZ2VzKHN0YXJ0LCBkZWxldGVDb3VudCwgaXRlbXMsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9wZXJ0eVZhbHVlQ2hhbmdlZChuYW1lLCBuZXdBcnJheSwgbmV3QXJyYXksIGFycmF5Q2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgc2VsZi5ub3RpZnlBcnJheUNoYW5nZWQobmV3QXJyYXksIGFycmF5Q2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3QXJyYXk7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5nZXRJdGVtVmFsdWVUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuc2V0QXJyYXkgPSBmdW5jdGlvbiAobmFtZSwgc3JjLCBkZXN0LCBpc0l0ZW1WYWx1ZXMsIG9uUHVzaCkge1xuICAgICAgICB2YXIgZGVsZXRlZEl0ZW1zID0gW10uY29uY2F0KHNyYyk7XG4gICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihzcmMpLnNwbGljZS5jYWxsKHNyYywgMCwgc3JjLmxlbmd0aCk7XG4gICAgICAgIGlmICghIWRlc3QpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZGVzdFtpXTtcbiAgICAgICAgICAgICAgICBpZiAoaXNJdGVtVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIUJhc2UuY3JlYXRlSXRlbVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gQmFzZS5jcmVhdGVJdGVtVmFsdWUoaXRlbSwgdGhpcy5nZXRJdGVtVmFsdWVUeXBlKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihzcmMpLnB1c2guY2FsbChzcmMsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChvblB1c2gpXG4gICAgICAgICAgICAgICAgICAgIG9uUHVzaChzcmNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBhcnJheUNoYW5nZXMgPSBuZXcgQXJyYXlDaGFuZ2VzKDAsIGRlbGV0ZWRJdGVtcy5sZW5ndGgsIHNyYywgZGVsZXRlZEl0ZW1zKTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eVZhbHVlQ2hhbmdlZChuYW1lLCBkZWxldGVkSXRlbXMsIHNyYywgYXJyYXlDaGFuZ2VzKTtcbiAgICAgICAgdGhpcy5ub3RpZnlBcnJheUNoYW5nZWQoc3JjLCBhcnJheUNoYW5nZXMpO1xuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuaXNUd29WYWx1ZUVxdWFscyA9IGZ1bmN0aW9uICh4LCB5LCBjYXNlSW5TZW5zaXRpdmUsIHRyaW1TdHJpbmcpIHtcbiAgICAgICAgaWYgKGNhc2VJblNlbnNpdGl2ZSA9PT0gdm9pZCAwKSB7IGNhc2VJblNlbnNpdGl2ZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmICh0cmltU3RyaW5nID09PSB2b2lkIDApIHsgdHJpbVN0cmluZyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiSGVscGVyc1wiXS5pc1R3b1ZhbHVlRXF1YWxzKHgsIHksIGZhbHNlLCAhY2FzZUluU2Vuc2l0aXZlLCB0cmltU3RyaW5nKTtcbiAgICB9O1xuICAgIEJhc2UuY29weU9iamVjdCA9IGZ1bmN0aW9uIChkc3QsIHNyYykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gc3JjW2tleV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIHNvdXJjZSA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuY29weU9iamVjdChzb3VyY2UsIHNyY1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRzdFtrZXldID0gc291cmNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5jb3B5Q3NzQ2xhc3NlcyA9IGZ1bmN0aW9uIChkZXN0LCBzb3VyY2UpIHtcbiAgICAgICAgaWYgKCFzb3VyY2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlID09PSBcInN0cmluZ1wiIHx8IHNvdXJjZSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgICAgZGVzdFtcInJvb3RcIl0gPSBzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBCYXNlLmNvcHlPYmplY3QoZGVzdCwgc291cmNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZS5wcm90b3R5cGUuZ2V0VmFsdWVJbkxvd0Nhc2UgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmICghIXZhbCAmJiB0eXBlb2YgdmFsID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcbiAgICBCYXNlLnByb3RvdHlwZS5nZXRFbGVtZW50c0luRGVzaWduID0gZnVuY3Rpb24gKGluY2x1ZGVIaWRkZW4pIHtcbiAgICAgICAgaWYgKGluY2x1ZGVIaWRkZW4gPT09IHZvaWQgMCkgeyBpbmNsdWRlSGlkZGVuID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG4gICAgQmFzZS5jdXJyZW50RGVwZW5kZW5jaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIEJhc2U7XG59KCkpO1xuXG52YXIgQXJyYXlDaGFuZ2VzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFycmF5Q2hhbmdlcyhpbmRleCwgZGVsZXRlQ291bnQsIGl0ZW1zVG9BZGQsIGRlbGV0ZWRJdGVtcykge1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuZGVsZXRlQ291bnQgPSBkZWxldGVDb3VudDtcbiAgICAgICAgdGhpcy5pdGVtc1RvQWRkID0gaXRlbXNUb0FkZDtcbiAgICAgICAgdGhpcy5kZWxldGVkSXRlbXMgPSBkZWxldGVkSXRlbXM7XG4gICAgfVxuICAgIHJldHVybiBBcnJheUNoYW5nZXM7XG59KCkpO1xuXG52YXIgRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXZlbnQoKSB7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudC5wcm90b3R5cGUsIFwiaXNFbXB0eVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAwO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50LnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuY2FsbGJhY2tzID8gdGhpcy5jYWxsYmFja3MubGVuZ3RoIDogMDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEV2ZW50LnByb3RvdHlwZS5maXJlQnlDcmVhdGluZ09wdGlvbnMgPSBmdW5jdGlvbiAoc2VuZGVyLCBjcmVhdGVPcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5jYWxsYmFja3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2ldKHNlbmRlciwgY3JlYXRlT3B0aW9ucygpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYWxsYmFja3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFdmVudC5wcm90b3R5cGUuZmlyZSA9IGZ1bmN0aW9uIChzZW5kZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbGxiYWNrcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbaV0oc2VuZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYWxsYmFja3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFdmVudC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgRXZlbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0Z1bmMoZnVuYykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5jYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsYmFja3MucHVzaChmdW5jKTtcbiAgICAgICAgdGhpcy5maXJlQ2FsbGJhY2tDaGFuZ2VkKCk7XG4gICAgfTtcbiAgICBFdmVudC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzRnVuYyhmdW5jKSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jYWxsYmFja3MuaW5kZXhPZihmdW5jLCAwKTtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLmZpcmVDYWxsYmFja0NoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRXZlbnQucHJvdG90eXBlLmhhc0Z1bmMgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja3MgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tzLmluZGV4T2YoZnVuYywgMCkgPiAtMTtcbiAgICB9O1xuICAgIEV2ZW50LnByb3RvdHlwZS5maXJlQ2FsbGJhY2tDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISF0aGlzLm9uQ2FsbGJhY2tzQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5vbkNhbGxiYWNrc0NoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEV2ZW50O1xufSgpKTtcblxudmFyIEV2ZW50QmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRXZlbnRCYXNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEV2ZW50QmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRXZlbnRCYXNlO1xufShFdmVudCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29uZGl0aW9uUHJvY2Vzc1ZhbHVlLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9jb25kaXRpb25Qcm9jZXNzVmFsdWUudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFByb2Nlc3NWYWx1ZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJQcm9jZXNzVmFsdWVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBQcm9jZXNzVmFsdWU7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2hlbHBlcnMgKi8gXCIuL3NyYy9oZWxwZXJzLnRzXCIpO1xuXG52YXIgc3VydmV5QnVpbHRJblZhcmlibGUgPSBcIkBzdXJ2ZXlcIjtcbnZhciBQcm9jZXNzVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJvY2Vzc1ZhbHVlKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IG51bGw7XG4gICAgfVxuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuZ2V0Rmlyc3ROYW1lID0gZnVuY3Rpb24gKHRleHQsIG9iaikge1xuICAgICAgICBpZiAob2JqID09PSB2b2lkIDApIHsgb2JqID0gbnVsbDsgfVxuICAgICAgICBpZiAoIXRleHQpXG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgdmFyIHJlcyA9IFwiXCI7XG4gICAgICAgIGlmICghIW9iaikge1xuICAgICAgICAgICAgcmVzID0gdGhpcy5nZXRGaXJzdFByb3BlcnR5TmFtZSh0ZXh0LCBvYmopO1xuICAgICAgICAgICAgaWYgKCEhcmVzKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2ggPSB0ZXh0W2ldO1xuICAgICAgICAgICAgaWYgKGNoID09IFwiLlwiIHx8IGNoID09IFwiW1wiKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcmVzICs9IGNoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBQcm9jZXNzVmFsdWUucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKHRleHQsIHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0gbnVsbDsgfVxuICAgICAgICBpZiAoIXZhbHVlcylcbiAgICAgICAgICAgIHZhbHVlcyA9IHRoaXMudmFsdWVzO1xuICAgICAgICB2YXIgcmVzID0gdGhpcy5nZXRWYWx1ZUNvcmUodGV4dCwgdmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHJlcy5oYXNWYWx1ZTtcbiAgICB9O1xuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAodGV4dCwgdmFsdWVzKSB7XG4gICAgICAgIGlmICh2YWx1ZXMgPT09IHZvaWQgMCkgeyB2YWx1ZXMgPSBudWxsOyB9XG4gICAgICAgIGlmICghdmFsdWVzKVxuICAgICAgICAgICAgdmFsdWVzID0gdGhpcy52YWx1ZXM7XG4gICAgICAgIHZhciByZXMgPSB0aGlzLmdldFZhbHVlQ29yZSh0ZXh0LCB2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gcmVzLnZhbHVlO1xuICAgIH07XG4gICAgUHJvY2Vzc1ZhbHVlLnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uIChvYmosIHRleHQsIHZhbHVlKSB7XG4gICAgICAgIGlmICghdGV4dClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIG5vbk5lc3RlZE9iaiA9IHRoaXMuZ2V0Tm9uTmVzdGVkT2JqZWN0KG9iaiwgdGV4dCwgdHJ1ZSk7XG4gICAgICAgIGlmICghbm9uTmVzdGVkT2JqKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBvYmogPSBub25OZXN0ZWRPYmoudmFsdWU7XG4gICAgICAgIHRleHQgPSBub25OZXN0ZWRPYmoudGV4dDtcbiAgICAgICAgaWYgKCEhb2JqICYmICEhdGV4dCkge1xuICAgICAgICAgICAgb2JqW3RleHRdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuZ2V0VmFsdWVJbmZvID0gZnVuY3Rpb24gKHZhbHVlSW5mbykge1xuICAgICAgICBpZiAoISF2YWx1ZUluZm8ucGF0aCkge1xuICAgICAgICAgICAgdmFsdWVJbmZvLnZhbHVlID0gdGhpcy5nZXRWYWx1ZUZyb21QYXRoKHZhbHVlSW5mby5wYXRoLCB0aGlzLnZhbHVlcyk7XG4gICAgICAgICAgICB2YWx1ZUluZm8uaGFzVmFsdWUgPVxuICAgICAgICAgICAgICAgIHZhbHVlSW5mby52YWx1ZSAhPT0gbnVsbCAmJiAhX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHZhbHVlSW5mby52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIXZhbHVlSW5mby5oYXNWYWx1ZSAmJlxuICAgICAgICAgICAgICAgIHZhbHVlSW5mby5wYXRoLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgICAgICB2YWx1ZUluZm8ucGF0aFt2YWx1ZUluZm8ucGF0aC5sZW5ndGggLSAxXSA9PSBcImxlbmd0aFwiKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVJbmZvLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YWx1ZUluZm8udmFsdWUgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXMgPSB0aGlzLmdldFZhbHVlQ29yZSh2YWx1ZUluZm8ubmFtZSwgdGhpcy52YWx1ZXMpO1xuICAgICAgICB2YWx1ZUluZm8udmFsdWUgPSByZXMudmFsdWU7XG4gICAgICAgIHZhbHVlSW5mby5oYXNWYWx1ZSA9IHJlcy5oYXNWYWx1ZTtcbiAgICAgICAgdmFsdWVJbmZvLnBhdGggPSByZXMuaGFzVmFsdWUgPyByZXMucGF0aCA6IG51bGw7XG4gICAgICAgIHZhbHVlSW5mby5zY3RyaWN0Q29tcGFyZSA9IHJlcy5zY3RyaWN0Q29tcGFyZTtcbiAgICB9O1xuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuaXNBbnlLZXlDaGFuZ2VkID0gZnVuY3Rpb24gKGtleXMsIHVzZWROYW1lcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZWROYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSB1c2VkTmFtZXNbaV07XG4gICAgICAgICAgICBpZiAoa2V5cy5oYXNPd25Qcm9wZXJ0eShuYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBmaXJzdE5hbWUgPSB0aGlzLmdldEZpcnN0TmFtZShuYW1lKTtcbiAgICAgICAgICAgIGlmICgha2V5cy5oYXNPd25Qcm9wZXJ0eShmaXJzdE5hbWUpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKG5hbWUgPT09IGZpcnN0TmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IGtleXNbZmlyc3ROYW1lXTtcbiAgICAgICAgICAgIGlmIChrZXlWYWx1ZSA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIWtleVZhbHVlLmhhc093blByb3BlcnR5KFwib2xkVmFsdWVcIikgfHxcbiAgICAgICAgICAgICAgICAha2V5VmFsdWUuaGFzT3duUHJvcGVydHkoXCJuZXdWYWx1ZVwiKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHZhciB2ID0ge307XG4gICAgICAgICAgICB2W2ZpcnN0TmFtZV0gPSBrZXlWYWx1ZVtcIm9sZFZhbHVlXCJdO1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5nZXRWYWx1ZShuYW1lLCB2KTtcbiAgICAgICAgICAgIHZbZmlyc3ROYW1lXSA9IGtleVZhbHVlW1wibmV3VmFsdWVcIl07XG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLmdldFZhbHVlKG5hbWUsIHYpO1xuICAgICAgICAgICAgaWYgKCFfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiSGVscGVyc1wiXS5pc1R3b1ZhbHVlRXF1YWxzKG9sZFZhbHVlLCBuZXdWYWx1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgUHJvY2Vzc1ZhbHVlLnByb3RvdHlwZS5nZXRWYWx1ZUZyb21QYXRoID0gZnVuY3Rpb24gKHBhdGgsIHZhbHVlcykge1xuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDIgJiYgcGF0aFswXSA9PT0gc3VydmV5QnVpbHRJblZhcmlibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlRnJvbVN1cnZleShwYXRoWzFdKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAoISF2YWx1ZXMgJiYgaW5kZXggPCBwYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGluZF9uYW1lID0gcGF0aFtpbmRleF07XG4gICAgICAgICAgICBpZiAoX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNOdW1iZXIoaW5kX25hbWUpICYmXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmXG4gICAgICAgICAgICAgICAgaW5kX25hbWUgPj0gdmFsdWVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlc1tpbmRfbmFtZV07XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfTtcbiAgICBQcm9jZXNzVmFsdWUucHJvdG90eXBlLmdldFZhbHVlQ29yZSA9IGZ1bmN0aW9uICh0ZXh0LCB2YWx1ZXMpIHtcbiAgICAgICAgdmFyIHF1ZXN0aW9uID0gdGhpcy5nZXRRdWVzdGlvbkRpcmVjdGx5KHRleHQpO1xuICAgICAgICBpZiAocXVlc3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB7IGhhc1ZhbHVlOiB0cnVlLCB2YWx1ZTogcXVlc3Rpb24udmFsdWUsIHBhdGg6IFt0ZXh0XSwgc2N0cmljdENvbXBhcmU6IHF1ZXN0aW9uLnJlcXVpcmVTdHJpY3RDb21wYXJlIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcyA9IHRoaXMuZ2V0VmFsdWVGcm9tVmFsdWVzKHRleHQsIHZhbHVlcyk7XG4gICAgICAgIGlmICghIXRleHQgJiYgIXJlcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHRoaXMuZ2V0VmFsdWVGcm9tU3VydmV5KHRleHQpO1xuICAgICAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXMudmFsdWUgPSB2YWw7XG4gICAgICAgICAgICAgICAgcmVzLnBhdGggPSBbc3VydmV5QnVpbHRJblZhcmlibGUsIHRleHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBQcm9jZXNzVmFsdWUucHJvdG90eXBlLmdldFF1ZXN0aW9uRGlyZWN0bHkgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBpZiAoISF0aGlzLnByb3BlcnRpZXMgJiYgISF0aGlzLnByb3BlcnRpZXMuc3VydmV5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5zdXJ2ZXkuZ2V0UXVlc3Rpb25CeVZhbHVlTmFtZShuYW1lKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuZ2V0VmFsdWVGcm9tU3VydmV5ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcm9wZXJ0aWVzICYmICEhdGhpcy5wcm9wZXJ0aWVzLnN1cnZleSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuc3VydmV5LmdldEJ1aWx0SW5WYXJpYWJsZVZhbHVlKG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBQcm9jZXNzVmFsdWUucHJvdG90eXBlLmdldFZhbHVlRnJvbVZhbHVlcyA9IGZ1bmN0aW9uICh0ZXh0LCB2YWx1ZXMpIHtcbiAgICAgICAgdmFyIHJlcyA9IHsgaGFzVmFsdWU6IGZhbHNlLCB2YWx1ZTogbnVsbCwgcGF0aDogbnVsbCB9O1xuICAgICAgICB2YXIgY3VyVmFsdWUgPSB2YWx1ZXM7XG4gICAgICAgIGlmICghY3VyVmFsdWUgJiYgY3VyVmFsdWUgIT09IDAgJiYgY3VyVmFsdWUgIT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgaWYgKHRleHQgJiZcbiAgICAgICAgICAgIHRleHQubGFzdEluZGV4T2YoXCIubGVuZ3RoXCIpID4gLTEgJiZcbiAgICAgICAgICAgIHRleHQubGFzdEluZGV4T2YoXCIubGVuZ3RoXCIpID09PSB0ZXh0Lmxlbmd0aCAtIFwiLmxlbmd0aFwiLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVzLnZhbHVlID0gMDtcbiAgICAgICAgICAgIHJlcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vbk5lc3RlZE9iaiA9IHRoaXMuZ2V0Tm9uTmVzdGVkT2JqZWN0KGN1clZhbHVlLCB0ZXh0LCBmYWxzZSk7XG4gICAgICAgIGlmICghbm9uTmVzdGVkT2JqKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgcmVzLnBhdGggPSBub25OZXN0ZWRPYmoucGF0aDtcbiAgICAgICAgcmVzLnZhbHVlID0gISFub25OZXN0ZWRPYmoudGV4dFxuICAgICAgICAgICAgPyB0aGlzLmdldE9iamVjdFZhbHVlKG5vbk5lc3RlZE9iai52YWx1ZSwgbm9uTmVzdGVkT2JqLnRleHQpXG4gICAgICAgICAgICA6IG5vbk5lc3RlZE9iai52YWx1ZTtcbiAgICAgICAgcmVzLmhhc1ZhbHVlID0gIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eShyZXMudmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUHJvY2Vzc1ZhbHVlLnByb3RvdHlwZS5nZXROb25OZXN0ZWRPYmplY3QgPSBmdW5jdGlvbiAob2JqLCB0ZXh0LCBjcmVhdGVQYXRoKSB7XG4gICAgICAgIHZhciBjaGVja2VkS2V5cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgbGVuID0gMDtcbiAgICAgICAgdmFyIHJlcyA9IHRoaXMuZ2V0Tm9uTmVzdGVkT2JqZWN0Q29yZShvYmosIHRleHQsIGNyZWF0ZVBhdGgsIGNoZWNrZWRLZXlzKTtcbiAgICAgICAgd2hpbGUgKCFyZXMgJiYgbGVuIDwgY2hlY2tlZEtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZW4gPSBjaGVja2VkS2V5cy5sZW5ndGg7XG4gICAgICAgICAgICByZXMgPSB0aGlzLmdldE5vbk5lc3RlZE9iamVjdENvcmUob2JqLCB0ZXh0LCBjcmVhdGVQYXRoLCBjaGVja2VkS2V5cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuZ2V0Tm9uTmVzdGVkT2JqZWN0Q29yZSA9IGZ1bmN0aW9uIChvYmosIHRleHQsIGNyZWF0ZVBhdGgsIGNoZWNrZWRLZXlzKSB7XG4gICAgICAgIHZhciBjdXJOYW1lID0gdGhpcy5nZXRGaXJzdFByb3BlcnR5TmFtZSh0ZXh0LCBvYmosIGNyZWF0ZVBhdGgsIGNoZWNrZWRLZXlzKTtcbiAgICAgICAgaWYgKCEhY3VyTmFtZSkge1xuICAgICAgICAgICAgY2hlY2tlZEtleXMucHVzaChjdXJOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0aCA9ICEhY3VyTmFtZSA/IFtjdXJOYW1lXSA6IG51bGw7XG4gICAgICAgIHdoaWxlICh0ZXh0ICE9IGN1ck5hbWUgJiYgISFvYmopIHtcbiAgICAgICAgICAgIHZhciBpc0FycmF5ID0gdGV4dFswXSA9PSBcIltcIjtcbiAgICAgICAgICAgIGlmICghaXNBcnJheSkge1xuICAgICAgICAgICAgICAgIGlmICghY3VyTmFtZSAmJiB0ZXh0ID09IHRoaXMuZ2V0Rmlyc3ROYW1lKHRleHQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogb2JqLCB0ZXh0OiB0ZXh0LCBwYXRoOiBwYXRoIH07XG4gICAgICAgICAgICAgICAgb2JqID0gdGhpcy5nZXRPYmplY3RWYWx1ZShvYmosIGN1ck5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiSGVscGVyc1wiXS5pc1ZhbHVlRW1wdHkob2JqKSAmJiAhY3JlYXRlUGF0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKGN1ck5hbWUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBvYmpJbkFycmF5ID0gdGhpcy5nZXRPYmpJbkFycmF5KG9iaiwgdGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmpJbkFycmF5KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmogPSBvYmpJbkFycmF5LnZhbHVlO1xuICAgICAgICAgICAgICAgIHRleHQgPSBvYmpJbkFycmF5LnRleHQ7XG4gICAgICAgICAgICAgICAgcGF0aC5wdXNoKG9iakluQXJyYXkuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGV4dCAmJiB0ZXh0WzBdID09IFwiLlwiKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyTmFtZSA9IHRoaXMuZ2V0Rmlyc3RQcm9wZXJ0eU5hbWUodGV4dCwgb2JqLCBjcmVhdGVQYXRoLCBjaGVja2VkS2V5cyk7XG4gICAgICAgICAgICBpZiAoISFjdXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgcGF0aC5wdXNoKGN1ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiBvYmosIHRleHQ6IHRleHQsIHBhdGg6IHBhdGggfTtcbiAgICB9O1xuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuZ2V0T2JqSW5BcnJheSA9IGZ1bmN0aW9uIChjdXJWYWx1ZSwgdGV4dCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY3VyVmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBpbmRleCA9IDE7XG4gICAgICAgIHZhciBzdHIgPSBcIlwiO1xuICAgICAgICB3aGlsZSAoaW5kZXggPCB0ZXh0Lmxlbmd0aCAmJiB0ZXh0W2luZGV4XSAhPSBcIl1cIikge1xuICAgICAgICAgICAgc3RyICs9IHRleHRbaW5kZXhdO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICB0ZXh0ID0gaW5kZXggPCB0ZXh0Lmxlbmd0aCA/IHRleHQuc3Vic3RyaW5nKGluZGV4ICsgMSkgOiBcIlwiO1xuICAgICAgICBpbmRleCA9IHRoaXMuZ2V0SW50VmFsdWUoc3RyKTtcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBjdXJWYWx1ZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGN1clZhbHVlW2luZGV4XSwgdGV4dDogdGV4dCwgaW5kZXg6IGluZGV4IH07XG4gICAgfTtcbiAgICBQcm9jZXNzVmFsdWUucHJvdG90eXBlLmdldEZpcnN0UHJvcGVydHlOYW1lID0gZnVuY3Rpb24gKG5hbWUsIG9iaiwgY3JlYXRlUHJvcCwgY2hlY2tlZEtleXMpIHtcbiAgICAgICAgaWYgKGNyZWF0ZVByb3AgPT09IHZvaWQgMCkgeyBjcmVhdGVQcm9wID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGNoZWNrZWRLZXlzID09PSB2b2lkIDApIHsgY2hlY2tlZEtleXMgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgaWYgKCFuYW1lKVxuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgIGlmICghb2JqKVxuICAgICAgICAgICAgb2JqID0ge307XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobmFtZSkpXG4gICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgdmFyIG5hbWVJbkxvdyA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIEEgPSBuYW1lSW5Mb3dbMF07XG4gICAgICAgIHZhciBhID0gQS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGVja2VkS2V5cykgJiYgY2hlY2tlZEtleXMuaW5kZXhPZihrZXkpID4gLTEpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB2YXIgZmlyc3QgPSBrZXlbMF07XG4gICAgICAgICAgICBpZiAoZmlyc3QgPT09IGEgfHwgZmlyc3QgPT09IEEpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5TmFtZSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlOYW1lID09IG5hbWVJbkxvdylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZUluTG93Lmxlbmd0aCA8PSBrZXlOYW1lLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgdmFyIGNoID0gbmFtZUluTG93W2tleU5hbWUubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICBpZiAoY2ggIT0gXCIuXCIgJiYgY2ggIT0gXCJbXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmIChrZXlOYW1lID09IG5hbWVJbkxvdy5zdWJzdHJpbmcoMCwga2V5TmFtZS5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjcmVhdGVQcm9wICYmIG5hbWVbMF0gIT09IFwiW1wiKSB7XG4gICAgICAgICAgICB2YXIgaW5kID0gbmFtZS5pbmRleE9mKFwiLlwiKTtcbiAgICAgICAgICAgIGlmIChpbmQgPiAtMSkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCBpbmQpO1xuICAgICAgICAgICAgICAgIG9ialtuYW1lXSA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfTtcbiAgICBQcm9jZXNzVmFsdWUucHJvdG90eXBlLmdldE9iamVjdFZhbHVlID0gZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgICAgICBpZiAoIW5hbWUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG9ialtuYW1lXTtcbiAgICB9O1xuICAgIFByb2Nlc3NWYWx1ZS5wcm90b3R5cGUuZ2V0SW50VmFsdWUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIGlmIChzdHIgPT0gXCIwXCIgfHwgKChzdHIgfCAwKSA+IDAgJiYgc3RyICUgMSA9PSAwKSlcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIoc3RyKTtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2Nlc3NWYWx1ZTtcbn0oKSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb25kaXRpb25zLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvY29uZGl0aW9ucy50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IEV4cHJlc3Npb25FeGVjdXRvciwgRXhwcmVzc2lvblJ1bm5lckJhc2UsIENvbmRpdGlvblJ1bm5lciwgRXhwcmVzc2lvblJ1bm5lciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJFeHByZXNzaW9uRXhlY3V0b3JcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBFeHByZXNzaW9uRXhlY3V0b3I7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkV4cHJlc3Npb25SdW5uZXJCYXNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRXhwcmVzc2lvblJ1bm5lckJhc2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkNvbmRpdGlvblJ1bm5lclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIENvbmRpdGlvblJ1bm5lcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiRXhwcmVzc2lvblJ1bm5lclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEV4cHJlc3Npb25SdW5uZXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25kaXRpb25Qcm9jZXNzVmFsdWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uZGl0aW9uUHJvY2Vzc1ZhbHVlICovIFwiLi9zcmMvY29uZGl0aW9uUHJvY2Vzc1ZhbHVlLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25zb2xlX3dhcm5pbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbnNvbGUtd2FybmluZ3MgKi8gXCIuL3NyYy9jb25zb2xlLXdhcm5pbmdzLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25kaXRpb25zUGFyc2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbmRpdGlvbnNQYXJzZXIgKi8gXCIuL3NyYy9jb25kaXRpb25zUGFyc2VyLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgRXhwcmVzc2lvbkV4ZWN1dG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV4cHJlc3Npb25FeGVjdXRvcihleHByZXNzaW9uKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc1ZhbHVlID0gbmV3IF9jb25kaXRpb25Qcm9jZXNzVmFsdWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlByb2Nlc3NWYWx1ZVwiXSgpO1xuICAgICAgICB0aGlzLnBhcnNlciA9IG5ldyBfY29uZGl0aW9uc1BhcnNlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiQ29uZGl0aW9uc1BhcnNlclwiXSgpO1xuICAgICAgICB0aGlzLmlzQXN5bmNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0Z1bmN0aW9uVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXRFeHByZXNzaW9uKGV4cHJlc3Npb24pO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhwcmVzc2lvbkV4ZWN1dG9yLnByb3RvdHlwZSwgXCJleHByZXNzaW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBFeHByZXNzaW9uRXhlY3V0b3IucHJvdG90eXBlLnNldEV4cHJlc3Npb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbiA9PT0gdmFsdWUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvblZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMub3BlcmFuZCA9IHRoaXMucGFyc2VyLnBhcnNlRXhwcmVzc2lvbih2YWx1ZSk7XG4gICAgICAgIHRoaXMuaGFzRnVuY3Rpb25WYWx1ZSA9IHRoaXMuY2FuUnVuKCkgPyB0aGlzLm9wZXJhbmQuaGFzRnVuY3Rpb24oKSA6IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQXN5bmNWYWx1ZSA9IHRoaXMuaGFzRnVuY3Rpb24oKVxuICAgICAgICAgICAgPyB0aGlzLm9wZXJhbmQuaGFzQXN5bmNGdW5jdGlvbigpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgIH07XG4gICAgRXhwcmVzc2lvbkV4ZWN1dG9yLnByb3RvdHlwZS5nZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5vcGVyYW5kKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB2YXIgdmFyaWFibGVzID0gW107XG4gICAgICAgIHRoaXMub3BlcmFuZC5zZXRWYXJpYWJsZXModmFyaWFibGVzKTtcbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlcztcbiAgICB9O1xuICAgIEV4cHJlc3Npb25FeGVjdXRvci5wcm90b3R5cGUuaGFzRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0Z1bmN0aW9uVmFsdWU7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhwcmVzc2lvbkV4ZWN1dG9yLnByb3RvdHlwZSwgXCJpc0FzeW5jXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0FzeW5jVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBFeHByZXNzaW9uRXhlY3V0b3IucHJvdG90eXBlLmNhblJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5vcGVyYW5kO1xuICAgIH07XG4gICAgRXhwcmVzc2lvbkV4ZWN1dG9yLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAodmFsdWVzLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHsgcHJvcGVydGllcyA9IG51bGw7IH1cbiAgICAgICAgaWYgKCF0aGlzLm9wZXJhbmQpIHtcbiAgICAgICAgICAgIGlmICghIXRoaXMuZXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIF9jb25zb2xlX3dhcm5pbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJDb25zb2xlV2FybmluZ3NcIl0ud2FybihcIkludmFsaWQgZXhwcmVzc2lvbjogXCIgKyB0aGlzLmV4cHJlc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9jZXNzVmFsdWUudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICB0aGlzLnByb2Nlc3NWYWx1ZS5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICAgICAgaWYgKCF0aGlzLmlzQXN5bmMpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ydW5WYWx1ZXMoKTtcbiAgICAgICAgdGhpcy5hc3luY0Z1bmNMaXN0ID0gW107XG4gICAgICAgIHRoaXMub3BlcmFuZC5hZGRUb0FzeW5jTGlzdCh0aGlzLmFzeW5jRnVuY0xpc3QpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXN5bmNGdW5jTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hc3luY0Z1bmNMaXN0W2ldLm9uQXN5bmNSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5kb0FzeW5jRnVuY3Rpb25SZWFkeSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXN5bmNGdW5jTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hc3luY0Z1bmNMaXN0W2ldLmV2YWx1YXRlQXN5bmModGhpcy5wcm9jZXNzVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIEV4cHJlc3Npb25FeGVjdXRvci5wcm90b3R5cGUuZG9Bc3luY0Z1bmN0aW9uUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hc3luY0Z1bmNMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXN5bmNGdW5jTGlzdFtpXS5pc1JlYWR5KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1blZhbHVlcygpO1xuICAgIH07XG4gICAgRXhwcmVzc2lvbkV4ZWN1dG9yLnByb3RvdHlwZS5ydW5WYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXMgPSB0aGlzLm9wZXJhbmQuZXZhbHVhdGUodGhpcy5wcm9jZXNzVmFsdWUpO1xuICAgICAgICBpZiAoISF0aGlzLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZShyZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBFeHByZXNzaW9uRXhlY3V0b3IuY3JlYXRlRXhwcmVzc2lvbkV4ZWN1dG9yID0gZnVuY3Rpb24gKGV4cHJlc3Npb24pIHsgcmV0dXJuIG5ldyBFeHByZXNzaW9uRXhlY3V0b3IoZXhwcmVzc2lvbik7IH07XG4gICAgcmV0dXJuIEV4cHJlc3Npb25FeGVjdXRvcjtcbn0oKSk7XG5cbnZhciBFeHByZXNzaW9uUnVubmVyQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFeHByZXNzaW9uUnVubmVyQmFzZShleHByZXNzaW9uKSB7XG4gICAgICAgIHRoaXMuX2lkID0gRXhwcmVzc2lvblJ1bm5lckJhc2UuSWRDb3VudGVyKys7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeHByZXNzaW9uUnVubmVyQmFzZS5wcm90b3R5cGUsIFwiaWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2lkOyB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV4cHJlc3Npb25SdW5uZXJCYXNlLnByb3RvdHlwZSwgXCJleHByZXNzaW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLmV4cHJlc3Npb25FeGVjdXRvciA/IHRoaXMuZXhwcmVzc2lvbkV4ZWN1dG9yLmV4cHJlc3Npb24gOiBcIlwiO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghIXRoaXMuZXhwcmVzc2lvbkV4ZWN1dG9yICYmIHZhbHVlID09PSB0aGlzLmV4cHJlc3Npb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uRXhlY3V0b3IgPSBFeHByZXNzaW9uRXhlY3V0b3IuY3JlYXRlRXhwcmVzc2lvbkV4ZWN1dG9yKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkV4ZWN1dG9yLm9uQ29tcGxldGUgPSBmdW5jdGlvbiAocmVzKSB7IF90aGlzLmRvT25Db21wbGV0ZShyZXMpOyB9O1xuICAgICAgICAgICAgdGhpcy52YXJpYWJsZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5zRnVuYyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEV4cHJlc3Npb25SdW5uZXJCYXNlLnByb3RvdHlwZS5nZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhcmlhYmxlcyA9IHRoaXMuZXhwcmVzc2lvbkV4ZWN1dG9yLmdldFZhcmlhYmxlcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnZhcmlhYmxlcztcbiAgICB9O1xuICAgIEV4cHJlc3Npb25SdW5uZXJCYXNlLnByb3RvdHlwZS5oYXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbnNGdW5jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbnNGdW5jID0gdGhpcy5leHByZXNzaW9uRXhlY3V0b3IuaGFzRnVuY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluc0Z1bmM7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhwcmVzc2lvblJ1bm5lckJhc2UucHJvdG90eXBlLCBcImlzQXN5bmNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25FeGVjdXRvci5pc0FzeW5jO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgRXhwcmVzc2lvblJ1bm5lckJhc2UucHJvdG90eXBlLmNhblJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbkV4ZWN1dG9yLmNhblJ1bigpO1xuICAgIH07XG4gICAgRXhwcmVzc2lvblJ1bm5lckJhc2UucHJvdG90eXBlLnJ1bkNvcmUgPSBmdW5jdGlvbiAodmFsdWVzLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHsgcHJvcGVydGllcyA9IG51bGw7IH1cbiAgICAgICAgaWYgKHRoaXMub25CZWZvcmVBc3luY1J1biAmJiB0aGlzLmlzQXN5bmMpIHtcbiAgICAgICAgICAgIHRoaXMub25CZWZvcmVBc3luY1J1bih0aGlzLmlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uRXhlY3V0b3IucnVuKHZhbHVlcywgcHJvcGVydGllcyk7XG4gICAgfTtcbiAgICBFeHByZXNzaW9uUnVubmVyQmFzZS5wcm90b3R5cGUuZG9PbkNvbXBsZXRlID0gZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBpZiAodGhpcy5vbkFmdGVyQXN5bmNSdW4gJiYgdGhpcy5pc0FzeW5jKSB7XG4gICAgICAgICAgICB0aGlzLm9uQWZ0ZXJBc3luY1J1bih0aGlzLmlkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRXhwcmVzc2lvblJ1bm5lckJhc2UuSWRDb3VudGVyID0gMTtcbiAgICByZXR1cm4gRXhwcmVzc2lvblJ1bm5lckJhc2U7XG59KCkpO1xuXG52YXIgQ29uZGl0aW9uUnVubmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb25kaXRpb25SdW5uZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29uZGl0aW9uUnVubmVyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIENvbmRpdGlvblJ1bm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHZhbHVlcywgcHJvcGVydGllcykge1xuICAgICAgICBpZiAocHJvcGVydGllcyA9PT0gdm9pZCAwKSB7IHByb3BlcnRpZXMgPSBudWxsOyB9XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bkNvcmUodmFsdWVzLCBwcm9wZXJ0aWVzKSA9PSB0cnVlO1xuICAgIH07XG4gICAgQ29uZGl0aW9uUnVubmVyLnByb3RvdHlwZS5kb09uQ29tcGxldGUgPSBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGlmICghIXRoaXMub25SdW5Db21wbGV0ZSlcbiAgICAgICAgICAgIHRoaXMub25SdW5Db21wbGV0ZShyZXMgPT0gdHJ1ZSk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZG9PbkNvbXBsZXRlLmNhbGwodGhpcywgcmVzKTtcbiAgICB9O1xuICAgIHJldHVybiBDb25kaXRpb25SdW5uZXI7XG59KEV4cHJlc3Npb25SdW5uZXJCYXNlKSk7XG5cbnZhciBFeHByZXNzaW9uUnVubmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFeHByZXNzaW9uUnVubmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEV4cHJlc3Npb25SdW5uZXIoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgRXhwcmVzc2lvblJ1bm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHZhbHVlcywgcHJvcGVydGllcykge1xuICAgICAgICBpZiAocHJvcGVydGllcyA9PT0gdm9pZCAwKSB7IHByb3BlcnRpZXMgPSBudWxsOyB9XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bkNvcmUodmFsdWVzLCBwcm9wZXJ0aWVzKTtcbiAgICB9O1xuICAgIEV4cHJlc3Npb25SdW5uZXIucHJvdG90eXBlLmRvT25Db21wbGV0ZSA9IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5vblJ1bkNvbXBsZXRlKVxuICAgICAgICAgICAgdGhpcy5vblJ1bkNvbXBsZXRlKHJlcyk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZG9PbkNvbXBsZXRlLmNhbGwodGhpcywgcmVzKTtcbiAgICB9O1xuICAgIHJldHVybiBFeHByZXNzaW9uUnVubmVyO1xufShFeHByZXNzaW9uUnVubmVyQmFzZSkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29uZGl0aW9uc1BhcnNlci50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2NvbmRpdGlvbnNQYXJzZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBDb25kaXRpb25zUGFyc2VyRXJyb3IsIENvbmRpdGlvbnNQYXJzZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQ29uZGl0aW9uc1BhcnNlckVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQ29uZGl0aW9uc1BhcnNlckVycm9yOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJDb25kaXRpb25zUGFyc2VyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQ29uZGl0aW9uc1BhcnNlcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2V4cHJlc3Npb25zX2V4cHJlc3Npb25QYXJzZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZXhwcmVzc2lvbnMvZXhwcmVzc2lvblBhcnNlciAqLyBcIi4vc3JjL2V4cHJlc3Npb25zL2V4cHJlc3Npb25QYXJzZXIudHNcIik7XG5cbnZhciBDb25kaXRpb25zUGFyc2VyRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29uZGl0aW9uc1BhcnNlckVycm9yKGF0LCBjb2RlKSB7XG4gICAgICAgIHRoaXMuYXQgPSBhdDtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG4gICAgcmV0dXJuIENvbmRpdGlvbnNQYXJzZXJFcnJvcjtcbn0oKSk7XG5cbnZhciBDb25kaXRpb25zUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbmRpdGlvbnNQYXJzZXIoKSB7XG4gICAgfVxuICAgIENvbmRpdGlvbnNQYXJzZXIucHJvdG90eXBlLnBhdGNoRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAucmVwbGFjZSgvPT4vZywgXCI+PVwiKVxuICAgICAgICAgICAgLnJlcGxhY2UoLz08L2csIFwiPD1cIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC88Pi9nLCBcIiE9XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvZXF1YWxzL2csIFwiZXF1YWwgXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvbm90ZXF1YWxzL2csIFwibm90ZXF1YWwgXCIpO1xuICAgIH07XG4gICAgQ29uZGl0aW9uc1BhcnNlci5wcm90b3R5cGUuY3JlYXRlQ29uZGl0aW9uID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHByZXNzaW9uKHRleHQpO1xuICAgIH07XG4gICAgQ29uZGl0aW9uc1BhcnNlci5wcm90b3R5cGUucGFyc2VFeHByZXNzaW9uID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBDb25kaXRpb25zUGFyc2VyLnBhcnNlckNhY2hlW3RleHRdO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gT2JqZWN0KF9leHByZXNzaW9uc19leHByZXNzaW9uUGFyc2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwYXJzZVwiXSkodGhpcy5wYXRjaEV4cHJlc3Npb24odGV4dCkpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0Lmhhc0FzeW5jRnVuY3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICBDb25kaXRpb25zUGFyc2VyLnBhcnNlckNhY2hlW3RleHRdID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgX2V4cHJlc3Npb25zX2V4cHJlc3Npb25QYXJzZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN5bnRheEVycm9yXCJdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25kaXRpb25FcnJvciA9IG5ldyBDb25kaXRpb25zUGFyc2VyRXJyb3IoZS5sb2NhdGlvbi5zdGFydC5vZmZzZXQsIGUubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25kaXRpb25zUGFyc2VyLnByb3RvdHlwZSwgXCJlcnJvclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uRXJyb3I7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb25kaXRpb25zUGFyc2VyLnBhcnNlckNhY2hlID0ge307XG4gICAgcmV0dXJuIENvbmRpdGlvbnNQYXJzZXI7XG59KCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29uc29sZS13YXJuaW5ncy50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2NvbnNvbGUtd2FybmluZ3MudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBDb25zb2xlV2FybmluZ3MgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQ29uc29sZVdhcm5pbmdzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQ29uc29sZVdhcm5pbmdzOyB9KTtcbnZhciBDb25zb2xlV2FybmluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29uc29sZVdhcm5pbmdzKCkge1xuICAgIH1cbiAgICBDb25zb2xlV2FybmluZ3MuZGlzcG9zZWRPYmplY3RDaGFuZ2VkUHJvcGVydHkgPSBmdW5jdGlvbiAocHJvcE5hbWUsIG9ialR5cGUpIHtcbiAgICAgICAgQ29uc29sZVdhcm5pbmdzLndhcm4oXCJBbiBhdHRlbXB0IHRvIHNldCBhIHByb3BlcnR5IFxcXCJcIiArIHByb3BOYW1lICsgXCJcXFwiIG9mIGEgZGlzcG9zZWQgb2JqZWN0IFxcXCJcIiArIG9ialR5cGUgKyBcIlxcXCJcIik7XG4gICAgfTtcbiAgICBDb25zb2xlV2FybmluZ3MuaW5Db3JyZWN0UXVlc3Rpb25WYWx1ZSA9IGZ1bmN0aW9uIChxdWVzdGlvbk5hbWUsIHZhbCkge1xuICAgICAgICB2YXIgdmFsU3RyID0gSlNPTi5zdHJpbmdpZnkodmFsLCBudWxsLCAzKTtcbiAgICAgICAgQ29uc29sZVdhcm5pbmdzLndhcm4oXCJBbiBhdHRlbXB0IHRvIGFzc2lnbiBhbiBpbmNvcnJlY3QgdmFsdWVcIiArIHZhbFN0ciArIFwiIHRvIHRoZSBmb2xsb3dpbmcgcXVlc3Rpb246IFxcXCJcIiArIHF1ZXN0aW9uTmFtZSArIFwiXFxcIlwiKTtcbiAgICB9O1xuICAgIENvbnNvbGVXYXJuaW5ncy53YXJuID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKHRleHQpO1xuICAgIH07XG4gICAgQ29uc29sZVdhcm5pbmdzLmVycm9yID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcih0ZXh0KTtcbiAgICB9O1xuICAgIHJldHVybiBDb25zb2xlV2FybmluZ3M7XG59KCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZWxlbWVudC1oZWxwZXIudHNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudC1oZWxwZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogRWxlbWVudEhlbHBlciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJFbGVtZW50SGVscGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRWxlbWVudEhlbHBlcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZ2xvYmFsX3ZhcmlhYmxlc191dGlscyAqLyBcIi4vc3JjL2dsb2JhbF92YXJpYWJsZXNfdXRpbHMudHNcIik7XG5cbnZhciBFbGVtZW50SGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVsZW1lbnRIZWxwZXIoKSB7XG4gICAgfVxuICAgIEVsZW1lbnRIZWxwZXIuZm9jdXNFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudCAmJiBlbGVtZW50LmZvY3VzKCk7XG4gICAgfTtcbiAgICBFbGVtZW50SGVscGVyLnZpc2liaWxpdHkgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgc3R5bGUgPSBfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRG9tRG9jdW1lbnRIZWxwZXJcIl0uZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICAgICAgaWYgKHN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiIHx8IHN0eWxlLnZpc2liaWxpdHkgPT09IFwiaGlkZGVuXCIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBub2RlLnBhcmVudEVsZW1lbnQgPyB0aGlzLnZpc2liaWxpdHkobm9kZS5wYXJlbnRFbGVtZW50KSA6IHRydWU7XG4gICAgfTtcbiAgICBFbGVtZW50SGVscGVyLmdldE5leHRFbGVtZW50UHJlb3JkZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gISFlbGVtZW50Lm5leHRFbGVtZW50U2libGluZyA/IGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nIDogZWxlbWVudC5wYXJlbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICBpZiAodGhpcy52aXNpYmlsaXR5KHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXROZXh0RWxlbWVudFByZW9yZGVyKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVsZW1lbnRIZWxwZXIuZ2V0TmV4dEVsZW1lbnRQb3N0b3JkZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gISFlbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPyBlbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgOiBlbGVtZW50LnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgaWYgKHRoaXMudmlzaWJpbGl0eShyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TmV4dEVsZW1lbnRQb3N0b3JkZXIocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudEhlbHBlci5oYXNIb3Jpem9udGFsU2Nyb2xsZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoISFlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5zY3JvbGxXaWR0aCA+IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgRWxlbWVudEhlbHBlci5oYXNWZXJ0aWNhbFNjcm9sbGVyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCEhZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIEVsZW1lbnRIZWxwZXI7XG59KCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZW50cmllcy9jb3JlLWV4cG9ydC50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VudHJpZXMvY29yZS1leHBvcnQudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlNb2RlbCwgU3VydmV5V2luZG93TW9kZWwsIHNldHRpbmdzLCBzdXJ2ZXlMb2NhbGl6YXRpb24sIHN1cnZleVN0cmluZ3MgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleU1vZGVsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleU1vZGVsXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5V2luZG93TW9kZWxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5V2luZG93TW9kZWxcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzZXR0aW5nc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJzZXR0aW5nc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInN1cnZleUxvY2FsaXphdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJzdXJ2ZXlMb2NhbGl6YXRpb25cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzdXJ2ZXlTdHJpbmdzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInN1cnZleVN0cmluZ3NcIl07IH0pO1xuXG5cblxuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZW50cmllcy9yZWFjdC11aS1tb2RlbC50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VudHJpZXMvcmVhY3QtdWktbW9kZWwudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXksIGF0dGFjaEtleTJjbGljaywgUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXIsIFN1cnZleU5hdmlnYXRpb25CYXNlLCBTdXJ2ZXlUaW1lclBhbmVsLCBTdXJ2ZXlQYWdlLCBTdXJ2ZXlSb3csIFN1cnZleVBhbmVsLCBTdXJ2ZXlGbG93UGFuZWwsIFN1cnZleVF1ZXN0aW9uLCBTdXJ2ZXlFbGVtZW50RXJyb3JzLCBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc0NlbGwsIFJlYWN0U3VydmV5RWxlbWVudCwgU3VydmV5RWxlbWVudEJhc2UsIFN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2UsIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW0sIFN1cnZleVF1ZXN0aW9uQ29tbWVudCwgU3VydmV5UXVlc3Rpb25DaGVja2JveCwgU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0sIFN1cnZleVF1ZXN0aW9uUmFua2luZywgU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbSwgUmF0aW5nSXRlbSwgUmF0aW5nSXRlbVN0YXIsIFJhdGluZ0l0ZW1TbWlsZXksIFJhdGluZ0Ryb3Bkb3duSXRlbSwgVGFnYm94RmlsdGVyU3RyaW5nLCBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0sIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlLCBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duLCBTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW0sIFN1cnZleVF1ZXN0aW9uVGFnYm94LCBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duU2VsZWN0LCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeCwgU3VydmV5UXVlc3Rpb25NYXRyaXhSb3csIFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbCwgU3VydmV5UXVlc3Rpb25IdG1sLCBTdXJ2ZXlRdWVzdGlvbkZpbGUsIFN1cnZleUZpbGVDaG9vc2VCdXR0b24sIFN1cnZleUZpbGVQcmV2aWV3LCBTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dCwgU3VydmV5UXVlc3Rpb25SYWRpb2dyb3VwLCBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbSwgU3VydmV5UXVlc3Rpb25UZXh0LCBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW4sIFN1cnZleVF1ZXN0aW9uQm9vbGVhbkNoZWNrYm94LCBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5SYWRpbywgU3VydmV5UXVlc3Rpb25FbXB0eSwgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGwsIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWMsIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY0FkZEJ1dHRvbiwgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWMsIFN1cnZleVByb2dyZXNzLCBTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMsIFN1cnZleVByb2dyZXNzVG9jLCBTdXJ2ZXlRdWVzdGlvblJhdGluZywgU3VydmV5UXVlc3Rpb25SYXRpbmdEcm9wZG93biwgU3VydmV5UXVlc3Rpb25FeHByZXNzaW9uLCBQb3B1cFN1cnZleSwgU3VydmV5V2luZG93LCBSZWFjdFF1ZXN0aW9uRmFjdG9yeSwgUmVhY3RFbGVtZW50RmFjdG9yeSwgU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlciwgU3VydmV5UXVlc3Rpb25JbWFnZSwgU3VydmV5UXVlc3Rpb25TaWduYXR1cmVQYWQsIFN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXAsIFN1cnZleVF1ZXN0aW9uQ3VzdG9tLCBTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZSwgUG9wdXAsIExpc3QsIFRpdGxlQWN0aW9ucywgVGl0bGVFbGVtZW50LCBTdXJ2ZXlBY3Rpb25CYXIsIExvZ29JbWFnZSwgU3VydmV5SGVhZGVyLCBTdmdJY29uLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNSZW1vdmVCdXR0b24sIFN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNEcmFnRHJvcEljb24sIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uLCBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvbiwgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcmV2QnV0dG9uLCBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY05leHRCdXR0b24sIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0LCBTdXJ2ZXlOYXZpZ2F0aW9uQnV0dG9uLCBNYXRyaXhSb3csIFNrZWxldG9uLCBOb3RpZmllckNvbXBvbmVudCwgQ29tcG9uZW50c0NvbnRhaW5lciwgQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudCwgSGVhZGVyTW9iaWxlLCBIZWFkZXJDZWxsLCBIZWFkZXIsIFN1cnZleUxvY1N0cmluZ1ZpZXdlciwgU3VydmV5TG9jU3RyaW5nRWRpdG9yLCBMb2FkaW5nSW5kaWNhdG9yQ29tcG9uZW50LCBTdmdCdW5kbGVDb21wb25lbnQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0U3VydmV5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdFN1cnZleSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0U3VydmV5LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdFN1cnZleV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYXR0YWNoS2V5MmNsaWNrXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0U3VydmV5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJhdHRhY2hLZXkyY2xpY2tcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0c3VydmV5bW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0c3VydmV5bW9kZWwgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHN1cnZleW1vZGVsLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlJlYWN0U3VydmV5RWxlbWVudHNXcmFwcGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0c3VydmV5bW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0U3VydmV5RWxlbWVudHNXcmFwcGVyXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlICovIFwiLi9zcmMvcmVhY3QvcmVhY3RTdXJ2ZXlOYXZpZ2F0aW9uQmFzZS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlOYXZpZ2F0aW9uQmFzZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlOYXZpZ2F0aW9uQmFzZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3R0aW1lcnBhbmVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHRpbWVycGFuZWwgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHRpbWVycGFuZWwudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5VGltZXJQYW5lbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHRpbWVycGFuZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleVRpbWVyUGFuZWxcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3BhZ2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3BhZ2UgKi8gXCIuL3NyYy9yZWFjdC9wYWdlLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVBhZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcGFnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3VydmV5UGFnZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3Rfcm93X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yb3cgKi8gXCIuL3NyYy9yZWFjdC9yb3cudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5Um93XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3Jvd19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiU3VydmV5Um93XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9wYW5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcGFuZWwgKi8gXCIuL3NyYy9yZWFjdC9wYW5lbC50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlQYW5lbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9wYW5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiU3VydmV5UGFuZWxcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2Zsb3dfcGFuZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2Zsb3ctcGFuZWwgKi8gXCIuL3NyYy9yZWFjdC9mbG93LXBhbmVsLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUZsb3dQYW5lbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9mbG93X3BhbmVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJTdXJ2ZXlGbG93UGFuZWxcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb24gKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1tcIlN1cnZleVF1ZXN0aW9uXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5RWxlbWVudEVycm9yc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJTdXJ2ZXlFbGVtZW50RXJyb3JzXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1tcIlN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzQ2VsbFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVhY3RTdXJ2ZXlFbGVtZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5RWxlbWVudEJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2NvbW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHF1ZXN0aW9uX2NvbW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2NvbW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2NvbW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Db21tZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fY29tbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfX1tcIlN1cnZleVF1ZXN0aW9uQ29tbWVudFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3RxdWVzdGlvbl9jaGVja2JveF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fY2hlY2tib3ggKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2NoZWNrYm94LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQ2hlY2tib3hcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9jaGVja2JveF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfX1tcIlN1cnZleVF1ZXN0aW9uQ2hlY2tib3hcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2NoZWNrYm94X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fW1wiU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW1cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fcmFua2luZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fcmFua2luZyAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fcmFua2luZy50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblJhbmtpbmdcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9yYW5raW5nX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMl9fW1wiU3VydmV5UXVlc3Rpb25SYW5raW5nXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX3JhbmtpbmdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEyX19bXCJTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3JhdGluZ19yYXRpbmdfaXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvcmF0aW5nL3JhdGluZy1pdGVtICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWl0ZW0udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmF0aW5nSXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX3JhdGluZ19yYXRpbmdfaXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTNfX1tcIlJhdGluZ0l0ZW1cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfcmF0aW5nX3JhdGluZ19pdGVtX3N0YXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL3JhdGluZy9yYXRpbmctaXRlbS1zdGFyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWl0ZW0tc3Rhci50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSYXRpbmdJdGVtU3RhclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX3JhdGluZ19yYXRpbmdfaXRlbV9zdGFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNF9fW1wiUmF0aW5nSXRlbVN0YXJcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfcmF0aW5nX3JhdGluZ19pdGVtX3NtaWxleV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvcmF0aW5nL3JhdGluZy1pdGVtLXNtaWxleSAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcmF0aW5nL3JhdGluZy1pdGVtLXNtaWxleS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSYXRpbmdJdGVtU21pbGV5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfcmF0aW5nX3JhdGluZ19pdGVtX3NtaWxleV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTVfX1tcIlJhdGluZ0l0ZW1TbWlsZXlcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfcmF0aW5nX3JhdGluZ19kcm9wZG93bl9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWRyb3Bkb3duLWl0ZW0gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3JhdGluZy9yYXRpbmctZHJvcGRvd24taXRlbS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSYXRpbmdEcm9wZG93bkl0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19yYXRpbmdfcmF0aW5nX2Ryb3Bkb3duX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE2X19bXCJSYXRpbmdEcm9wZG93bkl0ZW1cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3RhZ2JveF9maWx0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC90YWdib3gtZmlsdGVyICovIFwiLi9zcmMvcmVhY3QvdGFnYm94LWZpbHRlci50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJUYWdib3hGaWx0ZXJTdHJpbmdcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdGFnYm94X2ZpbHRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTdfX1tcIlRhZ2JveEZpbHRlclN0cmluZ1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfZHJvcGRvd25faXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMThfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2Ryb3Bkb3duLWl0ZW0gKi8gXCIuL3NyYy9yZWFjdC9kcm9wZG93bi1pdGVtLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uT3B0aW9uSXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9kcm9wZG93bl9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOF9fW1wiU3VydmV5UXVlc3Rpb25PcHRpb25JdGVtXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9kcm9wZG93bl9iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvZHJvcGRvd24tYmFzZSAqLyBcIi4vc3JjL3JlYWN0L2Ryb3Bkb3duLWJhc2UudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfZHJvcGRvd25fYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTlfX1tcIlN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2Ryb3Bkb3duX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcmVhY3RxdWVzdGlvbl9kcm9wZG93biAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZHJvcGRvd24udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Ecm9wZG93blwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2Ryb3Bkb3duX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMF9fW1wiU3VydmV5UXVlc3Rpb25Ecm9wZG93blwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfdGFnYm94X2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIxX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC90YWdib3gtaXRlbSAqLyBcIi4vc3JjL3JlYWN0L3RhZ2JveC1pdGVtLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uVGFnYm94SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF90YWdib3hfaXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjFfX1tcIlN1cnZleVF1ZXN0aW9uVGFnYm94SXRlbVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3RxdWVzdGlvbl90YWdib3hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHF1ZXN0aW9uX3RhZ2JveCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fdGFnYm94LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uVGFnYm94XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fdGFnYm94X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMl9fW1wiU3VydmV5UXVlc3Rpb25UYWdib3hcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2Ryb3Bkb3duX3NlbGVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2Ryb3Bkb3duLXNlbGVjdCAqLyBcIi4vc3JjL3JlYWN0L2Ryb3Bkb3duLXNlbGVjdC50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duU2VsZWN0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2Ryb3Bkb3duX3NlbGVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjNfX1tcIlN1cnZleVF1ZXN0aW9uRHJvcGRvd25TZWxlY3RcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fbWF0cml4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcmVhY3RxdWVzdGlvbl9tYXRyaXggKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX21hdHJpeC50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX21hdHJpeF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjRfX1tcIlN1cnZleVF1ZXN0aW9uTWF0cml4XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhSb3dcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9tYXRyaXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI0X19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeFJvd1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX21hdHJpeF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjRfX1tcIlN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3RxdWVzdGlvbl9odG1sX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcmVhY3RxdWVzdGlvbl9odG1sICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9odG1sLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uSHRtbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2h0bWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI1X19bXCJTdXJ2ZXlRdWVzdGlvbkh0bWxcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fZmlsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmlsZSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmlsZS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkZpbGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9maWxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNl9fW1wiU3VydmV5UXVlc3Rpb25GaWxlXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX2ZpbGVfZmlsZV9jaG9vc2VfYnV0dG9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9maWxlL2ZpbGUtY2hvb3NlLWJ1dHRvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvZmlsZS9maWxlLWNob29zZS1idXR0b24udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5RmlsZUNob29zZUJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX2ZpbGVfZmlsZV9jaG9vc2VfYnV0dG9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yN19fW1wiU3VydmV5RmlsZUNob29zZUJ1dHRvblwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c19maWxlX2ZpbGVfcHJldmlld19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvZmlsZS9maWxlLXByZXZpZXcgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2ZpbGUvZmlsZS1wcmV2aWV3LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUZpbGVQcmV2aWV3XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfZmlsZV9maWxlX3ByZXZpZXdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI4X19bXCJTdXJ2ZXlGaWxlUHJldmlld1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3RxdWVzdGlvbl9tdWx0aXBsZXRleHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHF1ZXN0aW9uX211bHRpcGxldGV4dCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fbXVsdGlwbGV0ZXh0LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTXVsdGlwbGVUZXh0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fbXVsdGlwbGV0ZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yOV9fW1wiU3VydmV5UXVlc3Rpb25NdWx0aXBsZVRleHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fcmFkaW9ncm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fcmFkaW9ncm91cCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fcmFkaW9ncm91cC50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXBcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9yYWRpb2dyb3VwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMF9fW1wiU3VydmV5UXVlc3Rpb25SYWRpb2dyb3VwXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9yYWRpb2dyb3VwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMF9fW1wiU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW1cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fdGV4dF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fdGV4dCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fdGV4dC50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblRleHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl90ZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMV9fW1wiU3VydmV5UXVlc3Rpb25UZXh0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9ib29sZWFuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvYm9vbGVhbiAqLyBcIi4vc3JjL3JlYWN0L2Jvb2xlYW4udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Cb29sZWFuXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2Jvb2xlYW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMyX19bXCJTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2Jvb2xlYW5fY2hlY2tib3hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9ib29sZWFuLWNoZWNrYm94ICovIFwiLi9zcmMvcmVhY3QvYm9vbGVhbi1jaGVja2JveC50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5DaGVja2JveFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9ib29sZWFuX2NoZWNrYm94X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zM19fW1wiU3VydmV5UXVlc3Rpb25Cb29sZWFuQ2hlY2tib3hcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2Jvb2xlYW5fcmFkaW9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9ib29sZWFuLXJhZGlvICovIFwiLi9zcmMvcmVhY3QvYm9vbGVhbi1yYWRpby50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5SYWRpb1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9ib29sZWFuX3JhZGlvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zNF9fW1wiU3VydmV5UXVlc3Rpb25Cb29sZWFuUmFkaW9cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VtcHR5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbXB0eS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkVtcHR5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM1X19bXCJTdXJ2ZXlRdWVzdGlvbkVtcHR5XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fbWF0cml4ZHJvcGRvd25iYXNlICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9tYXRyaXhkcm9wZG93bmJhc2UudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9tYXRyaXhkcm9wZG93bmJhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM2X19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fbWF0cml4ZHJvcGRvd25iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zNl9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2VcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fbWF0cml4ZHJvcGRvd25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9tYXRyaXhkcm9wZG93bi50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fbWF0cml4ZHJvcGRvd25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM3X19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX21hdHJpeGR5bmFtaWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9yZWFjdHF1ZXN0aW9uX21hdHJpeGR5bmFtaWMgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX21hdHJpeGR5bmFtaWMudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3JlYWN0cXVlc3Rpb25fbWF0cml4ZHluYW1pY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzhfX1tcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY0FkZEJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX21hdHJpeGR5bmFtaWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM4X19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b25cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fcGFuZWxkeW5hbWljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcmVhY3RxdWVzdGlvbl9wYW5lbGR5bmFtaWMgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX3BhbmVsZHluYW1pYy50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX3BhbmVsZHluYW1pY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzlfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9wcm9ncmVzc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3Byb2dyZXNzICovIFwiLi9zcmMvcmVhY3QvcHJvZ3Jlc3MudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UHJvZ3Jlc3NcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcHJvZ3Jlc3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQwX19bXCJTdXJ2ZXlQcm9ncmVzc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcHJvZ3Jlc3NCdXR0b25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80MV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcHJvZ3Jlc3NCdXR0b25zICovIFwiLi9zcmMvcmVhY3QvcHJvZ3Jlc3NCdXR0b25zLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVByb2dyZXNzQnV0dG9uc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9wcm9ncmVzc0J1dHRvbnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQxX19bXCJTdXJ2ZXlQcm9ncmVzc0J1dHRvbnNcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3Byb2dyZXNzVG9jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80Ml9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcHJvZ3Jlc3NUb2MgKi8gXCIuL3NyYy9yZWFjdC9wcm9ncmVzc1RvYy50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlQcm9ncmVzc1RvY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9wcm9ncmVzc1RvY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDJfX1tcIlN1cnZleVByb2dyZXNzVG9jXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX3JhdGluZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fcmF0aW5nICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9yYXRpbmcudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25SYXRpbmdcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9yYXRpbmdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQzX19bXCJTdXJ2ZXlRdWVzdGlvblJhdGluZ1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmF0aW5nX2Ryb3Bkb3duX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcmF0aW5nLWRyb3Bkb3duICovIFwiLi9zcmMvcmVhY3QvcmF0aW5nLWRyb3Bkb3duLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmF0aW5nRHJvcGRvd25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmF0aW5nX2Ryb3Bkb3duX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NF9fW1wiU3VydmV5UXVlc3Rpb25SYXRpbmdEcm9wZG93blwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3RxdWVzdGlvbl9leHByZXNzaW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcmVhY3RxdWVzdGlvbl9leHByZXNzaW9uICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9leHByZXNzaW9uLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uRXhwcmVzc2lvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2V4cHJlc3Npb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ1X19bXCJTdXJ2ZXlRdWVzdGlvbkV4cHJlc3Npb25cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0X3BvcHVwX3N1cnZleV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0LXBvcHVwLXN1cnZleSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0LXBvcHVwLXN1cnZleS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJQb3B1cFN1cnZleVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdF9wb3B1cF9zdXJ2ZXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ2X19bXCJQb3B1cFN1cnZleVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVdpbmRvd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdF9wb3B1cF9zdXJ2ZXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ2X19bXCJTdXJ2ZXlXaW5kb3dcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ3X19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80OF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlJlYWN0RWxlbWVudEZhY3RvcnlcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80OF9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfaW1hZ2VwaWNrZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9pbWFnZXBpY2tlciAqLyBcIi4vc3JjL3JlYWN0L2ltYWdlcGlja2VyLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfaW1hZ2VwaWNrZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ5X19bXCJTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VyXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9pbWFnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2ltYWdlICovIFwiLi9zcmMvcmVhY3QvaW1hZ2UudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25JbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9pbWFnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTBfX1tcIlN1cnZleVF1ZXN0aW9uSW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3NpZ25hdHVyZXBhZF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3NpZ25hdHVyZXBhZCAqLyBcIi4vc3JjL3JlYWN0L3NpZ25hdHVyZXBhZC50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblNpZ25hdHVyZVBhZFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9zaWduYXR1cmVwYWRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUxX19bXCJTdXJ2ZXlRdWVzdGlvblNpZ25hdHVyZVBhZFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfcmVhY3RxdWVzdGlvbl9idXR0b25ncm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3JlYWN0cXVlc3Rpb25fYnV0dG9uZ3JvdXAgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2J1dHRvbmdyb3VwLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXBcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9idXR0b25ncm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTJfX1tcIlN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXBcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3JlYWN0cXVlc3Rpb25fY3VzdG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81M19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvcmVhY3RxdWVzdGlvbl9jdXN0b20gKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2N1c3RvbS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkN1c3RvbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9yZWFjdHF1ZXN0aW9uX2N1c3RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTNfX1tcIlN1cnZleVF1ZXN0aW9uQ3VzdG9tXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Db21wb3NpdGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfcmVhY3RxdWVzdGlvbl9jdXN0b21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUzX19bXCJTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c19wb3B1cF9wb3B1cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvcG9wdXAvcG9wdXAgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BvcHVwL3BvcHVwLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlBvcHVwXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfcG9wdXBfcG9wdXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU0X19bXCJQb3B1cFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c19saXN0X2xpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL2xpc3QvbGlzdCAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbGlzdC9saXN0LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxpc3RcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19saXN0X2xpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU1X19bXCJMaXN0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3RpdGxlX3RpdGxlX2FjdGlvbnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWFjdGlvbnMgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWFjdGlvbnMudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiVGl0bGVBY3Rpb25zXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfdGl0bGVfdGl0bGVfYWN0aW9uc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTZfX1tcIlRpdGxlQWN0aW9uc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c190aXRsZV90aXRsZV9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81N19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy90aXRsZS90aXRsZS1lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy90aXRsZS90aXRsZS1lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlRpdGxlRWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX3RpdGxlX3RpdGxlX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU3X19bXCJUaXRsZUVsZW1lbnRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfYWN0aW9uX2Jhcl9hY3Rpb25fYmFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81OF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlBY3Rpb25CYXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19hY3Rpb25fYmFyX2FjdGlvbl9iYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU4X19bXCJTdXJ2ZXlBY3Rpb25CYXJcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfc3VydmV5X2hlYWRlcl9sb2dvX2ltYWdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81OV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9zdXJ2ZXktaGVhZGVyL2xvZ28taW1hZ2UgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N1cnZleS1oZWFkZXIvbG9nby1pbWFnZS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJMb2dvSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19zdXJ2ZXlfaGVhZGVyX2xvZ29faW1hZ2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU5X19bXCJMb2dvSW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfc3VydmV5X2hlYWRlcl9zdXJ2ZXlfaGVhZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82MF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9zdXJ2ZXktaGVhZGVyL3N1cnZleS1oZWFkZXIgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N1cnZleS1oZWFkZXIvc3VydmV5LWhlYWRlci50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlIZWFkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19zdXJ2ZXlfaGVhZGVyX3N1cnZleV9oZWFkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzYwX19bXCJTdXJ2ZXlIZWFkZXJcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzYxX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdmdJY29uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzYxX19bXCJTdmdJY29uXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX21hdHJpeF9hY3Rpb25zX3JlbW92ZV9idXR0b25fcmVtb3ZlX2J1dHRvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvbWF0cml4LWFjdGlvbnMvcmVtb3ZlLWJ1dHRvbi9yZW1vdmUtYnV0dG9uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9tYXRyaXgtYWN0aW9ucy9yZW1vdmUtYnV0dG9uL3JlbW92ZS1idXR0b24udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljUmVtb3ZlQnV0dG9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfbWF0cml4X2FjdGlvbnNfcmVtb3ZlX2J1dHRvbl9yZW1vdmVfYnV0dG9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82Ml9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljUmVtb3ZlQnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX21hdHJpeF9hY3Rpb25zX2RldGFpbF9idXR0b25fZGV0YWlsX2J1dHRvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvbWF0cml4LWFjdGlvbnMvZGV0YWlsLWJ1dHRvbi9kZXRhaWwtYnV0dG9uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9tYXRyaXgtYWN0aW9ucy9kZXRhaWwtYnV0dG9uL2RldGFpbC1idXR0b24udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEZXRhaWxCdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19tYXRyaXhfYWN0aW9uc19kZXRhaWxfYnV0dG9uX2RldGFpbF9idXR0b25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzYzX19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeERldGFpbEJ1dHRvblwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c19tYXRyaXhfYWN0aW9uc19kcmFnX2Ryb3BfaWNvbl9kcmFnX2Ryb3BfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvbWF0cml4LWFjdGlvbnMvZHJhZy1kcm9wLWljb24vZHJhZy1kcm9wLWljb24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL21hdHJpeC1hY3Rpb25zL2RyYWctZHJvcC1pY29uL2RyYWctZHJvcC1pY29uLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY0RyYWdEcm9wSWNvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX21hdHJpeF9hY3Rpb25zX2RyYWdfZHJvcF9pY29uX2RyYWdfZHJvcF9pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82NF9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljRHJhZ0Ryb3BJY29uXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3BhbmVsZHluYW1pY19hY3Rpb25zX3BhbmVsZHluYW1pY19hZGRfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82NV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtYWRkLWJ0biAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLWFkZC1idG4udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNBZGRCdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19wYW5lbGR5bmFtaWNfYWN0aW9uc19wYW5lbGR5bmFtaWNfYWRkX2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjVfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3BhbmVsZHluYW1pY19hY3Rpb25zX3BhbmVsZHluYW1pY19yZW1vdmVfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82Nl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcmVtb3ZlLWJ0biAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLXJlbW92ZS1idG4udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNSZW1vdmVCdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19wYW5lbGR5bmFtaWNfYWN0aW9uc19wYW5lbGR5bmFtaWNfcmVtb3ZlX2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjZfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUmVtb3ZlQnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3BhbmVsZHluYW1pY19hY3Rpb25zX3BhbmVsZHluYW1pY19wcmV2X2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLXByZXYtYnRuICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcHJldi1idG4udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcmV2QnV0dG9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfcGFuZWxkeW5hbWljX2FjdGlvbnNfcGFuZWxkeW5hbWljX3ByZXZfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82N19fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcmV2QnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3BhbmVsZHluYW1pY19hY3Rpb25zX3BhbmVsZHluYW1pY19uZXh0X2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLW5leHQtYnRuICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtbmV4dC1idG4udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNOZXh0QnV0dG9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfcGFuZWxkeW5hbWljX2FjdGlvbnNfcGFuZWxkeW5hbWljX25leHRfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82OF9fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNOZXh0QnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3BhbmVsZHluYW1pY19hY3Rpb25zX3BhbmVsZHluYW1pY19wcm9ncmVzc190ZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82OV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcHJvZ3Jlc3MtdGV4dCAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLXByb2dyZXNzLXRleHQudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcm9ncmVzc1RleHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19wYW5lbGR5bmFtaWNfYWN0aW9uc19wYW5lbGR5bmFtaWNfcHJvZ3Jlc3NfdGV4dF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjlfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX3N1cnZleV9hY3Rpb25zX3N1cnZleV9uYXZfYnV0dG9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83MF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9zdXJ2ZXktYWN0aW9ucy9zdXJ2ZXktbmF2LWJ1dHRvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3VydmV5LWFjdGlvbnMvc3VydmV5LW5hdi1idXR0b24udHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5TmF2aWdhdGlvbkJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX3N1cnZleV9hY3Rpb25zX3N1cnZleV9uYXZfYnV0dG9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83MF9fW1wiU3VydmV5TmF2aWdhdGlvbkJ1dHRvblwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c19tYXRyaXhfcm93X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83MV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9tYXRyaXgvcm93ICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9tYXRyaXgvcm93LnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIk1hdHJpeFJvd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX21hdHJpeF9yb3dfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzcxX19bXCJNYXRyaXhSb3dcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfc2tlbGV0b25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzcyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL3NrZWxldG9uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9za2VsZXRvbi50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTa2VsZXRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX3NrZWxldG9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83Ml9fW1wiU2tlbGV0b25cIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfbm90aWZpZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzczX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL25vdGlmaWVyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9ub3RpZmllci50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJOb3RpZmllckNvbXBvbmVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX25vdGlmaWVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83M19fW1wiTm90aWZpZXJDb21wb25lbnRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X2NvbXBvbmVudHNfY29tcG9uZW50c19jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL2NvbXBvbmVudHMtY29udGFpbmVyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9jb21wb25lbnRzLWNvbnRhaW5lci50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJDb21wb25lbnRzQ29udGFpbmVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfY29tcG9uZW50c19jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc0X19bXCJDb21wb25lbnRzQ29udGFpbmVyXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9jb21wb25lbnRzX2NoYXJhY3Rlcl9jb3VudGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83NV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3QvY29tcG9uZW50cy9jaGFyYWN0ZXItY291bnRlciAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvY2hhcmFjdGVyLWNvdW50ZXIudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX2NoYXJhY3Rlcl9jb3VudGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83NV9fW1wiQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c19oZWFkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9jb21wb25lbnRzL2hlYWRlciAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvaGVhZGVyLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkhlYWRlck1vYmlsZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF9jb21wb25lbnRzX2hlYWRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzZfX1tcIkhlYWRlck1vYmlsZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkhlYWRlckNlbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19oZWFkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc2X19bXCJIZWFkZXJDZWxsXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiSGVhZGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X2NvbXBvbmVudHNfaGVhZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83Nl9fW1wiSGVhZGVyXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF9zdHJpbmdfdmlld2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83N19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3Qvc3RyaW5nLXZpZXdlciAqLyBcIi4vc3JjL3JlYWN0L3N0cmluZy12aWV3ZXIudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5TG9jU3RyaW5nVmlld2VyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3N0cmluZ192aWV3ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc3X19bXCJTdXJ2ZXlMb2NTdHJpbmdWaWV3ZXJcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3N0cmluZ19lZGl0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdC9zdHJpbmctZWRpdG9yICovIFwiLi9zcmMvcmVhY3Qvc3RyaW5nLWVkaXRvci50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlMb2NTdHJpbmdFZGl0b3JcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3Rfc3RyaW5nX2VkaXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzhfX1tcIlN1cnZleUxvY1N0cmluZ0VkaXRvclwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RfY29tcG9uZW50c19sb2FkaW5nX2luZGljYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L2NvbXBvbmVudHMvbG9hZGluZy1pbmRpY2F0b3IgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2xvYWRpbmctaW5kaWNhdG9yLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxvYWRpbmdJbmRpY2F0b3JDb21wb25lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfY29tcG9uZW50c19sb2FkaW5nX2luZGljYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzlfX1tcIkxvYWRpbmdJbmRpY2F0b3JDb21wb25lbnRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0X3N2Z2J1bmRsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfODBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlYWN0L3N2Z2J1bmRsZSAqLyBcIi4vc3JjL3JlYWN0L3N2Z2J1bmRsZS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdmdCdW5kbGVDb21wb25lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3Rfc3ZnYnVuZGxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84MF9fW1wiU3ZnQnVuZGxlQ29tcG9uZW50XCJdOyB9KTtcblxuLy8gcmVhY3RcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbi8vVW5jb21tZW50IHRvIGluY2x1ZGUgdGhlIFwiZGF0ZVwiIHF1ZXN0aW9uIHR5cGUuXG4vL2V4cG9ydCB7ZGVmYXVsdCBhcyBTdXJ2ZXlRdWVzdGlvbkRhdGV9IGZyb20gXCIuLi9wbHVnaW5zL3JlYWN0L3JlYWN0cXVlc3Rpb25kYXRlXCI7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZW50cmllcy9yZWFjdC11aS50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VudHJpZXMvcmVhY3QtdWkudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXksIGF0dGFjaEtleTJjbGljaywgUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXIsIFN1cnZleU5hdmlnYXRpb25CYXNlLCBTdXJ2ZXlUaW1lclBhbmVsLCBTdXJ2ZXlQYWdlLCBTdXJ2ZXlSb3csIFN1cnZleVBhbmVsLCBTdXJ2ZXlGbG93UGFuZWwsIFN1cnZleVF1ZXN0aW9uLCBTdXJ2ZXlFbGVtZW50RXJyb3JzLCBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc0NlbGwsIFJlYWN0U3VydmV5RWxlbWVudCwgU3VydmV5RWxlbWVudEJhc2UsIFN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2UsIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW0sIFN1cnZleVF1ZXN0aW9uQ29tbWVudCwgU3VydmV5UXVlc3Rpb25DaGVja2JveCwgU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0sIFN1cnZleVF1ZXN0aW9uUmFua2luZywgU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbSwgUmF0aW5nSXRlbSwgUmF0aW5nSXRlbVN0YXIsIFJhdGluZ0l0ZW1TbWlsZXksIFJhdGluZ0Ryb3Bkb3duSXRlbSwgVGFnYm94RmlsdGVyU3RyaW5nLCBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0sIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlLCBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duLCBTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW0sIFN1cnZleVF1ZXN0aW9uVGFnYm94LCBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duU2VsZWN0LCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeCwgU3VydmV5UXVlc3Rpb25NYXRyaXhSb3csIFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbCwgU3VydmV5UXVlc3Rpb25IdG1sLCBTdXJ2ZXlRdWVzdGlvbkZpbGUsIFN1cnZleUZpbGVDaG9vc2VCdXR0b24sIFN1cnZleUZpbGVQcmV2aWV3LCBTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dCwgU3VydmV5UXVlc3Rpb25SYWRpb2dyb3VwLCBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbSwgU3VydmV5UXVlc3Rpb25UZXh0LCBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW4sIFN1cnZleVF1ZXN0aW9uQm9vbGVhbkNoZWNrYm94LCBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5SYWRpbywgU3VydmV5UXVlc3Rpb25FbXB0eSwgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGwsIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWMsIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY0FkZEJ1dHRvbiwgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWMsIFN1cnZleVByb2dyZXNzLCBTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMsIFN1cnZleVByb2dyZXNzVG9jLCBTdXJ2ZXlRdWVzdGlvblJhdGluZywgU3VydmV5UXVlc3Rpb25SYXRpbmdEcm9wZG93biwgU3VydmV5UXVlc3Rpb25FeHByZXNzaW9uLCBQb3B1cFN1cnZleSwgU3VydmV5V2luZG93LCBSZWFjdFF1ZXN0aW9uRmFjdG9yeSwgUmVhY3RFbGVtZW50RmFjdG9yeSwgU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlciwgU3VydmV5UXVlc3Rpb25JbWFnZSwgU3VydmV5UXVlc3Rpb25TaWduYXR1cmVQYWQsIFN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXAsIFN1cnZleVF1ZXN0aW9uQ3VzdG9tLCBTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZSwgUG9wdXAsIExpc3QsIFRpdGxlQWN0aW9ucywgVGl0bGVFbGVtZW50LCBTdXJ2ZXlBY3Rpb25CYXIsIExvZ29JbWFnZSwgU3VydmV5SGVhZGVyLCBTdmdJY29uLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNSZW1vdmVCdXR0b24sIFN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNEcmFnRHJvcEljb24sIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uLCBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvbiwgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcmV2QnV0dG9uLCBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY05leHRCdXR0b24sIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0LCBTdXJ2ZXlOYXZpZ2F0aW9uQnV0dG9uLCBNYXRyaXhSb3csIFNrZWxldG9uLCBOb3RpZmllckNvbXBvbmVudCwgQ29tcG9uZW50c0NvbnRhaW5lciwgQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudCwgSGVhZGVyTW9iaWxlLCBIZWFkZXJDZWxsLCBIZWFkZXIsIFN1cnZleUxvY1N0cmluZ1ZpZXdlciwgU3VydmV5TG9jU3RyaW5nRWRpdG9yLCBMb2FkaW5nSW5kaWNhdG9yQ29tcG9uZW50LCBTdmdCdW5kbGVDb21wb25lbnQsIFN1cnZleU1vZGVsLCBTdXJ2ZXlXaW5kb3dNb2RlbCwgc2V0dGluZ3MsIHN1cnZleUxvY2FsaXphdGlvbiwgc3VydmV5U3RyaW5ncywgTW9kZWwsIFJlc3BvbnNpdml0eU1hbmFnZXIsIFZlcnRpY2FsUmVzcG9uc2l2aXR5TWFuYWdlciwgdW53cmFwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdC11aS1tb2RlbCAqLyBcIi4vc3JjL2VudHJpZXMvcmVhY3QtdWktbW9kZWwudHNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImF0dGFjaEtleTJjbGlja1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiYXR0YWNoS2V5MmNsaWNrXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlJlYWN0U3VydmV5RWxlbWVudHNXcmFwcGVyXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5TmF2aWdhdGlvbkJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleU5hdmlnYXRpb25CYXNlXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5VGltZXJQYW5lbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5VGltZXJQYW5lbFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVBhZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVBhZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlSb3dcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVJvd1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVBhbmVsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlQYW5lbFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUZsb3dQYW5lbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5Rmxvd1BhbmVsXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5RWxlbWVudEVycm9yc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5RWxlbWVudEVycm9yc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzQ2VsbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVhY3RTdXJ2ZXlFbGVtZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlFbGVtZW50QmFzZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQ29tbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25Db21tZW50XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25DaGVja2JveFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25DaGVja2JveFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmFua2luZ1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25SYW5raW5nXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlJhdGluZ0l0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlJhdGluZ0l0ZW1cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSYXRpbmdJdGVtU3RhclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiUmF0aW5nSXRlbVN0YXJcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSYXRpbmdJdGVtU21pbGV5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJSYXRpbmdJdGVtU21pbGV5XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmF0aW5nRHJvcGRvd25JdGVtXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJSYXRpbmdEcm9wZG93bkl0ZW1cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJUYWdib3hGaWx0ZXJTdHJpbmdcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlRhZ2JveEZpbHRlclN0cmluZ1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uT3B0aW9uSXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25PcHRpb25JdGVtXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Ecm9wZG93blwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25Ecm9wZG93blwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uVGFnYm94SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25UYWdib3hJdGVtXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25UYWdib3hcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uVGFnYm94XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Ecm9wZG93blNlbGVjdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25Ecm9wZG93blNlbGVjdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4Um93XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeFJvd1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhDZWxsXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25IdG1sXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkh0bWxcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkZpbGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uRmlsZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUZpbGVDaG9vc2VCdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleUZpbGVDaG9vc2VCdXR0b25cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlGaWxlUHJldmlld1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5RmlsZVByZXZpZXdcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25NdWx0aXBsZVRleHRcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXBcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uVGV4dFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25UZXh0XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Cb29sZWFuXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5DaGVja2JveFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25Cb29sZWFuQ2hlY2tib3hcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5SYWRpb1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25Cb29sZWFuUmFkaW9cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkVtcHR5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkVtcHR5XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25DZWxsXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93blwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93blwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljQWRkQnV0dG9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b25cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlQcm9ncmVzc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UHJvZ3Jlc3NcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlQcm9ncmVzc0J1dHRvbnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVByb2dyZXNzQnV0dG9uc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVByb2dyZXNzVG9jXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlQcm9ncmVzc1RvY1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmF0aW5nXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvblJhdGluZ1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmF0aW5nRHJvcGRvd25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uUmF0aW5nRHJvcGRvd25cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkV4cHJlc3Npb25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uRXhwcmVzc2lvblwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlBvcHVwU3VydmV5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJQb3B1cFN1cnZleVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVdpbmRvd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5V2luZG93XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVhY3RFbGVtZW50RmFjdG9yeVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkltYWdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkltYWdlXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25TaWduYXR1cmVQYWRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uU2lnbmF0dXJlUGFkXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25CdXR0b25Hcm91cFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25CdXR0b25Hcm91cFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQ3VzdG9tXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkN1c3RvbVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQ29tcG9zaXRlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlBvcHVwXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJQb3B1cFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxpc3RcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkxpc3RcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJUaXRsZUFjdGlvbnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlRpdGxlQWN0aW9uc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlRpdGxlRWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiVGl0bGVFbGVtZW50XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5QWN0aW9uQmFyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlBY3Rpb25CYXJcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJMb2dvSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkxvZ29JbWFnZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUhlYWRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5SGVhZGVyXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3ZnSWNvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3ZnSWNvblwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1JlbW92ZUJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljUmVtb3ZlQnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEZXRhaWxCdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljRHJhZ0Ryb3BJY29uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNEcmFnRHJvcEljb25cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FkZEJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNBZGRCdXR0b25cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNSZW1vdmVCdXR0b25cIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1ByZXZCdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJldkJ1dHRvblwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljTmV4dEJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNOZXh0QnV0dG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcm9ncmVzc1RleHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5TmF2aWdhdGlvbkJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5TmF2aWdhdGlvbkJ1dHRvblwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIk1hdHJpeFJvd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiTWF0cml4Um93XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU2tlbGV0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlNrZWxldG9uXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTm90aWZpZXJDb21wb25lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIk5vdGlmaWVyQ29tcG9uZW50XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQ29tcG9uZW50c0NvbnRhaW5lclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiQ29tcG9uZW50c0NvbnRhaW5lclwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkNoYXJhY3RlckNvdW50ZXJDb21wb25lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkNoYXJhY3RlckNvdW50ZXJDb21wb25lbnRcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJIZWFkZXJNb2JpbGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlYWRlck1vYmlsZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkhlYWRlckNlbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlYWRlckNlbGxcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJIZWFkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlYWRlclwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUxvY1N0cmluZ1ZpZXdlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5TG9jU3RyaW5nVmlld2VyXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5TG9jU3RyaW5nRWRpdG9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlMb2NTdHJpbmdFZGl0b3JcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJMb2FkaW5nSW5kaWNhdG9yQ29tcG9uZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJMb2FkaW5nSW5kaWNhdG9yQ29tcG9uZW50XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3ZnQnVuZGxlQ29tcG9uZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3JlYWN0X3VpX21vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdmdCdW5kbGVDb21wb25lbnRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvcmVfZXhwb3J0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvcmUtZXhwb3J0ICovIFwiLi9zcmMvZW50cmllcy9jb3JlLWV4cG9ydC50c1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleU1vZGVsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2NvcmVfZXhwb3J0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlNb2RlbFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVdpbmRvd01vZGVsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2NvcmVfZXhwb3J0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlXaW5kb3dNb2RlbFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNldHRpbmdzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2NvcmVfZXhwb3J0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInN1cnZleUxvY2FsaXphdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9jb3JlX2V4cG9ydF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic3VydmV5TG9jYWxpemF0aW9uXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwic3VydmV5U3RyaW5nc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9jb3JlX2V4cG9ydF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic3VydmV5U3RyaW5nc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18pO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTW9kZWxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5TW9kZWxcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxzX3Jlc3BvbnNpdml0eV9tYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9yZXNwb25zaXZpdHktbWFuYWdlciAqLyBcIi4vc3JjL3V0aWxzL3Jlc3BvbnNpdml0eS1tYW5hZ2VyLnRzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVzcG9uc2l2aXR5TWFuYWdlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF91dGlsc19yZXNwb25zaXZpdHlfbWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVzcG9uc2l2aXR5TWFuYWdlclwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlZlcnRpY2FsUmVzcG9uc2l2aXR5TWFuYWdlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF91dGlsc19yZXNwb25zaXZpdHlfbWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiVmVydGljYWxSZXNwb25zaXZpdHlNYW5hZ2VyXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvdXRpbHMgKi8gXCIuL3NyYy91dGlscy91dGlscy50c1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInVud3JhcFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF91dGlsc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1widW53cmFwXCJdOyB9KTtcblxuXG5cblxuXG5cblxuT2JqZWN0KHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJjaGVja0xpYnJhcnlWZXJzaW9uXCJdKShcIlwiICsgXCIxLjkuMTM4XCIsIFwic3VydmV5LXJlYWN0LXVpXCIpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2V4cHJlc3Npb25zL2V4cHJlc3Npb25QYXJzZXIudHNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9leHByZXNzaW9ucy9leHByZXNzaW9uUGFyc2VyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3ludGF4RXJyb3IsIHBhcnNlICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN5bnRheEVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3ludGF4RXJyb3I7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInBhcnNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGFyc2U7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9leHByZXNzaW9uc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9leHByZXNzaW9ucyAqLyBcIi4vc3JjL2V4cHJlc3Npb25zL2V4cHJlc3Npb25zLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4vLyBHZW5lcmF0ZWQgYnkgUEVHLmpzIHYuIDAuMTAuMCAodHMtcGVnanMgcGx1Z2luIHYuIDAuMy4xIClcbi8vXG4vLyBodHRwczovL3BlZ2pzLm9yZy8gICBodHRwczovL2dpdGh1Yi5jb20vbWV0YWRldnByby90cy1wZWdqc1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgU3ludGF4RXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN5bnRheEVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN5bnRheEVycm9yKG1lc3NhZ2UsIGV4cGVjdGVkLCBmb3VuZCwgbG9jYXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIF90aGlzLmV4cGVjdGVkID0gZXhwZWN0ZWQ7XG4gICAgICAgIF90aGlzLmZvdW5kID0gZm91bmQ7XG4gICAgICAgIF90aGlzLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgIF90aGlzLm5hbWUgPSBcIlN5bnRheEVycm9yXCI7XG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoX3RoaXMsIFN5bnRheEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN5bnRheEVycm9yLmJ1aWxkTWVzc2FnZSA9IGZ1bmN0aW9uIChleHBlY3RlZCwgZm91bmQpIHtcbiAgICAgICAgZnVuY3Rpb24gaGV4KGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2guY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBsaXRlcmFsRXNjYXBlKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCBcIlxcXFxcXFwiXCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcMC9nLCBcIlxcXFwwXCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcdC9nLCBcIlxcXFx0XCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcbi9nLCBcIlxcXFxuXCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcci9nLCBcIlxcXFxyXCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHgwMC1cXHgwRl0vZywgZnVuY3Rpb24gKGNoKSB7IHJldHVybiBcIlxcXFx4MFwiICsgaGV4KGNoKTsgfSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xceDEwLVxceDFGXFx4N0YtXFx4OUZdL2csIGZ1bmN0aW9uIChjaCkgeyByZXR1cm4gXCJcXFxceFwiICsgaGV4KGNoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY2xhc3NFc2NhcGUocykge1xuICAgICAgICAgICAgcmV0dXJuIHNcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXS9nLCBcIlxcXFxdXCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXi9nLCBcIlxcXFxeXCIpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCJcXFxcLVwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXDAvZywgXCJcXFxcMFwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHQvZywgXCJcXFxcdFwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHIvZywgXCJcXFxcclwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx4MDAtXFx4MEZdL2csIGZ1bmN0aW9uIChjaCkgeyByZXR1cm4gXCJcXFxceDBcIiArIGhleChjaCk7IH0pXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHgxMC1cXHgxRlxceDdGLVxceDlGXS9nLCBmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIFwiXFxcXHhcIiArIGhleChjaCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlRXhwZWN0YXRpb24oZXhwZWN0YXRpb24pIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXhwZWN0YXRpb24udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsaXRlcmFsXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlxcXCJcIiArIGxpdGVyYWxFc2NhcGUoZXhwZWN0YXRpb24udGV4dCkgKyBcIlxcXCJcIjtcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2xhc3NcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWRQYXJ0cyA9IGV4cGVjdGF0aW9uLnBhcnRzLm1hcChmdW5jdGlvbiAocGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocGFydClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNsYXNzRXNjYXBlKHBhcnRbMF0pICsgXCItXCIgKyBjbGFzc0VzY2FwZShwYXJ0WzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY2xhc3NFc2NhcGUocGFydCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbXCIgKyAoZXhwZWN0YXRpb24uaW52ZXJ0ZWQgPyBcIl5cIiA6IFwiXCIpICsgZXNjYXBlZFBhcnRzICsgXCJdXCI7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFueVwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhbnkgY2hhcmFjdGVyXCI7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmQgb2YgaW5wdXRcIjtcbiAgICAgICAgICAgICAgICBjYXNlIFwib3RoZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cGVjdGF0aW9uLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlRXhwZWN0ZWQoZXhwZWN0ZWQxKSB7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRpb25zID0gZXhwZWN0ZWQxLm1hcChkZXNjcmliZUV4cGVjdGF0aW9uKTtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgdmFyIGo7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbnMuc29ydCgpO1xuICAgICAgICAgICAgaWYgKGRlc2NyaXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMSwgaiA9IDE7IGkgPCBkZXNjcmlwdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0aW9uc1tpIC0gMV0gIT09IGRlc2NyaXB0aW9uc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25zW2pdID0gZGVzY3JpcHRpb25zW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9ucy5sZW5ndGggPSBqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChkZXNjcmlwdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb25zWzBdO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uc1swXSArIFwiIG9yIFwiICsgZGVzY3JpcHRpb25zWzFdO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbnMuc2xpY2UoMCwgLTEpLmpvaW4oXCIsIFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiwgb3IgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgZGVzY3JpcHRpb25zW2Rlc2NyaXB0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkZXNjcmliZUZvdW5kKGZvdW5kMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZvdW5kMSA/IFwiXFxcIlwiICsgbGl0ZXJhbEVzY2FwZShmb3VuZDEpICsgXCJcXFwiXCIgOiBcImVuZCBvZiBpbnB1dFwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIkV4cGVjdGVkIFwiICsgZGVzY3JpYmVFeHBlY3RlZChleHBlY3RlZCkgKyBcIiBidXQgXCIgKyBkZXNjcmliZUZvdW5kKGZvdW5kKSArIFwiIGZvdW5kLlwiO1xuICAgIH07XG4gICAgcmV0dXJuIFN5bnRheEVycm9yO1xufShFcnJvcikpO1xuXG5mdW5jdGlvbiBwZWckcGFyc2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucyA6IHt9O1xuICAgIHZhciBwZWckRkFJTEVEID0ge307XG4gICAgdmFyIHBlZyRzdGFydFJ1bGVGdW5jdGlvbnMgPSB7IEV4cHJlc3Npb246IHBlZyRwYXJzZUV4cHJlc3Npb24gfTtcbiAgICB2YXIgcGVnJHN0YXJ0UnVsZUZ1bmN0aW9uID0gcGVnJHBhcnNlRXhwcmVzc2lvbjtcbiAgICB2YXIgcGVnJGMwID0gZnVuY3Rpb24gKGhlYWQsIHRhaWwpIHtcbiAgICAgICAgcmV0dXJuIGJ1aWxkQmluYXJ5T3BlcmFuZChoZWFkLCB0YWlsLCB0cnVlKTtcbiAgICB9O1xuICAgIHZhciBwZWckYzEgPSBcInx8XCI7XG4gICAgdmFyIHBlZyRjMiA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ8fFwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMyA9IFwib3JcIjtcbiAgICB2YXIgcGVnJGM0ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIm9yXCIsIHRydWUpO1xuICAgIHZhciBwZWckYzUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm9yXCI7IH07XG4gICAgdmFyIHBlZyRjNiA9IFwiJiZcIjtcbiAgICB2YXIgcGVnJGM3ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIiYmXCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGM4ID0gXCJhbmRcIjtcbiAgICB2YXIgcGVnJGM5ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImFuZFwiLCB0cnVlKTtcbiAgICB2YXIgcGVnJGMxMCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiYW5kXCI7IH07XG4gICAgdmFyIHBlZyRjMTEgPSBmdW5jdGlvbiAoaGVhZCwgdGFpbCkge1xuICAgICAgICByZXR1cm4gYnVpbGRCaW5hcnlPcGVyYW5kKGhlYWQsIHRhaWwpO1xuICAgIH07XG4gICAgdmFyIHBlZyRjMTIgPSBcIjw9XCI7XG4gICAgdmFyIHBlZyRjMTMgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiPD1cIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzE0ID0gXCJsZXNzb3JlcXVhbFwiO1xuICAgIHZhciBwZWckYzE1ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImxlc3NvcmVxdWFsXCIsIHRydWUpO1xuICAgIHZhciBwZWckYzE2ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJsZXNzb3JlcXVhbFwiOyB9O1xuICAgIHZhciBwZWckYzE3ID0gXCI+PVwiO1xuICAgIHZhciBwZWckYzE4ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIj49XCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxOSA9IFwiZ3JlYXRlcm9yZXF1YWxcIjtcbiAgICB2YXIgcGVnJGMyMCA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJncmVhdGVyb3JlcXVhbFwiLCB0cnVlKTtcbiAgICB2YXIgcGVnJGMyMSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiZ3JlYXRlcm9yZXF1YWxcIjsgfTtcbiAgICB2YXIgcGVnJGMyMiA9IFwiPT1cIjtcbiAgICB2YXIgcGVnJGMyMyA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCI9PVwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMjQgPSBcImVxdWFsXCI7XG4gICAgdmFyIHBlZyRjMjUgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiZXF1YWxcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjMjYgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcImVxdWFsXCI7IH07XG4gICAgdmFyIHBlZyRjMjcgPSBcIj1cIjtcbiAgICB2YXIgcGVnJGMyOCA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCI9XCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMyOSA9IFwiIT1cIjtcbiAgICB2YXIgcGVnJGMzMCA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCIhPVwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMzEgPSBcIm5vdGVxdWFsXCI7XG4gICAgdmFyIHBlZyRjMzIgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwibm90ZXF1YWxcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjMzMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm5vdGVxdWFsXCI7IH07XG4gICAgdmFyIHBlZyRjMzQgPSBcIjxcIjtcbiAgICB2YXIgcGVnJGMzNSA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCI8XCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMzNiA9IFwibGVzc1wiO1xuICAgIHZhciBwZWckYzM3ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImxlc3NcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjMzggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcImxlc3NcIjsgfTtcbiAgICB2YXIgcGVnJGMzOSA9IFwiPlwiO1xuICAgIHZhciBwZWckYzQwID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIj5cIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzQxID0gXCJncmVhdGVyXCI7XG4gICAgdmFyIHBlZyRjNDIgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiZ3JlYXRlclwiLCB0cnVlKTtcbiAgICB2YXIgcGVnJGM0MyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiZ3JlYXRlclwiOyB9O1xuICAgIHZhciBwZWckYzQ0ID0gXCIrXCI7XG4gICAgdmFyIHBlZyRjNDUgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiK1wiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjNDYgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcInBsdXNcIjsgfTtcbiAgICB2YXIgcGVnJGM0NyA9IFwiLVwiO1xuICAgIHZhciBwZWckYzQ4ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIi1cIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzQ5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJtaW51c1wiOyB9O1xuICAgIHZhciBwZWckYzUwID0gXCIqXCI7XG4gICAgdmFyIHBlZyRjNTEgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiKlwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjNTIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm11bFwiOyB9O1xuICAgIHZhciBwZWckYzUzID0gXCIvXCI7XG4gICAgdmFyIHBlZyRjNTQgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiL1wiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjNTUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcImRpdlwiOyB9O1xuICAgIHZhciBwZWckYzU2ID0gXCIlXCI7XG4gICAgdmFyIHBlZyRjNTcgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiJVwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjNTggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm1vZFwiOyB9O1xuICAgIHZhciBwZWckYzU5ID0gXCJeXCI7XG4gICAgdmFyIHBlZyRjNjAgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiXlwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjNjEgPSBcInBvd2VyXCI7XG4gICAgdmFyIHBlZyRjNjIgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwicG93ZXJcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjNjMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcInBvd2VyXCI7IH07XG4gICAgdmFyIHBlZyRjNjQgPSBcIio9XCI7XG4gICAgdmFyIHBlZyRjNjUgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiKj1cIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzY2ID0gXCJjb250YWluc1wiO1xuICAgIHZhciBwZWckYzY3ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImNvbnRhaW5zXCIsIHRydWUpO1xuICAgIHZhciBwZWckYzY4ID0gXCJjb250YWluXCI7XG4gICAgdmFyIHBlZyRjNjkgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiY29udGFpblwiLCB0cnVlKTtcbiAgICB2YXIgcGVnJGM3MCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiY29udGFpbnNcIjsgfTtcbiAgICB2YXIgcGVnJGM3MSA9IFwibm90Y29udGFpbnNcIjtcbiAgICB2YXIgcGVnJGM3MiA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJub3Rjb250YWluc1wiLCB0cnVlKTtcbiAgICB2YXIgcGVnJGM3MyA9IFwibm90Y29udGFpblwiO1xuICAgIHZhciBwZWckYzc0ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIm5vdGNvbnRhaW5cIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjNzUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm5vdGNvbnRhaW5zXCI7IH07XG4gICAgdmFyIHBlZyRjNzYgPSBcImFueW9mXCI7XG4gICAgdmFyIHBlZyRjNzcgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiYW55b2ZcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjNzggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcImFueW9mXCI7IH07XG4gICAgdmFyIHBlZyRjNzkgPSBcImFsbG9mXCI7XG4gICAgdmFyIHBlZyRjODAgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiYWxsb2ZcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjODEgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcImFsbG9mXCI7IH07XG4gICAgdmFyIHBlZyRjODIgPSBcIihcIjtcbiAgICB2YXIgcGVnJGM4MyA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCIoXCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGM4NCA9IFwiKVwiO1xuICAgIHZhciBwZWckYzg1ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIilcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzg2ID0gZnVuY3Rpb24gKGV4cHIpIHsgcmV0dXJuIGV4cHI7IH07XG4gICAgdmFyIHBlZyRjODcgPSBmdW5jdGlvbiAobmFtZSwgcGFyYW1zKSB7IHJldHVybiBuZXcgX2V4cHJlc3Npb25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJGdW5jdGlvbk9wZXJhbmRcIl0obmFtZSwgcGFyYW1zKTsgfTtcbiAgICB2YXIgcGVnJGM4OCA9IFwiIVwiO1xuICAgIHZhciBwZWckYzg5ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIiFcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzkwID0gXCJuZWdhdGVcIjtcbiAgICB2YXIgcGVnJGM5MSA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJuZWdhdGVcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjOTIgPSBmdW5jdGlvbiAoZXhwcikgeyByZXR1cm4gbmV3IF9leHByZXNzaW9uc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiVW5hcnlPcGVyYW5kXCJdKGV4cHIsIFwibmVnYXRlXCIpOyB9O1xuICAgIHZhciBwZWckYzkzID0gZnVuY3Rpb24gKGV4cHIsIG9wKSB7IHJldHVybiBuZXcgX2V4cHJlc3Npb25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJVbmFyeU9wZXJhbmRcIl0oZXhwciwgb3ApOyB9O1xuICAgIHZhciBwZWckYzk0ID0gXCJlbXB0eVwiO1xuICAgIHZhciBwZWckYzk1ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImVtcHR5XCIsIHRydWUpO1xuICAgIHZhciBwZWckYzk2ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJlbXB0eVwiOyB9O1xuICAgIHZhciBwZWckYzk3ID0gXCJub3RlbXB0eVwiO1xuICAgIHZhciBwZWckYzk4ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIm5vdGVtcHR5XCIsIHRydWUpO1xuICAgIHZhciBwZWckYzk5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJub3RlbXB0eVwiOyB9O1xuICAgIHZhciBwZWckYzEwMCA9IFwidW5kZWZpbmVkXCI7XG4gICAgdmFyIHBlZyRjMTAxID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInVuZGVmaW5lZFwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMTAyID0gXCJudWxsXCI7XG4gICAgdmFyIHBlZyRjMTAzID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIm51bGxcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzEwNCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH07XG4gICAgdmFyIHBlZyRjMTA1ID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBuZXcgX2V4cHJlc3Npb25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJDb25zdFwiXSh2YWx1ZSk7IH07XG4gICAgdmFyIHBlZyRjMTA2ID0gXCJ7XCI7XG4gICAgdmFyIHBlZyRjMTA3ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIntcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzEwOCA9IFwifVwiO1xuICAgIHZhciBwZWckYzEwOSA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ9XCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxMTAgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIG5ldyBfZXhwcmVzc2lvbnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlZhcmlhYmxlXCJdKHZhbHVlKTsgfTtcbiAgICB2YXIgcGVnJGMxMTEgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuICAgIHZhciBwZWckYzExMiA9IFwiJydcIjtcbiAgICB2YXIgcGVnJGMxMTMgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiJydcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzExNCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiXCI7IH07XG4gICAgdmFyIHBlZyRjMTE1ID0gXCJcXFwiXFxcIlwiO1xuICAgIHZhciBwZWckYzExNiA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJcXFwiXFxcIlwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMTE3ID0gXCInXCI7XG4gICAgdmFyIHBlZyRjMTE4ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIidcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzExOSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gXCInXCIgKyB2YWx1ZSArIFwiJ1wiOyB9O1xuICAgIHZhciBwZWckYzEyMCA9IFwiXFxcIlwiO1xuICAgIHZhciBwZWckYzEyMSA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJcXFwiXCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxMjIgPSBcIltcIjtcbiAgICB2YXIgcGVnJGMxMjMgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiW1wiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMTI0ID0gXCJdXCI7XG4gICAgdmFyIHBlZyRjMTI1ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIl1cIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzEyNiA9IGZ1bmN0aW9uIChzZXF1ZW5jZSkgeyByZXR1cm4gc2VxdWVuY2U7IH07XG4gICAgdmFyIHBlZyRjMTI3ID0gXCIsXCI7XG4gICAgdmFyIHBlZyRjMTI4ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIixcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzEyOSA9IGZ1bmN0aW9uIChleHByLCB0YWlsKSB7XG4gICAgICAgIGlmIChleHByID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbmV3IF9leHByZXNzaW9uc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiQXJyYXlPcGVyYW5kXCJdKFtdKTtcbiAgICAgICAgdmFyIGFycmF5ID0gW2V4cHJdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0YWlsKSkge1xuICAgICAgICAgICAgdmFyIGZsYXR0ZW4gPSBmbGF0dGVuQXJyYXkodGFpbCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMzsgaSA8IGZsYXR0ZW4ubGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGZsYXR0ZW5baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgX2V4cHJlc3Npb25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJBcnJheU9wZXJhbmRcIl0oYXJyYXkpO1xuICAgIH07XG4gICAgdmFyIHBlZyRjMTMwID0gXCJ0cnVlXCI7XG4gICAgdmFyIHBlZyRjMTMxID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInRydWVcIiwgdHJ1ZSk7XG4gICAgdmFyIHBlZyRjMTMyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgICB2YXIgcGVnJGMxMzMgPSBcImZhbHNlXCI7XG4gICAgdmFyIHBlZyRjMTM0ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImZhbHNlXCIsIHRydWUpO1xuICAgIHZhciBwZWckYzEzNSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgIHZhciBwZWckYzEzNiA9IFwiMHhcIjtcbiAgICB2YXIgcGVnJGMxMzcgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiMHhcIiwgZmFsc2UpO1xuICAgIHZhciBwZWckYzEzOCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcnNlSW50KHRleHQoKSwgMTYpOyB9O1xuICAgIHZhciBwZWckYzEzOSA9IC9eW1xcLV0vO1xuICAgIHZhciBwZWckYzE0MCA9IHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtcIi1cIl0sIGZhbHNlLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMTQxID0gZnVuY3Rpb24gKHNpZ24sIG51bSkgeyByZXR1cm4gc2lnbiA9PSBudWxsID8gbnVtIDogLW51bTsgfTtcbiAgICB2YXIgcGVnJGMxNDIgPSBcIi5cIjtcbiAgICB2YXIgcGVnJGMxNDMgPSBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiLlwiLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMTQ0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyc2VGbG9hdCh0ZXh0KCkpOyB9O1xuICAgIHZhciBwZWckYzE0NSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcnNlSW50KHRleHQoKSwgMTApOyB9O1xuICAgIHZhciBwZWckYzE0NiA9IFwiMFwiO1xuICAgIHZhciBwZWckYzE0NyA9IHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCIwXCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxNDggPSBmdW5jdGlvbiAoKSB7IHJldHVybiAwOyB9O1xuICAgIHZhciBwZWckYzE0OSA9IGZ1bmN0aW9uIChjaGFycykgeyByZXR1cm4gY2hhcnMuam9pbihcIlwiKTsgfTtcbiAgICB2YXIgcGVnJGMxNTAgPSBcIlxcXFwnXCI7XG4gICAgdmFyIHBlZyRjMTUxID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlxcXFwnXCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxNTIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIidcIjsgfTtcbiAgICB2YXIgcGVnJGMxNTMgPSBcIlxcXFxcXFwiXCI7XG4gICAgdmFyIHBlZyRjMTU0ID0gcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlxcXFxcXFwiXCIsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxNTUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcIlxcXCJcIjsgfTtcbiAgICB2YXIgcGVnJGMxNTYgPSAvXlteXCInXS87XG4gICAgdmFyIHBlZyRjMTU3ID0gcGVnJGNsYXNzRXhwZWN0YXRpb24oW1wiXFxcIlwiLCBcIidcIl0sIHRydWUsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxNTggPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0ZXh0KCk7IH07XG4gICAgdmFyIHBlZyRjMTU5ID0gL15bXnt9XS87XG4gICAgdmFyIHBlZyRjMTYwID0gcGVnJGNsYXNzRXhwZWN0YXRpb24oW1wie1wiLCBcIn1cIl0sIHRydWUsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxNjEgPSAvXlswLTldLztcbiAgICB2YXIgcGVnJGMxNjIgPSBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiMFwiLCBcIjlcIl1dLCBmYWxzZSwgZmFsc2UpO1xuICAgIHZhciBwZWckYzE2MyA9IC9eWzEtOV0vO1xuICAgIHZhciBwZWckYzE2NCA9IHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtbXCIxXCIsIFwiOVwiXV0sIGZhbHNlLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjMTY1ID0gL15bYS16QS1aX10vO1xuICAgIHZhciBwZWckYzE2NiA9IHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtbXCJhXCIsIFwielwiXSwgW1wiQVwiLCBcIlpcIl0sIFwiX1wiXSwgZmFsc2UsIGZhbHNlKTtcbiAgICB2YXIgcGVnJGMxNjcgPSBwZWckb3RoZXJFeHBlY3RhdGlvbihcIndoaXRlc3BhY2VcIik7XG4gICAgdmFyIHBlZyRjMTY4ID0gL15bIFxcdFxcblxccl0vO1xuICAgIHZhciBwZWckYzE2OSA9IHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtcIiBcIiwgXCJcXHRcIiwgXCJcXG5cIiwgXCJcXHJcIl0sIGZhbHNlLCBmYWxzZSk7XG4gICAgdmFyIHBlZyRjdXJyUG9zID0gMDtcbiAgICB2YXIgcGVnJHNhdmVkUG9zID0gMDtcbiAgICB2YXIgcGVnJHBvc0RldGFpbHNDYWNoZSA9IFt7IGxpbmU6IDEsIGNvbHVtbjogMSB9XTtcbiAgICB2YXIgcGVnJG1heEZhaWxQb3MgPSAwO1xuICAgIHZhciBwZWckbWF4RmFpbEV4cGVjdGVkID0gW107XG4gICAgdmFyIHBlZyRzaWxlbnRGYWlscyA9IDA7XG4gICAgdmFyIHBlZyRyZXN1bHRzQ2FjaGUgPSB7fTtcbiAgICB2YXIgcGVnJHJlc3VsdDtcbiAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIShvcHRpb25zLnN0YXJ0UnVsZSBpbiBwZWckc3RhcnRSdWxlRnVuY3Rpb25zKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3Qgc3RhcnQgcGFyc2luZyBmcm9tIHJ1bGUgXFxcIlwiICsgb3B0aW9ucy5zdGFydFJ1bGUgKyBcIlxcXCIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHBlZyRzdGFydFJ1bGVGdW5jdGlvbiA9IHBlZyRzdGFydFJ1bGVGdW5jdGlvbnNbb3B0aW9ucy5zdGFydFJ1bGVdO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gaW5wdXQuc3Vic3RyaW5nKHBlZyRzYXZlZFBvcywgcGVnJGN1cnJQb3MpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsb2NhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJHNhdmVkUG9zLCBwZWckY3VyclBvcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4cGVjdGVkKGRlc2NyaXB0aW9uLCBsb2NhdGlvbjEpIHtcbiAgICAgICAgbG9jYXRpb24xID0gbG9jYXRpb24xICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gbG9jYXRpb24xXG4gICAgICAgICAgICA6IHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJHNhdmVkUG9zLCBwZWckY3VyclBvcyk7XG4gICAgICAgIHRocm93IHBlZyRidWlsZFN0cnVjdHVyZWRFcnJvcihbcGVnJG90aGVyRXhwZWN0YXRpb24oZGVzY3JpcHRpb24pXSwgaW5wdXQuc3Vic3RyaW5nKHBlZyRzYXZlZFBvcywgcGVnJGN1cnJQb3MpLCBsb2NhdGlvbjEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlcnJvcihtZXNzYWdlLCBsb2NhdGlvbjEpIHtcbiAgICAgICAgbG9jYXRpb24xID0gbG9jYXRpb24xICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gbG9jYXRpb24xXG4gICAgICAgICAgICA6IHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJHNhdmVkUG9zLCBwZWckY3VyclBvcyk7XG4gICAgICAgIHRocm93IHBlZyRidWlsZFNpbXBsZUVycm9yKG1lc3NhZ2UsIGxvY2F0aW9uMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24odGV4dDEsIGlnbm9yZUNhc2UpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJsaXRlcmFsXCIsIHRleHQ6IHRleHQxLCBpZ25vcmVDYXNlOiBpZ25vcmVDYXNlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRjbGFzc0V4cGVjdGF0aW9uKHBhcnRzLCBpbnZlcnRlZCwgaWdub3JlQ2FzZSkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImNsYXNzXCIsIHBhcnRzOiBwYXJ0cywgaW52ZXJ0ZWQ6IGludmVydGVkLCBpZ25vcmVDYXNlOiBpZ25vcmVDYXNlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRhbnlFeHBlY3RhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJhbnlcIiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckZW5kRXhwZWN0YXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZW5kXCIgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJG90aGVyRXhwZWN0YXRpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJvdGhlclwiLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKHBvcykge1xuICAgICAgICB2YXIgZGV0YWlscyA9IHBlZyRwb3NEZXRhaWxzQ2FjaGVbcG9zXTtcbiAgICAgICAgdmFyIHA7XG4gICAgICAgIGlmIChkZXRhaWxzKSB7XG4gICAgICAgICAgICByZXR1cm4gZGV0YWlscztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHAgPSBwb3MgLSAxO1xuICAgICAgICAgICAgd2hpbGUgKCFwZWckcG9zRGV0YWlsc0NhY2hlW3BdKSB7XG4gICAgICAgICAgICAgICAgcC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGV0YWlscyA9IHBlZyRwb3NEZXRhaWxzQ2FjaGVbcF07XG4gICAgICAgICAgICBkZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgIGxpbmU6IGRldGFpbHMubGluZSxcbiAgICAgICAgICAgICAgICBjb2x1bW46IGRldGFpbHMuY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2hpbGUgKHAgPCBwb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwKSA9PT0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5saW5lKys7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHMuY29sdW1uID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHMuY29sdW1uKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHArKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBlZyRwb3NEZXRhaWxzQ2FjaGVbcG9zXSA9IGRldGFpbHM7XG4gICAgICAgICAgICByZXR1cm4gZGV0YWlscztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckY29tcHV0ZUxvY2F0aW9uKHN0YXJ0UG9zLCBlbmRQb3MpIHtcbiAgICAgICAgdmFyIHN0YXJ0UG9zRGV0YWlscyA9IHBlZyRjb21wdXRlUG9zRGV0YWlscyhzdGFydFBvcyk7XG4gICAgICAgIHZhciBlbmRQb3NEZXRhaWxzID0gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKGVuZFBvcyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydDoge1xuICAgICAgICAgICAgICAgIG9mZnNldDogc3RhcnRQb3MsXG4gICAgICAgICAgICAgICAgbGluZTogc3RhcnRQb3NEZXRhaWxzLmxpbmUsXG4gICAgICAgICAgICAgICAgY29sdW1uOiBzdGFydFBvc0RldGFpbHMuY29sdW1uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5kOiB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBlbmRQb3MsXG4gICAgICAgICAgICAgICAgbGluZTogZW5kUG9zRGV0YWlscy5saW5lLFxuICAgICAgICAgICAgICAgIGNvbHVtbjogZW5kUG9zRGV0YWlscy5jb2x1bW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJGZhaWwoZXhwZWN0ZWQxKSB7XG4gICAgICAgIGlmIChwZWckY3VyclBvcyA8IHBlZyRtYXhGYWlsUG9zKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBlZyRjdXJyUG9zID4gcGVnJG1heEZhaWxQb3MpIHtcbiAgICAgICAgICAgIHBlZyRtYXhGYWlsUG9zID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICBwZWckbWF4RmFpbEV4cGVjdGVkID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcGVnJG1heEZhaWxFeHBlY3RlZC5wdXNoKGV4cGVjdGVkMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRidWlsZFNpbXBsZUVycm9yKG1lc3NhZ2UsIGxvY2F0aW9uMSkge1xuICAgICAgICByZXR1cm4gbmV3IFN5bnRheEVycm9yKG1lc3NhZ2UsIFtdLCBcIlwiLCBsb2NhdGlvbjEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckYnVpbGRTdHJ1Y3R1cmVkRXJyb3IoZXhwZWN0ZWQxLCBmb3VuZCwgbG9jYXRpb24xKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3ludGF4RXJyb3IoU3ludGF4RXJyb3IuYnVpbGRNZXNzYWdlKGV4cGVjdGVkMSwgZm91bmQpLCBleHBlY3RlZDEsIGZvdW5kLCBsb2NhdGlvbjEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VFeHByZXNzaW9uKCkge1xuICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0LCBzNSwgczYsIHM3LCBzODtcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAwO1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgczEgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczIgPSBwZWckcGFyc2VMb2dpY09yKCk7XG4gICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMyA9IFtdO1xuICAgICAgICAgICAgICAgIHM0ID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgczUgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlT3JTaWduKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOCA9IHBlZyRwYXJzZUxvZ2ljT3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczggIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBbczUsIHM2LCBzNywgczhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHM1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzNDtcbiAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aGlsZSAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgczMucHVzaChzNCk7XG4gICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlT3JTaWduKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoczYgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczggPSBwZWckcGFyc2VMb2dpY09yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzOCAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBbczUsIHM2LCBzNywgczhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBzNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHM0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzAoczIsIHMzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICB9XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VPclNpZ24oKSB7XG4gICAgICAgIHZhciBzMCwgczE7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMTtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzEpIHtcbiAgICAgICAgICAgIHMxID0gcGVnJGMxO1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzMSA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikudG9Mb3dlckNhc2UoKSA9PT0gcGVnJGMzKSB7XG4gICAgICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpO1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgczEgPSBwZWckYzUoKTtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHMxO1xuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlTG9naWNPcigpIHtcbiAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2LCBzNztcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAyO1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgczEgPSBwZWckcGFyc2VMb2dpY0FuZCgpO1xuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMyID0gW107XG4gICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZUFuZFNpZ24oKTtcbiAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2VMb2dpY0FuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBbczQsIHM1LCBzNiwgczddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChzMyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMyLnB1c2goczMpO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNlQW5kU2lnbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2VMb2dpY0FuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IFtzNCwgczUsIHM2LCBzN107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckYzAoczEsIHMyKTtcbiAgICAgICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICB9XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VBbmRTaWduKCkge1xuICAgICAgICB2YXIgczAsIHMxO1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDM7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAyKSA9PT0gcGVnJGM2KSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRjNjtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDMpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjOCkge1xuICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAzKTtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgIHMxID0gcGVnJGMxMCgpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VMb2dpY0FuZCgpIHtcbiAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2LCBzNztcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyA0O1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgczEgPSBwZWckcGFyc2VDb21wT3BzKCk7XG4gICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczIgPSBbXTtcbiAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICBzNCA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNlQ29tcGFyYWJsZU9wZXJhdG9ycygpO1xuICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZUNvbXBPcHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gW3M0LCBzNSwgczYsIHM3XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHM0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoczMgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMi5wdXNoKHMzKTtcbiAgICAgICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZUNvbXBhcmFibGVPcGVyYXRvcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJHBhcnNlQ29tcE9wcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IFtzNCwgczUsIHM2LCBzN107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckYzExKHMxLCBzMik7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlQ29tcGFyYWJsZU9wZXJhdG9ycygpIHtcbiAgICAgICAgdmFyIHMwLCBzMTtcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyA1O1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjMTIpIHtcbiAgICAgICAgICAgIHMxID0gcGVnJGMxMjtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAxMSkudG9Mb3dlckNhc2UoKSA9PT0gcGVnJGMxNCkge1xuICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAxMSk7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gMTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzE1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgIHMxID0gcGVnJGMxNigpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzE3KSB7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckYzE3O1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzE4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczEgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAxNCkudG9Mb3dlckNhc2UoKSA9PT0gcGVnJGMxOSkge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMTQpO1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSAxNDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMyMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMjEoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzIyKSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMyMjtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMyMyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDUpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjMjQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMyNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMjYoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA2MSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzI3O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzI4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoczEgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDUpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjMjQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gNTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzI2KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjMjkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMjk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMzApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMSA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDgpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjMzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSA4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzMyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMzMygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA2MCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMzQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMzUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMSA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA0KS50b0xvd2VyQ2FzZSgpID09PSBwZWckYzM2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMzcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzM4KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNjIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMzOTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM0MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA3KS50b0xvd2VyQ2FzZSgpID09PSBwZWckYzQxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzQyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM0MygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VDb21wT3BzKCkge1xuICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0LCBzNSwgczYsIHM3O1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDY7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IHBlZyRwYXJzZVBsdXNNaW51c09wcygpO1xuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMyID0gW107XG4gICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZVBsdXNNaW51c1NpZ25zKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczYgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJHBhcnNlUGx1c01pbnVzT3BzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IFtzNCwgczUsIHM2LCBzN107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBzNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHMzICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczIucHVzaChzMyk7XG4gICAgICAgICAgICAgICAgczMgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckcGFyc2VQbHVzTWludXNTaWducygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2VQbHVzTWludXNPcHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBbczQsIHM1LCBzNiwgczddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHM0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGMwKHMxLCBzMik7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlUGx1c01pbnVzU2lnbnMoKSB7XG4gICAgICAgIHZhciBzMCwgczE7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgNztcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDMpIHtcbiAgICAgICAgICAgIHMxID0gcGVnJGM0NDtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM0NSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgIHMxID0gcGVnJGM0NigpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDUpIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNDc7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjNDgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGM0OSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlUGx1c01pbnVzT3BzKCkge1xuICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0LCBzNSwgczYsIHM3O1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDg7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IHBlZyRwYXJzZU11bERpdk9wcygpO1xuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMyID0gW107XG4gICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZU11bERpdlNpZ25zKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczYgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJHBhcnNlTXVsRGl2T3BzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IFtzNCwgczUsIHM2LCBzN107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBzNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHMzICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczIucHVzaChzMyk7XG4gICAgICAgICAgICAgICAgczMgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgICAgICBzNCA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckcGFyc2VNdWxEaXZTaWducygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2VNdWxEaXZPcHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBbczQsIHM1LCBzNiwgczddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHM0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGMwKHMxLCBzMik7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlTXVsRGl2U2lnbnMoKSB7XG4gICAgICAgIHZhciBzMCwgczE7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgOTtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDIpIHtcbiAgICAgICAgICAgIHMxID0gcGVnJGM1MDtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM1MSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgIHMxID0gcGVnJGM1MigpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDcpIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNTM7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjNTQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGM1NSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSAzNykge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjNTY7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjNTcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzU4KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZU11bERpdk9wcygpIHtcbiAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzLCBzNCwgczUsIHM2LCBzNztcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAxMDtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIHMxID0gcGVnJHBhcnNlQmluYXJ5RnVuY09wKCk7XG4gICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczIgPSBbXTtcbiAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICBzNCA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNlUG93ZXJTaWducygpO1xuICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZUJpbmFyeUZ1bmNPcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBbczQsIHM1LCBzNiwgczddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChzMyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMyLnB1c2goczMpO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNlUG93ZXJTaWducygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2VCaW5hcnlGdW5jT3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczcgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBbczQsIHM1LCBzNiwgczddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHM0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGMwKHMxLCBzMik7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlUG93ZXJTaWducygpIHtcbiAgICAgICAgdmFyIHMwLCBzMTtcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAxMTtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gOTQpIHtcbiAgICAgICAgICAgIHMxID0gcGVnJGM1OTtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM2MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA1KS50b0xvd2VyQ2FzZSgpID09PSBwZWckYzYxKSB7XG4gICAgICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDUpO1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzYyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgIHMxID0gcGVnJGM2MygpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VCaW5hcnlGdW5jT3AoKSB7XG4gICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQsIHM1LCBzNiwgczc7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMTI7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IHBlZyRwYXJzZUZhY3RvcigpO1xuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMyID0gW107XG4gICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzNSA9IHBlZyRwYXJzZUJpbkZ1bmN0aW9ucygpO1xuICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZUZhY3RvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBbczQsIHM1LCBzNiwgczddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChzMyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMyLnB1c2goczMpO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJHBhcnNlQmluRnVuY3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoczYgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IHBlZyRwYXJzZUZhY3RvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IFtzNCwgczUsIHM2LCBzN107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckYzExKHMxLCBzMik7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlQmluRnVuY3Rpb25zKCkge1xuICAgICAgICB2YXIgczAsIHMxO1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDEzO1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjNjQpIHtcbiAgICAgICAgICAgIHMxID0gcGVnJGM2NDtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM2NSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA4KS50b0xvd2VyQ2FzZSgpID09PSBwZWckYzY2KSB7XG4gICAgICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDgpO1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzY3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczEgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA3KS50b0xvd2VyQ2FzZSgpID09PSBwZWckYzY4KSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA3KTtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gNztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM2OSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgIHMxID0gcGVnJGM3MCgpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDExKS50b0xvd2VyQ2FzZSgpID09PSBwZWckYzcxKSB7XG4gICAgICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDExKTtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSAxMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjNzIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMSA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDEwKS50b0xvd2VyQ2FzZSgpID09PSBwZWckYzczKSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzc0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGM3NSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgNSkudG9Mb3dlckNhc2UoKSA9PT0gcGVnJGM3Nikge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgNSk7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjNzcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzc4KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDUpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjNzkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM4MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM4MSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VGYWN0b3IoKSB7XG4gICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQsIHM1O1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDE0O1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA0MCkge1xuICAgICAgICAgICAgczEgPSBwZWckYzgyO1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzgzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VFeHByZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczQgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRjODQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjODUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzNSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM4NihzMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMwID0gcGVnJHBhcnNlRnVuY3Rpb25PcCgpO1xuICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckcGFyc2VVbmFyeUZ1bmN0aW9uT3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckcGFyc2VBdG9tKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckcGFyc2VBcnJheU9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZUZ1bmN0aW9uT3AoKSB7XG4gICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQ7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMTU7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IHBlZyRwYXJzZUxldHRlcnNBbmREaWdpdHMoKTtcbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDQwKSB7XG4gICAgICAgICAgICAgICAgczIgPSBwZWckYzgyO1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzgzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZVNlcXVlbmNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gcGVnJGM4NDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM4NSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHM0ID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGM4NyhzMSwgczMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZVVuYXJ5RnVuY3Rpb25PcCgpIHtcbiAgICAgICAgdmFyIHMwLCBzMSwgczIsIHMzO1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDE2O1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSAzMykge1xuICAgICAgICAgICAgczEgPSBwZWckYzg4O1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzg5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDYpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjOTApIHtcbiAgICAgICAgICAgICAgICBzMSA9IGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgNik7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gNjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjOTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VFeHByZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHMzICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjOTIoczMpO1xuICAgICAgICAgICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICBzMSA9IHBlZyRwYXJzZUF0b20oKTtcbiAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRwYXJzZVVuRnVuY3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjOTMoczEsIHMzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZVVuRnVuY3Rpb25zKCkge1xuICAgICAgICB2YXIgczAsIHMxO1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDE3O1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgNSkudG9Mb3dlckNhc2UoKSA9PT0gcGVnJGM5NCkge1xuICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDUpO1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gNTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzk1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgczEgPSBwZWckYzk2KCk7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBzMTtcbiAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgOCkudG9Mb3dlckNhc2UoKSA9PT0gcGVnJGM5Nykge1xuICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCA4KTtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGM5OCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckYzk5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICB9XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VBdG9tKCkge1xuICAgICAgICB2YXIgczAsIHMxLCBzMiwgczMsIHM0O1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDE4O1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgczEgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgOSkgPT09IHBlZyRjMTAwKSB7XG4gICAgICAgICAgICAgICAgczIgPSBwZWckYzEwMDtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSA5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgczIgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxMDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzMiA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDQpID09PSBwZWckYzEwMikge1xuICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMTAyO1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSA0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzEwMyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTA0KCk7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICBzMSA9IHBlZyRwYXJzZV8oKTtcbiAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlQ29uc3RWYWx1ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzEwNShzMik7XG4gICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDEyMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgczIgPSBwZWckYzEwNjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxMDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VWYWx1ZUlucHV0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDEyNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNCA9IHBlZyRjMTA4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzEwOSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTEwKHMzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZUNvbnN0VmFsdWUoKSB7XG4gICAgICAgIHZhciBzMCwgczEsIHMyLCBzMztcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAxOTtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIHMxID0gcGVnJHBhcnNlTG9naWNWYWx1ZSgpO1xuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgczEgPSBwZWckYzExMShzMSk7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBzMTtcbiAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgczEgPSBwZWckcGFyc2VBcml0aG1ldGljVmFsdWUoKTtcbiAgICAgICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMTEoczEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckcGFyc2VMZXR0ZXJzQW5kRGlnaXRzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTExKHMxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgMikgPT09IHBlZyRjMTEyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzExMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMTQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczAgPT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAyKSA9PT0gcGVnJGMxMTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTE1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzExNik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzExNCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSAzOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTE3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzExOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlQW55SW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDM5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzExNztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxMTgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMTkoczIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTIxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlQW55SW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBwZWckYzEyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxMjEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzExOShzMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMwID0gczE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VBcnJheU9wKCkge1xuICAgICAgICB2YXIgczAsIHMxLCBzMiwgczM7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMjA7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDkxKSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRjMTIyO1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzEyMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBzMiA9IHBlZyRwYXJzZVNlcXVlbmNlKCk7XG4gICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDkzKSB7XG4gICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJGMxMjQ7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTI1KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMjYoczIpO1xuICAgICAgICAgICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlU2VxdWVuY2UoKSB7XG4gICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQsIHM1LCBzNiwgczc7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMjE7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IHBlZyRwYXJzZUV4cHJlc3Npb24oKTtcbiAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBzMSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBzMiA9IFtdO1xuICAgICAgICAgICAgczMgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocGVnJGN1cnJQb3MpID09PSA0NCkge1xuICAgICAgICAgICAgICAgICAgICBzNSA9IHBlZyRjMTI3O1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzEyOCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoczYgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM3ID0gcGVnJHBhcnNlRXhwcmVzc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczQgPSBbczQsIHM1LCBzNiwgczddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChzMyAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMyLnB1c2goczMpO1xuICAgICAgICAgICAgICAgIHMzID0gcGVnJGN1cnJQb3M7XG4gICAgICAgICAgICAgICAgczQgPSBwZWckcGFyc2VfKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM1ID0gcGVnJGMxMjc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgczUgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTI4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoczUgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlXygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczcgPSBwZWckcGFyc2VFeHByZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHM3ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM0ID0gW3M0LCBzNSwgczYsIHM3XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBzNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTI5KHMxLCBzMik7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlTG9naWNWYWx1ZSgpIHtcbiAgICAgICAgdmFyIHMwLCBzMTtcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAyMjtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDQpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjMTMwKSB7XG4gICAgICAgICAgICBzMSA9IGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgNCk7XG4gICAgICAgICAgICBwZWckY3VyclBvcyArPSA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTMxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgczEgPSBwZWckYzEzMigpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDUpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjMTMzKSB7XG4gICAgICAgICAgICAgICAgczEgPSBpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDUpO1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzEzNCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczEgPSBwZWckYzEzNSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlQXJpdGhtZXRpY1ZhbHVlKCkge1xuICAgICAgICB2YXIgczAsIHMxLCBzMjtcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAyMztcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzEzNikge1xuICAgICAgICAgICAgczEgPSBwZWckYzEzNjtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxMzcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczIgPSBwZWckcGFyc2VEaWdpdHMoKTtcbiAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxMzgoKTtcbiAgICAgICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIGlmIChwZWckYzEzOS50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7XG4gICAgICAgICAgICAgICAgczEgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpO1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzE0MCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMxID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczEgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczIgPSBwZWckcGFyc2VOdW1iZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxNDEoczEsIHMyKTtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlTnVtYmVyKCkge1xuICAgICAgICB2YXIgczAsIHMxLCBzMiwgczM7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMjQ7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IHBlZyRwYXJzZURpZ2l0cygpO1xuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBlZyRjdXJyUG9zKSA9PT0gNDYpIHtcbiAgICAgICAgICAgICAgICBzMiA9IHBlZyRjMTQyO1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzMiA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzE0Myk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczMgPSBwZWckcGFyc2VEaWdpdHMoKTtcbiAgICAgICAgICAgICAgICBpZiAoczMgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxNDQoKTtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMwO1xuICAgICAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgczEgPSBwZWckcGFyc2VOb25aZXJvRGlnaXRzKCk7XG4gICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMiA9IHBlZyRwYXJzZURpZ2l0cygpO1xuICAgICAgICAgICAgICAgIGlmIChzMiA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBzMiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckYzE0NSgpO1xuICAgICAgICAgICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwZWckY3VyclBvcykgPT09IDQ4KSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxNDY7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTQ3KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxNDgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlVmFsdWVJbnB1dCgpIHtcbiAgICAgICAgdmFyIHMwLCBzMSwgczI7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMjU7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IFtdO1xuICAgICAgICBzMiA9IHBlZyRwYXJzZVZhbHVlQ2hhcmFjdGVycygpO1xuICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHdoaWxlIChzMiAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMxLnB1c2goczIpO1xuICAgICAgICAgICAgICAgIHMyID0gcGVnJHBhcnNlVmFsdWVDaGFyYWN0ZXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgIHMxID0gcGVnJGMxNDkoczEpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VBbnlJbnB1dCgpIHtcbiAgICAgICAgdmFyIHMwLCBzMSwgczI7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMjY7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBzMSA9IFtdO1xuICAgICAgICBzMiA9IHBlZyRwYXJzZUFueUNoYXJhY3RlcnMoKTtcbiAgICAgICAgaWYgKHMyICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICB3aGlsZSAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMS5wdXNoKHMyKTtcbiAgICAgICAgICAgICAgICBzMiA9IHBlZyRwYXJzZUFueUNoYXJhY3RlcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgczEgPSBwZWckYzE0OShzMSk7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBzMTtcbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZUFueUNoYXJhY3RlcnMoKSB7XG4gICAgICAgIHZhciBzMCwgczE7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMjc7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IHBlZyRjdXJyUG9zO1xuICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCAyKSA9PT0gcGVnJGMxNTApIHtcbiAgICAgICAgICAgIHMxID0gcGVnJGMxNTA7XG4gICAgICAgICAgICBwZWckY3VyclBvcyArPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTUxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHMwO1xuICAgICAgICAgICAgczEgPSBwZWckYzE1MigpO1xuICAgICAgICB9XG4gICAgICAgIHMwID0gczE7XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIDIpID09PSBwZWckYzE1Mykge1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxNTM7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTU0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTU1KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgICAgaWYgKHMwID09PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgICAgICAgICBpZiAocGVnJGMxNTYudGVzdChpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpKSkge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTU3KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJGMxNTgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlVmFsdWVDaGFyYWN0ZXJzKCkge1xuICAgICAgICB2YXIgczAsIHMxO1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDI4O1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBwZWckY3VyclBvcztcbiAgICAgICAgaWYgKHBlZyRjMTU5LnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHtcbiAgICAgICAgICAgIHMxID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxNjApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgcGVnJHNhdmVkUG9zID0gczA7XG4gICAgICAgICAgICBzMSA9IHBlZyRjMTU4KCk7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBzMTtcbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZUxldHRlcnNBbmREaWdpdHMoKSB7XG4gICAgICAgIHZhciBzMCwgczEsIHMyLCBzMywgczQsIHM1LCBzNjtcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAyOTtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gcGVnJGN1cnJQb3M7XG4gICAgICAgIHMxID0gcGVnJHBhcnNlTGV0dGVycygpO1xuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMyID0gW107XG4gICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgczQgPSBwZWckcGFyc2VEaWdpdHMoKTtcbiAgICAgICAgICAgIGlmIChzNCAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHM1ID0gW107XG4gICAgICAgICAgICAgICAgczYgPSBwZWckcGFyc2VMZXR0ZXJzKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHM2ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM1LnB1c2goczYpO1xuICAgICAgICAgICAgICAgICAgICBzNiA9IHBlZyRwYXJzZUxldHRlcnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM0ID0gW3M0LCBzNV07XG4gICAgICAgICAgICAgICAgICAgIHMzID0gczQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHMzO1xuICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMztcbiAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoczMgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMi5wdXNoKHMzKTtcbiAgICAgICAgICAgICAgICBzMyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgICAgIHM0ID0gcGVnJHBhcnNlRGlnaXRzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHM0ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHM1ID0gW107XG4gICAgICAgICAgICAgICAgICAgIHM2ID0gcGVnJHBhcnNlTGV0dGVycygpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoczYgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHM1LnB1c2goczYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgczYgPSBwZWckcGFyc2VMZXR0ZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHM1ICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzNCA9IFtzNCwgczVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgczMgPSBzNDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzMyA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczM7XG4gICAgICAgICAgICAgICAgICAgIHMzID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoczIgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBwZWckc2F2ZWRQb3MgPSBzMDtcbiAgICAgICAgICAgICAgICBzMSA9IHBlZyRjMTU4KCk7XG4gICAgICAgICAgICAgICAgczAgPSBzMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gczA7XG4gICAgICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBzMDtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlRGlnaXRzKCkge1xuICAgICAgICB2YXIgczAsIHMxO1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDMwO1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgczAgPSBbXTtcbiAgICAgICAgaWYgKHBlZyRjMTYxLnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHtcbiAgICAgICAgICAgIHMxID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxNjIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgd2hpbGUgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICAgICAgczAucHVzaChzMSk7XG4gICAgICAgICAgICAgICAgaWYgKHBlZyRjMTYxLnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgczEgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpO1xuICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzE2Mik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzMCA9IHBlZyRGQUlMRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHJlc3VsdHNDYWNoZVtrZXldID0geyBuZXh0UG9zOiBwZWckY3VyclBvcywgcmVzdWx0OiBzMCB9O1xuICAgICAgICByZXR1cm4gczA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZU5vblplcm9EaWdpdHMoKSB7XG4gICAgICAgIHZhciBzMCwgczE7XG4gICAgICAgIHZhciBrZXkgPSBwZWckY3VyclBvcyAqIDM0ICsgMzE7XG4gICAgICAgIHZhciBjYWNoZWQgPSBwZWckcmVzdWx0c0NhY2hlW2tleV07XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gY2FjaGVkLm5leHRQb3M7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9IFtdO1xuICAgICAgICBpZiAocGVnJGMxNjMudGVzdChpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpKSkge1xuICAgICAgICAgICAgczEgPSBpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpO1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckYzE2NCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxICE9PSBwZWckRkFJTEVEKSB7XG4gICAgICAgICAgICB3aGlsZSAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICBzMC5wdXNoKHMxKTtcbiAgICAgICAgICAgICAgICBpZiAocGVnJGMxNjMudGVzdChpbnB1dC5jaGFyQXQocGVnJGN1cnJQb3MpKSkge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzMSA9IHBlZyRGQUlMRUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTY0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMwID0gcGVnJEZBSUxFRDtcbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJHBhcnNlTGV0dGVycygpIHtcbiAgICAgICAgdmFyIHMwLCBzMTtcbiAgICAgICAgdmFyIGtleSA9IHBlZyRjdXJyUG9zICogMzQgKyAzMjtcbiAgICAgICAgdmFyIGNhY2hlZCA9IHBlZyRyZXN1bHRzQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcGVnJGN1cnJQb3MgPSBjYWNoZWQubmV4dFBvcztcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHMwID0gW107XG4gICAgICAgIGlmIChwZWckYzE2NS50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7XG4gICAgICAgICAgICBzMSA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7XG4gICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTY2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHdoaWxlIChzMSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHMwLnB1c2goczEpO1xuICAgICAgICAgICAgICAgIGlmIChwZWckYzE2NS50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGMxNjYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgczAgPSBwZWckRkFJTEVEO1xuICAgICAgICB9XG4gICAgICAgIHBlZyRyZXN1bHRzQ2FjaGVba2V5XSA9IHsgbmV4dFBvczogcGVnJGN1cnJQb3MsIHJlc3VsdDogczAgfTtcbiAgICAgICAgcmV0dXJuIHMwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckcGFyc2VfKCkge1xuICAgICAgICB2YXIgczAsIHMxO1xuICAgICAgICB2YXIga2V5ID0gcGVnJGN1cnJQb3MgKiAzNCArIDMzO1xuICAgICAgICB2YXIgY2FjaGVkID0gcGVnJHJlc3VsdHNDYWNoZVtrZXldO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICBwZWckY3VyclBvcyA9IGNhY2hlZC5uZXh0UG9zO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7XG4gICAgICAgIHMwID0gW107XG4gICAgICAgIGlmIChwZWckYzE2OC50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7XG4gICAgICAgICAgICBzMSA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7XG4gICAgICAgICAgICBwZWckY3VyclBvcysrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTY5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoczEgIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgIHMwLnB1c2goczEpO1xuICAgICAgICAgICAgaWYgKHBlZyRjMTY4LnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHtcbiAgICAgICAgICAgICAgICBzMSA9IGlucHV0LmNoYXJBdChwZWckY3VyclBvcyk7XG4gICAgICAgICAgICAgICAgcGVnJGN1cnJQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHMxID0gcGVnJEZBSUxFRDtcbiAgICAgICAgICAgICAgICBpZiAocGVnJHNpbGVudEZhaWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTY5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07XG4gICAgICAgIGlmIChzMCA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgczEgPSBwZWckRkFJTEVEO1xuICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjMTY3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwZWckcmVzdWx0c0NhY2hlW2tleV0gPSB7IG5leHRQb3M6IHBlZyRjdXJyUG9zLCByZXN1bHQ6IHMwIH07XG4gICAgICAgIHJldHVybiBzMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRCaW5hcnlPcGVyYW5kKGhlYWQsIHRhaWwsIGlzQXJpdGhtZXRpY09wKSB7XG4gICAgICAgIGlmIChpc0FyaXRobWV0aWNPcCA9PT0gdm9pZCAwKSB7IGlzQXJpdGhtZXRpY09wID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHRhaWwucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9leHByZXNzaW9uc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiQmluYXJ5T3BlcmFuZFwiXShlbGVtZW50c1sxXSwgcmVzdWx0LCBlbGVtZW50c1szXSwgaXNBcml0aG1ldGljT3ApO1xuICAgICAgICB9LCBoZWFkKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmxhdHRlbkFycmF5KGFycmF5KSB7XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIGFycmF5KTtcbiAgICB9XG4gICAgcGVnJHJlc3VsdCA9IHBlZyRzdGFydFJ1bGVGdW5jdGlvbigpO1xuICAgIGlmIChwZWckcmVzdWx0ICE9PSBwZWckRkFJTEVEICYmIHBlZyRjdXJyUG9zID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHBlZyRyZXN1bHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAocGVnJHJlc3VsdCAhPT0gcGVnJEZBSUxFRCAmJiBwZWckY3VyclBvcyA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcGVnJGZhaWwocGVnJGVuZEV4cGVjdGF0aW9uKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHBlZyRidWlsZFN0cnVjdHVyZWRFcnJvcihwZWckbWF4RmFpbEV4cGVjdGVkLCBwZWckbWF4RmFpbFBvcyA8IGlucHV0Lmxlbmd0aCA/IGlucHV0LmNoYXJBdChwZWckbWF4RmFpbFBvcykgOiBudWxsLCBwZWckbWF4RmFpbFBvcyA8IGlucHV0Lmxlbmd0aFxuICAgICAgICAgICAgPyBwZWckY29tcHV0ZUxvY2F0aW9uKHBlZyRtYXhGYWlsUG9zLCBwZWckbWF4RmFpbFBvcyArIDEpXG4gICAgICAgICAgICA6IHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJG1heEZhaWxQb3MsIHBlZyRtYXhGYWlsUG9zKSk7XG4gICAgfVxufVxudmFyIHBhcnNlID0gcGVnJHBhcnNlO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2V4cHJlc3Npb25zL2V4cHJlc3Npb25zLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2V4cHJlc3Npb25zL2V4cHJlc3Npb25zLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IE9wZXJhbmQsIEJpbmFyeU9wZXJhbmQsIFVuYXJ5T3BlcmFuZCwgQXJyYXlPcGVyYW5kLCBDb25zdCwgVmFyaWFibGUsIEZ1bmN0aW9uT3BlcmFuZCwgT3BlcmFuZE1ha2VyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIk9wZXJhbmRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBPcGVyYW5kOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJCaW5hcnlPcGVyYW5kXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQmluYXJ5T3BlcmFuZDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiVW5hcnlPcGVyYW5kXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVW5hcnlPcGVyYW5kOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJBcnJheU9wZXJhbmRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBcnJheU9wZXJhbmQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkNvbnN0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQ29uc3Q7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlZhcmlhYmxlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVmFyaWFibGU7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkZ1bmN0aW9uT3BlcmFuZFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEZ1bmN0aW9uT3BlcmFuZDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiT3BlcmFuZE1ha2VyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gT3BlcmFuZE1ha2VyOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaGVscGVycyAqLyBcIi4vc3JjL2hlbHBlcnMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Z1bmN0aW9uc2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2Z1bmN0aW9uc2ZhY3RvcnkgKi8gXCIuL3NyYy9mdW5jdGlvbnNmYWN0b3J5LnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25kaXRpb25Qcm9jZXNzVmFsdWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvbmRpdGlvblByb2Nlc3NWYWx1ZSAqLyBcIi4vc3JjL2NvbmRpdGlvblByb2Nlc3NWYWx1ZS50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NldHRpbmdzICovIFwiLi9zcmMvc2V0dGluZ3MudHNcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIE9wZXJhbmQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT3BlcmFuZCgpIHtcbiAgICB9XG4gICAgT3BlcmFuZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBpZiAoZnVuYyA9PT0gdm9pZCAwKSB7IGZ1bmMgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfTtcbiAgICBPcGVyYW5kLnByb3RvdHlwZS5oYXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgT3BlcmFuZC5wcm90b3R5cGUuaGFzQXN5bmNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgIE9wZXJhbmQucHJvdG90eXBlLmFkZFRvQXN5bmNMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHsgfTtcbiAgICBPcGVyYW5kLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG9wKSB7XG4gICAgICAgIHJldHVybiAhIW9wICYmIG9wLmdldFR5cGUoKSA9PT0gdGhpcy5nZXRUeXBlKCkgJiYgdGhpcy5pc0NvbnRlbnRFcXVhbChvcCk7XG4gICAgfTtcbiAgICBPcGVyYW5kLnByb3RvdHlwZS5hcmVPcGVyYXRvcnNFcXVhbHMgPSBmdW5jdGlvbiAob3AxLCBvcDIpIHtcbiAgICAgICAgcmV0dXJuICFvcDEgJiYgIW9wMiB8fCAhIW9wMSAmJiBvcDEuaXNFcXVhbChvcDIpO1xuICAgIH07XG4gICAgcmV0dXJuIE9wZXJhbmQ7XG59KCkpO1xuXG52YXIgQmluYXJ5T3BlcmFuZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmluYXJ5T3BlcmFuZCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCaW5hcnlPcGVyYW5kKG9wZXJhdG9yTmFtZSwgbGVmdCwgcmlnaHQsIGlzQXJpdGhtZXRpY09wKSB7XG4gICAgICAgIGlmIChsZWZ0ID09PSB2b2lkIDApIHsgbGVmdCA9IG51bGw7IH1cbiAgICAgICAgaWYgKHJpZ2h0ID09PSB2b2lkIDApIHsgcmlnaHQgPSBudWxsOyB9XG4gICAgICAgIGlmIChpc0FyaXRobWV0aWNPcCA9PT0gdm9pZCAwKSB7IGlzQXJpdGhtZXRpY09wID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub3BlcmF0b3JOYW1lID0gb3BlcmF0b3JOYW1lO1xuICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgX3RoaXMucmlnaHQgPSByaWdodDtcbiAgICAgICAgX3RoaXMuaXNBcml0aG1ldGljVmFsdWUgPSBpc0FyaXRobWV0aWNPcDtcbiAgICAgICAgaWYgKGlzQXJpdGhtZXRpY09wKSB7XG4gICAgICAgICAgICBfdGhpcy5jb25zdW1lciA9IE9wZXJhbmRNYWtlci5iaW5hcnlGdW5jdGlvbnNbXCJhcml0aG1ldGljT3BcIl0ob3BlcmF0b3JOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmNvbnN1bWVyID0gT3BlcmFuZE1ha2VyLmJpbmFyeUZ1bmN0aW9uc1tvcGVyYXRvck5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfdGhpcy5jb25zdW1lciA9PSBudWxsKSB7XG4gICAgICAgICAgICBPcGVyYW5kTWFrZXIudGhyb3dJbnZhbGlkT3BlcmF0b3JFcnJvcihvcGVyYXRvck5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpbmFyeU9wZXJhbmQucHJvdG90eXBlLCBcInJlcXVpcmVTdHJpY3RDb21wYXJlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJc09wZXJhbmRSZXF1aXJlU3RyaWN0KHRoaXMubGVmdCkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmdldElzT3BlcmFuZFJlcXVpcmVTdHJpY3QodGhpcy5yaWdodCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCaW5hcnlPcGVyYW5kLnByb3RvdHlwZS5nZXRJc09wZXJhbmRSZXF1aXJlU3RyaWN0ID0gZnVuY3Rpb24gKG9wKSB7XG4gICAgICAgIHJldHVybiAhIW9wICYmIG9wLnJlcXVpcmVTdHJpY3RDb21wYXJlO1xuICAgIH07XG4gICAgQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiYmluYXJ5XCI7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUsIFwiaXNBcml0aG1ldGljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0FyaXRobWV0aWNWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCaW5hcnlPcGVyYW5kLnByb3RvdHlwZSwgXCJpc0Nvbmp1bmN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRvck5hbWUgPT0gXCJvclwiIHx8IHRoaXMub3BlcmF0b3JOYW1lID09IFwiYW5kXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUsIFwiY29uanVuY3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ29uanVuY3Rpb24gPyB0aGlzLm9wZXJhdG9yTmFtZSA6IFwiXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUsIFwib3BlcmF0b3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZXJhdG9yTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCaW5hcnlPcGVyYW5kLnByb3RvdHlwZSwgXCJsZWZ0T3BlcmFuZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCaW5hcnlPcGVyYW5kLnByb3RvdHlwZSwgXCJyaWdodE9wZXJhbmRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJpZ2h0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUuaXNDb250ZW50RXF1YWwgPSBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgdmFyIGJPcCA9IG9wO1xuICAgICAgICByZXR1cm4gYk9wLm9wZXJhdG9yID09PSB0aGlzLm9wZXJhdG9yICYmXG4gICAgICAgICAgICB0aGlzLmFyZU9wZXJhdG9yc0VxdWFscyh0aGlzLmxlZnQsIGJPcC5sZWZ0KSAmJlxuICAgICAgICAgICAgdGhpcy5hcmVPcGVyYXRvcnNFcXVhbHModGhpcy5yaWdodCwgYk9wLnJpZ2h0KTtcbiAgICB9O1xuICAgIEJpbmFyeU9wZXJhbmQucHJvdG90eXBlLmV2YWx1YXRlUGFyYW0gPSBmdW5jdGlvbiAoeCwgcHJvY2Vzc1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiB4ID09IG51bGwgPyBudWxsIDogeC5ldmFsdWF0ZShwcm9jZXNzVmFsdWUpO1xuICAgIH07XG4gICAgQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAocHJvY2Vzc1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLmNhbGwodGhpcywgdGhpcy5ldmFsdWF0ZVBhcmFtKHRoaXMubGVmdCwgcHJvY2Vzc1ZhbHVlKSwgdGhpcy5ldmFsdWF0ZVBhcmFtKHRoaXMucmlnaHQsIHByb2Nlc3NWYWx1ZSksIHRoaXMucmVxdWlyZVN0cmljdENvbXBhcmUpO1xuICAgIH07XG4gICAgQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBpZiAoZnVuYyA9PT0gdm9pZCAwKSB7IGZ1bmMgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgaWYgKCEhZnVuYykge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGZ1bmModGhpcyk7XG4gICAgICAgICAgICBpZiAoISFyZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFwiKFwiICtcbiAgICAgICAgICAgIE9wZXJhbmRNYWtlci5zYWZlVG9TdHJpbmcodGhpcy5sZWZ0LCBmdW5jKSArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICBPcGVyYW5kTWFrZXIub3BlcmF0b3JUb1N0cmluZyh0aGlzLm9wZXJhdG9yTmFtZSkgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgT3BlcmFuZE1ha2VyLnNhZmVUb1N0cmluZyh0aGlzLnJpZ2h0LCBmdW5jKSArXG4gICAgICAgICAgICBcIilcIik7XG4gICAgfTtcbiAgICBCaW5hcnlPcGVyYW5kLnByb3RvdHlwZS5zZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMubGVmdC5zZXRWYXJpYWJsZXModmFyaWFibGVzKTtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMucmlnaHQuc2V0VmFyaWFibGVzKHZhcmlhYmxlcyk7XG4gICAgfTtcbiAgICBCaW5hcnlPcGVyYW5kLnByb3RvdHlwZS5oYXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICgoISF0aGlzLmxlZnQgJiYgdGhpcy5sZWZ0Lmhhc0Z1bmN0aW9uKCkpIHx8XG4gICAgICAgICAgICAoISF0aGlzLnJpZ2h0ICYmIHRoaXMucmlnaHQuaGFzRnVuY3Rpb24oKSkpO1xuICAgIH07XG4gICAgQmluYXJ5T3BlcmFuZC5wcm90b3R5cGUuaGFzQXN5bmNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICgoISF0aGlzLmxlZnQgJiYgdGhpcy5sZWZ0Lmhhc0FzeW5jRnVuY3Rpb24oKSkgfHxcbiAgICAgICAgICAgICghIXRoaXMucmlnaHQgJiYgdGhpcy5yaWdodC5oYXNBc3luY0Z1bmN0aW9uKCkpKTtcbiAgICB9O1xuICAgIEJpbmFyeU9wZXJhbmQucHJvdG90eXBlLmFkZFRvQXN5bmNMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5sZWZ0KVxuICAgICAgICAgICAgdGhpcy5sZWZ0LmFkZFRvQXN5bmNMaXN0KGxpc3QpO1xuICAgICAgICBpZiAoISF0aGlzLnJpZ2h0KVxuICAgICAgICAgICAgdGhpcy5yaWdodC5hZGRUb0FzeW5jTGlzdChsaXN0KTtcbiAgICB9O1xuICAgIHJldHVybiBCaW5hcnlPcGVyYW5kO1xufShPcGVyYW5kKSk7XG5cbnZhciBVbmFyeU9wZXJhbmQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFVuYXJ5T3BlcmFuZCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBVbmFyeU9wZXJhbmQoZXhwcmVzc2lvblZhbHVlLCBvcGVyYXRvck5hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZXhwcmVzc2lvblZhbHVlID0gZXhwcmVzc2lvblZhbHVlO1xuICAgICAgICBfdGhpcy5vcGVyYXRvck5hbWUgPSBvcGVyYXRvck5hbWU7XG4gICAgICAgIF90aGlzLmNvbnN1bWVyID0gT3BlcmFuZE1ha2VyLnVuYXJ5RnVuY3Rpb25zW29wZXJhdG9yTmFtZV07XG4gICAgICAgIGlmIChfdGhpcy5jb25zdW1lciA9PSBudWxsKSB7XG4gICAgICAgICAgICBPcGVyYW5kTWFrZXIudGhyb3dJbnZhbGlkT3BlcmF0b3JFcnJvcihvcGVyYXRvck5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVuYXJ5T3BlcmFuZC5wcm90b3R5cGUsIFwib3BlcmF0b3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZXJhdG9yTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbmFyeU9wZXJhbmQucHJvdG90eXBlLCBcImV4cHJlc3Npb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25WYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFVuYXJ5T3BlcmFuZC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5hcnlcIjtcbiAgICB9O1xuICAgIFVuYXJ5T3BlcmFuZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBpZiAoZnVuYyA9PT0gdm9pZCAwKSB7IGZ1bmMgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgaWYgKCEhZnVuYykge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGZ1bmModGhpcyk7XG4gICAgICAgICAgICBpZiAoISFyZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKE9wZXJhbmRNYWtlci5vcGVyYXRvclRvU3RyaW5nKHRoaXMub3BlcmF0b3JOYW1lKSArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb24udG9TdHJpbmcoZnVuYykpO1xuICAgIH07XG4gICAgVW5hcnlPcGVyYW5kLnByb3RvdHlwZS5pc0NvbnRlbnRFcXVhbCA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICB2YXIgdU9wID0gb3A7XG4gICAgICAgIHJldHVybiB1T3Aub3BlcmF0b3IgPT0gdGhpcy5vcGVyYXRvciAmJiB0aGlzLmFyZU9wZXJhdG9yc0VxdWFscyh0aGlzLmV4cHJlc3Npb24sIHVPcC5leHByZXNzaW9uKTtcbiAgICB9O1xuICAgIFVuYXJ5T3BlcmFuZC5wcm90b3R5cGUuaGFzRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb24uaGFzRnVuY3Rpb24oKTtcbiAgICB9O1xuICAgIFVuYXJ5T3BlcmFuZC5wcm90b3R5cGUuaGFzQXN5bmNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5oYXNBc3luY0Z1bmN0aW9uKCk7XG4gICAgfTtcbiAgICBVbmFyeU9wZXJhbmQucHJvdG90eXBlLmFkZFRvQXN5bmNMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uLmFkZFRvQXN5bmNMaXN0KGxpc3QpO1xuICAgIH07XG4gICAgVW5hcnlPcGVyYW5kLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChwcm9jZXNzVmFsdWUpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHByb2Nlc3NWYWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH07XG4gICAgVW5hcnlPcGVyYW5kLnByb3RvdHlwZS5zZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbi5zZXRWYXJpYWJsZXModmFyaWFibGVzKTtcbiAgICB9O1xuICAgIHJldHVybiBVbmFyeU9wZXJhbmQ7XG59KE9wZXJhbmQpKTtcblxudmFyIEFycmF5T3BlcmFuZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXJyYXlPcGVyYW5kLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFycmF5T3BlcmFuZCh2YWx1ZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEFycmF5T3BlcmFuZC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICB9O1xuICAgIEFycmF5T3BlcmFuZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBpZiAoZnVuYyA9PT0gdm9pZCAwKSB7IGZ1bmMgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgaWYgKCEhZnVuYykge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGZ1bmModGhpcyk7XG4gICAgICAgICAgICBpZiAoISFyZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFwiW1wiICtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzXG4gICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwudG9TdHJpbmcoZnVuYyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIikgK1xuICAgICAgICAgICAgXCJdXCIpO1xuICAgIH07XG4gICAgQXJyYXlPcGVyYW5kLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChwcm9jZXNzVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLm1hcChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBlbC5ldmFsdWF0ZShwcm9jZXNzVmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFycmF5T3BlcmFuZC5wcm90b3R5cGUuc2V0VmFyaWFibGVzID0gZnVuY3Rpb24gKHZhcmlhYmxlcykge1xuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgZWwuc2V0VmFyaWFibGVzKHZhcmlhYmxlcyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQXJyYXlPcGVyYW5kLnByb3RvdHlwZS5oYXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLnNvbWUoZnVuY3Rpb24gKG9wZXJhbmQpIHsgcmV0dXJuIG9wZXJhbmQuaGFzRnVuY3Rpb24oKTsgfSk7XG4gICAgfTtcbiAgICBBcnJheU9wZXJhbmQucHJvdG90eXBlLmhhc0FzeW5jRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5zb21lKGZ1bmN0aW9uIChvcGVyYW5kKSB7IHJldHVybiBvcGVyYW5kLmhhc0FzeW5jRnVuY3Rpb24oKTsgfSk7XG4gICAgfTtcbiAgICBBcnJheU9wZXJhbmQucHJvdG90eXBlLmFkZFRvQXN5bmNMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAob3BlcmFuZCkgeyByZXR1cm4gb3BlcmFuZC5hZGRUb0FzeW5jTGlzdChsaXN0KTsgfSk7XG4gICAgfTtcbiAgICBBcnJheU9wZXJhbmQucHJvdG90eXBlLmlzQ29udGVudEVxdWFsID0gZnVuY3Rpb24gKG9wKSB7XG4gICAgICAgIHZhciBhT3AgPSBvcDtcbiAgICAgICAgaWYgKGFPcC52YWx1ZXMubGVuZ3RoICE9PSB0aGlzLnZhbHVlcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghYU9wLnZhbHVlc1tpXS5pc0VxdWFsKHRoaXMudmFsdWVzW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXlPcGVyYW5kO1xufShPcGVyYW5kKSk7XG5cbnZhciBDb25zdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29uc3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29uc3QodmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBDb25zdC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiY29uc3RcIjtcbiAgICB9O1xuICAgIENvbnN0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgIGlmIChmdW5jID09PSB2b2lkIDApIHsgZnVuYyA9IHVuZGVmaW5lZDsgfVxuICAgICAgICBpZiAoISFmdW5jKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gZnVuYyh0aGlzKTtcbiAgICAgICAgICAgIGlmICghIXJlcylcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3QucHJvdG90eXBlLCBcImNvcnJlY3RWYWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29ycmVjdFZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0LnByb3RvdHlwZSwgXCJyZXF1aXJlU3RyaWN0Q29tcGFyZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb25zdC5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvcnJlY3RWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICB9O1xuICAgIENvbnN0LnByb3RvdHlwZS5zZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7IH07XG4gICAgQ29uc3QucHJvdG90eXBlLmdldENvcnJlY3RWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5pc0Jvb2xlYW5WYWx1ZSh2YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxICYmXG4gICAgICAgICAgICB0aGlzLmlzUXVvdGUodmFsdWVbMF0pICYmXG4gICAgICAgICAgICB0aGlzLmlzUXVvdGUodmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0pKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZygxLCB2YWx1ZS5sZW5ndGggLSAxKTtcbiAgICAgICAgaWYgKE9wZXJhbmRNYWtlci5pc051bWVyaWModmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZihcIjB4XCIpID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxICYmIHZhbHVlWzBdID09IFwiMFwiICYmICh2YWx1ZS5sZW5ndGggPCAyIHx8ICh2YWx1ZVsxXSAhPT0gXCIuXCIgJiYgdmFsdWVbMV0gIT09IFwiLFwiKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIENvbnN0LnByb3RvdHlwZS5pc0NvbnRlbnRFcXVhbCA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICB2YXIgY09wID0gb3A7XG4gICAgICAgIHJldHVybiBjT3AudmFsdWUgPT0gdGhpcy52YWx1ZTtcbiAgICB9O1xuICAgIENvbnN0LnByb3RvdHlwZS5pc1F1b3RlID0gZnVuY3Rpb24gKGNoKSB7XG4gICAgICAgIHJldHVybiBjaCA9PSBcIidcIiB8fCBjaCA9PSAnXCInO1xuICAgIH07XG4gICAgQ29uc3QucHJvdG90eXBlLmlzQm9vbGVhblZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAodmFsdWUgJiZcbiAgICAgICAgICAgICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIiB8fCB2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBcImZhbHNlXCIpKTtcbiAgICB9O1xuICAgIHJldHVybiBDb25zdDtcbn0oT3BlcmFuZCkpO1xuXG52YXIgVmFyaWFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZhcmlhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFZhcmlhYmxlKHZhcmlhYmxlTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB2YXJpYWJsZU5hbWUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnZhcmlhYmxlTmFtZSA9IHZhcmlhYmxlTmFtZTtcbiAgICAgICAgX3RoaXMudmFsdWVJbmZvID0ge307XG4gICAgICAgIF90aGlzLnVzZVZhbHVlQXNJdElzID0gZmFsc2U7XG4gICAgICAgIGlmICghIV90aGlzLnZhcmlhYmxlTmFtZSAmJlxuICAgICAgICAgICAgX3RoaXMudmFyaWFibGVOYW1lLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgIF90aGlzLnZhcmlhYmxlTmFtZVswXSA9PT0gVmFyaWFibGUuRGlzYWJsZUNvbnZlcnNpb25DaGFyKSB7XG4gICAgICAgICAgICBfdGhpcy52YXJpYWJsZU5hbWUgPSBfdGhpcy52YXJpYWJsZU5hbWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgX3RoaXMudXNlVmFsdWVBc0l0SXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZhcmlhYmxlLCBcIkRpc2FibGVDb252ZXJzaW9uQ2hhclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJzZXR0aW5nc1wiXS5leHByZXNzaW9uRGlzYWJsZUNvbnZlcnNpb25DaGFyOyB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHsgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJzZXR0aW5nc1wiXS5leHByZXNzaW9uRGlzYWJsZUNvbnZlcnNpb25DaGFyID0gdmFsOyB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZhcmlhYmxlLnByb3RvdHlwZSwgXCJyZXF1aXJlU3RyaWN0Q29tcGFyZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVJbmZvLnNjdHJpY3RDb21wYXJlID09PSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgVmFyaWFibGUucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcInZhcmlhYmxlXCI7XG4gICAgfTtcbiAgICBWYXJpYWJsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBpZiAoZnVuYyA9PT0gdm9pZCAwKSB7IGZ1bmMgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgaWYgKCEhZnVuYykge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGZ1bmModGhpcyk7XG4gICAgICAgICAgICBpZiAoISFyZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJlZml4ID0gdGhpcy51c2VWYWx1ZUFzSXRJcyA/IFZhcmlhYmxlLkRpc2FibGVDb252ZXJzaW9uQ2hhciA6IFwiXCI7XG4gICAgICAgIHJldHVybiBcIntcIiArIHByZWZpeCArIHRoaXMudmFyaWFibGVOYW1lICsgXCJ9XCI7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmFyaWFibGUucHJvdG90eXBlLCBcInZhcmlhYmxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YXJpYWJsZU5hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBWYXJpYWJsZS5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAocHJvY2Vzc1ZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWVJbmZvLm5hbWUgPSB0aGlzLnZhcmlhYmxlTmFtZTtcbiAgICAgICAgcHJvY2Vzc1ZhbHVlLmdldFZhbHVlSW5mbyh0aGlzLnZhbHVlSW5mbyk7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlSW5mby5oYXNWYWx1ZVxuICAgICAgICAgICAgPyB0aGlzLmdldENvcnJlY3RWYWx1ZSh0aGlzLnZhbHVlSW5mby52YWx1ZSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICB9O1xuICAgIFZhcmlhYmxlLnByb3RvdHlwZS5zZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIHZhcmlhYmxlcy5wdXNoKHRoaXMudmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICAgIFZhcmlhYmxlLnByb3RvdHlwZS5nZXRDb3JyZWN0VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlVmFsdWVBc0l0SXMpXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldENvcnJlY3RWYWx1ZS5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICB9O1xuICAgIFZhcmlhYmxlLnByb3RvdHlwZS5pc0NvbnRlbnRFcXVhbCA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICB2YXIgdk9wID0gb3A7XG4gICAgICAgIHJldHVybiB2T3AudmFyaWFibGUgPT0gdGhpcy52YXJpYWJsZTtcbiAgICB9O1xuICAgIHJldHVybiBWYXJpYWJsZTtcbn0oQ29uc3QpKTtcblxudmFyIEZ1bmN0aW9uT3BlcmFuZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnVuY3Rpb25PcGVyYW5kLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uT3BlcmFuZChvcmlnaW5hbFZhbHVlLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9yaWdpbmFsVmFsdWUgPSBvcmlnaW5hbFZhbHVlO1xuICAgICAgICBfdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcbiAgICAgICAgX3RoaXMuaXNSZWFkeVZhbHVlID0gZmFsc2U7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmFtZXRlcnMpICYmIHBhcmFtZXRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBfdGhpcy5wYXJhbWV0ZXJzID0gbmV3IEFycmF5T3BlcmFuZChbXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBGdW5jdGlvbk9wZXJhbmQucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfTtcbiAgICBGdW5jdGlvbk9wZXJhbmQucHJvdG90eXBlLmV2YWx1YXRlQXN5bmMgPSBmdW5jdGlvbiAocHJvY2Vzc1ZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNSZWFkeVZhbHVlID0gZmFsc2U7XG4gICAgICAgIHZhciBhc3luY1Byb2Nlc3NWYWx1ZSA9IG5ldyBfY29uZGl0aW9uUHJvY2Vzc1ZhbHVlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJQcm9jZXNzVmFsdWVcIl0oKTtcbiAgICAgICAgYXN5bmNQcm9jZXNzVmFsdWUudmFsdWVzID0gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uY3JlYXRlQ29weShwcm9jZXNzVmFsdWUudmFsdWVzKTtcbiAgICAgICAgYXN5bmNQcm9jZXNzVmFsdWUucHJvcGVydGllcyA9IF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmNyZWF0ZUNvcHkocHJvY2Vzc1ZhbHVlLnByb3BlcnRpZXMpO1xuICAgICAgICBhc3luY1Byb2Nlc3NWYWx1ZS5wcm9wZXJ0aWVzLnJldHVyblJlc3VsdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIF90aGlzLmFzeW5SZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgICBfdGhpcy5pc1JlYWR5VmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMub25Bc3luY1JlYWR5KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZXZhbHVhdGVDb3JlKGFzeW5jUHJvY2Vzc1ZhbHVlKTtcbiAgICB9O1xuICAgIEZ1bmN0aW9uT3BlcmFuZC5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAocHJvY2Vzc1ZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVhZHkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hc3luUmVzdWx0O1xuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNvcmUocHJvY2Vzc1ZhbHVlKTtcbiAgICB9O1xuICAgIEZ1bmN0aW9uT3BlcmFuZC5wcm90b3R5cGUuZXZhbHVhdGVDb3JlID0gZnVuY3Rpb24gKHByb2Nlc3NWYWx1ZSkge1xuICAgICAgICByZXR1cm4gX2Z1bmN0aW9uc2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkZ1bmN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5ydW4odGhpcy5vcmlnaW5hbFZhbHVlLCB0aGlzLnBhcmFtZXRlcnMuZXZhbHVhdGUocHJvY2Vzc1ZhbHVlKSwgcHJvY2Vzc1ZhbHVlLnByb3BlcnRpZXMpO1xuICAgIH07XG4gICAgRnVuY3Rpb25PcGVyYW5kLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgIGlmIChmdW5jID09PSB2b2lkIDApIHsgZnVuYyA9IHVuZGVmaW5lZDsgfVxuICAgICAgICBpZiAoISFmdW5jKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gZnVuYyh0aGlzKTtcbiAgICAgICAgICAgIGlmICghIXJlcylcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsVmFsdWUgKyBcIihcIiArIHRoaXMucGFyYW1ldGVycy50b1N0cmluZyhmdW5jKSArIFwiKVwiO1xuICAgIH07XG4gICAgRnVuY3Rpb25PcGVyYW5kLnByb3RvdHlwZS5zZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXRWYXJpYWJsZXModmFyaWFibGVzKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbk9wZXJhbmQucHJvdG90eXBlLCBcImlzUmVhZHlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzUmVhZHlWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEZ1bmN0aW9uT3BlcmFuZC5wcm90b3R5cGUuaGFzRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgRnVuY3Rpb25PcGVyYW5kLnByb3RvdHlwZS5oYXNBc3luY0Z1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2Z1bmN0aW9uc2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkZ1bmN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5pc0FzeW5jRnVuY3Rpb24odGhpcy5vcmlnaW5hbFZhbHVlKTtcbiAgICB9O1xuICAgIEZ1bmN0aW9uT3BlcmFuZC5wcm90b3R5cGUuYWRkVG9Bc3luY0xpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICBpZiAodGhpcy5oYXNBc3luY0Z1bmN0aW9uKCkpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRnVuY3Rpb25PcGVyYW5kLnByb3RvdHlwZS5pc0NvbnRlbnRFcXVhbCA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICB2YXIgZk9wID0gb3A7XG4gICAgICAgIHJldHVybiBmT3Aub3JpZ2luYWxWYWx1ZSA9PSB0aGlzLm9yaWdpbmFsVmFsdWUgJiYgdGhpcy5hcmVPcGVyYXRvcnNFcXVhbHMoZk9wLnBhcmFtZXRlcnMsIHRoaXMucGFyYW1ldGVycyk7XG4gICAgfTtcbiAgICByZXR1cm4gRnVuY3Rpb25PcGVyYW5kO1xufShPcGVyYW5kKSk7XG5cbnZhciBPcGVyYW5kTWFrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT3BlcmFuZE1ha2VyKCkge1xuICAgIH1cbiAgICBPcGVyYW5kTWFrZXIudGhyb3dJbnZhbGlkT3BlcmF0b3JFcnJvciA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wZXJhdG9yOiAnXCIgKyBvcCArIFwiJ1wiKTtcbiAgICB9O1xuICAgIE9wZXJhbmRNYWtlci5zYWZlVG9TdHJpbmcgPSBmdW5jdGlvbiAob3BlcmFuZCwgZnVuYykge1xuICAgICAgICByZXR1cm4gb3BlcmFuZCA9PSBudWxsID8gXCJcIiA6IG9wZXJhbmQudG9TdHJpbmcoZnVuYyk7XG4gICAgfTtcbiAgICBPcGVyYW5kTWFrZXIudG9PcGVyYW5kU3RyaW5nID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghIXZhbHVlICYmXG4gICAgICAgICAgICAhT3BlcmFuZE1ha2VyLmlzTnVtZXJpYyh2YWx1ZSkgJiZcbiAgICAgICAgICAgICFPcGVyYW5kTWFrZXIuaXNCb29sZWFuVmFsdWUodmFsdWUpKVxuICAgICAgICAgICAgdmFsdWUgPSBcIidcIiArIHZhbHVlICsgXCInXCI7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIE9wZXJhbmRNYWtlci5pc1NwYWNlU3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gISFzdHIgJiYgIXN0ci5yZXBsYWNlKFwiIFwiLCBcIlwiKTtcbiAgICB9O1xuICAgIE9wZXJhbmRNYWtlci5pc051bWVyaWMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCEhdmFsdWUgJiZcbiAgICAgICAgICAgICh2YWx1ZS5pbmRleE9mKFwiLVwiKSA+IC0xIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUuaW5kZXhPZihcIitcIikgPiAxIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUuaW5kZXhPZihcIipcIikgPiAtMSB8fFxuICAgICAgICAgICAgICAgIHZhbHVlLmluZGV4T2YoXCJeXCIpID4gLTEgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZS5pbmRleE9mKFwiL1wiKSA+IC0xIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUuaW5kZXhPZihcIiVcIikgPiAtMSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChPcGVyYW5kTWFrZXIuaXNTcGFjZVN0cmluZyh2YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiSGVscGVyc1wiXS5pc051bWJlcih2YWx1ZSk7XG4gICAgfTtcbiAgICBPcGVyYW5kTWFrZXIuaXNCb29sZWFuVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICghIXZhbHVlICYmXG4gICAgICAgICAgICAodmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ0cnVlXCIgfHwgdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJmYWxzZVwiKSk7XG4gICAgfTtcbiAgICBPcGVyYW5kTWFrZXIuY291bnREZWNpbWFscyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNOdW1iZXIodmFsdWUpICYmIE1hdGguZmxvb3IodmFsdWUpICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHN0cnMgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBzdHJzLmxlbmd0aCA+IDEgJiYgc3Ryc1sxXS5sZW5ndGggfHwgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIE9wZXJhbmRNYWtlci5wbHVzTWludXMgPSBmdW5jdGlvbiAoYSwgYiwgcmVzKSB7XG4gICAgICAgIHZhciBkaWdpdHNBID0gT3BlcmFuZE1ha2VyLmNvdW50RGVjaW1hbHMoYSk7XG4gICAgICAgIHZhciBkaWdpdHNCID0gT3BlcmFuZE1ha2VyLmNvdW50RGVjaW1hbHMoYik7XG4gICAgICAgIGlmIChkaWdpdHNBID4gMCB8fCBkaWdpdHNCID4gMCkge1xuICAgICAgICAgICAgdmFyIGRpZ2l0cyA9IE1hdGgubWF4KGRpZ2l0c0EsIGRpZ2l0c0IpO1xuICAgICAgICAgICAgcmVzID0gcGFyc2VGbG9hdChyZXMudG9GaXhlZChkaWdpdHMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgT3BlcmFuZE1ha2VyLmlzVHdvVmFsdWVFcXVhbHMgPSBmdW5jdGlvbiAoeCwgeSwgaWdub3JlT3JkZXIpIHtcbiAgICAgICAgaWYgKGlnbm9yZU9yZGVyID09PSB2b2lkIDApIHsgaWdub3JlT3JkZXIgPSB0cnVlOyB9XG4gICAgICAgIGlmICh4ID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgeCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHkgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICB5ID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNUd29WYWx1ZUVxdWFscyh4LCB5LCBpZ25vcmVPcmRlcik7XG4gICAgfTtcbiAgICBPcGVyYW5kTWFrZXIub3BlcmF0b3JUb1N0cmluZyA9IGZ1bmN0aW9uIChvcGVyYXRvck5hbWUpIHtcbiAgICAgICAgdmFyIG9wU3RyID0gT3BlcmFuZE1ha2VyLnNpZ25zW29wZXJhdG9yTmFtZV07XG4gICAgICAgIHJldHVybiBvcFN0ciA9PSBudWxsID8gb3BlcmF0b3JOYW1lIDogb3BTdHI7XG4gICAgfTtcbiAgICBPcGVyYW5kTWFrZXIuY29udmVydFZhbEZvckRhdGVDb21wYXJlID0gZnVuY3Rpb24gKHZhbCwgc2Vjb25kKSB7XG4gICAgICAgIGlmIChzZWNvbmQgaW5zdGFuY2VvZiBEYXRlICYmIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBuZXcgRGF0ZSh2YWwpO1xuICAgICAgICAgICAgcmVzLnNldEhvdXJzKDAsIDAsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH07XG4gICAgT3BlcmFuZE1ha2VyLnVuYXJ5RnVuY3Rpb25zID0ge1xuICAgICAgICBlbXB0eTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgbm90ZW1wdHk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuICFPcGVyYW5kTWFrZXIudW5hcnlGdW5jdGlvbnMuZW1wdHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBuZWdhdGU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuICF2YWx1ZTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIE9wZXJhbmRNYWtlci5iaW5hcnlGdW5jdGlvbnMgPSB7XG4gICAgICAgIGFyaXRobWV0aWNPcDogZnVuY3Rpb24gKG9wZXJhdG9yTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbnZlcnRGb3JBcml0aG1ldGljT3AgPSBmdW5jdGlvbiAodmFsLCBzZWNvbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eSh2YWwpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2Vjb25kID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlY29uZCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2Vjb25kKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIGEgPSBjb252ZXJ0Rm9yQXJpdGhtZXRpY09wKGEsIGIpO1xuICAgICAgICAgICAgICAgIGIgPSBjb252ZXJ0Rm9yQXJpdGhtZXRpY09wKGIsIGEpO1xuICAgICAgICAgICAgICAgIHZhciBjb25zdW1lciA9IE9wZXJhbmRNYWtlci5iaW5hcnlGdW5jdGlvbnNbb3BlcmF0b3JOYW1lXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3VtZXIgPT0gbnVsbCA/IG51bGwgOiBjb25zdW1lci5jYWxsKHRoaXMsIGEsIGIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYW5kOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEgJiYgYjtcbiAgICAgICAgfSxcbiAgICAgICAgb3I6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYSB8fCBiO1xuICAgICAgICB9LFxuICAgICAgICBwbHVzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLnN1bUFueVZhbHVlcyhhLCBiKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWludXM6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uY29ycmVjdEFmdGVyUGx1c01pbmlzKGEsIGIsIGEgLSBiKTtcbiAgICAgICAgfSxcbiAgICAgICAgbXVsOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmNvcnJlY3RBZnRlck11bHRpcGxlKGEsIGIsIGEgKiBiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGl2OiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgaWYgKCFiKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGEgLyBiO1xuICAgICAgICB9LFxuICAgICAgICBtb2Q6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICBpZiAoIWIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gYSAlIGI7XG4gICAgICAgIH0sXG4gICAgICAgIHBvd2VyOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KGEsIGIpO1xuICAgICAgICB9LFxuICAgICAgICBncmVhdGVyOiBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgICAgIGlmIChsZWZ0ID09IG51bGwgfHwgcmlnaHQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBsZWZ0ID0gT3BlcmFuZE1ha2VyLmNvbnZlcnRWYWxGb3JEYXRlQ29tcGFyZShsZWZ0LCByaWdodCk7XG4gICAgICAgICAgICByaWdodCA9IE9wZXJhbmRNYWtlci5jb252ZXJ0VmFsRm9yRGF0ZUNvbXBhcmUocmlnaHQsIGxlZnQpO1xuICAgICAgICAgICAgcmV0dXJuIGxlZnQgPiByaWdodDtcbiAgICAgICAgfSxcbiAgICAgICAgbGVzczogZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgICBpZiAobGVmdCA9PSBudWxsIHx8IHJpZ2h0ID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbGVmdCA9IE9wZXJhbmRNYWtlci5jb252ZXJ0VmFsRm9yRGF0ZUNvbXBhcmUobGVmdCwgcmlnaHQpO1xuICAgICAgICAgICAgcmlnaHQgPSBPcGVyYW5kTWFrZXIuY29udmVydFZhbEZvckRhdGVDb21wYXJlKHJpZ2h0LCBsZWZ0KTtcbiAgICAgICAgICAgIHJldHVybiBsZWZ0IDwgcmlnaHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdyZWF0ZXJvcmVxdWFsOiBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgICAgIGlmIChPcGVyYW5kTWFrZXIuYmluYXJ5RnVuY3Rpb25zLmVxdWFsKGxlZnQsIHJpZ2h0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBPcGVyYW5kTWFrZXIuYmluYXJ5RnVuY3Rpb25zLmdyZWF0ZXIobGVmdCwgcmlnaHQpO1xuICAgICAgICB9LFxuICAgICAgICBsZXNzb3JlcXVhbDogZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoT3BlcmFuZE1ha2VyLmJpbmFyeUZ1bmN0aW9ucy5lcXVhbChsZWZ0LCByaWdodCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICByZXR1cm4gT3BlcmFuZE1ha2VyLmJpbmFyeUZ1bmN0aW9ucy5sZXNzKGxlZnQsIHJpZ2h0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZXF1YWw6IGZ1bmN0aW9uIChsZWZ0LCByaWdodCwgc3RyaWN0Q29tcGFyZSkge1xuICAgICAgICAgICAgbGVmdCA9IE9wZXJhbmRNYWtlci5jb252ZXJ0VmFsRm9yRGF0ZUNvbXBhcmUobGVmdCwgcmlnaHQpO1xuICAgICAgICAgICAgcmlnaHQgPSBPcGVyYW5kTWFrZXIuY29udmVydFZhbEZvckRhdGVDb21wYXJlKHJpZ2h0LCBsZWZ0KTtcbiAgICAgICAgICAgIHJldHVybiBPcGVyYW5kTWFrZXIuaXNUd29WYWx1ZUVxdWFscyhsZWZ0LCByaWdodCwgc3RyaWN0Q29tcGFyZSAhPT0gdHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG5vdGVxdWFsOiBmdW5jdGlvbiAobGVmdCwgcmlnaHQsIHN0cmljdENvbXBhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiAhT3BlcmFuZE1ha2VyLmJpbmFyeUZ1bmN0aW9ucy5lcXVhbChsZWZ0LCByaWdodCwgc3RyaWN0Q29tcGFyZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRhaW5zOiBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBPcGVyYW5kTWFrZXIuYmluYXJ5RnVuY3Rpb25zLmNvbnRhaW5zQ29yZShsZWZ0LCByaWdodCwgdHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG5vdGNvbnRhaW5zOiBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgICAgIGlmICghbGVmdCAmJiAhX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHJpZ2h0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBPcGVyYW5kTWFrZXIuYmluYXJ5RnVuY3Rpb25zLmNvbnRhaW5zQ29yZShsZWZ0LCByaWdodCwgZmFsc2UpO1xuICAgICAgICB9LFxuICAgICAgICBhbnlvZjogZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KGxlZnQpICYmIF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eShyaWdodCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBpZiAoX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KGxlZnQpIHx8XG4gICAgICAgICAgICAgICAgKCFBcnJheS5pc0FycmF5KGxlZnQpICYmIGxlZnQubGVuZ3RoID09PSAwKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHJpZ2h0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShsZWZ0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmFuZE1ha2VyLmJpbmFyeUZ1bmN0aW9ucy5jb250YWlucyhyaWdodCwgbGVmdCk7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmlnaHQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYW5kTWFrZXIuYmluYXJ5RnVuY3Rpb25zLmNvbnRhaW5zKGxlZnQsIHJpZ2h0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmlnaHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoT3BlcmFuZE1ha2VyLmJpbmFyeUZ1bmN0aW9ucy5jb250YWlucyhsZWZ0LCByaWdodFtpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBhbGxvZjogZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoIWxlZnQgJiYgIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eShyaWdodCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmFuZE1ha2VyLmJpbmFyeUZ1bmN0aW9ucy5jb250YWlucyhsZWZ0LCByaWdodCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJpZ2h0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFPcGVyYW5kTWFrZXIuYmluYXJ5RnVuY3Rpb25zLmNvbnRhaW5zKGxlZnQsIHJpZ2h0W2ldKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRhaW5zQ29yZTogZnVuY3Rpb24gKGxlZnQsIHJpZ2h0LCBpc0NvbnRhaW5zKSB7XG4gICAgICAgICAgICBpZiAoIWxlZnQgJiYgbGVmdCAhPT0gMCAmJiBsZWZ0ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWxlZnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGVmdCA9IGxlZnQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJpZ2h0ID09PSBcInN0cmluZ1wiIHx8IHJpZ2h0IGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBsZWZ0LnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gcmlnaHQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGxlZnQgPT09IFwic3RyaW5nXCIgfHwgbGVmdCBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgICAgICAgIGlmICghcmlnaHQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICByaWdodCA9IHJpZ2h0LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gbGVmdC5pbmRleE9mKHJpZ2h0KSA+IC0xO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0NvbnRhaW5zID8gZm91bmQgOiAhZm91bmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmlnaHRBcnJheSA9IEFycmF5LmlzQXJyYXkocmlnaHQpID8gcmlnaHQgOiBbcmlnaHRdO1xuICAgICAgICAgICAgZm9yICh2YXIgckluZGV4ID0gMDsgckluZGV4IDwgcmlnaHRBcnJheS5sZW5ndGg7IHJJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0gcmlnaHRBcnJheVtySW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgbGVmdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoT3BlcmFuZE1ha2VyLmlzVHdvVmFsdWVFcXVhbHMobGVmdFtpXSwgcmlnaHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpID09IGxlZnQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzQ29udGFpbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNDb250YWlucztcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIE9wZXJhbmRNYWtlci5zaWducyA9IHtcbiAgICAgICAgbGVzczogXCI8XCIsXG4gICAgICAgIGxlc3NvcmVxdWFsOiBcIjw9XCIsXG4gICAgICAgIGdyZWF0ZXI6IFwiPlwiLFxuICAgICAgICBncmVhdGVyb3JlcXVhbDogXCI+PVwiLFxuICAgICAgICBlcXVhbDogXCI9PVwiLFxuICAgICAgICBub3RlcXVhbDogXCIhPVwiLFxuICAgICAgICBwbHVzOiBcIitcIixcbiAgICAgICAgbWludXM6IFwiLVwiLFxuICAgICAgICBtdWw6IFwiKlwiLFxuICAgICAgICBkaXY6IFwiL1wiLFxuICAgICAgICBhbmQ6IFwiYW5kXCIsXG4gICAgICAgIG9yOiBcIm9yXCIsXG4gICAgICAgIHBvd2VyOiBcIl5cIixcbiAgICAgICAgbW9kOiBcIiVcIixcbiAgICAgICAgbmVnYXRlOiBcIiFcIixcbiAgICB9O1xuICAgIHJldHVybiBPcGVyYW5kTWFrZXI7XG59KCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZnVuY3Rpb25zZmFjdG9yeS50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2Z1bmN0aW9uc2ZhY3RvcnkudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBGdW5jdGlvbkZhY3RvcnksIHJlZ2lzdGVyRnVuY3Rpb24gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiRnVuY3Rpb25GYWN0b3J5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRnVuY3Rpb25GYWN0b3J5OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZWdpc3RlckZ1bmN0aW9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVnaXN0ZXJGdW5jdGlvbjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaGVscGVycyAqLyBcIi4vc3JjL2hlbHBlcnMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NldHRpbmdzICovIFwiLi9zcmMvc2V0dGluZ3MudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbnNvbGVfd2FybmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uc29sZS13YXJuaW5ncyAqLyBcIi4vc3JjL2NvbnNvbGUtd2FybmluZ3MudHNcIik7XG5cblxuXG52YXIgRnVuY3Rpb25GYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uRmFjdG9yeSgpIHtcbiAgICAgICAgdGhpcy5mdW5jdGlvbkhhc2ggPSB7fTtcbiAgICAgICAgdGhpcy5pc0FzeW5jSGFzaCA9IHt9O1xuICAgIH1cbiAgICBGdW5jdGlvbkZhY3RvcnkucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMsIGlzQXN5bmMpIHtcbiAgICAgICAgaWYgKGlzQXN5bmMgPT09IHZvaWQgMCkgeyBpc0FzeW5jID0gZmFsc2U7IH1cbiAgICAgICAgdGhpcy5mdW5jdGlvbkhhc2hbbmFtZV0gPSBmdW5jO1xuICAgICAgICBpZiAoaXNBc3luYylcbiAgICAgICAgICAgIHRoaXMuaXNBc3luY0hhc2hbbmFtZV0gPSB0cnVlO1xuICAgIH07XG4gICAgRnVuY3Rpb25GYWN0b3J5LnByb3RvdHlwZS51bnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuZnVuY3Rpb25IYXNoW25hbWVdO1xuICAgICAgICBkZWxldGUgdGhpcy5pc0FzeW5jSGFzaFtuYW1lXTtcbiAgICB9O1xuICAgIEZ1bmN0aW9uRmFjdG9yeS5wcm90b3R5cGUuaGFzRnVuY3Rpb24gPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmZ1bmN0aW9uSGFzaFtuYW1lXTtcbiAgICB9O1xuICAgIEZ1bmN0aW9uRmFjdG9yeS5wcm90b3R5cGUuaXNBc3luY0Z1bmN0aW9uID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pc0FzeW5jSGFzaFtuYW1lXTtcbiAgICB9O1xuICAgIEZ1bmN0aW9uRmFjdG9yeS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZnVuY3Rpb25IYXNoID0ge307XG4gICAgfTtcbiAgICBGdW5jdGlvbkZhY3RvcnkucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5mdW5jdGlvbkhhc2gpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5zb3J0KCk7XG4gICAgfTtcbiAgICBGdW5jdGlvbkZhY3RvcnkucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMgPT09IHZvaWQgMCkgeyBwcm9wZXJ0aWVzID0gbnVsbDsgfVxuICAgICAgICB2YXIgZnVuYyA9IHRoaXMuZnVuY3Rpb25IYXNoW25hbWVdO1xuICAgICAgICBpZiAoIWZ1bmMpIHtcbiAgICAgICAgICAgIF9jb25zb2xlX3dhcm5pbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJDb25zb2xlV2FybmluZ3NcIl0ud2FybihcIlVua25vd24gZnVuY3Rpb24gbmFtZTogXCIgKyBuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjbGFzc1J1bm5lciA9IHtcbiAgICAgICAgICAgIGZ1bmM6IGZ1bmMsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGNsYXNzUnVubmVyW2tleV0gPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsYXNzUnVubmVyLmZ1bmMocGFyYW1zKTtcbiAgICB9O1xuICAgIEZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZSA9IG5ldyBGdW5jdGlvbkZhY3RvcnkoKTtcbiAgICByZXR1cm4gRnVuY3Rpb25GYWN0b3J5O1xufSgpKTtcblxudmFyIHJlZ2lzdGVyRnVuY3Rpb24gPSBGdW5jdGlvbkZhY3RvcnkuSW5zdGFuY2UucmVnaXN0ZXI7XG5mdW5jdGlvbiBnZXRQYXJhbXNBc0FycmF5KHZhbHVlLCBhcnIpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBnZXRQYXJhbXNBc0FycmF5KHZhbHVlW2ldLCBhcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmdldE51bWJlcih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJyLnB1c2godmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN1bShwYXJhbXMpIHtcbiAgICB2YXIgYXJyID0gW107XG4gICAgZ2V0UGFyYW1zQXNBcnJheShwYXJhbXMsIGFycik7XG4gICAgdmFyIHJlcyA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzID0gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uY29ycmVjdEFmdGVyUGx1c01pbmlzKHJlcywgYXJyW2ldLCByZXMgKyBhcnJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwic3VtXCIsIHN1bSk7XG5mdW5jdGlvbiBtaW5fbWF4KHBhcmFtcywgaXNNaW4pIHtcbiAgICB2YXIgYXJyID0gW107XG4gICAgZ2V0UGFyYW1zQXNBcnJheShwYXJhbXMsIGFycik7XG4gICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocmVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlcyA9IGFycltpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNaW4pIHtcbiAgICAgICAgICAgIGlmIChyZXMgPiBhcnJbaV0pXG4gICAgICAgICAgICAgICAgcmVzID0gYXJyW2ldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJlcyA8IGFycltpXSlcbiAgICAgICAgICAgICAgICByZXMgPSBhcnJbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIG1pbihwYXJhbXMpIHtcbiAgICByZXR1cm4gbWluX21heChwYXJhbXMsIHRydWUpO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwibWluXCIsIG1pbik7XG5mdW5jdGlvbiBtYXgocGFyYW1zKSB7XG4gICAgcmV0dXJuIG1pbl9tYXgocGFyYW1zLCBmYWxzZSk7XG59XG5GdW5jdGlvbkZhY3RvcnkuSW5zdGFuY2UucmVnaXN0ZXIoXCJtYXhcIiwgbWF4KTtcbmZ1bmN0aW9uIGNvdW50KHBhcmFtcykge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBnZXRQYXJhbXNBc0FycmF5KHBhcmFtcywgYXJyKTtcbiAgICByZXR1cm4gYXJyLmxlbmd0aDtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcImNvdW50XCIsIGNvdW50KTtcbmZ1bmN0aW9uIGF2ZyhwYXJhbXMpIHtcbiAgICB2YXIgYXJyID0gW107XG4gICAgZ2V0UGFyYW1zQXNBcnJheShwYXJhbXMsIGFycik7XG4gICAgdmFyIHJlcyA9IHN1bShwYXJhbXMpO1xuICAgIHJldHVybiBhcnIubGVuZ3RoID4gMCA/IHJlcyAvIGFyci5sZW5ndGggOiAwO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwiYXZnXCIsIGF2Zyk7XG5mdW5jdGlvbiBnZXRJbkFycmF5UGFyYW1zKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMubGVuZ3RoICE9IDIpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHZhciBhcnIgPSBwYXJhbXNbMF07XG4gICAgaWYgKCFhcnIpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpICYmICFBcnJheS5pc0FycmF5KE9iamVjdC5rZXlzKGFycikpKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB2YXIgbmFtZSA9IHBhcmFtc1sxXTtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgJiYgIShuYW1lIGluc3RhbmNlb2YgU3RyaW5nKSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHsgZGF0YTogYXJyLCBuYW1lOiBuYW1lIH07XG59XG5mdW5jdGlvbiBjb252ZXJ0VG9OdW1iZXIodmFsKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiSGVscGVyc1wiXS5pc051bWJlcih2YWwpID8gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uZ2V0TnVtYmVyKHZhbCkgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHZhbDtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NJdGVtSW5BcnJheShpdGVtLCBuYW1lLCByZXMsIGZ1bmMsIG5lZWRUb0NvbnZlcnQpIHtcbiAgICBpZiAoIWl0ZW0gfHwgX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KGl0ZW1bbmFtZV0pKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIHZhciB2YWwgPSBuZWVkVG9Db252ZXJ0ID8gY29udmVydFRvTnVtYmVyKGl0ZW1bbmFtZV0pIDogMTtcbiAgICByZXR1cm4gZnVuYyhyZXMsIHZhbCk7XG59XG5mdW5jdGlvbiBjYWxjSW5BcnJheShwYXJhbXMsIGZ1bmMsIG5lZWRUb0NvbnZlcnQpIHtcbiAgICBpZiAobmVlZFRvQ29udmVydCA9PT0gdm9pZCAwKSB7IG5lZWRUb0NvbnZlcnQgPSB0cnVlOyB9XG4gICAgdmFyIHYgPSBnZXRJbkFycmF5UGFyYW1zKHBhcmFtcyk7XG4gICAgaWYgKCF2KVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodi5kYXRhKSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHYuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzID0gcHJvY2Vzc0l0ZW1JbkFycmF5KHYuZGF0YVtpXSwgdi5uYW1lLCByZXMsIGZ1bmMsIG5lZWRUb0NvbnZlcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdi5kYXRhKSB7XG4gICAgICAgICAgICByZXMgPSBwcm9jZXNzSXRlbUluQXJyYXkodi5kYXRhW2tleV0sIHYubmFtZSwgcmVzLCBmdW5jLCBuZWVkVG9Db252ZXJ0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gc3VtSW5BcnJheShwYXJhbXMpIHtcbiAgICB2YXIgcmVzID0gY2FsY0luQXJyYXkocGFyYW1zLCBmdW5jdGlvbiAocmVzLCB2YWwpIHtcbiAgICAgICAgaWYgKHJlcyA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXMgPSAwO1xuICAgICAgICBpZiAodmFsID09IHVuZGVmaW5lZCB8fCB2YWwgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIHJldHVybiBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiSGVscGVyc1wiXS5jb3JyZWN0QWZ0ZXJQbHVzTWluaXMocmVzLCB2YWwsIHJlcyArIHZhbCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcyAhPT0gdW5kZWZpbmVkID8gcmVzIDogMDtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcInN1bUluQXJyYXlcIiwgc3VtSW5BcnJheSk7XG5mdW5jdGlvbiBtaW5JbkFycmF5KHBhcmFtcykge1xuICAgIHJldHVybiBjYWxjSW5BcnJheShwYXJhbXMsIGZ1bmN0aW9uIChyZXMsIHZhbCkge1xuICAgICAgICBpZiAocmVzID09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIGlmICh2YWwgPT0gdW5kZWZpbmVkIHx8IHZhbCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgcmV0dXJuIHJlcyA8IHZhbCA/IHJlcyA6IHZhbDtcbiAgICB9KTtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcIm1pbkluQXJyYXlcIiwgbWluSW5BcnJheSk7XG5mdW5jdGlvbiBtYXhJbkFycmF5KHBhcmFtcykge1xuICAgIHJldHVybiBjYWxjSW5BcnJheShwYXJhbXMsIGZ1bmN0aW9uIChyZXMsIHZhbCkge1xuICAgICAgICBpZiAocmVzID09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIGlmICh2YWwgPT0gdW5kZWZpbmVkIHx8IHZhbCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgcmV0dXJuIHJlcyA+IHZhbCA/IHJlcyA6IHZhbDtcbiAgICB9KTtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcIm1heEluQXJyYXlcIiwgbWF4SW5BcnJheSk7XG5mdW5jdGlvbiBjb3VudEluQXJyYXkocGFyYW1zKSB7XG4gICAgdmFyIHJlcyA9IGNhbGNJbkFycmF5KHBhcmFtcywgZnVuY3Rpb24gKHJlcywgdmFsKSB7XG4gICAgICAgIGlmIChyZXMgPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVzID0gMDtcbiAgICAgICAgaWYgKHZhbCA9PSB1bmRlZmluZWQgfHwgdmFsID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICByZXR1cm4gcmVzICsgMTtcbiAgICB9LCBmYWxzZSk7XG4gICAgcmV0dXJuIHJlcyAhPT0gdW5kZWZpbmVkID8gcmVzIDogMDtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcImNvdW50SW5BcnJheVwiLCBjb3VudEluQXJyYXkpO1xuZnVuY3Rpb24gYXZnSW5BcnJheShwYXJhbXMpIHtcbiAgICB2YXIgY291bnQgPSBjb3VudEluQXJyYXkocGFyYW1zKTtcbiAgICBpZiAoY291bnQgPT0gMClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgcmV0dXJuIHN1bUluQXJyYXkocGFyYW1zKSAvIGNvdW50O1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwiYXZnSW5BcnJheVwiLCBhdmdJbkFycmF5KTtcbmZ1bmN0aW9uIGlpZihwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyAmJiBwYXJhbXMubGVuZ3RoICE9PSAzKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gcGFyYW1zWzBdID8gcGFyYW1zWzFdIDogcGFyYW1zWzJdO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwiaWlmXCIsIGlpZik7XG5mdW5jdGlvbiBnZXREYXRlKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zICYmIHBhcmFtcy5sZW5ndGggPCAxKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoIXBhcmFtc1swXSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHBhcmFtc1swXSk7XG59XG5GdW5jdGlvbkZhY3RvcnkuSW5zdGFuY2UucmVnaXN0ZXIoXCJnZXREYXRlXCIsIGdldERhdGUpO1xuZnVuY3Rpb24gYWdlKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zICYmIHBhcmFtcy5sZW5ndGggPCAxKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoIXBhcmFtc1swXSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgdmFyIGJpcnRoRGF0ZSA9IG5ldyBEYXRlKHBhcmFtc1swXSk7XG4gICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB2YXIgYWdlID0gdG9kYXkuZ2V0RnVsbFllYXIoKSAtIGJpcnRoRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGlmIChhZ2UgPiAwKSB7XG4gICAgICAgIHZhciBtID0gdG9kYXkuZ2V0TW9udGgoKSAtIGJpcnRoRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAobSA8IDAgfHwgKG0gPT09IDAgJiYgdG9kYXkuZ2V0RGF0ZSgpIDwgYmlydGhEYXRlLmdldERhdGUoKSkpIHtcbiAgICAgICAgICAgIGFnZSAtPSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhZ2U7XG59XG5GdW5jdGlvbkZhY3RvcnkuSW5zdGFuY2UucmVnaXN0ZXIoXCJhZ2VcIiwgYWdlKTtcbmZ1bmN0aW9uIGlzQ29udGFpbmVyUmVhZHlDb3JlKGNvbnRhaW5lcikge1xuICAgIGlmICghY29udGFpbmVyKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHF1ZXN0aW9ucyA9IGNvbnRhaW5lci5xdWVzdGlvbnM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVzdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFxdWVzdGlvbnNbaV0udmFsaWRhdGUoZmFsc2UpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGlzQ29udGFpbmVyUmVhZHkocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgJiYgcGFyYW1zLmxlbmd0aCA8IDEpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXBhcmFtc1swXSB8fCAhdGhpcy5zdXJ2ZXkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2YXIgbmFtZSA9IHBhcmFtc1swXTtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5zdXJ2ZXkuZ2V0UGFnZUJ5TmFtZShuYW1lKTtcbiAgICBpZiAoIWNvbnRhaW5lcilcbiAgICAgICAgY29udGFpbmVyID0gdGhpcy5zdXJ2ZXkuZ2V0UGFuZWxCeU5hbWUobmFtZSk7XG4gICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgdmFyIHF1ZXN0aW9uID0gdGhpcy5zdXJ2ZXkuZ2V0UXVlc3Rpb25CeU5hbWUobmFtZSk7XG4gICAgICAgIGlmICghcXVlc3Rpb24gfHwgIUFycmF5LmlzQXJyYXkocXVlc3Rpb24ucGFuZWxzKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpZiAocGFyYW1zWzFdIDwgcXVlc3Rpb24ucGFuZWxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IHF1ZXN0aW9uLnBhbmVsc1twYXJhbXNbMV1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVzdGlvbi5wYW5lbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQ29udGFpbmVyUmVhZHlDb3JlKHF1ZXN0aW9uLnBhbmVsc1tpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpc0NvbnRhaW5lclJlYWR5Q29yZShjb250YWluZXIpO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwiaXNDb250YWluZXJSZWFkeVwiLCBpc0NvbnRhaW5lclJlYWR5KTtcbmZ1bmN0aW9uIGlzRGlzcGxheU1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VydmV5ICYmIHRoaXMuc3VydmV5LmlzRGlzcGxheU1vZGU7XG59XG5GdW5jdGlvbkZhY3RvcnkuSW5zdGFuY2UucmVnaXN0ZXIoXCJpc0Rpc3BsYXlNb2RlXCIsIGlzRGlzcGxheU1vZGUpO1xuZnVuY3Rpb24gY3VycmVudERhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCk7XG59XG5GdW5jdGlvbkZhY3RvcnkuSW5zdGFuY2UucmVnaXN0ZXIoXCJjdXJyZW50RGF0ZVwiLCBjdXJyZW50RGF0ZSk7XG5mdW5jdGlvbiB0b2RheShwYXJhbXMpIHtcbiAgICB2YXIgcmVzID0gbmV3IERhdGUoKTtcbiAgICBpZiAoX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXS5sb2NhbGl6YXRpb24udXNlTG9jYWxUaW1lWm9uZSkge1xuICAgICAgICByZXMuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXMuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmFtcykgJiYgcGFyYW1zLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHJlcy5zZXREYXRlKHJlcy5nZXREYXRlKCkgKyBwYXJhbXNbMF0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwidG9kYXlcIiwgdG9kYXkpO1xuZnVuY3Rpb24gZ2V0WWVhcihwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCAhPT0gMSB8fCAhcGFyYW1zWzBdKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiBuZXcgRGF0ZShwYXJhbXNbMF0pLmdldEZ1bGxZZWFyKCk7XG59XG5GdW5jdGlvbkZhY3RvcnkuSW5zdGFuY2UucmVnaXN0ZXIoXCJnZXRZZWFyXCIsIGdldFllYXIpO1xuZnVuY3Rpb24gY3VycmVudFllYXIoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcImN1cnJlbnRZZWFyXCIsIGN1cnJlbnRZZWFyKTtcbmZ1bmN0aW9uIGRpZmZEYXlzKHBhcmFtcykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShwYXJhbXMpIHx8IHBhcmFtcy5sZW5ndGggIT09IDIpXG4gICAgICAgIHJldHVybiAwO1xuICAgIGlmICghcGFyYW1zWzBdIHx8ICFwYXJhbXNbMV0pXG4gICAgICAgIHJldHVybiAwO1xuICAgIHZhciBkYXRlMSA9IG5ldyBEYXRlKHBhcmFtc1swXSk7XG4gICAgdmFyIGRhdGUyID0gbmV3IERhdGUocGFyYW1zWzFdKTtcbiAgICB2YXIgZGlmZlRpbWUgPSBNYXRoLmFicyhkYXRlMiAtIGRhdGUxKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcImRpZmZEYXlzXCIsIGRpZmZEYXlzKTtcbmZ1bmN0aW9uIGRhdGVGcm9tRmlyc3RQYXJhbWV0ZXJPclRvZGF5KHBhcmFtcykge1xuICAgIHZhciBkYXRlID0gdG9kYXkodW5kZWZpbmVkKTtcbiAgICBpZiAocGFyYW1zICYmIHBhcmFtc1swXSkge1xuICAgICAgICBkYXRlID0gbmV3IERhdGUocGFyYW1zWzBdKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGU7XG59XG5mdW5jdGlvbiB5ZWFyKHBhcmFtcykge1xuICAgIHZhciBkYXRlID0gZGF0ZUZyb21GaXJzdFBhcmFtZXRlck9yVG9kYXkocGFyYW1zKTtcbiAgICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwieWVhclwiLCB5ZWFyKTtcbmZ1bmN0aW9uIG1vbnRoKHBhcmFtcykge1xuICAgIHZhciBkYXRlID0gZGF0ZUZyb21GaXJzdFBhcmFtZXRlck9yVG9kYXkocGFyYW1zKTtcbiAgICByZXR1cm4gZGF0ZS5nZXRNb250aCgpICsgMTtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcIm1vbnRoXCIsIG1vbnRoKTtcbmZ1bmN0aW9uIGRheShwYXJhbXMpIHtcbiAgICB2YXIgZGF0ZSA9IGRhdGVGcm9tRmlyc3RQYXJhbWV0ZXJPclRvZGF5KHBhcmFtcyk7XG4gICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwiZGF5XCIsIGRheSk7XG5mdW5jdGlvbiB3ZWVrZGF5KHBhcmFtcykge1xuICAgIHZhciBkYXRlID0gZGF0ZUZyb21GaXJzdFBhcmFtZXRlck9yVG9kYXkocGFyYW1zKTtcbiAgICByZXR1cm4gZGF0ZS5nZXREYXkoKTtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcIndlZWtkYXlcIiwgd2Vla2RheSk7XG5mdW5jdGlvbiBnZXRRdWVzdGlvblZhbHVlQnlDb250ZXh0KGNvbnRleHQsIG5hbWUpIHtcbiAgICBpZiAoIWNvbnRleHQgfHwgIW5hbWUpXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgdmFyIGtleXMgPSBbXCJyb3dcIiwgXCJwYW5lbFwiLCBcInN1cnZleVwiXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGN0eCA9IGNvbnRleHRba2V5c1tpXV07XG4gICAgICAgIGlmIChjdHggJiYgY3R4LmdldFF1ZXN0aW9uQnlOYW1lKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gY3R4LmdldFF1ZXN0aW9uQnlOYW1lKG5hbWUpO1xuICAgICAgICAgICAgaWYgKHJlcylcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZGlzcGxheVZhbHVlKHBhcmFtcykge1xuICAgIHZhciBxID0gZ2V0UXVlc3Rpb25WYWx1ZUJ5Q29udGV4dCh0aGlzLCBwYXJhbXNbMF0pO1xuICAgIHJldHVybiBxID8gcS5kaXNwbGF5VmFsdWUgOiBcIlwiO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwiZGlzcGxheVZhbHVlXCIsIGRpc3BsYXlWYWx1ZSk7XG5mdW5jdGlvbiBwcm9wZXJ0eVZhbHVlKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAyIHx8ICFwYXJhbXNbMF0gfHwgIXBhcmFtc1sxXSlcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB2YXIgcSA9IGdldFF1ZXN0aW9uVmFsdWVCeUNvbnRleHQodGhpcywgcGFyYW1zWzBdKTtcbiAgICByZXR1cm4gcSA/IHFbcGFyYW1zWzFdXSA6IHVuZGVmaW5lZDtcbn1cbkZ1bmN0aW9uRmFjdG9yeS5JbnN0YW5jZS5yZWdpc3RlcihcInByb3BlcnR5VmFsdWVcIiwgcHJvcGVydHlWYWx1ZSk7XG5mdW5jdGlvbiBzdWJzdHJpbmdfKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMubGVuZ3RoIDwgMilcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgdmFyIHMgPSBwYXJhbXNbMF07XG4gICAgaWYgKCFzIHx8IHR5cGVvZiBzICE9PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB2YXIgc3RhcnQgPSBwYXJhbXNbMV07XG4gICAgaWYgKCFfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiSGVscGVyc1wiXS5pc051bWJlcihzdGFydCkpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIHZhciBlbmQgPSBwYXJhbXMubGVuZ3RoID4gMiA/IHBhcmFtc1syXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmlzTnVtYmVyKGVuZCkpXG4gICAgICAgIHJldHVybiBzLnN1YnN0cmluZyhzdGFydCk7XG4gICAgcmV0dXJuIHMuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xufVxuRnVuY3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyKFwic3Vic3RyaW5nXCIsIHN1YnN0cmluZ18pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2dsb2JhbF92YXJpYWJsZXNfdXRpbHMudHNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9nbG9iYWxfdmFyaWFibGVzX3V0aWxzLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogRG9tV2luZG93SGVscGVyLCBEb21Eb2N1bWVudEhlbHBlciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJEb21XaW5kb3dIZWxwZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBEb21XaW5kb3dIZWxwZXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkRvbURvY3VtZW50SGVscGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRG9tRG9jdW1lbnRIZWxwZXI7IH0pO1xuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG52YXIgRG9tV2luZG93SGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERvbVdpbmRvd0hlbHBlcigpIHtcbiAgICB9XG4gICAgRG9tV2luZG93SGVscGVyLmlzQXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIHdpbmRvdztcbiAgICB9O1xuICAgIERvbVdpbmRvd0hlbHBlci5pc0ZpbGVSZWFkZXJBdmFpbGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRG9tV2luZG93SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiAhIXdpbmRvd1tcIkZpbGVSZWFkZXJcIl07XG4gICAgfTtcbiAgICBEb21XaW5kb3dIZWxwZXIuZ2V0TG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRG9tV2luZG93SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb247XG4gICAgfTtcbiAgICBEb21XaW5kb3dIZWxwZXIuZ2V0VmlzdWFsVmlld3BvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRG9tV2luZG93SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy52aXN1YWxWaWV3cG9ydDtcbiAgICB9O1xuICAgIERvbVdpbmRvd0hlbHBlci5nZXRJbm5lcldpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIURvbVdpbmRvd0hlbHBlci5pc0F2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gd2luZG93LmlubmVyV2lkdGg7XG4gICAgfTtcbiAgICBEb21XaW5kb3dIZWxwZXIuZ2V0SW5uZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRG9tV2luZG93SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB9O1xuICAgIERvbVdpbmRvd0hlbHBlci5nZXRXaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRG9tV2luZG93SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfTtcbiAgICBEb21XaW5kb3dIZWxwZXIuaGFzT3duID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgICAgICBpZiAoIURvbVdpbmRvd0hlbHBlci5pc0F2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gcHJvcGVydHlOYW1lIGluIHdpbmRvdztcbiAgICB9O1xuICAgIERvbVdpbmRvd0hlbHBlci5nZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChEb21XaW5kb3dIZWxwZXIuaXNBdmFpbGFibGUoKSAmJiB3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEb21XaW5kb3dIZWxwZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChEb21XaW5kb3dIZWxwZXIuaXNBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEb21XaW5kb3dIZWxwZXIuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIURvbVdpbmRvd0hlbHBlci5pc0F2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICBEb21XaW5kb3dIZWxwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIURvbVdpbmRvd0hlbHBlci5pc0F2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICByZXR1cm4gRG9tV2luZG93SGVscGVyO1xufSgpKTtcblxudmFyIERvbURvY3VtZW50SGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERvbURvY3VtZW50SGVscGVyKCkge1xuICAgIH1cbiAgICBEb21Eb2N1bWVudEhlbHBlci5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBkb2N1bWVudDtcbiAgICB9O1xuICAgIERvbURvY3VtZW50SGVscGVyLmdldEJvZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRG9tRG9jdW1lbnRIZWxwZXIuaXNBdmFpbGFibGUoKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHk7XG4gICAgfTtcbiAgICBEb21Eb2N1bWVudEhlbHBlci5nZXREb2N1bWVudEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRG9tRG9jdW1lbnRIZWxwZXIuaXNBdmFpbGFibGUoKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICB9O1xuICAgIERvbURvY3VtZW50SGVscGVyLmdldERvY3VtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIURvbURvY3VtZW50SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9O1xuICAgIERvbURvY3VtZW50SGVscGVyLmdldENvb2tpZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFEb21Eb2N1bWVudEhlbHBlci5pc0F2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY29va2llO1xuICAgIH07XG4gICAgRG9tRG9jdW1lbnRIZWxwZXIuc2V0Q29va2llID0gZnVuY3Rpb24gKG5ld0Nvb2tpZSkge1xuICAgICAgICBpZiAoIURvbURvY3VtZW50SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5ld0Nvb2tpZTtcbiAgICB9O1xuICAgIERvbURvY3VtZW50SGVscGVyLmFjdGl2ZUVsZW1lbnRCbHVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIURvbURvY3VtZW50SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgaWYgKCEhYWN0aXZlRWxlbWVudCAmJiAhIWFjdGl2ZUVsZW1lbnQuYmx1cikge1xuICAgICAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERvbURvY3VtZW50SGVscGVyLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAodGFnTmFtZSkge1xuICAgICAgICBpZiAoIURvbURvY3VtZW50SGVscGVyLmlzQXZhaWxhYmxlKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICAgIH07XG4gICAgRG9tRG9jdW1lbnRIZWxwZXIuZ2V0Q29tcHV0ZWRTdHlsZSA9IGZ1bmN0aW9uIChlbHQpIHtcbiAgICAgICAgaWYgKCFEb21Eb2N1bWVudEhlbHBlci5pc0F2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDU1NTdHlsZURlY2xhcmF0aW9uKCk7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsdCk7XG4gICAgfTtcbiAgICBEb21Eb2N1bWVudEhlbHBlci5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghRG9tRG9jdW1lbnRIZWxwZXIuaXNBdmFpbGFibGUoKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICBEb21Eb2N1bWVudEhlbHBlci5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghRG9tRG9jdW1lbnRIZWxwZXIuaXNBdmFpbGFibGUoKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICByZXR1cm4gRG9tRG9jdW1lbnRIZWxwZXI7XG59KCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvaGVscGVycy50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hlbHBlcnMudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBIZWxwZXJzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkhlbHBlcnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBIZWxwZXJzOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc2V0dGluZ3MgKi8gXCIuL3NyYy9zZXR0aW5ncy50c1wiKTtcblxudmFyIEhlbHBlcnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGVscGVycygpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdGF0aWMgbWV0aG9kcyB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhIHZhbHVlIHVuZGVmaW5lZCwgbnVsbCwgZW1wdHkgc3RyaW5nIG9yIGVtcHR5IGFycmF5LlxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqL1xuICAgIEhlbHBlcnMuaXNWYWx1ZUVtcHR5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCEhdmFsdWUgJiYgSGVscGVycy5pc1ZhbHVlT2JqZWN0KHZhbHVlKSAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUhlbHBlcnMuaXNWYWx1ZUVtcHR5KHZhbHVlW2tleV0pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXZhbHVlICYmIHZhbHVlICE9PSAwICYmIHZhbHVlICE9PSBmYWxzZTtcbiAgICB9O1xuICAgIEhlbHBlcnMuaXNBcnJheUNvbnRhaW5zRXF1YWwgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoeCkgfHwgIUFycmF5LmlzQXJyYXkoeSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh4Lmxlbmd0aCAhPT0geS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGogPSAwO1xuICAgICAgICAgICAgZm9yICg7IGogPCB5Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKEhlbHBlcnMuaXNUd29WYWx1ZUVxdWFscyh4W2ldLCB5W2pdKSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaiA9PT0geS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgSGVscGVycy5pc0FycmF5c0VxdWFsID0gZnVuY3Rpb24gKHgsIHksIGlnbm9yZU9yZGVyLCBjYXNlU2Vuc2l0aXZlLCB0cmltU3RyaW5ncykge1xuICAgICAgICBpZiAoaWdub3JlT3JkZXIgPT09IHZvaWQgMCkgeyBpZ25vcmVPcmRlciA9IGZhbHNlOyB9XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh4KSB8fCAhQXJyYXkuaXNBcnJheSh5KSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHgubGVuZ3RoICE9PSB5Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGlnbm9yZU9yZGVyKSB7XG4gICAgICAgICAgICB2YXIgeFNvcnRlZCA9IFtdO1xuICAgICAgICAgICAgdmFyIHlTb3J0ZWQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHhTb3J0ZWQucHVzaCh4W2ldKTtcbiAgICAgICAgICAgICAgICB5U29ydGVkLnB1c2goeVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4U29ydGVkLnNvcnQoKTtcbiAgICAgICAgICAgIHlTb3J0ZWQuc29ydCgpO1xuICAgICAgICAgICAgeCA9IHhTb3J0ZWQ7XG4gICAgICAgICAgICB5ID0geVNvcnRlZDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghSGVscGVycy5pc1R3b1ZhbHVlRXF1YWxzKHhbaV0sIHlbaV0sIGlnbm9yZU9yZGVyLCBjYXNlU2Vuc2l0aXZlLCB0cmltU3RyaW5ncykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgSGVscGVycy5jb21wYXJlU3RyaW5ncyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBub3JtYWxpemUgPSBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInNldHRpbmdzXCJdLmNvbXBhcmF0b3Iubm9ybWFsaXplVGV4dENhbGxiYWNrO1xuICAgICAgICBpZiAoISF4KVxuICAgICAgICAgICAgeCA9IG5vcm1hbGl6ZSh4LCBcImNvbXBhcmVcIikudHJpbSgpO1xuICAgICAgICBpZiAoISF5KVxuICAgICAgICAgICAgeSA9IG5vcm1hbGl6ZSh5LCBcImNvbXBhcmVcIikudHJpbSgpO1xuICAgICAgICBpZiAoIXggJiYgIXkpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgaWYgKCF4KVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoIXkpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgaWYgKHggPT09IHkpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgdmFyIGRpZ2l0SW5kZXggPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aCAmJiBpIDwgeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGFyRGlnaXQoeFtpXSkgJiYgdGhpcy5pc0NoYXJEaWdpdCh5W2ldKSkge1xuICAgICAgICAgICAgICAgIGRpZ2l0SW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHhbaV0gIT09IHlbaV0pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpZ2l0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdmFyIG5YID0gdGhpcy5nZXROdW1iZXJGcm9tU3RyKHgsIGRpZ2l0SW5kZXgpO1xuICAgICAgICAgICAgdmFyIG5ZID0gdGhpcy5nZXROdW1iZXJGcm9tU3RyKHksIGRpZ2l0SW5kZXgpO1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oblgpICYmICFOdW1iZXIuaXNOYU4oblkpICYmIG5YICE9PSBuWSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuWCA+IG5ZID8gMSA6IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4ID4geSA/IDEgOiAtMTtcbiAgICB9O1xuICAgIEhlbHBlcnMuaXNUd29WYWx1ZUVxdWFscyA9IGZ1bmN0aW9uICh4LCB5LCBpZ25vcmVPcmRlciwgY2FzZVNlbnNpdGl2ZSwgdHJpbVN0cmluZ3MpIHtcbiAgICAgICAgaWYgKGlnbm9yZU9yZGVyID09PSB2b2lkIDApIHsgaWdub3JlT3JkZXIgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoeCA9PT0geSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSAmJiB4Lmxlbmd0aCA9PT0gMCAmJiB0eXBlb2YgeSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh5KSAmJiB5Lmxlbmd0aCA9PT0gMCAmJiB0eXBlb2YgeCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKHggPT09IHVuZGVmaW5lZCB8fCB4ID09PSBudWxsKSAmJiB5ID09PSBcIlwiKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICgoeSA9PT0gdW5kZWZpbmVkIHx8IHkgPT09IG51bGwpICYmIHggPT09IFwiXCIpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKHRyaW1TdHJpbmdzID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0cmltU3RyaW5ncyA9IF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wic2V0dGluZ3NcIl0uY29tcGFyYXRvci50cmltU3RyaW5ncztcbiAgICAgICAgaWYgKGNhc2VTZW5zaXRpdmUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGNhc2VTZW5zaXRpdmUgPSBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInNldHRpbmdzXCJdLmNvbXBhcmF0b3IuY2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiB5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YXIgbm9ybWFsaXplID0gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJzZXR0aW5nc1wiXS5jb21wYXJhdG9yLm5vcm1hbGl6ZVRleHRDYWxsYmFjaztcbiAgICAgICAgICAgIHggPSBub3JtYWxpemUoeCwgXCJjb21wYXJlXCIpO1xuICAgICAgICAgICAgeSA9IG5vcm1hbGl6ZSh5LCBcImNvbXBhcmVcIik7XG4gICAgICAgICAgICBpZiAodHJpbVN0cmluZ3MpIHtcbiAgICAgICAgICAgICAgICB4ID0geC50cmltKCk7XG4gICAgICAgICAgICAgICAgeSA9IHkudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjYXNlU2Vuc2l0aXZlKSB7XG4gICAgICAgICAgICAgICAgeCA9IHgudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB5ID0geS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHggPT09IHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBEYXRlICYmIHkgaW5zdGFuY2VvZiBEYXRlKVxuICAgICAgICAgICAgcmV0dXJuIHguZ2V0VGltZSgpID09IHkuZ2V0VGltZSgpO1xuICAgICAgICBpZiAoSGVscGVycy5pc0NvbnZlcnRpYmxlVG9OdW1iZXIoeCkgJiYgSGVscGVycy5pc0NvbnZlcnRpYmxlVG9OdW1iZXIoeSkpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUludCh4KSA9PT0gcGFyc2VJbnQoeSkgJiYgcGFyc2VGbG9hdCh4KSA9PT0gcGFyc2VGbG9hdCh5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgoIUhlbHBlcnMuaXNWYWx1ZUVtcHR5KHgpICYmIEhlbHBlcnMuaXNWYWx1ZUVtcHR5KHkpKSB8fFxuICAgICAgICAgICAgKEhlbHBlcnMuaXNWYWx1ZUVtcHR5KHgpICYmICFIZWxwZXJzLmlzVmFsdWVFbXB0eSh5KSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICgoeCA9PT0gdHJ1ZSB8fCB4ID09PSBmYWxzZSkgJiYgdHlwZW9mIHkgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHgudG9TdHJpbmcoKSA9PT0geS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoeSA9PT0gdHJ1ZSB8fCB5ID09PSBmYWxzZSkgJiYgdHlwZW9mIHggPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKSA9PT0geC50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghSGVscGVycy5pc1ZhbHVlT2JqZWN0KHgpICYmICFIZWxwZXJzLmlzVmFsdWVPYmplY3QoeSkpXG4gICAgICAgICAgICByZXR1cm4geCA9PSB5O1xuICAgICAgICBpZiAoIUhlbHBlcnMuaXNWYWx1ZU9iamVjdCh4KSB8fCAhSGVscGVycy5pc1ZhbHVlT2JqZWN0KHkpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoeFtcImVxdWFsc1wiXSAmJiB5W1wiZXF1YWxzXCJdKVxuICAgICAgICAgICAgcmV0dXJuIHguZXF1YWxzKHkpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSAmJiBBcnJheS5pc0FycmF5KHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gSGVscGVycy5pc0FycmF5c0VxdWFsKHgsIHksIGlnbm9yZU9yZGVyLCBjYXNlU2Vuc2l0aXZlLCB0cmltU3RyaW5ncyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgcCBpbiB4KSB7XG4gICAgICAgICAgICBpZiAoIXguaGFzT3duUHJvcGVydHkocCkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIXkuaGFzT3duUHJvcGVydHkocCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVHdvVmFsdWVFcXVhbHMoeFtwXSwgeVtwXSwgaWdub3JlT3JkZXIsIGNhc2VTZW5zaXRpdmUsIHRyaW1TdHJpbmdzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChwIGluIHkpIHtcbiAgICAgICAgICAgIGlmICh5Lmhhc093blByb3BlcnR5KHApICYmICF4Lmhhc093blByb3BlcnR5KHApKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIEhlbHBlcnMucmFuZG9taXplQXJyYXkgPSBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W2ldO1xuICAgICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgICAgICAgICAgIGFycmF5W2pdID0gdGVtcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgICBIZWxwZXJzLmdldFVuYmluZFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKEhlbHBlcnMuZ2V0VW5iaW5kVmFsdWUodmFsdWVbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhdmFsdWUgJiYgSGVscGVycy5pc1ZhbHVlT2JqZWN0KHZhbHVlKSAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgSGVscGVycy5jcmVhdGVDb3B5ID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgcmVzID0ge307XG4gICAgICAgIGlmICghb2JqKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgcmVzW2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSGVscGVycy5pc0NvbnZlcnRpYmxlVG9OdW1iZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgICAgICAhaXNOYU4odmFsdWUpKTtcbiAgICB9O1xuICAgIEhlbHBlcnMuaXNWYWx1ZU9iamVjdCA9IGZ1bmN0aW9uICh2YWwsIGV4Y2x1ZGVBcnJheSkge1xuICAgICAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgT2JqZWN0ICYmICghZXhjbHVkZUFycmF5IHx8ICFBcnJheS5pc0FycmF5KHZhbCkpO1xuICAgIH07XG4gICAgSGVscGVycy5pc051bWJlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKHRoaXMuZ2V0TnVtYmVyKHZhbHVlKSk7XG4gICAgfTtcbiAgICBIZWxwZXJzLmdldE51bWJlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICEhdmFsdWUgJiZcbiAgICAgICAgICAgIHZhbHVlLmluZGV4T2YoXCIweFwiKSA9PSAwICYmXG4gICAgICAgICAgICB2YWx1ZS5sZW5ndGggPiAzMilcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIHZhbHVlID0gdGhpcy5wcmVwYXJlU3RyaW5nVG9OdW1iZXIodmFsdWUpO1xuICAgICAgICB2YXIgcmVzID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgIGlmIChpc05hTihyZXMpIHx8ICFpc0Zpbml0ZSh2YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSGVscGVycy5wcmVwYXJlU3RyaW5nVG9OdW1iZXIgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSBcInN0cmluZ1wiIHx8ICF2YWwpXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB2YXIgaSA9IHZhbC5pbmRleE9mKFwiLFwiKTtcbiAgICAgICAgaWYgKGkgPiAtMSAmJiB2YWwuaW5kZXhPZihcIixcIiwgaSArIDEpIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbC5yZXBsYWNlKFwiLFwiLCBcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuICAgIEhlbHBlcnMuZ2V0TWF4TGVuZ3RoID0gZnVuY3Rpb24gKG1heExlbmd0aCwgc3VydmV5TGVuZ3RoKSB7XG4gICAgICAgIGlmIChtYXhMZW5ndGggPCAwKSB7XG4gICAgICAgICAgICBtYXhMZW5ndGggPSBzdXJ2ZXlMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heExlbmd0aCA+IDAgPyBtYXhMZW5ndGggOiBudWxsO1xuICAgIH07XG4gICAgSGVscGVycy5nZXRSZW1haW5pbmdDaGFyYWN0ZXJDb3VudGVyVGV4dCA9IGZ1bmN0aW9uIChuZXdWYWx1ZSwgbWF4TGVuZ3RoKSB7XG4gICAgICAgIGlmICghbWF4TGVuZ3RoIHx8IG1heExlbmd0aCA8PSAwIHx8ICFfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInNldHRpbmdzXCJdLnNob3dNYXhMZW5ndGhJbmRpY2F0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YWx1ZSA9IG5ld1ZhbHVlID8gbmV3VmFsdWUubGVuZ3RoIDogXCIwXCI7XG4gICAgICAgIHJldHVybiBbdmFsdWUsIG1heExlbmd0aF0uam9pbihcIi9cIik7XG4gICAgfTtcbiAgICBIZWxwZXJzLmdldE51bWJlckJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIHN0YXJ0SW5kZXhTdHIpIHtcbiAgICAgICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB2YXIgc3RhcnRJbmRleCA9IDE7XG4gICAgICAgIHZhciBwcmVmaXggPSBcIlwiO1xuICAgICAgICB2YXIgcG9zdGZpeCA9IFwiLlwiO1xuICAgICAgICB2YXIgaXNOdW1lcmljID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN0ckluZGV4ID0gXCJBXCI7XG4gICAgICAgIHZhciBzdHIgPSBcIlwiO1xuICAgICAgICBpZiAoISFzdGFydEluZGV4U3RyKSB7XG4gICAgICAgICAgICBzdHIgPSBzdGFydEluZGV4U3RyO1xuICAgICAgICAgICAgdmFyIGluZCA9IHN0ci5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdmFyIGhhc0RpZ2l0ID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChIZWxwZXJzLmlzQ2hhckRpZ2l0KHN0cltpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzRGlnaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hlY2tMZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoaGFzRGlnaXQgJiYgIUhlbHBlcnMuaXNDaGFyRGlnaXQoc3RyW2luZF0pKSB8fFxuICAgICAgICAgICAgICAgICAgICBIZWxwZXJzLmlzQ2hhck5vdExldHRlckFuZERpZ2l0KHN0cltpbmRdKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2hpbGUgKGluZCA+PSAwICYmIGNoZWNrTGV0dGVyKCkpXG4gICAgICAgICAgICAgICAgaW5kLS07XG4gICAgICAgICAgICB2YXIgbmV3UG9zdGZpeCA9IFwiXCI7XG4gICAgICAgICAgICBpZiAoaW5kIDwgc3RyLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBuZXdQb3N0Zml4ID0gc3RyLnN1YnN0cmluZyhpbmQgKyAxKTtcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGluZCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kID0gc3RyLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB3aGlsZSAoaW5kID49IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tMZXR0ZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaW5kLS07XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNEaWdpdClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJJbmRleCA9IHN0ci5zdWJzdHJpbmcoaW5kICsgMSk7XG4gICAgICAgICAgICBwcmVmaXggPSBzdHIuc3Vic3RyaW5nKDAsIGluZCArIDEpO1xuICAgICAgICAgICAgaWYgKHBhcnNlSW50KHN0ckluZGV4KSlcbiAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gcGFyc2VJbnQoc3RySW5kZXgpO1xuICAgICAgICAgICAgZWxzZSBpZiAoc3RySW5kZXgubGVuZ3RoID09IDEpXG4gICAgICAgICAgICAgICAgaXNOdW1lcmljID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoISFuZXdQb3N0Zml4IHx8ICEhcHJlZml4KSB7XG4gICAgICAgICAgICAgICAgcG9zdGZpeCA9IG5ld1Bvc3RmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTnVtZXJpYykge1xuICAgICAgICAgICAgdmFyIHZhbCA9IChpbmRleCArIHN0YXJ0SW5kZXgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHN0ckluZGV4Lmxlbmd0aClcbiAgICAgICAgICAgICAgICB2YWwgPSBcIjBcIiArIHZhbDtcbiAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyB2YWwgKyBwb3N0Zml4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocHJlZml4ICsgU3RyaW5nLmZyb21DaGFyQ29kZShzdHJJbmRleC5jaGFyQ29kZUF0KDApICsgaW5kZXgpICsgcG9zdGZpeCk7XG4gICAgfTtcbiAgICBIZWxwZXJzLmlzQ2hhck5vdExldHRlckFuZERpZ2l0ID0gZnVuY3Rpb24gKGNoKSB7XG4gICAgICAgIHJldHVybiBjaC50b1VwcGVyQ2FzZSgpID09IGNoLnRvTG93ZXJDYXNlKCkgJiYgIUhlbHBlcnMuaXNDaGFyRGlnaXQoY2gpO1xuICAgIH07XG4gICAgSGVscGVycy5pc0NoYXJEaWdpdCA9IGZ1bmN0aW9uIChjaCkge1xuICAgICAgICByZXR1cm4gY2ggPj0gXCIwXCIgJiYgY2ggPD0gXCI5XCI7XG4gICAgfTtcbiAgICBIZWxwZXJzLmdldE51bWJlckZyb21TdHIgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNDaGFyRGlnaXQoc3RyW2luZGV4XSkpXG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB2YXIgblN0ciA9IFwiXCI7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IHN0ci5sZW5ndGggJiYgdGhpcy5pc0NoYXJEaWdpdChzdHJbaW5kZXhdKSkge1xuICAgICAgICAgICAgblN0ciArPSBzdHJbaW5kZXhdO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5TdHIpXG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXROdW1iZXIoblN0cik7XG4gICAgfTtcbiAgICBIZWxwZXJzLmNvdW50RGVjaW1hbHMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKEhlbHBlcnMuaXNOdW1iZXIodmFsdWUpICYmIE1hdGguZmxvb3IodmFsdWUpICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHN0cnMgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBzdHJzLmxlbmd0aCA+IDEgJiYgc3Ryc1sxXS5sZW5ndGggfHwgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIEhlbHBlcnMuY29ycmVjdEFmdGVyUGx1c01pbmlzID0gZnVuY3Rpb24gKGEsIGIsIHJlcykge1xuICAgICAgICB2YXIgZGlnaXRzQSA9IEhlbHBlcnMuY291bnREZWNpbWFscyhhKTtcbiAgICAgICAgdmFyIGRpZ2l0c0IgPSBIZWxwZXJzLmNvdW50RGVjaW1hbHMoYik7XG4gICAgICAgIGlmIChkaWdpdHNBID4gMCB8fCBkaWdpdHNCID4gMCkge1xuICAgICAgICAgICAgdmFyIGRpZ2l0cyA9IE1hdGgubWF4KGRpZ2l0c0EsIGRpZ2l0c0IpO1xuICAgICAgICAgICAgcmVzID0gcGFyc2VGbG9hdChyZXMudG9GaXhlZChkaWdpdHMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSGVscGVycy5zdW1BbnlWYWx1ZXMgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICBpZiAoIUhlbHBlcnMuaXNOdW1iZXIoYSkgfHwgIUhlbHBlcnMuaXNOdW1iZXIoYikpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChhKS5jb25jYXQoYik7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhKSB8fCBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IEFycmF5LmlzQXJyYXkoYSkgPyBhIDogYjtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gYXJyID09PSBhID8gYiA6IGE7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9IGFyci5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnIgPT09IGEgPyBzdHIgKyB2YWwgOiB2YWwgKyBzdHI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcnJbaV0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBIZWxwZXJzLmNvcnJlY3RBZnRlclBsdXNNaW5pcyhyZXMsIGFycltpXSwgcmVzICsgYXJyW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSGVscGVycy5jb3JyZWN0QWZ0ZXJQbHVzTWluaXMocmVzLCB2YWwsIHJlcyArIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGEgKyBiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgYiA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiBhICsgYjtcbiAgICAgICAgcmV0dXJuIEhlbHBlcnMuY29ycmVjdEFmdGVyUGx1c01pbmlzKGEsIGIsIGEgKyBiKTtcbiAgICB9O1xuICAgIEhlbHBlcnMuY29ycmVjdEFmdGVyTXVsdGlwbGUgPSBmdW5jdGlvbiAoYSwgYiwgcmVzKSB7XG4gICAgICAgIHZhciBkaWdpdHMgPSBIZWxwZXJzLmNvdW50RGVjaW1hbHMoYSkgKyBIZWxwZXJzLmNvdW50RGVjaW1hbHMoYik7XG4gICAgICAgIGlmIChkaWdpdHMgPiAwKSB7XG4gICAgICAgICAgICByZXMgPSBwYXJzZUZsb2F0KHJlcy50b0ZpeGVkKGRpZ2l0cykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBIZWxwZXJzLmNvbnZlcnRBcnJheVZhbHVlVG9PYmplY3QgPSBmdW5jdGlvbiAoc3JjLCBwcm9wTmFtZSwgZGVzdCkge1xuICAgICAgICBpZiAoZGVzdCA9PT0gdm9pZCAwKSB7IGRlc3QgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBpZiAoIXNyYyB8fCAhQXJyYXkuaXNBcnJheShzcmMpKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcmMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVzdCkpIHtcbiAgICAgICAgICAgICAgICBpdGVtID0gSGVscGVycy5maW5kT2JqQnlQcm9wVmFsdWUoZGVzdCwgcHJvcE5hbWUsIHNyY1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpdGVtID0ge307XG4gICAgICAgICAgICAgICAgaXRlbVtwcm9wTmFtZV0gPSBzcmNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSGVscGVycy5maW5kT2JqQnlQcm9wVmFsdWUgPSBmdW5jdGlvbiAoYXJyLCBwcm9wTmFtZSwgdmFsKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoSGVscGVycy5pc1R3b1ZhbHVlRXF1YWxzKGFycltpXVtwcm9wTmFtZV0sIHZhbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycltpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgSGVscGVycy5jb252ZXJ0QXJyYXlPYmplY3RUb1ZhbHVlID0gZnVuY3Rpb24gKHNyYywgcHJvcE5hbWUpIHtcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBpZiAoIXNyYyB8fCAhQXJyYXkuaXNBcnJheShzcmMpKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcmMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtVmFsID0gISFzcmNbaV0gPyBzcmNbaV1bcHJvcE5hbWVdIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKCFIZWxwZXJzLmlzVmFsdWVFbXB0eShpdGVtVmFsKSlcbiAgICAgICAgICAgICAgICByZXMucHVzaChpdGVtVmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSGVscGVycy5jb252ZXJ0RGF0ZVRvU3RyaW5nID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgdmFyIHRvU3RyID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgaWYgKHZhbCA8IDEwKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIjBcIiArIHZhbC50b1N0cmluZygpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbC50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpICsgXCItXCIgKyB0b1N0cihkYXRlLmdldE1vbnRoKCkgKyAxKSArIFwiLVwiICsgdG9TdHIoZGF0ZS5nZXREYXRlKCkpO1xuICAgIH07XG4gICAgSGVscGVycy5jb252ZXJ0RGF0ZVRpbWVUb1N0cmluZyA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIHZhciB0b1N0ciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIGlmICh2YWwgPCAxMClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIwXCIgKyB2YWwudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiB2YWwudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydERhdGVUb1N0cmluZyhkYXRlKSArIFwiIFwiICsgdG9TdHIoZGF0ZS5nZXRIb3VycygpKSArIFwiOlwiICsgdG9TdHIoZGF0ZS5nZXRNaW51dGVzKCkpO1xuICAgIH07XG4gICAgSGVscGVycy5jb252ZXJ0VmFsVG9RdWVzdGlvblZhbCA9IGZ1bmN0aW9uICh2YWwsIGlucHV0VHlwZSkge1xuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgaWYgKGlucHV0VHlwZSA9PT0gXCJkYXRldGltZS1sb2NhbFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBIZWxwZXJzLmNvbnZlcnREYXRlVGltZVRvU3RyaW5nKHZhbCk7XG4gICAgICAgICAgICByZXR1cm4gSGVscGVycy5jb252ZXJ0RGF0ZVRvU3RyaW5nKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuICAgIEhlbHBlcnMuY29tcGFyZVZlcmlvbnMgPSBmdW5jdGlvbiAodmVyMSwgdmVyMikge1xuICAgICAgICBpZiAoIXZlcjEgJiYgIXZlcjIpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgdmFyIHZlcjFBciA9IHZlcjEuc3BsaXQoXCIuXCIpO1xuICAgICAgICB2YXIgdmVyMkFyID0gdmVyMi5zcGxpdChcIi5cIik7XG4gICAgICAgIHZhciBsZW4xID0gdmVyMUFyLmxlbmd0aDtcbiAgICAgICAgdmFyIGxlbjIgPSB2ZXIyQXIubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjEgJiYgaSA8IGxlbjI7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN0cjEgPSB2ZXIxQXJbaV07XG4gICAgICAgICAgICB2YXIgc3RyMiA9IHZlcjJBcltpXTtcbiAgICAgICAgICAgIGlmIChzdHIxLmxlbmd0aCA9PT0gc3RyMi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyMSAhPT0gc3RyMikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyMSA8IHN0cjIgPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cjEubGVuZ3RoIDwgc3RyMi5sZW5ndGggPyAtMSA6IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxlbjEgPT09IGxlbjIgPyAwIDogKGxlbjEgPCBsZW4yID8gLTEgOiAxKTtcbiAgICB9O1xuICAgIHJldHVybiBIZWxwZXJzO1xufSgpKTtcblxuaWYgKCFTdHJpbmcucHJvdG90eXBlW1wiZm9ybWF0XCJdKSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZVtcImZvcm1hdFwiXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPSBcInVuZGVmaW5lZFwiID8gYXJnc1tudW1iZXJdIDogbWF0Y2g7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvanNvbm9iamVjdC50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2pzb25vYmplY3QudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBwcm9wZXJ0eSwgcHJvcGVydHlBcnJheSwgSnNvbk9iamVjdFByb3BlcnR5LCBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbiwgSnNvbk1ldGFkYXRhQ2xhc3MsIEpzb25NZXRhZGF0YSwgSnNvbkVycm9yLCBKc29uVW5rbm93blByb3BlcnR5RXJyb3IsIEpzb25NaXNzaW5nVHlwZUVycm9yQmFzZSwgSnNvbk1pc3NpbmdUeXBlRXJyb3IsIEpzb25JbmNvcnJlY3RUeXBlRXJyb3IsIEpzb25SZXF1aXJlZFByb3BlcnR5RXJyb3IsIEpzb25SZXF1aXJlZEFycmF5UHJvcGVydHlFcnJvciwgSnNvbkluY29ycmVjdFByb3BlcnR5VmFsdWVFcnJvciwgSnNvbk9iamVjdCwgU2VyaWFsaXplciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJwcm9wZXJ0eVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHByb3BlcnR5OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJwcm9wZXJ0eUFycmF5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcHJvcGVydHlBcnJheTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiSnNvbk9iamVjdFByb3BlcnR5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSnNvbk9iamVjdFByb3BlcnR5OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJKc29uTWV0YWRhdGFDbGFzc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEpzb25NZXRhZGF0YUNsYXNzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJKc29uTWV0YWRhdGFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBKc29uTWV0YWRhdGE7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkpzb25FcnJvclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEpzb25FcnJvcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiSnNvblVua25vd25Qcm9wZXJ0eUVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSnNvblVua25vd25Qcm9wZXJ0eUVycm9yOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJKc29uTWlzc2luZ1R5cGVFcnJvckJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBKc29uTWlzc2luZ1R5cGVFcnJvckJhc2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkpzb25NaXNzaW5nVHlwZUVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSnNvbk1pc3NpbmdUeXBlRXJyb3I7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkpzb25JbmNvcnJlY3RUeXBlRXJyb3JcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBKc29uSW5jb3JyZWN0VHlwZUVycm9yOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJKc29uUmVxdWlyZWRQcm9wZXJ0eUVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSnNvblJlcXVpcmVkUHJvcGVydHlFcnJvcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiSnNvblJlcXVpcmVkQXJyYXlQcm9wZXJ0eUVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSnNvblJlcXVpcmVkQXJyYXlQcm9wZXJ0eUVycm9yOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJKc29uSW5jb3JyZWN0UHJvcGVydHlWYWx1ZUVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSnNvbkluY29ycmVjdFByb3BlcnR5VmFsdWVFcnJvcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiSnNvbk9iamVjdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEpzb25PYmplY3Q7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlNlcmlhbGl6ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTZXJpYWxpemVyOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3VydmV5U3RyaW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zdXJ2ZXlTdHJpbmdzICovIFwiLi9zcmMvc3VydmV5U3RyaW5ncy50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9iYXNlICovIFwiLi9zcmMvYmFzZS50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9oZWxwZXJzICovIFwiLi9zcmMvaGVscGVycy50c1wiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG5cblxuXG5mdW5jdGlvbiBlbnN1cmVMb2NTdHJpbmcodGFyZ2V0LCBvcHRpb25zLCBrZXkpIHtcbiAgICB2YXIgbG9jU3RyaW5nID0gdGFyZ2V0LmdldExvY2FsaXphYmxlU3RyaW5nKGtleSk7XG4gICAgaWYgKCFsb2NTdHJpbmcpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRTdHIgPSB2b2lkIDA7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGl6YWJsZSA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmxvY2FsaXphYmxlLmRlZmF1bHRTdHIpIHtcbiAgICAgICAgICAgIGRlZmF1bHRTdHIgPSBvcHRpb25zLmxvY2FsaXphYmxlLmRlZmF1bHRTdHI7XG4gICAgICAgIH1cbiAgICAgICAgbG9jU3RyaW5nID0gdGFyZ2V0LmNyZWF0ZUxvY2FsaXphYmxlU3RyaW5nKGtleSwgdGFyZ2V0LCB0cnVlLCBkZWZhdWx0U3RyKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxvY2FsaXphYmxlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5sb2NhbGl6YWJsZS5vbkdldFRleHRDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBsb2NTdHJpbmcub25HZXRUZXh0Q2FsbGJhY2sgPSBvcHRpb25zLmxvY2FsaXphYmxlLm9uR2V0VGV4dENhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TG9jU3RyaW5nVmFsdWUodGFyZ2V0LCBvcHRpb25zLCBrZXkpIHtcbiAgICBlbnN1cmVMb2NTdHJpbmcodGFyZ2V0LCBvcHRpb25zLCBrZXkpO1xuICAgIHZhciByZXMgPSB0YXJnZXQuZ2V0TG9jYWxpemFibGVTdHJpbmdUZXh0KGtleSk7XG4gICAgaWYgKCEhcmVzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGl6YWJsZSA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmxvY2FsaXphYmxlLmRlZmF1bHRTdHIpIHtcbiAgICAgICAgdmFyIGxvYyA9ICEhdGFyZ2V0LmdldExvY2FsZSA/IHRhcmdldC5nZXRMb2NhbGUoKSA6IFwiXCI7XG4gICAgICAgIHJldHVybiBfc3VydmV5U3RyaW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wic3VydmV5TG9jYWxpemF0aW9uXCJdLmdldFN0cmluZyhvcHRpb25zLmxvY2FsaXphYmxlLmRlZmF1bHRTdHIsIGxvYyk7XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gcHJvcGVydHkob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXNcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7XG4gICAgICAgIHZhciBwcm9jZXNzQ29tcHV0ZWRVcGRhdGVyID0gZnVuY3Rpb24gKG9iaiwgdmFsKSB7XG4gICAgICAgICAgICBpZiAoISF2YWwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwudHlwZSA9PT0gX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkNvbXB1dGVkVXBkYXRlclwiXS5Db21wdXRlZFVwZGF0ZXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkJhc2VcIl0uc3RhcnRDb2xsZWN0RGVwZW5kZW5jaWVzKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9ialtrZXldID0gdmFsLnVwZGF0ZXIoKTsgfSwgb2JqLCBrZXkpO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWwudXBkYXRlcigpO1xuICAgICAgICAgICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSBfYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiQmFzZVwiXS5maW5pc2hDb2xsZWN0RGVwZW5kZW5jaWVzKCk7XG4gICAgICAgICAgICAgICAgdmFsLnNldERlcGVuZGVuY2llcyhkZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgICAgIGlmIChvYmouZGVwZW5kZW5jaWVzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmRlcGVuZGVuY2llc1trZXldLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2JqLmRlcGVuZGVuY2llc1trZXldID0gdmFsO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMubG9jYWxpemFibGUpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBzZXJpYWxpemF0aW9uUHJvcGVydHkgPSBTZXJpYWxpemVyLmdldFByb3BlcnR5KHRhcmdldC5nZXRUeXBlKCksIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmKCEhc2VyaWFsaXphdGlvblByb3BlcnR5ICYmIG9wdGlvbnMuZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICBDb25zb2xlV2FybmluZ3MuZXJyb3IoXCJyZW1vdmUgZGVmYXVsdFZhbHVlIGZyb20gQHByb3BlcnR5IGZvciBjbGFzcyBcIiArIHRhcmdldC5nZXRUeXBlKCkgKyBcIiBwcm9wZXJ0eSBuYW1lIGlzIFwiICsga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIW9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5nZXREZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWwgPSBvcHRpb25zLmdldERlZmF1bHRWYWx1ZSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbCA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWUoa2V5LCBkZWZhdWx0VmFsKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBwcm9jZXNzQ29tcHV0ZWRVcGRhdGVyKHRoaXMsIHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShrZXksIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhb3B0aW9ucyAmJiBvcHRpb25zLm9uU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm9uU2V0KG5ld1ZhbHVlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TG9jU3RyaW5nVmFsdWUodGhpcywgb3B0aW9ucywga2V5KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBlbnN1cmVMb2NTdHJpbmcodGhpcywgb3B0aW9ucywga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gcHJvY2Vzc0NvbXB1dGVkVXBkYXRlcih0aGlzLCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldExvY2FsaXphYmxlU3RyaW5nVGV4dChrZXksIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhb3B0aW9ucyAmJiBvcHRpb25zLm9uU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm9uU2V0KG5ld1ZhbHVlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHR5cGVvZiBvcHRpb25zLmxvY2FsaXphYmxlID09PSBcIm9iamVjdFwiICYmICEhb3B0aW9ucy5sb2NhbGl6YWJsZS5uYW1lID9cbiAgICAgICAgICAgICAgICBvcHRpb25zLmxvY2FsaXphYmxlLm5hbWUgOiBcImxvY1wiICsga2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnNsaWNlKDEpLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuc3VyZUxvY1N0cmluZyh0aGlzLCBvcHRpb25zLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRMb2NhbGl6YWJsZVN0cmluZyhrZXkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBlbnN1cmVBcnJheSh0YXJnZXQsIG9wdGlvbnMsIGtleSkge1xuICAgIHRhcmdldC5lbnN1cmVBcnJheShrZXksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICB2YXIgaGFuZGxlciA9ICEhb3B0aW9ucyA/IG9wdGlvbnMub25QdXNoIDogbnVsbDtcbiAgICAgICAgaGFuZGxlciAmJiBoYW5kbGVyKGl0ZW0sIGluZGV4LCB0YXJnZXQpO1xuICAgIH0sIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICB2YXIgaGFuZGxlciA9ICEhb3B0aW9ucyA/IG9wdGlvbnMub25SZW1vdmUgOiBudWxsO1xuICAgICAgICBoYW5kbGVyICYmIGhhbmRsZXIoaXRlbSwgaW5kZXgsIHRhcmdldCk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBwcm9wZXJ0eUFycmF5KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZW5zdXJlQXJyYXkodGhpcywgb3B0aW9ucywga2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKGtleSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgZW5zdXJlQXJyYXkodGhpcywgb3B0aW9ucywga2V5KTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gYXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFycikge1xuICAgICAgICAgICAgICAgICAgICBhcnIuc3BsaWNlLmFwcGx5KGFyciwgX19zcHJlYWRBcnJheShbMCwgYXJyLmxlbmd0aF0sICh2YWwgfHwgW10pKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWUoa2V5LCB2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoISFvcHRpb25zICYmIG9wdGlvbnMub25TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vblNldCh2YWwsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vKipcbiAqIENvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IGEgcHJvcGVydHkgb2YgYSBzdXJ2ZXkgZWxlbWVudCAocGFnZSwgcGFuZWwsIHF1ZXN0aW9ucywgYW5kIGV0YykuXG4gKiBAc2VlIGFkZFByb3BlcnR5XG4gKiBAc2VlIHJlbW92ZVByb3BlcnR5XG4gKiBAc2VlIFtBZGQgUHJvcGVydGllc10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9Eb2N1bWVudGF0aW9uL1N1cnZleS1DcmVhdG9yI2FkZHByb3BlcnRpZXMpXG4gKiBAc2VlIFtSZW1vdmUgUHJvcGVydGllc10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9Eb2N1bWVudGF0aW9uL1N1cnZleS1DcmVhdG9yI3JlbW92ZXByb3BlcnRpZXMpXG4gKi9cbnZhciBKc29uT2JqZWN0UHJvcGVydHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSnNvbk9iamVjdFByb3BlcnR5KGNsYXNzSW5mbywgbmFtZSwgaXNSZXF1aXJlZCkge1xuICAgICAgICBpZiAoaXNSZXF1aXJlZCA9PT0gdm9pZCAwKSB7IGlzUmVxdWlyZWQgPSBmYWxzZTsgfVxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmlzUmVxdWlyZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzVW5pcXVlVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1NlcmlhbGl6YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNMaWdodFNlcmlhbGl6YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNDdXN0b20gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0R5bmFtaWNDaG9pY2VzID0gZmFsc2U7IC8vVE9ETyBvYnNvbGV0ZSwgdXNlIGRlcGVuZHNPbiBhdHRyaWJ1dGVcbiAgICAgICAgdGhpcy5pc0JpbmRhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBcIlwiO1xuICAgICAgICB0aGlzLmNhdGVnb3J5SW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy52aXNpYmxlSW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy5tYXhMZW5ndGggPSAtMTtcbiAgICAgICAgdGhpcy5pc0FycmF5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xhc3NJbmZvVmFsdWUgPSBjbGFzc0luZm87XG4gICAgICAgIHRoaXMuaXNSZXF1aXJlZFZhbHVlID0gaXNSZXF1aXJlZDtcbiAgICAgICAgdGhpcy5pZFZhbHVlID0gSnNvbk9iamVjdFByb3BlcnR5LkluZGV4Kys7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLCBcImlkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZFZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUsIFwiY2xhc3NJbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGFzc0luZm9WYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLCBcInR5cGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGVWYWx1ZSA/IHRoaXMudHlwZVZhbHVlIDogXCJzdHJpbmdcIjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJpdGVtdmFsdWVzXCIpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBcIml0ZW12YWx1ZVtdXCI7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IFwidGV4dGl0ZW1zXCIpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBcInRleHRpdGVtW11cIjtcbiAgICAgICAgICAgIHRoaXMudHlwZVZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlVmFsdWUuaW5kZXhPZihcIltdXCIpID09PSB0aGlzLnR5cGVWYWx1ZS5sZW5ndGggLSAyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FycmF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IHRoaXMudHlwZVZhbHVlLnN1YnN0cmluZygwLCB0aGlzLnR5cGVWYWx1ZS5sZW5ndGggLSAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLCBcImlzUmVxdWlyZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzUmVxdWlyZWRWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBpZiAodmFsICE9PSB0aGlzLmlzUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUmVxdWlyZWRWYWx1ZSA9IHZhbDtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmNsYXNzSW5mbykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzSW5mby5yZXNldEFsbFByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZSwgXCJpc1VuaXF1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNVbmlxdWVWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmlzVW5pcXVlVmFsdWUgPSB2YWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZSwgXCJ1bmlxdWVQcm9wZXJ0eU5hbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVuaXF1ZVByb3BlcnR5VmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy51bmlxdWVQcm9wZXJ0eVZhbHVlID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUsIFwiaGFzVG9Vc2VHZXRWYWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25HZXRWYWx1ZSB8fCB0aGlzLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0RGVmYXVsdFZhbHVlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gISF0aGlzLmRlZmF1bHRWYWx1ZUZ1bmMgPyB0aGlzLmRlZmF1bHRWYWx1ZUZ1bmMob2JqKSA6IHRoaXMuZGVmYXVsdFZhbHVlVmFsdWU7XG4gICAgICAgIGlmICghIUpzb25PYmplY3RQcm9wZXJ0eS5nZXRJdGVtVmFsdWVzRGVmYXVsdFZhbHVlICYmXG4gICAgICAgICAgICBTZXJpYWxpemVyLmlzRGVzY2VuZGFudE9mKHRoaXMuY2xhc3NOYW1lLCBcIml0ZW12YWx1ZVwiKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gSnNvbk9iamVjdFByb3BlcnR5LmdldEl0ZW1WYWx1ZXNEZWZhdWx0VmFsdWUodGhpcy5kZWZhdWx0VmFsdWVWYWx1ZSB8fCBbXSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZSwgXCJkZWZhdWx0VmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWVWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZS5pc0RlZmF1bHRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0RlZmF1bHRWYWx1ZUJ5T2JqKHVuZGVmaW5lZCwgdmFsdWUpO1xuICAgIH07XG4gICAgSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZS5pc0RlZmF1bHRWYWx1ZUJ5T2JqID0gZnVuY3Rpb24gKG9iaiwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGRWYWx1ZSA9IHRoaXMuZ2V0RGVmYXVsdFZhbHVlKG9iaik7XG4gICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KGRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiSGVscGVyc1wiXS5pc1R3b1ZhbHVlRXF1YWxzKHZhbHVlLCBkVmFsdWUsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNMb2NhbGl6YWJsZSlcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gKCh2YWx1ZSA9PT0gZmFsc2UgJiYgKHRoaXMudHlwZSA9PSBcImJvb2xlYW5cIiB8fCB0aGlzLnR5cGUgPT0gXCJzd2l0Y2hcIikpIHx8XG4gICAgICAgICAgICB2YWx1ZSA9PT0gXCJcIiB8fCBfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiSGVscGVyc1wiXS5pc1ZhbHVlRW1wdHkodmFsdWUpKTtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0U2VyaWFsaXphYmxlVmFsdWUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICghIXRoaXMub25TZXJpYWxpemVWYWx1ZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uU2VyaWFsaXplVmFsdWUob2JqKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUob2JqKTtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICh0aGlzLm9uR2V0VmFsdWUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbkdldFZhbHVlKG9iaik7XG4gICAgICAgIGlmICh0aGlzLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eSAmJiAhIW9ialt0aGlzLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eV0pXG4gICAgICAgICAgICByZXR1cm4gb2JqW3RoaXMuc2VyaWFsaXphdGlvblByb3BlcnR5XS5nZXRKc29uKCk7XG4gICAgICAgIHJldHVybiBvYmpbdGhpcy5uYW1lXTtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKHRoaXMuaXNMb2NhbGl6YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhb2JqW3RoaXMuc2VyaWFsaXphdGlvblByb3BlcnR5XVxuICAgICAgICAgICAgICAgID8gb2JqW3RoaXMuc2VyaWFsaXphdGlvblByb3BlcnR5XS50ZXh0XG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKG9iaik7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZSwgXCJoYXNUb1VzZVNldFZhbHVlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblNldFZhbHVlIHx8IHRoaXMuc2VyaWFsaXphdGlvblByb3BlcnR5O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZS5zZXR0aW5nVmFsdWUgPSBmdW5jdGlvbiAob2JqLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMub25TZXR0aW5nVmFsdWUgfHwgb2JqLmlzTG9hZGluZ0Zyb21Kc29uKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcy5vblNldHRpbmdWYWx1ZShvYmosIHZhbHVlKTtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAob2JqLCB2YWx1ZSwganNvbkNvbnYpIHtcbiAgICAgICAgaWYgKHRoaXMub25TZXRWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vblNldFZhbHVlKG9iaiwgdmFsdWUsIGpzb25Db252KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eSAmJiAhIW9ialt0aGlzLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgb2JqW3RoaXMuc2VyaWFsaXphdGlvblByb3BlcnR5XS5zZXRKc29uKHZhbHVlKTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09IFwiYm9vbGVhblwiIHx8IHRoaXMudHlwZSA9PSBcInN3aXRjaFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IFwidHJ1ZVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9ialt0aGlzLm5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUudmFsaWRhdGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgY2hvaWNlcyA9IHRoaXMuY2hvaWNlcztcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNob2ljZXMpIHx8IGNob2ljZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBjaG9pY2VzLmluZGV4T2YodmFsdWUpID4gLTE7XG4gICAgfTtcbiAgICBKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLmdldE9ialR5cGUgPSBmdW5jdGlvbiAob2JqVHlwZSkge1xuICAgICAgICBpZiAoIXRoaXMuY2xhc3NOYW1lUGFydClcbiAgICAgICAgICAgIHJldHVybiBvYmpUeXBlO1xuICAgICAgICByZXR1cm4gb2JqVHlwZS5yZXBsYWNlKHRoaXMuY2xhc3NOYW1lUGFydCwgXCJcIik7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZSwgXCJjaG9pY2VzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlcHJpY2F0ZWQsIHBsZWFzZSB1c2UgZ2V0Q2hvaWNlc1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDaG9pY2VzKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUsIFwiaGFzQ2hvaWNlc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5jaG9pY2VzVmFsdWUgfHwgISF0aGlzLmNob2ljZXNmdW5jO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZS5nZXRDaG9pY2VzID0gZnVuY3Rpb24gKG9iaiwgY2hvaWNlc0NhbGxiYWNrKSB7XG4gICAgICAgIGlmIChjaG9pY2VzQ2FsbGJhY2sgPT09IHZvaWQgMCkgeyBjaG9pY2VzQ2FsbGJhY2sgPSBudWxsOyB9XG4gICAgICAgIGlmICh0aGlzLmNob2ljZXNWYWx1ZSAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hvaWNlc1ZhbHVlO1xuICAgICAgICBpZiAodGhpcy5jaG9pY2VzZnVuYyAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hvaWNlc2Z1bmMob2JqLCBjaG9pY2VzQ2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuc2V0Q2hvaWNlcyA9IGZ1bmN0aW9uICh2YWx1ZSwgdmFsdWVGdW5jKSB7XG4gICAgICAgIGlmICh2YWx1ZUZ1bmMgPT09IHZvaWQgMCkgeyB2YWx1ZUZ1bmMgPSBudWxsOyB9XG4gICAgICAgIHRoaXMuY2hvaWNlc1ZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY2hvaWNlc2Z1bmMgPSB2YWx1ZUZ1bmM7XG4gICAgfTtcbiAgICBKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLmdldEJhc2VWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJhc2VWYWx1ZSlcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuYmFzZVZhbHVlID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhc2VWYWx1ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlVmFsdWU7XG4gICAgfTtcbiAgICBKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLnNldEJhc2VWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgdGhpcy5iYXNlVmFsdWUgPSB2YWw7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZSwgXCJyZWFkT25seVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZE9ubHlWYWx1ZSAhPSBudWxsID8gdGhpcy5yZWFkT25seVZhbHVlIDogZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5yZWFkT25seVZhbHVlID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZS5pc0VuYWJsZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZE9ubHkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghb2JqIHx8ICF0aGlzLmVuYWJsZUlmKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZUlmKHRoaXMuZ2V0T3JpZ2luYWxPYmoob2JqKSk7XG4gICAgfTtcbiAgICBKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uIChsYXlvdXQsIG9iaikge1xuICAgICAgICBpZiAob2JqID09PSB2b2lkIDApIHsgb2JqID0gbnVsbDsgfVxuICAgICAgICB2YXIgaXNMYXlvdXQgPSAhdGhpcy5sYXlvdXQgfHwgdGhpcy5sYXlvdXQgPT0gbGF5b3V0O1xuICAgICAgICBpZiAoIXRoaXMudmlzaWJsZSB8fCAhaXNMYXlvdXQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghIXRoaXMudmlzaWJsZUlmICYmICEhb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aXNpYmxlSWYodGhpcy5nZXRPcmlnaW5hbE9iaihvYmopKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0T3JpZ2luYWxPYmogPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmIChvYmogJiYgb2JqLmdldE9yaWdpbmFsT2JqKSB7XG4gICAgICAgICAgICB2YXIgb3JqT2JqID0gb2JqLmdldE9yaWdpbmFsT2JqKCk7XG4gICAgICAgICAgICBpZiAob3JqT2JqICYmIFNlcmlhbGl6ZXIuZmluZFByb3BlcnR5KG9yak9iai5nZXRUeXBlKCksIHRoaXMubmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JqT2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aXNpYmxlVmFsdWUgIT0gbnVsbCA/IHRoaXMudmlzaWJsZVZhbHVlIDogdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVWYWx1ZSA9IHZhbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuaXNBdmFpbGFibGVJblZlcnNpb24gPSBmdW5jdGlvbiAodmVyKSB7XG4gICAgICAgIGlmICghIXRoaXMuYWx0ZXJuYXRpdmVOYW1lIHx8IHRoaXMub2xkTmFtZSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F2YWlsYWJsZUluVmVyc2lvbkNvcmUodmVyKTtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0U2VyaWFsaXplZE5hbWUgPSBmdW5jdGlvbiAodmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5hbHRlcm5hdGl2ZU5hbWUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F2YWlsYWJsZUluVmVyc2lvbkNvcmUodmVyKSA/IHRoaXMubmFtZSA6IHRoaXMuYWx0ZXJuYXRpdmVOYW1lIHx8IHRoaXMub2xkTmFtZTtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0U2VyaWFsaXplZFByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwgdmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5vbGROYW1lIHx8IHRoaXMuaXNBdmFpbGFibGVJblZlcnNpb25Db3JlKHZlcikpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKCFvYmogfHwgIW9iai5nZXRUeXBlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemVyLmZpbmRQcm9wZXJ0eShvYmouZ2V0VHlwZSgpLCB0aGlzLm9sZE5hbWUpO1xuICAgIH07XG4gICAgSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZS5pc0F2YWlsYWJsZUluVmVyc2lvbkNvcmUgPSBmdW5jdGlvbiAodmVyKSB7XG4gICAgICAgIGlmICghdmVyIHx8ICF0aGlzLnZlcnNpb24pXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJIZWxwZXJzXCJdLmNvbXBhcmVWZXJpb25zKHRoaXMudmVyc2lvbiwgdmVyKSA8PSAwO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUsIFwiaXNMb2NhbGl6YWJsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNMb2NhbGl6YWJsZVZhbHVlICE9IG51bGwgPyB0aGlzLmlzTG9jYWxpemFibGVWYWx1ZSA6IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuaXNMb2NhbGl6YWJsZVZhbHVlID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUsIFwiZGF0YUxpc3RcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRoaXMuZGF0YUxpc3RWYWx1ZSkgPyB0aGlzLmRhdGFMaXN0VmFsdWUgOiBbXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFMaXN0VmFsdWUgPSB2YWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLm1lcmdlV2l0aCA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgIHZhciB2YWx1ZXNOYW1lcyA9IEpzb25PYmplY3RQcm9wZXJ0eS5tZXJnYWJsZVZhbHVlcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXNOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tZXJnZVZhbHVlKHByb3AsIHZhbHVlc05hbWVzW2ldKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSnNvbk9iamVjdFByb3BlcnR5LnByb3RvdHlwZS5hZGREZXBlbmRlZFByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRlcGVuZGVkUHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5kZXBlbmRlZFByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZXBlbmRlZFByb3BlcnRpZXMuaW5kZXhPZihuYW1lKSA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVwZW5kZWRQcm9wZXJ0aWVzLnB1c2gobmFtZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0RGVwZW5kZWRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmRlcGVuZGVkUHJvcGVydGllcyA/IHRoaXMuZGVwZW5kZWRQcm9wZXJ0aWVzIDogW107XG4gICAgfTtcbiAgICBKc29uT2JqZWN0UHJvcGVydHkucHJvdG90eXBlLnNjaGVtYVR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSA9PT0gXCJjaG9pY2VzQnlVcmxcIilcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZTtcbiAgICAgICAgaWYgKCEhdGhpcy5jbGFzc05hbWUpXG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgICAgICBpZiAoISF0aGlzLmJhc2VDbGFzc05hbWUpXG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgICAgICBpZiAodGhpcy50eXBlID09IFwic3dpdGNoXCIpXG4gICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJib29sZWFuXCIgfHwgdGhpcy50eXBlID09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlO1xuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUuc2NoZW1hUmVmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISF0aGlzLmNsYXNzTmFtZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUubWVyZ2VWYWx1ZSA9IGZ1bmN0aW9uIChwcm9wLCB2YWx1ZU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXNbdmFsdWVOYW1lXSA9PSBudWxsICYmIHByb3BbdmFsdWVOYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzW3ZhbHVlTmFtZV0gPSBwcm9wW3ZhbHVlTmFtZV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25PYmplY3RQcm9wZXJ0eS5JbmRleCA9IDE7XG4gICAgSnNvbk9iamVjdFByb3BlcnR5Lm1lcmdhYmxlVmFsdWVzID0gW1xuICAgICAgICBcInR5cGVWYWx1ZVwiLFxuICAgICAgICBcImNob2ljZXNWYWx1ZVwiLFxuICAgICAgICBcImJhc2VWYWx1ZVwiLFxuICAgICAgICBcInJlYWRPbmx5VmFsdWVcIixcbiAgICAgICAgXCJ2aXNpYmxlVmFsdWVcIixcbiAgICAgICAgXCJpc1NlcmlhbGl6YWJsZVwiLFxuICAgICAgICBcImlzTGlnaHRTZXJpYWxpemFibGVcIixcbiAgICAgICAgXCJpc0N1c3RvbVwiLFxuICAgICAgICBcImlzQmluZGFibGVcIixcbiAgICAgICAgXCJpc1VuaXF1ZVwiLFxuICAgICAgICBcInVuaXF1ZVByb3BlcnR5TmFtZVwiLFxuICAgICAgICBcImlzRHluYW1pY0Nob2ljZXNcIixcbiAgICAgICAgXCJpc0xvY2FsaXphYmxlVmFsdWVcIixcbiAgICAgICAgXCJjbGFzc05hbWVcIixcbiAgICAgICAgXCJhbHRlcm5hdGl2ZU5hbWVcIixcbiAgICAgICAgXCJvbGROYW1lXCIsXG4gICAgICAgIFwibGF5b3V0XCIsXG4gICAgICAgIFwidmVyc2lvblwiLFxuICAgICAgICBcImNsYXNzTmFtZVBhcnRcIixcbiAgICAgICAgXCJiYXNlQ2xhc3NOYW1lXCIsXG4gICAgICAgIFwiZGVmYXVsdFZhbHVlXCIsXG4gICAgICAgIFwiZGVmYXVsdFZhbHVlRnVuY1wiLFxuICAgICAgICBcInNlcmlhbGl6YXRpb25Qcm9wZXJ0eVwiLFxuICAgICAgICBcIm9uR2V0VmFsdWVcIixcbiAgICAgICAgXCJvblNldFZhbHVlXCIsXG4gICAgICAgIFwib25TZXR0aW5nVmFsdWVcIixcbiAgICAgICAgXCJkaXNwbGF5TmFtZVwiLFxuICAgICAgICBcImNhdGVnb3J5XCIsXG4gICAgICAgIFwiY2F0ZWdvcnlJbmRleFwiLFxuICAgICAgICBcInZpc2libGVJbmRleFwiLFxuICAgICAgICBcIm5leHRUb1Byb3BlcnR5XCIsXG4gICAgICAgIFwib3ZlcnJpZGluZ1Byb3BlcnR5XCIsXG4gICAgICAgIFwic2hvd01vZGVcIixcbiAgICAgICAgXCJkZXBlbmRlZFByb3BlcnRpZXNcIixcbiAgICAgICAgXCJ2aXNpYmxlSWZcIixcbiAgICAgICAgXCJlbmFibGVJZlwiLFxuICAgICAgICBcIm9uRXhlY3V0ZUV4cHJlc3Npb25cIixcbiAgICAgICAgXCJvblByb3BlcnR5RWRpdG9yVXBkYXRlXCIsXG4gICAgICAgIFwibWF4TGVuZ3RoXCIsXG4gICAgICAgIFwibWF4VmFsdWVcIixcbiAgICAgICAgXCJtaW5WYWx1ZVwiLFxuICAgICAgICBcImRhdGFMaXN0VmFsdWVcIixcbiAgICBdO1xuICAgIHJldHVybiBKc29uT2JqZWN0UHJvcGVydHk7XG59KCkpO1xuXG52YXIgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24oKSB7XG4gICAgfVxuICAgIEN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uLmFkZFByb3BlcnR5ID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgcHJvcGVydHkpIHtcbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBwcm9wcyA9IEN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uLnByb3BlcnRpZXM7XG4gICAgICAgIGlmICghcHJvcHNbY2xhc3NOYW1lXSkge1xuICAgICAgICAgICAgcHJvcHNbY2xhc3NOYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHByb3BzW2NsYXNzTmFtZV0ucHVzaChwcm9wZXJ0eSk7XG4gICAgfTtcbiAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5yZW1vdmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChjbGFzc05hbWUsIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIHByb3BzID0gQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24ucHJvcGVydGllcztcbiAgICAgICAgaWYgKCFwcm9wc1tjbGFzc05hbWVdKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IHByb3BzW2NsYXNzTmFtZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNbaV0ubmFtZSA9PSBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wc1tjbGFzc05hbWVdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24ucmVtb3ZlQWxsUHJvcGVydGllcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGRlbGV0ZSBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5wcm9wZXJ0aWVzW2NsYXNzTmFtZV07XG4gICAgfTtcbiAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5hZGRDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUsIHBhcmVudENsYXNzTmFtZSkge1xuICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHBhcmVudENsYXNzTmFtZSkge1xuICAgICAgICAgICAgcGFyZW50Q2xhc3NOYW1lID0gcGFyZW50Q2xhc3NOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24ucGFyZW50Q2xhc3Nlc1tjbGFzc05hbWVdID0gcGFyZW50Q2xhc3NOYW1lO1xuICAgIH07XG4gICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgdmFyIHByb3BzID0gQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24ucHJvcGVydGllcztcbiAgICAgICAgd2hpbGUgKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBwcm9wc1tjbGFzc05hbWVdO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2gocHJvcGVydGllc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xhc3NOYW1lID0gQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24ucGFyZW50Q2xhc3Nlc1tjbGFzc05hbWVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5jcmVhdGVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBpZiAoIW9iaiB8fCAhb2JqLmdldFR5cGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIEN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uLmNyZWF0ZVByb3BlcnRpZXNDb3JlKG9iaiwgb2JqLmdldFR5cGUoKSk7XG4gICAgfTtcbiAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5jcmVhdGVQcm9wZXJ0aWVzQ29yZSA9IGZ1bmN0aW9uIChvYmosIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgcHJvcHMgPSBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5wcm9wZXJ0aWVzO1xuICAgICAgICBpZiAocHJvcHNbY2xhc3NOYW1lXSkge1xuICAgICAgICAgICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uY3JlYXRlUHJvcGVydGllc0luT2JqKG9iaiwgcHJvcHNbY2xhc3NOYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmVudENsYXNzID0gQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24ucGFyZW50Q2xhc3Nlc1tjbGFzc05hbWVdO1xuICAgICAgICBpZiAocGFyZW50Q2xhc3MpIHtcbiAgICAgICAgICAgIEN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uLmNyZWF0ZVByb3BlcnRpZXNDb3JlKG9iaiwgcGFyZW50Q2xhc3MpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5jcmVhdGVQcm9wZXJ0aWVzSW5PYmogPSBmdW5jdGlvbiAob2JqLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uY3JlYXRlUHJvcGVydHlJbk9iaihvYmosIHByb3BlcnRpZXNbaV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5jcmVhdGVQcm9wZXJ0eUluT2JqID0gZnVuY3Rpb24gKG9iaiwgcHJvcCkge1xuICAgICAgICBpZiAoQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uY2hlY2tJc1Byb3BlcnR5RXhpc3RzKG9iaiwgcHJvcC5uYW1lKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCEhcHJvcC5zZXJpYWxpemF0aW9uUHJvcGVydHkgJiYgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uY2hlY2tJc1Byb3BlcnR5RXhpc3RzKG9iaiwgcHJvcC5zZXJpYWxpemF0aW9uUHJvcGVydHkpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAocHJvcC5pc0xvY2FsaXphYmxlICYmXG4gICAgICAgICAgICBwcm9wLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eSAmJlxuICAgICAgICAgICAgb2JqLmNyZWF0ZUN1c3RvbUxvY2FsaXphYmxlT2JqKSB7XG4gICAgICAgICAgICB2YXIgbG9jU3RyID0gb2JqLmNyZWF0ZUN1c3RvbUxvY2FsaXphYmxlT2JqKHByb3AubmFtZSk7XG4gICAgICAgICAgICBsb2NTdHIuZGVmYXVsdFZhbHVlID0gcHJvcC5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB2YXIgbG9jRGVzYyA9IHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRMb2NhbGl6YWJsZVN0cmluZyhwcm9wLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcC5zZXJpYWxpemF0aW9uUHJvcGVydHksIGxvY0Rlc2MpO1xuICAgICAgICAgICAgdmFyIGRlc2MgPSB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0TG9jYWxpemFibGVTdHJpbmdUZXh0KHByb3AubmFtZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRMb2NhbGl6YWJsZVN0cmluZ1RleHQocHJvcC5uYW1lLCB2KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AubmFtZSwgZGVzYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gcHJvcC5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB2YXIgaXNBcnJheVByb3AgPSBwcm9wLmlzQXJyYXkgfHwgcHJvcC50eXBlID09PSBcIm11bHRpcGxldmFsdWVzXCI7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9iai5jcmVhdGVOZXdBcnJheSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKFNlcmlhbGl6ZXIuaXNEZXNjZW5kYW50T2YocHJvcC5jbGFzc05hbWUsIFwiaXRlbXZhbHVlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iai5jcmVhdGVOZXdBcnJheShwcm9wLm5hbWUsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmxvY093bmVyID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5vd25lclByb3BlcnR5TmFtZSA9IHByb3AubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlzQXJyYXlQcm9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vSXQgaXMgYSBzaW1wbGUgYXJyYXkgcHJvcGVydHlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXlQcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouY3JlYXRlTmV3QXJyYXkocHJvcC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheVByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNldFByb3BlcnR5VmFsdWUocHJvcC5uYW1lLCBkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhb2JqLmdldFByb3BlcnR5VmFsdWUgJiYgISFvYmouc2V0UHJvcGVydHlWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBkZXNjID0ge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXByb3Aub25HZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wLm9uR2V0VmFsdWUob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0UHJvcGVydHlWYWx1ZShwcm9wLm5hbWUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXByb3Aub25TZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Aub25TZXRWYWx1ZShvYmosIHYsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNldFByb3BlcnR5VmFsdWUocHJvcC5uYW1lLCB2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AubmFtZSwgZGVzYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3AudHlwZSA9PT0gXCJjb25kaXRpb25cIiB8fCBwcm9wLnR5cGUgPT09IFwiZXhwcmVzc2lvblwiKSB7XG4gICAgICAgICAgICBpZiAoISFwcm9wLm9uRXhlY3V0ZUV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBvYmouYWRkRXhwcmVzc2lvblByb3BlcnR5KHByb3AubmFtZSwgcHJvcC5vbkV4ZWN1dGVFeHByZXNzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uY2hlY2tJc1Byb3BlcnR5RXhpc3RzID0gZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgICAgICByZXR1cm4gb2JqLmhhc093blByb3BlcnR5KG5hbWUpIHx8IG9ialtuYW1lXTtcbiAgICB9O1xuICAgIEN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uLnByb3BlcnRpZXMgPSB7fTtcbiAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5wYXJlbnRDbGFzc2VzID0ge307XG4gICAgcmV0dXJuIEN1c3RvbVByb3BlcnRpZXNDb2xsZWN0aW9uO1xufSgpKTtcblxudmFyIEpzb25NZXRhZGF0YUNsYXNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEpzb25NZXRhZGF0YUNsYXNzKG5hbWUsIHByb3BlcnRpZXMsIGNyZWF0b3IsIHBhcmVudE5hbWUpIHtcbiAgICAgICAgaWYgKGNyZWF0b3IgPT09IHZvaWQgMCkgeyBjcmVhdG9yID0gbnVsbDsgfVxuICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gdm9pZCAwKSB7IHBhcmVudE5hbWUgPSBudWxsOyB9XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY3JlYXRvciA9IGNyZWF0b3I7XG4gICAgICAgIHRoaXMucGFyZW50TmFtZSA9IHBhcmVudE5hbWU7XG4gICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHRoaXMuaXNDdXN0b21WYWx1ZSA9ICFjcmVhdG9yICYmIG5hbWUgIT09IFwic3VydmV5XCI7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudE5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50TmFtZSA9IHRoaXMucGFyZW50TmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uYWRkQ2xhc3MobmFtZSwgdGhpcy5wYXJlbnROYW1lKTtcbiAgICAgICAgICAgIGlmICghIWNyZWF0b3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VQYXJlbnRSZWd1bGFyQ2xhc3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnR5KHByb3BlcnRpZXNbaV0sIHRoaXMuaXNDdXN0b20pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vT2Jzb2xldGVcbiAgICBKc29uTWV0YWRhdGFDbGFzcy5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzW2ldLm5hbWUgPT0gbmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLmZpbmRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRoaXMuZmlsbEFsbFByb3BlcnRpZXMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzaFByb3BlcnRpZXNbbmFtZV07XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGFDbGFzcy5wcm90b3R5cGUuZ2V0QWxsUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5maWxsQWxsUHJvcGVydGllcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5hbGxQcm9wZXJ0aWVzO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLmdldFJlcXVpcmVkUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5yZXF1aXJlZFByb3BlcnRpZXMpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlZFByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMucmVxdWlyZWRQcm9wZXJ0aWVzID0gW107XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMuZ2V0QWxsUHJvcGVydGllcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocHJvcHNbaV0uaXNSZXF1aXJlZClcbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVpcmVkUHJvcGVydGllcy5wdXNoKHByb3BzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlZFByb3BlcnRpZXM7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGFDbGFzcy5wcm90b3R5cGUucmVzZXRBbGxQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFsbFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVxdWlyZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhc2hQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgY2hpbGRDbGFzc2VzID0gU2VyaWFsaXplci5nZXRDaGlsZHJlbkNsYXNzZXModGhpcy5uYW1lKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZENsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNoaWxkQ2xhc3Nlc1tpXS5yZXNldEFsbFByb3BlcnRpZXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEpzb25NZXRhZGF0YUNsYXNzLnByb3RvdHlwZSwgXCJpc0N1c3RvbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pc0N1c3RvbVZhbHVlOyB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLmZpbGxBbGxQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoISF0aGlzLmFsbFByb3BlcnRpZXMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuYWxsUHJvcGVydGllcyA9IFtdO1xuICAgICAgICB0aGlzLmhhc2hQcm9wZXJ0aWVzID0ge307XG4gICAgICAgIHZhciBsb2NhbFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHsgcmV0dXJuIGxvY2FsUHJvcGVydGllc1twcm9wLm5hbWVdID0gcHJvcDsgfSk7XG4gICAgICAgIHZhciBwYXJlbnRDbGFzcyA9ICEhdGhpcy5wYXJlbnROYW1lID8gU2VyaWFsaXplci5maW5kQ2xhc3ModGhpcy5wYXJlbnROYW1lKSA6IG51bGw7XG4gICAgICAgIGlmICghIXBhcmVudENsYXNzKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50UHJvcGVydGllcyA9IHBhcmVudENsYXNzLmdldEFsbFByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIHBhcmVudFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgICAgIHZhciBvdmVycmlkZWRQcm9wID0gbG9jYWxQcm9wZXJ0aWVzW3Byb3AubmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKCEhb3ZlcnJpZGVkUHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBvdmVycmlkZWRQcm9wLm1lcmdlV2l0aChwcm9wKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkUHJvcENvcmUob3ZlcnJpZGVkUHJvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRQcm9wQ29yZShwcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5oYXNoUHJvcGVydGllc1twcm9wLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWRkUHJvcENvcmUocHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLmFkZFByb3BDb3JlID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgdGhpcy5hbGxQcm9wZXJ0aWVzLnB1c2gocHJvcCk7XG4gICAgICAgIHRoaXMuaGFzaFByb3BlcnRpZXNbcHJvcC5uYW1lXSA9IHByb3A7XG4gICAgICAgIGlmICghIXByb3AuYWx0ZXJuYXRpdmVOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmhhc2hQcm9wZXJ0aWVzW3Byb3AuYWx0ZXJuYXRpdmVOYW1lXSA9IHByb3A7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YUNsYXNzLnByb3RvdHlwZS5pc092ZXJyaWRlZFByb3AgPSBmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5wYXJlbnROYW1lICYmICEhU2VyaWFsaXplci5maW5kUHJvcGVydHkodGhpcy5wYXJlbnROYW1lLCBwcm9wTmFtZSk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGFDbGFzcy5wcm90b3R5cGUuaGFzUmVndWxhckNoaWxkQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0N1c3RvbSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0N1c3RvbVZhbHVlID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXNbaV0uaXNDdXN0b20gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5yZW1vdmVBbGxQcm9wZXJ0aWVzKHRoaXMubmFtZSk7XG4gICAgICAgIHRoaXMubWFrZVBhcmVudFJlZ3VsYXJDbGFzcygpO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLm1ha2VQYXJlbnRSZWd1bGFyQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXJlbnROYW1lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgcGFyZW50ID0gU2VyaWFsaXplci5maW5kQ2xhc3ModGhpcy5wYXJlbnROYW1lKTtcbiAgICAgICAgaWYgKCEhcGFyZW50KSB7XG4gICAgICAgICAgICBwYXJlbnQuaGFzUmVndWxhckNoaWxkQ2xhc3MoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLmNyZWF0ZVByb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BJbmZvLCBpc0N1c3RvbSkge1xuICAgICAgICBpZiAoaXNDdXN0b20gPT09IHZvaWQgMCkgeyBpc0N1c3RvbSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSB0eXBlb2YgcHJvcEluZm8gPT09IFwic3RyaW5nXCIgPyBwcm9wSW5mbyA6IHByb3BJbmZvLm5hbWU7XG4gICAgICAgIGlmICghcHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgcHJvcGVydHlUeXBlID0gbnVsbDtcbiAgICAgICAgdmFyIHR5cGVJbmRleCA9IHByb3BlcnR5TmFtZS5pbmRleE9mKEpzb25NZXRhZGF0YUNsYXNzLnR5cGVTeW1ib2wpO1xuICAgICAgICBpZiAodHlwZUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHByb3BlcnR5VHlwZSA9IHByb3BlcnR5TmFtZS5zdWJzdHJpbmcodHlwZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWUuc3Vic3RyaW5nKDAsIHR5cGVJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzUmVxdWlyZWQgPSB0aGlzLmdldElzUHJvcGVydHlOYW1lUmVxdWlyZWQocHJvcGVydHlOYW1lKSB8fCAhIXByb3BJbmZvLmlzUmVxdWlyZWQ7XG4gICAgICAgIHByb3BlcnR5TmFtZSA9IHRoaXMuZ2V0UHJvcGVydHlOYW1lKHByb3BlcnR5TmFtZSk7XG4gICAgICAgIHZhciBwcm9wID0gbmV3IEpzb25PYmplY3RQcm9wZXJ0eSh0aGlzLCBwcm9wZXJ0eU5hbWUsIGlzUmVxdWlyZWQpO1xuICAgICAgICBpZiAocHJvcGVydHlUeXBlKSB7XG4gICAgICAgICAgICBwcm9wLnR5cGUgPSBwcm9wZXJ0eVR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wSW5mbyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgaWYgKHByb3BJbmZvLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLnR5cGUgPSBwcm9wSW5mby50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLmRlZmF1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHByb3AuZGVmYXVsdFZhbHVlID0gcHJvcEluZm8uZGVmYXVsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9wSW5mby5kZWZhdWx0RnVuYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5kZWZhdWx0VmFsdWVGdW5jID0gcHJvcEluZm8uZGVmYXVsdEZ1bmM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eShwcm9wSW5mby5pc1NlcmlhbGl6YWJsZSkpIHtcbiAgICAgICAgICAgICAgICBwcm9wLmlzU2VyaWFsaXphYmxlID0gcHJvcEluZm8uaXNTZXJpYWxpemFibGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eShwcm9wSW5mby5pc0xpZ2h0U2VyaWFsaXphYmxlKSkge1xuICAgICAgICAgICAgICAgIHByb3AuaXNMaWdodFNlcmlhbGl6YWJsZSA9IHByb3BJbmZvLmlzTGlnaHRTZXJpYWxpemFibGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eShwcm9wSW5mby5tYXhMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5tYXhMZW5ndGggPSBwcm9wSW5mby5tYXhMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcEluZm8uZGlzcGxheU5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHByb3AuZGlzcGxheU5hbWUgPSBwcm9wSW5mby5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLmNhdGVnb3J5KSkge1xuICAgICAgICAgICAgICAgIHByb3AuY2F0ZWdvcnkgPSBwcm9wSW5mby5jYXRlZ29yeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLmNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5jYXRlZ29yeUluZGV4ID0gcHJvcEluZm8uY2F0ZWdvcnlJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLm5leHRUb1Byb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIHByb3AubmV4dFRvUHJvcGVydHkgPSBwcm9wSW5mby5uZXh0VG9Qcm9wZXJ0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLm92ZXJyaWRpbmdQcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICBwcm9wLm92ZXJyaWRpbmdQcm9wZXJ0eSA9IHByb3BJbmZvLm92ZXJyaWRpbmdQcm9wZXJ0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLnZpc2libGVJbmRleCkpIHtcbiAgICAgICAgICAgICAgICBwcm9wLnZpc2libGVJbmRleCA9IHByb3BJbmZvLnZpc2libGVJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLnNob3dNb2RlKSkge1xuICAgICAgICAgICAgICAgIHByb3Auc2hvd01vZGUgPSBwcm9wSW5mby5zaG93TW9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLm1heFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHByb3AubWF4VmFsdWUgPSBwcm9wSW5mby5tYXhWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLm1pblZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHByb3AubWluVmFsdWUgPSBwcm9wSW5mby5taW5WYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLmRhdGFMaXN0KSkge1xuICAgICAgICAgICAgICAgIHByb3AuZGF0YUxpc3QgPSBwcm9wSW5mby5kYXRhTGlzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLmlzRHluYW1pY0Nob2ljZXMpKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5pc0R5bmFtaWNDaG9pY2VzID0gcHJvcEluZm8uaXNEeW5hbWljQ2hvaWNlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLmlzQmluZGFibGUpKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5pc0JpbmRhYmxlID0gcHJvcEluZm8uaXNCaW5kYWJsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLmlzVW5pcXVlKSkge1xuICAgICAgICAgICAgICAgIHByb3AuaXNVbmlxdWUgPSBwcm9wSW5mby5pc1VuaXF1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkhlbHBlcnNcIl0uaXNWYWx1ZUVtcHR5KHByb3BJbmZvLnVuaXF1ZVByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIHByb3AudW5pcXVlUHJvcGVydHlOYW1lID0gcHJvcEluZm8udW5pcXVlUHJvcGVydHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIV9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJIZWxwZXJzXCJdLmlzVmFsdWVFbXB0eShwcm9wSW5mby5pc0FycmF5KSkge1xuICAgICAgICAgICAgICAgIHByb3AuaXNBcnJheSA9IHByb3BJbmZvLmlzQXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcEluZm8udmlzaWJsZSA9PT0gdHJ1ZSB8fCBwcm9wSW5mby52aXNpYmxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHByb3AudmlzaWJsZSA9IHByb3BJbmZvLnZpc2libGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISFwcm9wSW5mby52aXNpYmxlSWYpIHtcbiAgICAgICAgICAgICAgICBwcm9wLnZpc2libGVJZiA9IHByb3BJbmZvLnZpc2libGVJZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXByb3BJbmZvLmVuYWJsZUlmKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5lbmFibGVJZiA9IHByb3BJbmZvLmVuYWJsZUlmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhcHJvcEluZm8ub25FeGVjdXRlRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIHByb3Aub25FeGVjdXRlRXhwcmVzc2lvbiA9IHByb3BJbmZvLm9uRXhlY3V0ZUV4cHJlc3Npb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISFwcm9wSW5mby5vblByb3BlcnR5RWRpdG9yVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5vblByb3BlcnR5RWRpdG9yVXBkYXRlID0gcHJvcEluZm8ub25Qcm9wZXJ0eUVkaXRvclVwZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9wSW5mby5yZWFkT25seSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHByb3AucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLmNob2ljZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hvaWNlc0Z1bmMgPSB0eXBlb2YgcHJvcEluZm8uY2hvaWNlcyA9PT0gXCJmdW5jdGlvblwiID8gcHJvcEluZm8uY2hvaWNlcyA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGNob2ljZXNWYWx1ZSA9IHR5cGVvZiBwcm9wSW5mby5jaG9pY2VzICE9PSBcImZ1bmN0aW9uXCIgPyBwcm9wSW5mby5jaG9pY2VzIDogbnVsbDtcbiAgICAgICAgICAgICAgICBwcm9wLnNldENob2ljZXMoY2hvaWNlc1ZhbHVlLCBjaG9pY2VzRnVuYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISFwcm9wSW5mby5iYXNlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLnNldEJhc2VWYWx1ZShwcm9wSW5mby5iYXNlVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLm9uU2VyaWFsaXplVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLm9uU2VyaWFsaXplVmFsdWUgPSBwcm9wSW5mby5vblNlcmlhbGl6ZVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLm9uR2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLm9uR2V0VmFsdWUgPSBwcm9wSW5mby5vbkdldFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLm9uU2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLm9uU2V0VmFsdWUgPSBwcm9wSW5mby5vblNldFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLm9uU2V0dGluZ1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5vblNldHRpbmdWYWx1ZSA9IHByb3BJbmZvLm9uU2V0dGluZ1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLmlzTG9jYWxpemFibGUpIHtcbiAgICAgICAgICAgICAgICBwcm9wSW5mby5zZXJpYWxpemF0aW9uUHJvcGVydHkgPSBcImxvY1wiICsgcHJvcC5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIHByb3Auc2VyaWFsaXphdGlvblByb3BlcnR5ID0gcHJvcEluZm8uc2VyaWFsaXphdGlvblByb3BlcnR5O1xuICAgICAgICAgICAgICAgIHZhciBzO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eSAmJlxuICAgICAgICAgICAgICAgICAgICBwcm9wLnNlcmlhbGl6YXRpb25Qcm9wZXJ0eS5pbmRleE9mKFwibG9jXCIpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcC5pc0xvY2FsaXphYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcEluZm8uaXNMb2NhbGl6YWJsZSkge1xuICAgICAgICAgICAgICAgIHByb3AuaXNMb2NhbGl6YWJsZSA9IHByb3BJbmZvLmlzTG9jYWxpemFibGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcEluZm8uY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgcHJvcC5jbGFzc05hbWUgPSBwcm9wSW5mby5jbGFzc05hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcEluZm8uYmFzZUNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIHByb3AuYmFzZUNsYXNzTmFtZSA9IHByb3BJbmZvLmJhc2VDbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgcHJvcC5pc0FycmF5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9wLmlzQXJyYXkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLmlzQXJyYXkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLmNsYXNzTmFtZVBhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9wLmNsYXNzTmFtZVBhcnQgPSBwcm9wSW5mby5jbGFzc05hbWVQYXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLmFsdGVybmF0aXZlTmFtZSkge1xuICAgICAgICAgICAgICAgIHByb3AuYWx0ZXJuYXRpdmVOYW1lID0gcHJvcEluZm8uYWx0ZXJuYXRpdmVOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLm9sZE5hbWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLm9sZE5hbWUgPSBwcm9wSW5mby5vbGROYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLmxheW91dCkge1xuICAgICAgICAgICAgICAgIHByb3AubGF5b3V0ID0gcHJvcEluZm8ubGF5b3V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBwcm9wLnZlcnNpb24gPSBwcm9wSW5mby52ZXJzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BJbmZvLmRlcGVuZHNPbikge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRGVwZW5kc09uUHJvcGVydGllcyhwcm9wLCBwcm9wSW5mby5kZXBlbmRzT24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5wdXNoKHByb3ApO1xuICAgICAgICBpZiAoaXNDdXN0b20gJiYgIXRoaXMuaXNPdmVycmlkZWRQcm9wKHByb3AubmFtZSkpIHtcbiAgICAgICAgICAgIHByb3AuaXNDdXN0b20gPSB0cnVlO1xuICAgICAgICAgICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uYWRkUHJvcGVydHkodGhpcy5uYW1lLCBwcm9wKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcDtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YUNsYXNzLnByb3RvdHlwZS5hZGREZXBlbmRzT25Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHByb3AsIGRlcGVuZHNPbikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkZXBlbmRzT24pKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcGVuZHNPbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRGVwZW5kc09uUHJvcGVydHkocHJvcCwgZGVwZW5kc09uW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRGVwZW5kc09uUHJvcGVydHkocHJvcCwgZGVwZW5kc09uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLmFkZERlcGVuZHNPblByb3BlcnR5ID0gZnVuY3Rpb24gKHByb3AsIGRlcGVuZHNPbikge1xuICAgICAgICB2YXIgcHJvcGVydHkgPSB0aGlzLmZpbmQoZGVwZW5kc09uKTtcbiAgICAgICAgaWYgKCFwcm9wZXJ0eSkge1xuICAgICAgICAgICAgcHJvcGVydHkgPSBTZXJpYWxpemVyLmZpbmRQcm9wZXJ0eSh0aGlzLnBhcmVudE5hbWUsIGRlcGVuZHNPbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwcm9wZXJ0eSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcHJvcGVydHkuYWRkRGVwZW5kZWRQcm9wZXJ0eShwcm9wLm5hbWUpO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucHJvdG90eXBlLmdldElzUHJvcGVydHlOYW1lUmVxdWlyZWQgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHJldHVybiAocHJvcGVydHlOYW1lLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZVswXSA9PSBKc29uTWV0YWRhdGFDbGFzcy5yZXF1aXJlZFN5bWJvbCk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGFDbGFzcy5wcm90b3R5cGUuZ2V0UHJvcGVydHlOYW1lID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgICAgICBpZiAoIXRoaXMuZ2V0SXNQcm9wZXJ0eU5hbWVSZXF1aXJlZChwcm9wZXJ0eU5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5TmFtZTtcbiAgICAgICAgcHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lLnNsaWNlKDEpO1xuICAgICAgICByZXR1cm4gcHJvcGVydHlOYW1lO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhQ2xhc3MucmVxdWlyZWRTeW1ib2wgPSBcIiFcIjtcbiAgICBKc29uTWV0YWRhdGFDbGFzcy50eXBlU3ltYm9sID0gXCI6XCI7XG4gICAgcmV0dXJuIEpzb25NZXRhZGF0YUNsYXNzO1xufSgpKTtcblxuLyoqXG4gKiBUaGUgbWV0YWRhdGEgb2JqZWN0LiBJdCBjb250YWlucyBvYmplY3QgcHJvcGVydGllcycgcnVudGltZSBpbmZvcm1hdGlvbiBhbmQgYWxsb3dzIHlvdSB0byBtb2RpZnkgaXQuXG4gKi9cbnZhciBKc29uTWV0YWRhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSnNvbk1ldGFkYXRhKCkge1xuICAgICAgICB0aGlzLmNsYXNzZXMgPSB7fTtcbiAgICAgICAgdGhpcy5hbHRlcm5hdGl2ZU5hbWVzID0ge307XG4gICAgICAgIHRoaXMuY2hpbGRyZW5DbGFzc2VzID0ge307XG4gICAgICAgIHRoaXMuZHluYW1pY1Byb3BzQ2FjaGUgPSB7fTtcbiAgICB9XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZXRPYmpQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgICAgICBpZiAodGhpcy5pc09ialdyYXBwZXIob2JqKSAmJiB0aGlzLmlzTmVlZFVzZU9ialdyYXBwZXIob2JqLCBuYW1lKSkge1xuICAgICAgICAgICAgdmFyIG9yaWduYWxPYmogPSBvYmouZ2V0T3JpZ2luYWxPYmooKTtcbiAgICAgICAgICAgIHZhciBwcm9wXzEgPSBTZXJpYWxpemVyLmZpbmRQcm9wZXJ0eShvcmlnbmFsT2JqLmdldFR5cGUoKSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoISFwcm9wXzEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T2JqUHJvcGVydHlWYWx1ZUNvcmUob3JpZ25hbE9iaiwgcHJvcF8xKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvcCA9IFNlcmlhbGl6ZXIuZmluZFByb3BlcnR5KG9iai5nZXRUeXBlKCksIG5hbWUpO1xuICAgICAgICBpZiAoIXByb3ApXG4gICAgICAgICAgICByZXR1cm4gb2JqW25hbWVdO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPYmpQcm9wZXJ0eVZhbHVlQ29yZShvYmosIHByb3ApO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5zZXRPYmpQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24gKG9iaiwgbmFtZSwgdmFsKSB7XG4gICAgICAgIGlmIChvYmpbbmFtZV0gPT09IHZhbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCEhb2JqW25hbWVdICYmICEhb2JqW25hbWVdLnNldEpzb24pIHtcbiAgICAgICAgICAgIG9ialtuYW1lXS5zZXRKc29uKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBuZXdWYWwucHVzaCh2YWxbaV0pO1xuICAgICAgICAgICAgICAgIHZhbCA9IG5ld1ZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9ialtuYW1lXSA9IHZhbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZXRPYmpQcm9wZXJ0eVZhbHVlQ29yZSA9IGZ1bmN0aW9uIChvYmosIHByb3ApIHtcbiAgICAgICAgaWYgKCFwcm9wLmlzU2VyaWFsaXphYmxlKVxuICAgICAgICAgICAgcmV0dXJuIG9ialtwcm9wLm5hbWVdO1xuICAgICAgICBpZiAocHJvcC5pc0xvY2FsaXphYmxlKSB7XG4gICAgICAgICAgICBpZiAocHJvcC5pc0FycmF5KVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmpbcHJvcC5uYW1lXTtcbiAgICAgICAgICAgIGlmICghIXByb3Auc2VyaWFsaXphdGlvblByb3BlcnR5KVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmpbcHJvcC5zZXJpYWxpemF0aW9uUHJvcGVydHldLnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iai5nZXRQcm9wZXJ0eVZhbHVlKHByb3AubmFtZSk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmlzT2JqV3JhcHBlciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICEhb2JqLmdldE9yaWdpbmFsT2JqICYmICEhb2JqLmdldE9yaWdpbmFsT2JqKCk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmlzTmVlZFVzZU9ialdyYXBwZXIgPSBmdW5jdGlvbiAob2JqLCBuYW1lKSB7XG4gICAgICAgIGlmICghb2JqLmdldER5bmFtaWNQcm9wZXJ0aWVzKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBwcm9wcyA9IG9iai5nZXREeW5hbWljUHJvcGVydGllcygpO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcHMpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocHJvcHNbaV0ubmFtZSA9PT0gbmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKG5hbWUsIHByb3BlcnRpZXMsIGNyZWF0b3IsIHBhcmVudE5hbWUpIHtcbiAgICAgICAgaWYgKGNyZWF0b3IgPT09IHZvaWQgMCkgeyBjcmVhdG9yID0gbnVsbDsgfVxuICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gdm9pZCAwKSB7IHBhcmVudE5hbWUgPSBudWxsOyB9XG4gICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBtZXRhRGF0YUNsYXNzID0gbmV3IEpzb25NZXRhZGF0YUNsYXNzKG5hbWUsIHByb3BlcnRpZXMsIGNyZWF0b3IsIHBhcmVudE5hbWUpO1xuICAgICAgICB0aGlzLmNsYXNzZXNbbmFtZV0gPSBtZXRhRGF0YUNsYXNzO1xuICAgICAgICBpZiAocGFyZW50TmFtZSkge1xuICAgICAgICAgICAgcGFyZW50TmFtZSA9IHBhcmVudE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW5DbGFzc2VzW3BhcmVudE5hbWVdO1xuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5DbGFzc2VzW3BhcmVudE5hbWVdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuQ2xhc3Nlc1twYXJlbnROYW1lXS5wdXNoKG1ldGFEYXRhQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXRhRGF0YUNsYXNzO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBtZXRhQ2xhc3MgPSB0aGlzLmZpbmRDbGFzcyhuYW1lKTtcbiAgICAgICAgaWYgKCFtZXRhQ2xhc3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNsYXNzZXNbbWV0YUNsYXNzLm5hbWVdO1xuICAgICAgICBpZiAoISFtZXRhQ2xhc3MucGFyZW50TmFtZSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jaGlsZHJlbkNsYXNzZXNbbWV0YUNsYXNzLnBhcmVudE5hbWVdLmluZGV4T2YobWV0YUNsYXNzKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbkNsYXNzZXNbbWV0YUNsYXNzLnBhcmVudE5hbWVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUub3ZlcnJpZGVDbGFzc0NyZWF0b3JlID0gZnVuY3Rpb24gKG5hbWUsIGNyZWF0b3IpIHtcbiAgICAgICAgdGhpcy5vdmVycmlkZUNsYXNzQ3JlYXRvcihuYW1lLCBjcmVhdG9yKTtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUub3ZlcnJpZGVDbGFzc0NyZWF0b3IgPSBmdW5jdGlvbiAobmFtZSwgY3JlYXRvcikge1xuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgbWV0YURhdGFDbGFzcyA9IHRoaXMuZmluZENsYXNzKG5hbWUpO1xuICAgICAgICBpZiAobWV0YURhdGFDbGFzcykge1xuICAgICAgICAgICAgbWV0YURhdGFDbGFzcy5jcmVhdG9yID0gY3JlYXRvcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgbWV0YUNsYXNzID0gdGhpcy5maW5kQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKCFtZXRhQ2xhc3MpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHJldHVybiBtZXRhQ2xhc3MuZ2V0QWxsUHJvcGVydGllcygpO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzQnlPYmogPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICghb2JqIHx8ICFvYmouZ2V0VHlwZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5nZXRQcm9wZXJ0aWVzKG9iai5nZXRUeXBlKCkpO1xuICAgICAgICB2YXIgZHluYW1pY1Byb3BzID0gdGhpcy5nZXREeW5hbWljUHJvcGVydGllc0J5T2JqKG9iaik7XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQocHJvcHMpLmNvbmNhdChkeW5hbWljUHJvcHMpO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5hZGREeW5hbWljUHJvcGVydGllc0ludG9PYmogPSBmdW5jdGlvbiAoZGVzdCwgc3JjLCBwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICBfdGhpcy5hZGREeW5hbWljUHJvcGVydHlJbnRvT2JqKGRlc3QsIHNyYywgcHJvcC5uYW1lLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAocHJvcC5zZXJpYWxpemF0aW9uUHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hZGREeW5hbWljUHJvcGVydHlJbnRvT2JqKGRlc3QsIHNyYywgcHJvcC5zZXJpYWxpemF0aW9uUHJvcGVydHksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3AuYWx0ZXJuYXRpdmVOYW1lKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWRkRHluYW1pY1Byb3BlcnR5SW50b09iaihkZXN0LCBzcmMsIHByb3AuYWx0ZXJuYXRpdmVOYW1lLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5hZGREeW5hbWljUHJvcGVydHlJbnRvT2JqID0gZnVuY3Rpb24gKGRlc3QsIHNyYywgcHJvcE5hbWUsIGlzUmVhZE9ubHkpIHtcbiAgICAgICAgdmFyIGRlc2MgPSB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3JjW3Byb3BOYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGlmICghaXNSZWFkT25seSkge1xuICAgICAgICAgICAgZGVzY1tcInNldFwiXSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgc3JjW3Byb3BOYW1lXSA9IHY7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZXN0LCBwcm9wTmFtZSwgZGVzYyk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmdldER5bmFtaWNQcm9wZXJ0aWVzQnlPYmogPSBmdW5jdGlvbiAob2JqLCBkeW5hbWljVHlwZSkge1xuICAgICAgICBpZiAoZHluYW1pY1R5cGUgPT09IHZvaWQgMCkgeyBkeW5hbWljVHlwZSA9IG51bGw7IH1cbiAgICAgICAgaWYgKCFvYmogfHwgIW9iai5nZXRUeXBlKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICBpZiAoISFvYmouZ2V0RHluYW1pY1Byb3BlcnRpZXMpXG4gICAgICAgICAgICByZXR1cm4gb2JqLmdldER5bmFtaWNQcm9wZXJ0aWVzKCk7XG4gICAgICAgIGlmICghb2JqLmdldER5bmFtaWNUeXBlICYmICFkeW5hbWljVHlwZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgdmFyIGRUeXBlID0gISFkeW5hbWljVHlwZSA/IGR5bmFtaWNUeXBlIDogb2JqLmdldER5bmFtaWNUeXBlKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldER5bmFtaWNQcm9wZXJ0aWVzQnlUeXBlcyhvYmouZ2V0VHlwZSgpLCBkVHlwZSk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmdldER5bmFtaWNQcm9wZXJ0aWVzQnlUeXBlcyA9IGZ1bmN0aW9uIChvYmpUeXBlLCBkeW5hbWljVHlwZSwgaW52YWxpZE5hbWVzKSB7XG4gICAgICAgIGlmICghZHluYW1pY1R5cGUpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciBjYWNoZVR5cGUgPSBkeW5hbWljVHlwZSArIFwiLVwiICsgb2JqVHlwZTtcbiAgICAgICAgaWYgKHRoaXMuZHluYW1pY1Byb3BzQ2FjaGVbY2FjaGVUeXBlXSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmR5bmFtaWNQcm9wc0NhY2hlW2NhY2hlVHlwZV07XG4gICAgICAgIHZhciBkeW5hbWljUHJvcHMgPSB0aGlzLmdldFByb3BlcnRpZXMoZHluYW1pY1R5cGUpO1xuICAgICAgICBpZiAoIWR5bmFtaWNQcm9wcyB8fCBkeW5hbWljUHJvcHMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciBoYXNoID0ge307XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMuZ2V0UHJvcGVydGllcyhvYmpUeXBlKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaGFzaFtwcm9wc1tpXS5uYW1lXSA9IHByb3BzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgaWYgKCFpbnZhbGlkTmFtZXMpXG4gICAgICAgICAgICBpbnZhbGlkTmFtZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaV8xID0gMDsgaV8xIDwgZHluYW1pY1Byb3BzLmxlbmd0aDsgaV8xKyspIHtcbiAgICAgICAgICAgIHZhciBkUHJvcCA9IGR5bmFtaWNQcm9wc1tpXzFdO1xuICAgICAgICAgICAgaWYgKCFoYXNoW2RQcm9wLm5hbWVdICYmIGludmFsaWROYW1lcy5pbmRleE9mKGRQcm9wLm5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKGRQcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmR5bmFtaWNQcm9wc0NhY2hlW2NhY2hlVHlwZV0gPSByZXM7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmhhc09yaWdpbmFsUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wTmFtZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmdldE9yaWdpbmFsUHJvcGVydHkob2JqLCBwcm9wTmFtZSk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmdldE9yaWdpbmFsUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wTmFtZSkge1xuICAgICAgICB2YXIgcmVzID0gdGhpcy5maW5kUHJvcGVydHkob2JqLmdldFR5cGUoKSwgcHJvcE5hbWUpO1xuICAgICAgICBpZiAoISFyZXMpXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICBpZiAodGhpcy5pc09ialdyYXBwZXIob2JqKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRQcm9wZXJ0eShvYmouZ2V0T3JpZ2luYWxPYmooKS5nZXRUeXBlKCksIHByb3BOYW1lKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmdldFByb3BlcnR5ID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHZhciBwcm9wID0gdGhpcy5maW5kUHJvcGVydHkoY2xhc3NOYW1lLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICBpZiAoIXByb3ApXG4gICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgdmFyIGNsYXNzSW5mbyA9IHRoaXMuZmluZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChwcm9wLmNsYXNzSW5mbyA9PT0gY2xhc3NJbmZvKVxuICAgICAgICAgICAgcmV0dXJuIHByb3A7XG4gICAgICAgIHZhciBuZXdQcm9wID0gbmV3IEpzb25PYmplY3RQcm9wZXJ0eShjbGFzc0luZm8sIHByb3AubmFtZSwgcHJvcC5pc1JlcXVpcmVkKTtcbiAgICAgICAgbmV3UHJvcC5tZXJnZVdpdGgocHJvcCk7XG4gICAgICAgIG5ld1Byb3AuaXNBcnJheSA9IHByb3AuaXNBcnJheTtcbiAgICAgICAgY2xhc3NJbmZvLnByb3BlcnRpZXMucHVzaChuZXdQcm9wKTtcbiAgICAgICAgY2xhc3NJbmZvLnJlc2V0QWxsUHJvcGVydGllcygpO1xuICAgICAgICByZXR1cm4gbmV3UHJvcDtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZmluZFByb3BlcnR5ID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHZhciBjbCA9IHRoaXMuZmluZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIHJldHVybiAhIWNsID8gY2wuZmluZFByb3BlcnR5KHByb3BlcnR5TmFtZSkgOiBudWxsO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5maW5kUHJvcGVydGllcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUsIHByb3BlcnR5TmFtZXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgY2wgPSB0aGlzLmZpbmRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgICBpZiAoIWNsKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0eU5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IGNsLmZpbmRQcm9wZXJ0eShwcm9wZXJ0eU5hbWVzW2ldKTtcbiAgICAgICAgICAgIGlmIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZ2V0QWxsUHJvcGVydGllc0J5TmFtZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgY2xhc3NlcyA9IHRoaXMuZ2V0QWxsQ2xhc3NlcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjbGFzc0luZm8gPSB0aGlzLmZpbmRDbGFzcyhjbGFzc2VzW2ldKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2xhc3NJbmZvLnByb3BlcnRpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3NJbmZvLnByb3BlcnRpZXNbal0ubmFtZSA9PSBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goY2xhc3NJbmZvLnByb3BlcnRpZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZ2V0QWxsQ2xhc3NlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuY2xhc3Nlcykge1xuICAgICAgICAgICAgcmVzLnB1c2gobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAobmFtZSwganNvbikge1xuICAgICAgICBpZiAoanNvbiA9PT0gdm9pZCAwKSB7IGpzb24gPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIG1ldGFEYXRhQ2xhc3MgPSB0aGlzLmZpbmRDbGFzcyhuYW1lKTtcbiAgICAgICAgaWYgKCFtZXRhRGF0YUNsYXNzKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChtZXRhRGF0YUNsYXNzLmNyZWF0b3IpXG4gICAgICAgICAgICByZXR1cm4gbWV0YURhdGFDbGFzcy5jcmVhdG9yKGpzb24pO1xuICAgICAgICB2YXIgcGFyZW50TmFtZSA9IG1ldGFEYXRhQ2xhc3MucGFyZW50TmFtZTtcbiAgICAgICAgd2hpbGUgKHBhcmVudE5hbWUpIHtcbiAgICAgICAgICAgIG1ldGFEYXRhQ2xhc3MgPSB0aGlzLmZpbmRDbGFzcyhwYXJlbnROYW1lKTtcbiAgICAgICAgICAgIGlmICghbWV0YURhdGFDbGFzcylcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHBhcmVudE5hbWUgPSBtZXRhRGF0YUNsYXNzLnBhcmVudE5hbWU7XG4gICAgICAgICAgICBpZiAobWV0YURhdGFDbGFzcy5jcmVhdG9yKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUN1c3RvbVR5cGUobmFtZSwgbWV0YURhdGFDbGFzcy5jcmVhdG9yLCBqc29uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuY3JlYXRlQ3VzdG9tVHlwZSA9IGZ1bmN0aW9uIChuYW1lLCBjcmVhdG9yLCBqc29uKSB7XG4gICAgICAgIGlmIChqc29uID09PSB2b2lkIDApIHsganNvbiA9IHVuZGVmaW5lZDsgfVxuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgcmVzID0gY3JlYXRvcihqc29uKTtcbiAgICAgICAgdmFyIGN1c3RvbVR5cGVOYW1lID0gbmFtZTtcbiAgICAgICAgdmFyIGN1c3RvbVRlbXBsYXRlTmFtZSA9IHJlcy5nZXRUZW1wbGF0ZVxuICAgICAgICAgICAgPyByZXMuZ2V0VGVtcGxhdGUoKVxuICAgICAgICAgICAgOiByZXMuZ2V0VHlwZSgpO1xuICAgICAgICByZXMuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXN0b21UeXBlTmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVzLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1c3RvbVRlbXBsYXRlTmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ3VzdG9tUHJvcGVydGllc0NvbGxlY3Rpb24uY3JlYXRlUHJvcGVydGllcyhyZXMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZXRDaGlsZHJlbkNsYXNzZXMgPSBmdW5jdGlvbiAobmFtZSwgY2FuQmVDcmVhdGVkKSB7XG4gICAgICAgIGlmIChjYW5CZUNyZWF0ZWQgPT09IHZvaWQgMCkgeyBjYW5CZUNyZWF0ZWQgPSBmYWxzZTsgfVxuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHRoaXMuZmlsbENoaWxkcmVuQ2xhc3NlcyhuYW1lLCBjYW5CZUNyZWF0ZWQsIHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmdldFJlcXVpcmVkUHJvcGVydGllcyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBtZXRhQ2xhc3MgPSB0aGlzLmZpbmRDbGFzcyhuYW1lKTtcbiAgICAgICAgaWYgKCFtZXRhQ2xhc3MpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciBwcm9wcyA9IG1ldGFDbGFzcy5nZXRSZXF1aXJlZFByb3BlcnRpZXMoKTtcbiAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXMucHVzaChwcm9wc1tpXS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgcHJvcGVydGllc0luZm9zKSB7XG4gICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgbWV0YURhdGFDbGFzcyA9IHRoaXMuZmluZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllc0luZm9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEN1c3RvbVByb3BlcnR5Q29yZShtZXRhRGF0YUNsYXNzLCBwcm9wZXJ0aWVzSW5mb3NbaV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmFkZFByb3BlcnR5ID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgcHJvcGVydHlJbmZvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZEN1c3RvbVByb3BlcnR5Q29yZSh0aGlzLmZpbmRDbGFzcyhjbGFzc05hbWUpLCBwcm9wZXJ0eUluZm8pO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5hZGRDdXN0b21Qcm9wZXJ0eUNvcmUgPSBmdW5jdGlvbiAobWV0YURhdGFDbGFzcywgcHJvcGVydHlJbmZvKSB7XG4gICAgICAgIGlmICghbWV0YURhdGFDbGFzcylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgcHJvcGVydHkgPSBtZXRhRGF0YUNsYXNzLmNyZWF0ZVByb3BlcnR5KHByb3BlcnR5SW5mbywgdHJ1ZSk7XG4gICAgICAgIGlmIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckR5bmFtaWNQcm9wc0NhY2hlKG1ldGFEYXRhQ2xhc3MpO1xuICAgICAgICAgICAgbWV0YURhdGFDbGFzcy5yZXNldEFsbFByb3BlcnRpZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcGVydHk7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLnJlbW92ZVByb3BlcnR5ID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHZhciBtZXRhRGF0YUNsYXNzID0gdGhpcy5maW5kQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKCFtZXRhRGF0YUNsYXNzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcHJvcGVydHkgPSBtZXRhRGF0YUNsYXNzLmZpbmQocHJvcGVydHlOYW1lKTtcbiAgICAgICAgaWYgKHByb3BlcnR5KSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRHluYW1pY1Byb3BzQ2FjaGUobWV0YURhdGFDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVByb3BlcnR5RnJvbUNsYXNzKG1ldGFEYXRhQ2xhc3MsIHByb3BlcnR5KTtcbiAgICAgICAgICAgIG1ldGFEYXRhQ2xhc3MucmVzZXRBbGxQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICBDdXN0b21Qcm9wZXJ0aWVzQ29sbGVjdGlvbi5yZW1vdmVQcm9wZXJ0eShtZXRhRGF0YUNsYXNzLm5hbWUsIHByb3BlcnR5TmFtZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuY2xlYXJEeW5hbWljUHJvcHNDYWNoZSA9IGZ1bmN0aW9uIChtZXRhRGF0YUNsYXNzKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY1Byb3BzQ2FjaGUgPSB7fTtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUucmVtb3ZlUHJvcGVydHlGcm9tQ2xhc3MgPSBmdW5jdGlvbiAobWV0YURhdGFDbGFzcywgcHJvcGVydHkpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gbWV0YURhdGFDbGFzcy5wcm9wZXJ0aWVzLmluZGV4T2YocHJvcGVydHkpO1xuICAgICAgICBpZiAoaW5kZXggPCAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBtZXRhRGF0YUNsYXNzLnByb3BlcnRpZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZmlsbENoaWxkcmVuQ2xhc3NlcyA9IGZ1bmN0aW9uIChuYW1lLCBjYW5CZUNyZWF0ZWQsIHJlc3VsdCkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuQ2xhc3Nlc1tuYW1lXTtcbiAgICAgICAgaWYgKCFjaGlsZHJlbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFjYW5CZUNyZWF0ZWQgfHwgY2hpbGRyZW5baV0uY3JlYXRvcikge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsbENoaWxkcmVuQ2xhc3NlcyhjaGlsZHJlbltpXS5uYW1lLCBjYW5CZUNyZWF0ZWQsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZmluZENsYXNzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIHJlcyA9IHRoaXMuY2xhc3Nlc1tuYW1lXTtcbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICAgIHZhciBuZXdOYW1lID0gdGhpcy5hbHRlcm5hdGl2ZU5hbWVzW25hbWVdO1xuICAgICAgICAgICAgaWYgKCEhbmV3TmFtZSAmJiBuZXdOYW1lICE9IG5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZENsYXNzKG5ld05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmlzRGVzY2VuZGFudE9mID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgYW5jZXN0b3JDbGFzc05hbWUpIHtcbiAgICAgICAgaWYgKCFjbGFzc05hbWUgfHwgIWFuY2VzdG9yQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGFuY2VzdG9yQ2xhc3NOYW1lID0gYW5jZXN0b3JDbGFzc05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIGNsYXNzXyA9IHRoaXMuZmluZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIGlmICghY2xhc3NfKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmVudENsYXNzID0gY2xhc3NfO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAocGFyZW50Q2xhc3MubmFtZSA9PT0gYW5jZXN0b3JDbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudENsYXNzID0gdGhpcy5jbGFzc2VzW3BhcmVudENsYXNzLnBhcmVudE5hbWVdO1xuICAgICAgICB9IHdoaWxlICghIXBhcmVudENsYXNzKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5hZGRBbHRlck5hdGl2ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIChuYW1lLCBhbHRlcm5hdGl2ZU5hbWUpIHtcbiAgICAgICAgdGhpcy5hbHRlcm5hdGl2ZU5hbWVzW2FsdGVybmF0aXZlTmFtZS50b0xvd2VyQ2FzZSgpXSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZ2VuZXJhdGVTY2hlbWEgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmIChjbGFzc05hbWUgPT09IHZvaWQgMCkgeyBjbGFzc05hbWUgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgaWYgKCFjbGFzc05hbWUpXG4gICAgICAgICAgICBjbGFzc05hbWUgPSBcInN1cnZleVwiO1xuICAgICAgICB2YXIgY2xhc3NJbmZvID0gdGhpcy5maW5kQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKCFjbGFzc0luZm8pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHJlcyA9IHtcbiAgICAgICAgICAgICRzY2hlbWE6IFwiaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjXCIsXG4gICAgICAgICAgICB0aXRsZTogXCJTdXJ2ZXlKUyBMaWJyYXJ5IGpzb24gc2NoZW1hXCIsXG4gICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgICAgICBkZWZpbml0aW9uczogeyBsb2NzdHJpbmc6IHRoaXMuZ2VuZXJhdGVMb2NTdHJDbGFzcygpIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVTY2hlbWFQcm9wZXJ0aWVzKGNsYXNzSW5mbywgcmVzLCByZXMuZGVmaW5pdGlvbnMsIHRydWUpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZW5lcmF0ZUxvY1N0ckNsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJvcHMgPSB7fTtcbiAgICAgICAgdmFyIGxvY1Byb3AgPSBTZXJpYWxpemVyLmZpbmRQcm9wZXJ0eShcInN1cnZleVwiLCBcImxvY2FsZVwiKTtcbiAgICAgICAgaWYgKCEhbG9jUHJvcCkge1xuICAgICAgICAgICAgdmFyIGNob2ljZXMgPSBsb2NQcm9wLmdldENob2ljZXMobnVsbCk7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaG9pY2VzKSkge1xuICAgICAgICAgICAgICAgIGlmIChjaG9pY2VzLmluZGV4T2YoXCJlblwiKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2hvaWNlcy5zcGxpY2UoMCwgMCwgXCJlblwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hvaWNlcy5zcGxpY2UoMCwgMCwgXCJkZWZhdWx0XCIpO1xuICAgICAgICAgICAgICAgIGNob2ljZXMuZm9yRWFjaChmdW5jdGlvbiAobCkgeyBpZiAoISFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzW2xdID0geyB0eXBlOiBcInN0cmluZ1wiIH07XG4gICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGlkOiBcImxvY3N0cmluZ1wiLFxuICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHByb3BzXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBKc29uTWV0YWRhdGEucHJvdG90eXBlLmdlbmVyYXRlU2NoZW1hUHJvcGVydGllcyA9IGZ1bmN0aW9uIChjbGFzc0luZm8sIGNsYXNzU2NoZW1hLCBzY2hlbWFEZWYsIGlzUm9vdCkge1xuICAgICAgICBpZiAoIWNsYXNzSW5mbylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHNjaGVtYVByb3BlcnRpZXMgPSBjbGFzc1NjaGVtYS5wcm9wZXJ0aWVzO1xuICAgICAgICB2YXIgcmVxdWlyZWRQcm9wcyA9IFtdO1xuICAgICAgICBpZiAoY2xhc3NJbmZvLm5hbWUgPT09IFwicXVlc3Rpb25cIiB8fCBjbGFzc0luZm8ubmFtZSA9PT0gXCJwYW5lbFwiKSB7XG4gICAgICAgICAgICBzY2hlbWFQcm9wZXJ0aWVzLnR5cGUgPSB7IHR5cGU6IFwic3RyaW5nXCIgfTtcbiAgICAgICAgICAgIHJlcXVpcmVkUHJvcHMucHVzaChcInR5cGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc0luZm8ucHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb3AgPSBjbGFzc0luZm8ucHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIGlmICghIWNsYXNzSW5mby5wYXJlbnROYW1lICYmICEhU2VyaWFsaXplci5maW5kUHJvcGVydHkoY2xhc3NJbmZvLnBhcmVudE5hbWUsIHByb3AubmFtZSkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBzY2hlbWFQcm9wZXJ0aWVzW3Byb3AubmFtZV0gPSB0aGlzLmdlbmVyYXRlU2NoZW1hUHJvcGVydHkocHJvcCwgc2NoZW1hRGVmLCBpc1Jvb3QpO1xuICAgICAgICAgICAgaWYgKHByb3AuaXNSZXF1aXJlZClcbiAgICAgICAgICAgICAgICByZXF1aXJlZFByb3BzLnB1c2gocHJvcC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVxdWlyZWRQcm9wcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjbGFzc1NjaGVtYS5yZXF1aXJlZCA9IHJlcXVpcmVkUHJvcHM7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZ2VuZXJhdGVTY2hlbWFQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wLCBzY2hlbWFEZWYsIGlzUm9vdCkge1xuICAgICAgICBpZiAocHJvcC5pc0xvY2FsaXphYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBvbmVPZjogW1xuICAgICAgICAgICAgICAgICAgICB7IFwidHlwZVwiOiBcInN0cmluZ1wiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgXCIkcmVmXCI6IHRoaXMuZ2V0Q2hlbWVSZWZOYW1lKFwibG9jc3RyaW5nXCIsIGlzUm9vdCkgfVxuICAgICAgICAgICAgICAgIF0gfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvcFR5cGUgPSBwcm9wLnNjaGVtYVR5cGUoKTtcbiAgICAgICAgdmFyIHJlZlR5cGUgPSBwcm9wLnNjaGVtYVJlZigpO1xuICAgICAgICB2YXIgcmVzID0ge307XG4gICAgICAgIGlmICghIXByb3BUeXBlKSB7XG4gICAgICAgICAgICByZXMudHlwZSA9IHByb3BUeXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wLmhhc0Nob2ljZXMpIHtcbiAgICAgICAgICAgIHZhciBlbnVtUmVzID0gcHJvcC5nZXRDaG9pY2VzKG51bGwpO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW51bVJlcykgJiYgZW51bVJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzLmVudW0gPSB0aGlzLmdldENob2ljZXNWYWx1ZXMoZW51bVJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhcmVmVHlwZSkge1xuICAgICAgICAgICAgaWYgKHByb3BUeXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcC5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLml0ZW1zID0geyB0eXBlOiBwcm9wLmNsYXNzTmFtZSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLml0ZW1zID0geyAkcmVmOiB0aGlzLmdldENoZW1lUmVmTmFtZShwcm9wLmNsYXNzTmFtZSwgaXNSb290KSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc1tcIiRyZWZcIl0gPSB0aGlzLmdldENoZW1lUmVmTmFtZShyZWZUeXBlLCBpc1Jvb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNoZW1hQ2xhc3MocHJvcC5jbGFzc05hbWUsIHNjaGVtYURlZiwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIXByb3AuYmFzZUNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIHVzZWRDbGFzc2VzID0gdGhpcy5nZXRDaGlsZHJlbkNsYXNzZXMocHJvcC5iYXNlQ2xhc3NOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChwcm9wLmJhc2VDbGFzc05hbWUgPT0gXCJxdWVzdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdXNlZENsYXNzZXMucHVzaCh0aGlzLmZpbmRDbGFzcyhcInBhbmVsXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5pdGVtcyA9IHsgYW55T2Y6IFtdIH07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZWRDbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHVzZWRDbGFzc2VzW2ldLm5hbWU7XG4gICAgICAgICAgICAgICAgcmVzLml0ZW1zLmFueU9mLnB1c2goeyAkcmVmOiB0aGlzLmdldENoZW1lUmVmTmFtZShjbGFzc05hbWUsIGlzUm9vdCkgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNoZW1hQ2xhc3MoY2xhc3NOYW1lLCBzY2hlbWFEZWYsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZXRDaGVtZVJlZk5hbWUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lLCBpc1Jvb3QpIHtcbiAgICAgICAgLy9GaXggZm9yICM2NDg2LCBhY2NvcmRpbmcgdG8gaHR0cHM6Ly9uaWVtLmdpdGh1Yi5pby9qc29uL3JlZmVyZW5jZS9qc29uLXNjaGVtYS9yZWZlcmVuY2VzLyM6fjp0ZXh0PUluJTIwYSUyMEpTT04lMjBzY2hlbWElMkMlMjBhLCUyQyUyMGFuJTIwaW4lMkRzY2hlbWElMjByZWZlcmVuY2VcbiAgICAgICAgLy9DaGVja2VkIGJ5IGh0dHBzOi8vd3d3Lmpzb25zY2hlbWF2YWxpZGF0b3IubmV0L1xuICAgICAgICByZXR1cm4gaXNSb290ID8gXCIjL2RlZmluaXRpb25zL1wiICsgY2xhc3NOYW1lIDogY2xhc3NOYW1lO1xuICAgIH07XG4gICAgSnNvbk1ldGFkYXRhLnByb3RvdHlwZS5nZW5lcmF0ZUNoZW1hQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lLCBzY2hlbWFEZWYsIGlzUm9vdCkge1xuICAgICAgICBpZiAoISFzY2hlbWFEZWZbY2xhc3NOYW1lXSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGNsYXNzSW5mbyA9IHRoaXMuZmluZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIGlmICghY2xhc3NJbmZvKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaGFzUGFyZW50ID0gISFjbGFzc0luZm8ucGFyZW50TmFtZSAmJiBjbGFzc0luZm8ucGFyZW50TmFtZSAhPSBcImJhc2VcIjtcbiAgICAgICAgaWYgKGhhc1BhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNoZW1hQ2xhc3MoY2xhc3NJbmZvLnBhcmVudE5hbWUsIHNjaGVtYURlZiwgaXNSb290KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzID0geyB0eXBlOiBcIm9iamVjdFwiLCAkaWQ6IGNsYXNzTmFtZSB9O1xuICAgICAgICBzY2hlbWFEZWZbY2xhc3NOYW1lXSA9IHJlcztcbiAgICAgICAgdmFyIGNoZW1hUHJvcHMgPSB7IHByb3BlcnRpZXM6IHt9IH07XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVTY2hlbWFQcm9wZXJ0aWVzKGNsYXNzSW5mbywgY2hlbWFQcm9wcywgc2NoZW1hRGVmLCBpc1Jvb3QpO1xuICAgICAgICBpZiAoaGFzUGFyZW50KSB7XG4gICAgICAgICAgICByZXMuYWxsT2YgPSBbXG4gICAgICAgICAgICAgICAgeyAkcmVmOiB0aGlzLmdldENoZW1lUmVmTmFtZShjbGFzc0luZm8ucGFyZW50TmFtZSwgaXNSb290KSB9LFxuICAgICAgICAgICAgICAgIHsgcHJvcGVydGllczogY2hlbWFQcm9wcy5wcm9wZXJ0aWVzIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzLnByb3BlcnRpZXMgPSBjaGVtYVByb3BzLnByb3BlcnRpZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hlbWFQcm9wcy5yZXF1aXJlZCkpIHtcbiAgICAgICAgICAgIHJlcy5yZXF1aXJlZCA9IGNoZW1hUHJvcHMucmVxdWlyZWQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25NZXRhZGF0YS5wcm90b3R5cGUuZ2V0Q2hvaWNlc1ZhbHVlcyA9IGZ1bmN0aW9uIChlbnVtUmVzKSB7XG4gICAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgZW51bVJlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgaXRlbS52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICByZXR1cm4gSnNvbk1ldGFkYXRhO1xufSgpKTtcblxudmFyIEpzb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBKc29uRXJyb3IodHlwZSwgbWVzc2FnZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgdGhpcy5hdCA9IC0xO1xuICAgICAgICB0aGlzLmVuZCA9IC0xO1xuICAgIH1cbiAgICBKc29uRXJyb3IucHJvdG90eXBlLmdldEZ1bGxEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZSArICh0aGlzLmRlc2NyaXB0aW9uID8gXCJcXG5cIiArIHRoaXMuZGVzY3JpcHRpb24gOiBcIlwiKTtcbiAgICB9O1xuICAgIHJldHVybiBKc29uRXJyb3I7XG59KCkpO1xuXG52YXIgSnNvblVua25vd25Qcm9wZXJ0eUVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhKc29uVW5rbm93blByb3BlcnR5RXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSnNvblVua25vd25Qcm9wZXJ0eUVycm9yKHByb3BlcnR5TmFtZSwgY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwidW5rbm93bnByb3BlcnR5XCIsIFwiVW5rbm93biBwcm9wZXJ0eSBpbiBjbGFzcyAnXCIgKyBjbGFzc05hbWUgKyBcIic6ICdcIiArIHByb3BlcnR5TmFtZSArIFwiJy5cIikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lO1xuICAgICAgICBfdGhpcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEpzb25Vbmtub3duUHJvcGVydHlFcnJvcjtcbn0oSnNvbkVycm9yKSk7XG5cbnZhciBKc29uTWlzc2luZ1R5cGVFcnJvckJhc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEpzb25NaXNzaW5nVHlwZUVycm9yQmFzZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBKc29uTWlzc2luZ1R5cGVFcnJvckJhc2UoYmFzZUNsYXNzTmFtZSwgdHlwZSwgbWVzc2FnZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5iYXNlQ2xhc3NOYW1lID0gYmFzZUNsYXNzTmFtZTtcbiAgICAgICAgX3RoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBKc29uTWlzc2luZ1R5cGVFcnJvckJhc2U7XG59KEpzb25FcnJvcikpO1xuXG52YXIgSnNvbk1pc3NpbmdUeXBlRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEpzb25NaXNzaW5nVHlwZUVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEpzb25NaXNzaW5nVHlwZUVycm9yKHByb3BlcnR5TmFtZSwgYmFzZUNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlQ2xhc3NOYW1lLCBcIm1pc3Npbmd0eXBlcHJvcGVydHlcIiwgXCJUaGUgcHJvcGVydHkgdHlwZSBpcyBtaXNzaW5nIGluIHRoZSBvYmplY3QuIFBsZWFzZSB0YWtlIGEgbG9vayBhdCBwcm9wZXJ0eTogJ1wiICtcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZSArXG4gICAgICAgICAgICBcIicuXCIpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgX3RoaXMuYmFzZUNsYXNzTmFtZSA9IGJhc2VDbGFzc05hbWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEpzb25NaXNzaW5nVHlwZUVycm9yO1xufShKc29uTWlzc2luZ1R5cGVFcnJvckJhc2UpKTtcblxudmFyIEpzb25JbmNvcnJlY3RUeXBlRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEpzb25JbmNvcnJlY3RUeXBlRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSnNvbkluY29ycmVjdFR5cGVFcnJvcihwcm9wZXJ0eU5hbWUsIGJhc2VDbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYmFzZUNsYXNzTmFtZSwgXCJpbmNvcnJlY3R0eXBlcHJvcGVydHlcIiwgXCJUaGUgcHJvcGVydHkgdHlwZSBpcyBpbmNvcnJlY3QgaW4gdGhlIG9iamVjdC4gUGxlYXNlIHRha2UgYSBsb29rIGF0IHByb3BlcnR5OiAnXCIgK1xuICAgICAgICAgICAgcHJvcGVydHlOYW1lICtcbiAgICAgICAgICAgIFwiJy5cIikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lO1xuICAgICAgICBfdGhpcy5iYXNlQ2xhc3NOYW1lID0gYmFzZUNsYXNzTmFtZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gSnNvbkluY29ycmVjdFR5cGVFcnJvcjtcbn0oSnNvbk1pc3NpbmdUeXBlRXJyb3JCYXNlKSk7XG5cbnZhciBKc29uUmVxdWlyZWRQcm9wZXJ0eUVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhKc29uUmVxdWlyZWRQcm9wZXJ0eUVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEpzb25SZXF1aXJlZFByb3BlcnR5RXJyb3IocHJvcGVydHlOYW1lLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJyZXF1aXJlZHByb3BlcnR5XCIsIFwiVGhlIHByb3BlcnR5ICdcIiArXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWUgK1xuICAgICAgICAgICAgXCInIGlzIHJlcXVpcmVkIGluIGNsYXNzICdcIiArXG4gICAgICAgICAgICBjbGFzc05hbWUgK1xuICAgICAgICAgICAgXCInLlwiKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XG4gICAgICAgIF90aGlzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gSnNvblJlcXVpcmVkUHJvcGVydHlFcnJvcjtcbn0oSnNvbkVycm9yKSk7XG5cbnZhciBKc29uUmVxdWlyZWRBcnJheVByb3BlcnR5RXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEpzb25SZXF1aXJlZEFycmF5UHJvcGVydHlFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBKc29uUmVxdWlyZWRBcnJheVByb3BlcnR5RXJyb3IocHJvcGVydHlOYW1lLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJhcnJheXByb3BlcnR5XCIsIFwiVGhlIHByb3BlcnR5ICdcIiArIHByb3BlcnR5TmFtZSArIFwiJyBzaG91bGQgYmUgYW4gYXJyYXkgaW4gJ1wiICsgY2xhc3NOYW1lICsgXCInLlwiKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XG4gICAgICAgIF90aGlzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gSnNvblJlcXVpcmVkQXJyYXlQcm9wZXJ0eUVycm9yO1xufShKc29uRXJyb3IpKTtcblxudmFyIEpzb25JbmNvcnJlY3RQcm9wZXJ0eVZhbHVlRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEpzb25JbmNvcnJlY3RQcm9wZXJ0eVZhbHVlRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSnNvbkluY29ycmVjdFByb3BlcnR5VmFsdWVFcnJvcihwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJpbmNvcnJlY3R2YWx1ZVwiLCBcIlRoZSBwcm9wZXJ0eSB2YWx1ZTogJ1wiICsgdmFsdWUgKyBcIicgaXMgaW5jb3JyZWN0IGZvciBwcm9wZXJ0eSAnXCIgKyBwcm9wZXJ0eS5uYW1lICsgXCInLlwiKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcm9wZXJ0eSA9IHByb3BlcnR5O1xuICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBKc29uSW5jb3JyZWN0UHJvcGVydHlWYWx1ZUVycm9yO1xufShKc29uRXJyb3IpKTtcblxudmFyIEpzb25PYmplY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSnNvbk9iamVjdCgpIHtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5saWdodFNlcmlhbGl6aW5nID0gZmFsc2U7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShKc29uT2JqZWN0LCBcIm1ldGFEYXRhXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gSnNvbk9iamVjdC5tZXRhRGF0YVZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUudG9Kc29uT2JqZWN0ID0gZnVuY3Rpb24gKG9iaiwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy50b0pzb25PYmplY3RDb3JlKG9iaiwgbnVsbCwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBKc29uT2JqZWN0LnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uIChqc29uT2JqLCBvYmosIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy50b09iamVjdENvcmUoanNvbk9iaiwgb2JqLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIGVycm9yID0gdGhpcy5nZXRSZXF1aXJlZEVycm9yKG9iaiwganNvbk9iaik7XG4gICAgICAgIGlmICghIWVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE5ld0Vycm9yKGVycm9yLCBqc29uT2JqLCBvYmopO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBKc29uT2JqZWN0LnByb3RvdHlwZS50b09iamVjdENvcmUgPSBmdW5jdGlvbiAoanNvbk9iaiwgb2JqLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghanNvbk9iailcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBudWxsO1xuICAgICAgICB2YXIgb2JqVHlwZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIG5lZWRBZGRFcnJvcnMgPSB0cnVlO1xuICAgICAgICBpZiAob2JqLmdldFR5cGUpIHtcbiAgICAgICAgICAgIG9ialR5cGUgPSBvYmouZ2V0VHlwZSgpO1xuICAgICAgICAgICAgcHJvcGVydGllcyA9IFNlcmlhbGl6ZXIuZ2V0UHJvcGVydGllcyhvYmpUeXBlKTtcbiAgICAgICAgICAgIG5lZWRBZGRFcnJvcnMgPVxuICAgICAgICAgICAgICAgICEhb2JqVHlwZSAmJiAhU2VyaWFsaXplci5pc0Rlc2NlbmRhbnRPZihvYmpUeXBlLCBcIml0ZW12YWx1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByb3BlcnRpZXMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChvYmouc3RhcnRMb2FkaW5nRnJvbUpzb24pIHtcbiAgICAgICAgICAgIG9iai5zdGFydExvYWRpbmdGcm9tSnNvbihqc29uT2JqKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzID0gdGhpcy5hZGREeW5hbWljUHJvcGVydGllcyhvYmosIGpzb25PYmosIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4ganNvbk9iaikge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gSnNvbk9iamVjdC50eXBlUHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gSnNvbk9iamVjdC5wb3NpdGlvblByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgICAgIG9ialtrZXldID0ganNvbk9ialtrZXldO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5maW5kUHJvcGVydHkocHJvcGVydGllcywga2V5KTtcbiAgICAgICAgICAgIGlmICghcHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICBpZiAobmVlZEFkZEVycm9ycykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE5ld0Vycm9yKG5ldyBKc29uVW5rbm93blByb3BlcnR5RXJyb3Ioa2V5LnRvU3RyaW5nKCksIG9ialR5cGUpLCBqc29uT2JqLCBvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWVUb09iaihqc29uT2JqW2tleV0sIG9iaiwgcHJvcGVydHksIGpzb25PYmosIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG9iai5lbmRMb2FkaW5nRnJvbUpzb24pIHtcbiAgICAgICAgICAgIG9iai5lbmRMb2FkaW5nRnJvbUpzb24oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUudG9Kc29uT2JqZWN0Q29yZSA9IGZ1bmN0aW9uIChvYmosIHByb3BlcnR5LCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb2JqIHx8ICFvYmouZ2V0VHlwZSlcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqLmdldERhdGEgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0RGF0YSgpO1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGlmIChwcm9wZXJ0eSAhPSBudWxsICYmICFwcm9wZXJ0eS5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHJlc3VsdFtKc29uT2JqZWN0LnR5cGVQcm9wZXJ0eU5hbWVdID0gcHJvcGVydHkuZ2V0T2JqVHlwZShvYmouZ2V0VHlwZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RvcmVEZWZhdWx0cyA9IG9wdGlvbnMgPT09IHRydWU7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCBvcHRpb25zID09PSB0cnVlKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0b3JlRGVmYXVsdHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuc3RvcmVEZWZhdWx0cyA9IHN0b3JlRGVmYXVsdHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzVG9Kc29uKG9iaiwgU2VyaWFsaXplci5nZXRQcm9wZXJ0aWVzKG9iai5nZXRUeXBlKCkpLCByZXN1bHQsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXNUb0pzb24ob2JqLCB0aGlzLmdldER5bmFtaWNQcm9wZXJ0aWVzKG9iaiksIHJlc3VsdCwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBKc29uT2JqZWN0LnByb3RvdHlwZS5nZXREeW5hbWljUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6ZXIuZ2V0RHluYW1pY1Byb3BlcnRpZXNCeU9iaihvYmopO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUuYWRkRHluYW1pY1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAob2JqLCBqc29uT2JqLCBwcm9wcykge1xuICAgICAgICBpZiAoIW9iai5nZXREeW5hbWljUHJvcGVydHlOYW1lICYmICFvYmouZ2V0RHluYW1pY1Byb3BlcnRpZXMpXG4gICAgICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgICAgIGlmIChvYmouZ2V0RHluYW1pY1Byb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgdmFyIGR5bmFtaWNQcm9wTmFtZSA9IG9iai5nZXREeW5hbWljUHJvcGVydHlOYW1lKCk7XG4gICAgICAgICAgICBpZiAoIWR5bmFtaWNQcm9wTmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgICAgICAgICBpZiAoZHluYW1pY1Byb3BOYW1lICYmIGpzb25PYmpbZHluYW1pY1Byb3BOYW1lXSkge1xuICAgICAgICAgICAgICAgIG9ialtkeW5hbWljUHJvcE5hbWVdID0ganNvbk9ialtkeW5hbWljUHJvcE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBkeW5hbWljUHJvcHMgPSB0aGlzLmdldER5bmFtaWNQcm9wZXJ0aWVzKG9iaik7XG4gICAgICAgIHJldHVybiBkeW5hbWljUHJvcHMubGVuZ3RoID09PSAwID8gcHJvcHMgOiBbXS5jb25jYXQocHJvcHMpLmNvbmNhdChkeW5hbWljUHJvcHMpO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUucHJvcGVydGllc1RvSnNvbiA9IGZ1bmN0aW9uIChvYmosIHByb3BlcnRpZXMsIGpzb24sIG9wdGlvbnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlVG9Kc29uKG9iaiwganNvbiwgcHJvcGVydGllc1tpXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25PYmplY3QucHJvdG90eXBlLnZhbHVlVG9Kc29uID0gZnVuY3Rpb24gKG9iaiwgcmVzdWx0LCBwcm9wLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgaWYgKHByb3AuaXNTZXJpYWxpemFibGUgPT09IGZhbHNlIHx8IChwcm9wLmlzTGlnaHRTZXJpYWxpemFibGUgPT09IGZhbHNlICYmIHRoaXMubGlnaHRTZXJpYWxpemluZykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChvcHRpb25zLnZlcnNpb24gJiYgIXByb3AuaXNBdmFpbGFibGVJblZlcnNpb24ob3B0aW9ucy52ZXJzaW9uKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy52YWx1ZVRvSnNvbkNvcmUob2JqLCByZXN1bHQsIHByb3AsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUudmFsdWVUb0pzb25Db3JlID0gZnVuY3Rpb24gKG9iaiwgcmVzdWx0LCBwcm9wLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBzZXJQcm9wID0gcHJvcC5nZXRTZXJpYWxpemVkUHJvcGVydHkob2JqLCBvcHRpb25zLnZlcnNpb24pO1xuICAgICAgICBpZiAoc2VyUHJvcCAmJiBzZXJQcm9wICE9PSBwcm9wKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlVG9Kc29uQ29yZShvYmosIHJlc3VsdCwgc2VyUHJvcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbHVlID0gcHJvcC5nZXRTZXJpYWxpemFibGVWYWx1ZShvYmopO1xuICAgICAgICBpZiAoIW9wdGlvbnMuc3RvcmVEZWZhdWx0cyAmJiBwcm9wLmlzRGVmYXVsdFZhbHVlQnlPYmoob2JqLCB2YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmlzVmFsdWVBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciBhcnJWYWx1ZSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFyclZhbHVlLnB1c2godGhpcy50b0pzb25PYmplY3RDb3JlKHZhbHVlW2ldLCBwcm9wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IGFyclZhbHVlLmxlbmd0aCA+IDAgPyBhcnJWYWx1ZSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMudG9Kc29uT2JqZWN0Q29yZSh2YWx1ZSwgcHJvcCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBuYW1lID0gcHJvcC5nZXRTZXJpYWxpemVkTmFtZShvcHRpb25zLnZlcnNpb24pO1xuICAgICAgICB2YXIgaGFzVmFsdWUgPSB0eXBlb2Ygb2JqW1wiZ2V0UHJvcGVydHlWYWx1ZVwiXSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICBvYmpbXCJnZXRQcm9wZXJ0eVZhbHVlXCJdKG5hbWUsIG51bGwpICE9PSBudWxsO1xuICAgICAgICBpZiAoKG9wdGlvbnMuc3RvcmVEZWZhdWx0cyAmJiBoYXNWYWx1ZSkgfHwgIXByb3AuaXNEZWZhdWx0VmFsdWVCeU9iaihvYmosIHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKCFTZXJpYWxpemVyLm9uU2VyaWFsaXppbmdQcm9wZXJ0eSB8fCAhU2VyaWFsaXplci5vblNlcmlhbGl6aW5nUHJvcGVydHkob2JqLCBwcm9wLCB2YWx1ZSwgcmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IHRoaXMucmVtb3ZlUG9zT25WYWx1ZVRvSnNvbihwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25PYmplY3QucHJvdG90eXBlLnZhbHVlVG9PYmogPSBmdW5jdGlvbiAodmFsdWUsIG9iaiwgcHJvcGVydHksIGpzb25PYmosIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMucmVtb3ZlUG9zKHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgIGlmIChwcm9wZXJ0eSAhPSBudWxsICYmIHByb3BlcnR5Lmhhc1RvVXNlU2V0VmFsdWUpIHtcbiAgICAgICAgICAgIHByb3BlcnR5LnNldFZhbHVlKG9iaiwgdmFsdWUsIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eS5pc0FycmF5ICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiAhIXZhbHVlKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgICAgICAgICB2YXIgcHJvcE5hbWUgPSAhIWpzb25PYmogJiYgcHJvcGVydHkuYWx0ZXJuYXRpdmVOYW1lICYmICEhanNvbk9ialtwcm9wZXJ0eS5hbHRlcm5hdGl2ZU5hbWVdID8gcHJvcGVydHkuYWx0ZXJuYXRpdmVOYW1lIDogcHJvcGVydHkubmFtZTtcbiAgICAgICAgICAgIHRoaXMuYWRkTmV3RXJyb3IobmV3IEpzb25SZXF1aXJlZEFycmF5UHJvcGVydHlFcnJvcihwcm9wTmFtZSwgb2JqLmdldFR5cGUoKSksICEhanNvbk9iaiA/IGpzb25PYmogOiB2YWx1ZSwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1ZhbHVlQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlVG9BcnJheSh2YWx1ZSwgb2JqLCBwcm9wZXJ0eS5uYW1lLCBwcm9wZXJ0eSwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld09iaiA9IHRoaXMuY3JlYXRlTmV3T2JqKHZhbHVlLCBwcm9wZXJ0eSk7XG4gICAgICAgIGlmIChuZXdPYmoubmV3T2JqKSB7XG4gICAgICAgICAgICB0aGlzLnRvT2JqZWN0Q29yZSh2YWx1ZSwgbmV3T2JqLm5ld09iaiwgb3B0aW9ucyk7XG4gICAgICAgICAgICB2YWx1ZSA9IG5ld09iai5uZXdPYmo7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZXdPYmouZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydHkuc2V0VmFsdWUob2JqLCB2YWx1ZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCEhb3B0aW9ucyAmJiBvcHRpb25zLnZhbGlkYXRlUHJvcGVydHlWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9wZXJ0eS52YWxpZGF0ZVZhbHVlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGROZXdFcnJvcihuZXcgSnNvbkluY29ycmVjdFByb3BlcnR5VmFsdWVFcnJvcihwcm9wZXJ0eSwgdmFsdWUpLCBqc29uT2JqLCBvYmopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb2JqW3Byb3BlcnR5Lm5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25PYmplY3QucHJvdG90eXBlLnJlbW92ZVBvc09uVmFsdWVUb0pzb24gPSBmdW5jdGlvbiAocHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgIGlmICghcHJvcGVydHkuaXNDdXN0b20gfHwgIXZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB0aGlzLnJlbW92ZVBvc0Zyb21PYmoodmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBKc29uT2JqZWN0LnByb3RvdHlwZS5yZW1vdmVQb3MgPSBmdW5jdGlvbiAocHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgIGlmICghcHJvcGVydHkgfHwgIXByb3BlcnR5LnR5cGUgfHwgcHJvcGVydHkudHlwZS5pbmRleE9mKFwidmFsdWVcIikgPCAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnJlbW92ZVBvc0Zyb21PYmoodmFsdWUpO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUucmVtb3ZlUG9zRnJvbU9iaiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKCFvYmopXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQb3NGcm9tT2JqKG9ialtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghIW9ialtKc29uT2JqZWN0LnBvc2l0aW9uUHJvcGVydHlOYW1lXSkge1xuICAgICAgICAgICAgZGVsZXRlIG9ialtKc29uT2JqZWN0LnBvc2l0aW9uUHJvcGVydHlOYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVBvc0Zyb21PYmoob2JqW2tleV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBKc29uT2JqZWN0LnByb3RvdHlwZS5pc1ZhbHVlQXJyYXkgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICYmIEFycmF5LmlzQXJyYXkodmFsdWUpO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUuY3JlYXRlTmV3T2JqID0gZnVuY3Rpb24gKHZhbHVlLCBwcm9wZXJ0eSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0geyBuZXdPYmo6IG51bGwsIGVycm9yOiBudWxsIH07XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmdldENsYXNzTmFtZUZvck5ld09iaih2YWx1ZSwgcHJvcGVydHkpO1xuICAgICAgICByZXN1bHQubmV3T2JqID0gY2xhc3NOYW1lXG4gICAgICAgICAgICA/IFNlcmlhbGl6ZXIuY3JlYXRlQ2xhc3MoY2xhc3NOYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgcmVzdWx0LmVycm9yID0gdGhpcy5jaGVja05ld09iamVjdE9uRXJyb3JzKHJlc3VsdC5uZXdPYmosIHZhbHVlLCBwcm9wZXJ0eSwgY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEpzb25PYmplY3QucHJvdG90eXBlLmdldENsYXNzTmFtZUZvck5ld09iaiA9IGZ1bmN0aW9uICh2YWx1ZSwgcHJvcGVydHkpIHtcbiAgICAgICAgdmFyIHJlcyA9IHByb3BlcnR5ICE9IG51bGwgJiYgcHJvcGVydHkuY2xhc3NOYW1lID8gcHJvcGVydHkuY2xhc3NOYW1lIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIXJlcykge1xuICAgICAgICAgICAgcmVzID0gdmFsdWVbSnNvbk9iamVjdC50eXBlUHJvcGVydHlOYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlcylcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIHJlcyA9IHJlcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgY2xhc3NOYW1lUGFydCA9IHByb3BlcnR5LmNsYXNzTmFtZVBhcnQ7XG4gICAgICAgIGlmIChjbGFzc05hbWVQYXJ0ICYmIHJlcy5pbmRleE9mKGNsYXNzTmFtZVBhcnQpIDwgMCkge1xuICAgICAgICAgICAgcmVzICs9IGNsYXNzTmFtZVBhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIEpzb25PYmplY3QucHJvdG90eXBlLmNoZWNrTmV3T2JqZWN0T25FcnJvcnMgPSBmdW5jdGlvbiAobmV3T2JqLCB2YWx1ZSwgcHJvcGVydHksIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgZXJyb3IgPSBudWxsO1xuICAgICAgICBpZiAobmV3T2JqKSB7XG4gICAgICAgICAgICBlcnJvciA9IHRoaXMuZ2V0UmVxdWlyZWRFcnJvcihuZXdPYmosIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eS5iYXNlQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgSnNvbk1pc3NpbmdUeXBlRXJyb3IocHJvcGVydHkubmFtZSwgcHJvcGVydHkuYmFzZUNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBKc29uSW5jb3JyZWN0VHlwZUVycm9yKHByb3BlcnR5Lm5hbWUsIHByb3BlcnR5LmJhc2VDbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkTmV3RXJyb3IoZXJyb3IsIHZhbHVlLCBuZXdPYmopO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9O1xuICAgIEpzb25PYmplY3QucHJvdG90eXBlLmdldFJlcXVpcmVkRXJyb3IgPSBmdW5jdGlvbiAob2JqLCBqc29uVmFsdWUpIHtcbiAgICAgICAgaWYgKCFvYmouZ2V0VHlwZSB8fCB0eXBlb2Ygb2JqLmdldERhdGEgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgbWV0YUNsYXNzID0gU2VyaWFsaXplci5maW5kQ2xhc3Mob2JqLmdldFR5cGUoKSk7XG4gICAgICAgIGlmICghbWV0YUNsYXNzKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBwcm9wcyA9IG1ldGFDbGFzcy5nZXRSZXF1aXJlZFByb3BlcnRpZXMoKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHByb3BzKSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgICAgICAgaWYgKCFfaGVscGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiSGVscGVyc1wiXS5pc1ZhbHVlRW1wdHkocHJvcC5kZWZhdWx0VmFsdWUpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKCFqc29uVmFsdWVbcHJvcC5uYW1lXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSnNvblJlcXVpcmVkUHJvcGVydHlFcnJvcihwcm9wLm5hbWUsIG9iai5nZXRUeXBlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUuYWRkTmV3RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGpzb25PYmosIGVsZW1lbnQpIHtcbiAgICAgICAgZXJyb3IuanNvbk9iaiA9IGpzb25PYmo7XG4gICAgICAgIGVycm9yLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgaWYgKCFqc29uT2JqKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgcG9zT2JqID0ganNvbk9ialtKc29uT2JqZWN0LnBvc2l0aW9uUHJvcGVydHlOYW1lXTtcbiAgICAgICAgaWYgKCFwb3NPYmopXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGVycm9yLmF0ID0gcG9zT2JqLnN0YXJ0O1xuICAgICAgICBlcnJvci5lbmQgPSBwb3NPYmouZW5kO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUudmFsdWVUb0FycmF5ID0gZnVuY3Rpb24gKHZhbHVlLCBvYmosIGtleSwgcHJvcGVydHksIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9ialtrZXldICYmICF0aGlzLmlzVmFsdWVBcnJheShvYmpba2V5XSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChvYmpba2V5XSAmJiB2YWx1ZS5sZW5ndGggPiAwKVxuICAgICAgICAgICAgb2JqW2tleV0uc3BsaWNlKDAsIG9ialtrZXldLmxlbmd0aCk7XG4gICAgICAgIHZhciB2YWx1ZVJlcyA9IG9ialtrZXldID8gb2JqW2tleV0gOiBbXTtcbiAgICAgICAgdGhpcy5hZGRWYWx1ZXNJbnRvQXJyYXkodmFsdWUsIHZhbHVlUmVzLCBwcm9wZXJ0eSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghb2JqW2tleV0pXG4gICAgICAgICAgICBvYmpba2V5XSA9IHZhbHVlUmVzO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC5wcm90b3R5cGUuYWRkVmFsdWVzSW50b0FycmF5ID0gZnVuY3Rpb24gKHZhbHVlLCByZXN1bHQsIHByb3BlcnR5LCBvcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHRoaXMuY3JlYXRlTmV3T2JqKHZhbHVlW2ldLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUubmV3T2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdmFsdWVbaV0ubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZS5uZXdPYmoubmFtZSA9IHZhbHVlW2ldLm5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghIXZhbHVlW2ldLnZhbHVlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZS5uZXdPYmoudmFsdWVOYW1lID0gdmFsdWVbaV0udmFsdWVOYW1lLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ld1ZhbHVlLm5ld09iaik7XG4gICAgICAgICAgICAgICAgdGhpcy50b09iamVjdENvcmUodmFsdWVbaV0sIG5ld1ZhbHVlLm5ld09iaiwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5ld1ZhbHVlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEpzb25PYmplY3QucHJvdG90eXBlLmZpbmRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzLCBrZXkpIHtcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb3AgPSBwcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgaWYgKHByb3AubmFtZSA9PSBrZXkgfHwgcHJvcC5hbHRlcm5hdGl2ZU5hbWUgPT0ga2V5KVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgSnNvbk9iamVjdC50eXBlUHJvcGVydHlOYW1lID0gXCJ0eXBlXCI7XG4gICAgSnNvbk9iamVjdC5wb3NpdGlvblByb3BlcnR5TmFtZSA9IFwicG9zXCI7XG4gICAgSnNvbk9iamVjdC5tZXRhRGF0YVZhbHVlID0gbmV3IEpzb25NZXRhZGF0YSgpO1xuICAgIHJldHVybiBKc29uT2JqZWN0O1xufSgpKTtcblxuLyoqXG4gKiBBbiBhbGlhcyBmb3IgdGhlIG1ldGFkYXRhIG9iamVjdC4gSXQgY29udGFpbnMgb2JqZWN0IHByb3BlcnRpZXMnIHJ1bnRpbWUgaW5mb3JtYXRpb24gYW5kIGFsbG93cyB5b3UgdG8gbW9kaWZ5IGl0LlxuICogQHNlZSBKc29uTWV0YWRhdGFcbiAqL1xudmFyIFNlcmlhbGl6ZXIgPSBKc29uT2JqZWN0Lm1ldGFEYXRhO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2xpc3QudHNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9saXN0LnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdExpc3RDc3MsIExpc3RNb2RlbCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkZWZhdWx0TGlzdENzc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRlZmF1bHRMaXN0Q3NzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJMaXN0TW9kZWxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBMaXN0TW9kZWw7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2pzb25vYmplY3QgKi8gXCIuL3NyYy9qc29ub2JqZWN0LnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hY3Rpb25zX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY3Rpb25zL2NvbnRhaW5lciAqLyBcIi4vc3JjL2FjdGlvbnMvY29udGFpbmVyLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hY3Rpb25zX2FjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY3Rpb25zL2FjdGlvbiAqLyBcIi4vc3JjL2FjdGlvbnMvYWN0aW9uLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc19jc3NDbGFzc0J1aWxkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMvY3NzQ2xhc3NCdWlsZGVyICovIFwiLi9zcmMvdXRpbHMvY3NzQ2xhc3NCdWlsZGVyLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2hlbHBlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWhlbHBlciAqLyBcIi4vc3JjL2VsZW1lbnQtaGVscGVyLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91dGlscy91dGlscyAqLyBcIi4vc3JjL3V0aWxzL3V0aWxzLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zZXR0aW5ncyAqLyBcIi4vc3JjL3NldHRpbmdzLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuXG5cblxuXG5cblxuXG52YXIgZGVmYXVsdExpc3RDc3MgPSB7XG4gICAgcm9vdDogXCJzdi1saXN0X19jb250YWluZXJcIixcbiAgICBpdGVtOiBcInN2LWxpc3RfX2l0ZW1cIixcbiAgICBzZWFyY2hDbGVhckJ1dHRvbkljb246IFwic3YtbGlzdF9fZmlsdGVyLWNsZWFyLWJ1dHRvblwiLFxuICAgIGxvYWRpbmdJbmRpY2F0b3I6IFwic3YtbGlzdF9fbG9hZGluZy1pbmRpY2F0b3JcIixcbiAgICBpdGVtU2VsZWN0ZWQ6IFwic3YtbGlzdF9faXRlbS0tc2VsZWN0ZWRcIixcbiAgICBpdGVtV2l0aEljb246IFwic3YtbGlzdF9faXRlbS0td2l0aC1pY29uXCIsXG4gICAgaXRlbURpc2FibGVkOiBcInN2LWxpc3RfX2l0ZW0tLWRpc2FibGVkXCIsXG4gICAgaXRlbUZvY3VzZWQ6IFwic3YtbGlzdF9faXRlbS0tZm9jdXNlZFwiLFxuICAgIGl0ZW1UZXh0V3JhcDogXCJzdi1saXN0X19pdGVtLXRleHQtLXdyYXBcIixcbiAgICBpdGVtSWNvbjogXCJzdi1saXN0X19pdGVtLWljb25cIixcbiAgICBpdGVtU2VwYXJhdG9yOiBcInN2LWxpc3RfX2l0ZW0tc2VwYXJhdG9yXCIsXG4gICAgaXRlbUJvZHk6IFwic3YtbGlzdF9faXRlbS1ib2R5XCIsXG4gICAgaXRlbXNDb250YWluZXI6IFwic3YtbGlzdFwiLFxuICAgIGl0ZW1zQ29udGFpbmVyRmlsdGVyaW5nOiBcInN2LWxpc3QtLWZpbHRlcmluZ1wiLFxuICAgIGZpbHRlcjogXCJzdi1saXN0X19maWx0ZXJcIixcbiAgICBmaWx0ZXJJY29uOiBcInN2LWxpc3RfX2ZpbHRlci1pY29uXCIsXG4gICAgZmlsdGVySW5wdXQ6IFwic3YtbGlzdF9faW5wdXRcIixcbiAgICBlbXB0eUNvbnRhaW5lcjogXCJzdi1saXN0X19lbXB0eS1jb250YWluZXJcIixcbiAgICBlbXB0eVRleHQ6IFwic3YtbGlzdF9fZW1wdHktdGV4dFwiXG59O1xudmFyIExpc3RNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGlzdE1vZGVsLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExpc3RNb2RlbChpdGVtcywgb25TZWxlY3Rpb25DaGFuZ2VkLCBhbGxvd1NlbGVjdGlvbiwgc2VsZWN0ZWRJdGVtLCBvbkZpbHRlclN0cmluZ0NoYW5nZWRDYWxsYmFjaywgZWxlbWVudElkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9uU2VsZWN0aW9uQ2hhbmdlZCA9IG9uU2VsZWN0aW9uQ2hhbmdlZDtcbiAgICAgICAgX3RoaXMuYWxsb3dTZWxlY3Rpb24gPSBhbGxvd1NlbGVjdGlvbjtcbiAgICAgICAgX3RoaXMub25GaWx0ZXJTdHJpbmdDaGFuZ2VkQ2FsbGJhY2sgPSBvbkZpbHRlclN0cmluZ0NoYW5nZWRDYWxsYmFjaztcbiAgICAgICAgX3RoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuICAgICAgICBfdGhpcy5vbkl0ZW1DbGljayA9IGZ1bmN0aW9uIChpdGVtVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0l0ZW1EaXNhYmxlZChpdGVtVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuaXNFeHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKF90aGlzLmFsbG93U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhX3RoaXMub25TZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25TZWxlY3Rpb25DaGFuZ2VkKGl0ZW1WYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmlzSXRlbURpc2FibGVkID0gZnVuY3Rpb24gKGl0ZW1WYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW1WYWx1ZS5lbmFibGVkICE9PSB1bmRlZmluZWQgJiYgIWl0ZW1WYWx1ZS5lbmFibGVkO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5pc0l0ZW1TZWxlY3RlZCA9IGZ1bmN0aW9uIChpdGVtVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5hcmVTYW1lSXRlbXMoX3RoaXMuc2VsZWN0ZWRJdGVtLCBpdGVtVmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5pc0l0ZW1Gb2N1c2VkID0gZnVuY3Rpb24gKGl0ZW1WYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFyZVNhbWVJdGVtcyhfdGhpcy5mb2N1c2VkSXRlbSwgaXRlbVZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuZ2V0TGlzdENsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfdXRpbHNfY3NzQ2xhc3NCdWlsZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJDc3NDbGFzc0J1aWxkZXJcIl0oKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoX3RoaXMuY3NzQ2xhc3Nlcy5pdGVtc0NvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuYXBwZW5kKF90aGlzLmNzc0NsYXNzZXMuaXRlbXNDb250YWluZXJGaWx0ZXJpbmcsICEhX3RoaXMuZmlsdGVyU3RyaW5nICYmIF90aGlzLnZpc2libGVBY3Rpb25zLmxlbmd0aCAhPT0gX3RoaXMudmlzaWJsZUl0ZW1zLmxlbmd0aClcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuZ2V0SXRlbUNsYXNzID0gZnVuY3Rpb24gKGl0ZW1WYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfdXRpbHNfY3NzQ2xhc3NCdWlsZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJDc3NDbGFzc0J1aWxkZXJcIl0oKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoX3RoaXMuY3NzQ2xhc3Nlcy5pdGVtKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoX3RoaXMuY3NzQ2xhc3Nlcy5pdGVtV2l0aEljb24sICEhaXRlbVZhbHVlLmljb25OYW1lKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoX3RoaXMuY3NzQ2xhc3Nlcy5pdGVtRGlzYWJsZWQsIF90aGlzLmlzSXRlbURpc2FibGVkKGl0ZW1WYWx1ZSkpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChfdGhpcy5jc3NDbGFzc2VzLml0ZW1Gb2N1c2VkLCBfdGhpcy5pc0l0ZW1Gb2N1c2VkKGl0ZW1WYWx1ZSkpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChfdGhpcy5jc3NDbGFzc2VzLml0ZW1TZWxlY3RlZCwgX3RoaXMuaXNJdGVtU2VsZWN0ZWQoaXRlbVZhbHVlKSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKF90aGlzLmNzc0NsYXNzZXMuaXRlbVRleHRXcmFwLCBfdGhpcy50ZXh0V3JhcEVuYWJsZWQpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChpdGVtVmFsdWUuY3NzKVxuICAgICAgICAgICAgICAgIC50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5nZXRJdGVtSW5kZW50ID0gZnVuY3Rpb24gKGl0ZW1WYWx1ZSkge1xuICAgICAgICAgICAgdmFyIGxldmVsID0gaXRlbVZhbHVlLmxldmVsIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4gKGxldmVsICsgMSkgKiBMaXN0TW9kZWwuSU5ERU5UICsgXCJweFwiO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5zZXRJdGVtcyhpdGVtcyk7XG4gICAgICAgIF90aGlzLnNlbGVjdGVkSXRlbSA9IHNlbGVjdGVkSXRlbTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLmhhc1RleHQgPSBmdW5jdGlvbiAoaXRlbSwgZmlsdGVyU3RyaW5nSW5Mb3cpIHtcbiAgICAgICAgaWYgKCFmaWx0ZXJTdHJpbmdJbkxvdylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB2YXIgdGV4dCA9IGl0ZW0udGl0bGUgfHwgXCJcIjtcbiAgICAgICAgaWYgKHRoaXMub25UZXh0U2VhcmNoQ2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblRleHRTZWFyY2hDYWxsYmFjayhpdGVtLCBmaWx0ZXJTdHJpbmdJbkxvdyk7XG4gICAgICAgIHZhciB0ZXh0SW5Mb3cgPSB0ZXh0LnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIHRleHRJbkxvdyA9IF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wic2V0dGluZ3NcIl0uY29tcGFyYXRvci5ub3JtYWxpemVUZXh0Q2FsbGJhY2sodGV4dEluTG93LCBcImZpbHRlclwiKTtcbiAgICAgICAgcmV0dXJuIHRleHRJbkxvdy5pbmRleE9mKGZpbHRlclN0cmluZ0luTG93LnRvTG9jYWxlTG93ZXJDYXNlKCkpID4gLTE7XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLmlzSXRlbVZpc2libGUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS52aXNpYmxlICYmICghdGhpcy5zaG91bGRQcm9jZXNzRmlsdGVyIHx8IHRoaXMuaGFzVGV4dChpdGVtLCB0aGlzLmZpbHRlclN0cmluZykpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpc3RNb2RlbC5wcm90b3R5cGUsIFwidmlzaWJsZUl0ZW1zXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZUFjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBfdGhpcy5pc0l0ZW1WaXNpYmxlKGl0ZW0pOyB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaXN0TW9kZWwucHJvdG90eXBlLCBcInNob3VsZFByb2Nlc3NGaWx0ZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5vbkZpbHRlclN0cmluZ0NoYW5nZWRDYWxsYmFjaztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIExpc3RNb2RlbC5wcm90b3R5cGUub25GaWx0ZXJTdHJpbmdDaGFuZ2VkID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCEhdGhpcy5vbkZpbHRlclN0cmluZ0NoYW5nZWRDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5vbkZpbHRlclN0cmluZ0NoYW5nZWRDYWxsYmFjayh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzRW1wdHkgPSB0aGlzLnJlbmRlcmVkQWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gX3RoaXMuaXNJdGVtVmlzaWJsZShhY3Rpb24pOyB9KS5sZW5ndGggPT09IDA7XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLnNjcm9sbFRvSXRlbSA9IGZ1bmN0aW9uIChzZWxlY3RvciwgbXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG1zID09PSB2b2lkIDApIHsgbXMgPSAwOyB9XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5saXN0Q29udGFpbmVySHRtbEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBfdGhpcy5saXN0Q29udGFpbmVySHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5cIiArIHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwibmVhcmVzdFwiLCBpbmxpbmU6IFwic3RhcnRcIiB9KTtcbiAgICAgICAgICAgICAgICB9LCBtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIG1zKTtcbiAgICB9O1xuICAgIExpc3RNb2RlbC5wcm90b3R5cGUuc2V0T25GaWx0ZXJTdHJpbmdDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vbkZpbHRlclN0cmluZ0NoYW5nZWRDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5zZXRPblRleHRTZWFyY2hDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9uVGV4dFNlYXJjaENhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLnNldEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBzb3J0QnlWaXNpYmxlSW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHNvcnRCeVZpc2libGVJbmRleCA9PT0gdm9pZCAwKSB7IHNvcnRCeVZpc2libGVJbmRleCA9IHRydWU7IH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zZXRJdGVtcy5jYWxsKHRoaXMsIGl0ZW1zLCBzb3J0QnlWaXNpYmxlSW5kZXgpO1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50SWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRBY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikgeyBhY3Rpb24uZWxlbWVudElkID0gX3RoaXMuZWxlbWVudElkICsgYWN0aW9uLmlkOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNBbGxEYXRhTG9hZGVkICYmICEhdGhpcy5hY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25zLnB1c2godGhpcy5sb2FkaW5nSW5kaWNhdG9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5vblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zaG93RmlsdGVyID0gdGhpcy5zZWFyY2hFbmFibGVkICYmICh0aGlzLmZvcmNlU2hvd0ZpbHRlciB8fCAodGhpcy5hY3Rpb25zIHx8IFtdKS5sZW5ndGggPiBMaXN0TW9kZWwuTUlORUxFTUVOVENPVU5UKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vblNldC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5nZXREZWZhdWx0Q3NzQ2xhc3NlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRMaXN0Q3NzO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5hcmVTYW1lSXRlbXMgPSBmdW5jdGlvbiAoaXRlbTEsIGl0ZW0yKSB7XG4gICAgICAgIGlmICghIXRoaXMuYXJlU2FtZUl0ZW1zQ2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcmVTYW1lSXRlbXNDYWxsYmFjayhpdGVtMSwgaXRlbTIpO1xuICAgICAgICByZXR1cm4gISFpdGVtMSAmJiAhIWl0ZW0yICYmIGl0ZW0xLmlkID09IGl0ZW0yLmlkO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpc3RNb2RlbC5wcm90b3R5cGUsIFwiZmlsdGVyU3RyaW5nUGxhY2Vob2xkZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExvY2FsaXphdGlvblN0cmluZyhcImZpbHRlclN0cmluZ1BsYWNlaG9sZGVyXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpc3RNb2RlbC5wcm90b3R5cGUsIFwiZW1wdHlNZXNzYWdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0FsbERhdGFMb2FkZWQgPyB0aGlzLmdldExvY2FsaXphdGlvblN0cmluZyhcImVtcHR5TWVzc2FnZVwiKSA6IHRoaXMubG9hZGluZ1RleHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdE1vZGVsLnByb3RvdHlwZSwgXCJzY3JvbGxhYmxlQ29udGFpbmVyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0Q29udGFpbmVySHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5cIiArIHRoaXMuZ2V0RGVmYXVsdENzc0NsYXNzZXMoKS5pdGVtc0NvbnRhaW5lcik7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdE1vZGVsLnByb3RvdHlwZSwgXCJsb2FkaW5nVGV4dFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9jYWxpemF0aW9uU3RyaW5nKFwibG9hZGluZ0ZpbGVcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdE1vZGVsLnByb3RvdHlwZSwgXCJsb2FkaW5nSW5kaWNhdG9yXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubG9hZGluZ0luZGljYXRvclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yVmFsdWUgPSAobmV3IF9hY3Rpb25zX2FjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiQWN0aW9uXCJdKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwibG9hZGluZ0luZGljYXRvclwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5sb2FkaW5nVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7IH0sXG4gICAgICAgICAgICAgICAgICAgIGNzczogdGhpcy5jc3NDbGFzc2VzLmxvYWRpbmdJbmRpY2F0b3JcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkaW5nSW5kaWNhdG9yVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLmdvVG9JdGVtcyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93RG93blwiIHx8IGV2ZW50LmtleUNvZGUgPT09IDQwKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBsaXN0RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcInVsXCIpO1xuICAgICAgICAgICAgdmFyIGZpcnN0Q2hpbGQgPSBPYmplY3QoX3V0aWxzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJnZXRGaXJzdFZpc2libGVDaGlsZFwiXSkobGlzdEVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCEhbGlzdEVsZW1lbnQgJiYgISFmaXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgX2VsZW1lbnRfaGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJFbGVtZW50SGVscGVyXCJdLmZvY3VzRWxlbWVudChmaXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucmVzZXRGb2N1c2VkSXRlbSgpO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5vbktleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93RG93blwiIHx8IGV2ZW50LmtleUNvZGUgPT09IDQwKSB7XG4gICAgICAgICAgICBfZWxlbWVudF9oZWxwZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIkVsZW1lbnRIZWxwZXJcIl0uZm9jdXNFbGVtZW50KF9lbGVtZW50X2hlbHBlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiRWxlbWVudEhlbHBlclwiXS5nZXROZXh0RWxlbWVudFByZW9yZGVyKGN1cnJlbnRFbGVtZW50KSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd1VwXCIgfHwgZXZlbnQua2V5Q29kZSA9PT0gMzgpIHtcbiAgICAgICAgICAgIF9lbGVtZW50X2hlbHBlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiRWxlbWVudEhlbHBlclwiXS5mb2N1c0VsZW1lbnQoX2VsZW1lbnRfaGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJFbGVtZW50SGVscGVyXCJdLmdldE5leHRFbGVtZW50UG9zdG9yZGVyKGN1cnJlbnRFbGVtZW50KSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLm9uUG9pbnRlckRvd24gPSBmdW5jdGlvbiAoZXZlbnQsIGl0ZW0pIHsgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyU3RyaW5nID0gXCJcIjtcbiAgICAgICAgdGhpcy5yZXNldEZvY3VzZWRJdGVtKCk7XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLm9uQ2xpY2tTZWFyY2hDbGVhckJ1dHRvbiA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLmZvY3VzKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5yZXNldEZvY3VzZWRJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5mb2N1c0ZpcnN0VmlzaWJsZUl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSB0aGlzLnZpc2libGVJdGVtc1swXTtcbiAgICB9O1xuICAgIExpc3RNb2RlbC5wcm90b3R5cGUuZm9jdXNMYXN0VmlzaWJsZUl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSB0aGlzLnZpc2libGVJdGVtc1t0aGlzLnZpc2libGVJdGVtcy5sZW5ndGggLSAxXTtcbiAgICB9O1xuICAgIExpc3RNb2RlbC5wcm90b3R5cGUuaW5pdEZvY3VzZWRJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gdGhpcy52aXNpYmxlSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLnZpc2libGUgJiYgX3RoaXMuaXNJdGVtU2VsZWN0ZWQoaXRlbSk7IH0pWzBdO1xuICAgICAgICBpZiAoIXRoaXMuZm9jdXNlZEl0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNGaXJzdFZpc2libGVJdGVtKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExpc3RNb2RlbC5wcm90b3R5cGUuZm9jdXNOZXh0VmlzaWJsZUl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5mb2N1c2VkSXRlbSkge1xuICAgICAgICAgICAgdGhpcy5pbml0Rm9jdXNlZEl0ZW0oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMudmlzaWJsZUl0ZW1zO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGb2N1c2VkSXRlbUluZGV4ID0gaXRlbXMuaW5kZXhPZih0aGlzLmZvY3VzZWRJdGVtKTtcbiAgICAgICAgICAgIHZhciBuZXh0SXRlbSA9IGl0ZW1zW2N1cnJlbnRGb2N1c2VkSXRlbUluZGV4ICsgMV07XG4gICAgICAgICAgICBpZiAobmV4dEl0ZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gbmV4dEl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzRmlyc3RWaXNpYmxlSXRlbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLmZvY3VzUHJldlZpc2libGVJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZm9jdXNlZEl0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdEZvY3VzZWRJdGVtKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnZpc2libGVJdGVtcztcbiAgICAgICAgICAgIHZhciBjdXJyZW50Rm9jdXNlZEl0ZW1JbmRleCA9IGl0ZW1zLmluZGV4T2YodGhpcy5mb2N1c2VkSXRlbSk7XG4gICAgICAgICAgICB2YXIgcHJldkl0ZW0gPSBpdGVtc1tjdXJyZW50Rm9jdXNlZEl0ZW1JbmRleCAtIDFdO1xuICAgICAgICAgICAgaWYgKHByZXZJdGVtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IHByZXZJdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0xhc3RWaXNpYmxlSXRlbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLnNlbGVjdEZvY3VzZWRJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAhIXRoaXMuZm9jdXNlZEl0ZW0gJiYgdGhpcy5vbkl0ZW1DbGljayh0aGlzLmZvY3VzZWRJdGVtKTtcbiAgICB9O1xuICAgIExpc3RNb2RlbC5wcm90b3R5cGUuaW5pdExpc3RDb250YWluZXJIdG1sRWxlbWVudCA9IGZ1bmN0aW9uIChodG1sRWxlbWVudCkge1xuICAgICAgICB0aGlzLmxpc3RDb250YWluZXJIdG1sRWxlbWVudCA9IGh0bWxFbGVtZW50O1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5vbkxhc3RJdGVtUmVuZGVkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBbGxEYXRhTG9hZGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoaXRlbSA9PT0gdGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGggLSAxXSAmJiAhIXRoaXMubGlzdENvbnRhaW5lckh0bWxFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsZXIgPSBfZWxlbWVudF9oZWxwZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIkVsZW1lbnRIZWxwZXJcIl0uaGFzVmVydGljYWxTY3JvbGxlcih0aGlzLnNjcm9sbGFibGVDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLnNjcm9sbFRvRm9jdXNlZEl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JdGVtKHRoaXMuZ2V0RGVmYXVsdENzc0NsYXNzZXMoKS5pdGVtRm9jdXNlZCk7XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLnNjcm9sbFRvU2VsZWN0ZWRJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjcm9sbFRvSXRlbSh0aGlzLmdldERlZmF1bHRDc3NDbGFzc2VzKCkuaXRlbVNlbGVjdGVkLCAxMTApO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLnByb3RvdHlwZS5hZGRTY3JvbGxFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKCEhaGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLnNjcm9sbEhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYWJsZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExpc3RNb2RlbC5wcm90b3R5cGUucmVtb3ZlU2Nyb2xsRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5zY3JvbGxIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGFibGVDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMaXN0TW9kZWwucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoISF0aGlzLmxvYWRpbmdJbmRpY2F0b3JWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yVmFsdWUuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdENvbnRhaW5lckh0bWxFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgTGlzdE1vZGVsLklOREVOVCA9IDE2O1xuICAgIExpc3RNb2RlbC5NSU5FTEVNRU5UQ09VTlQgPSAxMDtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoe1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgb25TZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lm9uU2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgXSwgTGlzdE1vZGVsLnByb3RvdHlwZSwgXCJzZWFyY2hFbmFibGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBmYWxzZSB9KVxuICAgIF0sIExpc3RNb2RlbC5wcm90b3R5cGUsIFwic2hvd0ZpbHRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogZmFsc2UgfSlcbiAgICBdLCBMaXN0TW9kZWwucHJvdG90eXBlLCBcImZvcmNlU2hvd0ZpbHRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogZmFsc2UgfSlcbiAgICBdLCBMaXN0TW9kZWwucHJvdG90eXBlLCBcImlzRXhwYW5kZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoe30pXG4gICAgXSwgTGlzdE1vZGVsLnByb3RvdHlwZSwgXCJzZWxlY3RlZEl0ZW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoKVxuICAgIF0sIExpc3RNb2RlbC5wcm90b3R5cGUsIFwiZm9jdXNlZEl0ZW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoe1xuICAgICAgICAgICAgb25TZXQ6IGZ1bmN0aW9uIChfLCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQub25GaWx0ZXJTdHJpbmdDaGFuZ2VkKHRhcmdldC5maWx0ZXJTdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIF0sIExpc3RNb2RlbC5wcm90b3R5cGUsIFwiZmlsdGVyU3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBmYWxzZSB9KVxuICAgIF0sIExpc3RNb2RlbC5wcm90b3R5cGUsIFwiaGFzVmVydGljYWxTY3JvbGxlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogdHJ1ZSB9KVxuICAgIF0sIExpc3RNb2RlbC5wcm90b3R5cGUsIFwiaXNBbGxEYXRhTG9hZGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBmYWxzZSB9KVxuICAgIF0sIExpc3RNb2RlbC5wcm90b3R5cGUsIFwic2hvd1NlYXJjaENsZWFyQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiB0cnVlIH0pXG4gICAgXSwgTGlzdE1vZGVsLnByb3RvdHlwZSwgXCJyZW5kZXJFbGVtZW50c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogZmFsc2UgfSlcbiAgICBdLCBMaXN0TW9kZWwucHJvdG90eXBlLCBcInRleHRXcmFwRW5hYmxlZFwiLCB2b2lkIDApO1xuICAgIHJldHVybiBMaXN0TW9kZWw7XG59KF9hY3Rpb25zX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiQWN0aW9uQ29udGFpbmVyXCJdKSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9sb2NhbGl6YWJsZXN0cmluZy50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9sb2NhbGl6YWJsZXN0cmluZy50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBMb2NhbGl6YWJsZVN0cmluZywgTG9jYWxpemFibGVTdHJpbmdzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxvY2FsaXphYmxlU3RyaW5nXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gTG9jYWxpemFibGVTdHJpbmc7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxvY2FsaXphYmxlU3RyaW5nc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIExvY2FsaXphYmxlU3RyaW5nczsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaGVscGVycyAqLyBcIi4vc3JjL2hlbHBlcnMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N1cnZleVN0cmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3VydmV5U3RyaW5ncyAqLyBcIi4vc3JjL3N1cnZleVN0cmluZ3MudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NldHRpbmdzICovIFwiLi9zcmMvc2V0dGluZ3MudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYmFzZSAqLyBcIi4vc3JjL2Jhc2UudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vanNvbm9iamVjdCAqLyBcIi4vc3JjL2pzb25vYmplY3QudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N1cnZleV9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3N1cnZleS1lbGVtZW50ICovIFwiLi9zcmMvc3VydmV5LWVsZW1lbnQudHNcIik7XG5cblxuXG5cblxuXG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRzIHRoZSBzdHJpbmcgdGhhdCBzdXBwb3J0cyBtdWx0aS1sYW5ndWFnZXMgYW5kIG1hcmtkb3duLlxuICogSXQgdXNlcyBpbiBhbGwgb2JqZWN0cyB3aGVyZSBzdXBwb3J0IGZvciBtdWx0aS1sYW5ndWFnZXMgYW5kIG1hcmtkb3duIGlzIHJlcXVpcmVkLlxuICovXG52YXIgTG9jYWxpemFibGVTdHJpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTG9jYWxpemFibGVTdHJpbmcob3duZXIsIHVzZU1hcmtkb3duLCBuYW1lKSB7XG4gICAgICAgIGlmICh1c2VNYXJrZG93biA9PT0gdm9pZCAwKSB7IHVzZU1hcmtkb3duID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgICAgIHRoaXMudXNlTWFya2Rvd24gPSB1c2VNYXJrZG93bjtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5odG1sVmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2FsbG93TGluZUJyZWFrcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uU3RyaW5nQ2hhbmdlZCA9IG5ldyBfYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiRXZlbnRCYXNlXCJdKCk7XG4gICAgICAgIGlmIChvd25lciBpbnN0YW5jZW9mIF9zdXJ2ZXlfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiU3VydmV5RWxlbWVudENvcmVcIl0pIHtcbiAgICAgICAgICAgIHRoaXMuX2FsbG93TGluZUJyZWFrcyA9ICgoX2EgPSBfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU2VyaWFsaXplclwiXS5maW5kUHJvcGVydHkob3duZXIuZ2V0VHlwZSgpLCBuYW1lKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUpID09IFwidGV4dFwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25DcmVhdGluZygpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9jYWxpemFibGVTdHJpbmcsIFwiZGVmYXVsdExvY2FsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0ubG9jYWxpemF0aW9uLmRlZmF1bHRMb2NhbGVOYW1lO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0ubG9jYWxpemF0aW9uLmRlZmF1bHRMb2NhbGVOYW1lID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZSwgXCJsb2NhbGl6YXRpb25OYW1lXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9jYWxpemF0aW9uTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fbG9jYWxpemF0aW9uTmFtZSAhPSB2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbGl6YXRpb25OYW1lID0gdmFsO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZSwgXCJhbGxvd0xpbmVCcmVha3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbGxvd0xpbmVCcmVha3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuZ2V0SXNNdWx0aXBsZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUsIFwibG9jYWxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vd25lciAmJiB0aGlzLm93bmVyLmdldExvY2FsZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSB0aGlzLm93bmVyLmdldExvY2FsZSgpO1xuICAgICAgICAgICAgICAgIGlmICghIXJlcyB8fCAhdGhpcy5zaGFyZWREYXRhKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGhpcy5zaGFyZWREYXRhKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXJlZERhdGEubG9jYWxlO1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuc3RyQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hhYmxlVGV4dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRUZXh0ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlZFRleHRWYWx1ZSA9IHRoaXMuY2FsY1RleHQoKTtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRUZXh0ICE9PSB0aGlzLmNhbGN1bGF0ZWRUZXh0VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkVGV4dFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaHRtbFZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLm9uQ2hhbmdlZCgpO1xuICAgICAgICB0aGlzLm9uU3RyaW5nQ2hhbmdlZC5maXJlKHRoaXMsIHt9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUsIFwidGV4dFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVyZVRleHQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldExvY2FsZVRleHQodGhpcy5sb2NhbGUsIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUsIFwiY2FsY3VsYXRlZFRleHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUZXh0ID1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZWRUZXh0VmFsdWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuY2FsY3VsYXRlZFRleHRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuY2FsY1RleHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlZFRleHRWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVkVGV4dDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5jYWxjVGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRoaXMucHVyZVRleHQ7XG4gICAgICAgIGlmIChyZXMgJiZcbiAgICAgICAgICAgIHRoaXMub3duZXIgJiZcbiAgICAgICAgICAgIHRoaXMub3duZXIuZ2V0UHJvY2Vzc2VkVGV4dCAmJlxuICAgICAgICAgICAgcmVzLmluZGV4T2YoXCJ7XCIpID4gLTEpIHtcbiAgICAgICAgICAgIHJlcyA9IHRoaXMub3duZXIuZ2V0UHJvY2Vzc2VkVGV4dChyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9uR2V0VGV4dENhbGxiYWNrKVxuICAgICAgICAgICAgcmVzID0gdGhpcy5vbkdldFRleHRDYWxsYmFjayhyZXMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZSwgXCJwdXJlVGV4dFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxvYyA9IHRoaXMubG9jYWxlO1xuICAgICAgICAgICAgaWYgKCFsb2MpXG4gICAgICAgICAgICAgICAgbG9jID0gdGhpcy5kZWZhdWx0TG9jO1xuICAgICAgICAgICAgdmFyIHJlcyA9IHRoaXMuZ2V0VmFsdWUobG9jKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsdWVFbXB0eShyZXMpICYmIGxvYyA9PT0gdGhpcy5kZWZhdWx0TG9jKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gdGhpcy5nZXRWYWx1ZShfc3VydmV5U3RyaW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic3VydmV5TG9jYWxpemF0aW9uXCJdLmRlZmF1bHRMb2NhbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWx1ZUVtcHR5KHJlcykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlhbGVjdCA9IHRoaXMuZ2V0Um9vdERpYWxlY3QobG9jKTtcbiAgICAgICAgICAgICAgICBpZiAoISFkaWFsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZ2V0VmFsdWUoZGlhbGVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWx1ZUVtcHR5KHJlcykgJiYgbG9jICE9PSB0aGlzLmRlZmF1bHRMb2MpIHtcbiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmdldFZhbHVlKHRoaXMuZGVmYXVsdExvYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZhbHVlRW1wdHkocmVzKSAmJiAhIXRoaXMuZ2V0TG9jYWxpemF0aW9uTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gdGhpcy5nZXRMb2NhbGl6YXRpb25TdHIoKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLm9uR2V0TG9jYWxpemF0aW9uVGV4dENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMub25HZXRMb2NhbGl6YXRpb25UZXh0Q2FsbGJhY2socmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlcylcbiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmRlZmF1bHRWYWx1ZSB8fCBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5nZXRSb290RGlhbGVjdCA9IGZ1bmN0aW9uIChsb2MpIHtcbiAgICAgICAgaWYgKCFsb2MpXG4gICAgICAgICAgICByZXR1cm4gbG9jO1xuICAgICAgICB2YXIgaW5kZXggPSBsb2MuaW5kZXhPZihcIi1cIik7XG4gICAgICAgIHJldHVybiBpbmRleCA+IC0xID8gbG9jLnN1YnN0cmluZygwLCBpbmRleCkgOiBcIlwiO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldExvY2FsaXphdGlvbk5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc2hhcmVkRGF0YSA/IHRoaXMuc2hhcmVkRGF0YS5sb2NhbGl6YXRpb25OYW1lIDogdGhpcy5sb2NhbGl6YXRpb25OYW1lO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldExvY2FsaXphdGlvblN0ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5hbWUgPSB0aGlzLmdldExvY2FsaXphdGlvbk5hbWUoKTtcbiAgICAgICAgcmV0dXJuICEhbmFtZSA/IF9zdXJ2ZXlTdHJpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzdXJ2ZXlMb2NhbGl6YXRpb25cIl0uZ2V0U3RyaW5nKG5hbWUsIHRoaXMubG9jYWxlKSA6IFwiXCI7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLCBcImhhc0h0bWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0h0bWxWYWx1ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZSwgXCJodG1sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzSHRtbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEh0bWxWYWx1ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZSwgXCJpc0VtcHR5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZXNLZXlzKCkubGVuZ3RoID09IDA7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLCBcInRleHRPckh0bWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0h0bWwgPyB0aGlzLmdldEh0bWxWYWx1ZSgpIDogdGhpcy5jYWxjdWxhdGVkVGV4dDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUsIFwicmVuZGVyZWRIdG1sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0T3JIdG1sO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldExvY2FsZVRleHQgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgICAgIHZhciByZXMgPSB0aGlzLmdldExvY2FsZVRleHRDb3JlKGxvYyk7XG4gICAgICAgIHJldHVybiByZXMgPyByZXMgOiBcIlwiO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldExvY2FsZVRleHRDb3JlID0gZnVuY3Rpb24gKGxvYykge1xuICAgICAgICBpZiAoIWxvYylcbiAgICAgICAgICAgIGxvYyA9IHRoaXMuZGVmYXVsdExvYztcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUobG9jKTtcbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5pc0xvY2FsZVRleHRFcXVhbHNXaXRoRGVmYXVsdCA9IGZ1bmN0aW9uIChsb2MsIHZhbCkge1xuICAgICAgICB2YXIgcmVzID0gdGhpcy5nZXRMb2NhbGVUZXh0Q29yZShsb2MpO1xuICAgICAgICBpZiAocmVzID09PSB2YWwpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWx1ZUVtcHR5KHJlcykgJiYgdGhpcy5pc1ZhbHVlRW1wdHkodmFsKTtcbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRKc29uKHVuZGVmaW5lZCk7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuY2xlYXJMb2NhbGUgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgICAgIHRoaXMuc2V0TG9jYWxlVGV4dChsb2MsIHVuZGVmaW5lZCk7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuc2V0TG9jYWxlVGV4dCA9IGZ1bmN0aW9uIChsb2MsIHZhbHVlKSB7XG4gICAgICAgIGxvYyA9IHRoaXMuZ2V0VmFsdWVMb2MobG9jKTtcbiAgICAgICAgaWYgKCF0aGlzLnN0b3JlRGVmYXVsdFRleHQgJiYgdGhpcy5pc0xvY2FsZVRleHRFcXVhbHNXaXRoRGVmYXVsdChsb2MsIHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsdWVFbXB0eSh2YWx1ZSkgfHwgISFsb2MgJiYgbG9jICE9PSB0aGlzLmRlZmF1bHRMb2MpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGRsID0gX3N1cnZleVN0cmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInN1cnZleUxvY2FsaXphdGlvblwiXS5kZWZhdWx0TG9jYWxlO1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlXzEgPSB0aGlzLmdldFZhbHVlKGRsKTtcbiAgICAgICAgICAgIGlmICghIWRsICYmICF0aGlzLmlzVmFsdWVFbXB0eShvbGRWYWx1ZV8xKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoZGwsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcmVTdHJDaGFuZ2VkKGRsLCBvbGRWYWx1ZV8xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIV9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0ubG9jYWxpemF0aW9uLnN0b3JlRHVwbGljYXRlZFRyYW5zbGF0aW9ucyAmJlxuICAgICAgICAgICAgIXRoaXMuaXNWYWx1ZUVtcHR5KHZhbHVlKSAmJiBsb2MgJiYgbG9jICE9IHRoaXMuZGVmYXVsdExvYyAmJlxuICAgICAgICAgICAgIXRoaXMuZ2V0VmFsdWUobG9jKSAmJlxuICAgICAgICAgICAgdmFsdWUgPT0gdGhpcy5nZXRMb2NhbGVUZXh0KHRoaXMuZGVmYXVsdExvYykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBjdXJMb2MgPSB0aGlzLmN1ckxvY2FsZTtcbiAgICAgICAgaWYgKCFsb2MpXG4gICAgICAgICAgICBsb2MgPSB0aGlzLmRlZmF1bHRMb2M7XG4gICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMub25TdHJDaGFuZ2VkICYmIGxvYyA9PT0gY3VyTG9jID8gdGhpcy5wdXJlVGV4dCA6IHVuZGVmaW5lZDtcbiAgICAgICAgZGVsZXRlIHRoaXMuaHRtbFZhbHVlc1tsb2NdO1xuICAgICAgICBpZiAodGhpcy5pc1ZhbHVlRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZVZhbHVlKGxvYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuUmVtb3ZlTG9jVmFsdWUobG9jLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGVUZXh0KGxvYywgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFZhbHVlKGxvYywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jID09IHRoaXMuZGVmYXVsdExvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVWYWx1ZXNFcXVhbHNUb0RlZmF1bHQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlyZVN0ckNoYW5nZWQobG9jLCBvbGRWYWx1ZSk7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuaXNWYWx1ZUVtcHR5ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQgfHwgdmFsID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICh0aGlzLmxvY2FsaXphdGlvbk5hbWUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB2YWwgPT09IFwiXCI7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLCBcImN1ckxvY2FsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5sb2NhbGUgPyB0aGlzLmxvY2FsZSA6IHRoaXMuZGVmYXVsdExvYztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5jYW5SZW1vdmVMb2NWYWx1ZSA9IGZ1bmN0aW9uIChsb2MsIHZhbCkge1xuICAgICAgICBpZiAoX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJzZXR0aW5nc1wiXS5sb2NhbGl6YXRpb24uc3RvcmVEdXBsaWNhdGVkVHJhbnNsYXRpb25zKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAobG9jID09PSB0aGlzLmRlZmF1bHRMb2MpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBkaWFsZWN0ID0gdGhpcy5nZXRSb290RGlhbGVjdChsb2MpO1xuICAgICAgICBpZiAoISFkaWFsZWN0KSB7XG4gICAgICAgICAgICB2YXIgZGlhbGVjdFZhbCA9IHRoaXMuZ2V0TG9jYWxlVGV4dChkaWFsZWN0KTtcbiAgICAgICAgICAgIGlmICghIWRpYWxlY3RWYWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpYWxlY3RWYWwgPT0gdmFsO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FuUmVtb3ZlTG9jVmFsdWUoZGlhbGVjdCwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB2YWwgPT0gdGhpcy5nZXRMb2NhbGVUZXh0KHRoaXMuZGVmYXVsdExvYyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5maXJlU3RyQ2hhbmdlZCA9IGZ1bmN0aW9uIChsb2MsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3RyQ2hhbmdlZCgpO1xuICAgICAgICBpZiAoIXRoaXMub25TdHJDaGFuZ2VkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnB1cmVUZXh0O1xuICAgICAgICBpZiAobG9jICE9PSB0aGlzLmN1ckxvY2FsZSB8fCBvbGRWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMub25TdHJDaGFuZ2VkKG9sZFZhbHVlLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5oYXNOb25EZWZhdWx0VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFZhbHVlc0tleXMoKTtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBrZXlzLmxlbmd0aCA+IDEgfHwga2V5c1swXSAhPSB0aGlzLmRlZmF1bHRMb2M7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuZ2V0TG9jYWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFZhbHVlc0tleXMoKTtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldEpzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghIXRoaXMuc2hhcmVkRGF0YSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXJlZERhdGEuZ2V0SnNvbigpO1xuICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VmFsdWVzS2V5cygpO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT0gMSAmJlxuICAgICAgICAgICAga2V5c1swXSA9PSBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInNldHRpbmdzXCJdLmxvY2FsaXphdGlvbi5kZWZhdWx0TG9jYWxlTmFtZSAmJlxuICAgICAgICAgICAgIV9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0uc2VyaWFsaXphdGlvbi5sb2NhbGl6YWJsZVN0cmluZ1NlcmlhbGl6ZUFzT2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleXNbMF1dO1xuICAgICAgICB2YXIgcmVzID0ge307XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnZhbHVlcykge1xuICAgICAgICAgICAgcmVzW2tleV0gPSB0aGlzLnZhbHVlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuc2V0SnNvbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoISF0aGlzLnNoYXJlZERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkRGF0YS5zZXRKc29uKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLmh0bWxWYWx1ZXMgPSB7fTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxlVGV4dChudWxsLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldExvY2FsZVRleHQoa2V5LCB2YWx1ZVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0ckNoYW5nZWQoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUsIFwicmVuZGVyQXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vd25lciB8fCB0eXBlb2YgdGhpcy5vd25lci5nZXRSZW5kZXJlciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIExvY2FsaXphYmxlU3RyaW5nLmRlZmF1bHRSZW5kZXJlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm93bmVyLmdldFJlbmRlcmVyKHRoaXMubmFtZSkgfHwgTG9jYWxpemFibGVTdHJpbmcuZGVmYXVsdFJlbmRlcmVyO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZSwgXCJyZW5kZXJBc0RhdGFcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vd25lciB8fCB0eXBlb2YgdGhpcy5vd25lci5nZXRSZW5kZXJlckNvbnRleHQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuZ2V0UmVuZGVyZXJDb250ZXh0KHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBpZiAoISF0aGlzLnNoYXJlZERhdGEpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFyZWREYXRhLmVxdWFscyhvYmopO1xuICAgICAgICBpZiAoIW9iaiB8fCAhb2JqLnZhbHVlcylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmlzVHdvVmFsdWVFcXVhbHModGhpcy52YWx1ZXMsIG9iai52YWx1ZXMsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuc2V0RmluZFRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ID09IHRleHQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc2VhcmNoVGV4dCA9IHRleHQ7XG4gICAgICAgIGlmICghdGhpcy5zZWFyY2hhYmxlVGV4dCkge1xuICAgICAgICAgICAgdmFyIHRleHRPckh0bWwgPSB0aGlzLnRleHRPckh0bWw7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaGFibGVUZXh0ID0gISF0ZXh0T3JIdG1sID8gdGV4dE9ySHRtbC50b0xvd2VyQ2FzZSgpIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyID0gdGhpcy5zZWFyY2hhYmxlVGV4dDtcbiAgICAgICAgdmFyIGluZGV4ID0gISFzdHIgJiYgISF0ZXh0ID8gc3RyLmluZGV4T2YodGV4dCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChpbmRleCA8IDApXG4gICAgICAgICAgICBpbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGluZGV4ICE9IHVuZGVmaW5lZCB8fCB0aGlzLnNlYXJjaEluZGV4ICE9IGluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICBpZiAoISF0aGlzLm9uU2VhcmNoQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25TZWFyY2hDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoSW5kZXggIT0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLm9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUub25DcmVhdGluZyA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuaGFzSHRtbFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMub3duZXIgfHwgIXRoaXMudXNlTWFya2Rvd24pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBsb2MgPSB0aGlzLmxvY2FsZTtcbiAgICAgICAgaWYgKCFsb2MpXG4gICAgICAgICAgICBsb2MgPSB0aGlzLmRlZmF1bHRMb2M7XG4gICAgICAgIGlmICh0aGlzLmh0bWxWYWx1ZXNbbG9jXSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5odG1sVmFsdWVzW2xvY107XG4gICAgICAgIHZhciByZW5kZXJlZFRleHQgPSB0aGlzLmNhbGN1bGF0ZWRUZXh0O1xuICAgICAgICBpZiAoIXJlbmRlcmVkVGV4dCkge1xuICAgICAgICAgICAgdGhpcy5zZXRIdG1sVmFsdWUobG9jLCBcIlwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLmdldExvY2FsaXphdGlvbk5hbWUoKSAmJiByZW5kZXJlZFRleHQgPT09IHRoaXMuZ2V0TG9jYWxpemF0aW9uU3RyKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SHRtbFZhbHVlKGxvYywgXCJcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcyA9IHRoaXMub3duZXIuZ2V0TWFya2Rvd25IdG1sKHJlbmRlcmVkVGV4dCwgdGhpcy5uYW1lKTtcbiAgICAgICAgdGhpcy5zZXRIdG1sVmFsdWUobG9jLCByZXMpO1xuICAgICAgICByZXR1cm4gISFyZXM7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuc2V0SHRtbFZhbHVlID0gZnVuY3Rpb24gKGxvYywgdmFsKSB7XG4gICAgICAgIHRoaXMuaHRtbFZhbHVlc1tsb2NdID0gdmFsO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldEh0bWxWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxvYyA9IHRoaXMubG9jYWxlO1xuICAgICAgICBpZiAoIWxvYylcbiAgICAgICAgICAgIGxvYyA9IHRoaXMuZGVmYXVsdExvYztcbiAgICAgICAgcmV0dXJuIHRoaXMuaHRtbFZhbHVlc1tsb2NdO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmRlbGV0ZVZhbHVlc0VxdWFsc1RvRGVmYXVsdCA9IGZ1bmN0aW9uIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgaWYgKF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0ubG9jYWxpemF0aW9uLnN0b3JlRHVwbGljYXRlZFRyYW5zbGF0aW9ucylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFZhbHVlc0tleXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoa2V5c1tpXSA9PSB0aGlzLmRlZmF1bHRMb2MpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRWYWx1ZShrZXlzW2ldKSA9PSBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVZhbHVlKGtleXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgICAgIGlmICghIXRoaXMuc2hhcmVkRGF0YSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXJlZERhdGEuZ2V0VmFsdWUobG9jKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW3RoaXMuZ2V0VmFsdWVMb2MobG9jKV07XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAobG9jLCB2YWx1ZSkge1xuICAgICAgICBpZiAoISF0aGlzLnNoYXJlZERhdGEpXG4gICAgICAgICAgICB0aGlzLnNoYXJlZERhdGEuc2V0VmFsdWUobG9jLCB2YWx1ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuZ2V0VmFsdWVMb2MobG9jKV0gPSB2YWx1ZTtcbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZS5kZWxldGVWYWx1ZSA9IGZ1bmN0aW9uIChsb2MpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5zaGFyZWREYXRhKVxuICAgICAgICAgICAgdGhpcy5zaGFyZWREYXRhLmRlbGV0ZVZhbHVlKGxvYyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc1t0aGlzLmdldFZhbHVlTG9jKGxvYyldO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldFZhbHVlTG9jID0gZnVuY3Rpb24gKGxvYykge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlTG9jYWxpemF0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0ubG9jYWxpemF0aW9uLmRlZmF1bHRMb2NhbGVOYW1lO1xuICAgICAgICByZXR1cm4gbG9jO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmcucHJvdG90eXBlLmdldFZhbHVlc0tleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghIXRoaXMuc2hhcmVkRGF0YSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXJlZERhdGEuZ2V0VmFsdWVzS2V5cygpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy52YWx1ZXMpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5nLnByb3RvdHlwZSwgXCJkZWZhdWx0TG9jXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJzZXR0aW5nc1wiXS5sb2NhbGl6YXRpb24uZGVmYXVsdExvY2FsZU5hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZy5TZXJpYWxpemVBc09iamVjdCA9IGZhbHNlO1xuICAgIExvY2FsaXphYmxlU3RyaW5nLmRlZmF1bHRSZW5kZXJlciA9IFwic3Ytc3RyaW5nLXZpZXdlclwiO1xuICAgIExvY2FsaXphYmxlU3RyaW5nLmVkaXRhYmxlUmVuZGVyZXIgPSBcInN2LXN0cmluZy1lZGl0b3JcIjtcbiAgICByZXR1cm4gTG9jYWxpemFibGVTdHJpbmc7XG59KCkpO1xuXG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRzIHRoZSBsaXN0IG9mIHN0cmluZ3MgdGhhdCBzdXBwb3J0cyBtdWx0aS1sYW5ndWFnZXMuXG4gKi9cbnZhciBMb2NhbGl6YWJsZVN0cmluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTG9jYWxpemFibGVTdHJpbmdzKG93bmVyKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICB9XG4gICAgTG9jYWxpemFibGVTdHJpbmdzLnByb3RvdHlwZS5nZXRJc011bHRpcGxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9jYWxpemFibGVTdHJpbmdzLnByb3RvdHlwZSwgXCJsb2NhbGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm93bmVyICYmIHRoaXMub3duZXIuZ2V0TG9jYWxlID8gdGhpcy5vd25lci5nZXRMb2NhbGUoKSA6IFwiXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9jYWxpemFibGVTdHJpbmdzLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoXCJcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZShcIlwiLCB2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5ncy5wcm90b3R5cGUsIFwidGV4dFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkgPyB0aGlzLnZhbHVlLmpvaW4oXCJcXG5cIikgOiBcIlwiO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSAhIXZhbCA/IHZhbC5zcGxpdChcIlxcblwiKSA6IFtdO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTG9jYWxpemFibGVTdHJpbmdzLnByb3RvdHlwZS5nZXRMb2NhbGVUZXh0ID0gZnVuY3Rpb24gKGxvYykge1xuICAgICAgICB2YXIgcmVzID0gdGhpcy5nZXRWYWx1ZUNvcmUobG9jLCAhbG9jIHx8IGxvYyA9PT0gdGhpcy5sb2NhbGUpO1xuICAgICAgICBpZiAoIXJlcyB8fCAhQXJyYXkuaXNBcnJheShyZXMpIHx8IHJlcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICByZXR1cm4gcmVzLmpvaW4oXCJcXG5cIik7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZ3MucHJvdG90eXBlLnNldExvY2FsZVRleHQgPSBmdW5jdGlvbiAobG9jLCBuZXdWYWx1ZSkge1xuICAgICAgICB2YXIgdmFsID0gISFuZXdWYWx1ZSA/IG5ld1ZhbHVlLnNwbGl0KFwiXFxuXCIpIDogbnVsbDtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShsb2MsIHZhbCk7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZ3MucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKGxvYykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZUNvcmUobG9jKTtcbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5ncy5wcm90b3R5cGUuZ2V0VmFsdWVDb3JlID0gZnVuY3Rpb24gKGxvYywgdXNlRGVmYXVsdCkge1xuICAgICAgICBpZiAodXNlRGVmYXVsdCA9PT0gdm9pZCAwKSB7IHVzZURlZmF1bHQgPSB0cnVlOyB9XG4gICAgICAgIGxvYyA9IHRoaXMuZ2V0TG9jYWxlKGxvYyk7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlc1tsb2NdKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2xvY107XG4gICAgICAgIGlmICh1c2VEZWZhdWx0KSB7XG4gICAgICAgICAgICB2YXIgZGVmTG9jID0gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJzZXR0aW5nc1wiXS5sb2NhbGl6YXRpb24uZGVmYXVsdExvY2FsZU5hbWU7XG4gICAgICAgICAgICBpZiAobG9jICE9PSBkZWZMb2MgJiYgdGhpcy52YWx1ZXNbZGVmTG9jXSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbZGVmTG9jXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZ3MucHJvdG90eXBlLnNldFZhbHVlID0gZnVuY3Rpb24gKGxvYywgdmFsKSB7XG4gICAgICAgIGxvYyA9IHRoaXMuZ2V0TG9jYWxlKGxvYyk7XG4gICAgICAgIHZhciBvbGRWYWx1ZSA9IF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJIZWxwZXJzXCJdLmNyZWF0ZUNvcHkodGhpcy52YWx1ZXMpO1xuICAgICAgICBpZiAoIXZhbCB8fCB2YWwubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc1tsb2NdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWx1ZXNbbG9jXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLm9uVmFsdWVDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLm9uVmFsdWVDaGFuZ2VkKG9sZFZhbHVlLCB0aGlzLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5ncy5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgICAgIGlmIChsb2MgPT09IHZvaWQgMCkgeyBsb2MgPSBcIlwiOyB9XG4gICAgICAgIHJldHVybiAhdGhpcy5pc0VtcHR5ICYmIHRoaXMuZ2V0VmFsdWUobG9jKS5sZW5ndGggPiAwO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvY2FsaXphYmxlU3RyaW5ncy5wcm90b3R5cGUsIFwiaXNFbXB0eVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVzS2V5cygpLmxlbmd0aCA9PSAwO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTG9jYWxpemFibGVTdHJpbmdzLnByb3RvdHlwZS5nZXRMb2NhbGUgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgICAgIGlmICghIWxvYylcbiAgICAgICAgICAgIHJldHVybiBsb2M7XG4gICAgICAgIGxvYyA9IHRoaXMubG9jYWxlO1xuICAgICAgICByZXR1cm4gISFsb2MgPyBsb2MgOiBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInNldHRpbmdzXCJdLmxvY2FsaXphdGlvbi5kZWZhdWx0TG9jYWxlTmFtZTtcbiAgICB9O1xuICAgIExvY2FsaXphYmxlU3RyaW5ncy5wcm90b3R5cGUuZ2V0TG9jYWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFZhbHVlc0tleXMoKTtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmdzLnByb3RvdHlwZS5nZXRKc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VmFsdWVzS2V5cygpO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT0gMSAmJlxuICAgICAgICAgICAga2V5c1swXSA9PSBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInNldHRpbmdzXCJdLmxvY2FsaXphdGlvbi5kZWZhdWx0TG9jYWxlTmFtZSAmJlxuICAgICAgICAgICAgIV9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0uc2VyaWFsaXphdGlvbi5sb2NhbGl6YWJsZVN0cmluZ1NlcmlhbGl6ZUFzT2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleXNbMF1dO1xuICAgICAgICByZXR1cm4gX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkhlbHBlcnNcIl0uY3JlYXRlQ29weSh0aGlzLnZhbHVlcyk7XG4gICAgfTtcbiAgICBMb2NhbGl6YWJsZVN0cmluZ3MucHJvdG90eXBlLnNldEpzb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKG51bGwsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoa2V5LCB2YWx1ZVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgTG9jYWxpemFibGVTdHJpbmdzLnByb3RvdHlwZS5nZXRWYWx1ZXNLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy52YWx1ZXMpO1xuICAgIH07XG4gICAgcmV0dXJuIExvY2FsaXphYmxlU3RyaW5ncztcbn0oKSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9sb2NhbGl6YXRpb24vZW5nbGlzaC50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9sb2NhbGl6YXRpb24vZW5nbGlzaC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBlbmdsaXNoU3RyaW5ncyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJlbmdsaXNoU3RyaW5nc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGVuZ2xpc2hTdHJpbmdzOyB9KTtcbi8vIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyBpZiB5b3UgY3JlYXRlIGEgY3VzdG9tIGRpY3Rpb25hcnlcbi8vIGltcG9ydCB7IHN1cnZleUxvY2FsaXphdGlvbiB9IGZyb20gXCJzdXJ2ZXktY29yZVwiO1xudmFyIGVuZ2xpc2hTdHJpbmdzID0ge1xuICAgIHBhZ2VQcmV2VGV4dDogXCJQcmV2aW91c1wiLFxuICAgIHBhZ2VOZXh0VGV4dDogXCJOZXh0XCIsXG4gICAgY29tcGxldGVUZXh0OiBcIkNvbXBsZXRlXCIsXG4gICAgcHJldmlld1RleHQ6IFwiUHJldmlld1wiLFxuICAgIGVkaXRUZXh0OiBcIkVkaXRcIixcbiAgICBzdGFydFN1cnZleVRleHQ6IFwiU3RhcnRcIixcbiAgICBvdGhlckl0ZW1UZXh0OiBcIk90aGVyIChkZXNjcmliZSlcIixcbiAgICBub25lSXRlbVRleHQ6IFwiTm9uZVwiLFxuICAgIHJlZnVzZUl0ZW1UZXh0OiBcIlJlZnVzZSB0byBhbnN3ZXJcIixcbiAgICBkb250S25vd0l0ZW1UZXh0OiBcIkRvbid0IGtub3dcIixcbiAgICBzZWxlY3RBbGxJdGVtVGV4dDogXCJTZWxlY3QgQWxsXCIsXG4gICAgcHJvZ3Jlc3NUZXh0OiBcIlBhZ2UgezB9IG9mIHsxfVwiLFxuICAgIGluZGV4VGV4dDogXCJ7MH0gb2YgezF9XCIsXG4gICAgcGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0OiBcInswfSBvZiB7MX1cIixcbiAgICBwYW5lbER5bmFtaWNUYWJUZXh0Rm9ybWF0OiBcIlBhbmVsIHtwYW5lbEluZGV4fVwiLFxuICAgIHF1ZXN0aW9uc1Byb2dyZXNzVGV4dDogXCJBbnN3ZXJlZCB7MH0vezF9IHF1ZXN0aW9uc1wiLFxuICAgIGVtcHR5U3VydmV5OiBcIlRoZSBzdXJ2ZXkgZG9lc24ndCBjb250YWluIGFueSB2aXNpYmxlIGVsZW1lbnRzLlwiLFxuICAgIGNvbXBsZXRpbmdTdXJ2ZXk6IFwiVGhhbmsgeW91IGZvciBjb21wbGV0aW5nIHRoZSBzdXJ2ZXlcIixcbiAgICBjb21wbGV0aW5nU3VydmV5QmVmb3JlOiBcIk91ciByZWNvcmRzIHNob3cgdGhhdCB5b3UgaGF2ZSBhbHJlYWR5IGNvbXBsZXRlZCB0aGlzIHN1cnZleS5cIixcbiAgICBsb2FkaW5nU3VydmV5OiBcIkxvYWRpbmcgU3VydmV5Li4uXCIsXG4gICAgcGxhY2Vob2xkZXI6IFwiU2VsZWN0Li4uXCIsXG4gICAgcmF0aW5nT3B0aW9uc0NhcHRpb246IFwiU2VsZWN0Li4uXCIsXG4gICAgdmFsdWU6IFwidmFsdWVcIixcbiAgICByZXF1aXJlZEVycm9yOiBcIlJlc3BvbnNlIHJlcXVpcmVkLlwiLFxuICAgIHJlcXVpcmVkRXJyb3JJblBhbmVsOiBcIlJlc3BvbnNlIHJlcXVpcmVkOiBhbnN3ZXIgYXQgbGVhc3Qgb25lIHF1ZXN0aW9uLlwiLFxuICAgIHJlcXVpcmVkSW5BbGxSb3dzRXJyb3I6IFwiUmVzcG9uc2UgcmVxdWlyZWQ6IGFuc3dlciBxdWVzdGlvbnMgaW4gYWxsIHJvd3MuXCIsXG4gICAgZWFjaFJvd1VuaXF1ZUVycm9yOiBcIkVhY2ggcm93IG11c3QgaGF2ZSBhIHVuaXF1ZSB2YWx1ZS5cIixcbiAgICBudW1lcmljRXJyb3I6IFwiVGhlIHZhbHVlIHNob3VsZCBiZSBudW1lcmljLlwiLFxuICAgIG1pbkVycm9yOiBcIlRoZSB2YWx1ZSBzaG91bGQgbm90IGJlIGxlc3MgdGhhbiB7MH1cIixcbiAgICBtYXhFcnJvcjogXCJUaGUgdmFsdWUgc2hvdWxkIG5vdCBiZSBncmVhdGVyIHRoYW4gezB9XCIsXG4gICAgdGV4dE1pbkxlbmd0aDogXCJQbGVhc2UgZW50ZXIgYXQgbGVhc3QgezB9IGNoYXJhY3RlcihzKS5cIixcbiAgICB0ZXh0TWF4TGVuZ3RoOiBcIlBsZWFzZSBlbnRlciBubyBtb3JlIHRoYW4gezB9IGNoYXJhY3RlcihzKS5cIixcbiAgICB0ZXh0TWluTWF4TGVuZ3RoOiBcIlBsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gYW5kIG5vIG1vcmUgdGhhbiB7MX0gY2hhcmFjdGVycy5cIixcbiAgICBtaW5Sb3dDb3VudEVycm9yOiBcIlBsZWFzZSBmaWxsIGluIGF0IGxlYXN0IHswfSByb3cocykuXCIsXG4gICAgbWluU2VsZWN0RXJyb3I6IFwiUGxlYXNlIHNlbGVjdCBhdCBsZWFzdCB7MH0gb3B0aW9uKHMpLlwiLFxuICAgIG1heFNlbGVjdEVycm9yOiBcIlBsZWFzZSBzZWxlY3Qgbm8gbW9yZSB0aGFuIHswfSBvcHRpb24ocykuXCIsXG4gICAgbnVtZXJpY01pbk1heDogXCJUaGUgJ3swfScgc2hvdWxkIGJlIGF0IGxlYXN0IHsxfSBhbmQgYXQgbW9zdCB7Mn1cIixcbiAgICBudW1lcmljTWluOiBcIlRoZSAnezB9JyBzaG91bGQgYmUgYXQgbGVhc3QgezF9XCIsXG4gICAgbnVtZXJpY01heDogXCJUaGUgJ3swfScgc2hvdWxkIGJlIGF0IG1vc3QgezF9XCIsXG4gICAgaW52YWxpZEVtYWlsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzLlwiLFxuICAgIGludmFsaWRFeHByZXNzaW9uOiBcIlRoZSBleHByZXNzaW9uOiB7MH0gc2hvdWxkIHJldHVybiAndHJ1ZScuXCIsXG4gICAgdXJsUmVxdWVzdEVycm9yOiBcIlRoZSByZXF1ZXN0IHJldHVybmVkIGVycm9yICd7MH0nLiB7MX1cIixcbiAgICB1cmxHZXRDaG9pY2VzRXJyb3I6IFwiVGhlIHJlcXVlc3QgcmV0dXJuZWQgZW1wdHkgZGF0YSBvciB0aGUgJ3BhdGgnIHByb3BlcnR5IGlzIGluY29ycmVjdFwiLFxuICAgIGV4Y2VlZE1heFNpemU6IFwiVGhlIGZpbGUgc2l6ZSBzaG91bGQgbm90IGV4Y2VlZCB7MH0uXCIsXG4gICAgbm9VcGxvYWRGaWxlc0hhbmRsZXI6IFwiRmlsZXMgY2Fubm90IGJlIHVwbG9hZGVkLiBQbGVhc2UgYWRkIGEgaGFuZGxlciBmb3IgdGhlICdvblVwbG9hZEZpbGVzJyBldmVudC5cIixcbiAgICBvdGhlclJlcXVpcmVkRXJyb3I6IFwiUmVzcG9uc2UgcmVxdWlyZWQ6IGVudGVyIGFub3RoZXIgdmFsdWUuXCIsXG4gICAgdXBsb2FkaW5nRmlsZTogXCJZb3VyIGZpbGUgaXMgdXBsb2FkaW5nLiBQbGVhc2Ugd2FpdCBzZXZlcmFsIHNlY29uZHMgYW5kIHRyeSBhZ2Fpbi5cIixcbiAgICBsb2FkaW5nRmlsZTogXCJMb2FkaW5nLi4uXCIsXG4gICAgY2hvb3NlRmlsZTogXCJDaG9vc2UgZmlsZShzKS4uLlwiLFxuICAgIG5vRmlsZUNob3NlbjogXCJObyBmaWxlIGNob3NlblwiLFxuICAgIGZpbGVQbGFjZWhvbGRlcjogXCJEcmFnIGFuZCBkcm9wIGEgZmlsZSBoZXJlIG9yIGNsaWNrIHRoZSBidXR0b24gYmVsb3cgdG8gc2VsZWN0IGEgZmlsZSB0byB1cGxvYWQuXCIsXG4gICAgY29uZmlybURlbGV0ZTogXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcmVjb3JkP1wiLFxuICAgIGtleUR1cGxpY2F0aW9uRXJyb3I6IFwiVGhpcyB2YWx1ZSBzaG91bGQgYmUgdW5pcXVlLlwiLFxuICAgIGFkZENvbHVtbjogXCJBZGQgQ29sdW1uXCIsXG4gICAgYWRkUm93OiBcIkFkZCBSb3dcIixcbiAgICByZW1vdmVSb3c6IFwiUmVtb3ZlXCIsXG4gICAgZW1wdHlSb3dzVGV4dDogXCJUaGVyZSBhcmUgbm8gcm93cy5cIixcbiAgICBhZGRQYW5lbDogXCJBZGQgbmV3XCIsXG4gICAgcmVtb3ZlUGFuZWw6IFwiUmVtb3ZlXCIsXG4gICAgc2hvd0RldGFpbHM6IFwiU2hvdyBEZXRhaWxzXCIsXG4gICAgaGlkZURldGFpbHM6IFwiSGlkZSBEZXRhaWxzXCIsXG4gICAgY2hvaWNlc19JdGVtOiBcIml0ZW1cIixcbiAgICBtYXRyaXhfY29sdW1uOiBcIkNvbHVtblwiLFxuICAgIG1hdHJpeF9yb3c6IFwiUm93XCIsXG4gICAgbXVsdGlwbGV0ZXh0X2l0ZW1uYW1lOiBcInRleHRcIixcbiAgICBzYXZpbmdEYXRhOiBcIlRoZSByZXN1bHRzIGFyZSBiZWluZyBzYXZlZCBvbiB0aGUgc2VydmVyLi4uXCIsXG4gICAgc2F2aW5nRGF0YUVycm9yOiBcIkFuIGVycm9yIG9jY3VycmVkIGFuZCB3ZSBjb3VsZCBub3Qgc2F2ZSB0aGUgcmVzdWx0cy5cIixcbiAgICBzYXZpbmdEYXRhU3VjY2VzczogXCJUaGUgcmVzdWx0cyB3ZXJlIHNhdmVkIHN1Y2Nlc3NmdWxseSFcIixcbiAgICBzYXZlQWdhaW5CdXR0b246IFwiVHJ5IGFnYWluXCIsXG4gICAgdGltZXJNaW46IFwibWluXCIsXG4gICAgdGltZXJTZWM6IFwic2VjXCIsXG4gICAgdGltZXJTcGVudEFsbDogXCJZb3UgaGF2ZSBzcGVudCB7MH0gb24gdGhpcyBwYWdlIGFuZCB7MX0gaW4gdG90YWwuXCIsXG4gICAgdGltZXJTcGVudFBhZ2U6IFwiWW91IGhhdmUgc3BlbnQgezB9IG9uIHRoaXMgcGFnZS5cIixcbiAgICB0aW1lclNwZW50U3VydmV5OiBcIllvdSBoYXZlIHNwZW50IHswfSBpbiB0b3RhbC5cIixcbiAgICB0aW1lckxpbWl0QWxsOiBcIllvdSBoYXZlIHNwZW50IHswfSBvZiB7MX0gb24gdGhpcyBwYWdlIGFuZCB7Mn0gb2YgezN9IGluIHRvdGFsLlwiLFxuICAgIHRpbWVyTGltaXRQYWdlOiBcIllvdSBoYXZlIHNwZW50IHswfSBvZiB7MX0gb24gdGhpcyBwYWdlLlwiLFxuICAgIHRpbWVyTGltaXRTdXJ2ZXk6IFwiWW91IGhhdmUgc3BlbnQgezB9IG9mIHsxfSBpbiB0b3RhbC5cIixcbiAgICBjbGVhckNhcHRpb246IFwiQ2xlYXJcIixcbiAgICBzaWduYXR1cmVQbGFjZUhvbGRlcjogXCJTaWduIGhlcmVcIixcbiAgICBjaG9vc2VGaWxlQ2FwdGlvbjogXCJTZWxlY3QgRmlsZVwiLFxuICAgIHRha2VQaG90b0NhcHRpb246IFwiVGFrZSBQaG90b1wiLFxuICAgIHBob3RvUGxhY2Vob2xkZXI6IFwiQ2xpY2sgdGhlIGJ1dHRvbiBiZWxvdyB0byB0YWtlIGEgcGhvdG8gdXNpbmcgdGhlIGNhbWVyYS5cIixcbiAgICBmaWxlT3JQaG90b1BsYWNlaG9sZGVyOiBcIkRyYWcgYW5kIGRyb3Agb3Igc2VsZWN0IGEgZmlsZSB0byB1cGxvYWQgb3IgdGFrZSBhIHBob3RvIHVzaW5nIHRoZSBjYW1lcmEuXCIsXG4gICAgcmVwbGFjZUZpbGVDYXB0aW9uOiBcIlJlcGxhY2UgZmlsZVwiLFxuICAgIHJlbW92ZUZpbGVDYXB0aW9uOiBcIlJlbW92ZSB0aGlzIGZpbGVcIixcbiAgICBib29sZWFuQ2hlY2tlZExhYmVsOiBcIlllc1wiLFxuICAgIGJvb2xlYW5VbmNoZWNrZWRMYWJlbDogXCJOb1wiLFxuICAgIGNvbmZpcm1SZW1vdmVGaWxlOiBcIkFyZSB5b3Ugc3VyZSB0aGF0IHlvdSB3YW50IHRvIHJlbW92ZSB0aGlzIGZpbGU6IHswfT9cIixcbiAgICBjb25maXJtUmVtb3ZlQWxsRmlsZXM6IFwiQXJlIHlvdSBzdXJlIHRoYXQgeW91IHdhbnQgdG8gcmVtb3ZlIGFsbCBmaWxlcz9cIixcbiAgICBxdWVzdGlvblRpdGxlUGF0dGVyblRleHQ6IFwiUXVlc3Rpb24gVGl0bGVcIixcbiAgICBtb2RhbENhbmNlbEJ1dHRvblRleHQ6IFwiQ2FuY2VsXCIsXG4gICAgbW9kYWxBcHBseUJ1dHRvblRleHQ6IFwiQXBwbHlcIixcbiAgICBmaWx0ZXJTdHJpbmdQbGFjZWhvbGRlcjogXCJUeXBlIHRvIHNlYXJjaC4uLlwiLFxuICAgIGVtcHR5TWVzc2FnZTogXCJObyBkYXRhIHRvIGRpc3BsYXlcIixcbiAgICBub0VudHJpZXNUZXh0OiBcIk5vIGVudHJpZXMgeWV0LlxcbkNsaWNrIHRoZSBidXR0b24gYmVsb3cgdG8gYWRkIGEgbmV3IGVudHJ5LlwiLFxuICAgIG5vRW50cmllc1JlYWRvbmx5VGV4dDogXCJObyBlbnRyaWVzLlwiLFxuICAgIG1vcmU6IFwiTW9yZVwiLFxuICAgIHRhZ2JveERvbmVCdXR0b25DYXB0aW9uOiBcIk9LXCIsXG4gICAgc2VsZWN0VG9SYW5rRW1wdHlSYW5rZWRBcmVhVGV4dDogXCJBbGwgY2hvaWNlcyBhcmUgc2VsZWN0ZWQgZm9yIHJhbmtpbmdcIixcbiAgICBzZWxlY3RUb1JhbmtFbXB0eVVucmFua2VkQXJlYVRleHQ6IFwiRHJhZyBjaG9pY2VzIGhlcmUgdG8gcmFuayB0aGVtXCIsXG4gICAgb2s6IFwiT0tcIixcbiAgICBjYW5jZWw6IFwiQ2FuY2VsXCIsXG59O1xuLy8gVW5jb21tZW50IHRoZSBsaW5lcyBiZWxvdyBpZiB5b3UgY3JlYXRlIGEgY3VzdG9tIGRpY3Rpb25hcnkuXG4vLyBSZXBsYWNlIFwiZW5cIiB3aXRoIGEgY3VzdG9tIGxvY2FsZSBjb2RlIChmb3IgZXhhbXBsZSwgXCJmclwiIG9yIFwiZGVcIiksXG4vLyBSZXBsYWNlIGBlbmdsaXNoU3RyaW5nc2Agd2l0aCB0aGUgbmFtZSBvZiB0aGUgdmFyaWFibGUgdGhhdCBjb250YWlucyB0aGUgY3VzdG9tIGRpY3Rpb25hcnkuXG4vLyBzdXJ2ZXlMb2NhbGl6YXRpb24ubG9jYWxlc1tcImVuXCJdID0gZW5nbGlzaFN0cmluZ3M7XG4vLyBzdXJ2ZXlMb2NhbGl6YXRpb24ubG9jYWxlTmFtZXNbXCJlblwiXSA9IFwiRW5nbGlzaFwiO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3BvcHVwLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3BvcHVwLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFBvcHVwTW9kZWwsIGNyZWF0ZURpYWxvZ09wdGlvbnMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUG9wdXBNb2RlbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFBvcHVwTW9kZWw7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImNyZWF0ZURpYWxvZ09wdGlvbnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjcmVhdGVEaWFsb2dPcHRpb25zOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9iYXNlICovIFwiLi9zcmMvYmFzZS50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9qc29ub2JqZWN0ICovIFwiLi9zcmMvanNvbm9iamVjdC50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29uc29sZV93YXJuaW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb25zb2xlLXdhcm5pbmdzICovIFwiLi9zcmMvY29uc29sZS13YXJuaW5ncy50c1wiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcblxuXG5cbnZhciBQb3B1cE1vZGVsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb3B1cE1vZGVsLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBvcHVwTW9kZWwoY29udGVudENvbXBvbmVudE5hbWUsIGNvbnRlbnRDb21wb25lbnREYXRhLCB2ZXJ0aWNhbFBvc2l0aW9uLCBob3Jpem9udGFsUG9zaXRpb24sIHNob3dQb2ludGVyLCBpc01vZGFsLCBvbkNhbmNlbCwgb25BcHBseSwgb25IaWRlLCBvblNob3csIGNzc0NsYXNzLCB0aXRsZSwgb25EaXNwb3NlKSB7XG4gICAgICAgIGlmICh2ZXJ0aWNhbFBvc2l0aW9uID09PSB2b2lkIDApIHsgdmVydGljYWxQb3NpdGlvbiA9IFwiYm90dG9tXCI7IH1cbiAgICAgICAgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gdm9pZCAwKSB7IGhvcml6b250YWxQb3NpdGlvbiA9IFwibGVmdFwiOyB9XG4gICAgICAgIGlmIChzaG93UG9pbnRlciA9PT0gdm9pZCAwKSB7IHNob3dQb2ludGVyID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoaXNNb2RhbCA9PT0gdm9pZCAwKSB7IGlzTW9kYWwgPSBmYWxzZTsgfVxuICAgICAgICBpZiAob25DYW5jZWwgPT09IHZvaWQgMCkgeyBvbkNhbmNlbCA9IGZ1bmN0aW9uICgpIHsgfTsgfVxuICAgICAgICBpZiAob25BcHBseSA9PT0gdm9pZCAwKSB7IG9uQXBwbHkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9OyB9XG4gICAgICAgIGlmIChvbkhpZGUgPT09IHZvaWQgMCkgeyBvbkhpZGUgPSBmdW5jdGlvbiAoKSB7IH07IH1cbiAgICAgICAgaWYgKG9uU2hvdyA9PT0gdm9pZCAwKSB7IG9uU2hvdyA9IGZ1bmN0aW9uICgpIHsgfTsgfVxuICAgICAgICBpZiAoY3NzQ2xhc3MgPT09IHZvaWQgMCkgeyBjc3NDbGFzcyA9IFwiXCI7IH1cbiAgICAgICAgaWYgKHRpdGxlID09PSB2b2lkIDApIHsgdGl0bGUgPSBcIlwiOyB9XG4gICAgICAgIGlmIChvbkRpc3Bvc2UgPT09IHZvaWQgMCkgeyBvbkRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7IH07IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub25EaXNwb3NlID0gb25EaXNwb3NlO1xuICAgICAgICBfdGhpcy5mb2N1c0ZpcnN0SW5wdXRTZWxlY3RvciA9IFwiXCI7XG4gICAgICAgIF90aGlzLm9uVmlzaWJpbGl0eUNoYW5nZWQgPSBfdGhpcy5hZGRFdmVudCgpO1xuICAgICAgICBfdGhpcy5vbkZvb3RlckFjdGlvbnNDcmVhdGVkID0gX3RoaXMuYWRkRXZlbnQoKTtcbiAgICAgICAgX3RoaXMub25SZWNhbGN1bGF0ZVBvc2l0aW9uID0gX3RoaXMuYWRkRXZlbnQoKTtcbiAgICAgICAgX3RoaXMuY29udGVudENvbXBvbmVudE5hbWUgPSBjb250ZW50Q29tcG9uZW50TmFtZTtcbiAgICAgICAgX3RoaXMuY29udGVudENvbXBvbmVudERhdGEgPSBjb250ZW50Q29tcG9uZW50RGF0YTtcbiAgICAgICAgX3RoaXMudmVydGljYWxQb3NpdGlvbiA9IHZlcnRpY2FsUG9zaXRpb247XG4gICAgICAgIF90aGlzLmhvcml6b250YWxQb3NpdGlvbiA9IGhvcml6b250YWxQb3NpdGlvbjtcbiAgICAgICAgX3RoaXMuc2hvd1BvaW50ZXIgPSBzaG93UG9pbnRlcjtcbiAgICAgICAgX3RoaXMuaXNNb2RhbCA9IGlzTW9kYWw7XG4gICAgICAgIF90aGlzLm9uQ2FuY2VsID0gb25DYW5jZWw7XG4gICAgICAgIF90aGlzLm9uQXBwbHkgPSBvbkFwcGx5O1xuICAgICAgICBfdGhpcy5vbkhpZGUgPSBvbkhpZGU7XG4gICAgICAgIF90aGlzLm9uU2hvdyA9IG9uU2hvdztcbiAgICAgICAgX3RoaXMuY3NzQ2xhc3MgPSBjc3NDbGFzcztcbiAgICAgICAgX3RoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBQb3B1cE1vZGVsLnByb3RvdHlwZS5yZWZyZXNoSW5uZXJNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlubmVyTW9kZWwgPSB0aGlzLmNvbnRlbnRDb21wb25lbnREYXRhW1wibW9kZWxcIl07XG4gICAgICAgIGlubmVyTW9kZWwgJiYgaW5uZXJNb2RlbC5yZWZyZXNoICYmIGlubmVyTW9kZWwucmVmcmVzaCgpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBvcHVwTW9kZWwucHJvdG90eXBlLCBcImlzVmlzaWJsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZShcImlzVmlzaWJsZVwiLCBmYWxzZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwiaXNWaXNpYmxlXCIsIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlZC5maXJlKHRoaXMsIHsgbW9kZWw6IHRoaXMsIGlzVmlzaWJsZTogdmFsdWUgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoSW5uZXJNb2RlbCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25IaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBQb3B1cE1vZGVsLnByb3RvdHlwZS50b2dnbGVWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9ICF0aGlzLmlzVmlzaWJsZTtcbiAgICB9O1xuICAgIFBvcHVwTW9kZWwucHJvdG90eXBlLnJlY2FsY3VsYXRlUG9zaXRpb24gPSBmdW5jdGlvbiAoaXNSZXNldEhlaWdodCkge1xuICAgICAgICB0aGlzLm9uUmVjYWxjdWxhdGVQb3NpdGlvbi5maXJlKHRoaXMsIHsgaXNSZXNldEhlaWdodDogaXNSZXNldEhlaWdodCB9KTtcbiAgICB9O1xuICAgIFBvcHVwTW9kZWwucHJvdG90eXBlLnVwZGF0ZUZvb3RlckFjdGlvbnMgPSBmdW5jdGlvbiAoZm9vdGVyQWN0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHsgYWN0aW9uczogZm9vdGVyQWN0aW9ucyB9O1xuICAgICAgICB0aGlzLm9uRm9vdGVyQWN0aW9uc0NyZWF0ZWQuZmlyZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuYWN0aW9ucztcbiAgICB9O1xuICAgIFBvcHVwTW9kZWwucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm9uRGlzcG9zZSgpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wicHJvcGVydHlcIl0pKClcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJjb250ZW50Q29tcG9uZW50TmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgUG9wdXBNb2RlbC5wcm90b3R5cGUsIFwiY29udGVudENvbXBvbmVudERhdGFcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IFwiYm90dG9tXCIgfSlcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbFBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBcImxlZnRcIiB9KVxuICAgIF0sIFBvcHVwTW9kZWwucHJvdG90eXBlLCBcImhvcml6b250YWxQb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogZmFsc2UgfSlcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJzaG93UG9pbnRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogZmFsc2UgfSlcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJpc01vZGFsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiB0cnVlIH0pXG4gICAgXSwgUG9wdXBNb2RlbC5wcm90b3R5cGUsIFwiaXNGb2N1c2VkQ29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogdHJ1ZSB9KVxuICAgIF0sIFBvcHVwTW9kZWwucHJvdG90eXBlLCBcImlzRm9jdXNlZENvbnRhaW5lclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24gKCkgeyB9IH0pXG4gICAgXSwgUG9wdXBNb2RlbC5wcm90b3R5cGUsIFwib25DYW5jZWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0gfSlcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJvbkFwcGx5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbiAoKSB7IH0gfSlcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJvbkhpZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IGZ1bmN0aW9uICgpIHsgfSB9KVxuICAgIF0sIFBvcHVwTW9kZWwucHJvdG90eXBlLCBcIm9uU2hvd1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogXCJcIiB9KVxuICAgIF0sIFBvcHVwTW9kZWwucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBcIlwiIH0pXG4gICAgXSwgUG9wdXBNb2RlbC5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IFwiYXV0b1wiIH0pXG4gICAgXSwgUG9wdXBNb2RlbC5wcm90b3R5cGUsIFwib3ZlcmxheURpc3BsYXlNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBcInBvcHVwXCIgfSlcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJkaXNwbGF5TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogXCJmbGV4XCIgfSlcbiAgICBdLCBQb3B1cE1vZGVsLnByb3RvdHlwZSwgXCJwb3NpdGlvbk1vZGVcIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gUG9wdXBNb2RlbDtcbn0oX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkJhc2VcIl0pKTtcblxuZnVuY3Rpb24gY3JlYXRlRGlhbG9nT3B0aW9ucyhjb21wb25lbnROYW1lLCBkYXRhLCBvbkFwcGx5LCBvbkNhbmNlbCwgb25IaWRlLCBvblNob3csIGNzc0NsYXNzLCB0aXRsZSwgZGlzcGxheU1vZGUpIHtcbiAgICBpZiAob25IaWRlID09PSB2b2lkIDApIHsgb25IaWRlID0gZnVuY3Rpb24gKCkgeyB9OyB9XG4gICAgaWYgKG9uU2hvdyA9PT0gdm9pZCAwKSB7IG9uU2hvdyA9IGZ1bmN0aW9uICgpIHsgfTsgfVxuICAgIGlmIChkaXNwbGF5TW9kZSA9PT0gdm9pZCAwKSB7IGRpc3BsYXlNb2RlID0gXCJwb3B1cFwiOyB9XG4gICAgX2NvbnNvbGVfd2FybmluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIkNvbnNvbGVXYXJuaW5nc1wiXS53YXJuKFwiVGhlIGBzaG93TW9kYWwoKWAgYW5kIGBjcmVhdGVEaWFsb2dPcHRpb25zKClgIG1ldGhvZHMgYXJlIG9ic29sZXRlLiBVc2UgdGhlIGBzaG93RGlhbG9nKClgIG1ldGhvZCBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb21wb25lbnROYW1lOiBjb21wb25lbnROYW1lLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBvbkFwcGx5OiBvbkFwcGx5LFxuICAgICAgICBvbkNhbmNlbDogb25DYW5jZWwsXG4gICAgICAgIG9uSGlkZTogb25IaWRlLFxuICAgICAgICBvblNob3c6IG9uU2hvdyxcbiAgICAgICAgY3NzQ2xhc3M6IGNzc0NsYXNzLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIGRpc3BsYXlNb2RlOiBkaXNwbGF5TW9kZVxuICAgIH07XG59XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvYm9vbGVhbi1jaGVja2JveC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvYm9vbGVhbi1jaGVja2JveC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25Cb29sZWFuQ2hlY2tib3ggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Cb29sZWFuQ2hlY2tib3hcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5DaGVja2JveDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYm9vbGVhbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ib29sZWFuICovIFwiLi9zcmMvcmVhY3QvYm9vbGVhbi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfdGl0bGVfdGl0bGVfYWN0aW9uc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWFjdGlvbnMgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWFjdGlvbnMudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uQm9vbGVhbkNoZWNrYm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5DaGVja2JveCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5DaGVja2JveChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uQm9vbGVhbkNoZWNrYm94LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIGl0ZW1DbGFzcyA9IHRoaXMucXVlc3Rpb24uZ2V0Q2hlY2tib3hJdGVtQ3NzKCk7XG4gICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHRoaXMucXVlc3Rpb24uY2FuUmVuZGVyTGFiZWxEZXNjcmlwdGlvbiA/XG4gICAgICAgICAgICBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJRdWVzdGlvbkRlc2NyaXB0aW9uKHRoaXMucXVlc3Rpb24pIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5yb290Q2hlY2tib3ggfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBpdGVtQ2xhc3MgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmNoZWNrYm94TGFiZWwgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJpbnB1dFwiLCB7IHJlZjogdGhpcy5jaGVja1JlZiwgdHlwZTogXCJjaGVja2JveFwiLCBuYW1lOiB0aGlzLnF1ZXN0aW9uLm5hbWUsIHZhbHVlOiB0aGlzLnF1ZXN0aW9uLmJvb2xlYW5WYWx1ZSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5xdWVzdGlvbi5ib29sZWFuVmFsdWUsIGlkOiB0aGlzLnF1ZXN0aW9uLmlucHV0SWQsIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5jb250cm9sQ2hlY2tib3gsIGRpc2FibGVkOiB0aGlzLmlzRGlzcGxheU1vZGUsIGNoZWNrZWQ6IHRoaXMucXVlc3Rpb24uYm9vbGVhblZhbHVlIHx8IGZhbHNlLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVPbkNoYW5nZSwgXCJhcmlhLXJlcXVpcmVkXCI6IHRoaXMucXVlc3Rpb24uYXJpYVJlcXVpcmVkLCBcImFyaWEtbGFiZWxcIjogdGhpcy5xdWVzdGlvbi5hcmlhTGFiZWwsIFwiYXJpYS1pbnZhbGlkXCI6IHRoaXMucXVlc3Rpb24uYXJpYUludmFsaWQsIFwiYXJpYS1lcnJvcm1lc3NhZ2VcIjogdGhpcy5xdWVzdGlvbi5hcmlhRXJyb3JtZXNzYWdlIH0pLFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuY2hlY2tib3hNYXRlcmlhbERlY29yYXRvciB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi5zdmdJY29uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInN2Z1wiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5jaGVja2JveEl0ZW1EZWNvcmF0b3IgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ1c2VcIiwgeyB4bGlua0hyZWY6IHRoaXMucXVlc3Rpb24uc3ZnSWNvbiB9KSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImNoZWNrXCIgfSkpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLmlzTGFiZWxSZW5kZXJlZCAmJiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmNoZWNrYm94Q29udHJvbExhYmVsLCBpZDogdGhpcy5xdWVzdGlvbi5sYWJlbFJlbmRlcmVkQXJpYUlEIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c190aXRsZV90aXRsZV9hY3Rpb25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJUaXRsZUFjdGlvbnNcIl0sIHsgZWxlbWVudDogdGhpcy5xdWVzdGlvbiwgY3NzQ2xhc3NlczogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzIH0pKSkpLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQm9vbGVhbkNoZWNrYm94O1xufShfYm9vbGVhbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3VydmV5UXVlc3Rpb25Cb29sZWFuXCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJzdi1ib29sZWFuLWNoZWNrYm94XCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5DaGVja2JveCwgcHJvcHMpO1xufSk7XG5zdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVuZGVyZXJGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUmVuZGVyZXIoXCJib29sZWFuXCIsIFwiY2hlY2tib3hcIiwgXCJzdi1ib29sZWFuLWNoZWNrYm94XCIpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2Jvb2xlYW4tcmFkaW8udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2Jvb2xlYW4tcmFkaW8udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uQm9vbGVhblJhZGlvICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQm9vbGVhblJhZGlvXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25Cb29sZWFuUmFkaW87IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Jvb2xlYW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYm9vbGVhbiAqLyBcIi4vc3JjL3JlYWN0L2Jvb2xlYW4udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5SYWRpbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25Cb29sZWFuUmFkaW8sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25Cb29sZWFuUmFkaW8ocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmhhbmRsZU9uQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5xdWVzdGlvbi5ib29sZWFuVmFsdWUgPSBldmVudC5uYXRpdmVFdmVudC50YXJnZXQudmFsdWUgPT0gXCJ0cnVlXCI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb25Cb29sZWFuUmFkaW8ucHJvdG90eXBlLnJlbmRlclJhZGlvSXRlbSA9IGZ1bmN0aW9uICh2YWx1ZSwgbG9jVGV4dCkge1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IHJvbGU6IFwicHJlc2VudGF0aW9uXCIsIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRSYWRpb0l0ZW1DbGFzcyhjc3NDbGFzc2VzLCB2YWx1ZSkgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMucmFkaW9MYWJlbCB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiaW5wdXRcIiwgeyB0eXBlOiBcInJhZGlvXCIsIG5hbWU6IHRoaXMucXVlc3Rpb24ubmFtZSwgdmFsdWU6IHZhbHVlLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYXJpYUVycm9ybWVzc2FnZSwgY2hlY2tlZDogdmFsdWUgPT09IHRoaXMucXVlc3Rpb24uYm9vbGVhblZhbHVlUmVuZGVyZWQsIGRpc2FibGVkOiB0aGlzLnF1ZXN0aW9uLmlzSW5wdXRSZWFkT25seSwgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLml0ZW1SYWRpb0NvbnRyb2wsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZU9uQ2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5tYXRlcmlhbFJhZGlvRGVjb3JhdG9yID9cbiAgICAgICAgICAgICAgICAgICAgKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5tYXRlcmlhbFJhZGlvRGVjb3JhdG9yIH0sIHRoaXMucXVlc3Rpb24uaXRlbVN2Z0ljb24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLml0ZW1SYWRpb0RlY29yYXRvciB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidXNlXCIsIHsgeGxpbmtIcmVmOiB0aGlzLnF1ZXN0aW9uLml0ZW1TdmdJY29uIH0pKSkgOiBudWxsKSkgOiBudWxsLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5yYWRpb0NvbnRyb2xMYWJlbCB9LCB0aGlzLnJlbmRlckxvY1N0cmluZyhsb2NUZXh0KSkpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5SYWRpby5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMucm9vdFJhZGlvIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImZpZWxkc2V0XCIsIHsgcm9sZTogXCJwcmVzZW50YXRpb25cIiwgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLnJhZGlvRmllbGRzZXQgfSwgIXRoaXMucXVlc3Rpb24uc3dhcE9yZGVyID9cbiAgICAgICAgICAgICAgICAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJhZGlvSXRlbShmYWxzZSwgdGhpcy5xdWVzdGlvbi5sb2NMYWJlbEZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSYWRpb0l0ZW0odHJ1ZSwgdGhpcy5xdWVzdGlvbi5sb2NMYWJlbFRydWUpKSlcbiAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRnJhZ21lbnRcIl0sIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJhZGlvSXRlbSh0cnVlLCB0aGlzLnF1ZXN0aW9uLmxvY0xhYmVsVHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJhZGlvSXRlbShmYWxzZSwgdGhpcy5xdWVzdGlvbi5sb2NMYWJlbEZhbHNlKSkpKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQm9vbGVhblJhZGlvO1xufShfYm9vbGVhbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3VydmV5UXVlc3Rpb25Cb29sZWFuXCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJzdi1ib29sZWFuLXJhZGlvXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5SYWRpbywgcHJvcHMpO1xufSk7XG5zdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVuZGVyZXJGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUmVuZGVyZXIoXCJib29sZWFuXCIsIFwicmFkaW9cIiwgXCJzdi1ib29sZWFuLXJhZGlvXCIpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2Jvb2xlYW4udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2Jvb2xlYW4udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uQm9vbGVhbiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkJvb2xlYW5cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW47IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uQm9vbGVhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25Cb29sZWFuLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uQm9vbGVhbihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25DaGFuZ2UgPSBfdGhpcy5oYW5kbGVPbkNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlT25DbGljayA9IF90aGlzLmhhbmRsZU9uQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZU9uTGFiZWxDbGljayA9IF90aGlzLmhhbmRsZU9uTGFiZWxDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlT25Td2l0Y2hDbGljayA9IF90aGlzLmhhbmRsZU9uU3dpdGNoQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZU9uS2V5RG93biA9IF90aGlzLmhhbmRsZU9uS2V5RG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuY2hlY2tSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlUmVmXCJdKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb25Cb29sZWFuLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uQm9vbGVhbi5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qXG4gICAgcHJpdmF0ZSBnZXQgYWxsb3dDbGljaygpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uLmlzSW5kZXRlcm1pbmF0ZSAmJiAhdGhpcy5pc0Rpc3BsYXlNb2RlO1xuICAgIH1cbiAgICAqL1xuICAgIFN1cnZleVF1ZXN0aW9uQm9vbGVhbi5wcm90b3R5cGUuZG9DaGVjayA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLmJvb2xlYW5WYWx1ZSA9IHZhbHVlO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Cb29sZWFuLnByb3RvdHlwZS5oYW5kbGVPbkNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLmRvQ2hlY2soZXZlbnQudGFyZ2V0LmNoZWNrZWQpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Cb29sZWFuLnByb3RvdHlwZS5oYW5kbGVPbkNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucXVlc3Rpb24ub25MYWJlbENsaWNrKGV2ZW50LCB0cnVlKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQm9vbGVhbi5wcm90b3R5cGUuaGFuZGxlT25Td2l0Y2hDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLm9uU3dpdGNoQ2xpY2tNb2RlbChldmVudC5uYXRpdmVFdmVudCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW4ucHJvdG90eXBlLmhhbmRsZU9uTGFiZWxDbGljayA9IGZ1bmN0aW9uIChldmVudCwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5vbkxhYmVsQ2xpY2soZXZlbnQsIHZhbHVlKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQm9vbGVhbi5wcm90b3R5cGUuaGFuZGxlT25LZXlEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucXVlc3Rpb24ub25LZXlEb3duQ29yZShldmVudCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkJvb2xlYW4ucHJvdG90eXBlLnVwZGF0ZURvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5xdWVzdGlvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5jaGVja1JlZi5jdXJyZW50O1xuICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIGVsLmluZGV0ZXJtaW5hdGUgPSB0aGlzLnF1ZXN0aW9uLmlzSW5kZXRlcm1pbmF0ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldENvbnRyb2woZWwpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZURvbUVsZW1lbnQuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQm9vbGVhbi5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHZhciBpdGVtQ2xhc3MgPSB0aGlzLnF1ZXN0aW9uLmdldEl0ZW1Dc3MoKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5yb290LCBvbktleURvd246IHRoaXMuaGFuZGxlT25LZXlEb3duIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBpdGVtQ2xhc3MsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlT25DbGljayB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiaW5wdXRcIiwgeyByZWY6IHRoaXMuY2hlY2tSZWYsIHR5cGU6IFwiY2hlY2tib3hcIiwgbmFtZTogdGhpcy5xdWVzdGlvbi5uYW1lLCB2YWx1ZTogdGhpcy5xdWVzdGlvbi5ib29sZWFuVmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnF1ZXN0aW9uLmJvb2xlYW5WYWx1ZSwgaWQ6IHRoaXMucXVlc3Rpb24uaW5wdXRJZCwgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmNvbnRyb2wsIGRpc2FibGVkOiB0aGlzLmlzRGlzcGxheU1vZGUsIGNoZWNrZWQ6IHRoaXMucXVlc3Rpb24uYm9vbGVhblZhbHVlIHx8IGZhbHNlLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVPbkNoYW5nZSwgcm9sZTogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFSb2xlLCBcImFyaWEtcmVxdWlyZWRcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhTGFiZWwsIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhTGFiZWxsZWRCeSwgXCJhcmlhLWRlc2NyaWJlZGJ5XCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhRGVzY3JpYmVkQnksIFwiYXJpYS1pbnZhbGlkXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhSW52YWxpZCwgXCJhcmlhLWVycm9ybWVzc2FnZVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUVycm9ybWVzc2FnZSB9KSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5zbGlkZXJHaG9zdCwgb25DbGljazogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVPbkxhYmVsQ2xpY2soZXZlbnQsIF90aGlzLnF1ZXN0aW9uLnN3YXBPcmRlcik7IH0gfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldExhYmVsQ3NzKHRoaXMucXVlc3Rpb24uc3dhcE9yZGVyKSB9LCB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY0xhYmVsTGVmdCkpKSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5zd2l0Y2gsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlT25Td2l0Y2hDbGljayB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuc2xpZGVyIH0sIHRoaXMucXVlc3Rpb24uaXNEZXRlcm1pbmF0ZWQgJiYgY3NzQ2xhc3Nlcy5zbGlkZXJUZXh0ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5zbGlkZXJUZXh0IH0sIHRoaXMucmVuZGVyTG9jU3RyaW5nKHRoaXMucXVlc3Rpb24uZ2V0Q2hlY2tlZExhYmVsKCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsKSksXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuc2xpZGVyR2hvc3QsIG9uQ2xpY2s6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlT25MYWJlbENsaWNrKGV2ZW50LCAhX3RoaXMucXVlc3Rpb24uc3dhcE9yZGVyKTsgfSB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0TGFiZWxDc3MoIXRoaXMucXVlc3Rpb24uc3dhcE9yZGVyKSB9LCB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY0xhYmVsUmlnaHQpKSkpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25Cb29sZWFuO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJib29sZWFuXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkJvb2xlYW4sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyLWl0ZW0tZHJvcGRvd24udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyLWl0ZW0tZHJvcGRvd24udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleUFjdGlvbkJhckl0ZW1Ecm9wZG93biAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlBY3Rpb25CYXJJdGVtRHJvcGRvd25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlBY3Rpb25CYXJJdGVtRHJvcGRvd247IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wb3B1cF9wb3B1cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcG9wdXAvcG9wdXAgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BvcHVwL3BvcHVwLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYWN0aW9uX2Jhcl9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FjdGlvbi1iYXItaXRlbSAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyLWl0ZW0udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFN1cnZleUFjdGlvbkJhckl0ZW1Ecm9wZG93biA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5QWN0aW9uQmFySXRlbURyb3Bkb3duLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleUFjdGlvbkJhckl0ZW1Ecm9wZG93bihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMudmlld01vZGVsID0gbmV3IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJBY3Rpb25Ecm9wZG93blZpZXdNb2RlbFwiXShfdGhpcy5pdGVtKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlBY3Rpb25CYXJJdGVtRHJvcGRvd24ucHJvdG90eXBlLnJlbmRlcklubmVyQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnV0dG9uID0gX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJJbm5lckJ1dHRvbi5jYWxsKHRoaXMpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuRnJhZ21lbnQsIG51bGwsXG4gICAgICAgICAgICBidXR0b24sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9wb3B1cF9wb3B1cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUG9wdXBcIl0sIHsgbW9kZWw6IHRoaXMuaXRlbS5wb3B1cE1vZGVsLCBnZXRUYXJnZXQ6IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJnZXRBY3Rpb25Ecm9wZG93bkJ1dHRvblRhcmdldFwiXSB9KSkpO1xuICAgIH07XG4gICAgU3VydmV5QWN0aW9uQmFySXRlbURyb3Bkb3duLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnZpZXdNb2RlbC5kaXNwb3NlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5QWN0aW9uQmFySXRlbURyb3Bkb3duO1xufShfYWN0aW9uX2Jhcl9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJTdXJ2ZXlBY3Rpb25CYXJJdGVtXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtYWN0aW9uLWJhci1pdGVtLWRyb3Bkb3duXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN1cnZleUFjdGlvbkJhckl0ZW1Ecm9wZG93biwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXItaXRlbS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXItaXRlbS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5QWN0aW9uLCBTdXJ2ZXlBY3Rpb25CYXJJdGVtICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUFjdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleUFjdGlvbjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5QWN0aW9uQmFySXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleUFjdGlvbkJhckl0ZW07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdFN1cnZleV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vcmVhY3RTdXJ2ZXkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdFN1cnZleS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hY3Rpb25fYmFyX3NlcGFyYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY3Rpb24tYmFyLXNlcGFyYXRvciAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyLXNlcGFyYXRvci50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG5cbnZhciBTdXJ2ZXlBY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlBY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUFjdGlvbi5wcm90b3R5cGUsIFwiaXRlbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUFjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtO1xuICAgIH07XG4gICAgU3VydmV5QWN0aW9uLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3JlZmFjdG9yXG4gICAgICAgIHZhciBpdGVtQ2xhc3MgPSB0aGlzLml0ZW0uZ2V0QWN0aW9uUm9vdENzcygpO1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gdGhpcy5pdGVtLm5lZWRTZXBhcmF0b3IgPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfYWN0aW9uX2Jhcl9zZXBhcmF0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcIlN1cnZleUFjdGlvbkJhclNlcGFyYXRvclwiXSwgbnVsbCkpIDogbnVsbDtcbiAgICAgICAgdmFyIGl0ZW1Db21wb25lbnQgPSBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQodGhpcy5pdGVtLmNvbXBvbmVudCB8fCBcInN2LWFjdGlvbi1iYXItaXRlbVwiLCB7XG4gICAgICAgICAgICBpdGVtOiB0aGlzLml0ZW0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGl0ZW1DbGFzcywgaWQ6IHRoaXMuaXRlbS5pZCB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1hY3Rpb25fX2NvbnRlbnRcIiB9LFxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcixcbiAgICAgICAgICAgICAgICBpdGVtQ29tcG9uZW50KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleUFjdGlvbjtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxudmFyIFN1cnZleUFjdGlvbkJhckl0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUFjdGlvbkJhckl0ZW0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5QWN0aW9uQmFySXRlbSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5QWN0aW9uQmFySXRlbS5wcm90b3R5cGUsIFwiaXRlbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUFjdGlvbkJhckl0ZW0ucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbTtcbiAgICB9O1xuICAgIFN1cnZleUFjdGlvbkJhckl0ZW0ucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLkZyYWdtZW50LCBudWxsLCB0aGlzLnJlbmRlcklubmVyQnV0dG9uKCkpO1xuICAgIH07XG4gICAgU3VydmV5QWN0aW9uQmFySXRlbS5wcm90b3R5cGUucmVuZGVyVGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLml0ZW0uaGFzVGl0bGUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHRpdGxlQ2xhc3MgPSB0aGlzLml0ZW0uZ2V0QWN0aW9uQmFySXRlbVRpdGxlQ3NzKCk7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogdGl0bGVDbGFzcyB9LCB0aGlzLml0ZW0udGl0bGUpO1xuICAgIH07XG4gICAgU3VydmV5QWN0aW9uQmFySXRlbS5wcm90b3R5cGUucmVuZGVyQnV0dG9uQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRleHQgPSB0aGlzLnJlbmRlclRleHQoKTtcbiAgICAgICAgdmFyIHN2Z0ljb24gPSAhIXRoaXMuaXRlbS5pY29uTmFtZSA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3ZnSWNvblwiXSwgeyBjbGFzc05hbWU6IHRoaXMuaXRlbS5jc3NDbGFzc2VzLml0ZW1JY29uLCBzaXplOiB0aGlzLml0ZW0uaWNvblNpemUsIGljb25OYW1lOiB0aGlzLml0ZW0uaWNvbk5hbWUsIHRpdGxlOiB0aGlzLml0ZW0udG9vbHRpcCB8fCB0aGlzLml0ZW0udGl0bGUgfSkpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLkZyYWdtZW50LCBudWxsLFxuICAgICAgICAgICAgc3ZnSWNvbixcbiAgICAgICAgICAgIHRleHQpKTtcbiAgICB9O1xuICAgIFN1cnZleUFjdGlvbkJhckl0ZW0ucHJvdG90eXBlLnJlbmRlcklubmVyQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5pdGVtLmdldEFjdGlvbkJhckl0ZW1Dc3MoKTtcbiAgICAgICAgdmFyIHRpdGxlID0gdGhpcy5pdGVtLnRvb2x0aXAgfHwgdGhpcy5pdGVtLnRpdGxlO1xuICAgICAgICB2YXIgYnV0dG9uQ29udGVudCA9IHRoaXMucmVuZGVyQnV0dG9uQ29udGVudCgpO1xuICAgICAgICB2YXIgdGFiSW5kZXggPSB0aGlzLml0ZW0uZGlzYWJsZVRhYlN0b3AgPyAtMSA6IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IE9iamVjdChfcmVhY3RTdXJ2ZXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcImF0dGFjaEtleTJjbGlja1wiXSkocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lLCB0eXBlOiBcImJ1dHRvblwiLCBkaXNhYmxlZDogdGhpcy5pdGVtLmRpc2FibGVkLCBvbkNsaWNrOiBmdW5jdGlvbiAoYXJncykgeyByZXR1cm4gX3RoaXMuaXRlbS5hY3Rpb24oX3RoaXMuaXRlbSwgX3RoaXMuaXRlbS5nZXRJc1RydXN0ZWQoYXJncykpOyB9LCB0aXRsZTogdGl0bGUsIHRhYkluZGV4OiB0YWJJbmRleCwgXCJhcmlhLWNoZWNrZWRcIjogdGhpcy5pdGVtLmFyaWFDaGVja2VkLCBcImFyaWEtZXhwYW5kZWRcIjogdGhpcy5pdGVtLmFyaWFFeHBhbmRlZCwgcm9sZTogdGhpcy5pdGVtLmFyaWFSb2xlIH0sIGJ1dHRvbkNvbnRlbnQpLCB0aGlzLml0ZW0sIHsgcHJvY2Vzc0VzYzogZmFsc2UgfSk7XG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5QWN0aW9uQmFySXRlbTtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1hY3Rpb24tYmFyLWl0ZW1cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoU3VydmV5QWN0aW9uQmFySXRlbSwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXItc2VwYXJhdG9yLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyLXNlcGFyYXRvci50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlBY3Rpb25CYXJTZXBhcmF0b3IgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5QWN0aW9uQmFyU2VwYXJhdG9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5QWN0aW9uQmFyU2VwYXJhdG9yOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG52YXIgU3VydmV5QWN0aW9uQmFyU2VwYXJhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlBY3Rpb25CYXJTZXBhcmF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5QWN0aW9uQmFyU2VwYXJhdG9yKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5QWN0aW9uQmFyU2VwYXJhdG9yLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBcInN2LWFjdGlvbi1iYXItc2VwYXJhdG9yIFwiICsgdGhpcy5wcm9wcy5jc3NDbGFzc2VzO1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleUFjdGlvbkJhclNlcGFyYXRvcjtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtYWN0aW9uLWJhci1zZXBhcmF0b3JcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoU3VydmV5QWN0aW9uQmFyU2VwYXJhdG9yLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5QWN0aW9uQmFySXRlbURyb3Bkb3duLCBTdXJ2ZXlBY3Rpb25CYXJTZXBhcmF0b3IsIFN1cnZleUFjdGlvbkJhciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlBY3Rpb25CYXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlBY3Rpb25CYXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hY3Rpb25fYmFyX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYWN0aW9uLWJhci1pdGVtICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXItaXRlbS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2FjdGlvbl9iYXJfaXRlbV9kcm9wZG93bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY3Rpb24tYmFyLWl0ZW0tZHJvcGRvd24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci1pdGVtLWRyb3Bkb3duLnRzeFwiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUFjdGlvbkJhckl0ZW1Ecm9wZG93blwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9hY3Rpb25fYmFyX2l0ZW1fZHJvcGRvd25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlN1cnZleUFjdGlvbkJhckl0ZW1Ecm9wZG93blwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYWN0aW9uX2Jhcl9zZXBhcmF0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYWN0aW9uLWJhci1zZXBhcmF0b3IgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci1zZXBhcmF0b3IudHN4XCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5QWN0aW9uQmFyU2VwYXJhdG9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2FjdGlvbl9iYXJfc2VwYXJhdG9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJTdXJ2ZXlBY3Rpb25CYXJTZXBhcmF0b3JcIl07IH0pO1xuXG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG5cbnZhciBTdXJ2ZXlBY3Rpb25CYXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUFjdGlvbkJhciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlBY3Rpb25CYXIocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnJvb3RSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVSZWYoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5QWN0aW9uQmFyLnByb3RvdHlwZSwgXCJoYW5kbGVDbGlja1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaGFuZGxlQ2xpY2sgIT09IHVuZGVmaW5lZCA/IHRoaXMucHJvcHMuaGFuZGxlQ2xpY2sgOiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUFjdGlvbkJhci5wcm90b3R5cGUsIFwibW9kZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm1vZGVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5QWN0aW9uQmFyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMubW9kZWwuaGFzQWN0aW9ucylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucm9vdFJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoISFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwuaW5pdFJlc3BvbnNpdml0eU1hbmFnZXIoY29udGFpbmVyLCBmdW5jdGlvbiAoY2FsbGJhY2spIHsgc2V0VGltZW91dChjYWxsYmFjayk7IH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlBY3Rpb25CYXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghIXRoaXMubW9kZWwuaGFzQWN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5tb2RlbC5yZXNldFJlc3BvbnNpdml0eU1hbmFnZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5QWN0aW9uQmFyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUuY2FsbCh0aGlzLCBwcmV2UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICAgIGlmIChwcmV2UHJvcHMubW9kZWwgPT0gdGhpcy5wcm9wcy5tb2RlbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMubW9kZWwuaGFzQWN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5tb2RlbC5yZXNldFJlc3BvbnNpdml0eU1hbmFnZXIoKTtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnJvb3RSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmICghIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuaW5pdFJlc3BvbnNpdml0eU1hbmFnZXIoY29udGFpbmVyLCBmdW5jdGlvbiAoY2FsbGJhY2spIHsgc2V0VGltZW91dChjYWxsYmFjayk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlBY3Rpb25CYXIucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWw7XG4gICAgfTtcbiAgICBTdXJ2ZXlBY3Rpb25CYXIucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5tb2RlbC5oYXNBY3Rpb25zKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMucmVuZGVySXRlbXMoKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiB0aGlzLnJvb3RSZWYsIGNsYXNzTmFtZTogdGhpcy5tb2RlbC5nZXRSb290Q3NzKCksIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgPyBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWQgfSwgaXRlbXMpKTtcbiAgICB9O1xuICAgIFN1cnZleUFjdGlvbkJhci5wcm90b3R5cGUucmVuZGVySXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsLnJlbmRlcmVkQWN0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGl0ZW1JbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9hY3Rpb25fYmFyX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleUFjdGlvblwiXSwgeyBpdGVtOiBpdGVtLCBrZXk6IFwiaXRlbVwiICsgaXRlbUluZGV4IH0pKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5QWN0aW9uQmFyO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LWFjdGlvbi1iYXJcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoU3VydmV5QWN0aW9uQmFyLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2JyYW5kLWluZm8udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9icmFuZC1pbmZvLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IEJyYW5kSW5mbyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJCcmFuZEluZm9cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBCcmFuZEluZm87IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxudmFyIEJyYW5kSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnJhbmRJbmZvLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJyYW5kSW5mbygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBCcmFuZEluZm8ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN2LWJyYW5kLWluZm9cIiB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImFcIiwgeyBjbGFzc05hbWU6IFwic3YtYnJhbmQtaW5mb19fbG9nb1wiLCBocmVmOiBcImh0dHBzOi8vc3VydmV5anMuaW8vP3V0bV9zb3VyY2U9YnVpbHQtaW5fbGlua3MmdXRtX21lZGl1bT1vbmxpbmVfc3VydmV5X3Rvb2wmdXRtX2NhbXBhaWduPWxhbmRpbmdfcGFnZVwiIH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImltZ1wiLCB7IHNyYzogXCJodHRwczovL3N1cnZleWpzLmlvL0NvbnRlbnQvSW1hZ2VzL3Bvd2VyZWRieS5zdmdcIiB9KSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN2LWJyYW5kLWluZm9fX3RleHRcIiB9LFxuICAgICAgICAgICAgICAgIFwiVHJ5IGFuZCBzZWUgaG93IGVhc3kgaXQgaXMgdG8gXCIsXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImFcIiwgeyBocmVmOiBcImh0dHBzOi8vc3VydmV5anMuaW8vY3JlYXRlLXN1cnZleT91dG1fc291cmNlPWJ1aWx0LWluX2xpbmtzJnV0bV9tZWRpdW09b25saW5lX3N1cnZleV90b29sJnV0bV9jYW1wYWlnbj1jcmVhdGVfc3VydmV5XCIgfSwgXCJjcmVhdGUgYSBzdXJ2ZXlcIikpLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1icmFuZC1pbmZvX190ZXJtc1wiIH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImFcIiwgeyBocmVmOiBcImh0dHBzOi8vc3VydmV5anMuaW8vVGVybXNPZlVzZVwiIH0sIFwiVGVybXMgb2YgVXNlICYgUHJpdmFjeSBTdGF0ZW1lbnRcIikpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnJhbmRJbmZvO1xufShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5Db21wb25lbnQpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvY2hhcmFjdGVyLWNvdW50ZXIudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvY2hhcmFjdGVyLWNvdW50ZXIudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IENoYXJhY3RlckNvdW50ZXJDb21wb25lbnQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIENoYXJhY3RlckNvdW50ZXJDb21wb25lbnQ7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDaGFyYWN0ZXJDb3VudGVyQ29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIENoYXJhY3RlckNvdW50ZXJDb21wb25lbnQucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY291bnRlcjtcbiAgICB9O1xuICAgIENoYXJhY3RlckNvdW50ZXJDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5wcm9wcy5yZW1haW5pbmdDaGFyYWN0ZXJDb3VudGVyIH0sIHRoaXMucHJvcHMuY291bnRlci5yZW1haW5pbmdDaGFyYWN0ZXJDb3VudGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudDtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1jaGFyYWN0ZXItY291bnRlclwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChDaGFyYWN0ZXJDb3VudGVyQ29tcG9uZW50LCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2NvbXBvbmVudHMtY29udGFpbmVyLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL2NvbXBvbmVudHMtY29udGFpbmVyLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBDb21wb25lbnRzQ29udGFpbmVyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkNvbXBvbmVudHNDb250YWluZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBDb21wb25lbnRzQ29udGFpbmVyOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG52YXIgQ29tcG9uZW50c0NvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29tcG9uZW50c0NvbnRhaW5lciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb21wb25lbnRzQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIENvbXBvbmVudHNDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSB0aGlzLnByb3BzLnN1cnZleS5nZXRDb250YWluZXJDb250ZW50KHRoaXMucHJvcHMuY29udGFpbmVyKTtcbiAgICAgICAgdmFyIG5lZWRSZW5kZXJXcmFwcGVyID0gdGhpcy5wcm9wcy5uZWVkUmVuZGVyV3JhcHBlciA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgIGlmIChjb21wb25lbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5lZWRSZW5kZXJXcmFwcGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5GcmFnbWVudCwgbnVsbCwgY29tcG9uZW50cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50LmNvbXBvbmVudCwgeyBzdXJ2ZXk6IF90aGlzLnByb3BzLnN1cnZleSwgbW9kZWw6IGNvbXBvbmVudC5kYXRhLCBjb250YWluZXI6IF90aGlzLnByb3BzLmNvbnRhaW5lciwga2V5OiBjb21wb25lbnQuaWQgfSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3YtY29tcG9uZW50cy1jb2x1bW5cIiB9LCBjb21wb25lbnRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KGNvbXBvbmVudC5jb21wb25lbnQsIHsgc3VydmV5OiBfdGhpcy5wcm9wcy5zdXJ2ZXksIG1vZGVsOiBjb21wb25lbnQuZGF0YSwgY29udGFpbmVyOiBfdGhpcy5wcm9wcy5jb250YWluZXIsIGtleTogY29tcG9uZW50LmlkIH0pO1xuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tcG9uZW50c0NvbnRhaW5lcjtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtY29tcG9uZW50cy1jb250YWluZXJcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50c0NvbnRhaW5lciwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9maWxlL2ZpbGUtY2hvb3NlLWJ1dHRvbi50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9maWxlL2ZpbGUtY2hvb3NlLWJ1dHRvbi50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5RmlsZUNob29zZUJ1dHRvbiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlGaWxlQ2hvb3NlQnV0dG9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5RmlsZUNob29zZUJ1dHRvbjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RTdXJ2ZXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3JlYWN0U3VydmV5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RTdXJ2ZXkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG52YXIgU3VydmV5RmlsZUNob29zZUJ1dHRvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5RmlsZUNob29zZUJ1dHRvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlGaWxlQ2hvb3NlQnV0dG9uKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUZpbGVDaG9vc2VCdXR0b24ucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMucHJvcHMuaXRlbSAmJiB0aGlzLnByb3BzLml0ZW0uZGF0YS5xdWVzdGlvbikgfHwgdGhpcy5wcm9wcy5kYXRhLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RmlsZUNob29zZUJ1dHRvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gT2JqZWN0KF9yZWFjdFN1cnZleV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiYXR0YWNoS2V5MmNsaWNrXCJdKShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgeyB0YWJJbmRleDogMCwgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldENob29zZUZpbGVDc3MoKSwgaHRtbEZvcjogdGhpcy5xdWVzdGlvbi5pbnB1dElkLCBcImFyaWEtbGFiZWxcIjogdGhpcy5xdWVzdGlvbi5jaG9vc2VCdXR0b25UZXh0LCBvbkNsaWNrOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMucXVlc3Rpb24uY2hvb3NlRmlsZShlLm5hdGl2ZUV2ZW50KTsgfSB9LFxuICAgICAgICAgICAgKCEhdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNob29zZUZpbGVJY29uSWQpID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN2Z0ljb25cIl0sIHsgdGl0bGU6IHRoaXMucXVlc3Rpb24uY2hvb3NlQnV0dG9uVGV4dCwgaWNvbk5hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jaG9vc2VGaWxlSWNvbklkLCBzaXplOiBcImF1dG9cIiB9KSA6IG51bGwsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsLCB0aGlzLnF1ZXN0aW9uLmNob29zZUJ1dHRvblRleHQpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5RmlsZUNob29zZUJ1dHRvbjtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50XCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtZmlsZS1jaG9vc2UtYnRuXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN1cnZleUZpbGVDaG9vc2VCdXR0b24sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvZmlsZS9maWxlLXByZXZpZXcudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvZmlsZS9maWxlLXByZXZpZXcudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleUZpbGVQcmV2aWV3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUZpbGVQcmV2aWV3XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5RmlsZVByZXZpZXc7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG52YXIgU3VydmV5RmlsZVByZXZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUZpbGVQcmV2aWV3LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleUZpbGVQcmV2aWV3KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlGaWxlUHJldmlldy5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RmlsZVByZXZpZXcucHJvdG90eXBlLnJlbmRlckZpbGVTaWduID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgdmFsKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghY2xhc3NOYW1lIHx8ICF2YWwubmFtZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImFcIiwgeyBocmVmOiB2YWwuY29udGVudCwgb25DbGljazogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXN0aW9uLmRvRG93bmxvYWRGaWxlKGV2ZW50LCB2YWwpO1xuICAgICAgICAgICAgICAgIH0sIHRpdGxlOiB2YWwubmFtZSwgZG93bmxvYWQ6IHZhbC5uYW1lLCBzdHlsZTogeyB3aWR0aDogdGhpcy5xdWVzdGlvbi5pbWFnZVdpZHRoIH0gfSwgdmFsLm5hbWUpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlGaWxlUHJldmlldy5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHByZXZpZXdzID0gdGhpcy5xdWVzdGlvbi5wcmV2aWV3VmFsdWUubWFwKGZ1bmN0aW9uICh2YWwsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXZhbClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBrZXk6IF90aGlzLnF1ZXN0aW9uLmlucHV0SWQgKyBcIl9cIiArIGluZGV4LCBjbGFzc05hbWU6IF90aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucHJldmlldywgc3R5bGU6IHsgZGlzcGxheTogX3RoaXMucXVlc3Rpb24uaXNQcmV2aWV3VmlzaWJsZShpbmRleCkgPyB1bmRlZmluZWQgOiBcIm5vbmVcIiB9IH0sXG4gICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyRmlsZVNpZ24oX3RoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5maWxlU2lnbiwgdmFsKSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBfdGhpcy5xdWVzdGlvbi5nZXRJbWFnZVdyYXBwZXJDc3ModmFsKSB9LFxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWVzdGlvbi5jYW5QcmV2aWV3SW1hZ2UodmFsKSA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHsgc3JjOiB2YWwuY29udGVudCwgc3R5bGU6IHsgaGVpZ2h0OiBfdGhpcy5xdWVzdGlvbi5pbWFnZUhlaWdodCwgd2lkdGg6IF90aGlzLnF1ZXN0aW9uLmltYWdlV2lkdGggfSwgYWx0OiBcIkZpbGUgcHJldmlld1wiIH0pKSA6IChfdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmRlZmF1bHRJbWFnZSA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogX3RoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5kZWZhdWx0SW1hZ2VJY29uSWQsIHNpemU6IFwiYXV0b1wiLCBjbGFzc05hbWU6IF90aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuZGVmYXVsdEltYWdlIH0pKSA6IG51bGwpLFxuICAgICAgICAgICAgICAgICAgICB2YWwubmFtZSAmJiAhX3RoaXMucXVlc3Rpb24uaXNSZWFkT25seSA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBfdGhpcy5xdWVzdGlvbi5nZXRSZW1vdmVCdXR0b25Dc3MoKSwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucXVlc3Rpb24uZG9SZW1vdmVGaWxlKHZhbCk7IH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBfdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnJlbW92ZUZpbGUgfSwgX3RoaXMucXVlc3Rpb24ucmVtb3ZlRmlsZUNhcHRpb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgKF90aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucmVtb3ZlRmlsZVN2Z0ljb25JZCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3ZnSWNvblwiXSwgeyB0aXRsZTogX3RoaXMucXVlc3Rpb24ucmVtb3ZlRmlsZUNhcHRpb24sIGljb25OYW1lOiBfdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnJlbW92ZUZpbGVTdmdJY29uSWQsIHNpemU6IFwiYXV0b1wiLCBjbGFzc05hbWU6IF90aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucmVtb3ZlRmlsZVN2ZyB9KSkgOiBudWxsKSkgOiBudWxsKSxcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJGaWxlU2lnbihfdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmZpbGVTaWduQm90dG9tLCB2YWwpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmZpbGVMaXN0IHx8IHVuZGVmaW5lZCB9LCBwcmV2aWV3cyk7XG4gICAgfTtcbiAgICBTdXJ2ZXlGaWxlUHJldmlldy5wcm90b3R5cGUuY2FuUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbi5zaG93UHJldmlld0NvbnRhaW5lcjtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlGaWxlUHJldmlldztcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1maWxlLXByZXZpZXdcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoU3VydmV5RmlsZVByZXZpZXcsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvaGVhZGVyLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9oZWFkZXIudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBIZWFkZXJNb2JpbGUsIEhlYWRlckNlbGwsIEhlYWRlciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJIZWFkZXJNb2JpbGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBIZWFkZXJNb2JpbGU7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkhlYWRlckNlbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBIZWFkZXJDZWxsOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJIZWFkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBIZWFkZXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90aXRsZV90aXRsZV9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RpdGxlL3RpdGxlLWVsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWVsZW1lbnQudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBIZWFkZXJNb2JpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEhlYWRlck1vYmlsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBIZWFkZXJNb2JpbGUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEhlYWRlck1vYmlsZS5wcm90b3R5cGUsIFwibW9kZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm1vZGVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSGVhZGVyTW9iaWxlLnByb3RvdHlwZS5yZW5kZXJMb2dvSW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb21wb25lbnROYW1lID0gdGhpcy5tb2RlbC5zdXJ2ZXkuZ2V0RWxlbWVudFdyYXBwZXJDb21wb25lbnROYW1lKHRoaXMubW9kZWwuc3VydmV5LCBcImxvZ28taW1hZ2VcIik7XG4gICAgICAgIHZhciBjb21wb25lbnREYXRhID0gdGhpcy5tb2RlbC5zdXJ2ZXkuZ2V0RWxlbWVudFdyYXBwZXJDb21wb25lbnREYXRhKHRoaXMubW9kZWwuc3VydmV5LCBcImxvZ28taW1hZ2VcIik7XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TmFtZSwge1xuICAgICAgICAgICAgZGF0YTogY29tcG9uZW50RGF0YSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBIZWFkZXJNb2JpbGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN2LWhlYWRlci0tbW9iaWxlXCIgfSxcbiAgICAgICAgICAgIHRoaXMubW9kZWwuc3VydmV5Lmhhc0xvZ28gPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1oZWFkZXJfX2xvZ29cIiB9LCB0aGlzLnJlbmRlckxvZ29JbWFnZSgpKSkgOiBudWxsLFxuICAgICAgICAgICAgdGhpcy5tb2RlbC5zdXJ2ZXkuaGFzVGl0bGUgPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1oZWFkZXJfX3RpdGxlXCIsIHN0eWxlOiB7IG1heFdpZHRoOiB0aGlzLm1vZGVsLnRleHRBcmVhV2lkdGggfSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX3RpdGxlX3RpdGxlX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlRpdGxlRWxlbWVudFwiXSwgeyBlbGVtZW50OiB0aGlzLm1vZGVsLnN1cnZleSB9KSkpIDogbnVsbCxcbiAgICAgICAgICAgIHRoaXMubW9kZWwuc3VydmV5LnJlbmRlcmVkSGFzRGVzY3JpcHRpb24gPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1oZWFkZXJfX2Rlc2NyaXB0aW9uXCIsIHN0eWxlOiB7IG1heFdpZHRoOiB0aGlzLm1vZGVsLnRleHRBcmVhV2lkdGggfSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMubW9kZWwuc3VydmV5LmNzcy5kZXNjcmlwdGlvbiB9LCBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJMb2NTdHJpbmcodGhpcy5tb2RlbC5zdXJ2ZXkubG9jRGVzY3JpcHRpb24pKSkpIDogbnVsbCkpO1xuICAgIH07XG4gICAgcmV0dXJuIEhlYWRlck1vYmlsZTtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cbnZhciBIZWFkZXJDZWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhIZWFkZXJDZWxsLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEhlYWRlckNlbGwoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEhlYWRlckNlbGwucHJvdG90eXBlLCBcIm1vZGVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEhlYWRlckNlbGwucHJvdG90eXBlLnJlbmRlckxvZ29JbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSB0aGlzLm1vZGVsLnN1cnZleS5nZXRFbGVtZW50V3JhcHBlckNvbXBvbmVudE5hbWUodGhpcy5tb2RlbC5zdXJ2ZXksIFwibG9nby1pbWFnZVwiKTtcbiAgICAgICAgdmFyIGNvbXBvbmVudERhdGEgPSB0aGlzLm1vZGVsLnN1cnZleS5nZXRFbGVtZW50V3JhcHBlckNvbXBvbmVudERhdGEodGhpcy5tb2RlbC5zdXJ2ZXksIFwibG9nby1pbWFnZVwiKTtcbiAgICAgICAgcmV0dXJuIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UuY3JlYXRlRWxlbWVudChjb21wb25lbnROYW1lLCB7XG4gICAgICAgICAgICBkYXRhOiBjb21wb25lbnREYXRhLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEhlYWRlckNlbGwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzcywgc3R5bGU6IHRoaXMubW9kZWwuc3R5bGUgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3YtaGVhZGVyX19jZWxsLWNvbnRlbnRcIiwgc3R5bGU6IHRoaXMubW9kZWwuY29udGVudFN0eWxlIH0sXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zaG93TG9nbyA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN2LWhlYWRlcl9fbG9nb1wiIH0sIHRoaXMucmVuZGVyTG9nb0ltYWdlKCkpKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zaG93VGl0bGUgPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1oZWFkZXJfX3RpdGxlXCIsIHN0eWxlOiB7IG1heFdpZHRoOiB0aGlzLm1vZGVsLnRleHRBcmVhV2lkdGggfSB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF90aXRsZV90aXRsZV9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJUaXRsZUVsZW1lbnRcIl0sIHsgZWxlbWVudDogdGhpcy5tb2RlbC5zdXJ2ZXkgfSkpKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zaG93RGVzY3JpcHRpb24gPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1oZWFkZXJfX2Rlc2NyaXB0aW9uXCIsIHN0eWxlOiB7IG1heFdpZHRoOiB0aGlzLm1vZGVsLnRleHRBcmVhV2lkdGggfSB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLnN1cnZleS5jc3MuZGVzY3JpcHRpb24gfSwgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0ucmVuZGVyTG9jU3RyaW5nKHRoaXMubW9kZWwuc3VydmV5LmxvY0Rlc2NyaXB0aW9uKSkpKSA6IG51bGwpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gSGVhZGVyQ2VsbDtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cbnZhciBIZWFkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEhlYWRlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBIZWFkZXIoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEhlYWRlci5wcm90b3R5cGUsIFwibW9kZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm1vZGVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSGVhZGVyLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICAgIH07XG4gICAgSGVhZGVyLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1vZGVsLnN1cnZleSA9IHRoaXMucHJvcHMuc3VydmV5O1xuICAgICAgICBpZiAoISh0aGlzLnByb3BzLnN1cnZleS5oZWFkZXJWaWV3ID09PSBcImFkdmFuY2VkXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGVhZGVyQ29udGVudCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnN1cnZleS5pc01vYmlsZSkge1xuICAgICAgICAgICAgaGVhZGVyQ29udGVudCA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoSGVhZGVyTW9iaWxlLCB7IG1vZGVsOiB0aGlzLm1vZGVsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGVhZGVyQ29udGVudCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNvbnRlbnRDbGFzc2VzLCBzdHlsZTogeyBtYXhXaWR0aDogdGhpcy5tb2RlbC5tYXhXaWR0aCB9IH0sIHRoaXMubW9kZWwuY2VsbHMubWFwKGZ1bmN0aW9uIChjZWxsLCBpbmRleCkgeyByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChIZWFkZXJDZWxsLCB7IGtleTogaW5kZXgsIG1vZGVsOiBjZWxsIH0pOyB9KSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5tb2RlbC5oZWFkZXJDbGFzc2VzLCBzdHlsZTogeyBoZWlnaHQ6IHRoaXMubW9kZWwucmVuZGVyZWRIZWlnaHQgfSB9LFxuICAgICAgICAgICAgdGhpcy5tb2RlbC5iYWNrZ3JvdW5kSW1hZ2UgPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHRoaXMubW9kZWwuYmFja2dyb3VuZEltYWdlU3R5bGUsIGNsYXNzTmFtZTogdGhpcy5tb2RlbC5iYWNrZ3JvdW5kSW1hZ2VDbGFzc2VzIH0pIDogbnVsbCxcbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQpKTtcbiAgICB9O1xuICAgIHJldHVybiBIZWFkZXI7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtaGVhZGVyXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KEhlYWRlciwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9saXN0L2xpc3QtaXRlbS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9saXN0L2xpc3QtaXRlbS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogTGlzdEl0ZW0gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTGlzdEl0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBMaXN0SXRlbTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0U3VydmV5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9yZWFjdFN1cnZleSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0U3VydmV5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG52YXIgTGlzdEl0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExpc3RJdGVtLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExpc3RJdGVtKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlS2V5ZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMubW9kZWwub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdEl0ZW0ucHJvdG90eXBlLCBcIm1vZGVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaXN0SXRlbS5wcm90b3R5cGUsIFwiaXRlbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIExpc3RJdGVtLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW07XG4gICAgfTtcbiAgICBMaXN0SXRlbS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXRlbSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgY29udGVudFdyYXBTdHlsZSA9IHtcbiAgICAgICAgICAgIHBhZGRpbmdJbmxpbmVTdGFydDogdGhpcy5tb2RlbC5nZXRJdGVtSW5kZW50KHRoaXMuaXRlbSlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMubW9kZWwuZ2V0SXRlbUNsYXNzKHRoaXMuaXRlbSk7XG4gICAgICAgIHZhciBjb250ZW50ID0gW107XG4gICAgICAgIGlmICghdGhpcy5pdGVtLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLml0ZW0ubG9jVGl0bGUsIHVuZGVmaW5lZCwgXCJsb2NTdHJpbmdcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5pdGVtLmljb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb24gPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3ZnSWNvblwiXSwgeyBrZXk6IDEsIGNsYXNzTmFtZTogdGhpcy5tb2RlbC5jc3NDbGFzc2VzLml0ZW1JY29uLCBpY29uTmFtZTogdGhpcy5pdGVtLmljb25OYW1lLCBzaXplOiB0aGlzLml0ZW0uaWNvblNpemUsIFwiYXJpYS1sYWJlbFwiOiB0aGlzLml0ZW0udGl0bGUgfSk7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKGljb24pO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGtleTogMiB9LCB0ZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2godGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UuY3JlYXRlRWxlbWVudCh0aGlzLml0ZW0uY29tcG9uZW50LCB7IGl0ZW06IHRoaXMuaXRlbSwga2V5OiB0aGlzLml0ZW0uaWQgfSk7XG4gICAgICAgICAgICBpZiAoISFuZXdFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKG5ld0VsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjb250ZW50V3JhcCA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZTogY29udGVudFdyYXBTdHlsZSwgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzc0NsYXNzZXMuaXRlbUJvZHksIHRpdGxlOiB0aGlzLml0ZW0ubG9jVGl0bGUuY2FsY3VsYXRlZFRleHQgfSwgY29udGVudCk7XG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSB0aGlzLml0ZW0ubmVlZFNlcGFyYXRvciA/IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMubW9kZWwuY3NzQ2xhc3Nlcy5pdGVtU2VwYXJhdG9yIH0pIDogbnVsbDtcbiAgICAgICAgdmFyIGlzVmlzaWJsZSA9IHRoaXMubW9kZWwuaXNJdGVtVmlzaWJsZSh0aGlzLml0ZW0pO1xuICAgICAgICB2YXIgc3R5bGUgPSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBpc1Zpc2libGUgPyBudWxsIDogXCJub25lXCJcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE9iamVjdChfcmVhY3RTdXJ2ZXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcImF0dGFjaEtleTJjbGlja1wiXSkocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImxpXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHJvbGU6IFwib3B0aW9uXCIsIHN0eWxlOiBzdHlsZSwgaWQ6IHRoaXMuaXRlbS5lbGVtZW50SWQsIFwiYXJpYS1zZWxlY3RlZFwiOiB0aGlzLm1vZGVsLmlzSXRlbVNlbGVjdGVkKHRoaXMuaXRlbSksIG9uQ2xpY2s6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm1vZGVsLm9uSXRlbUNsaWNrKF90aGlzLml0ZW0pO1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfSwgb25Qb2ludGVyRG93bjogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5tb2RlbC5vblBvaW50ZXJEb3duKGV2ZW50LCBfdGhpcy5pdGVtKTsgfSB9LFxuICAgICAgICAgICAgc2VwYXJhdG9yLFxuICAgICAgICAgICAgY29udGVudFdyYXApKTtcbiAgICB9O1xuICAgIExpc3RJdGVtLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm1vZGVsLm9uTGFzdEl0ZW1SZW5kZWQodGhpcy5pdGVtKTtcbiAgICB9O1xuICAgIHJldHVybiBMaXN0SXRlbTtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1saXN0LWl0ZW1cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW0sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbGlzdC9saXN0LnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9saXN0L2xpc3QudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBMaXN0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxpc3RcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBMaXN0OyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBzdXJ2ZXktY29yZSAqLyBcInN1cnZleS1jb3JlXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc3ZnLWljb24vc3ZnLWljb24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbGlzdF9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xpc3QtaXRlbSAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbGlzdC9saXN0LWl0ZW0udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxuXG52YXIgTGlzdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGlzdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBMaXN0KHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5oYW5kbGVLZXlkb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5tb2RlbC5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5oYW5kbGVNb3VzZU1vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLm1vZGVsLm9uTW91c2VNb3ZlKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBmaWx0ZXJTdHJpbmc6IF90aGlzLm1vZGVsLmZpbHRlclN0cmluZyB8fCBcIlwiXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmxpc3RDb250YWluZXJSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVSZWYoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdC5wcm90b3R5cGUsIFwibW9kZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm1vZGVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTGlzdC5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RlbDtcbiAgICB9O1xuICAgIExpc3QucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghIXRoaXMubGlzdENvbnRhaW5lclJlZiAmJiAhIXRoaXMubGlzdENvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsLmluaXRMaXN0Q29udGFpbmVySHRtbEVsZW1lbnQodGhpcy5saXN0Q29udGFpbmVyUmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMaXN0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoISF0aGlzLm1vZGVsKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsLmluaXRMaXN0Q29udGFpbmVySHRtbEVsZW1lbnQodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTGlzdC5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzc0NsYXNzZXMucm9vdCwgcmVmOiB0aGlzLmxpc3RDb250YWluZXJSZWYgfSxcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRWxlbWVudENvbnRlbnQoKSxcbiAgICAgICAgICAgIHRoaXMuZW1wdHlDb250ZW50KCksXG4gICAgICAgICAgICB0aGlzLnJlbmRlckxpc3QoKSkpO1xuICAgIH07XG4gICAgTGlzdC5wcm90b3R5cGUucmVuZGVyTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsLnJlbmRlckVsZW1lbnRzKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMucmVuZGVySXRlbXMoKTtcbiAgICAgICAgdmFyIHVsU3R5bGUgPSB7IGRpc3BsYXk6IHRoaXMubW9kZWwuaXNFbXB0eSA/IFwibm9uZVwiIDogbnVsbCB9O1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCB7IGNsYXNzTmFtZTogdGhpcy5tb2RlbC5nZXRMaXN0Q2xhc3MoKSwgc3R5bGU6IHVsU3R5bGUsIHJvbGU6IFwibGlzdGJveFwiLCBpZDogdGhpcy5tb2RlbC5lbGVtZW50SWQsIG9uTW91c2VEb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0sIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlkb3duLCBvbk1vdXNlTW92ZTogdGhpcy5oYW5kbGVNb3VzZU1vdmUgfSwgaXRlbXMpKTtcbiAgICB9O1xuICAgIExpc3QucHJvdG90eXBlLnJlbmRlckl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMubW9kZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMubW9kZWwucmVuZGVyZWRBY3Rpb25zO1xuICAgICAgICBpZiAoIWl0ZW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtLCBpdGVtSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfbGlzdF9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJMaXN0SXRlbVwiXSwgeyBtb2RlbDogX3RoaXMubW9kZWwsIGl0ZW06IGl0ZW0sIGtleTogXCJpdGVtXCIgKyBpdGVtSW5kZXggfSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExpc3QucHJvdG90eXBlLnNlYXJjaEVsZW1lbnRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMubW9kZWwuc2hvd0ZpbHRlcilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBvbkNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic2V0dGluZ3NcIl0uZW52aXJvbm1lbnQucm9vdDtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHJvb3QuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5tb2RlbC5maWx0ZXJTdHJpbmcgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9uS2V5VXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLm1vZGVsLmdvVG9JdGVtcyhlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgY2xlYXJCdXR0b24gPSB0aGlzLm1vZGVsLnNob3dTZWFyY2hDbGVhckJ1dHRvbiAmJiAhIXRoaXMubW9kZWwuZmlsdGVyU3RyaW5nID9cbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzc0NsYXNzZXMuc2VhcmNoQ2xlYXJCdXR0b25JY29uLCBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHsgX3RoaXMubW9kZWwub25DbGlja1NlYXJjaENsZWFyQnV0dG9uKGV2ZW50KTsgfSB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogXCJpY29uLXNlYXJjaGNsZWFyXCIsIHNpemU6IFwiYXV0b1wiIH0pKSA6IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMubW9kZWwuY3NzQ2xhc3Nlcy5maWx0ZXIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzc0NsYXNzZXMuZmlsdGVySWNvbiB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogXCJpY29uLXNlYXJjaFwiLCBzaXplOiBcImF1dG9cIiB9KSksXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsYXNzTmFtZTogdGhpcy5tb2RlbC5jc3NDbGFzc2VzLmZpbHRlcklucHV0LCBcImFyaWEtbGFiZWxcIjogdGhpcy5tb2RlbC5maWx0ZXJTdHJpbmdQbGFjZWhvbGRlciwgcGxhY2Vob2xkZXI6IHRoaXMubW9kZWwuZmlsdGVyU3RyaW5nUGxhY2Vob2xkZXIsIHZhbHVlOiB0aGlzLnN0YXRlLmZpbHRlclN0cmluZywgb25LZXlVcDogb25LZXlVcCwgb25DaGFuZ2U6IG9uQ2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgIGNsZWFyQnV0dG9uKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExpc3QucHJvdG90eXBlLmVtcHR5Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0geyBkaXNwbGF5OiB0aGlzLm1vZGVsLmlzRW1wdHkgPyBudWxsIDogXCJub25lXCIgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzc0NsYXNzZXMuZW1wdHlDb250YWluZXIsIHN0eWxlOiBzdHlsZSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5tb2RlbC5jc3NDbGFzc2VzLmVtcHR5VGV4dCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubW9kZWwuZW1wdHlNZXNzYWdlIH0sIHRoaXMubW9kZWwuZW1wdHlNZXNzYWdlKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIExpc3Q7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtbGlzdFwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChMaXN0LCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2xvYWRpbmctaW5kaWNhdG9yLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL2xvYWRpbmctaW5kaWNhdG9yLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBMb2FkaW5nSW5kaWNhdG9yQ29tcG9uZW50ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxvYWRpbmdJbmRpY2F0b3JDb21wb25lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBMb2FkaW5nSW5kaWNhdG9yQ29tcG9uZW50OyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxudmFyIExvYWRpbmdJbmRpY2F0b3JDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExvYWRpbmdJbmRpY2F0b3JDb21wb25lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTG9hZGluZ0luZGljYXRvckNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBMb2FkaW5nSW5kaWNhdG9yQ29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic2QtbG9hZGluZy1pbmRpY2F0b3JcIiB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdmdJY29uXCJdLCB7IGljb25OYW1lOiBcImljb24tbG9hZGluZ1wiLCBzaXplOiBcImF1dG9cIiB9KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIExvYWRpbmdJbmRpY2F0b3JDb21wb25lbnQ7XG59KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJDb21wb25lbnRcIl0pKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbWF0cml4LWFjdGlvbnMvZGV0YWlsLWJ1dHRvbi9kZXRhaWwtYnV0dG9uLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9tYXRyaXgtYWN0aW9ucy9kZXRhaWwtYnV0dG9uL2RldGFpbC1idXR0b24udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERldGFpbEJ1dHRvbiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeERldGFpbEJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbk1hdHJpeERldGFpbEJ1dHRvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERldGFpbEJ1dHRvbihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25TaG93SGlkZUNsaWNrID0gX3RoaXMuaGFuZGxlT25TaG93SGlkZUNsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhEZXRhaWxCdXR0b24ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhEZXRhaWxCdXR0b24ucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5pdGVtLmRhdGEucXVlc3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhEZXRhaWxCdXR0b24ucHJvdG90eXBlLCBcInJvd1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbS5kYXRhLnJvdztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uLnByb3RvdHlwZS5oYW5kbGVPblNob3dIaWRlQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5yb3cuc2hvd0hpZGVEZXRhaWxQYW5lbENsaWNrKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERldGFpbEJ1dHRvbi5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlzRXhwYW5kZWQgPSB0aGlzLnJvdy5pc0RldGFpbFBhbmVsU2hvd2luZztcbiAgICAgICAgdmFyIGFyaWFFeHBhbmRlZCA9IGlzRXhwYW5kZWQ7XG4gICAgICAgIHZhciBhcmlhQ29udHJvbHMgPSBpc0V4cGFuZGVkID8gdGhpcy5yb3cuZGV0YWlsUGFuZWxJZCA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgb25DbGljazogdGhpcy5oYW5kbGVPblNob3dIaWRlQ2xpY2ssIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXREZXRhaWxQYW5lbEJ1dHRvbkNzcyh0aGlzLnJvdyksIFwiYXJpYS1leHBhbmRlZFwiOiBhcmlhRXhwYW5kZWQsIFwiYXJpYS1jb250cm9sc1wiOiBhcmlhQ29udHJvbHMgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdmdJY29uXCJdLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXREZXRhaWxQYW5lbEljb25Dc3ModGhpcy5yb3cpLCBpY29uTmFtZTogdGhpcy5xdWVzdGlvbi5nZXREZXRhaWxQYW5lbEljb25JZCh0aGlzLnJvdyksIHNpemU6IFwiYXV0b1wiIH0pKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEZXRhaWxCdXR0b247XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LW1hdHJpeC1kZXRhaWwtYnV0dG9uXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN1cnZleVF1ZXN0aW9uTWF0cml4RGV0YWlsQnV0dG9uLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL21hdHJpeC1hY3Rpb25zL2RyYWctZHJvcC1pY29uL2RyYWctZHJvcC1pY29uLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL21hdHJpeC1hY3Rpb25zL2RyYWctZHJvcC1pY29uL2RyYWctZHJvcC1pY29uLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNEcmFnRHJvcEljb24gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljRHJhZ0Ryb3BJY29uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljRHJhZ0Ryb3BJY29uOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY0RyYWdEcm9wSWNvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljRHJhZ0Ryb3BJY29uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY0RyYWdEcm9wSWNvbigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljRHJhZ0Ryb3BJY29uLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbS5kYXRhLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljRHJhZ0Ryb3BJY29uLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5pY29uRHJhZ0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmRyYWdFbGVtZW50RGVjb3JhdG9yIH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInVzZVwiLCB7IHhsaW5rSHJlZjogdGhpcy5xdWVzdGlvbi5pY29uRHJhZ0VsZW1lbnQgfSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5pY29uRHJhZyB9KSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNEcmFnRHJvcEljb247XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LW1hdHJpeC1kcmFnLWRyb3AtaWNvblwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNEcmFnRHJvcEljb24sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbWF0cml4LWFjdGlvbnMvcmVtb3ZlLWJ1dHRvbi9yZW1vdmUtYnV0dG9uLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9tYXRyaXgtYWN0aW9ucy9yZW1vdmUtYnV0dG9uL3JlbW92ZS1idXR0b24udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNSZW1vdmVCdXR0b24gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljUmVtb3ZlQnV0dG9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljUmVtb3ZlQnV0dG9uOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1JlbW92ZUJ1dHRvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljUmVtb3ZlQnV0dG9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1JlbW92ZUJ1dHRvbihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25Sb3dSZW1vdmVDbGljayA9IF90aGlzLmhhbmRsZU9uUm93UmVtb3ZlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1JlbW92ZUJ1dHRvbi5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW0uZGF0YS5xdWVzdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNSZW1vdmVCdXR0b24ucHJvdG90eXBlLCBcInJvd1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbS5kYXRhLnJvdztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1JlbW92ZUJ1dHRvbi5wcm90b3R5cGUuaGFuZGxlT25Sb3dSZW1vdmVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLnJlbW92ZVJvd1VJKHRoaXMucm93KTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY1JlbW92ZUJ1dHRvbi5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlbW92ZVJvd1RleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY1JlbW92ZVJvd1RleHQpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0UmVtb3ZlUm93QnV0dG9uQ3NzKCksIHR5cGU6IFwiYnV0dG9uXCIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlT25Sb3dSZW1vdmVDbGljaywgZGlzYWJsZWQ6IHRoaXMucXVlc3Rpb24uaXNJbnB1dFJlYWRPbmx5IH0sXG4gICAgICAgICAgICByZW1vdmVSb3dUZXh0LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5pY29uUmVtb3ZlIH0pKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljUmVtb3ZlQnV0dG9uO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1tYXRyaXgtcmVtb3ZlLWJ1dHRvblwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNSZW1vdmVCdXR0b24sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbWF0cml4L3Jvdy50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL21hdHJpeC9yb3cudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogTWF0cml4Um93ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIk1hdHJpeFJvd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE1hdHJpeFJvdzsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cbnZhciBNYXRyaXhSb3cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hdHJpeFJvdywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXRyaXhSb3cocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9uUG9pbnRlckRvd25IYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRNYXRyaXgub25Qb2ludGVyRG93bihldmVudC5uYXRpdmVFdmVudCwgX3RoaXMubW9kZWwucm93KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4Um93LnByb3RvdHlwZSwgXCJtb2RlbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMubW9kZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4Um93LnByb3RvdHlwZSwgXCJwYXJlbnRNYXRyaXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnBhcmVudE1hdHJpeDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE1hdHJpeFJvdy5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RlbDtcbiAgICB9O1xuICAgIE1hdHJpeFJvdy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLm1vZGVsO1xuICAgICAgICBpZiAoIW1vZGVsLnZpc2libGUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwidHJcIiwgeyBjbGFzc05hbWU6IG1vZGVsLmNsYXNzTmFtZSwgXCJkYXRhLXN2LWRyb3AtdGFyZ2V0LW1hdHJpeC1yb3dcIjogbW9kZWwucm93ICYmIG1vZGVsLnJvdy5pZCwgb25Qb2ludGVyRG93bjogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5vblBvaW50ZXJEb3duSGFuZGxlcihldmVudCk7IH0gfSwgdGhpcy5wcm9wcy5jaGlsZHJlbikpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hdHJpeFJvdztcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1tYXRyaXgtcm93XCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KE1hdHJpeFJvdywgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9ub3RpZmllci50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9ub3RpZmllci50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogTm90aWZpZXJDb21wb25lbnQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTm90aWZpZXJDb21wb25lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBOb3RpZmllckNvbXBvbmVudDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY3Rpb24tYmFyL2FjdGlvbi1iYXIgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIE5vdGlmaWVyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOb3RpZmllckNvbXBvbmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOb3RpZmllckNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm90aWZpZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm5vdGlmaWVyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5ub3RpZmllcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5vdGlmaWVyQ29tcG9uZW50LnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGlmaWVyO1xuICAgIH07XG4gICAgTm90aWZpZXJDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5ub3RpZmllci5pc0Rpc3BsYXllZClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgc3R5bGUgPSB7IHZpc2liaWxpdHk6IHRoaXMubm90aWZpZXIuYWN0aXZlID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiIH07XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5ub3RpZmllci5jc3MsIHN0eWxlOiBzdHlsZSwgcm9sZTogXCJhbGVydFwiLCBcImFyaWEtbGl2ZVwiOiBcInBvbGl0ZVwiIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsLCB0aGlzLm5vdGlmaWVyLm1lc3NhZ2UpLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfYWN0aW9uX2Jhcl9hY3Rpb25fYmFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdXJ2ZXlBY3Rpb25CYXJcIl0sIHsgbW9kZWw6IHRoaXMubm90aWZpZXIuYWN0aW9uQmFyIH0pKSk7XG4gICAgfTtcbiAgICByZXR1cm4gTm90aWZpZXJDb21wb25lbnQ7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3Ytbm90aWZpZXJcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoTm90aWZpZXJDb21wb25lbnQsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLWFkZC1idG4udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLWFkZC1idG4udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWN0aW9uLCBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FkZEJ1dHRvbiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWN0aW9uOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FkZEJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvbihwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvbi5wcm90b3R5cGUsIFwiZGF0YVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnByb3BzLml0ZW0gJiYgdGhpcy5wcm9wcy5pdGVtLmRhdGEpIHx8IHRoaXMucHJvcHMuZGF0YTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvbi5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5wcm9wcy5pdGVtICYmIHRoaXMucHJvcHMuaXRlbS5kYXRhLnF1ZXN0aW9uKSB8fCB0aGlzLnByb3BzLmRhdGEucXVlc3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNBY3Rpb247XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG52YXIgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNBZGRCdXR0b24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXN0aW9uLmFkZFBhbmVsVUkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FkZEJ1dHRvbi5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnF1ZXN0aW9uLmNhbkFkZFBhbmVsKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBidG5UZXh0ID0gdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5xdWVzdGlvbi5sb2NQYW5lbEFkZFRleHQpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0QWRkQnV0dG9uQ3NzKCksIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuYnV0dG9uQWRkVGV4dCB9LCBidG5UZXh0KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uO1xufShTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvbikpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXBhbmVsZHluYW1pYy1hZGQtYnRuXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWRkQnV0dG9uLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BhbmVsZHluYW1pYy1hY3Rpb25zL3BhbmVsZHluYW1pYy1uZXh0LWJ0bi50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLW5leHQtYnRuLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNOZXh0QnV0dG9uICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljTmV4dEJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljTmV4dEJ1dHRvbjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc3ZnLWljb24vc3ZnLWljb24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGFuZWxkeW5hbWljX2FkZF9idG5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcGFuZWxkeW5hbWljLWFkZC1idG4gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BhbmVsZHluYW1pYy1hY3Rpb25zL3BhbmVsZHluYW1pYy1hZGQtYnRuLnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNOZXh0QnV0dG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY05leHRCdXR0b24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNOZXh0QnV0dG9uKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXN0aW9uLmdvVG9OZXh0UGFuZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY05leHRCdXR0b24ucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHRpdGxlOiB0aGlzLnF1ZXN0aW9uLnBhbmVsTmV4dFRleHQsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXROZXh0QnV0dG9uQ3NzKCkgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdmdJY29uXCJdLCB7IGljb25OYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucHJvZ3Jlc3NCdG5JY29uLCBzaXplOiBcImF1dG9cIiB9KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljTmV4dEJ1dHRvbjtcbn0oX3BhbmVsZHluYW1pY19hZGRfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvblwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXBhbmVsZHluYW1pYy1uZXh0LWJ0blwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY05leHRCdXR0b24sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLXByZXYtYnRuLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcHJldi1idG4udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1ByZXZCdXR0b24gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcmV2QnV0dG9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcmV2QnV0dG9uOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wYW5lbGR5bmFtaWNfYWRkX2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wYW5lbGR5bmFtaWMtYWRkLWJ0biAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLWFkZC1idG4udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1ByZXZCdXR0b24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJldkJ1dHRvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1ByZXZCdXR0b24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMucXVlc3Rpb24uZ29Ub1ByZXZQYW5lbCgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJldkJ1dHRvbi5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgdGl0bGU6IHRoaXMucXVlc3Rpb24ucGFuZWxQcmV2VGV4dCwgb25DbGljazogdGhpcy5oYW5kbGVDbGljaywgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldFByZXZCdXR0b25Dc3MoKSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN2Z0ljb25cIl0sIHsgaWNvbk5hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5wcm9ncmVzc0J0bkljb24sIHNpemU6IFwiYXV0b1wiIH0pKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcmV2QnV0dG9uO1xufShfcGFuZWxkeW5hbWljX2FkZF9idG5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljQWN0aW9uXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtcGFuZWxkeW5hbWljLXByZXYtYnRuXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJldkJ1dHRvbiwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcHJvZ3Jlc3MtdGV4dC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcHJvZ3Jlc3MtdGV4dC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcm9ncmVzc1RleHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcm9ncmVzc1RleHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1Byb2dyZXNzVGV4dDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wYW5lbGR5bmFtaWNfYWRkX2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wYW5lbGR5bmFtaWMtYWRkLWJ0biAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLWFkZC1idG4udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcm9ncmVzc1RleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5wcm9ncmVzc1RleHQgfSwgdGhpcy5xdWVzdGlvbi5wcm9ncmVzc1RleHQpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1Byb2dyZXNzVGV4dDtcbn0oX3BhbmVsZHluYW1pY19hZGRfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvblwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXBhbmVsZHluYW1pYy1wcm9ncmVzcy10ZXh0XCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJvZ3Jlc3NUZXh0LCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BhbmVsZHluYW1pYy1hY3Rpb25zL3BhbmVsZHluYW1pYy1yZW1vdmUtYnRuLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BhbmVsZHluYW1pYy1hY3Rpb25zL3BhbmVsZHluYW1pYy1yZW1vdmUtYnRuLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvbiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUmVtb3ZlQnV0dG9uOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BhbmVsZHluYW1pY19hZGRfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3BhbmVsZHluYW1pYy1hZGQtYnRuICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtYWRkLWJ0bi50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNSZW1vdmVCdXR0b24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNSZW1vdmVCdXR0b24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMucXVlc3Rpb24ucmVtb3ZlUGFuZWxVSShfdGhpcy5kYXRhLnBhbmVsKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvbi5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJ0blRleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY1BhbmVsUmVtb3ZlVGV4dCk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRQYW5lbFJlbW92ZUJ1dHRvbkNzcygpLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrLCB0eXBlOiBcImJ1dHRvblwiIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmJ1dHRvblJlbW92ZVRleHQgfSwgYnRuVGV4dCksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmljb25SZW1vdmUgfSkpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1JlbW92ZUJ1dHRvbjtcbn0oX3BhbmVsZHluYW1pY19hZGRfYnRuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0FjdGlvblwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXBhbmVsZHluYW1pYy1yZW1vdmUtYnRuXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUmVtb3ZlQnV0dG9uLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BvcHVwL3BvcHVwLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BvcHVwL3BvcHVwLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBQb3B1cCwgUG9wdXBDb250YWluZXIsIFBvcHVwRHJvcGRvd25Db250YWluZXIsIHNob3dNb2RhbCwgc2hvd0RpYWxvZyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJQb3B1cFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFBvcHVwOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJQb3B1cENvbnRhaW5lclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFBvcHVwQ29udGFpbmVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJQb3B1cERyb3Bkb3duQ29udGFpbmVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gUG9wdXBEcm9wZG93bkNvbnRhaW5lcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwic2hvd01vZGFsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2hvd01vZGFsOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzaG93RGlhbG9nXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2hvd0RpYWxvZzsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdC1kb20gKi8gXCJyZWFjdC1kb21cIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vYWN0aW9uLWJhci9hY3Rpb24tYmFyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxuXG52YXIgUG9wdXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvcHVwLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBvcHVwKHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5jb250YWluZXJSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVSZWYoKTtcbiAgICAgICAgX3RoaXMuY3JlYXRlTW9kZWwoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9wdXAucHJvdG90eXBlLCBcIm1vZGVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFBvcHVwLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLmNyZWF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBvcHVwID0gT2JqZWN0KHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJjcmVhdGVQb3B1cFZpZXdNb2RlbFwiXSkodGhpcy5wcm9wcy5tb2RlbCwgdW5kZWZpbmVkKTtcbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS5zZXRUYXJnZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJSZWYuY3VycmVudDtcbiAgICAgICAgdGhpcy5wb3B1cC5zZXRDb21wb25lbnRFbGVtZW50KGNvbnRhaW5lciwgdGhpcy5wcm9wcy5nZXRUYXJnZXQgPyB0aGlzLnByb3BzLmdldFRhcmdldChjb250YWluZXIpIDogdW5kZWZpbmVkKTtcbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNldFRhcmdldEVsZW1lbnQoKTtcbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUuY2FsbCh0aGlzLCBwcmV2UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICAgIHRoaXMuc2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucG9wdXAucmVzZXRDb21wb25lbnRFbGVtZW50KCk7XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCFfc3VwZXIucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZS5jYWxsKHRoaXMsIG5leHRQcm9wcywgbmV4dFN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGlzTmVlZFVwZGF0ZSA9IG5leHRQcm9wcy5tb2RlbCAhPT0gdGhpcy5wb3B1cC5tb2RlbDtcbiAgICAgICAgaWYgKGlzTmVlZFVwZGF0ZSkge1xuICAgICAgICAgICAgKF9hID0gdGhpcy5wb3B1cCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTW9kZWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOZWVkVXBkYXRlO1xuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb3B1cC5tb2RlbCA9IHRoaXMubW9kZWw7XG4gICAgICAgIHZhciBwb3B1cENvbnRhaW5lcjtcbiAgICAgICAgaWYgKHRoaXMubW9kZWwuaXNNb2RhbCkge1xuICAgICAgICAgICAgcG9wdXBDb250YWluZXIgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFBvcHVwQ29udGFpbmVyLCB7IG1vZGVsOiB0aGlzLnBvcHVwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9wdXBDb250YWluZXIgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFBvcHVwRHJvcGRvd25Db250YWluZXIsIHsgbW9kZWw6IHRoaXMucG9wdXAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHRoaXMuY29udGFpbmVyUmVmIH0sIHBvcHVwQ29udGFpbmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBQb3B1cDtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1wb3B1cFwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChQb3B1cCwgcHJvcHMpO1xufSk7XG52YXIgUG9wdXBDb250YWluZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvcHVwQ29udGFpbmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBvcHVwQ29udGFpbmVyKHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcmV2SXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmhhbmRsZUtleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLm1vZGVsLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmNsaWNrSW5zaWRlID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9wdXBDb250YWluZXIucHJvdG90eXBlLCBcIm1vZGVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFBvcHVwQ29udGFpbmVyLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICAgIH07XG4gICAgUG9wdXBDb250YWluZXIucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZS5jYWxsKHRoaXMsIHByZXZQcm9wcywgcHJldlN0YXRlKTtcbiAgICAgICAgaWYgKCF0aGlzLnByZXZJc1Zpc2libGUgJiYgdGhpcy5tb2RlbC5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwudXBkYXRlT25TaG93aW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmV2SXNWaXNpYmxlID0gdGhpcy5tb2RlbC5pc1Zpc2libGU7XG4gICAgfTtcbiAgICBQb3B1cENvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyQ29udGFpbmVyID0gZnVuY3Rpb24gKHBvcHVwQmFzZVZpZXdNb2RlbCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgaGVhZGVyUG9wdXAgPSBwb3B1cEJhc2VWaWV3TW9kZWwuc2hvd0hlYWRlciA/IHRoaXMucmVuZGVySGVhZGVyUG9wdXAocG9wdXBCYXNlVmlld01vZGVsKSA6IG51bGw7XG4gICAgICAgIHZhciBoZWFkZXJDb250ZW50ID0gISFwb3B1cEJhc2VWaWV3TW9kZWwudGl0bGUgPyB0aGlzLnJlbmRlckhlYWRlckNvbnRlbnQoKSA6IG51bGw7XG4gICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5yZW5kZXJDb250ZW50KCk7XG4gICAgICAgIHZhciBmb290ZXJDb250ZW50ID0gcG9wdXBCYXNlVmlld01vZGVsLnNob3dGb290ZXIgPyB0aGlzLnJlbmRlckZvb3Rlcih0aGlzLm1vZGVsKSA6IG51bGw7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1wb3B1cF9fY29udGFpbmVyXCIsIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogcG9wdXBCYXNlVmlld01vZGVsLmxlZnQsXG4gICAgICAgICAgICAgICAgdG9wOiBwb3B1cEJhc2VWaWV3TW9kZWwudG9wLFxuICAgICAgICAgICAgICAgIGhlaWdodDogcG9wdXBCYXNlVmlld01vZGVsLmhlaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogcG9wdXBCYXNlVmlld01vZGVsLndpZHRoLFxuICAgICAgICAgICAgICAgIG1pbldpZHRoOiBwb3B1cEJhc2VWaWV3TW9kZWwubWluV2lkdGgsXG4gICAgICAgICAgICB9LCBvbkNsaWNrOiBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jbGlja0luc2lkZShldik7XG4gICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN2LXBvcHVwX19zaGFkb3dcIiB9LFxuICAgICAgICAgICAgICAgIGhlYWRlclBvcHVwLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3YtcG9wdXBfX2JvZHktY29udGVudFwiIH0sXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3YtcG9wdXBfX3Njcm9sbGluZy1jb250ZW50XCIgfSwgY29udGVudCksXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlckNvbnRlbnQpKSkpO1xuICAgIH07XG4gICAgUG9wdXBDb250YWluZXIucHJvdG90eXBlLnJlbmRlckhlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN2LXBvcHVwX19ib2R5LWhlYWRlclwiIH0sIHRoaXMubW9kZWwudGl0bGUpO1xuICAgIH07XG4gICAgUG9wdXBDb250YWluZXIucHJvdG90eXBlLnJlbmRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZW50Q29tcG9uZW50ID0gX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KHRoaXMubW9kZWwuY29udGVudENvbXBvbmVudE5hbWUsIHRoaXMubW9kZWwuY29udGVudENvbXBvbmVudERhdGEpO1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1wb3B1cF9fY29udGVudFwiIH0sIGNvbnRlbnRDb21wb25lbnQpO1xuICAgIH07XG4gICAgUG9wdXBDb250YWluZXIucHJvdG90eXBlLnJlbmRlckhlYWRlclBvcHVwID0gZnVuY3Rpb24gKHBvcHVwTW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBQb3B1cENvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyRm9vdGVyID0gZnVuY3Rpb24gKHBvcHVNb2RlbCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3YtcG9wdXBfX2JvZHktZm9vdGVyXCIgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiU3VydmV5QWN0aW9uQmFyXCJdLCB7IG1vZGVsOiBwb3B1TW9kZWwuZm9vdGVyVG9vbGJhciB9KSkpO1xuICAgIH07XG4gICAgUG9wdXBDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucmVuZGVyQ29udGFpbmVyKHRoaXMubW9kZWwpO1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gbmV3IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJDc3NDbGFzc0J1aWxkZXJcIl0oKVxuICAgICAgICAgICAgLmFwcGVuZChcInN2LXBvcHVwXCIpXG4gICAgICAgICAgICAuYXBwZW5kKHRoaXMubW9kZWwuc3R5bGVDbGFzcylcbiAgICAgICAgICAgIC50b1N0cmluZygpO1xuICAgICAgICB2YXIgc3R5bGUgPSB7IGRpc3BsYXk6IHRoaXMubW9kZWwuaXNWaXNpYmxlID8gXCJcIiA6IFwibm9uZVwiLCB9O1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyB0YWJJbmRleDogLTEsIGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogc3R5bGUsIG9uQ2xpY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubW9kZWwuY2xpY2tPdXRzaWRlKGUpO1xuICAgICAgICAgICAgfSwgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleWRvd24gfSwgY29udGFpbmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9wdXBDb250YWluZXI7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbnZhciBQb3B1cERyb3Bkb3duQ29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb3B1cERyb3Bkb3duQ29udGFpbmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBvcHVwRHJvcGRvd25Db250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgUG9wdXBEcm9wZG93bkNvbnRhaW5lci5wcm90b3R5cGUucmVuZGVySGVhZGVyUG9wdXAgPSBmdW5jdGlvbiAocG9wdXBNb2RlbCkge1xuICAgICAgICB2YXIgcG9wdXBEcm9wZG93bk1vZGVsID0gcG9wdXBNb2RlbDtcbiAgICAgICAgaWYgKCFwb3B1cERyb3Bkb3duTW9kZWwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogcG9wdXBEcm9wZG93bk1vZGVsLnBvaW50ZXJUYXJnZXQubGVmdCxcbiAgICAgICAgICAgICAgICB0b3A6IHBvcHVwRHJvcGRvd25Nb2RlbC5wb2ludGVyVGFyZ2V0LnRvcCxcbiAgICAgICAgICAgIH0sIGNsYXNzTmFtZTogXCJzdi1wb3B1cF9fcG9pbnRlclwiIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBQb3B1cERyb3Bkb3duQ29udGFpbmVyO1xufShQb3B1cENvbnRhaW5lcikpO1xuXG4vLyByZXBsYWNlIHRvIHNob3dEaWFsb2cgdGhlbiBkZWxldGVcbmZ1bmN0aW9uIHNob3dNb2RhbChjb21wb25lbnROYW1lLCBkYXRhLCBvbkFwcGx5LCBvbkNhbmNlbCwgY3NzQ2xhc3MsIHRpdGxlLCBkaXNwbGF5TW9kZSkge1xuICAgIGlmIChkaXNwbGF5TW9kZSA9PT0gdm9pZCAwKSB7IGRpc3BsYXlNb2RlID0gXCJwb3B1cFwiOyB9XG4gICAgdmFyIG9wdGlvbnMgPSBPYmplY3Qoc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImNyZWF0ZURpYWxvZ09wdGlvbnNcIl0pKGNvbXBvbmVudE5hbWUsIGRhdGEsIG9uQXBwbHksIG9uQ2FuY2VsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY3NzQ2xhc3MsIHRpdGxlLCBkaXNwbGF5TW9kZSk7XG4gICAgcmV0dXJuIHNob3dEaWFsb2cob3B0aW9ucyk7XG59XG5mdW5jdGlvbiBzaG93RGlhbG9nKGRpYWxvZ09wdGlvbnMsIHJvb3RFbGVtZW50KSB7XG4gICAgdmFyIHBvcHVwVmlld01vZGVsID0gT2JqZWN0KHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJjcmVhdGVQb3B1cE1vZGFsVmlld01vZGVsXCJdKShkaWFsb2dPcHRpb25zLCByb290RWxlbWVudCk7XG4gICAgdmFyIG9uVmlzaWJpbGl0eUNoYW5nZWRDYWxsYmFjayA9IGZ1bmN0aW9uIChfLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgIHJlYWN0X2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS51bm1vdW50Q29tcG9uZW50QXROb2RlKHBvcHVwVmlld01vZGVsLmNvbnRhaW5lcik7XG4gICAgICAgICAgICBwb3B1cFZpZXdNb2RlbC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHBvcHVwVmlld01vZGVsLm9uVmlzaWJpbGl0eUNoYW5nZWQuYWRkKG9uVmlzaWJpbGl0eUNoYW5nZWRDYWxsYmFjayk7XG4gICAgcmVhY3RfZG9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLnJlbmRlcihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFBvcHVwQ29udGFpbmVyLCB7IG1vZGVsOiBwb3B1cFZpZXdNb2RlbCB9KSwgcG9wdXBWaWV3TW9kZWwuY29udGFpbmVyKTtcbiAgICBwb3B1cFZpZXdNb2RlbC5tb2RlbC5pc1Zpc2libGUgPSB0cnVlO1xuICAgIHJldHVybiBwb3B1cFZpZXdNb2RlbDtcbn1cbnN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJzZXR0aW5nc1wiXS5zaG93TW9kYWwgPSBzaG93TW9kYWw7XG5zdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0dGluZ3NcIl0uc2hvd0RpYWxvZyA9IHNob3dEaWFsb2c7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWRyb3Bkb3duLWl0ZW0udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL3JhdGluZy9yYXRpbmctZHJvcGRvd24taXRlbS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFJhdGluZ0Ryb3Bkb3duSXRlbSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSYXRpbmdEcm9wZG93bkl0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBSYXRpbmdEcm9wZG93bkl0ZW07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgUmF0aW5nRHJvcGRvd25JdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYXRpbmdEcm9wZG93bkl0ZW0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmF0aW5nRHJvcGRvd25JdGVtKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYXRpbmdEcm9wZG93bkl0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBSYXRpbmdEcm9wZG93bkl0ZW0ucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbTtcbiAgICB9O1xuICAgIFJhdGluZ0Ryb3Bkb3duSXRlbS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXRlbSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgaXRlbSA9IHRoaXMucHJvcHMuaXRlbTtcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gdGhpcy5yZW5kZXJEZXNjcmlwdGlvbihpdGVtKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInNkLXJhdGluZy1kcm9wZG93bi1pdGVtXCIgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInNkLXJhdGluZy1kcm9wZG93bi1pdGVtX3RleHRcIiB9LCBpdGVtLnRpdGxlKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uKSk7XG4gICAgfTtcbiAgICBSYXRpbmdEcm9wZG93bkl0ZW0ucHJvdG90eXBlLnJlbmRlckRlc2NyaXB0aW9uID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKCFpdGVtLmRlc2NyaXB0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzZC1yYXRpbmctZHJvcGRvd24taXRlbV9kZXNjcmlwdGlvblwiIH0sIHRoaXMucmVuZGVyTG9jU3RyaW5nKGl0ZW0uZGVzY3JpcHRpb24sIHVuZGVmaW5lZCwgXCJsb2NTdHJpbmdcIikpKTtcbiAgICB9O1xuICAgIHJldHVybiBSYXRpbmdEcm9wZG93bkl0ZW07XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtcmF0aW5nLWRyb3Bkb3duLWl0ZW1cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoUmF0aW5nRHJvcGRvd25JdGVtLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3JhdGluZy9yYXRpbmctaXRlbS1zbWlsZXkudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWl0ZW0tc21pbGV5LnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFJhdGluZ0l0ZW1TbWlsZXkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmF0aW5nSXRlbVNtaWxleVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFJhdGluZ0l0ZW1TbWlsZXk7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JhdGluZ19pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JhdGluZy1pdGVtICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWl0ZW0udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBSYXRpbmdJdGVtU21pbGV5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYXRpbmdJdGVtU21pbGV5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJhdGluZ0l0ZW1TbWlsZXkoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgUmF0aW5nSXRlbVNtaWxleS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7IG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU9uTW91c2VEb3duLCBzdHlsZTogdGhpcy5xdWVzdGlvbi5nZXRJdGVtU3R5bGUodGhpcy5pdGVtLml0ZW1WYWx1ZSwgdGhpcy5pdGVtLmhpZ2hsaWdodCksIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRJdGVtQ2xhc3ModGhpcy5pdGVtLml0ZW1WYWx1ZSksIG9uTW91c2VPdmVyOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMucXVlc3Rpb24ub25JdGVtTW91c2VJbihfdGhpcy5pdGVtKTsgfSwgb25Nb3VzZU91dDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLnF1ZXN0aW9uLm9uSXRlbU1vdXNlT3V0KF90aGlzLml0ZW0pOyB9IH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgeyB0eXBlOiBcInJhZGlvXCIsIGNsYXNzTmFtZTogXCJzdi12aXN1YWxseWhpZGRlblwiLCBuYW1lOiB0aGlzLnF1ZXN0aW9uLm5hbWUsIGlkOiB0aGlzLnF1ZXN0aW9uLmdldElucHV0SWQodGhpcy5pbmRleCksIHZhbHVlOiB0aGlzLml0ZW0udmFsdWUsIGRpc2FibGVkOiB0aGlzLmlzRGlzcGxheU1vZGUsIGNoZWNrZWQ6IHRoaXMucXVlc3Rpb24udmFsdWUgPT0gdGhpcy5pdGVtLnZhbHVlLCBvbkNsaWNrOiB0aGlzLnByb3BzLmhhbmRsZU9uQ2xpY2ssIG9uQ2hhbmdlOiBmdW5jdGlvbiAoKSB7IH0sIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMucXVlc3Rpb24uYXJpYUxhYmVsLCBcImFyaWEtaW52YWxpZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFJbnZhbGlkLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYXJpYUVycm9ybWVzc2FnZSB9KSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdmdJY29uXCJdLCB7IHNpemU6IFwiYXV0b1wiLCBpY29uTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRJdGVtU21pbGV5SWNvbk5hbWUodGhpcy5pdGVtLml0ZW1WYWx1ZSksIHRpdGxlOiB0aGlzLml0ZW0udGV4dCB9KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJhdGluZ0l0ZW1TbWlsZXk7XG59KF9yYXRpbmdfaXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmF0aW5nSXRlbUJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1yYXRpbmctaXRlbS1zbWlsZXlcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoUmF0aW5nSXRlbVNtaWxleSwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWl0ZW0tc3Rhci50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWl0ZW0tc3Rhci50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogUmF0aW5nSXRlbVN0YXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmF0aW5nSXRlbVN0YXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBSYXRpbmdJdGVtU3RhcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc3ZnLWljb24vc3ZnLWljb24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmF0aW5nX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmF0aW5nLWl0ZW0gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3JhdGluZy9yYXRpbmctaXRlbS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFJhdGluZ0l0ZW1TdGFyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYXRpbmdJdGVtU3RhciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSYXRpbmdJdGVtU3RhcigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBSYXRpbmdJdGVtU3Rhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7IG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU9uTW91c2VEb3duLCBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0SXRlbUNsYXNzKHRoaXMuaXRlbS5pdGVtVmFsdWUpLCBvbk1vdXNlT3ZlcjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLnF1ZXN0aW9uLm9uSXRlbU1vdXNlSW4oX3RoaXMuaXRlbSk7IH0sIG9uTW91c2VPdXQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5xdWVzdGlvbi5vbkl0ZW1Nb3VzZU91dChfdGhpcy5pdGVtKTsgfSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHsgdHlwZTogXCJyYWRpb1wiLCBjbGFzc05hbWU6IFwic3YtdmlzdWFsbHloaWRkZW5cIiwgbmFtZTogdGhpcy5xdWVzdGlvbi5uYW1lLCBpZDogdGhpcy5xdWVzdGlvbi5nZXRJbnB1dElkKHRoaXMuaW5kZXgpLCB2YWx1ZTogdGhpcy5pdGVtLnZhbHVlLCBkaXNhYmxlZDogdGhpcy5pc0Rpc3BsYXlNb2RlLCBjaGVja2VkOiB0aGlzLnF1ZXN0aW9uLnZhbHVlID09IHRoaXMuaXRlbS52YWx1ZSwgb25DbGljazogdGhpcy5wcm9wcy5oYW5kbGVPbkNsaWNrLCBvbkNoYW5nZTogZnVuY3Rpb24gKCkgeyB9LCBcImFyaWEtcmVxdWlyZWRcIjogdGhpcy5xdWVzdGlvbi5hcmlhUmVxdWlyZWQsIFwiYXJpYS1sYWJlbFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFMYWJlbCwgXCJhcmlhLWludmFsaWRcIjogdGhpcy5xdWVzdGlvbi5hcmlhSW52YWxpZCwgXCJhcmlhLWVycm9ybWVzc2FnZVwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFFcnJvcm1lc3NhZ2UgfSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3ZnSWNvblwiXSwgeyBjbGFzc05hbWU6IFwic3Ytc3RhclwiLCBzaXplOiBcImF1dG9cIiwgaWNvbk5hbWU6IHRoaXMucXVlc3Rpb24uaXRlbVN0YXJJY29uLCB0aXRsZTogdGhpcy5pdGVtLnRleHQgfSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3ZnSWNvblwiXSwgeyBjbGFzc05hbWU6IFwic3Ytc3Rhci0yXCIsIHNpemU6IFwiYXV0b1wiLCBpY29uTmFtZTogdGhpcy5xdWVzdGlvbi5pdGVtU3Rhckljb25BbHQsIHRpdGxlOiB0aGlzLml0ZW0udGV4dCB9KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJhdGluZ0l0ZW1TdGFyO1xufShfcmF0aW5nX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJhdGluZ0l0ZW1CYXNlXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtcmF0aW5nLWl0ZW0tc3RhclwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChSYXRpbmdJdGVtU3RhciwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWl0ZW0udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL3JhdGluZy9yYXRpbmctaXRlbS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFJhdGluZ0l0ZW1CYXNlLCBSYXRpbmdJdGVtICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlJhdGluZ0l0ZW1CYXNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gUmF0aW5nSXRlbUJhc2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlJhdGluZ0l0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBSYXRpbmdJdGVtOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFJhdGluZ0l0ZW1CYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYXRpbmdJdGVtQmFzZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSYXRpbmdJdGVtQmFzZShwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25Nb3VzZURvd24gPSBfdGhpcy5oYW5kbGVPbk1vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmF0aW5nSXRlbUJhc2UucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5xdWVzdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYXRpbmdJdGVtQmFzZS5wcm90b3R5cGUsIFwiaXRlbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYXRpbmdJdGVtQmFzZS5wcm90b3R5cGUsIFwiaW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmluZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgUmF0aW5nSXRlbUJhc2UucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbTtcbiAgICB9O1xuICAgIFJhdGluZ0l0ZW1CYXNlLnByb3RvdHlwZS5oYW5kbGVPbk1vdXNlRG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLm9uTW91c2VEb3duKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUmF0aW5nSXRlbUJhc2U7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbnZhciBSYXRpbmdJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYXRpbmdJdGVtLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJhdGluZ0l0ZW0oKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgUmF0aW5nSXRlbS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXRlbVRleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLml0ZW0ubG9jVGV4dCk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHsgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlT25Nb3VzZURvd24sIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRJdGVtQ2xhc3NCeVRleHQodGhpcy5pdGVtLml0ZW1WYWx1ZSwgdGhpcy5pdGVtLnRleHQpIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgeyB0eXBlOiBcInJhZGlvXCIsIGNsYXNzTmFtZTogXCJzdi12aXN1YWxseWhpZGRlblwiLCBuYW1lOiB0aGlzLnF1ZXN0aW9uLm5hbWUsIGlkOiB0aGlzLnF1ZXN0aW9uLmdldElucHV0SWQodGhpcy5pbmRleCksIHZhbHVlOiB0aGlzLml0ZW0udmFsdWUsIGRpc2FibGVkOiB0aGlzLmlzRGlzcGxheU1vZGUsIGNoZWNrZWQ6IHRoaXMucXVlc3Rpb24udmFsdWUgPT0gdGhpcy5pdGVtLnZhbHVlLCBvbkNsaWNrOiB0aGlzLnByb3BzLmhhbmRsZU9uQ2xpY2ssIG9uQ2hhbmdlOiBmdW5jdGlvbiAoKSB7IH0sIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMucXVlc3Rpb24uYXJpYUxhYmVsLCBcImFyaWEtaW52YWxpZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFJbnZhbGlkLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYXJpYUVycm9ybWVzc2FnZSB9KSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuaXRlbVRleHQgfSwgaXRlbVRleHQpKSk7XG4gICAgfTtcbiAgICBSYXRpbmdJdGVtLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFJhdGluZ0l0ZW07XG59KFJhdGluZ0l0ZW1CYXNlKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtcmF0aW5nLWl0ZW1cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoUmF0aW5nSXRlbSwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9za2VsZXRvbi50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9za2VsZXRvbi50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU2tlbGV0b24gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU2tlbGV0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTa2VsZXRvbjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxudmFyIFNrZWxldG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTa2VsZXRvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTa2VsZXRvbigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBTa2VsZXRvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1za2VsZXRvbi1lbGVtZW50XCIsIGlkOiAoX2EgPSB0aGlzLnByb3BzLmVsZW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZCB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2tlbGV0b247XG59KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLkNvbXBvbmVudCkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXNrZWxldG9uXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFNrZWxldG9uLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N1cnZleS1hY3Rpb25zL3N1cnZleS1uYXYtYnV0dG9uLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N1cnZleS1hY3Rpb25zL3N1cnZleS1uYXYtYnV0dG9uLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlOYXZpZ2F0aW9uQnV0dG9uICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleU5hdmlnYXRpb25CdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlOYXZpZ2F0aW9uQnV0dG9uOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleU5hdmlnYXRpb25CdXR0b24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleU5hdmlnYXRpb25CdXR0b24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5TmF2aWdhdGlvbkJ1dHRvbigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5TmF2aWdhdGlvbkJ1dHRvbi5wcm90b3R5cGUsIFwiaXRlbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleU5hdmlnYXRpb25CdXR0b24ucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbS5pc1Zpc2libGU7XG4gICAgfTtcbiAgICBTdXJ2ZXlOYXZpZ2F0aW9uQnV0dG9uLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IGNsYXNzTmFtZTogdGhpcy5pdGVtLmlubmVyQ3NzLCB0eXBlOiBcImJ1dHRvblwiLCBkaXNhYmxlZDogdGhpcy5pdGVtLmRpc2FibGVkLCBvbk1vdXNlRG93bjogdGhpcy5pdGVtLmRhdGEgJiYgdGhpcy5pdGVtLmRhdGEubW91c2VEb3duLCBvbkNsaWNrOiB0aGlzLml0ZW0uYWN0aW9uLCB0aXRsZTogdGhpcy5pdGVtLmdldFRvb2x0aXAoKSwgdmFsdWU6IHRoaXMuaXRlbS50aXRsZSB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5TmF2aWdhdGlvbkJ1dHRvbjtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50XCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtbmF2LWJ0blwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChTdXJ2ZXlOYXZpZ2F0aW9uQnV0dG9uLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N1cnZleS1oZWFkZXIvbG9nby1pbWFnZS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3VydmV5LWhlYWRlci9sb2dvLWltYWdlLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogTG9nb0ltYWdlICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxvZ29JbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIExvZ29JbWFnZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxudmFyIExvZ29JbWFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTG9nb0ltYWdlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExvZ29JbWFnZShwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2dvSW1hZ2UucHJvdG90eXBlLCBcInN1cnZleVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZGF0YTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIExvZ29JbWFnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGVudCA9IFtdO1xuICAgICAgICBjb250ZW50LnB1c2gocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGtleTogXCJsb2dvLWltYWdlXCIsIGNsYXNzTmFtZTogdGhpcy5zdXJ2ZXkubG9nb0NsYXNzTmFtZXMgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgeyBjbGFzc05hbWU6IHRoaXMuc3VydmV5LmNzcy5sb2dvSW1hZ2UsIHNyYzogdGhpcy5zdXJ2ZXkubG9jTG9nby5yZW5kZXJlZEh0bWwsIGFsdDogdGhpcy5zdXJ2ZXkubG9jVGl0bGUucmVuZGVyZWRIdG1sLCB3aWR0aDogdGhpcy5zdXJ2ZXkucmVuZGVyZWRMb2dvV2lkdGgsIGhlaWdodDogdGhpcy5zdXJ2ZXkucmVuZGVyZWRMb2dvSGVpZ2h0LCBzdHlsZTogeyBvYmplY3RGaXQ6IHRoaXMuc3VydmV5LmxvZ29GaXQsIHdpZHRoOiB0aGlzLnN1cnZleS5yZW5kZXJlZFN0eWxlTG9nb1dpZHRoLCBoZWlnaHQ6IHRoaXMuc3VydmV5LnJlbmRlcmVkU3R5bGVMb2dvSGVpZ2h0IH0gfSkpKTtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuRnJhZ21lbnQsIG51bGwsIGNvbnRlbnQpO1xuICAgIH07XG4gICAgcmV0dXJuIExvZ29JbWFnZTtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtbG9nby1pbWFnZVwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChMb2dvSW1hZ2UsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3VydmV5LWhlYWRlci9zdXJ2ZXktaGVhZGVyLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdXJ2ZXktaGVhZGVyL3N1cnZleS1oZWFkZXIudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlIZWFkZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5SGVhZGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5SGVhZGVyOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdGl0bGVfdGl0bGVfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdGl0bGUvdGl0bGUtZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvdGl0bGUvdGl0bGUtZWxlbWVudC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleUhlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5SGVhZGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleUhlYWRlcihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7IGNoYW5nZWQ6IDAgfTtcbiAgICAgICAgX3RoaXMucm9vdFJlZiA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZVJlZigpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlIZWFkZXIucHJvdG90eXBlLCBcInN1cnZleVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc3VydmV5O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUhlYWRlci5wcm90b3R5cGUsIFwiY3NzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXkuY3NzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5SGVhZGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLnN1cnZleS5hZnRlclJlbmRlckhlYWRlcih0aGlzLnJvb3RSZWYuY3VycmVudCk7XG4gICAgICAgIHRoaXMuc3VydmV5LmxvY0xvZ28ub25DaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5zZXRTdGF0ZSh7IGNoYW5nZWQ6IHNlbGYuc3RhdGUuY2hhbmdlZCArIDEgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTdXJ2ZXlIZWFkZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN1cnZleS5sb2NMb2dvLm9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICB9O1xuICAgIFN1cnZleUhlYWRlci5wcm90b3R5cGUucmVuZGVyVGl0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdXJ2ZXkucmVuZGVyZWRIYXNUaXRsZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJMb2NTdHJpbmcodGhpcy5zdXJ2ZXkubG9jRGVzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMuY3NzLmhlYWRlclRleHQsIHN0eWxlOiB7IG1heFdpZHRoOiB0aGlzLnN1cnZleS50aXRsZU1heFdpZHRoIH0gfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX3RpdGxlX3RpdGxlX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlRpdGxlRWxlbWVudFwiXSwgeyBlbGVtZW50OiB0aGlzLnN1cnZleSB9KSxcbiAgICAgICAgICAgIHRoaXMuc3VydmV5LnJlbmRlcmVkSGFzRGVzY3JpcHRpb24gPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5kZXNjcmlwdGlvbiB9LCBkZXNjcmlwdGlvbikgOiBudWxsKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlIZWFkZXIucHJvdG90eXBlLnJlbmRlckxvZ29JbWFnZSA9IGZ1bmN0aW9uIChpc1JlbmRlcikge1xuICAgICAgICBpZiAoIWlzUmVuZGVyKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBjb21wb25lbnROYW1lID0gdGhpcy5zdXJ2ZXkuZ2V0RWxlbWVudFdyYXBwZXJDb21wb25lbnROYW1lKHRoaXMuc3VydmV5LCBcImxvZ28taW1hZ2VcIik7XG4gICAgICAgIHZhciBjb21wb25lbnREYXRhID0gdGhpcy5zdXJ2ZXkuZ2V0RWxlbWVudFdyYXBwZXJDb21wb25lbnREYXRhKHRoaXMuc3VydmV5LCBcImxvZ28taW1hZ2VcIik7XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TmFtZSwge1xuICAgICAgICAgICAgZGF0YTogY29tcG9uZW50RGF0YSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlIZWFkZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN1cnZleS5yZW5kZXJlZEhhc0hlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMuY3NzLmhlYWRlciwgcmVmOiB0aGlzLnJvb3RSZWYgfSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9nb0ltYWdlKHRoaXMuc3VydmV5LmlzTG9nb0JlZm9yZSksXG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpdGxlKCksXG4gICAgICAgICAgICB0aGlzLnJlbmRlckxvZ29JbWFnZSh0aGlzLnN1cnZleS5pc0xvZ29BZnRlciksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5oZWFkZXJDbG9zZSB9KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleUhlYWRlcjtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3VydmV5LWhlYWRlclwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChTdXJ2ZXlIZWFkZXIsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN2Z0ljb24gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3ZnSWNvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN2Z0ljb247IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18pO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgU3ZnSWNvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3ZnSWNvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdmdJY29uKHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zdmdJY29uUmVmID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlUmVmKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ZnSWNvbi5wcm90b3R5cGUudXBkYXRlU3ZnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5pY29uTmFtZSlcbiAgICAgICAgICAgIE9iamVjdChzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiY3JlYXRlU3ZnXCJdKSh0aGlzLnByb3BzLnNpemUsIHRoaXMucHJvcHMud2lkdGgsIHRoaXMucHJvcHMuaGVpZ2h0LCB0aGlzLnByb3BzLmljb25OYW1lLCB0aGlzLnN2Z0ljb25SZWYuY3VycmVudCwgdGhpcy5wcm9wcy50aXRsZSk7XG4gICAgfTtcbiAgICBTdmdJY29uLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3ZnKCk7XG4gICAgfTtcbiAgICBTdmdJY29uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBcInN2LXN2Zy1pY29uXCI7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9IFwiIFwiICsgdGhpcy5wcm9wcy5jbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICh0aGlzLnByb3BzLmljb25OYW1lID9cbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSwgc3R5bGU6IHRoaXMucHJvcHMuc3R5bGUsIG9uQ2xpY2s6IHRoaXMucHJvcHMub25DbGljaywgcmVmOiB0aGlzLnN2Z0ljb25SZWYsIHJvbGU6IFwiaW1nXCIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwidXNlXCIsIG51bGwpKVxuICAgICAgICAgICAgOiBudWxsKTtcbiAgICB9O1xuICAgIFN2Z0ljb24ucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN2ZygpO1xuICAgIH07XG4gICAgcmV0dXJuIFN2Z0ljb247XG59KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLkNvbXBvbmVudCkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXN2Zy1pY29uXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFN2Z0ljb24sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvdGl0bGUvdGl0bGUtYWN0aW9ucy50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWFjdGlvbnMudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogVGl0bGVBY3Rpb25zICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlRpdGxlQWN0aW9uc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFRpdGxlQWN0aW9uczsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vYWN0aW9uLWJhci9hY3Rpb24tYmFyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90aXRsZV9jb250ZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RpdGxlLWNvbnRlbnQgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWNvbnRlbnQudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFRpdGxlQWN0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGl0bGVBY3Rpb25zLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpdGxlQWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGl0bGVBY3Rpb25zLnByb3RvdHlwZSwgXCJjc3NDbGFzc2VzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jc3NDbGFzc2VzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpdGxlQWN0aW9ucy5wcm90b3R5cGUsIFwiZWxlbWVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZWxlbWVudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFRpdGxlQWN0aW9ucy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGl0bGVDb250ZW50ID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfdGl0bGVfY29udGVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiVGl0bGVDb250ZW50XCJdLCB7IGVsZW1lbnQ6IHRoaXMuZWxlbWVudCwgY3NzQ2xhc3NlczogdGhpcy5jc3NDbGFzc2VzIH0pO1xuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5oYXNUaXRsZUFjdGlvbnMpXG4gICAgICAgICAgICByZXR1cm4gdGl0bGVDb250ZW50O1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3YtdGl0bGUtYWN0aW9uc1wiIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdi10aXRsZS1hY3Rpb25zX190aXRsZVwiIH0sIHRpdGxlQ29udGVudCksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9hY3Rpb25fYmFyX2FjdGlvbl9iYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleUFjdGlvbkJhclwiXSwgeyBtb2RlbDogdGhpcy5lbGVtZW50LmdldFRpdGxlVG9vbGJhcigpIH0pKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGl0bGVBY3Rpb25zO1xufShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5Db21wb25lbnQpKTtcblxuc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlbmRlcmVyRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclJlbmRlcmVyKFwiZWxlbWVudFwiLCBcInRpdGxlLWFjdGlvbnNcIiwgXCJzdi10aXRsZS1hY3Rpb25zXCIpO1xuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi10aXRsZS1hY3Rpb25zXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFRpdGxlQWN0aW9ucywgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy90aXRsZS90aXRsZS1jb250ZW50LnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2NvbXBvbmVudHMvdGl0bGUvdGl0bGUtY29udGVudC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBUaXRsZUNvbnRlbnQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiVGl0bGVDb250ZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVGl0bGVDb250ZW50OyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG52YXIgVGl0bGVDb250ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaXRsZUNvbnRlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGl0bGVDb250ZW50KHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpdGxlQ29udGVudC5wcm90b3R5cGUsIFwiY3NzQ2xhc3Nlc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY3NzQ2xhc3NlcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaXRsZUNvbnRlbnQucHJvdG90eXBlLCBcImVsZW1lbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmVsZW1lbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBUaXRsZUNvbnRlbnQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pc1RpdGxlUmVuZGVyZWRBc1N0cmluZylcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJMb2NTdHJpbmcodGhpcy5lbGVtZW50LmxvY1RpdGxlKTtcbiAgICAgICAgdmFyIHNwYW5zID0gdGhpcy5yZW5kZXJUaXRsZVNwYW5zKHRoaXMuZWxlbWVudC5nZXRUaXRsZU93bmVyKCksIHRoaXMuY3NzQ2xhc3Nlcyk7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLkZyYWdtZW50LCBudWxsLCBzcGFucyk7XG4gICAgfTtcbiAgICBUaXRsZUNvbnRlbnQucHJvdG90eXBlLnJlbmRlclRpdGxlU3BhbnMgPSBmdW5jdGlvbiAoZWxlbWVudCwgY3NzQ2xhc3Nlcykge1xuICAgICAgICB2YXIgZ2V0U3BhY2VTcGFuID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IFwiZGF0YS1rZXlcIjoga2V5LCBrZXk6IGtleSB9LCBcIlxcdTAwQTBcIikpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgc3BhbnMgPSBbXTtcbiAgICAgICAgaWYgKGVsZW1lbnQuaXNSZXF1aXJlVGV4dE9uU3RhcnQpIHtcbiAgICAgICAgICAgIHNwYW5zLnB1c2godGhpcy5yZW5kZXJSZXF1aXJlVGV4dChlbGVtZW50LCBjc3NDbGFzc2VzKSk7XG4gICAgICAgICAgICBzcGFucy5wdXNoKGdldFNwYWNlU3BhbihcInJlcS1zcFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHF1ZXN0aW9uTnVtYmVyID0gZWxlbWVudC5ubztcbiAgICAgICAgaWYgKHF1ZXN0aW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgcGFuZWxOdW1iZXIgPSAhIWNzc0NsYXNzZXMucGFuZWwgPyBjc3NDbGFzc2VzLnBhbmVsLm51bWJlciA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHNwYW5zLnB1c2gocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBcImRhdGEta2V5XCI6IFwicV9udW1cIiwga2V5OiBcInFfbnVtXCIsIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5udW1iZXIgfHwgcGFuZWxOdW1iZXIsIHN0eWxlOiB7IHBvc2l0aW9uOiBcInN0YXRpY1wiIH0sIFwiYXJpYS1oaWRkZW5cIjogdHJ1ZSB9LCBxdWVzdGlvbk51bWJlcikpO1xuICAgICAgICAgICAgc3BhbnMucHVzaChnZXRTcGFjZVNwYW4oXCJudW0tc3BcIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmlzUmVxdWlyZVRleHRCZWZvcmVUaXRsZSkge1xuICAgICAgICAgICAgc3BhbnMucHVzaCh0aGlzLnJlbmRlclJlcXVpcmVUZXh0KGVsZW1lbnQsIGNzc0NsYXNzZXMpKTtcbiAgICAgICAgICAgIHNwYW5zLnB1c2goZ2V0U3BhY2VTcGFuKFwicmVxLXNwXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBzcGFucy5wdXNoKF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdLnJlbmRlckxvY1N0cmluZyhlbGVtZW50LmxvY1RpdGxlLCBudWxsLCBcInFfdGl0bGVcIikpO1xuICAgICAgICBpZiAoZWxlbWVudC5pc1JlcXVpcmVUZXh0QWZ0ZXJUaXRsZSkge1xuICAgICAgICAgICAgc3BhbnMucHVzaChnZXRTcGFjZVNwYW4oXCJyZXEtc3BcIikpO1xuICAgICAgICAgICAgc3BhbnMucHVzaCh0aGlzLnJlbmRlclJlcXVpcmVUZXh0KGVsZW1lbnQsIGNzc0NsYXNzZXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BhbnM7XG4gICAgfTtcbiAgICBUaXRsZUNvbnRlbnQucHJvdG90eXBlLnJlbmRlclJlcXVpcmVUZXh0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNzc0NsYXNzZXMpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IFwiZGF0YS1rZXlcIjogXCJyZXEtdGV4dFwiLCBrZXk6IFwicmVxLXRleHRcIiwgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLnJlcXVpcmVkVGV4dCB8fCBjc3NDbGFzc2VzLnBhbmVsLnJlcXVpcmVkVGV4dCwgXCJhcmlhLWhpZGRlblwiOiB0cnVlIH0sIGVsZW1lbnQucmVxdWlyZWRUZXh0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGl0bGVDb250ZW50O1xufShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5Db21wb25lbnQpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvdGl0bGUvdGl0bGUtZWxlbWVudC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWVsZW1lbnQudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogVGl0bGVFbGVtZW50ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlRpdGxlRWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFRpdGxlRWxlbWVudDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90aXRsZV9hY3Rpb25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RpdGxlLWFjdGlvbnMgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWFjdGlvbnMudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgVGl0bGVFbGVtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaXRsZUVsZW1lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGl0bGVFbGVtZW50KHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpdGxlRWxlbWVudC5wcm90b3R5cGUsIFwiZWxlbWVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZWxlbWVudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFRpdGxlRWxlbWVudC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50Lmhhc1RpdGxlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBhcmlhTGFiZWwgPSBlbGVtZW50LnRpdGxlQXJpYUxhYmVsIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHRpdGxlQ29udGVudCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF90aXRsZV9hY3Rpb25zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJUaXRsZUFjdGlvbnNcIl0sIHsgZWxlbWVudDogZWxlbWVudCwgY3NzQ2xhc3NlczogZWxlbWVudC5jc3NDbGFzc2VzIH0pKTtcbiAgICAgICAgdmFyIG9uQ2xpY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBvbktleVVwID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoZWxlbWVudC5oYXNUaXRsZUV2ZW50cykge1xuICAgICAgICAgICAgb25LZXlVcCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qoc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRvS2V5MkNsaWNrVXBcIl0pKGV2dC5uYXRpdmVFdmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBDdXN0b21UYWcgPSBlbGVtZW50LnRpdGxlVGFnTmFtZTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KEN1c3RvbVRhZywgeyBjbGFzc05hbWU6IGVsZW1lbnQuY3NzVGl0bGUsIGlkOiBlbGVtZW50LmFyaWFUaXRsZUlkLCBcImFyaWEtbGFiZWxcIjogYXJpYUxhYmVsLCB0YWJJbmRleDogZWxlbWVudC50aXRsZVRhYkluZGV4LCBcImFyaWEtZXhwYW5kZWRcIjogZWxlbWVudC50aXRsZUFyaWFFeHBhbmRlZCwgcm9sZTogZWxlbWVudC50aXRsZUFyaWFSb2xlLCBvbkNsaWNrOiBvbkNsaWNrLCBvbktleVVwOiBvbktleVVwIH0sIHRpdGxlQ29udGVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpdGxlRWxlbWVudDtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9jdXN0b20td2lkZ2V0LnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9jdXN0b20td2lkZ2V0LnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlDdXN0b21XaWRnZXQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5Q3VzdG9tV2lkZ2V0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5Q3VzdG9tV2lkZ2V0OyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cbnZhciBTdXJ2ZXlDdXN0b21XaWRnZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUN1c3RvbVdpZGdldCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlDdXN0b21XaWRnZXQocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLndpZGdldFJlZiA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVSZWZcIl0oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlDdXN0b21XaWRnZXQucHJvdG90eXBlLl9hZnRlclJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25CYXNlLmN1c3RvbVdpZGdldCkge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy53aWRnZXRSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmICghIWVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbkJhc2UuY3VzdG9tV2lkZ2V0LmFmdGVyUmVuZGVyKHRoaXMucXVlc3Rpb25CYXNlLCBlbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbkJhc2UuY3VzdG9tV2lkZ2V0RGF0YS5pc05lZWRSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5Q3VzdG9tV2lkZ2V0LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbkJhc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2FmdGVyUmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleUN1c3RvbVdpZGdldC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlLmNhbGwodGhpcywgcHJldlByb3BzLCBwcmV2U3RhdGUpO1xuICAgICAgICB2YXIgaXNEZWZhdWx0UmVuZGVyID0gISF0aGlzLnF1ZXN0aW9uQmFzZS5jdXN0b21XaWRnZXQgJiZcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25CYXNlLmN1c3RvbVdpZGdldC5pc0RlZmF1bHRSZW5kZXI7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uQmFzZSAmJiAhaXNEZWZhdWx0UmVuZGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9hZnRlclJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlDdXN0b21XaWRnZXQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uQmFzZS5jdXN0b21XaWRnZXQpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMud2lkZ2V0UmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoISFlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25CYXNlLmN1c3RvbVdpZGdldC53aWxsVW5tb3VudCh0aGlzLnF1ZXN0aW9uQmFzZSwgZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlDdXN0b21XaWRnZXQucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuY2FuUmVuZGVyLmNhbGwodGhpcykgJiYgdGhpcy5xdWVzdGlvbkJhc2UudmlzaWJsZTtcbiAgICB9O1xuICAgIFN1cnZleUN1c3RvbVdpZGdldC5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN1c3RvbVdpZGdldCA9IHRoaXMucXVlc3Rpb25CYXNlLmN1c3RvbVdpZGdldDtcbiAgICAgICAgaWYgKGN1c3RvbVdpZGdldC5pc0RlZmF1bHRSZW5kZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyByZWY6IHRoaXMud2lkZ2V0UmVmIH0sIHRoaXMuY3JlYXRvci5jcmVhdGVRdWVzdGlvbkVsZW1lbnQodGhpcy5xdWVzdGlvbkJhc2UpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpZGdldCA9IG51bGw7XG4gICAgICAgIGlmIChjdXN0b21XaWRnZXQud2lkZ2V0SnNvbi5yZW5kZXIpIHtcbiAgICAgICAgICAgIHdpZGdldCA9IGN1c3RvbVdpZGdldC53aWRnZXRKc29uLnJlbmRlcih0aGlzLnF1ZXN0aW9uQmFzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY3VzdG9tV2lkZ2V0Lmh0bWxUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sVmFsdWUgPSB7IF9faHRtbDogY3VzdG9tV2lkZ2V0Lmh0bWxUZW1wbGF0ZSB9O1xuICAgICAgICAgICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IHJlZjogdGhpcy53aWRnZXRSZWYsIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiBodG1sVmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgcmVmOiB0aGlzLndpZGdldFJlZiB9LCB3aWRnZXQpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleUN1c3RvbVdpZGdldDtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZVwiXSkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvZHJvcGRvd24tYmFzZS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvZHJvcGRvd24tYmFzZS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2UgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3BvcHVwX3BvcHVwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvcG9wdXAvcG9wdXAgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BvcHVwL3BvcHVwLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2NvbW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9jb21tZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9jb21tZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSBfdGhpcy5xdWVzdGlvbi5kcm9wZG93bkxpc3RNb2RlbCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9uQ2xpY2soZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5jaGV2cm9uUG9pbnRlckRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IF90aGlzLnF1ZXN0aW9uLmRyb3Bkb3duTGlzdE1vZGVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2hldnJvblBvaW50ZXJEb3duKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuY2xlYXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IF90aGlzLnF1ZXN0aW9uLmRyb3Bkb3duTGlzdE1vZGVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub25DbGVhcihldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmtleWhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IF90aGlzLnF1ZXN0aW9uLmRyb3Bkb3duTGlzdE1vZGVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eua2V5SGFuZGxlcihldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmJsdXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IF90aGlzLnF1ZXN0aW9uLmRyb3Bkb3duTGlzdE1vZGVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub25CbHVyKGV2ZW50KTtcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZUlucHV0RG9tRWxlbWVudCgpO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5mb2N1cyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgKF9hID0gX3RoaXMucXVlc3Rpb24uZHJvcGRvd25MaXN0TW9kZWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbkZvY3VzKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZS5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbltcImRyb3Bkb3duTGlzdE1vZGVsXCJdO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2UucHJvdG90eXBlLnNldFZhbHVlQ29yZSA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uQmFzZS5yZW5kZXJlZFZhbHVlID0gbmV3VmFsdWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZS5wcm90b3R5cGUuZ2V0VmFsdWVDb3JlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbkJhc2UucmVuZGVyZWRWYWx1ZTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlLnByb3RvdHlwZS5yZW5kZXJSZWFkT25seUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCBudWxsLCB0aGlzLnF1ZXN0aW9uLnJlYWRPbmx5VGV4dCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZS5wcm90b3R5cGUucmVuZGVyU2VsZWN0ID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIHNlbGVjdEVsZW1lbnQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5pc1JlYWRPbmx5KSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9ICh0aGlzLnF1ZXN0aW9uLnNlbGVjdGVkSXRlbUxvY1RleHQpID8gdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5xdWVzdGlvbi5zZWxlY3RlZEl0ZW1Mb2NUZXh0KSA6IFwiXCI7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50ID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBpZDogdGhpcy5xdWVzdGlvbi5pbnB1dElkLCBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0Q29udHJvbENsYXNzKCksIGRpc2FibGVkOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJlYWRPbmx5RWxlbWVudCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5xdWVzdGlvbltcImRyb3Bkb3duTGlzdE1vZGVsXCJdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbltcImRyb3Bkb3duTGlzdE1vZGVsXCJdID0gbmV3IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJEcm9wZG93bkxpc3RNb2RlbFwiXSh0aGlzLnF1ZXN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRnJhZ21lbnRcIl0sIG51bGwsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJbnB1dCh0aGlzLnF1ZXN0aW9uW1wiZHJvcGRvd25MaXN0TW9kZWxcIl0pLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3BvcHVwX3BvcHVwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJQb3B1cFwiXSwgeyBtb2RlbDogKF9iID0gKF9hID0gdGhpcy5xdWVzdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRyb3Bkb3duTGlzdE1vZGVsKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucG9wdXBNb2RlbCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5zZWxlY3RXcmFwcGVyLCBvbkNsaWNrOiB0aGlzLmNsaWNrIH0sXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDaGV2cm9uQnV0dG9uKCkpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlLnByb3RvdHlwZS5yZW5kZXJWYWx1ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZHJvcGRvd25MaXN0TW9kZWwpIHtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24uc2hvd0lucHV0RmllbGRDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQodGhpcy5xdWVzdGlvbi5pbnB1dEZpZWxkQ29tcG9uZW50TmFtZSwgeyBpdGVtOiBkcm9wZG93bkxpc3RNb2RlbC5nZXRTZWxlY3RlZEFjdGlvbigpLCBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnF1ZXN0aW9uLnNob3dTZWxlY3RlZEl0ZW1Mb2NUZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5xdWVzdGlvbi5zZWxlY3RlZEl0ZW1Mb2NUZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlLnByb3RvdHlwZS5yZW5kZXJJbnB1dCA9IGZ1bmN0aW9uIChkcm9wZG93bkxpc3RNb2RlbCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdmFsdWVFbGVtZW50ID0gdGhpcy5yZW5kZXJWYWx1ZUVsZW1lbnQoZHJvcGRvd25MaXN0TW9kZWwpO1xuICAgICAgICB2YXIgcm9vdCA9IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXS5lbnZpcm9ubWVudC5yb290O1xuICAgICAgICB2YXIgb25JbnB1dENoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHJvb3QuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duTGlzdE1vZGVsLmlucHV0U3RyaW5nUmVuZGVyZWQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGlkOiB0aGlzLnF1ZXN0aW9uLmlucHV0SWQsIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRDb250cm9sQ2xhc3MoKSwgdGFiSW5kZXg6IGRyb3Bkb3duTGlzdE1vZGVsLm5vVGFiSW5kZXggPyB1bmRlZmluZWQgOiAwLCBcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnF1ZXN0aW9uLmlzSW5wdXRSZWFkT25seSwgcmVxdWlyZWQ6IHRoaXMucXVlc3Rpb24uaXNSZXF1aXJlZCwgb25LZXlEb3duOiB0aGlzLmtleWhhbmRsZXIsIG9uQmx1cjogdGhpcy5ibHVyLCByb2xlOiB0aGlzLnF1ZXN0aW9uLmFyaWFSb2xlLCBcImFyaWEtcmVxdWlyZWRcIjogdGhpcy5xdWVzdGlvbi5hcmlhUmVxdWlyZWQsIFwiYXJpYS1sYWJlbFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFMYWJlbCwgXCJhcmlhLWludmFsaWRcIjogdGhpcy5xdWVzdGlvbi5hcmlhSW52YWxpZCwgXCJhcmlhLWVycm9ybWVzc2FnZVwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFFcnJvcm1lc3NhZ2UsIFwiYXJpYS1leHBhbmRlZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFFeHBhbmRlZCA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRoaXMucXVlc3Rpb24uYXJpYUV4cGFuZGVkID09PSBcInRydWVcIiwgXCJhcmlhLWNvbnRyb2xzXCI6IGRyb3Bkb3duTGlzdE1vZGVsLmxpc3RFbGVtZW50SWQsIFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6IGRyb3Bkb3duTGlzdE1vZGVsLmFyaWFBY3RpdmVkZXNjZW5kYW50IH0sXG4gICAgICAgICAgICBkcm9wZG93bkxpc3RNb2RlbC5zaG93SGludFByZWZpeCA/XG4gICAgICAgICAgICAgICAgKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuaGludFByZWZpeCB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgbnVsbCwgZHJvcGRvd25MaXN0TW9kZWwuaGludFN0cmluZ1ByZWZpeCkpKSA6IG51bGwsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNvbnRyb2xWYWx1ZSB9LFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duTGlzdE1vZGVsLnNob3dIaW50U3RyaW5nID9cbiAgICAgICAgICAgICAgICAgICAgKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuaGludFN1ZmZpeCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgc3R5bGU6IHsgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiB9LCBcImRhdGEtYmluZFwiOiBcInRleHQ6IG1vZGVsLmZpbHRlclN0cmluZ1wiIH0sIGRyb3Bkb3duTGlzdE1vZGVsLmlucHV0U3RyaW5nUmVuZGVyZWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIG51bGwsIGRyb3Bkb3duTGlzdE1vZGVsLmhpbnRTdHJpbmdTdWZmaXgpKSkgOiBudWxsLFxuICAgICAgICAgICAgICAgIHZhbHVlRWxlbWVudCxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGF1dG9Db21wbGV0ZTogXCJvZmZcIiwgaWQ6IHRoaXMucXVlc3Rpb24uZ2V0SW5wdXRJZCgpLCByZWY6IGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiAoX3RoaXMuaW5wdXRFbGVtZW50ID0gZWxlbWVudCk7IH0sIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmZpbHRlclN0cmluZ0lucHV0LCByb2xlOiBkcm9wZG93bkxpc3RNb2RlbC5maWx0ZXJTdHJpbmdFbmFibGVkID8gdGhpcy5xdWVzdGlvbi5hcmlhUm9sZSA6IHVuZGVmaW5lZCwgXCJhcmlhLWV4cGFuZGVkXCI6IHRoaXMucXVlc3Rpb24uYXJpYUV4cGFuZGVkID09PSBudWxsID8gdW5kZWZpbmVkIDogdGhpcy5xdWVzdGlvbi5hcmlhRXhwYW5kZWQgPT09IFwidHJ1ZVwiLCBcImFyaWEtbGFiZWxcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFMYWJlbCwgXCJhcmlhLWxhYmVsbGVkYnlcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFMYWJlbGxlZEJ5LCBcImFyaWEtZGVzY3JpYmVkYnlcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFEZXNjcmliZWRCeSwgXCJhcmlhLWNvbnRyb2xzXCI6IGRyb3Bkb3duTGlzdE1vZGVsLmxpc3RFbGVtZW50SWQsIFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6IGRyb3Bkb3duTGlzdE1vZGVsLmFyaWFBY3RpdmVkZXNjZW5kYW50LCBwbGFjZWhvbGRlcjogZHJvcGRvd25MaXN0TW9kZWwucGxhY2Vob2xkZXJSZW5kZXJlZCwgcmVhZE9ubHk6IGRyb3Bkb3duTGlzdE1vZGVsLmZpbHRlclJlYWRPbmx5ID8gdHJ1ZSA6IHVuZGVmaW5lZCwgdGFiSW5kZXg6IGRyb3Bkb3duTGlzdE1vZGVsLm5vVGFiSW5kZXggPyB1bmRlZmluZWQgOiAtMSwgZGlzYWJsZWQ6IHRoaXMucXVlc3Rpb24uaXNJbnB1dFJlYWRPbmx5LCBpbnB1dE1vZGU6IGRyb3Bkb3duTGlzdE1vZGVsLmlucHV0TW9kZSwgb25DaGFuZ2U6IGZ1bmN0aW9uIChlKSB7IG9uSW5wdXRDaGFuZ2UoZSk7IH0sIG9uQmx1cjogdGhpcy5ibHVyLCBvbkZvY3VzOiB0aGlzLmZvY3VzIH0pKSxcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2xlYXJCdXR0b24oKSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2UucHJvdG90eXBlLmNyZWF0ZUNsZWFyQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24uYWxsb3dDbGVhciB8fCAhdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNsZWFuQnV0dG9uSWNvbklkKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBzdHlsZSA9IHsgZGlzcGxheTogIXRoaXMucXVlc3Rpb24uc2hvd0NsZWFyQnV0dG9uID8gXCJub25lXCIgOiBcIlwiIH07XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jbGVhbkJ1dHRvbiwgc3R5bGU6IHN0eWxlLCBvbkNsaWNrOiB0aGlzLmNsZWFyLCBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3ZnSWNvblwiXSwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jbGVhbkJ1dHRvblN2ZywgaWNvbk5hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jbGVhbkJ1dHRvbkljb25JZCwgdGl0bGU6IHRoaXMucXVlc3Rpb24uY2xlYXJDYXB0aW9uLCBzaXplOiBcImF1dG9cIiB9KSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2UucHJvdG90eXBlLmNyZWF0ZUNoZXZyb25CdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNoZXZyb25CdXR0b25JY29uSWQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNoZXZyb25CdXR0b24sIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIG9uUG9pbnRlckRvd246IHRoaXMuY2hldnJvblBvaW50ZXJEb3duIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3ZnSWNvblwiXSwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jaGV2cm9uQnV0dG9uU3ZnLCBpY29uTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNoZXZyb25CdXR0b25JY29uSWQsIHNpemU6IFwiYXV0b1wiIH0pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZS5wcm90b3R5cGUucmVuZGVyT3RoZXIgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldENvbW1lbnRBcmVhQ3NzKHRydWUpIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfcmVhY3RxdWVzdGlvbl9jb21tZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtXCJdLCB7IHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uLCBvdGhlckNzczogY3NzQ2xhc3Nlcy5vdGhlciwgY3NzQ2xhc3NlczogY3NzQ2xhc3NlcywgaXNEaXNwbGF5TW9kZTogdGhpcy5pc0Rpc3BsYXlNb2RlLCBpc090aGVyOiB0cnVlIH0pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZS5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlLmNhbGwodGhpcywgcHJldlByb3BzLCBwcmV2U3RhdGUpO1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0RG9tRWxlbWVudCgpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Ecm9wZG93bkJhc2UucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXREb21FbGVtZW50KCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZS5wcm90b3R5cGUudXBkYXRlSW5wdXREb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISF0aGlzLmlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGlzLmlucHV0RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHRoaXMucXVlc3Rpb24uZHJvcGRvd25MaXN0TW9kZWwuaW5wdXRTdHJpbmdSZW5kZXJlZDtcbiAgICAgICAgICAgIGlmICghc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkhlbHBlcnNcIl0uaXNUd29WYWx1ZUVxdWFscyhuZXdWYWx1ZSwgY29udHJvbC52YWx1ZSwgZmFsc2UsIHRydWUsIGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2wudmFsdWUgPSB0aGlzLnF1ZXN0aW9uLmRyb3Bkb3duTGlzdE1vZGVsLmlucHV0U3RyaW5nUmVuZGVyZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZTtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiU3VydmV5UXVlc3Rpb25VbmNvbnRyb2xsZWRFbGVtZW50XCJdKSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9kcm9wZG93bi1pdGVtLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9kcm9wZG93bi1pdGVtLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25PcHRpb25JdGVtXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25PcHRpb25JdGVtOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uT3B0aW9uSXRlbSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0ocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN0YXRlID0geyBjaGFuZ2VkOiAwIH07XG4gICAgICAgIF90aGlzLnNldHVwTW9kZWwoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0ucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZS5jYWxsKHRoaXMsIHByZXZQcm9wcywgcHJldlN0YXRlKTtcbiAgICAgICAgdGhpcy5zZXR1cE1vZGVsKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0ucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghIXRoaXMuaXRlbSkge1xuICAgICAgICAgICAgdGhpcy5pdGVtLmxvY1RleHQub25DaGFuZ2VkID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0ucHJvdG90eXBlLnNldHVwTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pdGVtLmxvY1RleHQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5pdGVtLmxvY1RleHQub25DaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5zZXRTdGF0ZSh7IGNoYW5nZWQ6IHNlbGYuc3RhdGUuY2hhbmdlZCArIDEgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0ucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW0ucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pdGVtO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25PcHRpb25JdGVtLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwib3B0aW9uXCIsIHsgdmFsdWU6IHRoaXMuaXRlbS52YWx1ZSwgZGlzYWJsZWQ6ICF0aGlzLml0ZW0uaXNFbmFibGVkIH0sIHRoaXMuaXRlbS50ZXh0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25PcHRpb25JdGVtO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L2Ryb3Bkb3duLXNlbGVjdC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9kcm9wZG93bi1zZWxlY3QudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25Ecm9wZG93blNlbGVjdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duU2VsZWN0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25Ecm9wZG93blNlbGVjdDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9kcm9wZG93bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2Ryb3Bkb3duICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9kcm9wZG93bi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Ryb3Bkb3duX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZHJvcGRvd24taXRlbSAqLyBcIi4vc3JjL3JlYWN0L2Ryb3Bkb3duLWl0ZW0udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25TZWxlY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uRHJvcGRvd25TZWxlY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25Ecm9wZG93blNlbGVjdChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uRHJvcGRvd25TZWxlY3QucHJvdG90eXBlLnJlbmRlclNlbGVjdCA9IGZ1bmN0aW9uIChjc3NDbGFzc2VzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMucXVlc3Rpb24ub25DbGljayhldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBrZXl1cCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMucXVlc3Rpb24ub25LZXlVcChldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzZWxlY3RFbGVtZW50ID0gdGhpcy5pc0Rpc3BsYXlNb2RlID8gKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBpZDogdGhpcy5xdWVzdGlvbi5pbnB1dElkLCBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0Q29udHJvbENsYXNzKCksIGRpc2FibGVkOiB0cnVlIH0sIHRoaXMucXVlc3Rpb24ucmVhZE9ubHlUZXh0KSkgOlxuICAgICAgICAgICAgKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic2VsZWN0XCIsIHsgaWQ6IHRoaXMucXVlc3Rpb24uaW5wdXRJZCwgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldENvbnRyb2xDbGFzcygpLCByZWY6IGZ1bmN0aW9uIChzZWxlY3QpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKHNlbGVjdCkpOyB9LCBhdXRvQ29tcGxldGU6IHRoaXMucXVlc3Rpb24uYXV0b2NvbXBsZXRlLCBvbkNoYW5nZTogdGhpcy51cGRhdGVWYWx1ZU9uRXZlbnQsIG9uSW5wdXQ6IHRoaXMudXBkYXRlVmFsdWVPbkV2ZW50LCBvbkNsaWNrOiBjbGljaywgb25LZXlVcDoga2V5dXAsIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMucXVlc3Rpb24uYXJpYUxhYmVsLCBcImFyaWEtaW52YWxpZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFJbnZhbGlkLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYXJpYUVycm9ybWVzc2FnZSwgcmVxdWlyZWQ6IHRoaXMucXVlc3Rpb24uaXNSZXF1aXJlZCB9LFxuICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24uYWxsb3dDbGVhciA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiIH0sIHRoaXMucXVlc3Rpb24ucGxhY2Vob2xkZXIpKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi52aXNpYmxlQ2hvaWNlcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHsgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9kcm9wZG93bl9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJTdXJ2ZXlRdWVzdGlvbk9wdGlvbkl0ZW1cIl0sIHsga2V5OiBcIml0ZW1cIiArIGksIGl0ZW06IGl0ZW0gfSk7IH0pKSk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuc2VsZWN0V3JhcHBlciB9LFxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudCxcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2hldnJvbkJ1dHRvbigpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25Ecm9wZG93blNlbGVjdDtcbn0oX3JlYWN0cXVlc3Rpb25fZHJvcGRvd25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleVF1ZXN0aW9uRHJvcGRvd25cIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcInN2LWRyb3Bkb3duLXNlbGVjdFwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UXVlc3Rpb25Ecm9wZG93blNlbGVjdCwgcHJvcHMpO1xufSk7XG5zdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVuZGVyZXJGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUmVuZGVyZXIoXCJkcm9wZG93blwiLCBcInNlbGVjdFwiLCBcInN2LWRyb3Bkb3duLXNlbGVjdFwiKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFJlYWN0RWxlbWVudEZhY3RvcnkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVhY3RFbGVtZW50RmFjdG9yeVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFJlYWN0RWxlbWVudEZhY3Rvcnk7IH0pO1xudmFyIFJlYWN0RWxlbWVudEZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVhY3RFbGVtZW50RmFjdG9yeSgpIHtcbiAgICAgICAgdGhpcy5jcmVhdG9ySGFzaCA9IHt9O1xuICAgIH1cbiAgICBSZWFjdEVsZW1lbnRGYWN0b3J5LnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudFR5cGUsIGVsZW1lbnRDcmVhdG9yKSB7XG4gICAgICAgIHRoaXMuY3JlYXRvckhhc2hbZWxlbWVudFR5cGVdID0gZWxlbWVudENyZWF0b3I7XG4gICAgfTtcbiAgICBSZWFjdEVsZW1lbnRGYWN0b3J5LnByb3RvdHlwZS5nZXRBbGxUeXBlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jcmVhdG9ySGFzaCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LnNvcnQoKTtcbiAgICB9O1xuICAgIFJlYWN0RWxlbWVudEZhY3RvcnkucHJvdG90eXBlLmlzRWxlbWVudFJlZ2lzdGVyZWQgPSBmdW5jdGlvbiAoZWxlbWVudFR5cGUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jcmVhdG9ySGFzaFtlbGVtZW50VHlwZV07XG4gICAgfTtcbiAgICBSZWFjdEVsZW1lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRUeXBlLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIGNyZWF0b3IgPSB0aGlzLmNyZWF0b3JIYXNoW2VsZW1lbnRUeXBlXTtcbiAgICAgICAgaWYgKGNyZWF0b3IgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gY3JlYXRvcihwYXJhbXMpO1xuICAgIH07XG4gICAgUmVhY3RFbGVtZW50RmFjdG9yeS5JbnN0YW5jZSA9IG5ldyBSZWFjdEVsZW1lbnRGYWN0b3J5KCk7XG4gICAgcmV0dXJuIFJlYWN0RWxlbWVudEZhY3Rvcnk7XG59KCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1oZWFkZXIudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9lbGVtZW50LWhlYWRlci50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleUVsZW1lbnRIZWFkZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5RWxlbWVudEhlYWRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleUVsZW1lbnRIZWFkZXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfYWN0aW9uX2Jhcl9hY3Rpb25fYmFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3RpdGxlX3RpdGxlX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy90aXRsZS90aXRsZS1lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy90aXRsZS90aXRsZS1lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleUVsZW1lbnRIZWFkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUVsZW1lbnRIZWFkZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5RWxlbWVudEhlYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudEhlYWRlci5wcm90b3R5cGUsIFwiZWxlbWVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZWxlbWVudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnRIZWFkZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIHZhciB0aXRsZSA9IGVsZW1lbnQuaGFzVGl0bGUgPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfY29tcG9uZW50c190aXRsZV90aXRsZV9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJUaXRsZUVsZW1lbnRcIl0sIHsgZWxlbWVudDogZWxlbWVudCB9KSkgOiBudWxsO1xuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBlbGVtZW50Lmhhc0Rlc2NyaXB0aW9uVW5kZXJUaXRsZVxuICAgICAgICAgICAgPyBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJRdWVzdGlvbkRlc2NyaXB0aW9uKHRoaXMuZWxlbWVudClcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIGFkZGl0aW9uYWxUaXRsZVRvb2xiYXJFbGVtZW50ID0gISFlbGVtZW50LmFkZGl0aW9uYWxUaXRsZVRvb2xiYXIgPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5QWN0aW9uQmFyXCJdLCB7IG1vZGVsOiBlbGVtZW50LmFkZGl0aW9uYWxUaXRsZVRvb2xiYXIgfSkgOiBudWxsO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGVsZW1lbnQuY3NzSGVhZGVyLCBvbkNsaWNrOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZWxlbWVudC5jbGlja1RpdGxlRnVuY3Rpb24gJiYgZWxlbWVudC5jbGlja1RpdGxlRnVuY3Rpb24oZS5uYXRpdmVFdmVudCk7IH0gfSxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBhZGRpdGlvbmFsVGl0bGVUb29sYmFyRWxlbWVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleUVsZW1lbnRIZWFkZXI7XG59KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLkNvbXBvbmVudCkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvZWxlbWVudC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5Um93RWxlbWVudCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlSb3dFbGVtZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5Um93RWxlbWVudDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgU3VydmV5Um93RWxlbWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5Um93RWxlbWVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlSb3dFbGVtZW50KHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5lbGVtZW50LmNzc0NsYXNzZXM7XG4gICAgICAgIF90aGlzLnJvb3RSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlUmVmXCJdKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3VydmV5Um93RWxlbWVudC5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVJvd0VsZW1lbnQucHJvdG90eXBlLCBcImVsZW1lbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmVsZW1lbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5Um93RWxlbWVudC5wcm90b3R5cGUsIFwiaW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmluZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVJvd0VsZW1lbnQucHJvdG90eXBlLCBcInJvd1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucm93O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVJvd0VsZW1lbnQucHJvdG90eXBlLCBcInN1cnZleVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc3VydmV5O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVJvd0VsZW1lbnQucHJvdG90eXBlLCBcImNyZWF0b3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNyZWF0b3I7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5Um93RWxlbWVudC5wcm90b3R5cGUsIFwiY3NzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jc3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlSb3dFbGVtZW50LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5yb290UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICh0aGlzLmVsZW1lbnQpLnNldFdyYXBwZXJFbGVtZW50KHRoaXMucm9vdFJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5Um93RWxlbWVudC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldFdyYXBwZXJFbGVtZW50KHVuZGVmaW5lZCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlSb3dFbGVtZW50LnByb3RvdHlwZS5zaG91bGRDb21wb25lbnRVcGRhdGUgPSBmdW5jdGlvbiAobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgaWYgKCFfc3VwZXIucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZS5jYWxsKHRoaXMsIG5leHRQcm9wcywgbmV4dFN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKG5leHRQcm9wcy5lbGVtZW50ICE9PSB0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcHMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIG5leHRQcm9wcy5lbGVtZW50LnNldFdyYXBwZXJFbGVtZW50KHRoaXMucm9vdFJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0V3JhcHBlckVsZW1lbnQodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQuY3NzQ2xhc3NlcztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlSb3dFbGVtZW50LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgdmFyIGlubmVyRWxlbWVudCA9IHRoaXMuY3JlYXRlRWxlbWVudChlbGVtZW50LCB0aGlzLmluZGV4KTtcbiAgICAgICAgdmFyIGNzcyA9IGVsZW1lbnQuY3NzQ2xhc3Nlc1ZhbHVlO1xuICAgICAgICB2YXIgZm9jdXNJbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoZWwgJiYgZWwuaXNRdWVzdGlvbikge1xuICAgICAgICAgICAgICAgIGVsLmZvY3VzSW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzLnF1ZXN0aW9uV3JhcHBlciwgc3R5bGU6IGVsZW1lbnQucm9vdFN0eWxlLCBcImRhdGEta2V5XCI6IGlubmVyRWxlbWVudC5rZXksIGtleTogaW5uZXJFbGVtZW50LmtleSwgb25Gb2N1czogZm9jdXNJbiwgcmVmOiB0aGlzLnJvb3RSZWYgfSwgdGhpcy5yb3cuaXNOZWVkUmVuZGVyID8gaW5uZXJFbGVtZW50IDogX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KGVsZW1lbnQuc2tlbGV0b25Db21wb25lbnROYW1lLCB7IGVsZW1lbnQ6IGVsZW1lbnQsIGNzczogdGhpcy5jc3MsIH0pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlSb3dFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGVsZW1lbnRJbmRleCkge1xuICAgICAgICB2YXIgaW5kZXggPSBlbGVtZW50SW5kZXggPyBcIi1cIiArIGVsZW1lbnRJbmRleCA6IDA7XG4gICAgICAgIHZhciBlbGVtZW50VHlwZSA9IGVsZW1lbnQuZ2V0VHlwZSgpO1xuICAgICAgICBpZiAoIV9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UuaXNFbGVtZW50UmVnaXN0ZXJlZChlbGVtZW50VHlwZSkpIHtcbiAgICAgICAgICAgIGVsZW1lbnRUeXBlID0gXCJxdWVzdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoZWxlbWVudFR5cGUsIHtcbiAgICAgICAgICAgIGtleTogZWxlbWVudC5uYW1lICsgaW5kZXgsXG4gICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgY3JlYXRvcjogdGhpcy5jcmVhdG9yLFxuICAgICAgICAgICAgc3VydmV5OiB0aGlzLnN1cnZleSxcbiAgICAgICAgICAgIGNzczogdGhpcy5jc3MsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVJvd0VsZW1lbnQ7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9mbG93LXBhbmVsLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9mbG93LXBhbmVsLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlGbG93UGFuZWwgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5Rmxvd1BhbmVsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5Rmxvd1BhbmVsOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGFuZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcGFuZWwgKi8gXCIuL3NyYy9yZWFjdC9wYW5lbC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbiAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb24udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBTdXJ2ZXlGbG93UGFuZWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUZsb3dQYW5lbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlGbG93UGFuZWwocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5Rmxvd1BhbmVsLnByb3RvdHlwZSwgXCJmbG93UGFuZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhbmVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5Rmxvd1BhbmVsLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoISF0aGlzLmZsb3dQYW5lbCkge1xuICAgICAgICAgICAgdGhpcy5mbG93UGFuZWwub25DdXN0b21IdG1sUHJvZHVjaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZmxvd1BhbmVsLm9uR2V0SHRtbEZvclF1ZXN0aW9uID0gdGhpcy5yZW5kZXJRdWVzdGlvbjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5Rmxvd1BhbmVsLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoISF0aGlzLmZsb3dQYW5lbCkge1xuICAgICAgICAgICAgdGhpcy5mbG93UGFuZWwub25DdXN0b21IdG1sUHJvZHVjaW5nID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZmxvd1BhbmVsLm9uR2V0SHRtbEZvclF1ZXN0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5Rmxvd1BhbmVsLnByb3RvdHlwZS5nZXRRdWVzdGlvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsb3dQYW5lbC5nZXRRdWVzdGlvbkJ5TmFtZShuYW1lKTtcbiAgICB9O1xuICAgIFN1cnZleUZsb3dQYW5lbC5wcm90b3R5cGUucmVuZGVyUXVlc3Rpb24gPSBmdW5jdGlvbiAocXVlc3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIFwiPHF1ZXN0aW9uPlwiICsgcXVlc3Rpb24ubmFtZSArIFwiPC9xdWVzdGlvbj5cIjtcbiAgICB9O1xuICAgIFN1cnZleUZsb3dQYW5lbC5wcm90b3R5cGUucmVuZGVyUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucmVuZGVySHRtbCgpO1xuICAgICAgICBpZiAoISFyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiBbcmVzdWx0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5Rmxvd1BhbmVsLnByb3RvdHlwZS5nZXROb2RlSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVkSW5kZXgrKztcbiAgICB9O1xuICAgIFN1cnZleUZsb3dQYW5lbC5wcm90b3R5cGUucmVuZGVySHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZsb3dQYW5lbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgaHRtbCA9IFwiPHNwYW4+XCIgKyB0aGlzLmZsb3dQYW5lbC5wcm9kdWNlSHRtbCgpICsgXCI8L3NwYW4+XCI7XG4gICAgICAgIGlmICghRE9NUGFyc2VyKSB7XG4gICAgICAgICAgICB2YXIgaHRtbFZhbHVlID0geyBfX2h0bWw6IGh0bWwgfTtcbiAgICAgICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiBodG1sVmFsdWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgXCJ0ZXh0L3htbFwiKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEluZGV4ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUGFyZW50Tm9kZShkb2MpO1xuICAgIH07XG4gICAgU3VydmV5Rmxvd1BhbmVsLnByb3RvdHlwZS5yZW5kZXJOb2RlcyA9IGZ1bmN0aW9uIChkb21Ob2Rlcykge1xuICAgICAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb21Ob2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnJlbmRlck5vZGUoZG9tTm9kZXNbaV0pO1xuICAgICAgICAgICAgaWYgKCEhbm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH07XG4gICAgU3VydmV5Rmxvd1BhbmVsLnByb3RvdHlwZS5nZXRTdHlsZSA9IGZ1bmN0aW9uIChub2RlVHlwZSkge1xuICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgaWYgKG5vZGVUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiYlwiKSB7XG4gICAgICAgICAgICBzdHlsZS5mb250V2VpZ2h0ID0gXCJib2xkXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGVUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiaVwiKSB7XG4gICAgICAgICAgICBzdHlsZS5mb250U3R5bGUgPSBcIml0YWxpY1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInVcIikge1xuICAgICAgICAgICAgc3R5bGUudGV4dERlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9O1xuICAgIFN1cnZleUZsb3dQYW5lbC5wcm90b3R5cGUucmVuZGVyUGFyZW50Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5yZW5kZXJOb2Rlcyh0aGlzLmdldENoaWxkRG9tTm9kZXMobm9kZSkpO1xuICAgICAgICBpZiAobm9kZVR5cGUgPT09IFwiZGl2XCIpXG4gICAgICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBrZXk6IHRoaXMuZ2V0Tm9kZUluZGV4KCkgfSwgY2hpbGRyZW4pO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGtleTogdGhpcy5nZXROb2RlSW5kZXgoKSwgc3R5bGU6IHRoaXMuZ2V0U3R5bGUobm9kZVR5cGUpIH0sIGNoaWxkcmVuKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlGbG93UGFuZWwucHJvdG90eXBlLnJlbmRlck5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzVGV4dENoaWxkTm9kZXNPbmx5KG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQYXJlbnROb2RlKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKG5vZGVUeXBlID09PSBcInF1ZXN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBxdWVzdGlvbiA9IHRoaXMuZmxvd1BhbmVsLmdldFF1ZXN0aW9uQnlOYW1lKG5vZGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgaWYgKCFxdWVzdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHZhciBxdWVzdGlvbkJvZHkgPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleVF1ZXN0aW9uXCJdLCB7IGtleTogcXVlc3Rpb24ubmFtZSwgZWxlbWVudDogcXVlc3Rpb24sIGNyZWF0b3I6IHRoaXMuY3JlYXRvciwgY3NzOiB0aGlzLmNzcyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsga2V5OiB0aGlzLmdldE5vZGVJbmRleCgpIH0sIHF1ZXN0aW9uQm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGVUeXBlID09PSBcImRpdlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBrZXk6IHRoaXMuZ2V0Tm9kZUluZGV4KCkgfSwgbm9kZS50ZXh0Q29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBrZXk6IHRoaXMuZ2V0Tm9kZUluZGV4KCksIHN0eWxlOiB0aGlzLmdldFN0eWxlKG5vZGVUeXBlKSB9LCBub2RlLnRleHRDb250ZW50KSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlGbG93UGFuZWwucHJvdG90eXBlLmdldENoaWxkRG9tTm9kZXMgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgZG9tTm9kZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRvbU5vZGVzLnB1c2gobm9kZS5jaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9tTm9kZXM7XG4gICAgfTtcbiAgICBTdXJ2ZXlGbG93UGFuZWwucHJvdG90eXBlLmhhc1RleHRDaGlsZE5vZGVzT25seSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBub2RlcyA9IG5vZGUuY2hpbGROb2RlcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKG5vZGVzW2ldLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwiI3RleHRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlGbG93UGFuZWwucHJvdG90eXBlLnJlbmRlckNvbnRlbnQgPSBmdW5jdGlvbiAoc3R5bGUsIHJvd3MpIHtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZi1wYW5lbFwiLCB7IHN0eWxlOiBzdHlsZSB9LCByb3dzKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlGbG93UGFuZWw7XG59KF9wYW5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5UGFuZWxcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJmbG93cGFuZWxcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleUZsb3dQYW5lbCwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvaW1hZ2UudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9pbWFnZS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uSW1hZ2UgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25JbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uSW1hZ2U7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uSW1hZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uSW1hZ2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25JbWFnZShwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uSW1hZ2UucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucXVlc3Rpb24ubG9jSW1hZ2VMaW5rLm9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkltYWdlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLmxvY0ltYWdlTGluay5vbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25JbWFnZS5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uSW1hZ2UucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gdGhpcy5xdWVzdGlvbi5nZXRJbWFnZUNzcygpO1xuICAgICAgICB2YXIgc3R5bGUgPSB7IG9iamVjdEZpdDogdGhpcy5xdWVzdGlvbi5pbWFnZUZpdCwgd2lkdGg6IHRoaXMucXVlc3Rpb24ucmVuZGVyZWRTdHlsZVdpZHRoLCBoZWlnaHQ6IHRoaXMucXVlc3Rpb24ucmVuZGVyZWRTdHlsZUhlaWdodCB9O1xuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24uaW1hZ2VMaW5rIHx8IHRoaXMucXVlc3Rpb24uY29udGVudE5vdExvYWRlZCkge1xuICAgICAgICAgICAgc3R5bGVbXCJkaXNwbGF5XCJdID0gXCJub25lXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbnRyb2wgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5yZW5kZXJlZE1vZGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgY29udHJvbCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImltZ1wiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcywgc3JjOiB0aGlzLnF1ZXN0aW9uLmxvY0ltYWdlTGluay5yZW5kZXJlZEh0bWwsIGFsdDogdGhpcy5xdWVzdGlvbi5hbHRUZXh0IHx8IHRoaXMucXVlc3Rpb24udGl0bGUsIHdpZHRoOiB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkV2lkdGgsIGhlaWdodDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZEhlaWdodCwgXG4gICAgICAgICAgICAgICAgLy9hbHQ9e2l0ZW0udGV4dCB8fCBpdGVtLnZhbHVlfVxuICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSwgb25Mb2FkOiBmdW5jdGlvbiAoZXZlbnQpIHsgX3RoaXMucXVlc3Rpb24ub25Mb2FkSGFuZGxlcigpOyB9LCBvbkVycm9yOiBmdW5jdGlvbiAoZXZlbnQpIHsgX3RoaXMucXVlc3Rpb24ub25FcnJvckhhbmRsZXIoKTsgfSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24ucmVuZGVyZWRNb2RlID09PSBcInZpZGVvXCIpIHtcbiAgICAgICAgICAgIGNvbnRyb2wgPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ2aWRlb1wiLCB7IGNvbnRyb2xzOiB0cnVlLCBjbGFzc05hbWU6IGNzc0NsYXNzZXMsIHNyYzogdGhpcy5xdWVzdGlvbi5sb2NJbWFnZUxpbmsucmVuZGVyZWRIdG1sLCB3aWR0aDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFdpZHRoLCBoZWlnaHQ6IHRoaXMucXVlc3Rpb24ucmVuZGVyZWRIZWlnaHQsIHN0eWxlOiBzdHlsZSwgb25Mb2FkZWRNZXRhZGF0YTogZnVuY3Rpb24gKGV2ZW50KSB7IF90aGlzLnF1ZXN0aW9uLm9uTG9hZEhhbmRsZXIoKTsgfSwgb25FcnJvcjogZnVuY3Rpb24gKGV2ZW50KSB7IF90aGlzLnF1ZXN0aW9uLm9uRXJyb3JIYW5kbGVyKCk7IH0gfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkTW9kZSA9PT0gXCJ5b3V0dWJlXCIpIHtcbiAgICAgICAgICAgIGNvbnRyb2wgPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJpZnJhbWVcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMsIHNyYzogdGhpcy5xdWVzdGlvbi5sb2NJbWFnZUxpbmsucmVuZGVyZWRIdG1sLCB3aWR0aDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFdpZHRoLCBoZWlnaHQ6IHRoaXMucXVlc3Rpb24ucmVuZGVyZWRIZWlnaHQsIHN0eWxlOiBzdHlsZSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vSW1hZ2UgPSBudWxsO1xuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24uaW1hZ2VMaW5rIHx8IHRoaXMucXVlc3Rpb24uY29udGVudE5vdExvYWRlZCkge1xuICAgICAgICAgICAgbm9JbWFnZSA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLm5vSW1hZ2UgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLm5vSW1hZ2VTdmdJY29uSWQsIHNpemU6IDQ4IH0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucm9vdCB9LFxuICAgICAgICAgICAgY29udHJvbCxcbiAgICAgICAgICAgIG5vSW1hZ2UpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uSW1hZ2U7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcImltYWdlXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkltYWdlLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9pbWFnZXBpY2tlci50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L2ltYWdlcGlja2VyLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlciwgU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlckl0ZW0gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJJdGVtXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlckl0ZW07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHN1cnZleW1vZGVsICovIFwiLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlcihwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VyLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25CYXNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlci5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJmaWVsZHNldFwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRTZWxlY3RCYXNlUm9vdENzcygpIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImxlZ2VuZFwiLCB7IGNsYXNzTmFtZTogXCJzdi1oaWRkZW5cIiB9LCB0aGlzLnF1ZXN0aW9uLmxvY1RpdGxlLnJlbmRlcmVkSHRtbCksXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLmhhc0NvbHVtbnMgPyB0aGlzLmdldENvbHVtbnMoY3NzQ2xhc3NlcykgOiB0aGlzLmdldEl0ZW1zKGNzc0NsYXNzZXMpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VyLnByb3RvdHlwZS5nZXRDb2x1bW5zID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb24uY29sdW1ucy5tYXAoZnVuY3Rpb24gKGNvbHVtbiwgY2kpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGNvbHVtbi5tYXAoZnVuY3Rpb24gKGl0ZW0sIGlpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlckl0ZW0oXCJpdGVtXCIgKyBpaSwgaXRlbSwgY3NzQ2xhc3Nlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBrZXk6IFwiY29sdW1uXCIgKyBjaSwgY2xhc3NOYW1lOiBfdGhpcy5xdWVzdGlvbi5nZXRDb2x1bW5DbGFzcygpLCByb2xlOiBcInByZXNlbnRhdGlvblwiIH0sIGl0ZW1zKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlci5wcm90b3R5cGUuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnF1ZXN0aW9uLnZpc2libGVDaG9pY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMucXVlc3Rpb24udmlzaWJsZUNob2ljZXNbaV07XG4gICAgICAgICAgICB2YXIga2V5ID0gXCJpdGVtXCIgKyBpO1xuICAgICAgICAgICAgaXRlbXMucHVzaCh0aGlzLnJlbmRlckl0ZW0oa2V5LCBpdGVtLCBjc3NDbGFzc2VzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXIucHJvdG90eXBlLCBcInRleHRTdHlsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgbWFyZ2luTGVmdDogXCIzcHhcIiwgZGlzcGxheTogXCJpbmxpbmVcIiwgcG9zaXRpb246IFwic3RhdGljXCIgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXIucHJvdG90eXBlLnJlbmRlckl0ZW0gPSBmdW5jdGlvbiAoa2V5LCBpdGVtLCBjc3NDbGFzc2VzKSB7XG4gICAgICAgIHZhciByZW5kZXJlZEl0ZW0gPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VySXRlbSwgeyBrZXk6IGtleSwgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24sIGl0ZW06IGl0ZW0sIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMgfSk7XG4gICAgICAgIHZhciBzdXJ2ZXkgPSB0aGlzLnF1ZXN0aW9uLnN1cnZleTtcbiAgICAgICAgdmFyIHdyYXBwZWRJdGVtID0gbnVsbDtcbiAgICAgICAgaWYgKCEhc3VydmV5KSB7XG4gICAgICAgICAgICB3cmFwcGVkSXRlbSA9IF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlclwiXS53cmFwSXRlbVZhbHVlKHN1cnZleSwgcmVuZGVyZWRJdGVtLCB0aGlzLnF1ZXN0aW9uLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JhcHBlZEl0ZW0gIT09IG51bGwgJiYgd3JhcHBlZEl0ZW0gIT09IHZvaWQgMCA/IHdyYXBwZWRJdGVtIDogcmVuZGVyZWRJdGVtO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXI7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIl0pKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VySXRlbSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VySXRlbShwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25DaGFuZ2UgPSBfdGhpcy5oYW5kbGVPbkNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VySXRlbS5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlckl0ZW0ucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucmVhY3RPblN0ckNoYW5nZWQoKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJJdGVtLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLml0ZW0ubG9jSW1hZ2VMaW5rLm9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJJdGVtLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUuY2FsbCh0aGlzLCBwcmV2UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICAgIHRoaXMucmVhY3RPblN0ckNoYW5nZWQoKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJJdGVtLnByb3RvdHlwZS5yZWFjdE9uU3RyQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5pdGVtLmxvY0ltYWdlTGluay5vbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGxvY0ltYWdlTGlua2NoYW5nZWQ6ICEhX3RoaXMuc3RhdGUgJiYgX3RoaXMuc3RhdGUubG9jSW1hZ2VMaW5rID8gX3RoaXMuc3RhdGUubG9jSW1hZ2VMaW5rICsgMSA6IDEgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlckl0ZW0ucHJvdG90eXBlLCBcImNzc0NsYXNzZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNzc0NsYXNzZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlckl0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlckl0ZW0ucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5xdWVzdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uSW1hZ2VQaWNrZXJJdGVtLnByb3RvdHlwZS5oYW5kbGVPbkNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5tdWx0aVNlbGVjdCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi52YWx1ZSA9IHRoaXMucXVlc3Rpb24udmFsdWUuY29uY2F0KGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyclZhbHVlID0gdGhpcy5xdWVzdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICBjdXJyVmFsdWUuc3BsaWNlKHRoaXMucXVlc3Rpb24udmFsdWUuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLnZhbHVlID0gY3VyclZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi52YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdmFsdWU6IHRoaXMucXVlc3Rpb24udmFsdWUgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VySXRlbS5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLml0ZW07XG4gICAgICAgIHZhciBxdWVzdGlvbiA9IHRoaXMucXVlc3Rpb247XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gdGhpcy5jc3NDbGFzc2VzO1xuICAgICAgICB2YXIgaXNDaGVja2VkID0gcXVlc3Rpb24uaXNJdGVtU2VsZWN0ZWQoaXRlbSk7XG4gICAgICAgIHZhciBpdGVtQ2xhc3MgPSBxdWVzdGlvbi5nZXRJdGVtQ2xhc3MoaXRlbSk7XG4gICAgICAgIHZhciB0ZXh0ID0gbnVsbDtcbiAgICAgICAgaWYgKHF1ZXN0aW9uLnNob3dMYWJlbCkge1xuICAgICAgICAgICAgdGV4dCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IHF1ZXN0aW9uLmNzc0NsYXNzZXMuaXRlbVRleHQgfSwgaXRlbS50ZXh0ID8gX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0ucmVuZGVyTG9jU3RyaW5nKGl0ZW0ubG9jVGV4dCkgOiBpdGVtLnZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0eWxlID0geyBvYmplY3RGaXQ6IHRoaXMucXVlc3Rpb24uaW1hZ2VGaXQgfTtcbiAgICAgICAgdmFyIGNvbnRyb2wgPSBudWxsO1xuICAgICAgICBpZiAoaXRlbS5sb2NJbWFnZUxpbmsucmVuZGVyZWRIdG1sICYmIHRoaXMucXVlc3Rpb24uY29udGVudE1vZGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgY29udHJvbCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImltZ1wiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5pbWFnZSwgc3JjOiBpdGVtLmxvY0ltYWdlTGluay5yZW5kZXJlZEh0bWwsIHdpZHRoOiB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkSW1hZ2VXaWR0aCwgaGVpZ2h0OiB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkSW1hZ2VIZWlnaHQsIGFsdDogaXRlbS5sb2NUZXh0LnJlbmRlcmVkSHRtbCwgc3R5bGU6IHN0eWxlLCBvbkxvYWQ6IGZ1bmN0aW9uIChldmVudCkgeyBfdGhpcy5xdWVzdGlvbltcIm9uQ29udGVudExvYWRlZFwiXShpdGVtLCBldmVudC5uYXRpdmVFdmVudCk7IH0sIG9uRXJyb3I6IGZ1bmN0aW9uIChldmVudCkgeyBpdGVtLm9uRXJyb3JIYW5kbGVyKGl0ZW0sIGV2ZW50Lm5hdGl2ZUV2ZW50KTsgfSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0ubG9jSW1hZ2VMaW5rLnJlbmRlcmVkSHRtbCAmJiB0aGlzLnF1ZXN0aW9uLmNvbnRlbnRNb2RlID09PSBcInZpZGVvXCIpIHtcbiAgICAgICAgICAgIGNvbnRyb2wgPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ2aWRlb1wiLCB7IGNvbnRyb2xzOiB0cnVlLCBjbGFzc05hbWU6IGNzc0NsYXNzZXMuaW1hZ2UsIHNyYzogaXRlbS5sb2NJbWFnZUxpbmsucmVuZGVyZWRIdG1sLCB3aWR0aDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZEltYWdlV2lkdGgsIGhlaWdodDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZEltYWdlSGVpZ2h0LCBzdHlsZTogc3R5bGUsIG9uTG9hZGVkTWV0YWRhdGE6IGZ1bmN0aW9uIChldmVudCkgeyBfdGhpcy5xdWVzdGlvbltcIm9uQ29udGVudExvYWRlZFwiXShpdGVtLCBldmVudC5uYXRpdmVFdmVudCk7IH0sIG9uRXJyb3I6IGZ1bmN0aW9uIChldmVudCkgeyBpdGVtLm9uRXJyb3JIYW5kbGVyKGl0ZW0sIGV2ZW50Lm5hdGl2ZUV2ZW50KTsgfSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpdGVtLmxvY0ltYWdlTGluay5yZW5kZXJlZEh0bWwgfHwgaXRlbS5jb250ZW50Tm90TG9hZGVkKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGVfMSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZEltYWdlV2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkSW1hZ2VIZWlnaHQsXG4gICAgICAgICAgICAgICAgb2JqZWN0Rml0OiB0aGlzLnF1ZXN0aW9uLmltYWdlRml0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29udHJvbCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5pdGVtTm9JbWFnZSwgc3R5bGU6IHN0eWxlXzEgfSwgY3NzQ2xhc3Nlcy5pdGVtTm9JbWFnZVN2Z0ljb24gP1xuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJTdmdJY29uXCJdLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5pdGVtTm9JbWFnZVN2Z0ljb24sIGljb25OYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuaXRlbU5vSW1hZ2VTdmdJY29uSWQsIHNpemU6IDQ4IH0pIDpcbiAgICAgICAgICAgICAgICBudWxsKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbmRlcmVkSXRlbSA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogaXRlbUNsYXNzIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmxhYmVsIH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJpbnB1dFwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5pdGVtQ29udHJvbCwgaWQ6IHRoaXMucXVlc3Rpb24uZ2V0SXRlbUlkKGl0ZW0pLCB0eXBlOiB0aGlzLnF1ZXN0aW9uLmlucHV0VHlwZSwgbmFtZTogdGhpcy5xdWVzdGlvbi5xdWVzdGlvbk5hbWUsIGNoZWNrZWQ6IGlzQ2hlY2tlZCwgdmFsdWU6IGl0ZW0udmFsdWUsIGRpc2FibGVkOiAhdGhpcy5xdWVzdGlvbi5nZXRJdGVtRW5hYmxlZChpdGVtKSwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlT25DaGFuZ2UsIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMucXVlc3Rpb24uYXJpYUxhYmVsLCBcImFyaWEtaW52YWxpZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFJbnZhbGlkLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYXJpYUVycm9ybWVzc2FnZSB9KSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLml0ZW1EZWNvcmF0b3IgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5pbWFnZUNvbnRhaW5lciB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgISF0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuY2hlY2tlZEl0ZW1EZWNvcmF0b3IgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNoZWNrZWRJdGVtRGVjb3JhdG9yIH0sICEhdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNoZWNrZWRJdGVtU3ZnSWNvbklkID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlN2Z0ljb25cIl0sIHsgc2l6ZTogXCJhdXRvXCIsIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNoZWNrZWRJdGVtU3ZnSWNvbiwgaWNvbk5hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jaGVja2VkSXRlbVN2Z0ljb25JZCB9KSA6IG51bGwpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wpLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0KSkpKTtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkSXRlbTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkltYWdlUGlja2VySXRlbTtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50XCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJpbWFnZXBpY2tlclwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UXVlc3Rpb25JbWFnZVBpY2tlciwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcGFnZS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcGFnZS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UGFnZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlQYWdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UGFnZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BhbmVsX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcGFuZWwtYmFzZSAqLyBcIi4vc3JjL3JlYWN0L3BhbmVsLWJhc2UudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3RpdGxlX3RpdGxlX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy90aXRsZS90aXRsZS1lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy90aXRsZS90aXRsZS1lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbi50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG52YXIgU3VydmV5UGFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UGFnZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlQYWdlKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5UGFnZS5wcm90b3R5cGUuZ2V0UGFuZWxCYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5wYWdlO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVBhZ2UucHJvdG90eXBlLCBcInBhZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhbmVsQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8vIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IGFueSwgbmV4dFN0YXRlOiBhbnkpOiBib29sZWFuIHtcbiAgICAvLyAgIGlmKCFzdXBlci5zaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gICByZXR1cm4gdHJ1ZTtcbiAgICAvLyB9XG4gICAgU3VydmV5UGFnZS5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRpdGxlID0gdGhpcy5yZW5kZXJUaXRsZSgpO1xuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLnJlbmRlckRlc2NyaXB0aW9uKCk7XG4gICAgICAgIHZhciByb3dzID0gdGhpcy5yZW5kZXJSb3dzKHRoaXMucGFuZWxCYXNlLmNzc0NsYXNzZXMpO1xuICAgICAgICB2YXIgZXJyb3JzID0gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9yZWFjdHF1ZXN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJTdXJ2ZXlFbGVtZW50RXJyb3JzXCJdLCB7IGVsZW1lbnQ6IHRoaXMucGFuZWxCYXNlLCBjc3NDbGFzc2VzOiB0aGlzLnBhbmVsQmFzZS5jc3NDbGFzc2VzLCBjcmVhdG9yOiB0aGlzLmNyZWF0b3IgfSkpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgcmVmOiB0aGlzLnJvb3RSZWYsIGNsYXNzTmFtZTogdGhpcy5wYWdlLmNzc1Jvb3QgfSxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICByb3dzKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQYWdlLnByb3RvdHlwZS5yZW5kZXJUaXRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3RpdGxlX3RpdGxlX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlRpdGxlRWxlbWVudFwiXSwgeyBlbGVtZW50OiB0aGlzLnBhZ2UgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQYWdlLnByb3RvdHlwZS5yZW5kZXJEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhZ2UuX3Nob3dEZXNjcmlwdGlvbilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgdGV4dCA9IF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdLnJlbmRlckxvY1N0cmluZyh0aGlzLnBhZ2UubG9jRGVzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnBhbmVsQmFzZS5jc3NDbGFzc2VzLnBhZ2UuZGVzY3JpcHRpb24gfSwgdGV4dCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVBhZ2U7XG59KF9wYW5lbF9iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlQYW5lbEJhc2VcIl0pKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3BhbmVsLWJhc2UudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3BhbmVsLWJhc2UudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVBhbmVsQmFzZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlQYW5lbEJhc2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlQYW5lbEJhc2U7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yb3dfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcm93ICovIFwiLi9zcmMvcmVhY3Qvcm93LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleVBhbmVsQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UGFuZWxCYXNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVBhbmVsQmFzZShwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucm9vdFJlZiA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVSZWZcIl0oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlQYW5lbEJhc2UucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFuZWxCYXNlO1xuICAgIH07XG4gICAgU3VydmV5UGFuZWxCYXNlLnByb3RvdHlwZS5jYW5Vc2VQcm9wSW5TdGF0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGtleSAhPT0gXCJlbGVtZW50c1wiICYmIF9zdXBlci5wcm90b3R5cGUuY2FuVXNlUHJvcEluU3RhdGUuY2FsbCh0aGlzLCBrZXkpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVBhbmVsQmFzZS5wcm90b3R5cGUsIFwic3VydmV5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdXJ2ZXkoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlQYW5lbEJhc2UucHJvdG90eXBlLCBcImNyZWF0b3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNyZWF0b3I7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UGFuZWxCYXNlLnByb3RvdHlwZSwgXCJjc3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENzcygpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVBhbmVsQmFzZS5wcm90b3R5cGUsIFwicGFuZWxCYXNlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQYW5lbEJhc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVBhbmVsQmFzZS5wcm90b3R5cGUuZ2V0UGFuZWxCYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5lbGVtZW50IHx8IHRoaXMucHJvcHMucXVlc3Rpb247XG4gICAgfTtcbiAgICBTdXJ2ZXlQYW5lbEJhc2UucHJvdG90eXBlLmdldFN1cnZleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnByb3BzLnN1cnZleSB8fCAoISF0aGlzLnBhbmVsQmFzZSA/IHRoaXMucGFuZWxCYXNlLnN1cnZleSA6IG51bGwpKTtcbiAgICB9O1xuICAgIFN1cnZleVBhbmVsQmFzZS5wcm90b3R5cGUuZ2V0Q3NzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jc3M7XG4gICAgfTtcbiAgICBTdXJ2ZXlQYW5lbEJhc2UucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuZG9BZnRlclJlbmRlcigpO1xuICAgIH07XG4gICAgU3VydmV5UGFuZWxCYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB2YXIgZWwgPSB0aGlzLnJvb3RSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKCEhZWwpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtcmVuZGVyZWRcIik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleVBhbmVsQmFzZS5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlLmNhbGwodGhpcywgcHJldlByb3BzLCBwcmV2U3RhdGUpO1xuICAgICAgICBpZiAoISFwcmV2UHJvcHMucGFnZSAmJlxuICAgICAgICAgICAgISF0aGlzLnN1cnZleSAmJlxuICAgICAgICAgICAgISF0aGlzLnN1cnZleS5hY3RpdmVQYWdlICYmXG4gICAgICAgICAgICBwcmV2UHJvcHMucGFnZS5pZCA9PT0gdGhpcy5zdXJ2ZXkuYWN0aXZlUGFnZS5pZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5kb0FmdGVyUmVuZGVyKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQYW5lbEJhc2UucHJvdG90eXBlLmRvQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMucm9vdFJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoZWwgJiYgdGhpcy5zdXJ2ZXkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhbmVsQmFzZS5pc1BhbmVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXkuYWZ0ZXJSZW5kZXJQYW5lbCh0aGlzLnBhbmVsQmFzZSwgZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXkuYWZ0ZXJSZW5kZXJQYWdlKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5UGFuZWxCYXNlLnByb3RvdHlwZS5nZXRJc1Zpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhbmVsQmFzZS5pc1Zpc2libGU7XG4gICAgfTtcbiAgICBTdXJ2ZXlQYW5lbEJhc2UucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChfc3VwZXIucHJvdG90eXBlLmNhblJlbmRlci5jYWxsKHRoaXMpICYmICEhdGhpcy5zdXJ2ZXkgJiYgISF0aGlzLnBhbmVsQmFzZSAmJiAhIXRoaXMucGFuZWxCYXNlLnN1cnZleSAmJiB0aGlzLmdldElzVmlzaWJsZSgpKTtcbiAgICB9O1xuICAgIFN1cnZleVBhbmVsQmFzZS5wcm90b3R5cGUucmVuZGVyUm93cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMucGFuZWxCYXNlLnZpc2libGVSb3dzLm1hcChmdW5jdGlvbiAocm93KSB7IHJldHVybiBfdGhpcy5jcmVhdGVSb3cocm93LCBjc3MpOyB9KTtcbiAgICB9O1xuICAgIFN1cnZleVBhbmVsQmFzZS5wcm90b3R5cGUuY3JlYXRlUm93ID0gZnVuY3Rpb24gKHJvdywgY3NzKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3Jvd19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5Um93XCJdLCB7IGtleTogcm93LmlkLCByb3c6IHJvdywgc3VydmV5OiB0aGlzLnN1cnZleSwgY3JlYXRvcjogdGhpcy5jcmVhdG9yLCBjc3M6IGNzcyB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UGFuZWxCYXNlO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXSkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcGFuZWwudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9wYW5lbC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVBhbmVsICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVBhbmVsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UGFuZWw7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbiAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb24udHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BhbmVsX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcGFuZWwtYmFzZSAqLyBcIi4vc3JjL3JlYWN0L3BhbmVsLWJhc2UudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0c3VydmV5bW9kZWwgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHN1cnZleW1vZGVsLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19hY3Rpb25fYmFyX2FjdGlvbl9iYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfdGl0bGVfdGl0bGVfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWVsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3RpdGxlL3RpdGxlLWVsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2hlYWRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWhlYWRlciAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtaGVhZGVyLnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG5cblxuXG5cblxudmFyIFN1cnZleVBhbmVsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlQYW5lbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlQYW5lbChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFzQmVlbkV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVBhbmVsLnByb3RvdHlwZSwgXCJwYW5lbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFuZWxCYXNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UGFuZWwucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnJlbmRlckhlYWRlcigpO1xuICAgICAgICB2YXIgZXJyb3JzID0gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9yZWFjdHF1ZXN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlFbGVtZW50RXJyb3JzXCJdLCB7IGVsZW1lbnQ6IHRoaXMucGFuZWxCYXNlLCBjc3NDbGFzc2VzOiB0aGlzLnBhbmVsQmFzZS5jc3NDbGFzc2VzLCBjcmVhdG9yOiB0aGlzLmNyZWF0b3IgfSkpO1xuICAgICAgICB2YXIgc3R5bGUgPSB7XG4gICAgICAgICAgICBwYWRkaW5nTGVmdDogdGhpcy5wYW5lbC5pbm5lclBhZGRpbmdMZWZ0LFxuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5wYW5lbC5yZW5kZXJlZElzRXhwYW5kZWQgPyB1bmRlZmluZWQgOiBcIm5vbmVcIixcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5wYW5lbC5yZW5kZXJlZElzRXhwYW5kZWQpIHtcbiAgICAgICAgICAgIC8vIHRoaXMuaGFzQmVlbkV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5yZW5kZXJSb3dzKHRoaXMucGFuZWxCYXNlLmNzc0NsYXNzZXMpO1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMucGFuZWxCYXNlLmNzc0NsYXNzZXMucGFuZWwuY29udGVudDtcbiAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLnJlbmRlckNvbnRlbnQoc3R5bGUsIHJvd3MsIGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZvY3VzSW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMucGFuZWxCYXNlKVxuICAgICAgICAgICAgICAgIF90aGlzLnBhbmVsQmFzZS5mb2N1c0luKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyByZWY6IHRoaXMucm9vdFJlZiwgY2xhc3NOYW1lOiB0aGlzLnBhbmVsQmFzZS5nZXRDb250YWluZXJDc3MoKSwgb25Gb2N1czogZm9jdXNJbiwgaWQ6IHRoaXMucGFuZWxCYXNlLmlkIH0sXG4gICAgICAgICAgICB0aGlzLnBhbmVsLnNob3dFcnJvcnNBYm92ZVBhbmVsID8gZXJyb3JzIDogbnVsbCxcbiAgICAgICAgICAgIGhlYWRlcixcbiAgICAgICAgICAgIHRoaXMucGFuZWwuc2hvd0Vycm9yc0Fib3ZlUGFuZWwgPyBudWxsIDogZXJyb3JzLFxuICAgICAgICAgICAgY29udGVudCkpO1xuICAgIH07XG4gICAgU3VydmV5UGFuZWwucHJvdG90eXBlLnJlbmRlckhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhbmVsLmhhc1RpdGxlICYmICF0aGlzLnBhbmVsLmhhc0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2VsZW1lbnRfaGVhZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJTdXJ2ZXlFbGVtZW50SGVhZGVyXCJdLCB7IGVsZW1lbnQ6IHRoaXMucGFuZWwgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQYW5lbC5wcm90b3R5cGUud3JhcEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgc3VydmV5ID0gdGhpcy5wYW5lbC5zdXJ2ZXk7XG4gICAgICAgIHZhciB3cmFwcGVyID0gbnVsbDtcbiAgICAgICAgaWYgKHN1cnZleSkge1xuICAgICAgICAgICAgd3JhcHBlciA9IF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlclwiXS53cmFwRWxlbWVudChzdXJ2ZXksIGVsZW1lbnQsIHRoaXMucGFuZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cmFwcGVyICE9PSBudWxsICYmIHdyYXBwZXIgIT09IHZvaWQgMCA/IHdyYXBwZXIgOiBlbGVtZW50O1xuICAgIH07XG4gICAgU3VydmV5UGFuZWwucHJvdG90eXBlLnJlbmRlckNvbnRlbnQgPSBmdW5jdGlvbiAoc3R5bGUsIHJvd3MsIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgYm90dG9tID0gdGhpcy5yZW5kZXJCb3R0b20oKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IHN0eWxlOiBzdHlsZSwgY2xhc3NOYW1lOiBjbGFzc05hbWUsIGlkOiB0aGlzLnBhbmVsLmNvbnRlbnRJZCB9LFxuICAgICAgICAgICAgcm93cyxcbiAgICAgICAgICAgIGJvdHRvbSkpO1xuICAgIH07XG4gICAgU3VydmV5UGFuZWwucHJvdG90eXBlLnJlbmRlclRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFuZWxCYXNlLnRpdGxlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c190aXRsZV90aXRsZV9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJUaXRsZUVsZW1lbnRcIl0sIHsgZWxlbWVudDogdGhpcy5wYW5lbEJhc2UgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQYW5lbC5wcm90b3R5cGUucmVuZGVyRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5wYW5lbEJhc2UuZGVzY3JpcHRpb24pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHRleHQgPSBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJMb2NTdHJpbmcodGhpcy5wYW5lbEJhc2UubG9jRGVzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnBhbmVsLmNzc0NsYXNzZXMucGFuZWwuZGVzY3JpcHRpb24gfSwgdGV4dCkpO1xuICAgIH07XG4gICAgU3VydmV5UGFuZWwucHJvdG90eXBlLnJlbmRlckJvdHRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvb3RlclRvb2xiYXIgPSB0aGlzLnBhbmVsLmdldEZvb3RlclRvb2xiYXIoKTtcbiAgICAgICAgaWYgKCFmb290ZXJUb29sYmFyLmhhc0FjdGlvbnMpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiU3VydmV5QWN0aW9uQmFyXCJdLCB7IG1vZGVsOiBmb290ZXJUb29sYmFyIH0pO1xuICAgIH07XG4gICAgU3VydmV5UGFuZWwucHJvdG90eXBlLmdldElzVmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFuZWxCYXNlLmdldElzQ29udGVudFZpc2libGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlQYW5lbDtcbn0oX3BhbmVsX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlN1cnZleVBhbmVsQmFzZVwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInBhbmVsXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlQYW5lbCwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcHJvZ3Jlc3MudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9wcm9ncmVzcy50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVByb2dyZXNzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVByb2dyZXNzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UHJvZ3Jlc3M7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RTdXJ2ZXlOYXZpZ2F0aW9uQmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlICovIFwiLi9zcmMvcmVhY3QvcmVhY3RTdXJ2ZXlOYXZpZ2F0aW9uQmFzZS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBTdXJ2ZXlQcm9ncmVzcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UHJvZ3Jlc3MsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UHJvZ3Jlc3MocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UHJvZ3Jlc3MucHJvdG90eXBlLCBcImlzVG9wXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5pc1RvcDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlQcm9ncmVzcy5wcm90b3R5cGUsIFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cnZleS5wcm9ncmVzc1ZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVByb2dyZXNzLnByb3RvdHlwZSwgXCJwcm9ncmVzc1RleHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cnZleS5wcm9ncmVzc1RleHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlQcm9ncmVzcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJvZ3Jlc3NTdHlsZSA9IHtcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnByb2dyZXNzICsgXCIlXCIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMuc3VydmV5LmdldFByb2dyZXNzQ3NzQ2xhc3Nlcyh0aGlzLnByb3BzLmNvbnRhaW5lcikgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgc3R5bGU6IHByb2dyZXNzU3R5bGUsIGNsYXNzTmFtZTogdGhpcy5jc3MucHJvZ3Jlc3NCYXIsIHJvbGU6IFwicHJvZ3Jlc3NiYXJcIiwgXCJhcmlhLXZhbHVlbWluXCI6IDAsIFwiYXJpYS12YWx1ZW1heFwiOiAxMDAsIFwiYXJpYS1sYWJlbFwiOiBcInByb2dyZXNzXCIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlQcm9ncmVzc01vZGVsXCJdLmdldFByb2dyZXNzVGV4dEluQmFyQ3NzKHRoaXMuY3NzKSB9LCB0aGlzLnByb2dyZXNzVGV4dCkpLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UHJvZ3Jlc3NNb2RlbFwiXS5nZXRQcm9ncmVzc1RleHRVbmRlckJhckNzcyh0aGlzLmNzcykgfSwgdGhpcy5wcm9ncmVzc1RleHQpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UHJvZ3Jlc3M7XG59KF9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlOYXZpZ2F0aW9uQmFzZVwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXByb2dyZXNzLXBhZ2VzXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlQcm9ncmVzcywgcHJvcHMpO1xufSk7XG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXByb2dyZXNzLXF1ZXN0aW9uc1wiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UHJvZ3Jlc3MsIHByb3BzKTtcbn0pO1xuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1wcm9ncmVzcy1jb3JyZWN0cXVlc3Rpb25zXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlQcm9ncmVzcywgcHJvcHMpO1xufSk7XG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXByb2dyZXNzLXJlcXVpcmVkcXVlc3Rpb25zXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlQcm9ncmVzcywgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcHJvZ3Jlc3NCdXR0b25zLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3Byb2dyZXNzQnV0dG9ucy50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UHJvZ3Jlc3NCdXR0b25zXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UHJvZ3Jlc3NCdXR0b25zOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBzdXJ2ZXktY29yZSAqLyBcInN1cnZleS1jb3JlXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0U3VydmV5TmF2aWdhdGlvbkJhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RTdXJ2ZXlOYXZpZ2F0aW9uQmFzZSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0U3VydmV5TmF2aWdhdGlvbkJhc2UudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG52YXIgU3VydmV5UHJvZ3Jlc3NCdXR0b25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UHJvZ3Jlc3NCdXR0b25zKHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5saXN0Q29udGFpbmVyUmVmID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZVJlZlwiXSgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMucHJvdG90eXBlLCBcIm1vZGVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMucHJvdG90eXBlLCBcImNvbnRhaW5lclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY29udGFpbmVyO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UHJvZ3Jlc3NCdXR0b25zLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uIChjYW5TaG93SXRlbVRpdGxlcykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgY2FuU2hvd0l0ZW1UaXRsZXM6IGNhblNob3dJdGVtVGl0bGVzIH0pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgY2FuU2hvd0hlYWRlcjogIWNhblNob3dJdGVtVGl0bGVzIH0pO1xuICAgIH07XG4gICAgU3VydmV5UHJvZ3Jlc3NCdXR0b25zLnByb3RvdHlwZS5vblVwZGF0ZVNjcm9sbGVyID0gZnVuY3Rpb24gKGhhc1Njcm9sbGVyKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBoYXNTY3JvbGxlcjogaGFzU2Nyb2xsZXIgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMucHJvdG90eXBlLm9uVXBkYXRlU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjYW5TaG93SXRlbVRpdGxlczogdGhpcy5tb2RlbC5zaG93SXRlbVRpdGxlcyB9KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNhblNob3dGb290ZXI6ICF0aGlzLm1vZGVsLnNob3dJdGVtVGl0bGVzIH0pO1xuICAgIH07XG4gICAgU3VydmV5UHJvZ3Jlc3NCdXR0b25zLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMubW9kZWwuZ2V0Um9vdENzcyh0aGlzLnByb3BzLmNvbnRhaW5lciksIHN0eWxlOiB7IFwibWF4V2lkdGhcIjogdGhpcy5tb2RlbC5wcm9ncmVzc1dpZHRoIH0sIHJvbGU6IFwicHJvZ3Jlc3NiYXJcIiwgXCJhcmlhLXZhbHVlbWluXCI6IDAsIFwiYXJpYS12YWx1ZW1heFwiOiAxMDAsIFwiYXJpYS1sYWJlbFwiOiBcInByb2dyZXNzXCIgfSxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY2FuU2hvd0hlYWRlciA/IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNIZWFkZXIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3MucHJvZ3Jlc3NCdXR0b25zUGFnZVRpdGxlLCB0aXRsZTogdGhpcy5tb2RlbC5oZWFkZXJUZXh0IH0sIHRoaXMubW9kZWwuaGVhZGVyVGV4dCkpIDogbnVsbCxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNDb250YWluZXIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5tb2RlbC5nZXRTY3JvbGxCdXR0b25Dc3ModGhpcy5zdGF0ZS5oYXNTY3JvbGxlciwgdHJ1ZSksIHJvbGU6IFwiYnV0dG9uXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jbGlja1Njcm9sbEJ1dHRvbihfdGhpcy5saXN0Q29udGFpbmVyUmVmLmN1cnJlbnQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNMaXN0Q29udGFpbmVyLCByZWY6IHRoaXMubGlzdENvbnRhaW5lclJlZiB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInVsXCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNMaXN0IH0sIHRoaXMuZ2V0TGlzdEVsZW1lbnRzKCkpKSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5tb2RlbC5nZXRTY3JvbGxCdXR0b25Dc3ModGhpcy5zdGF0ZS5oYXNTY3JvbGxlciwgZmFsc2UpLCByb2xlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xpY2tTY3JvbGxCdXR0b24oX3RoaXMubGlzdENvbnRhaW5lclJlZi5jdXJyZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSkpLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jYW5TaG93Rm9vdGVyID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMuY3NzLnByb2dyZXNzQnV0dG9uc0Zvb3RlciB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNQYWdlVGl0bGUsIHRpdGxlOiB0aGlzLm1vZGVsLmZvb3RlclRleHQgfSwgdGhpcy5tb2RlbC5mb290ZXJUZXh0KSkgOiBudWxsKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMucHJvdG90eXBlLmdldExpc3RFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5zdXJ2ZXkudmlzaWJsZVBhZ2VzLmZvckVhY2goZnVuY3Rpb24gKHBhZ2UsIGluZGV4KSB7XG4gICAgICAgICAgICBidXR0b25zLnB1c2goX3RoaXMucmVuZGVyTGlzdEVsZW1lbnQocGFnZSwgaW5kZXgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBidXR0b25zO1xuICAgIH07XG4gICAgU3VydmV5UHJvZ3Jlc3NCdXR0b25zLnByb3RvdHlwZS5yZW5kZXJMaXN0RWxlbWVudCA9IGZ1bmN0aW9uIChwYWdlLCBpbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwibGlcIiwgeyBrZXk6IFwibGlzdGVsZW1lbnRcIiArIGluZGV4LCBjbGFzc05hbWU6IHRoaXMubW9kZWwuZ2V0TGlzdEVsZW1lbnRDc3MoaW5kZXgpLCBvbkNsaWNrOiB0aGlzLm1vZGVsLmlzTGlzdEVsZW1lbnRDbGlja2FibGUoaW5kZXgpXG4gICAgICAgICAgICAgICAgPyBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tb2RlbC5jbGlja0xpc3RFbGVtZW50KHBhZ2UpOyB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsIFwiZGF0YS1wYWdlLW51bWJlclwiOiB0aGlzLm1vZGVsLmdldEl0ZW1OdW1iZXIocGFnZSkgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNDb25uZWN0b3IgfSksXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmNhblNob3dJdGVtVGl0bGVzID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNQYWdlVGl0bGUsIHRpdGxlOiBwYWdlLnJlbmRlcmVkTmF2aWdhdGlvblRpdGxlIH0sIHBhZ2UucmVuZGVyZWROYXZpZ2F0aW9uVGl0bGUpLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNQYWdlRGVzY3JpcHRpb24sIHRpdGxlOiBwYWdlLm5hdmlnYXRpb25EZXNjcmlwdGlvbiB9LCBwYWdlLm5hdmlnYXRpb25EZXNjcmlwdGlvbikpIDogbnVsbCxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5wcm9ncmVzc0J1dHRvbnNCdXR0b24gfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3MucHJvZ3Jlc3NCdXR0b25zQnV0dG9uQmFja2dyb3VuZCB9KSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3MucHJvZ3Jlc3NCdXR0b25zQnV0dG9uQ29udGVudCB9KSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgbnVsbCwgdGhpcy5tb2RlbC5nZXRJdGVtTnVtYmVyKHBhZ2UpKSkpKTtcbiAgICB9O1xuICAgIFN1cnZleVByb2dyZXNzQnV0dG9ucy5wcm90b3R5cGUuY2xpY2tTY3JvbGxCdXR0b24gPSBmdW5jdGlvbiAobGlzdENvbnRhaW5lckVsZW1lbnQsIGlzTGVmdFNjcm9sbCkge1xuICAgICAgICBpZiAoISFsaXN0Q29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgbGlzdENvbnRhaW5lckVsZW1lbnQuc2Nyb2xsTGVmdCArPSAoaXNMZWZ0U2Nyb2xsID8gLTEgOiAxKSAqIDcwO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVzcE1hbmFnZXIgPSBuZXcgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlByb2dyZXNzQnV0dG9uc1Jlc3BvbnNpdml0eU1hbmFnZXJcIl0oX3RoaXMubW9kZWwsIF90aGlzLmxpc3RDb250YWluZXJSZWYuY3VycmVudCwgX3RoaXMpO1xuICAgICAgICB9LCAxMCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISF0aGlzLnJlc3BNYW5hZ2VyKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3BNYW5hZ2VyLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UHJvZ3Jlc3NCdXR0b25zO1xufShfcmVhY3RTdXJ2ZXlOYXZpZ2F0aW9uQmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5TmF2aWdhdGlvbkJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1wcm9ncmVzcy1idXR0b25zXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlQcm9ncmVzc0J1dHRvbnMsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3Byb2dyZXNzVG9jLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcHJvZ3Jlc3NUb2MudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlQcm9ncmVzc1RvYyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlQcm9ncmVzc1RvY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVByb2dyZXNzVG9jOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0U3VydmV5TmF2aWdhdGlvbkJhc2UgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfbGlzdF9saXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvbGlzdC9saXN0ICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9saXN0L2xpc3QudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3BvcHVwX3BvcHVwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvcG9wdXAvcG9wdXAgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BvcHVwL3BvcHVwLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG5cbnZhciBTdXJ2ZXlQcm9ncmVzc1RvYyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UHJvZ3Jlc3NUb2MsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UHJvZ3Jlc3NUb2MoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5UHJvZ3Jlc3NUb2MucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRvY01vZGVsID0gdGhpcy5wcm9wcy5tb2RlbDtcbiAgICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICAgIGlmICh0b2NNb2RlbC5pc01vYmlsZSkge1xuICAgICAgICAgICAgY29udGVudCA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgb25DbGljazogdG9jTW9kZWwudG9nZ2xlUG9wdXAgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogdG9jTW9kZWwuaWNvbiwgc2l6ZTogMjQgfSksXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfcG9wdXBfcG9wdXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlBvcHVwXCJdLCB7IG1vZGVsOiB0b2NNb2RlbC5wb3B1cE1vZGVsIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19saXN0X2xpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIkxpc3RcIl0sIHsgbW9kZWw6IHRvY01vZGVsLmxpc3RNb2RlbCB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0b2NNb2RlbC5jb250YWluZXJDc3MgfSwgY29udGVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVByb2dyZXNzVG9jO1xufShfcmVhY3RTdXJ2ZXlOYXZpZ2F0aW9uQmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5TmF2aWdhdGlvbkJhc2VcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdi1uYXZpZ2F0aW9uLXRvY1wiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UHJvZ3Jlc3NUb2MsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JhdGluZy1kcm9wZG93bi50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yYXRpbmctZHJvcGRvd24udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogUmF0aW5nRHJvcGRvd25JdGVtLCBTdXJ2ZXlRdWVzdGlvblJhdGluZ0Ryb3Bkb3duICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmF0aW5nRHJvcGRvd25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvblJhdGluZ0Ryb3Bkb3duOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBzdXJ2ZXktY29yZSAqLyBcInN1cnZleS1jb3JlXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Ryb3Bkb3duX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZHJvcGRvd24tYmFzZSAqLyBcIi4vc3JjL3JlYWN0L2Ryb3Bkb3duLWJhc2UudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19yYXRpbmdfcmF0aW5nX2Ryb3Bkb3duX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9yYXRpbmcvcmF0aW5nLWRyb3Bkb3duLWl0ZW0gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3JhdGluZy9yYXRpbmctZHJvcGRvd24taXRlbS50c3hcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSYXRpbmdEcm9wZG93bkl0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfY29tcG9uZW50c19yYXRpbmdfcmF0aW5nX2Ryb3Bkb3duX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlJhdGluZ0Ryb3Bkb3duSXRlbVwiXTsgfSk7XG5cbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvblJhdGluZ0Ryb3Bkb3duID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblJhdGluZ0Ryb3Bkb3duLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uUmF0aW5nRHJvcGRvd24ocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvblJhdGluZ0Ryb3Bkb3duLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucmVuZGVyU2VsZWN0KGNzc0NsYXNzZXMpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucm9vdERyb3Bkb3duIH0sIHNlbGVjdCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUmF0aW5nRHJvcGRvd247XG59KF9kcm9wZG93bl9iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZVwiXSkpO1xuXG5fcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclF1ZXN0aW9uKFwic3YtcmF0aW5nLWRyb3Bkb3duXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvblJhdGluZ0Ryb3Bkb3duLCBwcm9wcyk7XG59KTtcbnN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZW5kZXJlckZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJSZW5kZXJlcihcInJhdGluZ1wiLCBcImRyb3Bkb3duXCIsIFwic3YtcmF0aW5nLWRyb3Bkb3duXCIpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0LXBvcHVwLXN1cnZleS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdC1wb3B1cC1zdXJ2ZXkudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogUG9wdXBTdXJ2ZXksIFN1cnZleVdpbmRvdyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJQb3B1cFN1cnZleVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFBvcHVwU3VydmV5OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlXaW5kb3dcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlXaW5kb3c7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RTdXJ2ZXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RTdXJ2ZXkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdFN1cnZleS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cbnZhciBQb3B1cFN1cnZleSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9wdXBTdXJ2ZXksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUG9wdXBTdXJ2ZXkocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmhhbmRsZU9uRXhwYW5kZWQgPSBfdGhpcy5oYW5kbGVPbkV4cGFuZGVkLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFBvcHVwU3VydmV5LnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW3RoaXMucG9wdXAsIHRoaXMucG9wdXAuc3VydmV5XTtcbiAgICB9O1xuICAgIFBvcHVwU3VydmV5LnByb3RvdHlwZS5oYW5kbGVPbkV4cGFuZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucG9wdXAuY2hhbmdlRXhwYW5kQ29sbGFwc2UoKTtcbiAgICB9O1xuICAgIFBvcHVwU3VydmV5LnByb3RvdHlwZS5jYW5SZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNhblJlbmRlci5jYWxsKHRoaXMpICYmIHRoaXMucG9wdXAuaXNTaG93aW5nO1xuICAgIH07XG4gICAgUG9wdXBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnJlbmRlcldpbmRvd0hlYWRlcigpO1xuICAgICAgICB2YXIgYm9keSA9IHRoaXMucmVuZGVyQm9keSgpO1xuICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgaWYgKCEhdGhpcy5wb3B1cC5yZW5kZXJlZFdpZHRoKSB7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9IHRoaXMucG9wdXAucmVuZGVyZWRXaWR0aDtcbiAgICAgICAgICAgIHN0eWxlLm1heFdpZHRoID0gdGhpcy5wb3B1cC5yZW5kZXJlZFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucG9wdXAuY3NzUm9vdCwgc3R5bGU6IHN0eWxlLCBvblNjcm9sbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucG9wdXAub25TY3JvbGwoKTsgfSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucG9wdXAuY3NzUm9vdENvbnRlbnQgfSxcbiAgICAgICAgICAgICAgICBoZWFkZXIsXG4gICAgICAgICAgICAgICAgYm9keSkpKTtcbiAgICB9O1xuICAgIFBvcHVwU3VydmV5LnByb3RvdHlwZS5yZW5kZXJXaW5kb3dIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb3B1cCA9IHRoaXMucG9wdXA7XG4gICAgICAgIHZhciBoZWFkZXJDc3MgPSBwb3B1cC5jc3NIZWFkZXJSb290O1xuICAgICAgICB2YXIgdGl0bGVDb2xsYXBzZWQgPSBudWxsO1xuICAgICAgICB2YXIgZXhwYW5kQ29sbGFwc2VJY29uO1xuICAgICAgICB2YXIgY2xvc2VCdXR0b24gPSBudWxsO1xuICAgICAgICB2YXIgYWxsb3dGdWxsU2NyZWVuQnV0b24gPSBudWxsO1xuICAgICAgICBpZiAocG9wdXAuaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIGhlYWRlckNzcyArPSBcIiBcIiArIHBvcHVwLmNzc1Jvb3RDb2xsYXBzZWRNb2Q7XG4gICAgICAgICAgICB0aXRsZUNvbGxhcHNlZCA9IHRoaXMucmVuZGVyVGl0bGVDb2xsYXBzZWQocG9wdXApO1xuICAgICAgICAgICAgZXhwYW5kQ29sbGFwc2VJY29uID0gdGhpcy5yZW5kZXJFeHBhbmRJY29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHBhbmRDb2xsYXBzZUljb24gPSB0aGlzLnJlbmRlckNvbGxhcHNlSWNvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3B1cC5hbGxvd0Nsb3NlKSB7XG4gICAgICAgICAgICBjbG9zZUJ1dHRvbiA9IHRoaXMucmVuZGVyQ2xvc2VCdXR0b24odGhpcy5wb3B1cCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcHVwLmFsbG93RnVsbFNjcmVlbikge1xuICAgICAgICAgICAgYWxsb3dGdWxsU2NyZWVuQnV0b24gPSB0aGlzLnJlbmRlckFsbG93RnVsbFNjcmVlbkJ1dG9uKHRoaXMucG9wdXApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHBvcHVwLmNzc0hlYWRlclJvb3QgfSxcbiAgICAgICAgICAgIHRpdGxlQ29sbGFwc2VkLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHBvcHVwLmNzc0hlYWRlckJ1dHRvbnNDb250YWluZXIgfSxcbiAgICAgICAgICAgICAgICBhbGxvd0Z1bGxTY3JlZW5CdXRvbixcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogcG9wdXAuY3NzSGVhZGVyQ29sbGFwc2VCdXR0b24sIG9uQ2xpY2s6IHRoaXMuaGFuZGxlT25FeHBhbmRlZCB9LCBleHBhbmRDb2xsYXBzZUljb24pLFxuICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uKSkpO1xuICAgIH07XG4gICAgUG9wdXBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlclRpdGxlQ29sbGFwc2VkID0gZnVuY3Rpb24gKHBvcHVwKSB7XG4gICAgICAgIGlmICghcG9wdXAubG9jVGl0bGUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBwb3B1cC5jc3NIZWFkZXJUaXRsZUNvbGxhcHNlZCB9LCBwb3B1cC5sb2NUaXRsZS5yZW5kZXJlZEh0bWwpO1xuICAgIH07XG4gICAgUG9wdXBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlckV4cGFuZEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogXCJpY29uLXJlc3RvcmVfMTZ4MTZcIiwgc2l6ZTogMTYgfSk7XG4gICAgfTtcbiAgICBQb3B1cFN1cnZleS5wcm90b3R5cGUucmVuZGVyQ29sbGFwc2VJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN2Z0ljb25cIl0sIHsgaWNvbk5hbWU6IFwiaWNvbi1taW5pbWl6ZV8xNngxNlwiLCBzaXplOiAxNiB9KTtcbiAgICB9O1xuICAgIFBvcHVwU3VydmV5LnByb3RvdHlwZS5yZW5kZXJDbG9zZUJ1dHRvbiA9IGZ1bmN0aW9uIChwb3B1cCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBwb3B1cC5jc3NIZWFkZXJDbG9zZUJ1dHRvbiwgb25DbGljazogZnVuY3Rpb24gKCkgeyBwb3B1cC5oaWRlKCk7IH0gfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdmdJY29uXCJdLCB7IGljb25OYW1lOiBcImljb24tY2xvc2VfMTZ4MTZcIiwgc2l6ZTogMTYgfSkpKTtcbiAgICB9O1xuICAgIFBvcHVwU3VydmV5LnByb3RvdHlwZS5yZW5kZXJBbGxvd0Z1bGxTY3JlZW5CdXRvbiA9IGZ1bmN0aW9uIChwb3B1cCkge1xuICAgICAgICB2YXIgSWNvbjtcbiAgICAgICAgaWYgKHBvcHVwLmlzRnVsbFNjcmVlbikge1xuICAgICAgICAgICAgSWNvbiA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdmdJY29uXCJdLCB7IGljb25OYW1lOiBcImljb24tYmFjay10by1wYW5lbF8xNngxNlwiLCBzaXplOiAxNiB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIEljb24gPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogXCJpY29uLWZ1bGwtc2NyZWVuXzE2eDE2XCIsIHNpemU6IDE2IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHBvcHVwLmNzc0hlYWRlckZ1bGxTY3JlZW5CdXR0b24sIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcG9wdXAudG9nZ2xlRnVsbFNjcmVlbigpOyB9IH0sIEljb24pKTtcbiAgICB9O1xuICAgIFBvcHVwU3VydmV5LnByb3RvdHlwZS5yZW5kZXJCb2R5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucG9wdXAuY3NzQm9keSB9LCB0aGlzLmRvUmVuZGVyKCkpO1xuICAgIH07XG4gICAgUG9wdXBTdXJ2ZXkucHJvdG90eXBlLmNyZWF0ZVN1cnZleSA9IGZ1bmN0aW9uIChuZXdQcm9wcykge1xuICAgICAgICBpZiAoIW5ld1Byb3BzKVxuICAgICAgICAgICAgbmV3UHJvcHMgPSB7fTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jcmVhdGVTdXJ2ZXkuY2FsbCh0aGlzLCBuZXdQcm9wcyk7XG4gICAgICAgIHRoaXMucG9wdXAgPSBuZXcgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlBvcHVwU3VydmV5TW9kZWxcIl0obnVsbCwgdGhpcy5zdXJ2ZXkpO1xuICAgICAgICBpZiAobmV3UHJvcHMuY2xvc2VPbkNvbXBsZXRlVGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5jbG9zZU9uQ29tcGxldGVUaW1lb3V0ID0gbmV3UHJvcHMuY2xvc2VPbkNvbXBsZXRlVGltZW91dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcHVwLmFsbG93Q2xvc2UgPSBuZXdQcm9wcy5hbGxvd0Nsb3NlO1xuICAgICAgICB0aGlzLnBvcHVwLmFsbG93RnVsbFNjcmVlbiA9IG5ld1Byb3BzLmFsbG93RnVsbFNjcmVlbjtcbiAgICAgICAgdGhpcy5wb3B1cC5pc1Nob3dpbmcgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMucG9wdXAuaXNFeHBhbmRlZCAmJiAobmV3UHJvcHMuZXhwYW5kZWQgfHwgbmV3UHJvcHMuaXNFeHBhbmRlZCkpXG4gICAgICAgICAgICB0aGlzLnBvcHVwLmV4cGFuZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIFBvcHVwU3VydmV5O1xufShfcmVhY3RTdXJ2ZXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN1cnZleVwiXSkpO1xuXG4vKipcbiAqIE9ic29sZXRlLiBQbGVhc2UgdXNlIFBvcHVwU3VydmV5XG4gKi9cbnZhciBTdXJ2ZXlXaW5kb3cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVdpbmRvdywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlXaW5kb3coKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFN1cnZleVdpbmRvdztcbn0oUG9wdXBTdXJ2ZXkpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0U3VydmV5LnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RTdXJ2ZXkudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXksIGF0dGFjaEtleTJjbGljayAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXk7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImF0dGFjaEtleTJjbGlja1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGF0dGFjaEtleTJjbGljazsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wYWdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3BhZ2UgKi8gXCIuL3NyYy9yZWFjdC9wYWdlLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N0cmluZ192aWV3ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3RyaW5nLXZpZXdlciAqLyBcIi4vc3JjL3JlYWN0L3N0cmluZy12aWV3ZXIudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3N1cnZleV9oZWFkZXJfc3VydmV5X2hlYWRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3N1cnZleS1oZWFkZXIvc3VydmV5LWhlYWRlciAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3VydmV5LWhlYWRlci9zdXJ2ZXktaGVhZGVyLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2JyYW5kX2luZm9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9icmFuZC1pbmZvICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9icmFuZC1pbmZvLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19ub3RpZmllcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL25vdGlmaWVyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9ub3RpZmllci50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfY29tcG9uZW50c19jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvY29tcG9uZW50cy1jb250YWluZXIgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2NvbXBvbmVudHMtY29udGFpbmVyLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ZnYnVuZGxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zdmdidW5kbGUgKi8gXCIuL3NyYy9yZWFjdC9zdmdidW5kbGUudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hc3NpZ24gPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cbnZhciBTdXJ2ZXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXkocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByZXZpb3VzSlNPTiA9IHt9O1xuICAgICAgICBfdGhpcy5pc1N1cnZleVVwZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuY3JlYXRlU3VydmV5KHByb3BzKTtcbiAgICAgICAgX3RoaXMudXBkYXRlU3VydmV5KHByb3BzLCB7fSk7XG4gICAgICAgIF90aGlzLnJvb3RSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlUmVmXCJdKCk7XG4gICAgICAgIF90aGlzLnJvb3ROb2RlSWQgPSBwcm9wcy5pZCB8fCBudWxsO1xuICAgICAgICBfdGhpcy5yb290Tm9kZUNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXksIFwiY3NzVHlwZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzdXJ2ZXlDc3NcIl0uY3VycmVudFR5cGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3R5bGVzTWFuYWdlclwiXS5hcHBseVRoZW1lKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleS5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXk7XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLm9uU3VydmV5VXBkYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5zdXJ2ZXkpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMucm9vdFJlZi5jdXJyZW50O1xuICAgICAgICAgICAgaWYgKCEhZWwpXG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXkuYWZ0ZXJSZW5kZXJTdXJ2ZXkoZWwpO1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkuc3RhcnRUaW1lckZyb21VSSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICBpZiAoIV9zdXBlci5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlLmNhbGwodGhpcywgbmV4dFByb3BzLCBuZXh0U3RhdGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5pc01vZGVsSlNPTkNoYW5nZWQobmV4dFByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95U3VydmV5KCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVN1cnZleShuZXh0UHJvcHMpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdXJ2ZXkobmV4dFByb3BzLCB7fSk7XG4gICAgICAgICAgICB0aGlzLmlzU3VydmV5VXBkYXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZS5jYWxsKHRoaXMsIHByZXZQcm9wcywgcHJldlN0YXRlKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdXJ2ZXkodGhpcy5wcm9wcywgcHJldlByb3BzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdXJ2ZXlVcGRhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLm9uU3VydmV5VXBkYXRlZCgpO1xuICAgICAgICAgICAgdGhpcy5pc1N1cnZleVVwZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU3VydmV5VXBkYXRlZCgpO1xuICAgIH07XG4gICAgU3VydmV5LnByb3RvdHlwZS5kZXN0cm95U3VydmV5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdXJ2ZXkpIHtcbiAgICAgICAgICAgIHRoaXMuc3VydmV5LnJlbmRlckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkub25QYXJ0aWFsU2VuZC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICB0aGlzLnN1cnZleS5kZXN0cm95UmVzaXplT2JzZXJ2ZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc3Ryb3lTdXJ2ZXkoKTtcbiAgICB9O1xuICAgIFN1cnZleS5wcm90b3R5cGUuZG9SZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZW5kZXJSZXN1bHQ7XG4gICAgICAgIGlmICh0aGlzLnN1cnZleS5zdGF0ZSA9PSBcImNvbXBsZXRlZFwiKSB7XG4gICAgICAgICAgICByZW5kZXJSZXN1bHQgPSB0aGlzLnJlbmRlckNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3VydmV5LnN0YXRlID09IFwiY29tcGxldGVkYmVmb3JlXCIpIHtcbiAgICAgICAgICAgIHJlbmRlclJlc3VsdCA9IHRoaXMucmVuZGVyQ29tcGxldGVkQmVmb3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdXJ2ZXkuc3RhdGUgPT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgICAgICAgIHJlbmRlclJlc3VsdCA9IHRoaXMucmVuZGVyTG9hZGluZygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3VydmV5LnN0YXRlID09IFwiZW1wdHlcIikge1xuICAgICAgICAgICAgcmVuZGVyUmVzdWx0ID0gdGhpcy5yZW5kZXJFbXB0eVN1cnZleSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVuZGVyUmVzdWx0ID0gdGhpcy5yZW5kZXJTdXJ2ZXkoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFja2dyb3VuZEltYWdlID0gISF0aGlzLnN1cnZleS5iYWNrZ3JvdW5kSW1hZ2UgPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3Mucm9vdEJhY2tncm91bmRJbWFnZSwgc3R5bGU6IHRoaXMuc3VydmV5LmJhY2tncm91bmRJbWFnZVN0eWxlIH0pIDogbnVsbDtcbiAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMuc3VydmV5LmhlYWRlclZpZXcgPT09IFwiYmFzaWNcIiA/IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3N1cnZleV9oZWFkZXJfc3VydmV5X2hlYWRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiU3VydmV5SGVhZGVyXCJdLCB7IHN1cnZleTogdGhpcy5zdXJ2ZXkgfSkgOiBudWxsO1xuICAgICAgICB2YXIgb25TdWJtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjdXN0b21IZWFkZXIgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdl9jdXN0b21faGVhZGVyXCIgfSk7XG4gICAgICAgIGlmICh0aGlzLnN1cnZleS5oYXNMb2dvKSB7XG4gICAgICAgICAgICBjdXN0b21IZWFkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb290Q3NzID0gdGhpcy5zdXJ2ZXkuZ2V0Um9vdENzcygpO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucm9vdE5vZGVDbGFzc05hbWUgPyB0aGlzLnJvb3ROb2RlQ2xhc3NOYW1lICsgXCIgXCIgKyByb290Q3NzIDogcm9vdENzcztcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGlkOiB0aGlzLnJvb3ROb2RlSWQsIHJlZjogdGhpcy5yb290UmVmLCBjbGFzc05hbWU6IGNzc0NsYXNzZXMsIHN0eWxlOiB0aGlzLnN1cnZleS50aGVtZVZhcmlhYmxlcyB9LFxuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkubmVlZFJlbmRlckljb25zID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3N2Z2J1bmRsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfX1tcIlN2Z0J1bmRsZUNvbXBvbmVudFwiXSwgbnVsbCkgOiBudWxsLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMuc3VydmV5LndyYXBwZXJGb3JtQ3NzIH0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZm9ybVwiLCB7IG9uU3VibWl0OiBvblN1Ym1pdCB9LFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21IZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzcy5jb250YWluZXIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX2NvbXBvbmVudHNfY29udGFpbmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fW1wiQ29tcG9uZW50c0NvbnRhaW5lclwiXSwgeyBzdXJ2ZXk6IHRoaXMuc3VydmV5LCBjb250YWluZXI6IFwiaGVhZGVyXCIsIG5lZWRSZW5kZXJXcmFwcGVyOiBmYWxzZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlclJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX2NvbXBvbmVudHNfY29udGFpbmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fW1wiQ29tcG9uZW50c0NvbnRhaW5lclwiXSwgeyBzdXJ2ZXk6IHRoaXMuc3VydmV5LCBjb250YWluZXI6IFwiZm9vdGVyXCIsIG5lZWRSZW5kZXJXcmFwcGVyOiBmYWxzZSB9KSkpLFxuICAgICAgICAgICAgICAgIHRoaXMuc3VydmV5LnNob3dCcmFuZEluZm8gPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19icmFuZF9pbmZvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJCcmFuZEluZm9cIl0sIG51bGwpIDogbnVsbCxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19ub3RpZmllcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiTm90aWZpZXJDb21wb25lbnRcIl0sIHsgbm90aWZpZXI6IHRoaXMuc3VydmV5Lm5vdGlmaWVyIH0pKSkpO1xuICAgIH07XG4gICAgU3VydmV5LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb1JlbmRlcigpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleS5wcm90b3R5cGUsIFwiY3NzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXkuY3NzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkuY3NzID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlckNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN1cnZleS5zaG93Q29tcGxldGVkUGFnZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgaHRtbFZhbHVlID0geyBfX2h0bWw6IHRoaXMuc3VydmV5LnByb2Nlc3NlZENvbXBsZXRlZEh0bWwgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRnJhZ21lbnRcIl0sIG51bGwsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiBodG1sVmFsdWUsIGNsYXNzTmFtZTogdGhpcy5zdXJ2ZXkuY29tcGxldGVkQ3NzIH0pLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfY29tcG9uZW50c19jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJDb21wb25lbnRzQ29udGFpbmVyXCJdLCB7IHN1cnZleTogdGhpcy5zdXJ2ZXksIGNvbnRhaW5lcjogXCJjb21wbGV0ZVBhZ2VcIiwgbmVlZFJlbmRlcldyYXBwZXI6IGZhbHNlIH0pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlckNvbXBsZXRlZEJlZm9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGh0bWxWYWx1ZSA9IHsgX19odG1sOiB0aGlzLnN1cnZleS5wcm9jZXNzZWRDb21wbGV0ZWRCZWZvcmVIdG1sIH07XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDogaHRtbFZhbHVlLCBjbGFzc05hbWU6IHRoaXMuc3VydmV5LmNvbXBsZXRlZEJlZm9yZUNzcyB9KSk7XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlckxvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBodG1sVmFsdWUgPSB7IF9faHRtbDogdGhpcy5zdXJ2ZXkucHJvY2Vzc2VkTG9hZGluZ0h0bWwgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiBodG1sVmFsdWUsIGNsYXNzTmFtZTogdGhpcy5zdXJ2ZXkubG9hZGluZ0JvZHlDc3MgfSkpO1xuICAgIH07XG4gICAgU3VydmV5LnByb3RvdHlwZS5yZW5kZXJTdXJ2ZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhY3RpdmVQYWdlID0gdGhpcy5zdXJ2ZXkuYWN0aXZlUGFnZVxuICAgICAgICAgICAgPyB0aGlzLnJlbmRlclBhZ2UodGhpcy5zdXJ2ZXkuYWN0aXZlUGFnZSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIGlzU3RhcmluZyA9IHRoaXMuc3VydmV5LmlzU2hvd1N0YXJ0aW5nUGFnZTtcbiAgICAgICAgdmFyIHBhZ2VJZCA9IHRoaXMuc3VydmV5LmFjdGl2ZVBhZ2UgPyB0aGlzLnN1cnZleS5hY3RpdmVQYWdlLmlkIDogXCJcIjtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuc3VydmV5LmJvZHlDc3M7XG4gICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICBpZiAoISF0aGlzLnN1cnZleS5yZW5kZXJlZFdpZHRoKSB7XG4gICAgICAgICAgICBzdHlsZS5tYXhXaWR0aCA9IHRoaXMuc3VydmV5LnJlbmRlcmVkV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5zdXJ2ZXkuYm9keUNvbnRhaW5lckNzcyB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfY29tcG9uZW50c19jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJDb21wb25lbnRzQ29udGFpbmVyXCJdLCB7IHN1cnZleTogdGhpcy5zdXJ2ZXksIGNvbnRhaW5lcjogXCJsZWZ0XCIgfSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi1jb21wb25lbnRzLWNvbHVtbiBzdi1jb21wb25lbnRzLWNvbHVtbi0tZXhwYW5kYWJsZVwiIH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfY29tcG9uZW50c19jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJDb21wb25lbnRzQ29udGFpbmVyXCJdLCB7IHN1cnZleTogdGhpcy5zdXJ2ZXksIGNvbnRhaW5lcjogXCJjZW50ZXJcIiB9KSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGlkOiBwYWdlSWQsIGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogc3R5bGUgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfY29tcG9uZW50c19jb250YWluZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJDb21wb25lbnRzQ29udGFpbmVyXCJdLCB7IHN1cnZleTogdGhpcy5zdXJ2ZXksIGNvbnRhaW5lcjogXCJjb250ZW50VG9wXCIgfSksXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVBhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX2NvbXBvbmVudHNfY29udGFpbmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fW1wiQ29tcG9uZW50c0NvbnRhaW5lclwiXSwgeyBzdXJ2ZXk6IHRoaXMuc3VydmV5LCBjb250YWluZXI6IFwiY29udGVudEJvdHRvbVwiIH0pKSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19jb21wb25lbnRzX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfX1tcIkNvbXBvbmVudHNDb250YWluZXJcIl0sIHsgc3VydmV5OiB0aGlzLnN1cnZleSwgY29udGFpbmVyOiBcInJpZ2h0XCIgfSkpKTtcbiAgICB9O1xuICAgIFN1cnZleS5wcm90b3R5cGUucmVuZGVyUGFnZSA9IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3BhZ2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN1cnZleVBhZ2VcIl0sIHsgc3VydmV5OiB0aGlzLnN1cnZleSwgcGFnZTogcGFnZSwgY3NzOiB0aGlzLmNzcywgY3JlYXRvcjogdGhpcyB9KSk7XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlckVtcHR5U3VydmV5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMuY3NzLmJvZHlFbXB0eSB9LCB0aGlzLnN1cnZleS5lbXB0eVN1cnZleVRleHQpO1xuICAgIH07XG4gICAgU3VydmV5LnByb3RvdHlwZS5jcmVhdGVTdXJ2ZXkgPSBmdW5jdGlvbiAobmV3UHJvcHMpIHtcbiAgICAgICAgaWYgKCFuZXdQcm9wcylcbiAgICAgICAgICAgIG5ld1Byb3BzID0ge307XG4gICAgICAgIHRoaXMucHJldmlvdXNKU09OID0ge307XG4gICAgICAgIGlmIChuZXdQcm9wcykge1xuICAgICAgICAgICAgaWYgKG5ld1Byb3BzLm1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXkgPSBuZXdQcm9wcy5tb2RlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wcy5qc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNKU09OID0gbmV3UHJvcHMuanNvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXkgPSBuZXcgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleU1vZGVsXCJdKG5ld1Byb3BzLmpzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3VydmV5ID0gbmV3IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlNb2RlbFwiXSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIW5ld1Byb3BzLmNzcykge1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkuY3NzID0gdGhpcy5jc3M7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdXJ2ZXlFdmVudHMoKTtcbiAgICB9O1xuICAgIFN1cnZleS5wcm90b3R5cGUuaXNNb2RlbEpTT05DaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3BzKSB7XG4gICAgICAgIGlmICghIW5ld1Byb3BzW1wibW9kZWxcIl0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cnZleSAhPT0gbmV3UHJvcHNbXCJtb2RlbFwiXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFuZXdQcm9wc1tcImpzb25cIl0pIHtcbiAgICAgICAgICAgIHJldHVybiAhc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkhlbHBlcnNcIl0uaXNUd29WYWx1ZUVxdWFscyhuZXdQcm9wc1tcImpzb25cIl0sIHRoaXMucHJldmlvdXNKU09OKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLnVwZGF0ZVN1cnZleSA9IGZ1bmN0aW9uIChuZXdQcm9wcywgb2xkUHJvcHMpIHtcbiAgICAgICAgaWYgKCFuZXdQcm9wcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb2xkUHJvcHMgPSBvbGRQcm9wcyB8fCB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG5ld1Byb3BzKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09IFwibW9kZWxcIiB8fCBrZXkgPT0gXCJjaGlsZHJlblwiIHx8IGtleSA9PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleSA9PSBcImNzc1wiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXkubWVyZ2VWYWx1ZXMobmV3UHJvcHMuY3NzLCB0aGlzLnN1cnZleS5nZXRDc3MoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXlbXCJ1cGRhdGVOYXZpZ2F0aW9uQ3NzXCJdKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXlbXCJ1cGRhdGVFbGVtZW50Q3NzXCJdKCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3UHJvcHNba2V5XSA9PT0gb2xkUHJvcHNba2V5XSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihcIm9uXCIpID09IDAgJiYgdGhpcy5zdXJ2ZXlba2V5XSAmJiB0aGlzLnN1cnZleVtrZXldLmFkZCkge1xuICAgICAgICAgICAgICAgIGlmICghIW9sZFByb3BzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXlba2V5XS5yZW1vdmUob2xkUHJvcHNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3VydmV5W2tleV0uYWRkKG5ld1Byb3BzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXJ2ZXlba2V5XSA9IG5ld1Byb3BzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleS5wcm90b3R5cGUuc2V0U3VydmV5RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuc3VydmV5LnJlbmRlckNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAhIXNlbGYuc3RhdGUgJiYgISFzZWxmLnN0YXRlLm1vZGVsQ2hhbmdlZCA/IHNlbGYuc3RhdGUubW9kZWxDaGFuZ2VkIDogMDtcbiAgICAgICAgICAgIHNlbGYuc2V0U3RhdGUoeyBtb2RlbENoYW5nZWQ6IGNvdW50ZXIgKyAxIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN1cnZleS5vblBhcnRpYWxTZW5kLmFkZChmdW5jdGlvbiAoc2VuZGVyKSB7XG4gICAgICAgICAgICBpZiAoISFzZWxmLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXRTdGF0ZShzZWxmLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvL0lTdXJ2ZXlDcmVhdG9yXG4gICAgU3VydmV5LnByb3RvdHlwZS5jcmVhdGVRdWVzdGlvbkVsZW1lbnQgPSBmdW5jdGlvbiAocXVlc3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZVF1ZXN0aW9uKHF1ZXN0aW9uLmlzRGVmYXVsdFJlbmRlcmluZygpID8gcXVlc3Rpb24uZ2V0VGVtcGxhdGUoKSA6IHF1ZXN0aW9uLmdldENvbXBvbmVudE5hbWUoKSwge1xuICAgICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLFxuICAgICAgICAgICAgaXNEaXNwbGF5TW9kZTogcXVlc3Rpb24uaXNJbnB1dFJlYWRPbmx5LFxuICAgICAgICAgICAgY3JlYXRvcjogdGhpcyxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXkucHJvdG90eXBlLnJlbmRlckVycm9yID0gZnVuY3Rpb24gKGtleSwgZXJyb3IsIGNzc0NsYXNzZXMpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGtleToga2V5IH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuZXJyb3IuaWNvbiB8fCB1bmRlZmluZWQsIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIgfSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuZXJyb3IuaXRlbSB8fCB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfc3RyaW5nX3ZpZXdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3VydmV5TG9jU3RyaW5nVmlld2VyXCJdLCB7IGxvY1N0cjogZXJyb3IubG9jVGV4dCB9KSkpKTtcbiAgICB9O1xuICAgIFN1cnZleS5wcm90b3R5cGUucXVlc3Rpb25UaXRsZUxvY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXkucXVlc3Rpb25UaXRsZUxvY2F0aW9uO1xuICAgIH07XG4gICAgU3VydmV5LnByb3RvdHlwZS5xdWVzdGlvbkVycm9yTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1cnZleS5xdWVzdGlvbkVycm9yTG9jYXRpb247XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5O1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN1cnZleVwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5LCBwcm9wcyk7XG59KTtcbmZ1bmN0aW9uIGF0dGFjaEtleTJjbGljayhlbGVtZW50LCB2aWV3TW9kZWwsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7IHByb2Nlc3NFc2M6IHRydWUsIGRpc2FibGVUYWJTdG9wOiBmYWxzZSB9OyB9XG4gICAgaWYgKCghIXZpZXdNb2RlbCAmJiB2aWV3TW9kZWwuZGlzYWJsZVRhYlN0b3ApIHx8ICghIW9wdGlvbnMgJiYgb3B0aW9ucy5kaXNhYmxlVGFiU3RvcCkpIHtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjbG9uZUVsZW1lbnRcIl0oZWxlbWVudCwgeyB0YWJJbmRleDogLTEgfSk7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBfX2Fzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjbG9uZUVsZW1lbnRcIl0oZWxlbWVudCwge1xuICAgICAgICB0YWJJbmRleDogMCxcbiAgICAgICAgb25LZXlVcDogZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBPYmplY3Qoc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRvS2V5MkNsaWNrVXBcIl0pKGV2dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24gKGV2dCkgeyByZXR1cm4gT2JqZWN0KHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkb0tleTJDbGlja0Rvd25cIl0pKGV2dCwgb3B0aW9ucyk7IH0sXG4gICAgICAgIG9uQmx1cjogZnVuY3Rpb24gKGV2dCkgeyByZXR1cm4gT2JqZWN0KHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkb0tleTJDbGlja0JsdXJcIl0pKGV2dCk7IH1cbiAgICB9KTtcbn1cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdFN1cnZleU5hdmlnYXRpb25CYXNlLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlOYXZpZ2F0aW9uQmFzZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlOYXZpZ2F0aW9uQmFzZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleU5hdmlnYXRpb25CYXNlOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cbnZhciBTdXJ2ZXlOYXZpZ2F0aW9uQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5TmF2aWdhdGlvbkJhc2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5TmF2aWdhdGlvbkJhc2UocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnVwZGF0ZVN0YXRlRnVuY3Rpb24gPSBudWxsO1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHsgdXBkYXRlOiAwIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleU5hdmlnYXRpb25CYXNlLnByb3RvdHlwZSwgXCJzdXJ2ZXlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnN1cnZleTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlOYXZpZ2F0aW9uQmFzZS5wcm90b3R5cGUsIFwiY3NzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jc3MgfHwgdGhpcy5zdXJ2ZXkuY3NzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5TmF2aWdhdGlvbkJhc2UucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdXJ2ZXkpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNldFN0YXRlKHsgdXBkYXRlOiBzZWxmLnN0YXRlLnVwZGF0ZSArIDEgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkub25QYWdlVmlzaWJsZUNoYW5nZWQuYWRkKHRoaXMudXBkYXRlU3RhdGVGdW5jdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleU5hdmlnYXRpb25CYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3VydmV5ICYmIHRoaXMudXBkYXRlU3RhdGVGdW5jdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXkub25QYWdlVmlzaWJsZUNoYW5nZWQucmVtb3ZlKHRoaXMudXBkYXRlU3RhdGVGdW5jdGlvbik7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlRnVuY3Rpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5TmF2aWdhdGlvbkJhc2U7XG59KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJDb21wb25lbnRcIl0pKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb24udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb24udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uLCBTdXJ2ZXlFbGVtZW50RXJyb3JzLCBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc1dyYXBwZWQsIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzQ2VsbCwgU3VydmV5UXVlc3Rpb25FcnJvckNlbGwgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5RWxlbWVudEVycm9yc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleUVsZW1lbnRFcnJvcnM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkVycm9yQ2VsbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uRXJyb3JDZWxsOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0c3VydmV5bW9kZWwgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHN1cnZleW1vZGVsLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2NvbW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9jb21tZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9jb21tZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY3VzdG9tX3dpZGdldF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jdXN0b20td2lkZ2V0ICovIFwiLi9zcmMvcmVhY3QvY3VzdG9tLXdpZGdldC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfaGVhZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtaGVhZGVyICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1oZWFkZXIudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb24ocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmlzTmVlZEZvY3VzID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnJvb3RSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlUmVmXCJdKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb24ucmVuZGVyUXVlc3Rpb25Cb2R5ID0gZnVuY3Rpb24gKGNyZWF0b3IsIHF1ZXN0aW9uKSB7XG4gICAgICAgIC8vIGlmICghcXVlc3Rpb24uaXNWaXNpYmxlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIGN1c3RvbVdpZGdldCA9IHF1ZXN0aW9uLmN1c3RvbVdpZGdldDtcbiAgICAgICAgaWYgKCFjdXN0b21XaWRnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdG9yLmNyZWF0ZVF1ZXN0aW9uRWxlbWVudChxdWVzdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jdXN0b21fd2lkZ2V0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJTdXJ2ZXlDdXN0b21XaWRnZXRcIl0sIHsgY3JlYXRvcjogY3JlYXRvciwgcXVlc3Rpb246IHF1ZXN0aW9uIH0pO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb247XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5lbGVtZW50O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uLnByb3RvdHlwZSwgXCJjcmVhdG9yXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jcmVhdG9yO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghIXRoaXMucXVlc3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25bXCJyZWFjdFwiXSA9IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb0FmdGVyUmVuZGVyKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbi5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCEhdGhpcy5xdWVzdGlvbikge1xuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbltcInJlYWN0XCJdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWwgPSB0aGlzLnJvb3RSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKCEhZWwpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtcmVuZGVyZWRcIik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUuY2FsbCh0aGlzLCBwcmV2UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICAgIHRoaXMuZG9BZnRlclJlbmRlcigpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLmRvQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTmVlZEZvY3VzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24uaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLmNsaWNrVGl0bGVGdW5jdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc05lZWRGb2N1cyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLnJvb3RSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmIChlbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJlbmRlcmVkXCIpICE9PSBcInJcIikge1xuICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEtcmVuZGVyZWRcIiwgXCJyXCIpO1xuICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEtbmFtZVwiLCB0aGlzLnF1ZXN0aW9uLm5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLmFmdGVyUmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24uYWZ0ZXJSZW5kZXIoZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChfc3VwZXIucHJvdG90eXBlLmNhblJlbmRlci5jYWxsKHRoaXMpICYmXG4gICAgICAgICAgICAhIXRoaXMucXVlc3Rpb24gJiZcbiAgICAgICAgICAgICEhdGhpcy5jcmVhdG9yKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uLnByb3RvdHlwZS5yZW5kZXJRdWVzdGlvbkNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBxdWVzdGlvbiA9IHRoaXMucXVlc3Rpb247XG4gICAgICAgIHZhciBjb250ZW50U3R5bGUgPSB7XG4gICAgICAgICAgICBkaXNwbGF5OiB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkSXNFeHBhbmRlZCA/IFwiXCIgOiBcIm5vbmVcIixcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBxdWVzdGlvbi5jc3NDbGFzc2VzO1xuICAgICAgICB2YXIgcXVlc3Rpb25SZW5kZXIgPSB0aGlzLnJlbmRlclF1ZXN0aW9uKCk7XG4gICAgICAgIHZhciBlcnJvcnNUb3AgPSB0aGlzLnF1ZXN0aW9uLnNob3dFcnJvck9uVG9wXG4gICAgICAgICAgICA/IHRoaXMucmVuZGVyRXJyb3JzKGNzc0NsYXNzZXMsIFwidG9wXCIpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBlcnJvcnNCb3R0b20gPSB0aGlzLnF1ZXN0aW9uLnNob3dFcnJvck9uQm90dG9tXG4gICAgICAgICAgICA/IHRoaXMucmVuZGVyRXJyb3JzKGNzc0NsYXNzZXMsIFwiYm90dG9tXCIpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBjb21tZW50ID0gcXVlc3Rpb24gJiYgcXVlc3Rpb24uaGFzQ29tbWVudCA/IHRoaXMucmVuZGVyQ29tbWVudChjc3NDbGFzc2VzKSA6IG51bGw7XG4gICAgICAgIHZhciBkZXNjcmlwdGlvblVuZGVySW5wdXQgPSBxdWVzdGlvbi5oYXNEZXNjcmlwdGlvblVuZGVySW5wdXRcbiAgICAgICAgICAgID8gdGhpcy5yZW5kZXJEZXNjcmlwdGlvbigpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHF1ZXN0aW9uLmNzc0NvbnRlbnQgfHwgdW5kZWZpbmVkLCBzdHlsZTogY29udGVudFN0eWxlLCByb2xlOiBcInByZXNlbnRhdGlvblwiIH0sXG4gICAgICAgICAgICBlcnJvcnNUb3AsXG4gICAgICAgICAgICBxdWVzdGlvblJlbmRlcixcbiAgICAgICAgICAgIGNvbW1lbnQsXG4gICAgICAgICAgICBlcnJvcnNCb3R0b20sXG4gICAgICAgICAgICBkZXNjcmlwdGlvblVuZGVySW5wdXQpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9uO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnJlbmRlckhlYWRlcihxdWVzdGlvbik7XG4gICAgICAgIHZhciBoZWFkZXJUb3AgPSBxdWVzdGlvbi5oYXNUaXRsZU9uTGVmdFRvcCA/IGhlYWRlciA6IG51bGw7XG4gICAgICAgIHZhciBoZWFkZXJCb3R0b20gPSBxdWVzdGlvbi5oYXNUaXRsZU9uQm90dG9tID8gaGVhZGVyIDogbnVsbDtcbiAgICAgICAgdmFyIGVycm9yc0Fib3ZlUXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9uLnNob3dFcnJvcnNBYm92ZVF1ZXN0aW9uXG4gICAgICAgICAgICA/IHRoaXMucmVuZGVyRXJyb3JzKGNzc0NsYXNzZXMsIFwiXCIpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBlcnJvcnNCZWxvd1F1ZXN0aW9uID0gdGhpcy5xdWVzdGlvbi5zaG93RXJyb3JzQmVsb3dRdWVzdGlvblxuICAgICAgICAgICAgPyB0aGlzLnJlbmRlckVycm9ycyhjc3NDbGFzc2VzLCBcIlwiKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB2YXIgcm9vdFN0eWxlID0gcXVlc3Rpb24uZ2V0Um9vdFN0eWxlKCk7XG4gICAgICAgIHZhciBxdWVzdGlvbkNvbnRlbnQgPSB0aGlzLndyYXBRdWVzdGlvbkNvbnRlbnQodGhpcy5yZW5kZXJRdWVzdGlvbkNvbnRlbnQoKSk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyByZWY6IHRoaXMucm9vdFJlZiwgaWQ6IHF1ZXN0aW9uLmlkLCBjbGFzc05hbWU6IHF1ZXN0aW9uLmdldFJvb3RDc3MoKSwgc3R5bGU6IHJvb3RTdHlsZSwgcm9sZTogcXVlc3Rpb24uYXJpYVJvbGUsIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFSZXF1aXJlZCwgXCJhcmlhLWludmFsaWRcIjogdGhpcy5xdWVzdGlvbi5hcmlhSW52YWxpZCwgXCJhcmlhLWxhYmVsbGVkYnlcIjogcXVlc3Rpb24uYXJpYUxhYmVsbGVkQnksIFwiYXJpYS1kZXNjcmliZWRieVwiOiBxdWVzdGlvbi5hcmlhRGVzY3JpYmVkQnksIFwiYXJpYS1leHBhbmRlZFwiOiBxdWVzdGlvbi5hcmlhRXhwYW5kZWQgPT09IG51bGwgPyB1bmRlZmluZWQgOiBxdWVzdGlvbi5hcmlhRXhwYW5kZWQgPT09IFwidHJ1ZVwiIH0sXG4gICAgICAgICAgICAgICAgZXJyb3JzQWJvdmVRdWVzdGlvbixcbiAgICAgICAgICAgICAgICBoZWFkZXJUb3AsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb25Db250ZW50LFxuICAgICAgICAgICAgICAgIGhlYWRlckJvdHRvbSxcbiAgICAgICAgICAgICAgICBlcnJvcnNCZWxvd1F1ZXN0aW9uKSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLndyYXBFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMucXVlc3Rpb24uc3VydmV5O1xuICAgICAgICB2YXIgd3JhcHBlciA9IG51bGw7XG4gICAgICAgIGlmIChzdXJ2ZXkpIHtcbiAgICAgICAgICAgIHdyYXBwZXIgPSBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXJcIl0ud3JhcEVsZW1lbnQoc3VydmV5LCBlbGVtZW50LCB0aGlzLnF1ZXN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JhcHBlciAhPT0gbnVsbCAmJiB3cmFwcGVyICE9PSB2b2lkIDAgPyB3cmFwcGVyIDogZWxlbWVudDtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uLnByb3RvdHlwZS53cmFwUXVlc3Rpb25Db250ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMucXVlc3Rpb24uc3VydmV5O1xuICAgICAgICB2YXIgd3JhcHBlciA9IG51bGw7XG4gICAgICAgIGlmIChzdXJ2ZXkpIHtcbiAgICAgICAgICAgIHdyYXBwZXIgPSBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXJcIl0ud3JhcFF1ZXN0aW9uQ29udGVudChzdXJ2ZXksIGVsZW1lbnQsIHRoaXMucXVlc3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cmFwcGVyICE9PSBudWxsICYmIHdyYXBwZXIgIT09IHZvaWQgMCA/IHdyYXBwZXIgOiBlbGVtZW50O1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLnJlbmRlclF1ZXN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU3VydmV5UXVlc3Rpb24ucmVuZGVyUXVlc3Rpb25Cb2R5KHRoaXMuY3JlYXRvciwgdGhpcy5xdWVzdGlvbik7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbi5wcm90b3R5cGUucmVuZGVyRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJRdWVzdGlvbkRlc2NyaXB0aW9uKHRoaXMucXVlc3Rpb24pO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb24ucHJvdG90eXBlLnJlbmRlckNvbW1lbnQgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICB2YXIgY29tbWVudFRleHQgPSBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdXJ2ZXlFbGVtZW50QmFzZVwiXS5yZW5kZXJMb2NTdHJpbmcodGhpcy5xdWVzdGlvbi5sb2NDb21tZW50VGV4dCk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0Q29tbWVudEFyZWFDc3MoKSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgbnVsbCwgY29tbWVudFRleHQpLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3JlYWN0cXVlc3Rpb25fY29tbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbVwiXSwgeyBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiwgY3NzQ2xhc3NlczogY3NzQ2xhc3Nlcywgb3RoZXJDc3M6IGNzc0NsYXNzZXMub3RoZXIsIGlzRGlzcGxheU1vZGU6IHRoaXMucXVlc3Rpb24uaXNJbnB1dFJlYWRPbmx5IH0pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbi5wcm90b3R5cGUucmVuZGVySGVhZGVyID0gZnVuY3Rpb24gKHF1ZXN0aW9uKSB7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfZWxlbWVudF9oZWFkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcIlN1cnZleUVsZW1lbnRIZWFkZXJcIl0sIHsgZWxlbWVudDogcXVlc3Rpb24gfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbi5wcm90b3R5cGUucmVuZGVyRXJyb3JzID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMsIGxvY2F0aW9uKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5RWxlbWVudEVycm9ycywgeyBlbGVtZW50OiB0aGlzLnF1ZXN0aW9uLCBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzLCBjcmVhdG9yOiB0aGlzLmNyZWF0b3IsIGxvY2F0aW9uOiBsb2NhdGlvbiwgaWQ6IHRoaXMucXVlc3Rpb24uaWQgKyBcIl9lcnJvcnNcIiB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb247XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwicXVlc3Rpb25cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uLCBwcm9wcyk7XG59KTtcbnZhciBTdXJ2ZXlFbGVtZW50RXJyb3JzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlFbGVtZW50RXJyb3JzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleUVsZW1lbnRFcnJvcnMocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN0YXRlID0gX3RoaXMuZ2V0U3RhdGUoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudEVycm9ycy5wcm90b3R5cGUsIFwiaWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmVsZW1lbnQuaWQgKyBcIl9lcnJvcnNcIjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50RXJyb3JzLnByb3RvdHlwZSwgXCJlbGVtZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5lbGVtZW50O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRFcnJvcnMucHJvdG90eXBlLCBcImNyZWF0b3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNyZWF0b3I7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudEVycm9ycy5wcm90b3R5cGUsIFwibG9jYXRpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmxvY2F0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RWxlbWVudEVycm9ycy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChwcmV2U3RhdGUgPT09IHZvaWQgMCkgeyBwcmV2U3RhdGUgPSBudWxsOyB9XG4gICAgICAgIHJldHVybiAhcHJldlN0YXRlID8geyBlcnJvcjogMCB9IDogeyBlcnJvcjogcHJldlN0YXRlLmVycm9yICsgMSB9O1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudEVycm9ycy5wcm90b3R5cGUuY2FuUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVsZW1lbnQgJiYgdGhpcy5lbGVtZW50Lmhhc1Zpc2libGVFcnJvcnM7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50RXJyb3JzLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRFcnJvcnMucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnQuZXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gXCJlcnJvclwiICsgaTtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHRoaXMuY3JlYXRvci5yZW5kZXJFcnJvcihrZXksIHRoaXMuZWxlbWVudC5lcnJvcnNbaV0sIHRoaXMuY3NzQ2xhc3NlcykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyByb2xlOiBcImFsZXJ0XCIsIFwiYXJpYS1saXZlXCI6IFwicG9saXRlXCIsIGNsYXNzTmFtZTogdGhpcy5lbGVtZW50LmNzc0Vycm9yLCBpZDogdGhpcy5pZCB9LCBlcnJvcnMpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlFbGVtZW50RXJyb3JzO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNXcmFwcGVkLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZC5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbjtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc1dyYXBwZWQucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRRdWVzdGlvbigpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZC5wcm90b3R5cGUsIFwiY3JlYXRvclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY3JlYXRvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZC5wcm90b3R5cGUuZ2V0UXVlc3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZC5wcm90b3R5cGUsIFwiaXRlbUNzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbUNzcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzV3JhcHBlZC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5kb0FmdGVyUmVuZGVyKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc1dyYXBwZWQucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZS5jYWxsKHRoaXMsIHByZXZQcm9wcywgcHJldlN0YXRlKTtcbiAgICAgICAgdGhpcy5kb0FmdGVyUmVuZGVyKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc1dyYXBwZWQucHJvdG90eXBlLmRvQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNXcmFwcGVkLnByb3RvdHlwZS5jYW5SZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMucXVlc3Rpb247XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc1dyYXBwZWQucHJvdG90eXBlLnJlbmRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZW5kZXJlZFF1ZXN0aW9uID0gdGhpcy5yZW5kZXJRdWVzdGlvbigpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJGcmFnbWVudFwiXSwgbnVsbCwgcmVuZGVyZWRRdWVzdGlvbikpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNXcmFwcGVkLnByb3RvdHlwZS5nZXRTaG93RXJyb3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbi5pc1Zpc2libGU7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc1dyYXBwZWQucHJvdG90eXBlLnJlbmRlclF1ZXN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU3VydmV5UXVlc3Rpb24ucmVuZGVyUXVlc3Rpb25Cb2R5KHRoaXMuY3JlYXRvciwgdGhpcy5xdWVzdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNXcmFwcGVkO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzQ2VsbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uQW5kRXJyb3JzQ2VsbChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY2VsbFJlZiA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVSZWZcIl0oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc0NlbGwucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLmNlbGxSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmICghIWVsKSB7XG4gICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1yZW5kZXJlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmdldENlbGxTdHlsZSgpO1xuICAgICAgICB2YXIgY2VsbCA9IHRoaXMucHJvcHMuY2VsbDtcbiAgICAgICAgdmFyIGZvY3VzSW4gPSBmdW5jdGlvbiAoKSB7IGNlbGwuZm9jdXNJbigpOyB9O1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidGRcIiwgeyByZWY6IHRoaXMuY2VsbFJlZiwgY2xhc3NOYW1lOiB0aGlzLml0ZW1Dc3MsIGNvbFNwYW46IGNlbGwuY29sU3BhbnMsIFwiZGF0YS1yZXNwb25zaXZlLXRpdGxlXCI6IHRoaXMuZ2V0SGVhZGVyVGV4dCgpLCB0aXRsZTogY2VsbC5nZXRUaXRsZSgpLCBzdHlsZTogc3R5bGUsIG9uRm9jdXM6IGZvY3VzSW4gfSwgdGhpcy53cmFwQ2VsbCh0aGlzLnByb3BzLmNlbGwsIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5wcm9wcy5jZWxsLmNlbGxRdWVzdGlvbldyYXBwZXJDbGFzc05hbWUgfSwgdGhpcy5yZW5kZXJRdWVzdGlvbigpKSkpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc0NlbGwucHJvdG90eXBlLmdldENlbGxTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc0NlbGwucHJvdG90eXBlLmdldEhlYWRlclRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsLnByb3RvdHlwZS53cmFwQ2VsbCA9IGZ1bmN0aW9uIChjZWxsLCBlbGVtZW50KSB7XG4gICAgICAgIGlmICghY2VsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMucXVlc3Rpb24uc3VydmV5O1xuICAgICAgICB2YXIgd3JhcHBlciA9IG51bGw7XG4gICAgICAgIGlmIChzdXJ2ZXkpIHtcbiAgICAgICAgICAgIHdyYXBwZXIgPSBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXJcIl0ud3JhcE1hdHJpeENlbGwoc3VydmV5LCBlbGVtZW50LCBjZWxsLCB0aGlzLnByb3BzLnJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZXIgIT09IG51bGwgJiYgd3JhcHBlciAhPT0gdm9pZCAwID8gd3JhcHBlciA6IGVsZW1lbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNDZWxsO1xufShTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc1dyYXBwZWQpKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uRXJyb3JDZWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkVycm9yQ2VsbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkVycm9yQ2VsbChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjaGFuZ2VkOiAwXG4gICAgICAgIH07XG4gICAgICAgIGlmIChfdGhpcy5xdWVzdGlvbikge1xuICAgICAgICAgICAgX3RoaXMucmVnaXN0ZXJDYWxsYmFjayhfdGhpcy5xdWVzdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25FcnJvckNlbGwucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5xdWVzdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uRXJyb3JDZWxsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjaGFuZ2VkOiB0aGlzLnN0YXRlLmNoYW5nZWQgKyAxIH0pO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25FcnJvckNlbGwucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiAocXVlc3Rpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcXVlc3Rpb24ucmVnaXN0ZXJGdW5jdGlvbk9uUHJvcGVydHlWYWx1ZUNoYW5nZWQoXCJlcnJvcnNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMudXBkYXRlKCk7XG4gICAgICAgIH0sIFwiX19yZWFjdFN1YnNjcmlwdGlvblwiKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uRXJyb3JDZWxsLnByb3RvdHlwZS51blJlZ2lzdGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiAocXVlc3Rpb24pIHtcbiAgICAgICAgcXVlc3Rpb24udW5SZWdpc3RlckZ1bmN0aW9uT25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZChcImVycm9yc1wiLCBcIl9fcmVhY3RTdWJzY3JpcHRpb25cIik7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkVycm9yQ2VsbC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcykge1xuICAgICAgICBpZiAocHJldlByb3BzLnF1ZXN0aW9uICYmIHByZXZQcm9wcy5xdWVzdGlvbiAhPT0gdGhpcy5xdWVzdGlvbikge1xuICAgICAgICAgICAgdGhpcy51blJlZ2lzdGVyQ2FsbGJhY2socHJldlByb3BzLmNlbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2sodGhpcy5xdWVzdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uRXJyb3JDZWxsLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudW5SZWdpc3RlckNhbGxiYWNrKHRoaXMucXVlc3Rpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkVycm9yQ2VsbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5RWxlbWVudEVycm9ycywgeyBlbGVtZW50OiB0aGlzLnF1ZXN0aW9uLCBjcmVhdG9yOiB0aGlzLnByb3BzLmNyZWF0b3IsIGNzc0NsYXNzZXM6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkVycm9yQ2VsbDtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkNvbXBvbmVudFwiXSkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9idXR0b25ncm91cC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9idXR0b25ncm91cC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25CdXR0b25Hcm91cCwgU3VydmV5QnV0dG9uR3JvdXBJdGVtICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXBcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkJ1dHRvbkdyb3VwOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlCdXR0b25Hcm91cEl0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlCdXR0b25Hcm91cEl0ZW07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18pO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25CdXR0b25Hcm91cChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbkJ1dHRvbkdyb3VwLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25CYXNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25CdXR0b25Hcm91cC5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbjtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXAucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMucmVuZGVySXRlbXMoKTtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5yb290IH0sIGl0ZW1zKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXAucHJvdG90eXBlLnJlbmRlckl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbi52aXNpYmxlQ2hvaWNlcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoU3VydmV5QnV0dG9uR3JvdXBJdGVtLCB7IGtleTogX3RoaXMucXVlc3Rpb24uaW5wdXRJZCArIFwiX1wiICsgaW5kZXgsIGl0ZW06IGl0ZW0sIHF1ZXN0aW9uOiBfdGhpcy5xdWVzdGlvbiwgaW5kZXg6IGluZGV4IH0pKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25CdXR0b25Hcm91cDtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZVwiXSkpO1xuXG52YXIgU3VydmV5QnV0dG9uR3JvdXBJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlCdXR0b25Hcm91cEl0ZW0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5QnV0dG9uR3JvdXBJdGVtKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUJ1dHRvbkdyb3VwSXRlbS5wcm90b3R5cGUsIFwiaW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmluZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUJ1dHRvbkdyb3VwSXRlbS5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUJ1dHRvbkdyb3VwSXRlbS5wcm90b3R5cGUsIFwiaXRlbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUJ1dHRvbkdyb3VwSXRlbS5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtO1xuICAgIH07XG4gICAgU3VydmV5QnV0dG9uR3JvdXBJdGVtLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1vZGVsID0gbmV3IHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJCdXR0b25Hcm91cEl0ZW1Nb2RlbFwiXSh0aGlzLnF1ZXN0aW9uLCB0aGlzLml0ZW0sIHRoaXMuaW5kZXgpO1xuICAgICAgICB2YXIgaWNvbiA9IHRoaXMucmVuZGVySWNvbigpO1xuICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnJlbmRlcklucHV0KCk7XG4gICAgICAgIHZhciBjYXB0aW9uID0gdGhpcy5yZW5kZXJDYXB0aW9uKCk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHsgcm9sZTogXCJyYWRpb1wiLCBjbGFzc05hbWU6IHRoaXMubW9kZWwuY3NzLmxhYmVsLCB0aXRsZTogdGhpcy5tb2RlbC5jYXB0aW9uLnJlbmRlcmVkSHRtbCB9LFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzcy5kZWNvcmF0b3IgfSxcbiAgICAgICAgICAgICAgICBpY29uLFxuICAgICAgICAgICAgICAgIGNhcHRpb24pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlCdXR0b25Hcm91cEl0ZW0ucHJvdG90eXBlLnJlbmRlckljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghIXRoaXMubW9kZWwuaWNvbk5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3ZnSWNvblwiXSwgeyBjbGFzc05hbWU6IHRoaXMubW9kZWwuY3NzLmljb24sIGljb25OYW1lOiB0aGlzLm1vZGVsLmljb25OYW1lLCBzaXplOiB0aGlzLm1vZGVsLmljb25TaXplIHx8IDI0IH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIFN1cnZleUJ1dHRvbkdyb3VwSXRlbS5wcm90b3R5cGUucmVuZGVySW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHsgY2xhc3NOYW1lOiB0aGlzLm1vZGVsLmNzcy5jb250cm9sLCBpZDogdGhpcy5tb2RlbC5pZCwgdHlwZTogXCJyYWRpb1wiLCBuYW1lOiB0aGlzLm1vZGVsLm5hbWUsIGNoZWNrZWQ6IHRoaXMubW9kZWwuc2VsZWN0ZWQsIHZhbHVlOiB0aGlzLm1vZGVsLnZhbHVlLCBkaXNhYmxlZDogdGhpcy5tb2RlbC5yZWFkT25seSwgb25DaGFuZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5tb2RlbC5vbkNoYW5nZSgpO1xuICAgICAgICAgICAgfSwgXCJhcmlhLXJlcXVpcmVkXCI6IHRoaXMubW9kZWwuaXNSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubW9kZWwuY2FwdGlvbi5yZW5kZXJlZEh0bWwsIFwiYXJpYS1pbnZhbGlkXCI6IHRoaXMubW9kZWwuaGFzRXJyb3JzLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMubW9kZWwuZGVzY3JpYmVkQnksIHJvbGU6IFwicmFkaW9cIiB9KSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlCdXR0b25Hcm91cEl0ZW0ucHJvdG90eXBlLnJlbmRlckNhcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5tb2RlbC5zaG93Q2FwdGlvbilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgY2FwdGlvbiA9IHRoaXMucmVuZGVyTG9jU3RyaW5nKHRoaXMubW9kZWwuY2FwdGlvbik7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IHRoaXMubW9kZWwuY3NzLmNhcHRpb24sIHRpdGxlOiB0aGlzLm1vZGVsLmNhcHRpb24ucmVuZGVyZWRIdG1sIH0sIGNhcHRpb24pKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlCdXR0b25Hcm91cEl0ZW07XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cbi8vIFJlYWN0UXVlc3Rpb25GYWN0b3J5Lkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJidXR0b25ncm91cFwiLCBwcm9wcyA9PiB7XG4vLyAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFN1cnZleVF1ZXN0aW9uQnV0dG9uR3JvdXAsIHByb3BzKTtcbi8vIH0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fY2hlY2tib3gudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fY2hlY2tib3gudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gsIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQ2hlY2tib3hcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9jb21tZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fY29tbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fY29tbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0c3VydmV5bW9kZWwgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHN1cnZleW1vZGVsLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25DaGVja2JveC5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZmllbGRzZXRcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0U2VsZWN0QmFzZVJvb3RDc3MoKSwgcmVmOiBmdW5jdGlvbiAoZmllbGRzZXQpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKGZpZWxkc2V0KSk7IH0sIHJvbGU6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhUm9sZSwgXCJhcmlhLXJlcXVpcmVkXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhUmVxdWlyZWQsIFwiYXJpYS1sYWJlbFwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUxhYmVsLCBcImFyaWEtbGFiZWxsZWRieVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUxhYmVsbGVkQnksIFwiYXJpYS1kZXNjcmliZWRieVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYURlc2NyaWJlZEJ5LCBcImFyaWEtaW52YWxpZFwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUludmFsaWQsIFwiYXJpYS1lcnJvcm1lc3NhZ2VcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFFcnJvcm1lc3NhZ2UgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwibGVnZW5kXCIsIHsgY2xhc3NOYW1lOiBcInN2LWhpZGRlblwiIH0sIHRoaXMucXVlc3Rpb24ubG9jVGl0bGUucmVuZGVyZWRIdG1sKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0SGVhZGVyKCksXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLmhhc0NvbHVtbnNcbiAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0Q29sdW1uZWRCb2R5KGNzc0NsYXNzZXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzLmdldEJvZHkoY3NzQ2xhc3NlcyksXG4gICAgICAgICAgICB0aGlzLmdldEZvb3RlcigpLFxuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi5pc090aGVyU2VsZWN0ZWQgPyB0aGlzLnJlbmRlck90aGVyKCkgOiBudWxsKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94LnByb3RvdHlwZS5nZXRIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLmhhc0hlYWRJdGVtcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb24uaGVhZEl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaWkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVuZGVySXRlbShcIml0ZW1faFwiICsgaWksIGl0ZW0sIGZhbHNlLCBfdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94LnByb3RvdHlwZS5nZXRGb290ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLmhhc0Zvb3RJdGVtcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb24uZm9vdEl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaWkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVuZGVySXRlbShcIml0ZW1fZlwiICsgaWksIGl0ZW0sIGZhbHNlLCBfdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94LnByb3RvdHlwZS5nZXRDb2x1bW5lZEJvZHkgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLnJvb3RNdWx0aUNvbHVtbiB9LCB0aGlzLmdldENvbHVtbnMoY3NzQ2xhc3NlcykpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbi5jb2x1bW5zLm1hcChmdW5jdGlvbiAoY29sdW1uLCBjaSkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gY29sdW1uLm1hcChmdW5jdGlvbiAoaXRlbSwgaWkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVuZGVySXRlbShcIml0ZW1cIiArIGlpLCBpdGVtLCBjaSA9PT0gMCAmJiBpaSA9PT0gMCwgY3NzQ2xhc3NlcywgXCJcIiArIGNpICsgaWkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsga2V5OiBcImNvbHVtblwiICsgY2ksIGNsYXNzTmFtZTogX3RoaXMucXVlc3Rpb24uZ2V0Q29sdW1uQ2xhc3MoKSwgcm9sZTogXCJwcmVzZW50YXRpb25cIiB9LCBpdGVtcykpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gucHJvdG90eXBlLmdldEJvZHkgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5ibG9ja2VkUm93KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMucm9vdFJvdyB9LCB0aGlzLmdldEl0ZW1zKGNzc0NsYXNzZXMsIHRoaXMucXVlc3Rpb24uZGF0YUNob2ljZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLCB0aGlzLmdldEl0ZW1zKGNzc0NsYXNzZXMsIHRoaXMucXVlc3Rpb24uYm9keUl0ZW1zKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94LnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uIChjc3NDbGFzc2VzLCBjaG9pY2VzKSB7XG4gICAgICAgIHZhciByZW5kZXJlZEl0ZW1zID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hvaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBjaG9pY2VzW2ldO1xuICAgICAgICAgICAgdmFyIGtleSA9IFwiaXRlbVwiICsgaTtcbiAgICAgICAgICAgIHZhciByZW5kZXJlZEl0ZW0gPSB0aGlzLnJlbmRlckl0ZW0oa2V5LCBpdGVtLCBpID09IDAsIGNzc0NsYXNzZXMsIFwiXCIgKyBpKTtcbiAgICAgICAgICAgIGlmICghIXJlbmRlcmVkSXRlbSkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVkSXRlbXMucHVzaChyZW5kZXJlZEl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZW5kZXJlZEl0ZW1zO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gucHJvdG90eXBlLCBcInRleHRTdHlsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94LnByb3RvdHlwZS5yZW5kZXJPdGhlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0Q29tbWVudEFyZWFDc3ModHJ1ZSkgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9yZWFjdHF1ZXN0aW9uX2NvbW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN1cnZleVF1ZXN0aW9uT3RoZXJWYWx1ZUl0ZW1cIl0sIHsgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24sIG90aGVyQ3NzOiBjc3NDbGFzc2VzLm90aGVyLCBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzLCBpc0Rpc3BsYXlNb2RlOiB0aGlzLmlzRGlzcGxheU1vZGUgfSkpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gucHJvdG90eXBlLnJlbmRlckl0ZW0gPSBmdW5jdGlvbiAoa2V5LCBpdGVtLCBpc0ZpcnN0LCBjc3NDbGFzc2VzLCBpbmRleCkge1xuICAgICAgICB2YXIgcmVuZGVyZWRJdGVtID0gX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KHRoaXMucXVlc3Rpb24uaXRlbUNvbXBvbmVudCwge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICAgIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsXG4gICAgICAgICAgICBpc0Rpc3BsYXlNb2RlOiB0aGlzLmlzRGlzcGxheU1vZGUsXG4gICAgICAgICAgICBpdGVtOiBpdGVtLFxuICAgICAgICAgICAgdGV4dFN0eWxlOiB0aGlzLnRleHRTdHlsZSxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIGlzRmlyc3Q6IGlzRmlyc3QsXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgc3VydmV5ID0gdGhpcy5xdWVzdGlvbi5zdXJ2ZXk7XG4gICAgICAgIHZhciB3cmFwcGVkSXRlbSA9IG51bGw7XG4gICAgICAgIGlmICghIXN1cnZleSAmJiAhIXJlbmRlcmVkSXRlbSkge1xuICAgICAgICAgICAgd3JhcHBlZEl0ZW0gPSBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXJcIl0ud3JhcEl0ZW1WYWx1ZShzdXJ2ZXksIHJlbmRlcmVkSXRlbSwgdGhpcy5xdWVzdGlvbiwgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZWRJdGVtICE9PSBudWxsICYmIHdyYXBwZWRJdGVtICE9PSB2b2lkIDAgPyB3cmFwcGVkSXRlbSA6IHJlbmRlcmVkSXRlbTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94O1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdKSk7XG5cbnZhciBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0ocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmhhbmRsZU9uQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5xdWVzdGlvbi5jbGlja0l0ZW1IYW5kbGVyKF90aGlzLml0ZW0sIGV2ZW50LnRhcmdldC5jaGVja2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbS5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucXVlc3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0ucHJvdG90eXBlLCBcInRleHRTdHlsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGV4dFN0eWxlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtLnByb3RvdHlwZSwgXCJpc0ZpcnN0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5pc0ZpcnN0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtLnByb3RvdHlwZSwgXCJpbmRleFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaW5kZXg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0ucHJvdG90eXBlLCBcImhpZGVDYXB0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5oaWRlQ2FwdGlvbiA9PT0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtLnByb3RvdHlwZS5zaG91bGRDb21wb25lbnRVcGRhdGUgPSBmdW5jdGlvbiAobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgaWYgKCFfc3VwZXIucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZS5jYWxsKHRoaXMsIG5leHRQcm9wcywgbmV4dFN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCF0aGlzLnF1ZXN0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gKCF0aGlzLnF1ZXN0aW9uLmN1c3RvbVdpZGdldCB8fFxuICAgICAgICAgICAgISF0aGlzLnF1ZXN0aW9uLmN1c3RvbVdpZGdldERhdGEuaXNOZWVkUmVuZGVyIHx8XG4gICAgICAgICAgICAhIXRoaXMucXVlc3Rpb24uY3VzdG9tV2lkZ2V0LndpZGdldEpzb24uaXNEZWZhdWx0UmVuZGVyIHx8XG4gICAgICAgICAgICAhIXRoaXMucXVlc3Rpb24uY3VzdG9tV2lkZ2V0LndpZGdldEpzb24ucmVuZGVyKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtLnByb3RvdHlwZS5jYW5SZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuaXRlbSAmJiAhIXRoaXMucXVlc3Rpb247XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbS5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IHRoaXMucXVlc3Rpb24uaXNJdGVtU2VsZWN0ZWQodGhpcy5pdGVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQ2hlY2tib3goaXNDaGVja2VkLCBudWxsKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbS5wcm90b3R5cGUsIFwiaW5wdXRTdHlsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8veyBtYXJnaW5SaWdodDogXCIzcHhcIiB9O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW0ucHJvdG90eXBlLnJlbmRlckNoZWNrYm94ID0gZnVuY3Rpb24gKGlzQ2hlY2tlZCwgb3RoZXJJdGVtKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXMucXVlc3Rpb24uZ2V0SXRlbUlkKHRoaXMuaXRlbSk7XG4gICAgICAgIHZhciBpdGVtQ2xhc3MgPSB0aGlzLnF1ZXN0aW9uLmdldEl0ZW1DbGFzcyh0aGlzLml0ZW0pO1xuICAgICAgICB2YXIgbGFiZWxDbGFzcyA9IHRoaXMucXVlc3Rpb24uZ2V0TGFiZWxDbGFzcyh0aGlzLml0ZW0pO1xuICAgICAgICB2YXIgaXRlbUxhYmVsID0gIXRoaXMuaGlkZUNhcHRpb24gPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IHRoaXMuY3NzQ2xhc3Nlcy5jb250cm9sTGFiZWwgfSwgdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5pdGVtLmxvY1RleHQsIHRoaXMudGV4dFN0eWxlKSkgOiBudWxsO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBpdGVtQ2xhc3MsIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IGxhYmVsQ2xhc3MgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImlucHV0XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzc0NsYXNzZXMuaXRlbUNvbnRyb2wsIHR5cGU6IFwiY2hlY2tib3hcIiwgcm9sZTogXCJvcHRpb25cIiwgbmFtZTogdGhpcy5xdWVzdGlvbi5uYW1lICsgdGhpcy5pdGVtLmlkLCB2YWx1ZTogdGhpcy5pdGVtLnZhbHVlLCBpZDogaWQsIHN0eWxlOiB0aGlzLmlucHV0U3R5bGUsIGRpc2FibGVkOiAhdGhpcy5xdWVzdGlvbi5nZXRJdGVtRW5hYmxlZCh0aGlzLml0ZW0pLCBjaGVja2VkOiBpc0NoZWNrZWQsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZU9uQ2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuY3NzQ2xhc3Nlcy5tYXRlcmlhbERlY29yYXRvciA/XG4gICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3NDbGFzc2VzLm1hdGVyaWFsRGVjb3JhdG9yIH0sIHRoaXMucXVlc3Rpb24uaXRlbVN2Z0ljb24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzdmdcIiwgeyBjbGFzc05hbWU6IHRoaXMuY3NzQ2xhc3Nlcy5pdGVtRGVjb3JhdG9yIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ1c2VcIiwgeyB4bGlua0hyZWY6IHRoaXMucXVlc3Rpb24uaXRlbVN2Z0ljb24gfSkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwpIDpcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBpdGVtTGFiZWwpLFxuICAgICAgICAgICAgb3RoZXJJdGVtKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25DaGVja2JveEl0ZW07XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN1cnZleS1jaGVja2JveC1pdGVtXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkNoZWNrYm94SXRlbSwgcHJvcHMpO1xufSk7XG5fcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclF1ZXN0aW9uKFwiY2hlY2tib3hcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uQ2hlY2tib3gsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fY29tbWVudC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2NvbW1lbnQudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25Db21tZW50LCBTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtLCBTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uQ29tbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQ29tbWVudDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW07IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uT3RoZXJWYWx1ZUl0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19jaGFyYWN0ZXJfY291bnRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL2NoYXJhY3Rlci1jb3VudGVyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9jaGFyYWN0ZXItY291bnRlci50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25Db21tZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkNvbW1lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25Db21tZW50KHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb25Db21tZW50LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb25CbHVyID0gIXRoaXMucXVlc3Rpb24uaXNJbnB1dFRleHRVcGRhdGUgPyB0aGlzLnVwZGF0ZVZhbHVlT25FdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIG9uSW5wdXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5xdWVzdGlvbi5pc0lucHV0VGV4dFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVZhbHVlT25FdmVudChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWVzdGlvbi51cGRhdGVFbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5xdWVzdGlvbi51cGRhdGVSZW1haW5pbmdDaGFyYWN0ZXJDb3VudGVyKG5ld1ZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFBsYWNlaG9sZGVyO1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5pc1JlYWRPbmx5UmVuZGVyRGl2KCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCBudWxsLCB0aGlzLnF1ZXN0aW9uLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY291bnRlciA9ICEhdGhpcy5xdWVzdGlvbi5nZXRNYXhMZW5ndGgoKSA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19jaGFyYWN0ZXJfY291bnRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiQ2hhcmFjdGVyQ291bnRlckNvbXBvbmVudFwiXSwgeyBjb3VudGVyOiB0aGlzLnF1ZXN0aW9uLmNoYXJhY3RlckNvdW50ZXIsIHJlbWFpbmluZ0NoYXJhY3RlckNvdW50ZXI6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5yZW1haW5pbmdDaGFyYWN0ZXJDb3VudGVyIH0pKSA6IG51bGw7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ0ZXh0YXJlYVwiLCB7IGlkOiB0aGlzLnF1ZXN0aW9uLmlucHV0SWQsIGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jbGFzc05hbWUsIGRpc2FibGVkOiB0aGlzLnF1ZXN0aW9uLmlzSW5wdXRSZWFkT25seSwgcmVhZE9ubHk6IHRoaXMucXVlc3Rpb24uaXNJbnB1dFJlYWRPbmx5LCByZWY6IGZ1bmN0aW9uICh0ZXh0YXJlYSkgeyByZXR1cm4gKF90aGlzLnNldENvbnRyb2wodGV4dGFyZWEpKTsgfSwgbWF4TGVuZ3RoOiB0aGlzLnF1ZXN0aW9uLmdldE1heExlbmd0aCgpLCBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsIG9uQmx1cjogb25CbHVyLCBvbklucHV0OiBvbklucHV0LCBvbktleURvd246IGZ1bmN0aW9uIChldmVudCkgeyBfdGhpcy5xdWVzdGlvbi5vbktleURvd24oZXZlbnQpOyB9LCBjb2xzOiB0aGlzLnF1ZXN0aW9uLmNvbHMsIHJvd3M6IHRoaXMucXVlc3Rpb24ucm93cywgXCJhcmlhLXJlcXVpcmVkXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhUmVxdWlyZWQsIFwiYXJpYS1sYWJlbFwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUxhYmVsLCBcImFyaWEtbGFiZWxsZWRieVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUxhYmVsbGVkQnksIFwiYXJpYS1kZXNjcmliZWRieVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYURlc2NyaWJlZEJ5LCBcImFyaWEtaW52YWxpZFwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUludmFsaWQsIFwiYXJpYS1lcnJvcm1lc3NhZ2VcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFFcnJvcm1lc3NhZ2UsIHN0eWxlOiB7IHJlc2l6ZTogdGhpcy5xdWVzdGlvbi5yZXNpemVTdHlsZSB9IH0pLFxuICAgICAgICAgICAgY291bnRlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQ29tbWVudDtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UXVlc3Rpb25VbmNvbnRyb2xsZWRFbGVtZW50XCJdKSk7XG5cbnZhciBTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW0ocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN0YXRlID0geyBjb21tZW50OiBfdGhpcy5nZXRDb21tZW50KCkgfHwgXCJcIiB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW0ucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZS5jYWxsKHRoaXMsIHByZXZQcm9wcywgcHJldlN0YXRlKTtcbiAgICAgICAgdGhpcy51cGRhdGVEb21FbGVtZW50KCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZURvbUVsZW1lbnQoKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW0ucHJvdG90eXBlLnVwZGF0ZURvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghIXRoaXMuY29udHJvbCkge1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGlzLmNvbnRyb2w7XG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLmdldENvbW1lbnQoKSB8fCBcIlwiO1xuICAgICAgICAgICAgaWYgKCFzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiSGVscGVyc1wiXS5pc1R3b1ZhbHVlRXF1YWxzKG5ld1ZhbHVlLCBjb250cm9sLnZhbHVlLCBmYWxzZSwgdHJ1ZSwgZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtLnByb3RvdHlwZS5zZXRDb250cm9sID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCEhZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sID0gZWxlbWVudDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbS5wcm90b3R5cGUuY2FuUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbS5wcm90b3R5cGUub25Db21tZW50Q2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJvcHMucXVlc3Rpb24ub25Db21tZW50Q2hhbmdlKGV2ZW50KTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW0ucHJvdG90eXBlLm9uQ29tbWVudElucHV0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJvcHMucXVlc3Rpb24ub25Db21tZW50SW5wdXQoZXZlbnQpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbS5wcm90b3R5cGUuZ2V0Q29tbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucXVlc3Rpb24uY29tbWVudDtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW0ucHJvdG90eXBlLnNldENvbW1lbnQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5xdWVzdGlvbi5jb21tZW50ID0gdmFsdWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucXVlc3Rpb24uY29tbWVudElkO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbS5wcm90b3R5cGUuZ2V0UGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uLnJlbmRlcmVkQ29tbWVudFBsYWNlaG9sZGVyO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Db21tZW50SXRlbS5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHF1ZXN0aW9uID0gdGhpcy5wcm9wcy5xdWVzdGlvbjtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMucHJvcHMub3RoZXJDc3MgfHwgdGhpcy5jc3NDbGFzc2VzLmNvbW1lbnQ7XG4gICAgICAgIGlmIChxdWVzdGlvbi5pc1JlYWRPbmx5UmVuZGVyRGl2KCkpIHtcbiAgICAgICAgICAgIHZhciBjb21tZW50ID0gdGhpcy5nZXRDb21tZW50KCkgfHwgXCJcIjtcbiAgICAgICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCBudWxsLCBjb21tZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidGV4dGFyZWFcIiwgeyBpZDogdGhpcy5nZXRJZCgpLCBjbGFzc05hbWU6IGNsYXNzTmFtZSwgcmVmOiBmdW5jdGlvbiAodGV4dGFyZWEpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKHRleHRhcmVhKSk7IH0sIGRpc2FibGVkOiB0aGlzLmlzRGlzcGxheU1vZGUsIG1heExlbmd0aDogcXVlc3Rpb24uZ2V0T3RoZXJzTWF4TGVuZ3RoKCksIHBsYWNlaG9sZGVyOiB0aGlzLmdldFBsYWNlaG9sZGVyKCksIG9uQmx1cjogZnVuY3Rpb24gKGUpIHsgX3RoaXMub25Db21tZW50Q2hhbmdlKGUpOyB9LCBvbklucHV0OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMub25Db21tZW50SW5wdXQoZSk7IH0sIFwiYXJpYS1yZXF1aXJlZFwiOiBxdWVzdGlvbi5pc1JlcXVpcmVkIHx8IHF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYVJlcXVpcmVkLCBcImFyaWEtbGFiZWxcIjogcXVlc3Rpb24uYXJpYUxhYmVsIHx8IHF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUxhYmVsLCBzdHlsZTogeyByZXNpemU6IHF1ZXN0aW9uLnJlc2l6ZVN0eWxlIH0gfSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQ29tbWVudEl0ZW07XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG52YXIgU3VydmV5UXVlc3Rpb25PdGhlclZhbHVlSXRlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25PdGhlclZhbHVlSXRlbSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uT3RoZXJWYWx1ZUl0ZW0ucHJvdG90eXBlLm9uQ29tbWVudENoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnByb3BzLnF1ZXN0aW9uLm9uT3RoZXJWYWx1ZUNoYW5nZShldmVudCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtLnByb3RvdHlwZS5vbkNvbW1lbnRJbnB1dCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnByb3BzLnF1ZXN0aW9uLm9uT3RoZXJWYWx1ZUlucHV0KGV2ZW50KTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uT3RoZXJWYWx1ZUl0ZW0ucHJvdG90eXBlLmdldENvbW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uLm90aGVyVmFsdWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtLnByb3RvdHlwZS5zZXRDb21tZW50ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJvcHMucXVlc3Rpb24ub3RoZXJWYWx1ZSA9IHZhbHVlO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25PdGhlclZhbHVlSXRlbS5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uLm90aGVySWQ7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtLnByb3RvdHlwZS5nZXRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucXVlc3Rpb24ub3RoZXJQbGFjZWhvbGRlcjtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbk90aGVyVmFsdWVJdGVtO1xufShTdXJ2ZXlRdWVzdGlvbkNvbW1lbnRJdGVtKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJjb21tZW50XCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkNvbW1lbnQsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fY3VzdG9tLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9jdXN0b20udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbkN1c3RvbSwgU3VydmV5UXVlc3Rpb25Db21wb3NpdGUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25DdXN0b21cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkN1c3RvbTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25Db21wb3NpdGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbiAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb24udHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGFuZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcGFuZWwgKi8gXCIuL3NyYy9yZWFjdC9wYW5lbC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25DdXN0b20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uQ3VzdG9tLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uQ3VzdG9tKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb25DdXN0b20ucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXMgPSBfc3VwZXIucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudHMuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCEhdGhpcy5xdWVzdGlvbi5jb250ZW50UXVlc3Rpb24pIHtcbiAgICAgICAgICAgIHJlcy5wdXNoKHRoaXMucXVlc3Rpb24uY29udGVudFF1ZXN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25DdXN0b20ucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfcmVhY3RxdWVzdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5UXVlc3Rpb25cIl0ucmVuZGVyUXVlc3Rpb25Cb2R5KHRoaXMuY3JlYXRvciwgdGhpcy5xdWVzdGlvbi5jb250ZW50UXVlc3Rpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uQ3VzdG9tO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvblVuY29udHJvbGxlZEVsZW1lbnRcIl0pKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uQ29tcG9zaXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZShwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uQ29tcG9zaXRlLnByb3RvdHlwZS5jYW5SZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMucXVlc3Rpb24uY29udGVudFBhbmVsO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25Db21wb3NpdGUucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3BhbmVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJTdXJ2ZXlQYW5lbFwiXSwgeyBlbGVtZW50OiB0aGlzLnF1ZXN0aW9uLmNvbnRlbnRQYW5lbCwgY3JlYXRvcjogdGhpcy5jcmVhdG9yLCBzdXJ2ZXk6IHRoaXMucXVlc3Rpb24uc3VydmV5IH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkNvbXBvc2l0ZTtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UXVlc3Rpb25VbmNvbnRyb2xsZWRFbGVtZW50XCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJjdXN0b21cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uQ3VzdG9tLCBwcm9wcyk7XG59KTtcbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJjb21wb3NpdGVcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uQ29tcG9zaXRlLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2Ryb3Bkb3duLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2Ryb3Bkb3duLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uRHJvcGRvd25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZHJvcGRvd25fYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9kcm9wZG93bi1iYXNlICovIFwiLi9zcmMvcmVhY3QvZHJvcGRvd24tYmFzZS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uRHJvcGRvd24ocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIGNvbW1lbnQgPSB0aGlzLnF1ZXN0aW9uLmlzT3RoZXJTZWxlY3RlZCA/IHRoaXMucmVuZGVyT3RoZXIoY3NzQ2xhc3NlcykgOiBudWxsO1xuICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5yZW5kZXJTZWxlY3QoY3NzQ2xhc3Nlcyk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24ucmVuZGVyQ3NzUm9vdCB9LFxuICAgICAgICAgICAgc2VsZWN0LFxuICAgICAgICAgICAgY29tbWVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uRHJvcGRvd247XG59KF9kcm9wZG93bl9iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlRdWVzdGlvbkRyb3Bkb3duQmFzZVwiXSkpO1xuXG5fcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclF1ZXN0aW9uKFwiZHJvcGRvd25cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uRHJvcGRvd24sIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5RWxlbWVudEJhc2UsIFJlYWN0U3VydmV5RWxlbWVudCwgU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZSwgU3VydmV5UXVlc3Rpb25VbmNvbnRyb2xsZWRFbGVtZW50ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUVsZW1lbnRCYXNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5RWxlbWVudEJhc2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlJlYWN0U3VydmV5RWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFJlYWN0U3VydmV5RWxlbWVudDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uVW5jb250cm9sbGVkRWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uVW5jb250cm9sbGVkRWxlbWVudDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHN1cnZleW1vZGVsICovIFwiLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleUVsZW1lbnRCYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlFbGVtZW50QmFzZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlFbGVtZW50QmFzZShwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX2FsbG93Q29tcG9uZW50VXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlFbGVtZW50QmFzZS5yZW5kZXJMb2NTdHJpbmcgPSBmdW5jdGlvbiAobG9jU3RyLCBzdHlsZSwga2V5KSB7XG4gICAgICAgIGlmIChzdHlsZSA9PT0gdm9pZCAwKSB7IHN0eWxlID0gbnVsbDsgfVxuICAgICAgICByZXR1cm4gX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KGxvY1N0ci5yZW5kZXJBcywge1xuICAgICAgICAgICAgbG9jU3RyOiBsb2NTdHIucmVuZGVyQXNEYXRhLFxuICAgICAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudEJhc2UucmVuZGVyUXVlc3Rpb25EZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIChxdWVzdGlvbikge1xuICAgICAgICB2YXIgZGVzY3JpcHRpb25UZXh0ID0gU3VydmV5RWxlbWVudEJhc2UucmVuZGVyTG9jU3RyaW5nKHF1ZXN0aW9uLmxvY0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgc3R5bGU6IHF1ZXN0aW9uLmhhc0Rlc2NyaXB0aW9uID8gdW5kZWZpbmVkIDogeyBkaXNwbGF5OiBcIm5vbmVcIiB9LCBpZDogcXVlc3Rpb24uYXJpYURlc2NyaXB0aW9uSWQsIGNsYXNzTmFtZTogcXVlc3Rpb24uY3NzRGVzY3JpcHRpb24gfSwgZGVzY3JpcHRpb25UZXh0KTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5tYWtlQmFzZUVsZW1lbnRzUmVhY3QoKTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51bk1ha2VCYXNlRWxlbWVudHNSZWFjdCgpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudEJhc2UucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICB0aGlzLm1ha2VCYXNlRWxlbWVudHNSZWFjdCgpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudEJhc2UucHJvdG90eXBlLmFsbG93Q29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9hbGxvd0NvbXBvbmVudFVwZGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5kZW55Q29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9hbGxvd0NvbXBvbmVudFVwZGF0ZSA9IGZhbHNlO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudEJhc2UucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5fYWxsb3dDb21wb25lbnRVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMudW5NYWtlQmFzZUVsZW1lbnRzUmVhY3QoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWxsb3dDb21wb25lbnRVcGRhdGU7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50QmFzZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2FuUmVuZGVyKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhcnRFbmRSZW5kZXJpbmcoMSk7XG4gICAgICAgIHZhciByZXMgPSB0aGlzLnJlbmRlckVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5zdGFydEVuZFJlbmRlcmluZygtMSk7XG4gICAgICAgIGlmICghIXJlcykge1xuICAgICAgICAgICAgcmVzID0gdGhpcy53cmFwRWxlbWVudChyZXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZFN0YXRlUHJvcE5hbWVWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS53cmFwRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJpc1JlbmRlcmluZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXRlRWxzID0gdGhpcy5nZXRSZW5kZXJlZEVsZW1lbnRzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHN0YXRlRWxzXzEgPSBzdGF0ZUVsczsgX2kgPCBzdGF0ZUVsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZUVsID0gc3RhdGVFbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlRWwucmVhY3RSZW5kZXJpbmcgPiAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5nZXRSZW5kZXJlZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGF0ZUVsZW1lbnRzKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50QmFzZS5wcm90b3R5cGUuc3RhcnRFbmRSZW5kZXJpbmcgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHZhciBzdGF0ZUVscyA9IHRoaXMuZ2V0UmVuZGVyZWRFbGVtZW50cygpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHN0YXRlRWxzXzIgPSBzdGF0ZUVsczsgX2kgPCBzdGF0ZUVsc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHN0YXRlRWwgPSBzdGF0ZUVsc18yW19pXTtcbiAgICAgICAgICAgIGlmICghc3RhdGVFbC5yZWFjdFJlbmRlcmluZylcbiAgICAgICAgICAgICAgICBzdGF0ZUVsLnJlYWN0UmVuZGVyaW5nID0gMDtcbiAgICAgICAgICAgIHN0YXRlRWwucmVhY3RSZW5kZXJpbmcgKz0gdmFsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50QmFzZS5wcm90b3R5cGUuY2FuUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiY2hhbmdlZFN0YXRlUHJvcE5hbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5nZWRTdGF0ZVByb3BOYW1lVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50QmFzZS5wcm90b3R5cGUubWFrZUJhc2VFbGVtZW50c1JlYWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxzID0gdGhpcy5nZXRTdGF0ZUVsZW1lbnRzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1ha2VCYXNlRWxlbWVudFJlYWN0KGVsc1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS51bk1ha2VCYXNlRWxlbWVudHNSZWFjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVscyA9IHRoaXMuZ2V0U3RhdGVFbGVtZW50cygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy51bk1ha2VCYXNlRWxlbWVudFJlYWN0KGVsc1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLmdldFN0YXRlRWxlbWVudCgpO1xuICAgICAgICByZXR1cm4gISFlbCA/IFtlbF0gOiBbXTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJpc0Rpc3BsYXlNb2RlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzLmlzRGlzcGxheU1vZGUgfHwgZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50QmFzZS5wcm90b3R5cGUucmVuZGVyTG9jU3RyaW5nID0gZnVuY3Rpb24gKGxvY1N0ciwgc3R5bGUsIGtleSkge1xuICAgICAgICBpZiAoc3R5bGUgPT09IHZvaWQgMCkgeyBzdHlsZSA9IG51bGw7IH1cbiAgICAgICAgcmV0dXJuIFN1cnZleUVsZW1lbnRCYXNlLnJlbmRlckxvY1N0cmluZyhsb2NTdHIsIHN0eWxlLCBrZXkpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudEJhc2UucHJvdG90eXBlLmNhbk1ha2VSZWFjdCA9IGZ1bmN0aW9uIChzdGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuICEhc3RhdGVFbGVtZW50ICYmICEhc3RhdGVFbGVtZW50Lml0ZXJhdGVQcm9wZXJ0aWVzSGFzaDtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5tYWtlQmFzZUVsZW1lbnRSZWFjdCA9IGZ1bmN0aW9uIChzdGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLmNhbk1ha2VSZWFjdChzdGF0ZUVsZW1lbnQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzdGF0ZUVsZW1lbnQuaXRlcmF0ZVByb3BlcnRpZXNIYXNoKGZ1bmN0aW9uIChoYXNoLCBrZXkpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuY2FuVXNlUHJvcEluU3RhdGUoa2V5KSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgdmFsID0gaGFzaFtrZXldO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2YWw7XG4gICAgICAgICAgICAgICAgdmFsW1wib25BcnJheUNoYW5nZWRcIl0gPSBmdW5jdGlvbiAoYXJyYXlDaGFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1JlbmRlcmluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2hhbmdlZFN0YXRlUHJvcE5hbWVWYWx1ZSA9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U3RhdGUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzdGF0ZUVsZW1lbnQuc2V0UHJvcGVydHlWYWx1ZUNvcmVIYW5kbGVyID0gZnVuY3Rpb24gKGhhc2gsIGtleSwgdmFsKSB7XG4gICAgICAgICAgICBpZiAoaGFzaFtrZXldICE9PSB2YWwpIHtcbiAgICAgICAgICAgICAgICBoYXNoW2tleV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5jYW5Vc2VQcm9wSW5TdGF0ZShrZXkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUmVuZGVyaW5nKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgX3RoaXMuY2hhbmdlZFN0YXRlUHJvcE5hbWVWYWx1ZSA9IGtleTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1N0YXRlID0ge307XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnRCYXNlLnByb3RvdHlwZS5jYW5Vc2VQcm9wSW5TdGF0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50QmFzZS5wcm90b3R5cGUudW5NYWtlQmFzZUVsZW1lbnRSZWFjdCA9IGZ1bmN0aW9uIChzdGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbk1ha2VSZWFjdChzdGF0ZUVsZW1lbnQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzdGF0ZUVsZW1lbnQuc2V0UHJvcGVydHlWYWx1ZUNvcmVIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICBzdGF0ZUVsZW1lbnQuaXRlcmF0ZVByb3BlcnRpZXNIYXNoKGZ1bmN0aW9uIChoYXNoLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSBoYXNoW2tleV07XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHZhbDtcbiAgICAgICAgICAgICAgICB2YWxbXCJvbkFycmF5Q2hhbmdlZFwiXSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5RWxlbWVudEJhc2U7XG59KHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJDb21wb25lbnRcIl0pKTtcblxudmFyIFJlYWN0U3VydmV5RWxlbWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVhY3RTdXJ2ZXlFbGVtZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlYWN0U3VydmV5RWxlbWVudChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFjdFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImNzc0NsYXNzZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNzc0NsYXNzZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUmVhY3RTdXJ2ZXlFbGVtZW50O1xufShTdXJ2ZXlFbGVtZW50QmFzZSkpO1xuXG52YXIgU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZS5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlLmNhbGwodGhpcywgcHJldlByb3BzLCBwcmV2U3RhdGUpO1xuICAgICAgICB0aGlzLnVwZGF0ZURvbUVsZW1lbnQoKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2UucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlRG9tRWxlbWVudCgpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCEhdGhpcy5xdWVzdGlvbkJhc2UpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuY29udHJvbDtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25CYXNlLmJlZm9yZURlc3Ryb3lRdWVzdGlvbkVsZW1lbnQoZWwpO1xuICAgICAgICAgICAgaWYgKCEhZWwpIHtcbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXJlbmRlcmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlLnByb3RvdHlwZS51cGRhdGVEb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzLmNvbnRyb2w7XG4gICAgICAgIGlmICghIWVsKSB7XG4gICAgICAgICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1yZW5kZXJlZFwiKSAhPT0gXCJyXCIpIHtcbiAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJlbmRlcmVkXCIsIFwiclwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uQmFzZS5hZnRlclJlbmRlclF1ZXN0aW9uRWxlbWVudChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJxdWVzdGlvbkJhc2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZS5wcm90b3R5cGUuZ2V0UmVuZGVyZWRFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLnF1ZXN0aW9uQmFzZV07XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiY3JlYXRvclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY3JlYXRvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2UucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5xdWVzdGlvbkJhc2UgJiYgISF0aGlzLmNyZWF0b3I7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlLnByb3RvdHlwZS5zaG91bGRDb21wb25lbnRVcGRhdGUgPSBmdW5jdGlvbiAobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgaWYgKCFfc3VwZXIucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZS5jYWxsKHRoaXMsIG5leHRQcm9wcywgbmV4dFN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuICghdGhpcy5xdWVzdGlvbkJhc2UuY3VzdG9tV2lkZ2V0IHx8XG4gICAgICAgICAgICAhIXRoaXMucXVlc3Rpb25CYXNlLmN1c3RvbVdpZGdldERhdGEuaXNOZWVkUmVuZGVyIHx8XG4gICAgICAgICAgICAhIXRoaXMucXVlc3Rpb25CYXNlLmN1c3RvbVdpZGdldC53aWRnZXRKc29uLmlzRGVmYXVsdFJlbmRlciB8fFxuICAgICAgICAgICAgISF0aGlzLnF1ZXN0aW9uQmFzZS5jdXN0b21XaWRnZXQud2lkZ2V0SnNvbi5yZW5kZXIpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImlzRGlzcGxheU1vZGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICByZXR1cm4gKHByb3BzLmlzRGlzcGxheU1vZGUgfHxcbiAgICAgICAgICAgICAgICAoISF0aGlzLnF1ZXN0aW9uQmFzZSAmJiB0aGlzLnF1ZXN0aW9uQmFzZS5pc0lucHV0UmVhZE9ubHkpIHx8IGZhbHNlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2UucHJvdG90eXBlLndyYXBDZWxsID0gZnVuY3Rpb24gKGNlbGwsIGVsZW1lbnQsIHJlYXNvbikge1xuICAgICAgICBpZiAoIXJlYXNvbikge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMucXVlc3Rpb25CYXNlXG4gICAgICAgICAgICAuc3VydmV5O1xuICAgICAgICB2YXIgd3JhcHBlciA9IG51bGw7XG4gICAgICAgIGlmIChzdXJ2ZXkpIHtcbiAgICAgICAgICAgIHdyYXBwZXIgPSBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXJcIl0ud3JhcE1hdHJpeENlbGwoc3VydmV5LCBlbGVtZW50LCBjZWxsLCByZWFzb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cmFwcGVyICE9PSBudWxsICYmIHdyYXBwZXIgIT09IHZvaWQgMCA/IHdyYXBwZXIgOiBlbGVtZW50O1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZS5wcm90b3R5cGUuc2V0Q29udHJvbCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmICghIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbCA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlO1xufShTdXJ2ZXlFbGVtZW50QmFzZSkpO1xuXG52YXIgU3VydmV5UXVlc3Rpb25VbmNvbnRyb2xsZWRFbGVtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblVuY29udHJvbGxlZEVsZW1lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25VbmNvbnRyb2xsZWRFbGVtZW50KHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy51cGRhdGVWYWx1ZU9uRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkhlbHBlcnNcIl0uaXNUd29WYWx1ZUVxdWFscyhfdGhpcy5xdWVzdGlvbkJhc2UudmFsdWUsIGV2ZW50LnRhcmdldC52YWx1ZSwgZmFsc2UsIHRydWUsIGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnNldFZhbHVlQ29yZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBfdGhpcy51cGRhdGVWYWx1ZU9uRXZlbnQgPSBfdGhpcy51cGRhdGVWYWx1ZU9uRXZlbnQuYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uVW5jb250cm9sbGVkRWxlbWVudC5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uVW5jb250cm9sbGVkRWxlbWVudC5wcm90b3R5cGUuc2V0VmFsdWVDb3JlID0gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMucXVlc3Rpb25CYXNlLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblVuY29udHJvbGxlZEVsZW1lbnQucHJvdG90eXBlLmdldFZhbHVlQ29yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25CYXNlLnZhbHVlO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25VbmNvbnRyb2xsZWRFbGVtZW50LnByb3RvdHlwZS51cGRhdGVEb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISF0aGlzLmNvbnRyb2wpIHtcbiAgICAgICAgICAgIHZhciBjb250cm9sID0gdGhpcy5jb250cm9sO1xuICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gdGhpcy5nZXRWYWx1ZUNvcmUoKTtcbiAgICAgICAgICAgIGlmICghc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkhlbHBlcnNcIl0uaXNUd29WYWx1ZUVxdWFscyhuZXdWYWx1ZSwgY29udHJvbC52YWx1ZSwgZmFsc2UsIHRydWUsIGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2wudmFsdWUgPSB0aGlzLmdldFZhbHVlKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZURvbUVsZW1lbnQuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uVW5jb250cm9sbGVkRWxlbWVudC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmIChzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiSGVscGVyc1wiXS5pc1ZhbHVlRW1wdHkodmFsKSlcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uVW5jb250cm9sbGVkRWxlbWVudDtcbn0oU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZSkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbXB0eS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbXB0eS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25FbXB0eSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbkVtcHR5XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25FbXB0eTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25FbXB0eSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25FbXB0eSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkVtcHR5KHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHsgdmFsdWU6IF90aGlzLnF1ZXN0aW9uLnZhbHVlIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uRW1wdHkucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbkJhc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkVtcHR5LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgbnVsbCk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25FbXB0eTtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZVwiXSkpO1xuXG5fcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclF1ZXN0aW9uKFwiZW1wdHlcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uRW1wdHksIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZXhwcmVzc2lvbi50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2V4cHJlc3Npb24udHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25FeHByZXNzaW9uICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uRXhwcmVzc2lvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uRXhwcmVzc2lvbjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25FeHByZXNzaW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkV4cHJlc3Npb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25FeHByZXNzaW9uKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uRXhwcmVzc2lvbi5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uRXhwcmVzc2lvbi5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBpZDogdGhpcy5xdWVzdGlvbi5pbnB1dElkLCBjbGFzc05hbWU6IGNzc0NsYXNzZXMucm9vdCwgcmVmOiBmdW5jdGlvbiAoZGl2KSB7IHJldHVybiAoX3RoaXMuc2V0Q29udHJvbChkaXYpKTsgfSB9LCB0aGlzLnF1ZXN0aW9uLmZvcm1hdGVkVmFsdWUpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkV4cHJlc3Npb247XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcImV4cHJlc3Npb25cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uRXhwcmVzc2lvbiwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBSZWFjdFF1ZXN0aW9uRmFjdG9yeSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFJlYWN0UXVlc3Rpb25GYWN0b3J5OyB9KTtcbnZhciBSZWFjdFF1ZXN0aW9uRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWFjdFF1ZXN0aW9uRmFjdG9yeSgpIHtcbiAgICAgICAgdGhpcy5jcmVhdG9ySGFzaCA9IHt9O1xuICAgIH1cbiAgICBSZWFjdFF1ZXN0aW9uRmFjdG9yeS5wcm90b3R5cGUucmVnaXN0ZXJRdWVzdGlvbiA9IGZ1bmN0aW9uIChxdWVzdGlvblR5cGUsIHF1ZXN0aW9uQ3JlYXRvcikge1xuICAgICAgICB0aGlzLmNyZWF0b3JIYXNoW3F1ZXN0aW9uVHlwZV0gPSBxdWVzdGlvbkNyZWF0b3I7XG4gICAgfTtcbiAgICBSZWFjdFF1ZXN0aW9uRmFjdG9yeS5wcm90b3R5cGUuZ2V0QWxsVHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY3JlYXRvckhhc2gpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5zb3J0KCk7XG4gICAgfTtcbiAgICBSZWFjdFF1ZXN0aW9uRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlUXVlc3Rpb24gPSBmdW5jdGlvbiAocXVlc3Rpb25UeXBlLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIGNyZWF0b3IgPSB0aGlzLmNyZWF0b3JIYXNoW3F1ZXN0aW9uVHlwZV07XG4gICAgICAgIGlmIChjcmVhdG9yID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIGNyZWF0b3IocGFyYW1zKTtcbiAgICB9O1xuICAgIFJlYWN0UXVlc3Rpb25GYWN0b3J5Lkluc3RhbmNlID0gbmV3IFJlYWN0UXVlc3Rpb25GYWN0b3J5KCk7XG4gICAgcmV0dXJuIFJlYWN0UXVlc3Rpb25GYWN0b3J5O1xufSgpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmlsZS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZpbGUudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25GaWxlICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uRmlsZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uRmlsZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19hY3Rpb25fYmFyX2FjdGlvbl9iYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfbG9hZGluZ19pbmRpY2F0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9sb2FkaW5nLWluZGljYXRvciAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbG9hZGluZy1pbmRpY2F0b3IudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyLWl0ZW0gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci1pdGVtLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW50cmllc19yZWFjdF91aV9tb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW50cmllcy9yZWFjdC11aS1tb2RlbCAqLyBcIi4vc3JjL2VudHJpZXMvcmVhY3QtdWktbW9kZWwudHNcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25GaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbkZpbGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25GaWxlKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uRmlsZS5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uRmlsZS5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHByZXZpZXcgPSB0aGlzLnF1ZXN0aW9uLmFsbG93U2hvd1ByZXZpZXcgPyB0aGlzLnJlbmRlclByZXZpZXcoKSA6IG51bGw7XG4gICAgICAgIHZhciBsb2FkaW5nSW5kaWNhdG9yID0gdGhpcy5xdWVzdGlvbi5zaG93TG9hZGluZ0luZGljYXRvciA/IHRoaXMucmVuZGVyTG9hZGluZ0luZGljYXRvcigpIDogbnVsbDtcbiAgICAgICAgdmFyIHZpZGVvID0gdGhpcy5xdWVzdGlvbi5pc1BsYXlpbmdWaWRlbyA/IHRoaXMucmVuZGVyVmlkZW8oKSA6IG51bGw7XG4gICAgICAgIHZhciBmaWxlRGVjb3JhdG9yID0gdGhpcy5xdWVzdGlvbi5zaG93RmlsZURlY29yYXRvciA/IHRoaXMucmVuZGVyRmlsZURlY29yYXRvcigpIDogbnVsbDtcbiAgICAgICAgdmFyIGNsZWFyQnV0dG9uID0gdGhpcy5xdWVzdGlvbi5zaG93UmVtb3ZlQnV0dG9uID8gdGhpcy5yZW5kZXJDbGVhckJ1dHRvbih0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucmVtb3ZlQnV0dG9uKSA6IG51bGw7XG4gICAgICAgIHZhciBjbGVhckJ1dHRvbkJvdHRvbSA9IHRoaXMucXVlc3Rpb24uc2hvd1JlbW92ZUJ1dHRvbkJvdHRvbSA/IHRoaXMucmVuZGVyQ2xlYXJCdXR0b24odGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnJlbW92ZUJ1dHRvbkJvdHRvbSkgOiBudWxsO1xuICAgICAgICB2YXIgZmlsZU5hdmlnYXRvciA9IHRoaXMucXVlc3Rpb24uZmlsZU5hdmlnYXRvclZpc2libGUgPyAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfYWN0aW9uX2Jhcl9hY3Rpb25fYmFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlBY3Rpb25CYXJcIl0sIHsgbW9kZWw6IHRoaXMucXVlc3Rpb24uZmlsZU5hdmlnYXRvciB9KSkgOiBudWxsO1xuICAgICAgICB2YXIgZmlsZUlucHV0ID0gKHRoaXMuaXNEaXNwbGF5TW9kZSA/XG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImlucHV0XCIsIHsgdHlwZTogXCJmaWxlXCIsIGRpc2FibGVkOiB0aGlzLmlzRGlzcGxheU1vZGUsIGNsYXNzTmFtZTogIXRoaXMuaXNEaXNwbGF5TW9kZSA/IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5maWxlSW5wdXQgOiB0aGlzLnF1ZXN0aW9uLmdldFJlYWRPbmx5RmlsZUNzcygpLCBpZDogdGhpcy5xdWVzdGlvbi5pbnB1dElkLCByZWY6IGZ1bmN0aW9uIChpbnB1dCkgeyByZXR1cm4gKF90aGlzLnNldENvbnRyb2woaW5wdXQpKTsgfSwgc3R5bGU6ICF0aGlzLmlzRGlzcGxheU1vZGUgPyB7fSA6IHsgY29sb3I6IFwidHJhbnNwYXJlbnRcIiB9LCBtdWx0aXBsZTogdGhpcy5xdWVzdGlvbi5hbGxvd011bHRpcGxlLCBwbGFjZWhvbGRlcjogdGhpcy5xdWVzdGlvbi50aXRsZSwgYWNjZXB0OiB0aGlzLnF1ZXN0aW9uLmFjY2VwdGVkVHlwZXMgfSkgOiB0aGlzLnF1ZXN0aW9uLmhhc0ZpbGVVSSA/XG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImlucHV0XCIsIHsgdHlwZTogXCJmaWxlXCIsIGRpc2FibGVkOiB0aGlzLmlzRGlzcGxheU1vZGUsIHRhYkluZGV4OiAtMSwgY2xhc3NOYW1lOiAhdGhpcy5pc0Rpc3BsYXlNb2RlID8gdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmZpbGVJbnB1dCA6IHRoaXMucXVlc3Rpb24uZ2V0UmVhZE9ubHlGaWxlQ3NzKCksIGlkOiB0aGlzLnF1ZXN0aW9uLmlucHV0SWQsIHJlZjogZnVuY3Rpb24gKGlucHV0KSB7IHJldHVybiAoX3RoaXMuc2V0Q29udHJvbChpbnB1dCkpOyB9LCBzdHlsZTogIXRoaXMuaXNEaXNwbGF5TW9kZSA/IHt9IDogeyBjb2xvcjogXCJ0cmFuc3BhcmVudFwiIH0sIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMucXVlc3Rpb24uYXJpYUxhYmVsLCBcImFyaWEtaW52YWxpZFwiOiB0aGlzLnF1ZXN0aW9uLmFyaWFJbnZhbGlkLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYXJpYUVycm9ybWVzc2FnZSwgbXVsdGlwbGU6IHRoaXMucXVlc3Rpb24uYWxsb3dNdWx0aXBsZSwgdGl0bGU6IHRoaXMucXVlc3Rpb24uaW5wdXRUaXRsZSwgYWNjZXB0OiB0aGlzLnF1ZXN0aW9uLmFjY2VwdGVkVHlwZXMsIGNhcHR1cmU6IHRoaXMucXVlc3Rpb24ucmVuZGVyQ2FwdHVyZSB9KSA6IG51bGwpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmZpbGVSb290Q3NzIH0sXG4gICAgICAgICAgICBmaWxlSW5wdXQsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmRyYWdBcmVhLCBvbkRyb3A6IHRoaXMucXVlc3Rpb24ub25Ecm9wLCBvbkRyYWdPdmVyOiB0aGlzLnF1ZXN0aW9uLm9uRHJhZ092ZXIsIG9uRHJhZ0xlYXZlOiB0aGlzLnF1ZXN0aW9uLm9uRHJhZ0xlYXZlLCBvbkRyYWdFbnRlcjogdGhpcy5xdWVzdGlvbi5vbkRyYWdFbnRlciB9LFxuICAgICAgICAgICAgICAgIGZpbGVEZWNvcmF0b3IsXG4gICAgICAgICAgICAgICAgbG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgICAgICAgICB2aWRlbyxcbiAgICAgICAgICAgICAgICBjbGVhckJ1dHRvbixcbiAgICAgICAgICAgICAgICBwcmV2aWV3LFxuICAgICAgICAgICAgICAgIGNsZWFyQnV0dG9uQm90dG9tLFxuICAgICAgICAgICAgICAgIGZpbGVOYXZpZ2F0b3IpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbkZpbGUucHJvdG90eXBlLnJlbmRlckZpbGVEZWNvcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjaG9vc2VCdXR0b24gPSB0aGlzLnF1ZXN0aW9uLnNob3dDaG9vc2VCdXR0b24gPyB0aGlzLnJlbmRlckNob29zZUJ1dHRvbigpIDogbnVsbDtcbiAgICAgICAgdmFyIGFjdGlvbnNDb250YWluZXIgPSB0aGlzLnF1ZXN0aW9uLmFjdGlvbnNDb250YWluZXJWaXNpYmxlID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfYWN0aW9uX2Jhcl9hY3Rpb25fYmFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlBY3Rpb25CYXJcIl0sIHsgbW9kZWw6IHRoaXMucXVlc3Rpb24uYWN0aW9uc0NvbnRhaW5lciB9KSA6IG51bGw7XG4gICAgICAgIHZhciBub0ZpbGVDaG9zZW4gPSB0aGlzLnF1ZXN0aW9uLmlzRW1wdHkoKSA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5ub0ZpbGVDaG9zZW4gfSwgdGhpcy5xdWVzdGlvbi5ub0ZpbGVDaG9zZW5DYXB0aW9uKSkgOiBudWxsO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldEZpbGVEZWNvcmF0b3JDc3MoKSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuZHJhZ0FyZWFQbGFjZWhvbGRlciB9LCB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY1JlbmRlcmVkUGxhY2Vob2xkZXIpKSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMud3JhcHBlciB9LFxuICAgICAgICAgICAgICAgIGNob29zZUJ1dHRvbixcbiAgICAgICAgICAgICAgICBhY3Rpb25zQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgIG5vRmlsZUNob3NlbikpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uRmlsZS5wcm90b3R5cGUucmVuZGVyQ2hvb3NlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2VudHJpZXNfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcIlN1cnZleUZpbGVDaG9vc2VCdXR0b25cIl0sIHsgZGF0YTogeyBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiB9IH0pO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25GaWxlLnByb3RvdHlwZS5yZW5kZXJDbGVhckJ1dHRvbiA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLnF1ZXN0aW9uLmlzVXBsb2FkaW5nID8gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgb25DbGljazogdGhpcy5xdWVzdGlvbi5kb0NsZWFuLCBjbGFzc05hbWU6IGNsYXNzTmFtZSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIG51bGwsIHRoaXMucXVlc3Rpb24uY2xlYXJCdXR0b25DYXB0aW9uKSxcbiAgICAgICAgICAgICghIXRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5yZW1vdmVCdXR0b25JY29uSWQpID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN2Z0ljb25cIl0sIHsgaWNvbk5hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5yZW1vdmVCdXR0b25JY29uSWQsIHNpemU6IFwiYXV0b1wiLCB0aXRsZTogdGhpcy5xdWVzdGlvbi5jbGVhckJ1dHRvbkNhcHRpb24gfSkgOiBudWxsKSkgOiBudWxsO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25GaWxlLnByb3RvdHlwZS5yZW5kZXJQcmV2aWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2VudHJpZXNfcmVhY3RfdWlfbW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UuY3JlYXRlRWxlbWVudChcInN2LWZpbGUtcHJldmlld1wiLCB7IHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uIH0pO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25GaWxlLnByb3RvdHlwZS5yZW5kZXJMb2FkaW5nSW5kaWNhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5sb2FkaW5nSW5kaWNhdG9yIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19sb2FkaW5nX2luZGljYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiTG9hZGluZ0luZGljYXRvckNvbXBvbmVudFwiXSwgbnVsbCkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25GaWxlLnByb3RvdHlwZS5yZW5kZXJWaWRlbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnZpZGVvQ29udGFpbmVyIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19hY3Rpb25fYmFyX2FjdGlvbl9iYXJfaXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiU3VydmV5QWN0aW9uXCJdLCB7IGl0ZW06IHRoaXMucXVlc3Rpb24uY2hhbmdlQ2FtZXJhQWN0aW9uIH0pLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfYWN0aW9uX2Jhcl9hY3Rpb25fYmFyX2l0ZW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcIlN1cnZleUFjdGlvblwiXSwgeyBpdGVtOiB0aGlzLnF1ZXN0aW9uLmNsb3NlQ2FtZXJhQWN0aW9uIH0pLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ2aWRlb1wiLCB7IGF1dG9QbGF5OiB0cnVlLCBwbGF5c0lubGluZTogdHJ1ZSwgaWQ6IHRoaXMucXVlc3Rpb24udmlkZW9JZCwgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMudmlkZW8gfSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19hY3Rpb25fYmFyX2FjdGlvbl9iYXJfaXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiU3VydmV5QWN0aW9uXCJdLCB7IGl0ZW06IHRoaXMucXVlc3Rpb24udGFrZVBpY3R1cmVBY3Rpb24gfSkpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkZpbGU7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcImZpbGVcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uRmlsZSwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9odG1sLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25faHRtbC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbkh0bWwgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25IdG1sXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25IdG1sOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvbkh0bWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uSHRtbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbkh0bWwocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25IdG1sLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25CYXNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25IdG1sLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZWFjdE9uU3RyQ2hhbmdlZCgpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25IdG1sLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5sb2NIdG1sLm9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uSHRtbC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIHRoaXMucmVhY3RPblN0ckNoYW5nZWQoKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uSHRtbC5wcm90b3R5cGUucmVhY3RPblN0ckNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMucXVlc3Rpb24ubG9jSHRtbC5vbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNoYW5nZWQ6ICEhX3RoaXMuc3RhdGUgJiYgX3RoaXMuc3RhdGUuY2hhbmdlZCA/IF90aGlzLnN0YXRlLmNoYW5nZWQgKyAxIDogMSB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uSHRtbC5wcm90b3R5cGUuY2FuUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jYW5SZW5kZXIuY2FsbCh0aGlzKSAmJiAhIXRoaXMucXVlc3Rpb24uaHRtbDtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uSHRtbC5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGh0bWxWYWx1ZSA9IHsgX19odG1sOiB0aGlzLnF1ZXN0aW9uLmxvY0h0bWwucmVuZGVyZWRIdG1sIH07XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24ucmVuZGVyQ3NzUm9vdCwgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IGh0bWxWYWx1ZSB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25IdG1sO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJodG1sXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbkh0bWwsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fbWF0cml4LnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9tYXRyaXgudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeCwgU3VydmV5UXVlc3Rpb25NYXRyaXhSb3csIFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uTWF0cml4OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeFJvd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uTWF0cml4Um93OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeENlbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeENlbGw7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHN1cnZleW1vZGVsICovIFwiLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbk1hdHJpeCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7IHJvd3NDaGFuZ2VkOiAwIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uTWF0cml4LnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25CYXNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXgucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLnZpc2libGVSb3dzQ2hhbmdlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0U3RhdGUoeyByb3dzQ2hhbmdlZDogc2VsZi5zdGF0ZS5yb3dzQ2hhbmdlZCArIDEgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb24udmlzaWJsZVJvd3NDaGFuZ2VkQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeC5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHZhciByb3dzVEggPSB0aGlzLnF1ZXN0aW9uLmhhc1Jvd3MgPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRkXCIsIG51bGwpIDogbnVsbDtcbiAgICAgICAgdmFyIGhlYWRlcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnF1ZXN0aW9uLnZpc2libGVDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5xdWVzdGlvbi52aXNpYmxlQ29sdW1uc1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBcImNvbHVtblwiICsgaTtcbiAgICAgICAgICAgIHZhciBjb2x1bVRleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyhjb2x1bW4ubG9jVGV4dCk7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIGlmICghIXRoaXMucXVlc3Rpb24uY29sdW1uTWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5taW5XaWR0aCA9IHRoaXMucXVlc3Rpb24uY29sdW1uTWluV2lkdGg7XG4gICAgICAgICAgICAgICAgc3R5bGUud2lkdGggPSB0aGlzLnF1ZXN0aW9uLmNvbHVtbk1pbldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhZGVycy5wdXNoKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidGhcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5oZWFkZXJDZWxsLCBzdHlsZTogc3R5bGUsIGtleToga2V5IH0sIHRoaXMud3JhcENlbGwoeyBjb2x1bW46IGNvbHVtbiB9LCBjb2x1bVRleHQsIFwiY29sdW1uLWhlYWRlclwiKSkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgIHZhciB2aXNpYmxlUm93cyA9IHRoaXMucXVlc3Rpb24udmlzaWJsZVJvd3M7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlzaWJsZVJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByb3cgPSB2aXNpYmxlUm93c1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBcInJvdy1cIiArIHJvdy5uYW1lICsgXCItXCIgKyBpO1xuICAgICAgICAgICAgcm93cy5wdXNoKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uTWF0cml4Um93LCB7IGtleToga2V5LCBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiwgY3NzQ2xhc3NlczogY3NzQ2xhc3Nlcywgcm93OiByb3csIGlzRmlyc3Q6IGkgPT0gMCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhlYWRlciA9ICF0aGlzLnF1ZXN0aW9uLnNob3dIZWFkZXIgPyBudWxsIDogKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidGhlYWRcIiwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidHJcIiwgbnVsbCxcbiAgICAgICAgICAgICAgICByb3dzVEgsXG4gICAgICAgICAgICAgICAgaGVhZGVycykpKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy50YWJsZVdyYXBwZXIsIHJlZjogZnVuY3Rpb24gKHJvb3QpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKHJvb3QpKTsgfSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJmaWVsZHNldFwiLCBudWxsLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwibGVnZW5kXCIsIHsgY2xhc3NOYW1lOiBcInN2LWhpZGRlblwiIH0sIHRoaXMucXVlc3Rpb24ubG9jVGl0bGUucmVuZGVyZWRIdG1sKSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldFRhYmxlQ3NzKCkgfSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRib2R5XCIsIG51bGwsIHJvd3MpKSkpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeDtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZVwiXSkpO1xuXG52YXIgU3VydmV5UXVlc3Rpb25NYXRyaXhSb3cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uTWF0cml4Um93LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uTWF0cml4Um93KHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhSb3cucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5yb3cpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3cuaXRlbTtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50LmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhSb3cucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5xdWVzdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeFJvdy5wcm90b3R5cGUsIFwicm93XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5yb3c7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeFJvdy5wcm90b3R5cGUud3JhcENlbGwgPSBmdW5jdGlvbiAoY2VsbCwgZWxlbWVudCwgcmVhc29uKSB7XG4gICAgICAgIGlmICghcmVhc29uKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3VydmV5ID0gdGhpcy5xdWVzdGlvbi5zdXJ2ZXk7XG4gICAgICAgIHZhciB3cmFwcGVyID0gbnVsbDtcbiAgICAgICAgaWYgKHN1cnZleSkge1xuICAgICAgICAgICAgd3JhcHBlciA9IF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlclwiXS53cmFwTWF0cml4Q2VsbChzdXJ2ZXksIGVsZW1lbnQsIGNlbGwsIHJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZXIgIT09IG51bGwgJiYgd3JhcHBlciAhPT0gdm9pZCAwID8gd3JhcHBlciA6IGVsZW1lbnQ7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeFJvdy5wcm90b3R5cGUuY2FuUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnJvdztcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4Um93LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcm93c1REID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24uaGFzUm93cykge1xuICAgICAgICAgICAgdmFyIHJvd1RleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnJvdy5sb2NUZXh0KTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5xdWVzdGlvbi5yb3dUaXRsZVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUubWluV2lkdGggPSB0aGlzLnF1ZXN0aW9uLnJvd1RpdGxlV2lkdGg7XG4gICAgICAgICAgICAgICAgc3R5bGUud2lkdGggPSB0aGlzLnF1ZXN0aW9uLnJvd1RpdGxlV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzVEQgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRkXCIsIHsgc3R5bGU6IHN0eWxlLCBjbGFzc05hbWU6IHRoaXMucm93LnJvd1RleHRDbGFzc2VzIH0sIHRoaXMud3JhcENlbGwoeyByb3c6IHRoaXMucm93IH0sIHJvd1RleHQsIFwicm93LWhlYWRlclwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRkcyA9IHRoaXMuZ2VuZXJhdGVUZHMoKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRyXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnJvdy5yb3dDbGFzc2VzIHx8IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgcm93c1RELFxuICAgICAgICAgICAgdGRzKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeFJvdy5wcm90b3R5cGUuZ2VuZXJhdGVUZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciB0ZHMgPSBbXTtcbiAgICAgICAgdmFyIHJvdyA9IHRoaXMucm93O1xuICAgICAgICB2YXIgY2VsbENvbXBvbmVudCA9IHRoaXMucXVlc3Rpb24uY2VsbENvbXBvbmVudDtcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGQgPSBudWxsO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXNfMS5xdWVzdGlvbi52aXNpYmxlQ29sdW1uc1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBcInZhbHVlXCIgKyBpO1xuICAgICAgICAgICAgdmFyIGl0ZW1DbGFzcyA9IHRoaXNfMS5xdWVzdGlvbi5nZXRJdGVtQ2xhc3Mocm93LCBjb2x1bW4pO1xuICAgICAgICAgICAgaWYgKHRoaXNfMS5xdWVzdGlvbi5oYXNDZWxsVGV4dCkge1xuICAgICAgICAgICAgICAgIHZhciBnZXRIYW5kbGVyID0gZnVuY3Rpb24gKGNvbHVtbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2VsbENsaWNrKHJvdywgY29sdW1uKTsgfTsgfTtcbiAgICAgICAgICAgICAgICB0ZCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRkXCIsIHsga2V5OiBrZXksIGNsYXNzTmFtZTogaXRlbUNsYXNzLCBvbkNsaWNrOiBnZXRIYW5kbGVyID8gZ2V0SGFuZGxlcihjb2x1bW4pIDogZnVuY3Rpb24gKCkgeyB9IH0sIHRoaXNfMS5yZW5kZXJMb2NTdHJpbmcodGhpc18xLnF1ZXN0aW9uLmdldENlbGxEaXNwbGF5TG9jVGV4dChyb3cubmFtZSwgY29sdW1uKSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJlZENlbGwgPSBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY2VsbENvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbjogdGhpc18xLnF1ZXN0aW9uLFxuICAgICAgICAgICAgICAgICAgICByb3c6IHRoaXNfMS5yb3csXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5JbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3NlczogdGhpc18xLmNzc0NsYXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIGNlbGxDaGFuZ2VkOiBmdW5jdGlvbiAoKSB7IF90aGlzLmNlbGxDbGljayhfdGhpcy5yb3csIGNvbHVtbik7IH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ZCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRkXCIsIHsga2V5OiBrZXksIFwiZGF0YS1yZXNwb25zaXZlLXRpdGxlXCI6IGNvbHVtbi5sb2NUZXh0LnJlbmRlcmVkSHRtbCwgY2xhc3NOYW1lOiB0aGlzXzEucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jZWxsIH0sIHJlbmRlcmVkQ2VsbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGRzLnB1c2godGQpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnF1ZXN0aW9uLnZpc2libGVDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBfbG9vcF8xKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRkcztcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4Um93LnByb3RvdHlwZS5jZWxsQ2xpY2sgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHtcbiAgICAgICAgcm93LnZhbHVlID0gY29sdW1uLnZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdmFsdWU6IHRoaXMucm93LnZhbHVlIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uTWF0cml4Um93O1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25NYXRyaXhDZWxsLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25Nb3VzZURvd24gPSBfdGhpcy5oYW5kbGVPbk1vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlT25DaGFuZ2UgPSBfdGhpcy5oYW5kbGVPbkNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeENlbGwucHJvdG90eXBlLmhhbmRsZU9uQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghIXRoaXMucHJvcHMuY2VsbENoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY2VsbENoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhDZWxsLnByb3RvdHlwZS5oYW5kbGVPbk1vdXNlRG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLm9uTW91c2VEb3duKCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhDZWxsLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucXVlc3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhDZWxsLnByb3RvdHlwZSwgXCJyb3dcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnJvdztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeENlbGwucHJvdG90eXBlLCBcImNvbHVtblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY29sdW1uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbC5wcm90b3R5cGUsIFwiY29sdW1uSW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNvbHVtbkluZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhDZWxsLnByb3RvdHlwZS5jYW5SZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMucXVlc3Rpb24gJiYgISF0aGlzLnJvdztcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbC5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IHRoaXMucm93LnZhbHVlID09IHRoaXMuY29sdW1uLnZhbHVlO1xuICAgICAgICB2YXIgaW5wdXRJZCA9IHRoaXMucXVlc3Rpb24uaW5wdXRJZCArIFwiX1wiICsgdGhpcy5yb3cubmFtZSArIFwiX1wiICsgdGhpcy5jb2x1bW5JbmRleDtcbiAgICAgICAgdmFyIGl0ZW1DbGFzcyA9IHRoaXMucXVlc3Rpb24uZ2V0SXRlbUNsYXNzKHRoaXMucm93LCB0aGlzLmNvbHVtbik7XG4gICAgICAgIHZhciBtb2JpbGVTcGFuID0gdGhpcy5xdWVzdGlvbi5pc01vYmlsZSA/XG4gICAgICAgICAgICAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuY2VsbFJlc3BvbnNpdmVUaXRsZSB9LCB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLmNvbHVtbi5sb2NUZXh0KSkpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImxhYmVsXCIsIHsgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlT25Nb3VzZURvd24sIGNsYXNzTmFtZTogaXRlbUNsYXNzIH0sXG4gICAgICAgICAgICB0aGlzLnJlbmRlcklucHV0KGlucHV0SWQsIGlzQ2hlY2tlZCksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5tYXRlcmlhbERlY29yYXRvciB9LCB0aGlzLnF1ZXN0aW9uLml0ZW1TdmdJY29uID9cbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInN2Z1wiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3NDbGFzc2VzLml0ZW1EZWNvcmF0b3IgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ1c2VcIiwgeyB4bGlua0hyZWY6IHRoaXMucXVlc3Rpb24uaXRlbVN2Z0ljb24gfSkpIDpcbiAgICAgICAgICAgICAgICBudWxsKSxcbiAgICAgICAgICAgIG1vYmlsZVNwYW4pKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbC5wcm90b3R5cGUucmVuZGVySW5wdXQgPSBmdW5jdGlvbiAoaW5wdXRJZCwgaXNDaGVja2VkKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJpbnB1dFwiLCB7IGlkOiBpbnB1dElkLCB0eXBlOiBcInJhZGlvXCIsIGNsYXNzTmFtZTogdGhpcy5jc3NDbGFzc2VzLml0ZW1WYWx1ZSwgbmFtZTogdGhpcy5yb3cuZnVsbE5hbWUsIHZhbHVlOiB0aGlzLmNvbHVtbi52YWx1ZSwgZGlzYWJsZWQ6IHRoaXMucm93LmlzUmVhZE9ubHksIGNoZWNrZWQ6IGlzQ2hlY2tlZCwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlT25DaGFuZ2UsIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYVJlcXVpcmVkLCBcImFyaWEtbGFiZWxcIjogdGhpcy5xdWVzdGlvbi5nZXRDZWxsQXJpYUxhYmVsKHRoaXMucm93LmxvY1RleHQucmVuZGVyZWRIdG1sLCB0aGlzLmNvbHVtbi5sb2NUZXh0LnJlbmRlcmVkSHRtbCksIFwiYXJpYS1pbnZhbGlkXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhSW52YWxpZCwgXCJhcmlhLWVycm9ybWVzc2FnZVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUVycm9ybWVzc2FnZSB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhDZWxsO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoXCJzdXJ2ZXktbWF0cml4LWNlbGxcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uTWF0cml4Q2VsbCwgcHJvcHMpO1xufSk7XG5fcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclF1ZXN0aW9uKFwibWF0cml4XCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbk1hdHJpeCwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9tYXRyaXhkcm9wZG93bi50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9tYXRyaXhkcm9wZG93bi50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93biAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9tYXRyaXhkcm9wZG93bmJhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9tYXRyaXhkcm9wZG93bmJhc2UgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duYmFzZS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93biA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93biwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd247XG59KF9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2VcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcIm1hdHJpeGRyb3Bkb3duXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duYmFzZS50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fbWF0cml4ZHJvcGRvd25iYXNlLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2UsIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25DZWxsICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25DZWxsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGw7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb24gKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9jaGVja2JveF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2NoZWNrYm94ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9jaGVja2JveC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fcmFkaW9ncm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX3JhZGlvZ3JvdXAgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX3JhZGlvZ3JvdXAudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wYW5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wYW5lbCAqLyBcIi4vc3JjL3JlYWN0L3BhbmVsLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19hY3Rpb25fYmFyX2FjdGlvbl9iYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL2FjdGlvbi1iYXIvYWN0aW9uLWJhci50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfbWF0cml4X3Jvd19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL21hdHJpeC9yb3cgKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL21hdHJpeC9yb3cudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX21hdHJpeF9hY3Rpb25zX2RyYWdfZHJvcF9pY29uX2RyYWdfZHJvcF9pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvbWF0cml4LWFjdGlvbnMvZHJhZy1kcm9wLWljb24vZHJhZy1kcm9wLWljb24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL21hdHJpeC1hY3Rpb25zL2RyYWctZHJvcC1pY29uL2RyYWctZHJvcC1pY29uLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9jb21tZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fY29tbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fY29tbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cbnZhciBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2UocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIC8vQ3JlYXRlIHJlbmRlcmVkIHRhYmxlIGluIGNvbnRydWN0b3IgYW5kIG5vdCBvbiByZW5kZXJpbmdcbiAgICAgICAgdmFyIHRhYmxlID0gX3RoaXMucXVlc3Rpb24ucmVuZGVyZWRUYWJsZTtcbiAgICAgICAgX3RoaXMuc3RhdGUgPSBfdGhpcy5nZXRTdGF0ZSgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQmFzZS5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHByZXZTdGF0ZSA9PT0gdm9pZCAwKSB7IHByZXZTdGF0ZSA9IG51bGw7IH1cbiAgICAgICAgcmV0dXJuIHsgcm93Q291bnRlcjogIXByZXZTdGF0ZSA/IDAgOiBwcmV2U3RhdGUucm93Q291bnRlciArIDEgfTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLnByb3RvdHlwZS51cGRhdGVTdGF0ZU9uQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVuZGVyaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuZ2V0U3RhdGUodGhpcy5zdGF0ZSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2UucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucXVlc3Rpb24udmlzaWJsZVJvd3NDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy51cGRhdGVTdGF0ZU9uQ2FsbGJhY2soKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5vblJlbmRlcmVkVGFibGVSZXNldENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucXVlc3Rpb24ucmVuZGVyZWRUYWJsZS5yZW5kZXJlZFJvd3NDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlU3RhdGVPbkNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMudXBkYXRlU3RhdGVPbkNhbGxiYWNrKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucXVlc3Rpb24ucmVuZGVyZWRUYWJsZS5yZW5kZXJlZFJvd3NDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy51cGRhdGVTdGF0ZU9uQ2FsbGJhY2soKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLnZpc2libGVSb3dzQ2hhbmdlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLm9uUmVuZGVyZWRUYWJsZVJlc2V0Q2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHRoaXMucXVlc3Rpb24ucmVuZGVyZWRUYWJsZS5yZW5kZXJlZFJvd3NDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQmFzZS5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyVGFibGVEaXYoKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLnByb3RvdHlwZS5yZW5kZXJUYWJsZURpdiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMucmVuZGVySGVhZGVyKCk7XG4gICAgICAgIHZhciBmb290ZXJzID0gdGhpcy5yZW5kZXJGb290ZXIoKTtcbiAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnJlbmRlclJvd3MoKTtcbiAgICAgICAgdmFyIGRpdlN0eWxlID0gdGhpcy5xdWVzdGlvbi5zaG93SG9yaXpvbnRhbFNjcm9sbFxuICAgICAgICAgICAgPyB7IG92ZXJmbG93WDogXCJzY3JvbGxcIiB9XG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgc3R5bGU6IGRpdlN0eWxlLCBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy50YWJsZVdyYXBwZXIsIHJlZjogZnVuY3Rpb24gKHJvb3QpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKHJvb3QpKTsgfSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ0YWJsZVwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRUYWJsZUNzcygpIH0sXG4gICAgICAgICAgICAgICAgaGVhZGVyLFxuICAgICAgICAgICAgICAgIHJvd3MsXG4gICAgICAgICAgICAgICAgZm9vdGVycykpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLnByb3RvdHlwZS5yZW5kZXJIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YWJsZSA9IHRoaXMucXVlc3Rpb24ucmVuZGVyZWRUYWJsZTtcbiAgICAgICAgaWYgKCF0YWJsZS5zaG93SGVhZGVyKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBoZWFkZXJzID0gW107XG4gICAgICAgIHZhciBjZWxscyA9IHRhYmxlLmhlYWRlclJvdy5jZWxscztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBjZWxsc1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBcImNvbHVtblwiICsgaTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5TdHlsZSA9IHt9O1xuICAgICAgICAgICAgaWYgKCEhY2VsbC53aWR0aCkge1xuICAgICAgICAgICAgICAgIGNvbHVtblN0eWxlLndpZHRoID0gY2VsbC53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIWNlbGwubWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5TdHlsZS5taW5XaWR0aCA9IGNlbGwubWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2VsbENvbnRlbnQgPSB0aGlzLnJlbmRlckNlbGxDb250ZW50KGNlbGwsIFwiY29sdW1uLWhlYWRlclwiLCB7fSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gY2VsbC5oYXNUaXRsZSA/XG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ0aFwiLCB7IGNsYXNzTmFtZTogY2VsbC5jbGFzc05hbWUsIGtleToga2V5LCBzdHlsZTogY29sdW1uU3R5bGUgfSxcbiAgICAgICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgICAgIGNlbGxDb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBcIiBcIilcbiAgICAgICAgICAgICAgICA6IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidGRcIiwgeyBjbGFzc05hbWU6IGNlbGwuY2xhc3NOYW1lLCBrZXk6IGtleSwgc3R5bGU6IGNvbHVtblN0eWxlIH0pO1xuICAgICAgICAgICAgaGVhZGVycy5wdXNoKGhlYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRoZWFkXCIsIG51bGwsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRyXCIsIG51bGwsIGhlYWRlcnMpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQmFzZS5wcm90b3R5cGUucmVuZGVyRm9vdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkVGFibGU7XG4gICAgICAgIGlmICghdGFibGUuc2hvd0Zvb3RlcilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgcm93ID0gdGhpcy5yZW5kZXJSb3coXCJmb290ZXJcIiwgdGFibGUuZm9vdGVyUm93LCB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMsIFwicm93LWZvb3RlclwiKTtcbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidGZvb3RcIiwgbnVsbCwgcm93KTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25CYXNlLnByb3RvdHlwZS5yZW5kZXJSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgdmFyIHJlbmRlcmVkUm93cyA9IHRoaXMucXVlc3Rpb24ucmVuZGVyZWRUYWJsZS5yb3dzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbmRlcmVkUm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcm93cy5wdXNoKHRoaXMucmVuZGVyUm93KHJlbmRlcmVkUm93c1tpXS5pZCwgcmVuZGVyZWRSb3dzW2ldLCBjc3NDbGFzc2VzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidGJvZHlcIiwgbnVsbCwgcm93cyk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQmFzZS5wcm90b3R5cGUucmVuZGVyUm93ID0gZnVuY3Rpb24gKGtleVZhbHVlLCByb3csIGNzc0NsYXNzZXMsIHJlYXNvbikge1xuICAgICAgICB2YXIgbWF0cml4cm93ID0gW107XG4gICAgICAgIHZhciBjZWxscyA9IHJvdy5jZWxscztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbWF0cml4cm93LnB1c2godGhpcy5yZW5kZXJDZWxsKGNlbGxzW2ldLCBpLCBjc3NDbGFzc2VzLCByZWFzb24pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIga2V5ID0gXCJyb3dcIiArIGtleVZhbHVlO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJGcmFnbWVudFwiXSwgeyBrZXk6IGtleSB9LCAocmVhc29uID09IFwicm93LWZvb3RlclwiKSA/IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidHJcIiwgbnVsbCwgbWF0cml4cm93KSA6IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX21hdHJpeF9yb3dfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcIk1hdHJpeFJvd1wiXSwgeyBtb2RlbDogcm93LCBwYXJlbnRNYXRyaXg6IHRoaXMucXVlc3Rpb24gfSwgbWF0cml4cm93KSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2UucHJvdG90eXBlLnJlbmRlckNlbGwgPSBmdW5jdGlvbiAoY2VsbCwgaW5kZXgsIGNzc0NsYXNzZXMsIHJlYXNvbikge1xuICAgICAgICB2YXIga2V5ID0gXCJjZWxsXCIgKyBpbmRleDtcbiAgICAgICAgaWYgKGNlbGwuaGFzUXVlc3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGwsIHsga2V5OiBrZXksIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsIGNlbGw6IGNlbGwsIGNyZWF0b3I6IHRoaXMuY3JlYXRvciwgcmVhc29uOiByZWFzb24gfSkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYWxjUmVhc29uID0gcmVhc29uO1xuICAgICAgICBpZiAoIWNhbGNSZWFzb24pIHtcbiAgICAgICAgICAgIGNhbGNSZWFzb24gPSBjZWxsLmhhc1RpdGxlID8gXCJyb3ctaGVhZGVyXCIgOiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjZWxsQ29udGVudCA9IHRoaXMucmVuZGVyQ2VsbENvbnRlbnQoY2VsbCwgY2FsY1JlYXNvbiwgY3NzQ2xhc3Nlcyk7XG4gICAgICAgIHZhciBjZWxsU3R5bGUgPSBudWxsO1xuICAgICAgICBpZiAoISFjZWxsLndpZHRoIHx8ICEhY2VsbC5taW5XaWR0aCkge1xuICAgICAgICAgICAgY2VsbFN0eWxlID0ge307XG4gICAgICAgICAgICBpZiAoISFjZWxsLndpZHRoKVxuICAgICAgICAgICAgICAgIGNlbGxTdHlsZS53aWR0aCA9IGNlbGwud2lkdGg7XG4gICAgICAgICAgICBpZiAoISFjZWxsLm1pbldpZHRoKVxuICAgICAgICAgICAgICAgIGNlbGxTdHlsZS5taW5XaWR0aCA9IGNlbGwubWluV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRkXCIsIHsgY2xhc3NOYW1lOiBjZWxsLmNsYXNzTmFtZSwga2V5OiBrZXksIHN0eWxlOiBjZWxsU3R5bGUsIGNvbFNwYW46IGNlbGwuY29sU3BhbnMsIFwiZGF0YS1yZXNwb25zaXZlLXRpdGxlXCI6IGNlbGwuaGVhZGVycywgdGl0bGU6IGNlbGwuZ2V0VGl0bGUoKSB9LCBjZWxsQ29udGVudCkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2UucHJvdG90eXBlLnJlbmRlckNlbGxDb250ZW50ID0gZnVuY3Rpb24gKGNlbGwsIHJlYXNvbiwgY3NzQ2xhc3Nlcykge1xuICAgICAgICB2YXIgY2VsbENvbnRlbnQgPSBudWxsO1xuICAgICAgICB2YXIgY2VsbFN0eWxlID0gbnVsbDtcbiAgICAgICAgaWYgKCEhY2VsbC53aWR0aCB8fCAhIWNlbGwubWluV2lkdGgpIHtcbiAgICAgICAgICAgIGNlbGxTdHlsZSA9IHt9O1xuICAgICAgICAgICAgaWYgKCEhY2VsbC53aWR0aClcbiAgICAgICAgICAgICAgICBjZWxsU3R5bGUud2lkdGggPSBjZWxsLndpZHRoO1xuICAgICAgICAgICAgaWYgKCEhY2VsbC5taW5XaWR0aClcbiAgICAgICAgICAgICAgICBjZWxsU3R5bGUubWluV2lkdGggPSBjZWxsLm1pbldpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZWxsLmhhc1RpdGxlKSB7XG4gICAgICAgICAgICByZWFzb24gPSBcInJvdy1oZWFkZXJcIjtcbiAgICAgICAgICAgIHZhciBzdHIgPSB0aGlzLnJlbmRlckxvY1N0cmluZyhjZWxsLmxvY1RpdGxlKTtcbiAgICAgICAgICAgIHZhciByZXF1aXJlXzEgPSAhIWNlbGwuY29sdW1uID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UXVlc3Rpb25NYXRyaXhIZWFkZXJSZXF1aXJlZCwgeyBjb2x1bW46IGNlbGwuY29sdW1uLCBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiB9KSA6IG51bGw7XG4gICAgICAgICAgICBjZWxsQ29udGVudCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRnJhZ21lbnRcIl0sIG51bGwsXG4gICAgICAgICAgICAgICAgc3RyLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfMSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZWxsLmlzRHJhZ0hhbmRsZXJDZWxsKSB7XG4gICAgICAgICAgICBjZWxsQ29udGVudCA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRnJhZ21lbnRcIl0sIG51bGwsXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfbWF0cml4X2FjdGlvbnNfZHJhZ19kcm9wX2ljb25fZHJhZ19kcm9wX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1tcIlN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pY0RyYWdEcm9wSWNvblwiXSwgeyBpdGVtOiB7IGRhdGE6IHsgcm93OiBjZWxsLnJvdywgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24gfSB9IH0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGwuaXNBY3Rpb25zQ2VsbCkge1xuICAgICAgICAgICAgY2VsbENvbnRlbnQgPSAoX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UuY3JlYXRlRWxlbWVudChcInN2LW1hdHJpeGR5bmFtaWMtYWN0aW9ucy1jZWxsXCIsIHtcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICAgICAgICBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzLCBjZWxsOiBjZWxsLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBjZWxsLml0ZW0uZ2V0RGF0YSgpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGwuaGFzUGFuZWwpIHtcbiAgICAgICAgICAgIGNlbGxDb250ZW50ID0gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9wYW5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiU3VydmV5UGFuZWxcIl0sIHsga2V5OiBjZWxsLnBhbmVsLmlkLCBlbGVtZW50OiBjZWxsLnBhbmVsLCBzdXJ2ZXk6IHRoaXMucXVlc3Rpb24uc3VydmV5LCBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzLCBpc0Rpc3BsYXlNb2RlOiB0aGlzLmlzRGlzcGxheU1vZGUsIGNyZWF0b3I6IHRoaXMuY3JlYXRvciB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGwuaXNFcnJvcnNDZWxsKSB7XG4gICAgICAgICAgICBpZiAoY2VsbC5pc0Vycm9yc0NlbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9yZWFjdHF1ZXN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlRdWVzdGlvbkVycm9yQ2VsbFwiXSwgeyBxdWVzdGlvbjogY2VsbC5xdWVzdGlvbiwgY3JlYXRvcjogdGhpcy5jcmVhdG9yIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNlbGxDb250ZW50KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciByZWFkeUNlbGwgPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLCBjZWxsQ29udGVudCkpO1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwQ2VsbChjZWxsLCByZWFkeUNlbGwsIHJlYXNvbik7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2U7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIl0pKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4QWN0aW9uc0NlbGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uTWF0cml4QWN0aW9uc0NlbGwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25NYXRyaXhBY3Rpb25zQ2VsbChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeEFjdGlvbnNDZWxsLnByb3RvdHlwZSwgXCJtb2RlbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMubW9kZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeEFjdGlvbnNDZWxsLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX2FjdGlvbl9iYXJfYWN0aW9uX2Jhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiU3VydmV5QWN0aW9uQmFyXCJdLCB7IG1vZGVsOiB0aGlzLm1vZGVsLCBoYW5kbGVDbGljazogZmFsc2UgfSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uTWF0cml4QWN0aW9uc0NlbGw7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KFwic3YtbWF0cml4ZHluYW1pYy1hY3Rpb25zLWNlbGxcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uTWF0cml4QWN0aW9uc0NlbGwsIHByb3BzKTtcbn0pO1xudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4SGVhZGVyUmVxdWlyZWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uTWF0cml4SGVhZGVyUmVxdWlyZWQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25NYXRyaXhIZWFkZXJSZXF1aXJlZChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeEhlYWRlclJlcXVpcmVkLnByb3RvdHlwZSwgXCJjb2x1bW5cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNvbHVtbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeEhlYWRlclJlcXVpcmVkLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucXVlc3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeEhlYWRlclJlcXVpcmVkLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbjtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4SGVhZGVyUmVxdWlyZWQucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb2x1bW4uaXNSZW5kZXJlZFJlcXVpcmVkKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIG51bGwsIFwiXFx1MDBBMFwiKSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNlbGxSZXF1aXJlZFRleHQgfSwgdGhpcy5jb2x1bW4ucmVxdWlyZWRUZXh0KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uTWF0cml4SGVhZGVyUmVxdWlyZWQ7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25DZWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbC5wcm90b3R5cGUsIFwiY2VsbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY2VsbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbC5wcm90b3R5cGUsIFwiaXRlbUNzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5jZWxsID8gdGhpcy5jZWxsLmNsYXNzTmFtZSA6IFwiXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbC5wcm90b3R5cGUuZ2V0UXVlc3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBxID0gX3N1cGVyLnByb3RvdHlwZS5nZXRRdWVzdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoISFxKVxuICAgICAgICAgICAgcmV0dXJuIHE7XG4gICAgICAgIHJldHVybiAhIXRoaXMuY2VsbCA/IHRoaXMuY2VsbC5xdWVzdGlvbiA6IG51bGw7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbC5wcm90b3R5cGUuZG9BZnRlclJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5jZWxsUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmIChlbCAmJlxuICAgICAgICAgICAgdGhpcy5jZWxsICYmXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uICYmXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLnN1cnZleSAmJlxuICAgICAgICAgICAgZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1yZW5kZXJlZFwiKSAhPT0gXCJyXCIpIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEtcmVuZGVyZWRcIiwgXCJyXCIpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgY2VsbDogdGhpcy5jZWxsLFxuICAgICAgICAgICAgICAgIGNlbGxRdWVzdGlvbjogdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICAgICAgICBodG1sRWxlbWVudDogZWwsXG4gICAgICAgICAgICAgICAgcm93OiB0aGlzLmNlbGwucm93LFxuICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jZWxsLmNlbGwuY29sdW1uLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb24uc3VydmV5Lm1hdHJpeEFmdGVyQ2VsbFJlbmRlcih0aGlzLnF1ZXN0aW9uLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb24uYWZ0ZXJSZW5kZXJDb3JlKGVsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGwucHJvdG90eXBlLmdldFNob3dFcnJvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5xdWVzdGlvbi5pc1Zpc2libGUgJiZcbiAgICAgICAgICAgICghdGhpcy5jZWxsLmlzQ2hvaWNlIHx8IHRoaXMuY2VsbC5pc0ZpcnN0Q2hvaWNlKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbC5wcm90b3R5cGUuZ2V0Q2VsbFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzID0gX3N1cGVyLnByb3RvdHlwZS5nZXRDZWxsU3R5bGUuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCEhdGhpcy5jZWxsLndpZHRoIHx8ICEhdGhpcy5jZWxsLm1pbldpZHRoKSB7XG4gICAgICAgICAgICBpZiAoIXJlcylcbiAgICAgICAgICAgICAgICByZXMgPSB7fTtcbiAgICAgICAgICAgIGlmICghIXRoaXMuY2VsbC53aWR0aClcbiAgICAgICAgICAgICAgICByZXMud2lkdGggPSB0aGlzLmNlbGwud2lkdGg7XG4gICAgICAgICAgICBpZiAoISF0aGlzLmNlbGwubWluV2lkdGgpXG4gICAgICAgICAgICAgICAgcmVzLm1pbldpZHRoID0gdGhpcy5jZWxsLm1pbldpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbC5wcm90b3R5cGUuZ2V0SGVhZGVyVGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2VsbC5oZWFkZXJzO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGwucHJvdG90eXBlLnJlbmRlclF1ZXN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2VsbC5pc0Nob2ljZSlcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3RxdWVzdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5UXVlc3Rpb25cIl0ucmVuZGVyUXVlc3Rpb25Cb2R5KHRoaXMuY3JlYXRvciwgdGhpcy5xdWVzdGlvbik7XG4gICAgICAgIGlmICh0aGlzLmNlbGwuaXNPdGhlckNob2ljZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlck90aGVyQ29tbWVudCgpO1xuICAgICAgICBpZiAodGhpcy5jZWxsLmlzQ2hlY2tib3gpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJDZWxsQ2hlY2tib3hCdXR0b24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQ2VsbFJhZGlvZ3JvdXBCdXR0b24oKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25DZWxsLnByb3RvdHlwZS5yZW5kZXJPdGhlckNvbW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBxdWVzdGlvbiA9IHRoaXMuY2VsbC5xdWVzdGlvbjtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBxdWVzdGlvbi5jc3NDbGFzc2VzIHx8IHt9O1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3JlYWN0cXVlc3Rpb25fY29tbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiU3VydmV5UXVlc3Rpb25PdGhlclZhbHVlSXRlbVwiXSwgeyBxdWVzdGlvbjogcXVlc3Rpb24sIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsIG90aGVyQ3NzOiBjc3NDbGFzc2VzLm90aGVyLCBpc0Rpc3BsYXlNb2RlOiBxdWVzdGlvbi5pc0lucHV0UmVhZE9ubHkgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeERyb3Bkb3duQ2VsbC5wcm90b3R5cGUucmVuZGVyQ2VsbENoZWNrYm94QnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5jZWxsLnF1ZXN0aW9uLmlkICsgXCJpdGVtXCIgKyB0aGlzLmNlbGwuY2hvaWNlSW5kZXg7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3JlYWN0cXVlc3Rpb25fY2hlY2tib3hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlN1cnZleVF1ZXN0aW9uQ2hlY2tib3hJdGVtXCJdLCB7IGtleToga2V5LCBxdWVzdGlvbjogdGhpcy5jZWxsLnF1ZXN0aW9uLCBjc3NDbGFzc2VzOiB0aGlzLmNlbGwucXVlc3Rpb24uY3NzQ2xhc3NlcywgaXNEaXNwbGF5TW9kZTogdGhpcy5jZWxsLnF1ZXN0aW9uLmlzSW5wdXRSZWFkT25seSwgaXRlbTogdGhpcy5jZWxsLml0ZW0sIGlzRmlyc3Q6IHRoaXMuY2VsbC5pc0ZpcnN0Q2hvaWNlLCBpbmRleDogdGhpcy5jZWxsLmNob2ljZUluZGV4LnRvU3RyaW5nKCksIGhpZGVDYXB0aW9uOiB0cnVlIH0pKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHJvcGRvd25DZWxsLnByb3RvdHlwZS5yZW5kZXJDZWxsUmFkaW9ncm91cEJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuY2VsbC5xdWVzdGlvbi5pZCArIFwiaXRlbVwiICsgdGhpcy5jZWxsLmNob2ljZUluZGV4O1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9yZWFjdHF1ZXN0aW9uX3JhZGlvZ3JvdXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtXCJdLCB7IGtleToga2V5LCBxdWVzdGlvbjogdGhpcy5jZWxsLnF1ZXN0aW9uLCBjc3NDbGFzc2VzOiB0aGlzLmNlbGwucXVlc3Rpb24uY3NzQ2xhc3NlcywgaXNEaXNwbGF5TW9kZTogdGhpcy5jZWxsLnF1ZXN0aW9uLmlzSW5wdXRSZWFkT25seSwgaXRlbTogdGhpcy5jZWxsLml0ZW0sIGluZGV4OiB0aGlzLmNlbGwuY2hvaWNlSW5kZXgudG9TdHJpbmcoKSwgaXNDaGVja2VkOiB0aGlzLmNlbGwucXVlc3Rpb24udmFsdWUgPT09IHRoaXMuY2VsbC5pdGVtLnZhbHVlLCBpc0Rpc2FibGVkOiB0aGlzLmNlbGwucXVlc3Rpb24uaXNSZWFkT25seSB8fCAhdGhpcy5jZWxsLml0ZW0uaXNFbmFibGVkLCBoaWRlQ2FwdGlvbjogdHJ1ZSB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkNlbGw7XG59KF9yZWFjdHF1ZXN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlRdWVzdGlvbkFuZEVycm9yc0NlbGxcIl0pKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fbWF0cml4ZHluYW1pYy50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX21hdHJpeGR5bmFtaWMudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljLCBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b24gKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b247IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duYmFzZSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fbWF0cml4ZHJvcGRvd25iYXNlLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYyhwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25Sb3dBZGRDbGljayA9IF90aGlzLmhhbmRsZU9uUm93QWRkQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYy5wcm90b3R5cGUsIFwibWF0cml4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbkJhc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWMucHJvdG90eXBlLmhhbmRsZU9uUm93QWRkQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5tYXRyaXguYWRkUm93VUkoKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYy5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHZhciBzaG93VGFibGUgPSB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkVGFibGUuc2hvd1RhYmxlO1xuICAgICAgICB2YXIgbWFpbkRpdiA9IHNob3dUYWJsZVxuICAgICAgICAgICAgPyB0aGlzLnJlbmRlclRhYmxlRGl2KClcbiAgICAgICAgICAgIDogdGhpcy5yZW5kZXJOb1Jvd3NDb250ZW50KGNzc0NsYXNzZXMpO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIG51bGwsXG4gICAgICAgICAgICB0aGlzLnJlbmRlckFkZFJvd0J1dHRvbk9uVG9wKGNzc0NsYXNzZXMpLFxuICAgICAgICAgICAgbWFpbkRpdixcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQWRkUm93QnV0dG9uT25Cb3R0b20oY3NzQ2xhc3NlcykpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYy5wcm90b3R5cGUucmVuZGVyQWRkUm93QnV0dG9uT25Ub3AgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICBpZiAoIXRoaXMubWF0cml4LnJlbmRlcmVkVGFibGUuc2hvd0FkZFJvd09uVG9wKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlckFkZFJvd0J1dHRvbihjc3NDbGFzc2VzKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYy5wcm90b3R5cGUucmVuZGVyQWRkUm93QnV0dG9uT25Cb3R0b20gPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICBpZiAoIXRoaXMubWF0cml4LnJlbmRlcmVkVGFibGUuc2hvd0FkZFJvd09uQm90dG9tKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlckFkZFJvd0J1dHRvbihjc3NDbGFzc2VzKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYy5wcm90b3R5cGUucmVuZGVyTm9Sb3dzQ29udGVudCA9IGZ1bmN0aW9uIChjc3NDbGFzc2VzKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5tYXRyaXgubG9jRW1wdHlSb3dzVGV4dCk7XG4gICAgICAgIHZhciB0ZXh0RGl2ID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuZW1wdHlSb3dzVGV4dCB9LCB0ZXh0KTtcbiAgICAgICAgdmFyIGJ0biA9IHRoaXMubWF0cml4LnJlbmRlcmVkVGFibGUuc2hvd0FkZFJvdyA/IHRoaXMucmVuZGVyQWRkUm93QnV0dG9uKGNzc0NsYXNzZXMsIHRydWUpIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmVtcHR5Um93c1NlY3Rpb24gfSxcbiAgICAgICAgICAgIHRleHREaXYsXG4gICAgICAgICAgICBidG4pKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYy5wcm90b3R5cGUucmVuZGVyQWRkUm93QnV0dG9uID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMsIGlzRW1wdHlTZWN0aW9uKSB7XG4gICAgICAgIGlmIChpc0VtcHR5U2VjdGlvbiA9PT0gdm9pZCAwKSB7IGlzRW1wdHlTZWN0aW9uID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UuY3JlYXRlRWxlbWVudChcInN2LW1hdHJpeGR5bmFtaWMtYWRkLWJ0blwiLCB7XG4gICAgICAgICAgICBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICAgIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsIGlzRW1wdHlTZWN0aW9uOiBpc0VtcHR5U2VjdGlvblxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWM7XG59KF9yZWFjdHF1ZXN0aW9uX21hdHJpeGRyb3Bkb3duYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5UXVlc3Rpb25NYXRyaXhEcm9wZG93bkJhc2VcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcIm1hdHJpeGR5bmFtaWNcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uTWF0cml4RHluYW1pYywgcHJvcHMpO1xufSk7XG52YXIgU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljQWRkQnV0dG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljQWRkQnV0dG9uKHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5oYW5kbGVPblJvd0FkZENsaWNrID0gX3RoaXMuaGFuZGxlT25Sb3dBZGRDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljQWRkQnV0dG9uLnByb3RvdHlwZSwgXCJtYXRyaXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljQWRkQnV0dG9uLnByb3RvdHlwZS5oYW5kbGVPblJvd0FkZENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMubWF0cml4LmFkZFJvd1VJKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b24ucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhZGRSb3dUZXh0ID0gdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5tYXRyaXgubG9jQWRkUm93VGV4dCk7XG4gICAgICAgIHZhciBhZGRCdXR0b24gPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IHRoaXMubWF0cml4LmdldEFkZFJvd0J1dHRvbkNzcyh0aGlzLnByb3BzLmlzRW1wdHlTZWN0aW9uKSwgdHlwZTogXCJidXR0b25cIiwgZGlzYWJsZWQ6IHRoaXMubWF0cml4LmlzSW5wdXRSZWFkT25seSwgb25DbGljazogdGhpcy5tYXRyaXguaXNEZXNpZ25Nb2RlID8gdW5kZWZpbmVkIDogdGhpcy5oYW5kbGVPblJvd0FkZENsaWNrIH0sXG4gICAgICAgICAgICBhZGRSb3dUZXh0LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLmNzc0NsYXNzZXMuaWNvbkFkZCB9KSkpO1xuICAgICAgICByZXR1cm4gKHRoaXMucHJvcHMuaXNFbXB0eVNlY3Rpb24gPyBhZGRCdXR0b24gOiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5wcm9wcy5jc3NDbGFzc2VzLmZvb3RlciB9LCBhZGRCdXR0b24pKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbk1hdHJpeER5bmFtaWNBZGRCdXR0b247XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LW1hdHJpeGR5bmFtaWMtYWRkLWJ0blwiLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UXVlc3Rpb25NYXRyaXhEeW5hbWljQWRkQnV0dG9uLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX211bHRpcGxldGV4dC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fbXVsdGlwbGV0ZXh0LnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25NdWx0aXBsZVRleHQsIFN1cnZleU11bHRpcGxlVGV4dEl0ZW0sIFN1cnZleU11bHRpcGxlVGV4dEl0ZW1FZGl0b3IgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25NdWx0aXBsZVRleHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5TXVsdGlwbGVUZXh0SXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleU11bHRpcGxlVGV4dEl0ZW07IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleU11bHRpcGxlVGV4dEl0ZW1FZGl0b3JcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlNdWx0aXBsZVRleHRJdGVtRWRpdG9yOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3RpdGxlX3RpdGxlX2NvbnRlbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy90aXRsZS90aXRsZS1jb250ZW50ICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy90aXRsZS90aXRsZS1jb250ZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uTXVsdGlwbGVUZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dC5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uTXVsdGlwbGVUZXh0LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIHRhYmxlUm93cyA9IHRoaXMucXVlc3Rpb24uZ2V0Um93cygpO1xuICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYmxlUm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRhYmxlUm93c1tpXS5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICByb3dzLnB1c2godGhpcy5yZW5kZXJSb3coaSwgdGFibGVSb3dzW2ldLmNlbGxzLCBjc3NDbGFzc2VzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldFF1ZXN0aW9uUm9vdENzcygpIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRib2R5XCIsIG51bGwsIHJvd3MpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvbk11bHRpcGxlVGV4dC5wcm90b3R5cGUucmVuZGVyQ2VsbCA9IGZ1bmN0aW9uIChjZWxsLCBjc3NDbGFzc2VzLCBpbmRleCkge1xuICAgICAgICB2YXIgY2VsbENvbnRlbnQ7XG4gICAgICAgIHZhciBmb2N1c0luID0gZnVuY3Rpb24gKCkgeyBjZWxsLml0ZW0uZm9jdXNJbigpOyB9O1xuICAgICAgICBpZiAoY2VsbC5pc0Vycm9yc0NlbGwpIHtcbiAgICAgICAgICAgIGNlbGxDb250ZW50ID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3JlYWN0cXVlc3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN1cnZleVF1ZXN0aW9uRXJyb3JDZWxsXCJdLCB7IHF1ZXN0aW9uOiBjZWxsLml0ZW0uZWRpdG9yLCBjcmVhdG9yOiB0aGlzLmNyZWF0b3IgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjZWxsQ29udGVudCA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleU11bHRpcGxlVGV4dEl0ZW0sIHsgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24sIGl0ZW06IGNlbGwuaXRlbSwgY3JlYXRvcjogdGhpcy5jcmVhdG9yLCBjc3NDbGFzc2VzOiBjc3NDbGFzc2VzIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ0ZFwiLCB7IGtleTogXCJpdGVtXCIgKyBpbmRleCwgY2xhc3NOYW1lOiBjZWxsLmNsYXNzTmFtZSwgb25Gb2N1czogZm9jdXNJbiB9LCBjZWxsQ29udGVudCkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25NdWx0aXBsZVRleHQucHJvdG90eXBlLnJlbmRlclJvdyA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbHMsIGNzc0NsYXNzZXMpIHtcbiAgICAgICAgdmFyIGtleSA9IFwiaXRlbVwiICsgcm93SW5kZXg7XG4gICAgICAgIHZhciB0ZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBjZWxsc1tpXTtcbiAgICAgICAgICAgIHRkcy5wdXNoKHRoaXMucmVuZGVyQ2VsbChjZWxsLCBjc3NDbGFzc2VzLCBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInRyXCIsIHsga2V5OiBrZXksIGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5yb3cgfSwgdGRzKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25NdWx0aXBsZVRleHQ7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIl0pKTtcblxudmFyIFN1cnZleU11bHRpcGxlVGV4dEl0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleU11bHRpcGxlVGV4dEl0ZW0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5TXVsdGlwbGVUZXh0SXRlbSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5TXVsdGlwbGVUZXh0SXRlbS5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleU11bHRpcGxlVGV4dEl0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlNdWx0aXBsZVRleHRJdGVtLnByb3RvdHlwZS5nZXRTdGF0ZUVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW3RoaXMuaXRlbSwgdGhpcy5pdGVtLmVkaXRvcl07XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5TXVsdGlwbGVUZXh0SXRlbS5wcm90b3R5cGUsIFwiY3JlYXRvclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY3JlYXRvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleU11bHRpcGxlVGV4dEl0ZW0ucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5pdGVtO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMuY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIHRpdGxlU3R5bGUgPSB7fTtcbiAgICAgICAgaWYgKCEhdGhpcy5xdWVzdGlvbi5pdGVtVGl0bGVXaWR0aCkge1xuICAgICAgICAgICAgdGl0bGVTdHlsZS5taW5XaWR0aCA9IHRoaXMucXVlc3Rpb24uaXRlbVRpdGxlV2lkdGg7XG4gICAgICAgICAgICB0aXRsZVN0eWxlLndpZHRoID0gdGhpcy5xdWVzdGlvbi5pdGVtVGl0bGVXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0SXRlbUxhYmVsQ3NzKGl0ZW0pIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuaXRlbVRpdGxlLCBzdHlsZTogdGl0bGVTdHlsZSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3RpdGxlX3RpdGxlX2NvbnRlbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlRpdGxlQ29udGVudFwiXSwgeyBlbGVtZW50OiBpdGVtLmVkaXRvciwgY3NzQ2xhc3NlczogaXRlbS5lZGl0b3IuY3NzQ2xhc3NlcyB9KSksXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlNdWx0aXBsZVRleHRJdGVtRWRpdG9yLCB7IGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsIGl0ZW1Dc3M6IHRoaXMucXVlc3Rpb24uZ2V0SXRlbUNzcygpLCBxdWVzdGlvbjogaXRlbS5lZGl0b3IsIGNyZWF0b3I6IHRoaXMuY3JlYXRvciB9KSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleU11bHRpcGxlVGV4dEl0ZW07XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG52YXIgU3VydmV5TXVsdGlwbGVUZXh0SXRlbUVkaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5TXVsdGlwbGVUZXh0SXRlbUVkaXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlNdWx0aXBsZVRleHRJdGVtRWRpdG9yKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN1cnZleU11bHRpcGxlVGV4dEl0ZW1FZGl0b3IucHJvdG90eXBlLnJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5pdGVtQ3NzIH0sIHRoaXMucmVuZGVyQ29udGVudCgpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlNdWx0aXBsZVRleHRJdGVtRWRpdG9yO1xufShfcmVhY3RxdWVzdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5UXVlc3Rpb25BbmRFcnJvcnNXcmFwcGVkXCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJtdWx0aXBsZXRleHRcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uTXVsdGlwbGVUZXh0LCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX3BhbmVsZHluYW1pYy50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fcGFuZWxkeW5hbWljLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWMsIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljSXRlbSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0l0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0l0ZW07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wYW5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wYW5lbCAqLyBcIi4vc3JjL3JlYWN0L3BhbmVsLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfYWN0aW9uX2Jhcl9hY3Rpb25fYmFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvYWN0aW9uLWJhci9hY3Rpb24tYmFyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9hY3Rpb24tYmFyL2FjdGlvbi1iYXIudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3BhbmVsZHluYW1pY19hY3Rpb25zX3BhbmVsZHluYW1pY19uZXh0X2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3BhbmVsZHluYW1pYy1hY3Rpb25zL3BhbmVsZHluYW1pYy1uZXh0LWJ0biAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLW5leHQtYnRuLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19wYW5lbGR5bmFtaWNfYWN0aW9uc19wYW5lbGR5bmFtaWNfcHJldl9idG5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcHJldi1idG4gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3BhbmVsZHluYW1pYy1hY3Rpb25zL3BhbmVsZHluYW1pYy1wcmV2LWJ0bi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfcGFuZWxkeW5hbWljX2FjdGlvbnNfcGFuZWxkeW5hbWljX3Byb2dyZXNzX3RleHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9wYW5lbGR5bmFtaWMtYWN0aW9ucy9wYW5lbGR5bmFtaWMtcHJvZ3Jlc3MtdGV4dCAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvcGFuZWxkeW5hbWljLWFjdGlvbnMvcGFuZWxkeW5hbWljLXByb2dyZXNzLXRleHQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYyhwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYy5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgcGFuZWxDb3VudGVyOiAwIH0pO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMucXVlc3Rpb24ucGFuZWxDb3VudENoYW5nZWRDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYudXBkYXRlUXVlc3Rpb25SZW5kZXJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5jdXJyZW50SW5kZXhDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZVF1ZXN0aW9uUmVuZGVyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucXVlc3Rpb24ucmVuZGVyTW9kZUNoYW5nZWRDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYudXBkYXRlUXVlc3Rpb25SZW5kZXJpbmcoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLnBhbmVsQ291bnRDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHRoaXMucXVlc3Rpb24uY3VycmVudEluZGV4Q2hhbmdlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICB0aGlzLnF1ZXN0aW9uLnJlbmRlck1vZGVDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYy5wcm90b3R5cGUudXBkYXRlUXVlc3Rpb25SZW5kZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcGFuZWxDb3VudGVyOiB0aGlzLnN0YXRlID8gdGhpcy5zdGF0ZS5wYW5lbENvdW50ZXIgKyAxIDogMSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYy5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhbmVscyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5pc1JlbmRlck1vZGVMaXN0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucXVlc3Rpb24ucGFuZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhbmVsID0gdGhpcy5xdWVzdGlvbi5wYW5lbHNbaV07XG4gICAgICAgICAgICAgICAgcGFuZWxzLnB1c2gocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNJdGVtLCB7IGtleTogcGFuZWwuaWQsIGVsZW1lbnQ6IHBhbmVsLCBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiwgaW5kZXg6IGksIGNzc0NsYXNzZXM6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcywgaXNEaXNwbGF5TW9kZTogdGhpcy5pc0Rpc3BsYXlNb2RlLCBjcmVhdG9yOiB0aGlzLmNyZWF0b3IgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24uY3VycmVudFBhbmVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFuZWwgPSB0aGlzLnF1ZXN0aW9uLmN1cnJlbnRQYW5lbDtcbiAgICAgICAgICAgICAgICBwYW5lbHMucHVzaChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0l0ZW0sIHsga2V5OiB0aGlzLnF1ZXN0aW9uLmN1cnJlbnRJbmRleCwgZWxlbWVudDogcGFuZWwsIHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uLCBpbmRleDogdGhpcy5xdWVzdGlvbi5jdXJyZW50SW5kZXgsIGNzc0NsYXNzZXM6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcywgaXNEaXNwbGF5TW9kZTogdGhpcy5pc0Rpc3BsYXlNb2RlLCBjcmVhdG9yOiB0aGlzLmNyZWF0b3IgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBidG5BZGQgPSB0aGlzLnF1ZXN0aW9uLmlzUmVuZGVyTW9kZUxpc3QgJiYgdGhpcy5xdWVzdGlvbltcInNob3dMZWdhY3lOYXZpZ2F0aW9uXCJdXG4gICAgICAgICAgICA/IHRoaXMucmVuZGVyQWRkUm93QnV0dG9uKClcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIG5hdlRvcCA9IHRoaXMucXVlc3Rpb24uaXNQcm9ncmVzc1RvcFNob3dpbmdcbiAgICAgICAgICAgID8gdGhpcy5yZW5kZXJOYXZpZ2F0b3IoKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB2YXIgbmF2Qm90dG9tID0gdGhpcy5xdWVzdGlvbi5pc1Byb2dyZXNzQm90dG9tU2hvd2luZ1xuICAgICAgICAgICAgPyB0aGlzLnJlbmRlck5hdmlnYXRvcigpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICB2YXIgbmF2VjIgPSB0aGlzLnJlbmRlck5hdmlnYXRvclYyKCk7XG4gICAgICAgIHZhciBub0VudHJpZXNQbGFjZWhvbGRlciA9IHRoaXMucmVuZGVyUGxhY2Vob2xkZXIoKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnJvb3QgfSxcbiAgICAgICAgICAgIG5vRW50cmllc1BsYWNlaG9sZGVyLFxuICAgICAgICAgICAgbmF2VG9wLFxuICAgICAgICAgICAgcGFuZWxzLFxuICAgICAgICAgICAgbmF2Qm90dG9tLFxuICAgICAgICAgICAgYnRuQWRkLFxuICAgICAgICAgICAgbmF2VjIpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljLnByb3RvdHlwZS5yZW5kZXJOYXZpZ2F0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5xdWVzdGlvbltcInNob3dMZWdhY3lOYXZpZ2F0aW9uXCJdKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5pc1JhbmdlU2hvd2luZyAmJiB0aGlzLnF1ZXN0aW9uLmlzUHJvZ3Jlc3NUb3BTaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUmFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciByYW5nZSA9IHRoaXMucXVlc3Rpb24uaXNSYW5nZVNob3dpbmcgPyB0aGlzLnJlbmRlclJhbmdlKCkgOiBudWxsO1xuICAgICAgICB2YXIgYnRuUHJldiA9IHRoaXMucmVuZHJlclByZXZCdXR0b24oKTtcbiAgICAgICAgdmFyIGJ0bk5leHQgPSB0aGlzLnJlbmRyZXJOZXh0QnV0dG9uKCk7XG4gICAgICAgIHZhciBidG5BZGQgPSB0aGlzLnJlbmRlckFkZFJvd0J1dHRvbigpO1xuICAgICAgICB2YXIgcHJvZ3Jlc3NDbGFzcyA9IHRoaXMucXVlc3Rpb24uaXNQcm9ncmVzc1RvcFNob3dpbmdcbiAgICAgICAgICAgID8gdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnByb2dyZXNzVG9wXG4gICAgICAgICAgICA6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5wcm9ncmVzc0JvdHRvbTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogcHJvZ3Jlc3NDbGFzcyB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBzdHlsZTogeyBjbGVhcjogXCJib3RoXCIgfSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMucHJvZ3Jlc3NDb250YWluZXIgfSxcbiAgICAgICAgICAgICAgICAgICAgYnRuUHJldixcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgIGJ0bk5leHQpLFxuICAgICAgICAgICAgICAgIGJ0bkFkZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclByb2dyZXNzVGV4dCgpKSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWMucHJvdG90eXBlLnJlbmRlclByb2dyZXNzVGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19wYW5lbGR5bmFtaWNfYWN0aW9uc19wYW5lbGR5bmFtaWNfcHJvZ3Jlc3NfdGV4dF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNQcm9ncmVzc1RleHRcIl0sIHsgZGF0YTogeyBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiB9IH0pKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljLnByb3RvdHlwZS5yZW5kcmVyUHJldkJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19wYW5lbGR5bmFtaWNfYWN0aW9uc19wYW5lbGR5bmFtaWNfcHJldl9idG5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcIlN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljUHJldkJ1dHRvblwiXSwgeyBkYXRhOiB7IHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uIH0gfSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWMucHJvdG90eXBlLnJlbmRyZXJOZXh0QnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX3BhbmVsZHluYW1pY19hY3Rpb25zX3BhbmVsZHluYW1pY19uZXh0X2J0bl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNOZXh0QnV0dG9uXCJdLCB7IGRhdGE6IHsgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24gfSB9KSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYy5wcm90b3R5cGUucmVuZGVyUmFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5wcm9ncmVzcyB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5wcm9ncmVzc0Jhciwgc3R5bGU6IHsgd2lkdGg6IHRoaXMucXVlc3Rpb24ucHJvZ3Jlc3MgfSwgcm9sZTogXCJwcm9ncmVzc2JhclwiIH0pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYy5wcm90b3R5cGUucmVuZGVyQWRkUm93QnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KFwic3YtcGFuZWxkeW5hbWljLWFkZC1idG5cIiwge1xuICAgICAgICAgICAgZGF0YTogeyBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWMucHJvdG90eXBlLnJlbmRlck5hdmlnYXRvclYyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24uc2hvd05hdmlnYXRpb24pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5xdWVzdGlvbi5pc1JhbmdlU2hvd2luZyAmJiB0aGlzLnF1ZXN0aW9uLmlzUHJvZ3Jlc3NCb3R0b21TaG93aW5nID8gdGhpcy5yZW5kZXJSYW5nZSgpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmZvb3RlciB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJoclwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnNlcGFyYXRvciB9KSxcbiAgICAgICAgICAgIHJhbmdlLFxuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi5mb290ZXJUb29sYmFyLnZpc2libGVBY3Rpb25zLmxlbmd0aCA/IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmZvb3RlckJ1dHRvbnNDb250YWluZXIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19hY3Rpb25fYmFyX2FjdGlvbl9iYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcIlN1cnZleUFjdGlvbkJhclwiXSwgeyBtb2RlbDogdGhpcy5xdWVzdGlvbi5mb290ZXJUb29sYmFyIH0pKSkgOiBudWxsKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYy5wcm90b3R5cGUucmVuZGVyUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLmdldFNob3dOb0VudHJpZXNQbGFjZWhvbGRlcigpKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMubm9FbnRyaWVzUGxhY2Vob2xkZXIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgbnVsbCwgdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5xdWVzdGlvbi5sb2NOb0VudHJpZXNUZXh0KSksXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJBZGRSb3dCdXR0b24oKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdKSk7XG5cbnZhciBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0l0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljSXRlbSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0l0ZW0oKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljSXRlbS5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljSXRlbS5wcm90b3R5cGUsIFwiaW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmluZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNJdGVtLnByb3RvdHlwZS5nZXRTdXJ2ZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMucXVlc3Rpb24gPyB0aGlzLnF1ZXN0aW9uLnN1cnZleSA6IG51bGw7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pY0l0ZW0ucHJvdG90eXBlLmdldENzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMuZ2V0U3VydmV5KCk7XG4gICAgICAgIHJldHVybiAhIXN1cnZleSA/IHN1cnZleS5nZXRDc3MoKSA6IHt9O1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNJdGVtLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYW5lbCA9IF9zdXBlci5wcm90b3R5cGUucmVuZGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHZhciByZW1vdmVCdXR0b24gPSB0aGlzLnJlbmRlckJ1dHRvbigpO1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gdGhpcy5xdWVzdGlvbi5zaG93U2VwYXJhdG9yKHRoaXMuaW5kZXgpID9cbiAgICAgICAgICAgIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImhyXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuc2VwYXJhdG9yIH0pKSA6IG51bGw7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkZyYWdtZW50XCJdLCBudWxsLFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0UGFuZWxXcmFwcGVyQ3NzKHRoaXMucGFuZWwpIH0sXG4gICAgICAgICAgICAgICAgcGFuZWwsXG4gICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uKSxcbiAgICAgICAgICAgIHNlcGFyYXRvcikpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25QYW5lbER5bmFtaWNJdGVtLnByb3RvdHlwZS5yZW5kZXJCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLnBhbmVsUmVtb3ZlQnV0dG9uTG9jYXRpb24gIT09IFwicmlnaHRcIiB8fFxuICAgICAgICAgICAgIXRoaXMucXVlc3Rpb24uY2FuUmVtb3ZlUGFuZWwgfHxcbiAgICAgICAgICAgICh0aGlzLnF1ZXN0aW9uLmlzUmVuZGVyTW9kZUxpc3QgJiYgdGhpcy5wYW5lbC5pc0NvbGxhcHNlZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoXCJzdi1wYW5lbGR5bmFtaWMtcmVtb3ZlLWJ0blwiLCB7XG4gICAgICAgICAgICBkYXRhOiB7IHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uLCBwYW5lbDogdGhpcy5wYW5lbCB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUGFuZWxEeW5hbWljSXRlbTtcbn0oX3BhbmVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlQYW5lbFwiXSkpO1xuXG5fcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclF1ZXN0aW9uKFwicGFuZWxkeW5hbWljXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvblBhbmVsRHluYW1pYywgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9yYWRpb2dyb3VwLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fcmFkaW9ncm91cC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXAsIFN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fY29tbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2NvbW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2NvbW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHN1cnZleW1vZGVsICovIFwiLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50LWZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9lbGVtZW50LWZhY3RvcnkudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25SYWRpb2dyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5UXVlc3Rpb25SYWRpb2dyb3VwKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cC5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cC5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXM7XG4gICAgICAgIHZhciBjbGVhckJ1dHRvbiA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLnNob3dDbGVhckJ1dHRvbkluQ29udGVudCkge1xuICAgICAgICAgICAgY2xlYXJCdXR0b24gPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgbnVsbCxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImlucHV0XCIsIHsgdHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuY2xlYXJCdXR0b24sIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnF1ZXN0aW9uLmNsZWFyVmFsdWUoKTsgfSwgdmFsdWU6IHRoaXMucXVlc3Rpb24uY2xlYXJCdXR0b25DYXB0aW9uIH0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImZpZWxkc2V0XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldFNlbGVjdEJhc2VSb290Q3NzKCksIHJlZjogZnVuY3Rpb24gKGZpZWxkc2V0KSB7IHJldHVybiAoX3RoaXMuc2V0Q29udHJvbChmaWVsZHNldCkpOyB9LCByb2xlOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYVJvbGUsIFwiYXJpYS1yZXF1aXJlZFwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYVJlcXVpcmVkLCBcImFyaWEtbGFiZWxcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFMYWJlbCwgXCJhcmlhLWxhYmVsbGVkYnlcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFMYWJlbGxlZEJ5LCBcImFyaWEtZGVzY3JpYmVkYnlcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFEZXNjcmliZWRCeSwgXCJhcmlhLWludmFsaWRcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFJbnZhbGlkLCBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhRXJyb3JtZXNzYWdlIH0sXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uLmhhc0NvbHVtbnNcbiAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0Q29sdW1uZWRCb2R5KGNzc0NsYXNzZXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzLmdldEJvZHkoY3NzQ2xhc3NlcyksXG4gICAgICAgICAgICB0aGlzLmdldEZvb3RlcigpLFxuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi5pc090aGVyU2VsZWN0ZWQgPyB0aGlzLnJlbmRlck90aGVyKGNzc0NsYXNzZXMpIDogbnVsbCxcbiAgICAgICAgICAgIGNsZWFyQnV0dG9uKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXAucHJvdG90eXBlLmdldEZvb3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24uaGFzRm9vdEl0ZW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbi5mb290SXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtLCBpaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW5kZXJJdGVtKFwiaXRlbV9mXCIgKyBpaSwgaXRlbSwgZmFsc2UsIF90aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cC5wcm90b3R5cGUuZ2V0Q29sdW1uZWRCb2R5ID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5yb290TXVsdGlDb2x1bW4gfSwgdGhpcy5nZXRDb2x1bW5zKGNzc0NsYXNzZXMpKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXAucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFN0YXRlVmFsdWUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb24uY29sdW1ucy5tYXAoZnVuY3Rpb24gKGNvbHVtbiwgY2kpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGNvbHVtbi5tYXAoZnVuY3Rpb24gKGl0ZW0sIGlpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlckl0ZW0oXCJpdGVtXCIgKyBjaSArIGlpLCBpdGVtLCB2YWx1ZSwgY3NzQ2xhc3NlcywgXCJcIiArIGNpICsgaWkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsga2V5OiBcImNvbHVtblwiICsgY2ksIGNsYXNzTmFtZTogX3RoaXMucXVlc3Rpb24uZ2V0Q29sdW1uQ2xhc3MoKSwgcm9sZTogXCJwcmVzZW50YXRpb25cIiB9LCBpdGVtcykpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cC5wcm90b3R5cGUuZ2V0Qm9keSA9IGZ1bmN0aW9uIChjc3NDbGFzc2VzKSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLmJsb2NrZWRSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3NzQ2xhc3Nlcy5yb290Um93IH0sIHRoaXMuZ2V0SXRlbXMoY3NzQ2xhc3NlcywgdGhpcy5xdWVzdGlvbi5kYXRhQ2hvaWNlcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRnJhZ21lbnRcIl0sIG51bGwsIHRoaXMuZ2V0SXRlbXMoY3NzQ2xhc3NlcywgdGhpcy5xdWVzdGlvbi5ib2R5SXRlbXMpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cC5wcm90b3R5cGUuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoY3NzQ2xhc3NlcywgY2hvaWNlcykge1xuICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRTdGF0ZVZhbHVlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hvaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBjaG9pY2VzW2ldO1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVkSXRlbSA9IHRoaXMucmVuZGVySXRlbShcIml0ZW1cIiArIGksIGl0ZW0sIHZhbHVlLCBjc3NDbGFzc2VzLCBcIlwiICsgaSk7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKHJlbmRlcmVkSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFkaW9ncm91cC5wcm90b3R5cGUsIFwidGV4dFN0eWxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy97IGRpc3BsYXk6IFwiaW5saW5lXCIsIHBvc2l0aW9uOiBcInN0YXRpY1wiIH07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXAucHJvdG90eXBlLnJlbmRlck90aGVyID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMpIHtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRDb21tZW50QXJlYUNzcyh0cnVlKSB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3JlYWN0cXVlc3Rpb25fY29tbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiU3VydmV5UXVlc3Rpb25PdGhlclZhbHVlSXRlbVwiXSwgeyBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiwgb3RoZXJDc3M6IGNzc0NsYXNzZXMub3RoZXIsIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsIGlzRGlzcGxheU1vZGU6IHRoaXMuaXNEaXNwbGF5TW9kZSB9KSkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25SYWRpb2dyb3VwLnByb3RvdHlwZS5yZW5kZXJJdGVtID0gZnVuY3Rpb24gKGtleSwgaXRlbSwgdmFsdWUsIGNzc0NsYXNzZXMsIGluZGV4KSB7XG4gICAgICAgIHZhciByZW5kZXJlZEl0ZW0gPSBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQodGhpcy5xdWVzdGlvbi5pdGVtQ29tcG9uZW50LCB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uLFxuICAgICAgICAgICAgY3NzQ2xhc3NlczogY3NzQ2xhc3NlcyxcbiAgICAgICAgICAgIGlzRGlzcGxheU1vZGU6IHRoaXMuaXNEaXNwbGF5TW9kZSxcbiAgICAgICAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICAgICAgICB0ZXh0U3R5bGU6IHRoaXMudGV4dFN0eWxlLFxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgaXNDaGVja2VkOiB2YWx1ZSA9PT0gaXRlbS52YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzdXJ2ZXkgPSB0aGlzLnF1ZXN0aW9uLnN1cnZleTtcbiAgICAgICAgdmFyIHdyYXBwZWRJdGVtID0gbnVsbDtcbiAgICAgICAgaWYgKCEhc3VydmV5KSB7XG4gICAgICAgICAgICB3cmFwcGVkSXRlbSA9IF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlclwiXS53cmFwSXRlbVZhbHVlKHN1cnZleSwgcmVuZGVyZWRJdGVtLCB0aGlzLnF1ZXN0aW9uLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JhcHBlZEl0ZW0gIT09IG51bGwgJiYgd3JhcHBlZEl0ZW0gIT09IHZvaWQgMCA/IHdyYXBwZWRJdGVtIDogcmVuZGVyZWRJdGVtO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25SYWRpb2dyb3VwLnByb3RvdHlwZS5nZXRTdGF0ZVZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMucXVlc3Rpb24uaXNFbXB0eSgpID8gdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFZhbHVlIDogXCJcIjtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXA7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleVF1ZXN0aW9uRWxlbWVudEJhc2VcIl0pKTtcblxudmFyIFN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbShwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25DaGFuZ2UgPSBfdGhpcy5oYW5kbGVPbkNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlT25Nb3VzZURvd24gPSBfdGhpcy5oYW5kbGVPbk1vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbS5wcm90b3R5cGUuZ2V0U3RhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucXVlc3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW0ucHJvdG90eXBlLCBcInRleHRTdHlsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGV4dFN0eWxlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtLnByb3RvdHlwZSwgXCJpbmRleFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaW5kZXg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW0ucHJvdG90eXBlLCBcImlzQ2hlY2tlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXNDaGVja2VkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtLnByb3RvdHlwZSwgXCJoaWRlQ2FwdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaGlkZUNhcHRpb24gPT09IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbS5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIGlmICghX3N1cGVyLnByb3RvdHlwZS5zaG91bGRDb21wb25lbnRVcGRhdGUuY2FsbCh0aGlzLCBuZXh0UHJvcHMsIG5leHRTdGF0ZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghdGhpcy5xdWVzdGlvbilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuICghdGhpcy5xdWVzdGlvbi5jdXN0b21XaWRnZXQgfHxcbiAgICAgICAgICAgICEhdGhpcy5xdWVzdGlvbi5jdXN0b21XaWRnZXREYXRhLmlzTmVlZFJlbmRlciB8fFxuICAgICAgICAgICAgISF0aGlzLnF1ZXN0aW9uLmN1c3RvbVdpZGdldC53aWRnZXRKc29uLmlzRGVmYXVsdFJlbmRlciB8fFxuICAgICAgICAgICAgISF0aGlzLnF1ZXN0aW9uLmN1c3RvbVdpZGdldC53aWRnZXRKc29uLnJlbmRlcik7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbS5wcm90b3R5cGUuaGFuZGxlT25DaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5jbGlja0l0ZW1IYW5kbGVyKHRoaXMuaXRlbSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhZGlvSXRlbS5wcm90b3R5cGUuaGFuZGxlT25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5vbk1vdXNlRG93bigpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW0ucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5xdWVzdGlvbiAmJiAhIXRoaXMuaXRlbTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXRlbUNsYXNzID0gdGhpcy5xdWVzdGlvbi5nZXRJdGVtQ2xhc3ModGhpcy5pdGVtKTtcbiAgICAgICAgdmFyIGxhYmVsQ2xhc3MgPSB0aGlzLnF1ZXN0aW9uLmdldExhYmVsQ2xhc3ModGhpcy5pdGVtKTtcbiAgICAgICAgdmFyIGNvbnRyb2xMYWJlbENsYXNzID0gdGhpcy5xdWVzdGlvbi5nZXRDb250cm9sTGFiZWxDbGFzcyh0aGlzLml0ZW0pO1xuICAgICAgICB2YXIgaXRlbUxhYmVsID0gIXRoaXMuaGlkZUNhcHRpb24gPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNvbnRyb2xMYWJlbENsYXNzIH0sIHRoaXMucmVuZGVyTG9jU3RyaW5nKHRoaXMuaXRlbS5sb2NUZXh0LCB0aGlzLnRleHRTdHlsZSkpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogaXRlbUNsYXNzLCByb2xlOiBcInByZXNlbnRhdGlvblwiIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImxhYmVsXCIsIHsgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlT25Nb3VzZURvd24sIGNsYXNzTmFtZTogbGFiZWxDbGFzcyB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiaW5wdXRcIiwgeyBcImFyaWEtZXJyb3JtZXNzYWdlXCI6IHRoaXMucXVlc3Rpb24uYXJpYUVycm9ybWVzc2FnZSwgY2xhc3NOYW1lOiB0aGlzLmNzc0NsYXNzZXMuaXRlbUNvbnRyb2wsIGlkOiB0aGlzLnF1ZXN0aW9uLmdldEl0ZW1JZCh0aGlzLml0ZW0pLCB0eXBlOiBcInJhZGlvXCIsIG5hbWU6IHRoaXMucXVlc3Rpb24ucXVlc3Rpb25OYW1lLCBjaGVja2VkOiB0aGlzLmlzQ2hlY2tlZCwgdmFsdWU6IHRoaXMuaXRlbS52YWx1ZSwgZGlzYWJsZWQ6ICF0aGlzLnF1ZXN0aW9uLmdldEl0ZW1FbmFibGVkKHRoaXMuaXRlbSksIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZU9uQ2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuY3NzQ2xhc3Nlcy5tYXRlcmlhbERlY29yYXRvciA/XG4gICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3NDbGFzc2VzLm1hdGVyaWFsRGVjb3JhdG9yIH0sIHRoaXMucXVlc3Rpb24uaXRlbVN2Z0ljb24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzdmdcIiwgeyBjbGFzc05hbWU6IHRoaXMuY3NzQ2xhc3Nlcy5pdGVtRGVjb3JhdG9yIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ1c2VcIiwgeyB4bGlua0hyZWY6IHRoaXMucXVlc3Rpb24uaXRlbVN2Z0ljb24gfSkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwpIDpcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBpdGVtTGFiZWwpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25SYWRpb0l0ZW07XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN1cnZleS1yYWRpb2dyb3VwLWl0ZW1cIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uUmFkaW9JdGVtLCBwcm9wcyk7XG59KTtcbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJyYWRpb2dyb3VwXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvblJhZGlvZ3JvdXAsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fcmFua2luZy50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX3JhbmtpbmcudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25SYW5raW5nLCBTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmFua2luZ1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUmFua2luZzsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHN1cnZleW1vZGVsICovIFwiLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uUmFua2luZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25SYW5raW5nLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uUmFua2luZygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYW5raW5nLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25CYXNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25SYW5raW5nLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24uc2VsZWN0VG9SYW5rRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5yb290Q2xhc3MsIHJlZjogZnVuY3Rpb24gKHJvb3QpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKHJvb3QpKTsgfSB9LCB0aGlzLmdldEl0ZW1zKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1bnJhbmtlZEl0ZW0gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5yb290Q2xhc3MsIHJlZjogZnVuY3Rpb24gKHJvb3QpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKHJvb3QpKTsgfSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldENvbnRhaW5lckNsYXNzZXMoXCJmcm9tXCIpLCBcImRhdGEtcmFua2luZ1wiOiBcImZyb20tY29udGFpbmVyXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJdGVtcyh0aGlzLnF1ZXN0aW9uLnVuUmFua2luZ0Nob2ljZXMsIHVucmFua2VkSXRlbSksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24udW5SYW5raW5nQ2hvaWNlcy5sZW5ndGggPT09IDAgPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNvbnRhaW5lclBsYWNlaG9sZGVyIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTG9jU3RyaW5nKHRoaXMucXVlc3Rpb24ubG9jU2VsZWN0VG9SYW5rRW1wdHlSYW5rZWRBcmVhVGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiBcIikgOiBudWxsKSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNvbnRhaW5lcnNEaXZpZGVyIH0pLFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldENvbnRhaW5lckNsYXNzZXMoXCJ0b1wiKSwgXCJkYXRhLXJhbmtpbmdcIjogXCJ0by1jb250YWluZXJcIiB9LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEl0ZW1zKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24ucmFua2luZ0Nob2ljZXMubGVuZ3RoID09PSAwID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jb250YWluZXJQbGFjZWhvbGRlciB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY1NlbGVjdFRvUmFua0VtcHR5VW5yYW5rZWRBcmVhVGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiBcIikgOiBudWxsKSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhbmtpbmcucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKGNob2ljZXMsIHVucmFua2VkSXRlbSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoY2hvaWNlcyA9PT0gdm9pZCAwKSB7IGNob2ljZXMgPSB0aGlzLnF1ZXN0aW9uLnJhbmtpbmdDaG9pY2VzOyB9XG4gICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGNob2ljZXNbaV07XG4gICAgICAgICAgICBpdGVtcy5wdXNoKHRoaXNfMS5yZW5kZXJJdGVtKGl0ZW0sIGksIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnF1ZXN0aW9uLmhhbmRsZUtleWRvd24uY2FsbChfdGhpcy5xdWVzdGlvbiwgZXZlbnQsIGl0ZW0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucGVyc2lzdCgpO1xuICAgICAgICAgICAgICAgIC8vZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWVzdGlvbi5oYW5kbGVQb2ludGVyRG93bi5jYWxsKF90aGlzLnF1ZXN0aW9uLCBldmVudCwgaXRlbSwgZXZlbnQuY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgICB9LCB0aGlzXzEucXVlc3Rpb24uY3NzQ2xhc3NlcywgdGhpc18xLnF1ZXN0aW9uLmdldEl0ZW1DbGFzcyhpdGVtKSwgdGhpc18xLnF1ZXN0aW9uLCB1bnJhbmtlZEl0ZW0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hvaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgX2xvb3BfMShpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhbmtpbmcucHJvdG90eXBlLnJlbmRlckl0ZW0gPSBmdW5jdGlvbiAoaXRlbSwgaSwgaGFuZGxlS2V5ZG93biwgaGFuZGxlUG9pbnRlckRvd24sIGNzc0NsYXNzZXMsIGl0ZW1DbGFzcywgcXVlc3Rpb24sIHVucmFua2VkSXRlbSkge1xuICAgICAgICB2YXIga2V5ID0gaXRlbS52YWx1ZSArIFwiLVwiICsgaSArIFwiLWl0ZW1cIjtcbiAgICAgICAgdmFyIHRleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyhpdGVtLmxvY1RleHQpO1xuICAgICAgICB2YXIgaW5kZXggPSBpO1xuICAgICAgICB2YXIgaW5kZXhUZXh0ID0gdGhpcy5xdWVzdGlvbi5nZXROdW1iZXJCeUluZGV4KGkpO1xuICAgICAgICB2YXIgdGFiSW5kZXggPSB0aGlzLnF1ZXN0aW9uLmdldEl0ZW1UYWJJbmRleChpdGVtKTtcbiAgICAgICAgdmFyIHJlbmRlcmVkSXRlbSA9IChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtLCB7IGtleToga2V5LCB0ZXh0OiB0ZXh0LCBpbmRleDogaW5kZXgsIGluZGV4VGV4dDogaW5kZXhUZXh0LCBpdGVtVGFiSW5kZXg6IHRhYkluZGV4LCBoYW5kbGVLZXlkb3duOiBoYW5kbGVLZXlkb3duLCBoYW5kbGVQb2ludGVyRG93bjogaGFuZGxlUG9pbnRlckRvd24sIGNzc0NsYXNzZXM6IGNzc0NsYXNzZXMsIGl0ZW1DbGFzczogaXRlbUNsYXNzLCBxdWVzdGlvbjogcXVlc3Rpb24sIHVucmFua2VkSXRlbTogdW5yYW5rZWRJdGVtLCBpdGVtOiBpdGVtIH0pKTtcbiAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMucXVlc3Rpb24uc3VydmV5O1xuICAgICAgICB2YXIgd3JhcHBlZEl0ZW0gPSBudWxsO1xuICAgICAgICBpZiAoISFzdXJ2ZXkpIHtcbiAgICAgICAgICAgIHdyYXBwZWRJdGVtID0gX3JlYWN0c3VydmV5bW9kZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0U3VydmV5RWxlbWVudHNXcmFwcGVyXCJdLndyYXBJdGVtVmFsdWUoc3VydmV5LCByZW5kZXJlZEl0ZW0sIHRoaXMucXVlc3Rpb24sIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cmFwcGVkSXRlbSAhPT0gbnVsbCAmJiB3cmFwcGVkSXRlbSAhPT0gdm9pZCAwID8gd3JhcHBlZEl0ZW0gOiByZW5kZXJlZEl0ZW07XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25SYW5raW5nO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdKSk7XG5cbnZhciBTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW0oKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW0ucHJvdG90eXBlLCBcInRleHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnRleHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbS5wcm90b3R5cGUsIFwiaW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmluZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW0ucHJvdG90eXBlLCBcImluZGV4VGV4dFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaW5kZXhUZXh0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW0ucHJvdG90eXBlLCBcImhhbmRsZUtleWRvd25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmhhbmRsZUtleWRvd247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbS5wcm90b3R5cGUsIFwiaGFuZGxlUG9pbnRlckRvd25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmhhbmRsZVBvaW50ZXJEb3duO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW0ucHJvdG90eXBlLCBcImNzc0NsYXNzZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNzc0NsYXNzZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbS5wcm90b3R5cGUsIFwiaXRlbUNsYXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5pdGVtQ2xhc3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbS5wcm90b3R5cGUsIFwiaXRlbVRhYkluZGV4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5pdGVtVGFiSW5kZXg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5UXVlc3Rpb25SYW5raW5nSXRlbS5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW0ucHJvdG90eXBlLCBcInVucmFua2VkSXRlbVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMudW5yYW5rZWRJdGVtO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmFua2luZ0l0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtLnByb3RvdHlwZS5yZW5kZXJFbXB0eUljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzdmdcIiwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwidXNlXCIsIHsgeGxpbmtIcmVmOiB0aGlzLnF1ZXN0aW9uLmRhc2hTdmdJY29uIH0pKSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgdGFiSW5kZXg6IHRoaXMuaXRlbVRhYkluZGV4LCBjbGFzc05hbWU6IHRoaXMuaXRlbUNsYXNzLCBvbktleURvd246IHRoaXMuaGFuZGxlS2V5ZG93biwgb25Qb2ludGVyRG93bjogdGhpcy5oYW5kbGVQb2ludGVyRG93biwgXCJkYXRhLXN2LWRyb3AtdGFyZ2V0LXJhbmtpbmctaXRlbVwiOiB0aGlzLmluZGV4IH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IHRhYkluZGV4OiAtMSwgc3R5bGU6IHsgb3V0bGluZTogXCJub25lXCIgfSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzc0NsYXNzZXMuaXRlbUdob3N0Tm9kZSB9KSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3NDbGFzc2VzLml0ZW1Db250ZW50IH0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNzc0NsYXNzZXMuaXRlbUljb25Db250YWluZXIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3ZnXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldEljb25Ib3ZlckNzcygpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ1c2VcIiwgeyB4bGlua0hyZWY6IHRoaXMucXVlc3Rpb24uZHJhZ0Ryb3BTdmdJY29uIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3ZnXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmdldEljb25Gb2N1c0NzcygpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJ1c2VcIiwgeyB4bGlua0hyZWY6IHRoaXMucXVlc3Rpb24uYXJyb3dzU3ZnSWNvbiB9KSkpLFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5nZXRJdGVtSW5kZXhDbGFzc2VzKHRoaXMuaXRlbSkgfSwgKCF0aGlzLnVucmFua2VkSXRlbSAmJiB0aGlzLmluZGV4VGV4dCkgPyB0aGlzLmluZGV4VGV4dCA6IHRoaXMucmVuZGVyRW1wdHlJY29uKCkpLFxuICAgICAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5jc3NDbGFzc2VzLmNvbnRyb2xMYWJlbCB9LCB0aGlzLnRleHQpKSkpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvblJhbmtpbmdJdGVtO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcInJhbmtpbmdcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uUmFua2luZywgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9yYXRpbmcudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX3JhdGluZy50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uUmF0aW5nICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uUmF0aW5nXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25SYXRpbmc7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uUmF0aW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblJhdGluZywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvblJhdGluZyhwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGFuZGxlT25DbGljayA9IF90aGlzLmhhbmRsZU9uQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVF1ZXN0aW9uUmF0aW5nLnByb3RvdHlwZSwgXCJxdWVzdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25CYXNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5UXVlc3Rpb25SYXRpbmcucHJvdG90eXBlLmhhbmRsZU9uQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5zZXRWYWx1ZUZyb21DbGljayhldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdmFsdWU6IHRoaXMucXVlc3Rpb24udmFsdWUgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblJhdGluZy5wcm90b3R5cGUucmVuZGVySXRlbSA9IGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICB2YXIgcmVuZGVyZWRJdGVtID0gX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KHRoaXMucXVlc3Rpb24uaXRlbUNvbXBvbmVudCwge1xuICAgICAgICAgICAgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24sXG4gICAgICAgICAgICBpdGVtOiBpdGVtLFxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAga2V5OiBcInZhbHVlXCIgKyBpbmRleCxcbiAgICAgICAgICAgIGhhbmRsZU9uQ2xpY2s6IHRoaXMuaGFuZGxlT25DbGljayxcbiAgICAgICAgICAgIGlzRGlzcGxheU1vZGU6IHRoaXMuaXNEaXNwbGF5TW9kZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkSXRlbTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uUmF0aW5nLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIG1pblRleHQgPSB0aGlzLnF1ZXN0aW9uLm1pblJhdGVEZXNjcmlwdGlvblxuICAgICAgICAgICAgPyB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY01pblJhdGVEZXNjcmlwdGlvbilcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIG1heFRleHQgPSB0aGlzLnF1ZXN0aW9uLm1heFJhdGVEZXNjcmlwdGlvblxuICAgICAgICAgICAgPyB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLnF1ZXN0aW9uLmxvY01heFJhdGVEZXNjcmlwdGlvbilcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5yYXRpbmdSb290Q3NzLCByZWY6IGZ1bmN0aW9uIChkaXYpIHsgcmV0dXJuIChfdGhpcy5zZXRDb250cm9sKGRpdikpOyB9IH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImZpZWxkc2V0XCIsIHsgcm9sZTogXCJyYWRpb2dyb3VwXCIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImxlZ2VuZFwiLCB7IHJvbGU6IFwicHJlc2VudGF0aW9uXCIsIGNsYXNzTmFtZTogXCJzdi1oaWRkZW5cIiB9KSxcbiAgICAgICAgICAgICAgICAhIXRoaXMucXVlc3Rpb24uaGFzTWluTGFiZWwgPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMubWluVGV4dCB9LCBtaW5UZXh0KSA6IG51bGwsXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFJhdGVJdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7IHJldHVybiBfdGhpcy5yZW5kZXJJdGVtKGl0ZW0sIGluZGV4KTsgfSksXG4gICAgICAgICAgICAgICAgISF0aGlzLnF1ZXN0aW9uLmhhc01heExhYmVsID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLm1heFRleHQgfSwgbWF4VGV4dCkgOiBudWxsKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVF1ZXN0aW9uUmF0aW5nO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvbkVsZW1lbnRCYXNlXCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJyYXRpbmdcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uUmF0aW5nLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX3RhZ2JveC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fdGFnYm94LnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5UXVlc3Rpb25UYWdib3ggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5UXVlc3Rpb25UYWdib3hcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvblRhZ2JveDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZmFjdG9yeS50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Ryb3Bkb3duX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZHJvcGRvd24tYmFzZSAqLyBcIi4vc3JjL3JlYWN0L2Ryb3Bkb3duLWJhc2UudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90YWdib3hfaXRlbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90YWdib3gtaXRlbSAqLyBcIi4vc3JjL3JlYWN0L3RhZ2JveC1pdGVtLnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdGFnYm94X2ZpbHRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90YWdib3gtZmlsdGVyICovIFwiLi9zcmMvcmVhY3QvdGFnYm94LWZpbHRlci50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG52YXIgU3VydmV5UXVlc3Rpb25UYWdib3ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVF1ZXN0aW9uVGFnYm94LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uVGFnYm94KHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgU3VydmV5UXVlc3Rpb25UYWdib3gucHJvdG90eXBlLnJlbmRlckl0ZW0gPSBmdW5jdGlvbiAoa2V5LCBpdGVtKSB7XG4gICAgICAgIHZhciByZW5kZXJlZEl0ZW0gPSAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX3RhZ2JveF9pdGVtX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW1cIl0sIHsga2V5OiBrZXksIHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uLCBpdGVtOiBpdGVtIH0pKTtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkSXRlbTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uVGFnYm94LnByb3RvdHlwZS5yZW5kZXJJbnB1dCA9IGZ1bmN0aW9uIChkcm9wZG93bkxpc3RNb2RlbCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZHJvcGRvd25NdWx0aVNlbGVjdExpc3RNb2RlbCA9IGRyb3Bkb3duTGlzdE1vZGVsO1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnF1ZXN0aW9uLnNlbGVjdGVkQ2hvaWNlcy5tYXAoZnVuY3Rpb24gKGNob2ljZSwgaW5kZXgpIHsgcmV0dXJuIF90aGlzLnJlbmRlckl0ZW0oXCJpdGVtXCIgKyBpbmRleCwgY2hvaWNlKTsgfSk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBpZDogdGhpcy5xdWVzdGlvbi5pbnB1dElkLCBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uZ2V0Q29udHJvbENsYXNzKCksIHRhYkluZGV4OiBkcm9wZG93bkxpc3RNb2RlbC5ub1RhYkluZGV4ID8gdW5kZWZpbmVkIDogMCwgXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5xdWVzdGlvbi5pc0lucHV0UmVhZE9ubHksIHJlcXVpcmVkOiB0aGlzLnF1ZXN0aW9uLmlzUmVxdWlyZWQsIG9uS2V5RG93bjogdGhpcy5rZXloYW5kbGVyLCBvbkJsdXI6IHRoaXMuYmx1ciwgcm9sZTogdGhpcy5xdWVzdGlvbi5hcmlhUm9sZSwgXCJhcmlhLXJlcXVpcmVkXCI6IHRoaXMucXVlc3Rpb24uYXJpYVJlcXVpcmVkLCBcImFyaWEtbGFiZWxcIjogdGhpcy5xdWVzdGlvbi5hcmlhTGFiZWwsIFwiYXJpYS1pbnZhbGlkXCI6IHRoaXMucXVlc3Rpb24uYXJpYUludmFsaWQsIFwiYXJpYS1lcnJvcm1lc3NhZ2VcIjogdGhpcy5xdWVzdGlvbi5hcmlhRXJyb3JtZXNzYWdlLCBcImFyaWEtZXhwYW5kZWRcIjogdGhpcy5xdWVzdGlvbi5hcmlhRXhwYW5kZWQgPT09IG51bGwgPyB1bmRlZmluZWQgOiB0aGlzLnF1ZXN0aW9uLmFyaWFFeHBhbmRlZCA9PT0gXCJ0cnVlXCIsIFwiYXJpYS1jb250cm9sc1wiOiBkcm9wZG93bkxpc3RNb2RlbC5saXN0RWxlbWVudElkLCBcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiOiBkcm9wZG93bkxpc3RNb2RlbC5hcmlhQWN0aXZlZGVzY2VuZGFudCB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5jb250cm9sVmFsdWUgfSxcbiAgICAgICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfdGFnYm94X2ZpbHRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiVGFnYm94RmlsdGVyU3RyaW5nXCJdLCB7IG1vZGVsOiBkcm9wZG93bk11bHRpU2VsZWN0TGlzdE1vZGVsLCBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiB9KSksXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNsZWFyQnV0dG9uKCkpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uVGFnYm94LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIGNvbW1lbnQgPSB0aGlzLnF1ZXN0aW9uLmlzT3RoZXJTZWxlY3RlZCA/IHRoaXMucmVuZGVyT3RoZXIoY3NzQ2xhc3NlcykgOiBudWxsO1xuICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5yZW5kZXJTZWxlY3QoY3NzQ2xhc3Nlcyk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24ucmVuZGVyQ3NzUm9vdCB9LFxuICAgICAgICAgICAgc2VsZWN0LFxuICAgICAgICAgICAgY29tbWVudCkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25UYWdib3gucHJvdG90eXBlLnJlbmRlclJlYWRPbmx5RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb24ubG9jUmVhZE9ubHlUZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJMb2NTdHJpbmcodGhpcy5xdWVzdGlvbi5sb2NSZWFkT25seVRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvblRhZ2JveDtcbn0oX2Ryb3Bkb3duX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN1cnZleVF1ZXN0aW9uRHJvcGRvd25CYXNlXCJdKSk7XG5cbl9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0UXVlc3Rpb25GYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyUXVlc3Rpb24oXCJ0YWdib3hcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uVGFnYm94LCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX3RleHQudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl90ZXh0LnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uVGV4dCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblRleHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvblRleHQ7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19jaGFyYWN0ZXJfY291bnRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL2NoYXJhY3Rlci1jb3VudGVyICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9jaGFyYWN0ZXItY291bnRlci50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uVGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25UZXh0LCBfc3VwZXIpO1xuICAgIC8vY29udHJvbFJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uVGV4dChwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIC8vdGhpcy5jb250cm9sUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgfVxuICAgIFN1cnZleVF1ZXN0aW9uVGV4dC5wcm90b3R5cGUucmVuZGVySW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBpbnB1dENsYXNzID0gdGhpcy5xdWVzdGlvbi5nZXRDb250cm9sQ2xhc3MoKTtcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFBsYWNlaG9sZGVyO1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbi5pc1JlYWRPbmx5UmVuZGVyRGl2KCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCBudWxsLCB0aGlzLnF1ZXN0aW9uLmlucHV0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb3VudGVyID0gISF0aGlzLnF1ZXN0aW9uLmdldE1heExlbmd0aCgpID8gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9jb21wb25lbnRzX2NoYXJhY3Rlcl9jb3VudGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJDaGFyYWN0ZXJDb3VudGVyQ29tcG9uZW50XCJdLCB7IGNvdW50ZXI6IHRoaXMucXVlc3Rpb24uY2hhcmFjdGVyQ291bnRlciwgcmVtYWluaW5nQ2hhcmFjdGVyQ291bnRlcjogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLnJlbWFpbmluZ0NoYXJhY3RlckNvdW50ZXIgfSkpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRnJhZ21lbnRcIl0sIG51bGwsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImlucHV0XCIsIHsgaWQ6IHRoaXMucXVlc3Rpb24uaW5wdXRJZCwgZGlzYWJsZWQ6IHRoaXMuaXNEaXNwbGF5TW9kZSwgY2xhc3NOYW1lOiBpbnB1dENsYXNzLCB0eXBlOiB0aGlzLnF1ZXN0aW9uLmlucHV0VHlwZSwgXG4gICAgICAgICAgICAgICAgLy9yZWY9e3RoaXMuY29udHJvbFJlZn1cbiAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIChpbnB1dCkgeyByZXR1cm4gKF90aGlzLnNldENvbnRyb2woaW5wdXQpKTsgfSwgc3R5bGU6IHRoaXMucXVlc3Rpb24uaW5wdXRTdHlsZSwgbWF4TGVuZ3RoOiB0aGlzLnF1ZXN0aW9uLmdldE1heExlbmd0aCgpLCBtaW46IHRoaXMucXVlc3Rpb24ucmVuZGVyZWRNaW4sIG1heDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZE1heCwgc3RlcDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZFN0ZXAsIHNpemU6IHRoaXMucXVlc3Rpb24uaW5wdXRTaXplLCBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsIGxpc3Q6IHRoaXMucXVlc3Rpb24uZGF0YUxpc3RJZCwgYXV0b0NvbXBsZXRlOiB0aGlzLnF1ZXN0aW9uLmF1dG9jb21wbGV0ZSwgb25CbHVyOiB0aGlzLnF1ZXN0aW9uLm9uQmx1ciwgb25Gb2N1czogdGhpcy5xdWVzdGlvbi5vbkZvY3VzLCBvbkNoYW5nZTogdGhpcy5xdWVzdGlvbi5vbkNoYW5nZSwgb25LZXlVcDogdGhpcy5xdWVzdGlvbi5vbktleVVwLCBvbktleURvd246IHRoaXMucXVlc3Rpb24ub25LZXlEb3duLCBvbkNvbXBvc2l0aW9uVXBkYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLnF1ZXN0aW9uLm9uQ29tcG9zaXRpb25VcGRhdGUoZXZlbnQubmF0aXZlRXZlbnQpOyB9LCBcImFyaWEtcmVxdWlyZWRcIjogdGhpcy5xdWVzdGlvbi5hMTF5X2lucHV0X2FyaWFSZXF1aXJlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhTGFiZWwsIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhTGFiZWxsZWRCeSwgXCJhcmlhLWRlc2NyaWJlZGJ5XCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhRGVzY3JpYmVkQnksIFwiYXJpYS1pbnZhbGlkXCI6IHRoaXMucXVlc3Rpb24uYTExeV9pbnB1dF9hcmlhSW52YWxpZCwgXCJhcmlhLWVycm9ybWVzc2FnZVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUVycm9ybWVzc2FnZSB9KSxcbiAgICAgICAgICAgIGNvdW50ZXIpKTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uVGV4dC5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnF1ZXN0aW9uLmRhdGFMaXN0SWQgP1xuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgbnVsbCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcklucHV0KCksXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEYXRhTGlzdCgpKSA6XG4gICAgICAgICAgICB0aGlzLnJlbmRlcklucHV0KCkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25UZXh0LnByb3RvdHlwZS5zZXRWYWx1ZUNvcmUgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbi5pbnB1dFZhbHVlID0gbmV3VmFsdWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlRdWVzdGlvblRleHQucHJvdG90eXBlLmdldFZhbHVlQ29yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb24uaW5wdXRWYWx1ZTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uVGV4dC5wcm90b3R5cGUucmVuZGVyRGF0YUxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5xdWVzdGlvbi5kYXRhTGlzdElkKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMucXVlc3Rpb24uZGF0YUxpc3Q7XG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2gocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJvcHRpb25cIiwgeyBrZXk6IFwiaXRlbVwiICsgaSwgdmFsdWU6IGl0ZW1zW2ldIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkYXRhbGlzdFwiLCB7IGlkOiB0aGlzLnF1ZXN0aW9uLmRhdGFMaXN0SWQgfSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25UZXh0O1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJTdXJ2ZXlRdWVzdGlvblVuY29udHJvbGxlZEVsZW1lbnRcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcInRleHRcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVF1ZXN0aW9uVGV4dCwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG5cblxudmFyIFJlYWN0U3VydmV5RWxlbWVudHNXcmFwcGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlYWN0U3VydmV5RWxlbWVudHNXcmFwcGVyKCkge1xuICAgIH1cbiAgICBSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlci53cmFwUm93ID0gZnVuY3Rpb24gKHN1cnZleSwgZWxlbWVudCwgcm93KSB7XG4gICAgICAgIHZhciBjb21wb25lbnROYW1lID0gc3VydmV5LmdldFJvd1dyYXBwZXJDb21wb25lbnROYW1lKHJvdyk7XG4gICAgICAgIHZhciBjb21wb25lbnREYXRhID0gc3VydmV5LmdldFJvd1dyYXBwZXJDb21wb25lbnREYXRhKHJvdyk7XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TmFtZSwge1xuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIHJvdzogcm93LFxuICAgICAgICAgICAgY29tcG9uZW50RGF0YTogY29tcG9uZW50RGF0YSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlci53cmFwRWxlbWVudCA9IGZ1bmN0aW9uIChzdXJ2ZXksIGVsZW1lbnQsIHF1ZXN0aW9uKSB7XG4gICAgICAgIHZhciBjb21wb25lbnROYW1lID0gc3VydmV5LmdldEVsZW1lbnRXcmFwcGVyQ29tcG9uZW50TmFtZShxdWVzdGlvbik7XG4gICAgICAgIHZhciBjb21wb25lbnREYXRhID0gc3VydmV5LmdldEVsZW1lbnRXcmFwcGVyQ29tcG9uZW50RGF0YShxdWVzdGlvbik7XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TmFtZSwge1xuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbixcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGE6IGNvbXBvbmVudERhdGEsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUmVhY3RTdXJ2ZXlFbGVtZW50c1dyYXBwZXIud3JhcFF1ZXN0aW9uQ29udGVudCA9IGZ1bmN0aW9uIChzdXJ2ZXksIGVsZW1lbnQsIHF1ZXN0aW9uKSB7XG4gICAgICAgIHZhciBjb21wb25lbnROYW1lID0gc3VydmV5LmdldFF1ZXN0aW9uQ29udGVudFdyYXBwZXJDb21wb25lbnROYW1lKHF1ZXN0aW9uKTtcbiAgICAgICAgdmFyIGNvbXBvbmVudERhdGEgPSBzdXJ2ZXkuZ2V0RWxlbWVudFdyYXBwZXJDb21wb25lbnREYXRhKHF1ZXN0aW9uKTtcbiAgICAgICAgcmV0dXJuIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UuY3JlYXRlRWxlbWVudChjb21wb25lbnROYW1lLCB7XG4gICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLFxuICAgICAgICAgICAgY29tcG9uZW50RGF0YTogY29tcG9uZW50RGF0YSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlci53cmFwSXRlbVZhbHVlID0gZnVuY3Rpb24gKHN1cnZleSwgZWxlbWVudCwgcXVlc3Rpb24sIGl0ZW0pIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBzdXJ2ZXkuZ2V0SXRlbVZhbHVlV3JhcHBlckNvbXBvbmVudE5hbWUoaXRlbSwgcXVlc3Rpb24pO1xuICAgICAgICB2YXIgY29tcG9uZW50RGF0YSA9IHN1cnZleS5nZXRJdGVtVmFsdWVXcmFwcGVyQ29tcG9uZW50RGF0YShpdGVtLCBxdWVzdGlvbik7XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TmFtZSwge1xuICAgICAgICAgICAga2V5OiBlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQua2V5LFxuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbixcbiAgICAgICAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICAgICAgICBjb21wb25lbnREYXRhOiBjb21wb25lbnREYXRhLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlYWN0U3VydmV5RWxlbWVudHNXcmFwcGVyLndyYXBNYXRyaXhDZWxsID0gZnVuY3Rpb24gKHN1cnZleSwgZWxlbWVudCwgY2VsbCwgcmVhc29uKSB7XG4gICAgICAgIGlmIChyZWFzb24gPT09IHZvaWQgMCkgeyByZWFzb24gPSBcImNlbGxcIjsgfVxuICAgICAgICB2YXIgY29tcG9uZW50TmFtZSA9IHN1cnZleS5nZXRFbGVtZW50V3JhcHBlckNvbXBvbmVudE5hbWUoY2VsbCwgcmVhc29uKTtcbiAgICAgICAgdmFyIGNvbXBvbmVudERhdGEgPSBzdXJ2ZXkuZ2V0RWxlbWVudFdyYXBwZXJDb21wb25lbnREYXRhKGNlbGwsIHJlYXNvbik7XG4gICAgICAgIHJldHVybiBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TmFtZSwge1xuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIGNlbGw6IGNlbGwsXG4gICAgICAgICAgICBjb21wb25lbnREYXRhOiBjb21wb25lbnREYXRhLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlcjtcbn0oKSk7XG5cbnN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTdXJ2ZXlNb2RlbFwiXS5wbGF0Zm9ybSA9IFwicmVhY3RcIjtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHRpbWVycGFuZWwudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3QvcmVhY3R0aW1lcnBhbmVsLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVRpbWVyUGFuZWwgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5VGltZXJQYW5lbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVRpbWVyUGFuZWw7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbiAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24udHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxudmFyIFN1cnZleVRpbWVyUGFuZWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleVRpbWVyUGFuZWwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5VGltZXJQYW5lbChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY2lyY2xlTGVuZ3RoID0gNDQwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1cnZleVRpbWVyUGFuZWwucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXJNb2RlbDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlUaW1lclBhbmVsLnByb3RvdHlwZSwgXCJ0aW1lck1vZGVsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlUaW1lclBhbmVsLnByb3RvdHlwZSwgXCJwcm9ncmVzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIC10aGlzLnRpbWVyTW9kZWwucHJvZ3Jlc3MgKiB0aGlzLmNpcmNsZUxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVRpbWVyUGFuZWwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVyTW9kZWwuaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMudGltZXJNb2RlbC5zdXJ2ZXkuZ2V0Q3NzKCkudGltZXJSb290IH0sIHRoaXMudGltZXJNb2RlbC50ZXh0KTtcbiAgICAgICAgaWYgKHRoaXMudGltZXJNb2RlbC5zaG93VGltZXJBc0Nsb2NrKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7IHN0cm9rZURhc2hhcnJheTogdGhpcy5jaXJjbGVMZW5ndGgsIHN0cm9rZURhc2hvZmZzZXQ6IHRoaXMucHJvZ3Jlc3MgfTtcbiAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9ICh0aGlzLnRpbWVyTW9kZWwuc2hvd1Byb2dyZXNzID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN2Z0ljb25cIl0sIHsgY2xhc3NOYW1lOiB0aGlzLnRpbWVyTW9kZWwuZ2V0UHJvZ3Jlc3NDc3MoKSwgc3R5bGU6IHN0eWxlLCBpY29uTmFtZTogXCJpY29uLXRpbWVyY2lyY2xlXCIsIHNpemU6IFwiYXV0b1wiIH0pIDogbnVsbCk7XG4gICAgICAgICAgICByZXN1bHQgPVxuICAgICAgICAgICAgICAgIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy50aW1lck1vZGVsLnJvb3RDc3MgfSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnRpbWVyTW9kZWwudGV4dENvbnRhaW5lckNzcyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnRpbWVyTW9kZWwubWFqb3JUZXh0Q3NzIH0sIHRoaXMudGltZXJNb2RlbC5jbG9ja01ham9yVGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy50aW1lck1vZGVsLmNsb2NrTWlub3JUZXh0ID8gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnRpbWVyTW9kZWwubWlub3JUZXh0Q3NzIH0sIHRoaXMudGltZXJNb2RlbC5jbG9ja01pbm9yVGV4dCkgOiBudWxsKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleVRpbWVyUGFuZWw7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIlJlYWN0U3VydmV5RWxlbWVudFwiXSkpO1xuXG5fZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLnJlZ2lzdGVyRWxlbWVudChcInN2LXRpbWVycGFuZWxcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFN1cnZleVRpbWVyUGFuZWwsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3Jvdy50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC9yb3cudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5Um93ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVJvd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleVJvdzsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0cXVlc3Rpb25fZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L3JlYWN0cXVlc3Rpb25fZWxlbWVudC50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudCAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVhY3RzdXJ2ZXltb2RlbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHN1cnZleW1vZGVsICovIFwiLi9zcmMvcmVhY3QvcmVhY3RzdXJ2ZXltb2RlbC50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cblxuXG52YXIgU3VydmV5Um93ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlSb3csIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3VydmV5Um93KHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5yb290UmVmID0gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZVJlZlwiXSgpO1xuICAgICAgICBfdGhpcy5yZWNhbGN1bGF0ZUNzcygpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1cnZleVJvdy5wcm90b3R5cGUucmVjYWxjdWxhdGVDc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucm93LnZpc2libGVFbGVtZW50cy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIGVsZW1lbnQuY3NzQ2xhc3NlczsgfSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlSb3cucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm93O1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleVJvdy5wcm90b3R5cGUsIFwicm93XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5yb3c7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5Um93LnByb3RvdHlwZSwgXCJzdXJ2ZXlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnN1cnZleTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlSb3cucHJvdG90eXBlLCBcImNyZWF0b3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNyZWF0b3I7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5Um93LnByb3RvdHlwZSwgXCJjc3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNzcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVJvdy5wcm90b3R5cGUuY2FuUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnJvdyAmJiAhIXRoaXMuc3VydmV5ICYmICEhdGhpcy5jcmVhdG9yO1xuICAgIH07XG4gICAgU3VydmV5Um93LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5yb3cudmlzaWJsZUVsZW1lbnRzLm1hcChmdW5jdGlvbiAoZWxlbWVudCwgZWxlbWVudEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBlbGVtZW50SW5kZXggPyBcIi1cIiArIGVsZW1lbnRJbmRleCA6IDA7XG4gICAgICAgICAgICB2YXIga2V5ID0gZWxlbWVudC5uYW1lICsgaW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJTdXJ2ZXlSb3dFbGVtZW50XCJdLCB7IGVsZW1lbnQ6IGVsZW1lbnQsIGluZGV4OiBlbGVtZW50SW5kZXgsIHJvdzogX3RoaXMucm93LCBzdXJ2ZXk6IF90aGlzLnN1cnZleSwgY3JlYXRvcjogX3RoaXMuY3JlYXRvciwgY3NzOiBfdGhpcy5jc3MsIGtleToga2V5IH0pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyByZWY6IHRoaXMucm9vdFJlZiwgY2xhc3NOYW1lOiB0aGlzLnJvdy5nZXRSb3dDc3MoKSB9LCBlbGVtZW50cykpO1xuICAgIH07XG4gICAgU3VydmV5Um93LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3VydmV5ID0gdGhpcy5zdXJ2ZXk7XG4gICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5yZW5kZXJFbGVtZW50Q29udGVudCgpO1xuICAgICAgICB2YXIgd3JhcHBlciA9IF9yZWFjdHN1cnZleW1vZGVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJSZWFjdFN1cnZleUVsZW1lbnRzV3JhcHBlclwiXS53cmFwUm93KHN1cnZleSwgY29udGVudCwgdGhpcy5yb3cpO1xuICAgICAgICByZXR1cm4gd3JhcHBlciB8fCBjb250ZW50O1xuICAgIH07XG4gICAgU3VydmV5Um93LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB2YXIgZWwgPSB0aGlzLnJvb3RSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKHRoaXMucm9vdFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnJvdy5zZXRSb290RWxlbWVudCh0aGlzLnJvb3RSZWYuY3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhZWwgJiYgIXRoaXMucm93LmlzTmVlZFJlbmRlcikge1xuICAgICAgICAgICAgdmFyIHJvd0NvbnRhaW5lckRpdiA9IGVsO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucm93LnN0YXJ0TGF6eVJlbmRlcmluZyhyb3dDb250YWluZXJEaXYpO1xuICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdXJ2ZXlSb3cucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICBpZiAoIV9zdXBlci5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlLmNhbGwodGhpcywgbmV4dFByb3BzLCBuZXh0U3RhdGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAobmV4dFByb3BzLnJvdyAhPT0gdGhpcy5yb3cpIHtcbiAgICAgICAgICAgIG5leHRQcm9wcy5yb3cuaXNOZWVkUmVuZGVyID0gdGhpcy5yb3cuaXNOZWVkUmVuZGVyO1xuICAgICAgICAgICAgbmV4dFByb3BzLnJvdy5zZXRSb290RWxlbWVudCh0aGlzLnJvb3RSZWYuY3VycmVudCk7XG4gICAgICAgICAgICB0aGlzLnJvdy5zZXRSb290RWxlbWVudCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5zdG9wTGF6eVJlbmRlcmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVjYWxjdWxhdGVDc3MoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTdXJ2ZXlSb3cucHJvdG90eXBlLnN0b3BMYXp5UmVuZGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJvdy5zdG9wTGF6eVJlbmRlcmluZygpO1xuICAgICAgICB0aGlzLnJvdy5pc05lZWRSZW5kZXIgPSAhdGhpcy5yb3cuaXNMYXp5UmVuZGVyaW5nKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlSb3cucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucm93LnNldFJvb3RFbGVtZW50KHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMuc3RvcExhenlSZW5kZXJpbmcoKTtcbiAgICB9O1xuICAgIFN1cnZleVJvdy5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBlbGVtZW50SW5kZXgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gZWxlbWVudEluZGV4ID8gXCItXCIgKyBlbGVtZW50SW5kZXggOiAwO1xuICAgICAgICB2YXIgZWxlbWVudFR5cGUgPSBlbGVtZW50LmdldFR5cGUoKTtcbiAgICAgICAgaWYgKCFfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJSZWFjdEVsZW1lbnRGYWN0b3J5XCJdLkluc3RhbmNlLmlzRWxlbWVudFJlZ2lzdGVyZWQoZWxlbWVudFR5cGUpKSB7XG4gICAgICAgICAgICBlbGVtZW50VHlwZSA9IFwicXVlc3Rpb25cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5jcmVhdGVFbGVtZW50KGVsZW1lbnRUeXBlLCB7XG4gICAgICAgICAgICBrZXk6IGVsZW1lbnQubmFtZSArIGluZGV4LFxuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIGNyZWF0b3I6IHRoaXMuY3JlYXRvcixcbiAgICAgICAgICAgIHN1cnZleTogdGhpcy5zdXJ2ZXksXG4gICAgICAgICAgICBjc3M6IHRoaXMuY3NzLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlSb3c7XG59KF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN1cnZleUVsZW1lbnRCYXNlXCJdKSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9zaWduYXR1cmVwYWQudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3Qvc2lnbmF0dXJlcGFkLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uU2lnbmF0dXJlUGFkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleVF1ZXN0aW9uU2lnbmF0dXJlUGFkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5UXVlc3Rpb25TaWduYXR1cmVQYWQ7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9mYWN0b3J5LnRzeFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uICovIFwiLi9zcmMvcmVhY3QvY29tcG9uZW50cy9zdmctaWNvbi9zdmctaWNvbi50c3hcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfbG9hZGluZ19pbmRpY2F0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9sb2FkaW5nLWluZGljYXRvciAqLyBcIi4vc3JjL3JlYWN0L2NvbXBvbmVudHMvbG9hZGluZy1pbmRpY2F0b3IudHN4XCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uU2lnbmF0dXJlUGFkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdXJ2ZXlRdWVzdGlvblNpZ25hdHVyZVBhZCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlRdWVzdGlvblNpZ25hdHVyZVBhZChwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7IHZhbHVlOiBfdGhpcy5xdWVzdGlvbi52YWx1ZSB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvblNpZ25hdHVyZVBhZC5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uQmFzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleVF1ZXN0aW9uU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5yZW5kZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3NlcztcbiAgICAgICAgdmFyIGxvYWRpbmdJbmRpY2F0b3IgPSB0aGlzLnF1ZXN0aW9uLnNob3dMb2FkaW5nSW5kaWNhdG9yID8gdGhpcy5yZW5kZXJMb2FkaW5nSW5kaWNhdG9yKCkgOiBudWxsO1xuICAgICAgICB2YXIgY2xlYXJCdXR0b24gPSB0aGlzLnJlbmRlckNsZWFuQnV0dG9uKCk7XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMucm9vdCwgcmVmOiBmdW5jdGlvbiAocm9vdCkgeyByZXR1cm4gKF90aGlzLnNldENvbnRyb2wocm9vdCkpOyB9LCBzdHlsZTogeyB3aWR0aDogdGhpcy5xdWVzdGlvbi5yZW5kZXJlZENhbnZhc1dpZHRoIH0gfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLnBsYWNlaG9sZGVyLCBzdHlsZTogeyBkaXNwbGF5OiB0aGlzLnF1ZXN0aW9uLm5lZWRTaG93UGxhY2Vob2xkZXIoKSA/IFwiXCIgOiBcIm5vbmVcIiB9IH0sIHRoaXMucmVuZGVyTG9jU3RyaW5nKHRoaXMucXVlc3Rpb24ubG9jUGxhY2Vob2xkZXIpKSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIG51bGwsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCYWNrZ3JvdW5kSW1hZ2UoKSxcbiAgICAgICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImNhbnZhc1wiLCB7IHRhYkluZGV4OiAtMSwgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuY2FudmFzLCBvbkJsdXI6IHRoaXMucXVlc3Rpb24ub25CbHVyIH0pKSxcbiAgICAgICAgICAgIGNsZWFyQnV0dG9uLFxuICAgICAgICAgICAgbG9hZGluZ0luZGljYXRvcikpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25TaWduYXR1cmVQYWQucHJvdG90eXBlLnJlbmRlckJhY2tncm91bmRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnF1ZXN0aW9uLmJhY2tncm91bmRJbWFnZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJpbWdcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5iYWNrZ3JvdW5kSW1hZ2UsIHNyYzogdGhpcy5xdWVzdGlvbi5iYWNrZ3JvdW5kSW1hZ2UsIHN0eWxlOiB7IHdpZHRoOiB0aGlzLnF1ZXN0aW9uLnJlbmRlcmVkQ2FudmFzV2lkdGggfSB9KTtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5yZW5kZXJMb2FkaW5nSW5kaWNhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5sb2FkaW5nSW5kaWNhdG9yIH0sXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19sb2FkaW5nX2luZGljYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiTG9hZGluZ0luZGljYXRvckNvbXBvbmVudFwiXSwgbnVsbCkpO1xuICAgIH07XG4gICAgU3VydmV5UXVlc3Rpb25TaWduYXR1cmVQYWQucHJvdG90eXBlLnJlbmRlckNsZWFuQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24uY2FuU2hvd0NsZWFyQnV0dG9uKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzO1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzc0NsYXNzZXMuY29udHJvbHMgfSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBjc3NDbGFzc2VzLmNsZWFyQnV0dG9uLCB0aXRsZTogdGhpcy5xdWVzdGlvbi5jbGVhckJ1dHRvbkNhcHRpb24sIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnF1ZXN0aW9uLmNsZWFyVmFsdWUoKTsgfSB9LCB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuY2xlYXJCdXR0b25JY29uSWQgPyByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShfY29tcG9uZW50c19zdmdfaWNvbl9zdmdfaWNvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3ZnSWNvblwiXSwgeyBpY29uTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNsZWFyQnV0dG9uSWNvbklkLCBzaXplOiBcImF1dG9cIiB9KSA6IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCBudWxsLCBcIlxcdTI3MTZcIikpKTtcbiAgICB9O1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvblNpZ25hdHVyZVBhZDtcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiU3VydmV5UXVlc3Rpb25FbGVtZW50QmFzZVwiXSkpO1xuXG5fcmVhY3RxdWVzdGlvbl9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJSZWFjdFF1ZXN0aW9uRmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlclF1ZXN0aW9uKFwic2lnbmF0dXJlcGFkXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHJldHVybiByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShTdXJ2ZXlRdWVzdGlvblNpZ25hdHVyZVBhZCwgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3Qvc3RyaW5nLWVkaXRvci50c3hcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3Qvc3RyaW5nLWVkaXRvci50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogU3VydmV5TG9jU3RyaW5nRWRpdG9yICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUxvY1N0cmluZ0VkaXRvclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleUxvY1N0cmluZ0VkaXRvcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovIFwicmVhY3RcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VydmV5LWNvcmUgKi8gXCJzdXJ2ZXktY29yZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudC1mYWN0b3J5ICovIFwiLi9zcmMvcmVhY3QvZWxlbWVudC1mYWN0b3J5LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleUxvY1N0cmluZ0VkaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5TG9jU3RyaW5nRWRpdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleUxvY1N0cmluZ0VkaXRvcihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub25JbnB1dCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMubG9jU3RyLnRleHQgPSBldmVudC50YXJnZXQuaW5uZXJUZXh0O1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnN0YXRlID0geyBjaGFuZ2VkOiAwIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUxvY1N0cmluZ0VkaXRvci5wcm90b3R5cGUsIFwibG9jU3RyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5sb2NTdHI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5TG9jU3RyaW5nRWRpdG9yLnByb3RvdHlwZSwgXCJzdHlsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc3R5bGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlMb2NTdHJpbmdFZGl0b3IucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMubG9jU3RyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMubG9jU3RyLm9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0U3RhdGUoeyBjaGFuZ2VkOiBzZWxmLnN0YXRlLmNoYW5nZWQgKyAxIH0pO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgU3VydmV5TG9jU3RyaW5nRWRpdG9yLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxvY1N0cilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5sb2NTdHIub25DaGFuZ2VkID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIH07XG4gICAgU3VydmV5TG9jU3RyaW5nRWRpdG9yLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5sb2NTdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxvY1N0ci5oYXNIdG1sKSB7XG4gICAgICAgICAgICB2YXIgaHRtbFZhbHVlID0geyBfX2h0bWw6IHRoaXMubG9jU3RyLnJlbmRlcmVkSHRtbCB9O1xuICAgICAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdi1zdHJpbmctZWRpdG9yXCIsIGNvbnRlbnRFZGl0YWJsZTogXCJ0cnVlXCIsIHN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZzogdHJ1ZSwgc3R5bGU6IHRoaXMuc3R5bGUsIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiBodG1sVmFsdWUsIG9uQmx1cjogdGhpcy5vbklucHV0LCBvbkNsaWNrOiB0aGlzLm9uQ2xpY2sgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3Ytc3RyaW5nLWVkaXRvclwiLCBjb250ZW50RWRpdGFibGU6IFwidHJ1ZVwiLCBzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmc6IHRydWUsIHN0eWxlOiB0aGlzLnN0eWxlLCBvbkJsdXI6IHRoaXMub25JbnB1dCwgb25DbGljazogdGhpcy5vbkNsaWNrIH0sIHRoaXMubG9jU3RyLnJlbmRlcmVkSHRtbCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1cnZleUxvY1N0cmluZ0VkaXRvcjtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cbl9lbGVtZW50X2ZhY3RvcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlJlYWN0RWxlbWVudEZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJFbGVtZW50KHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJMb2NhbGl6YWJsZVN0cmluZ1wiXS5lZGl0YWJsZVJlbmRlcmVyLCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChTdXJ2ZXlMb2NTdHJpbmdFZGl0b3IsIHByb3BzKTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3JlYWN0L3N0cmluZy12aWV3ZXIudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3JlYWN0L3N0cmluZy12aWV3ZXIudHN4ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleUxvY1N0cmluZ1ZpZXdlciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlMb2NTdHJpbmdWaWV3ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlMb2NTdHJpbmdWaWV3ZXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9mYWN0b3J5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQtZmFjdG9yeSAqLyBcIi4vc3JjL3JlYWN0L2VsZW1lbnQtZmFjdG9yeS50c3hcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG5cbnZhciBTdXJ2ZXlMb2NTdHJpbmdWaWV3ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUxvY1N0cmluZ1ZpZXdlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlMb2NTdHJpbmdWaWV3ZXIocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9uQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbiAoc2VuZGVyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNSZW5kZXJpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjaGFuZ2VkOiAhIV90aGlzLnN0YXRlICYmIF90aGlzLnN0YXRlLmNoYW5nZWQgPyBfdGhpcy5zdGF0ZS5jaGFuZ2VkICsgMSA6IDEgfSk7XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnJvb3RSZWYgPSByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5jcmVhdGVSZWYoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5TG9jU3RyaW5nVmlld2VyLnByb3RvdHlwZSwgXCJsb2NTdHJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmxvY1N0cjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlMb2NTdHJpbmdWaWV3ZXIucHJvdG90eXBlLCBcInN0eWxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zdHlsZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUxvY1N0cmluZ1ZpZXdlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVhY3RPblN0ckNoYW5nZWQoKTtcbiAgICB9O1xuICAgIFN1cnZleUxvY1N0cmluZ1ZpZXdlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5sb2NTdHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubG9jU3RyLm9uU3RyaW5nQ2hhbmdlZC5yZW1vdmUodGhpcy5vbkNoYW5nZWRIYW5kbGVyKTtcbiAgICB9O1xuICAgIFN1cnZleUxvY1N0cmluZ1ZpZXdlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGlmICghIXByZXZQcm9wcy5sb2NTdHIpIHtcbiAgICAgICAgICAgIHByZXZQcm9wcy5sb2NTdHIub25TdHJpbmdDaGFuZ2VkLnJlbW92ZSh0aGlzLm9uQ2hhbmdlZEhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVhY3RPblN0ckNoYW5nZWQoKTtcbiAgICB9O1xuICAgIFN1cnZleUxvY1N0cmluZ1ZpZXdlci5wcm90b3R5cGUucmVhY3RPblN0ckNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5sb2NTdHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubG9jU3RyLm9uU3RyaW5nQ2hhbmdlZC5hZGQodGhpcy5vbkNoYW5nZWRIYW5kbGVyKTtcbiAgICB9O1xuICAgIFN1cnZleUxvY1N0cmluZ1ZpZXdlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMubG9jU3RyKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHRoaXMuaXNSZW5kZXJpbmcgPSB0cnVlO1xuICAgICAgICB2YXIgc3RyRWwgPSB0aGlzLnJlbmRlclN0cmluZygpO1xuICAgICAgICB0aGlzLmlzUmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBzdHJFbDtcbiAgICB9O1xuICAgIFN1cnZleUxvY1N0cmluZ1ZpZXdlci5wcm90b3R5cGUucmVuZGVyU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5sb2NTdHIuYWxsb3dMaW5lQnJlYWtzID8gXCJzdi1zdHJpbmctdmlld2VyIHN2LXN0cmluZy12aWV3ZXItLW11bHRpbGluZVwiIDogXCJzdi1zdHJpbmctdmlld2VyXCI7XG4gICAgICAgIGlmICh0aGlzLmxvY1N0ci5oYXNIdG1sKSB7XG4gICAgICAgICAgICB2YXIgaHRtbFZhbHVlID0geyBfX2h0bWw6IHRoaXMubG9jU3RyLnJlbmRlcmVkSHRtbCB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgcmVmOiB0aGlzLnJvb3RSZWYsIGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogdGhpcy5zdHlsZSwgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IGh0bWxWYWx1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyByZWY6IHRoaXMucm9vdFJlZiwgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiB0aGlzLnN0eWxlIH0sIHRoaXMubG9jU3RyLnJlbmRlcmVkSHRtbCk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5TG9jU3RyaW5nVmlld2VyO1xufShyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5Db21wb25lbnQpKTtcblxuX2VsZW1lbnRfZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RFbGVtZW50RmFjdG9yeVwiXS5JbnN0YW5jZS5yZWdpc3RlckVsZW1lbnQoc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIkxvY2FsaXphYmxlU3RyaW5nXCJdLmRlZmF1bHRSZW5kZXJlciwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoU3VydmV5TG9jU3RyaW5nVmlld2VyLCBwcm9wcyk7XG59KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC9zdmdidW5kbGUudHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcmVhY3Qvc3ZnYnVuZGxlLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN2Z0J1bmRsZUNvbXBvbmVudCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdmdCdW5kbGVDb21wb25lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdmdCdW5kbGVDb21wb25lbnQ7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cnZleS1jb3JlICovIFwic3VydmV5LWNvcmVcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cbnZhciBTdmdCdW5kbGVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN2Z0J1bmRsZUNvbXBvbmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdmdCdW5kbGVDb21wb25lbnQocHJvcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmNvbnRhaW5lclJlZiA9IHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmNyZWF0ZVJlZigpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN2Z0J1bmRsZUNvbXBvbmVudC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghIXRoaXMuY29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmVmLmN1cnJlbnQuaW5uZXJIVE1MID0gc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcIlN2Z1JlZ2lzdHJ5XCJdLmljb25zUmVuZGVyZWRIdG1sKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN2Z0J1bmRsZUNvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3ZnU3R5bGUgPSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHN0eWxlOiBzdmdTdHlsZSwgaWQ6IFwic3YtaWNvbi1ob2xkZXItZ2xvYmFsLWNvbnRhaW5lclwiLCByZWY6IHRoaXMuY29udGFpbmVyUmVmIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFN2Z0J1bmRsZUNvbXBvbmVudDtcbn0ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuQ29tcG9uZW50KSk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9yZWFjdC90YWdib3gtZmlsdGVyLnRzeFwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC90YWdib3gtZmlsdGVyLnRzeCAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBUYWdib3hGaWx0ZXJTdHJpbmcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiVGFnYm94RmlsdGVyU3RyaW5nXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVGFnYm94RmlsdGVyU3RyaW5nOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QgKi8gXCJyZWFjdFwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBzdXJ2ZXktY29yZSAqLyBcInN1cnZleS1jb3JlXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oc3VydmV5X2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2ZhY3RvcnkudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWFjdHF1ZXN0aW9uX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3RxdWVzdGlvbl9lbGVtZW50ICovIFwiLi9zcmMvcmVhY3QvcmVhY3RxdWVzdGlvbl9lbGVtZW50LnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxuXG52YXIgVGFnYm94RmlsdGVyU3RyaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUYWdib3hGaWx0ZXJTdHJpbmcsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGFnYm94RmlsdGVyU3RyaW5nKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRhZ2JveEZpbHRlclN0cmluZy5wcm90b3R5cGUsIFwibW9kZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm1vZGVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRhZ2JveEZpbHRlclN0cmluZy5wcm90b3R5cGUsIFwicXVlc3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnF1ZXN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgVGFnYm94RmlsdGVyU3RyaW5nLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUuY2FsbCh0aGlzLCBwcmV2UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlRG9tRWxlbWVudCgpO1xuICAgIH07XG4gICAgVGFnYm94RmlsdGVyU3RyaW5nLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZURvbUVsZW1lbnQoKTtcbiAgICB9O1xuICAgIFRhZ2JveEZpbHRlclN0cmluZy5wcm90b3R5cGUudXBkYXRlRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5pbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBjb250cm9sID0gdGhpcy5pbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLm1vZGVsLmlucHV0U3RyaW5nUmVuZGVyZWQ7XG4gICAgICAgICAgICBpZiAoIXN1cnZleV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJIZWxwZXJzXCJdLmlzVHdvVmFsdWVFcXVhbHMobmV3VmFsdWUsIGNvbnRyb2wudmFsdWUsIGZhbHNlLCB0cnVlLCBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sLnZhbHVlID0gdGhpcy5tb2RlbC5pbnB1dFN0cmluZ1JlbmRlcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBUYWdib3hGaWx0ZXJTdHJpbmcucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHJvb3QgPSBzdXJ2ZXlfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic2V0dGluZ3NcIl0uZW52aXJvbm1lbnQucm9vdDtcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSByb290LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwuaW5wdXRTdHJpbmdSZW5kZXJlZCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUYWdib3hGaWx0ZXJTdHJpbmcucHJvdG90eXBlLmtleWhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLm1vZGVsLmlucHV0S2V5SGFuZGxlcihlKTtcbiAgICB9O1xuICAgIFRhZ2JveEZpbHRlclN0cmluZy5wcm90b3R5cGUub25CbHVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5vbkJsdXIoZSk7XG4gICAgfTtcbiAgICBUYWdib3hGaWx0ZXJTdHJpbmcucHJvdG90eXBlLm9uRm9jdXMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLm1vZGVsLm9uRm9jdXMoZSk7XG4gICAgfTtcbiAgICBUYWdib3hGaWx0ZXJTdHJpbmcucHJvdG90eXBlLmdldFN0YXRlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWw7XG4gICAgfTtcbiAgICBUYWdib3hGaWx0ZXJTdHJpbmcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmhpbnQgfSxcbiAgICAgICAgICAgIHRoaXMubW9kZWwuc2hvd0hpbnRQcmVmaXggP1xuICAgICAgICAgICAgICAgIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmhpbnRQcmVmaXggfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIG51bGwsIHRoaXMubW9kZWwuaGludFN0cmluZ1ByZWZpeCkpKSA6IG51bGwsXG4gICAgICAgICAgICByZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmhpbnRTdWZmaXhXcmFwcGVyIH0sXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zaG93SGludFN0cmluZyA/XG4gICAgICAgICAgICAgICAgICAgIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmhpbnRTdWZmaXggfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwic3BhblwiLCB7IHN0eWxlOiB7IHZpc2liaWxpdHk6IFwiaGlkZGVuXCIgfSwgXCJkYXRhLWJpbmRcIjogXCJ0ZXh0OiBtb2RlbC5maWx0ZXJTdHJpbmdcIiB9LCB0aGlzLm1vZGVsLmlucHV0U3RyaW5nUmVuZGVyZWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJzcGFuXCIsIG51bGwsIHRoaXMubW9kZWwuaGludFN0cmluZ1N1ZmZpeCkpKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBhdXRvQ29tcGxldGU6IFwib2ZmXCIsIGlkOiB0aGlzLnF1ZXN0aW9uLmdldElucHV0SWQoKSwgaW5wdXRNb2RlOiB0aGlzLm1vZGVsLmlucHV0TW9kZSwgcmVmOiBmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gKF90aGlzLmlucHV0RWxlbWVudCA9IGVsZW1lbnQpOyB9LCBjbGFzc05hbWU6IHRoaXMucXVlc3Rpb24uY3NzQ2xhc3Nlcy5maWx0ZXJTdHJpbmdJbnB1dCwgZGlzYWJsZWQ6IHRoaXMucXVlc3Rpb24uaXNJbnB1dFJlYWRPbmx5LCByZWFkT25seTogdGhpcy5tb2RlbC5maWx0ZXJSZWFkT25seSA/IHRydWUgOiB1bmRlZmluZWQsIHNpemU6ICF0aGlzLm1vZGVsLmlucHV0U3RyaW5nUmVuZGVyZWQgPyAxIDogdW5kZWZpbmVkLCByb2xlOiB0aGlzLm1vZGVsLmZpbHRlclN0cmluZ0VuYWJsZWQgPyB0aGlzLnF1ZXN0aW9uLmFyaWFSb2xlIDogdW5kZWZpbmVkLCBcImFyaWEtZXhwYW5kZWRcIjogdGhpcy5xdWVzdGlvbi5hcmlhRXhwYW5kZWQgPT09IG51bGwgPyB1bmRlZmluZWQgOiB0aGlzLnF1ZXN0aW9uLmFyaWFFeHBhbmRlZCA9PT0gXCJ0cnVlXCIsIFwiYXJpYS1sYWJlbFwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUxhYmVsLCBcImFyaWEtbGFiZWxsZWRieVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYUxhYmVsbGVkQnksIFwiYXJpYS1kZXNjcmliZWRieVwiOiB0aGlzLnF1ZXN0aW9uLmExMXlfaW5wdXRfYXJpYURlc2NyaWJlZEJ5LCBcImFyaWEtY29udHJvbHNcIjogdGhpcy5tb2RlbC5saXN0RWxlbWVudElkLCBcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiOiB0aGlzLm1vZGVsLmFyaWFBY3RpdmVkZXNjZW5kYW50LCBwbGFjZWhvbGRlcjogdGhpcy5tb2RlbC5maWx0ZXJTdHJpbmdQbGFjZWhvbGRlciwgb25LZXlEb3duOiBmdW5jdGlvbiAoZSkgeyBfdGhpcy5rZXloYW5kbGVyKGUpOyB9LCBvbkNoYW5nZTogZnVuY3Rpb24gKGUpIHsgX3RoaXMub25DaGFuZ2UoZSk7IH0sIG9uQmx1cjogZnVuY3Rpb24gKGUpIHsgX3RoaXMub25CbHVyKGUpOyB9LCBvbkZvY3VzOiBmdW5jdGlvbiAoZSkgeyBfdGhpcy5vbkZvY3VzKGUpOyB9IH0pKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFRhZ2JveEZpbHRlclN0cmluZztcbn0oX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiU3VydmV5RWxlbWVudEJhc2VcIl0pKTtcblxuX3JlYWN0cXVlc3Rpb25fZmFjdG9yeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiUmVhY3RRdWVzdGlvbkZhY3RvcnlcIl0uSW5zdGFuY2UucmVnaXN0ZXJRdWVzdGlvbihcInN2LXRhZ2JveC1maWx0ZXJcIiwgZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgcmV0dXJuIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFRhZ2JveEZpbHRlclN0cmluZywgcHJvcHMpO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcmVhY3QvdGFnYm94LWl0ZW0udHN4XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9yZWFjdC90YWdib3gtaXRlbS50c3ggKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFN1cnZleVF1ZXN0aW9uVGFnYm94SXRlbSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyBcInJlYWN0XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4ocmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlYWN0cXVlc3Rpb25fZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQgKi8gXCIuL3NyYy9yZWFjdC9yZWFjdHF1ZXN0aW9uX2VsZW1lbnQudHN4XCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3N2Z19pY29uX3N2Z19pY29uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvc3ZnLWljb24vc3ZnLWljb24gKi8gXCIuL3NyYy9yZWFjdC9jb21wb25lbnRzL3N2Zy1pY29uL3N2Zy1pY29uLnRzeFwiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cblxudmFyIFN1cnZleVF1ZXN0aW9uVGFnYm94SXRlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5UXVlc3Rpb25UYWdib3hJdGVtLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleVF1ZXN0aW9uVGFnYm94SXRlbShwcm9wcykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW0ucHJvdG90eXBlLCBcInF1ZXN0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5xdWVzdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW0ucHJvdG90eXBlLCBcIml0ZW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlRdWVzdGlvblRhZ2JveEl0ZW0ucHJvdG90eXBlLmNhblJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pdGVtICYmICEhdGhpcy5xdWVzdGlvbjtcbiAgICB9O1xuICAgIFN1cnZleVF1ZXN0aW9uVGFnYm94SXRlbS5wcm90b3R5cGUucmVuZGVyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHRleHQgPSB0aGlzLnJlbmRlckxvY1N0cmluZyh0aGlzLml0ZW0ubG9jVGV4dCk7XG4gICAgICAgIHZhciByZW1vdmVJdGVtID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5xdWVzdGlvbi5kcm9wZG93bkxpc3RNb2RlbC5kZXNlbGVjdEl0ZW0oX3RoaXMuaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiY3JlYXRlRWxlbWVudFwiXShcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdi10YWdib3hfX2l0ZW1cIiB9LFxuICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3YtdGFnYm94X19pdGVtLXRleHRcIiB9LCB0ZXh0KSxcbiAgICAgICAgICAgIHJlYWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJjcmVhdGVFbGVtZW50XCJdKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuY2xlYW5JdGVtQnV0dG9uLCBvbkNsaWNrOiByZW1vdmVJdGVtIH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImNyZWF0ZUVsZW1lbnRcIl0oX2NvbXBvbmVudHNfc3ZnX2ljb25fc3ZnX2ljb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcIlN2Z0ljb25cIl0sIHsgY2xhc3NOYW1lOiB0aGlzLnF1ZXN0aW9uLmNzc0NsYXNzZXMuY2xlYW5JdGVtQnV0dG9uU3ZnLCBpY29uTmFtZTogdGhpcy5xdWVzdGlvbi5jc3NDbGFzc2VzLmNsZWFuSXRlbUJ1dHRvbkljb25JZCwgc2l6ZTogXCJhdXRvXCIgfSkpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3VydmV5UXVlc3Rpb25UYWdib3hJdGVtO1xufShfcmVhY3RxdWVzdGlvbl9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJSZWFjdFN1cnZleUVsZW1lbnRcIl0pKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3NldHRpbmdzLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3NldHRpbmdzLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IHNldHRpbmdzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNldHRpbmdzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2V0dGluZ3M7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dsb2JhbF92YXJpYWJsZXNfdXRpbHMgKi8gXCIuL3NyYy9nbG9iYWxfdmFyaWFibGVzX3V0aWxzLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91dGlscy91dGlscyAqLyBcIi4vc3JjL3V0aWxzL3V0aWxzLnRzXCIpO1xuXG5cbnZhciBkb2N1bWVudCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsVGhpcy5kb2N1bWVudCA6IHVuZGVmaW5lZC5kb2N1bWVudDtcbnZhciBkZWZhdWx0RW52aXJvbm1lbnQgPSAoISFkb2N1bWVudCA/IHtcbiAgICByb290OiBkb2N1bWVudCxcbiAgICBfcm9vdEVsZW1lbnQ6IF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJEb21Eb2N1bWVudEhlbHBlclwiXS5nZXRCb2R5KCksXG4gICAgZ2V0IHJvb3RFbGVtZW50KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLl9yb290RWxlbWVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkRvbURvY3VtZW50SGVscGVyXCJdLmdldEJvZHkoKTtcbiAgICB9LFxuICAgIHNldCByb290RWxlbWVudChyb290RWxlbWVudCkge1xuICAgICAgICB0aGlzLl9yb290RWxlbWVudCA9IHJvb3RFbGVtZW50O1xuICAgIH0sXG4gICAgX3BvcHVwTW91bnRDb250YWluZXI6IF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJEb21Eb2N1bWVudEhlbHBlclwiXS5nZXRCb2R5KCksXG4gICAgZ2V0IHBvcHVwTW91bnRDb250YWluZXIoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuX3BvcHVwTW91bnRDb250YWluZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJEb21Eb2N1bWVudEhlbHBlclwiXS5nZXRCb2R5KCk7XG4gICAgfSxcbiAgICBzZXQgcG9wdXBNb3VudENvbnRhaW5lcihwb3B1cE1vdW50Q29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwTW91bnRDb250YWluZXIgPSBwb3B1cE1vdW50Q29udGFpbmVyO1xuICAgIH0sXG4gICAgc3ZnTW91bnRDb250YWluZXI6IGRvY3VtZW50LmhlYWQsXG4gICAgc3R5bGVzU2hlZXRzTW91bnRDb250YWluZXI6IGRvY3VtZW50LmhlYWQsXG59IDogdW5kZWZpbmVkKTtcbnZhciBjb2x1bW5XaWR0aHNCeVR5cGUgPSB7XG4gICAgXCJmaWxlXCI6IHsgbWluV2lkdGg6IFwiMjQwcHhcIiB9LFxuICAgIFwiY29tbWVudFwiOiB7IG1pbldpZHRoOiBcIjIwMHB4XCIgfVxufTtcbi8qKlxuICogR2xvYmFsIHNldHRpbmdzIHRoYXQgYXBwbHkgdG8gYWxsIHN1cnZleXMgb24gdGhlIHBhZ2UuIFRvIHNwZWNpZnkgb25lIG9mIHRoZSBzZXR0aW5ncywgdXNlIHRoZSBjb2RlIGJlbG93OlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gXCJzdXJ2ZXktY29yZVwiO1xuICpcbiAqIHNldHRpbmdzLnNldHRpbmdOYW1lID0gXCJ2YWx1ZVwiO1xuICogYGBgXG4gKi9cbnZhciBzZXR0aW5ncyA9IHtcbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBjb25maWd1cmVzIHN1cnZleSBhcHBlYXJhbmNlIHdoZW4gdGhlIHN1cnZleSBpcyBiZWluZyBkZXNpZ25lZCBpbiBTdXJ2ZXkgQ3JlYXRvci5cbiAgICAgKlxuICAgICAqIE5lc3RlZCBwcm9wZXJ0aWVzOlxuICAgICAqXG4gICAgICogLSBgc2hvd0VtcHR5RGVzY3JpcHRpb25zYDogYGJvb2xlYW5gXFxcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0byBkaXNwbGF5IGFuIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBwYWdlcyBhbmQgcGFuZWxzLiBEZWZhdWx0IHZhbHVlOiBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiAtIGBzaG93RW1wdHlUaXRsZXNgOiBgYm9vbGVhbmBcXFxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIGRpc3BsYXkgYW4gZW1wdHkgdGl0bGUgZm9yIHBhZ2VzIGFuZCBwYW5lbHMuIERlZmF1bHQgdmFsdWU6IGB0cnVlYC5cbiAgICAgKi9cbiAgICBkZXNpZ25Nb2RlOiB7XG4gICAgICAgIHNob3dFbXB0eURlc2NyaXB0aW9uczogdHJ1ZSxcbiAgICAgICAgc2hvd0VtcHR5VGl0bGVzOiB0cnVlXG4gICAgfSxcbiAgICAvLyNyZWdpb24gZGVzaWduTW9kZSBzZWN0aW9uLCBPYnNvbGV0ZSBwcm9wZXJ0aWVzXG4gICAgZ2V0IGFsbG93U2hvd0VtcHR5RGVzY3JpcHRpb25JbkRlc2lnbk1vZGUoKSB7IHJldHVybiB0aGlzLmRlc2lnbk1vZGUuc2hvd0VtcHR5RGVzY3JpcHRpb25zOyB9LFxuICAgIHNldCBhbGxvd1Nob3dFbXB0eURlc2NyaXB0aW9uSW5EZXNpZ25Nb2RlKHZhbCkgeyB0aGlzLmRlc2lnbk1vZGUuc2hvd0VtcHR5RGVzY3JpcHRpb25zID0gdmFsOyB9LFxuICAgIGdldCBhbGxvd1Nob3dFbXB0eVRpdGxlSW5EZXNpZ25Nb2RlKCkgeyByZXR1cm4gdGhpcy5kZXNpZ25Nb2RlLnNob3dFbXB0eVRpdGxlczsgfSxcbiAgICBzZXQgYWxsb3dTaG93RW1wdHlUaXRsZUluRGVzaWduTW9kZSh2YWwpIHsgdGhpcy5kZXNpZ25Nb2RlLnNob3dFbXB0eVRpdGxlcyA9IHZhbDsgfSxcbiAgICAvLyNlbmRyZWdpb25cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBjb250YWlucyBwcm9wZXJ0aWVzIHJlbGF0ZWQgdG8gbG9jYWxpemF0aW9uLlxuICAgICAqXG4gICAgICogTmVzdGVkIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAtIGB1c2VMb2NhbFRpbWVab25lYDogYGJvb2xlYW5gXFxcbiAgICAgKiBEaXNhYmxlIHRoaXMgcHJvcGVydHkgaWYgeW91IHdhbnQgaW50ZXJuYWwgU3VydmV5SlMgZnVuY3Rpb25zIHRvIHVzZSBtZXRob2RzIHRoYXQgd29yayB3aXRoIFVUQyBkYXRlIGFuZCB0aW1lIChgc2V0VVRDRGF0ZSgpYCBgc2V0VVRDSG91cnMoKWAsIGV0Yy4pIGluc3RlYWQgb2YgbWV0aG9kcyB0aGF0IHdvcmsgd2l0aCBsb2NhbCBkYXRlIGFuZCB0aW1lIChgc2V0WWVhcigpYCwgYHNldEhvdXJzKClgLCBldGMuKS4gRGVmYXVsdCB2YWx1ZTogYHRydWVgLlxuICAgICAqXG4gICAgICogLSBgZGVmYXVsdExvY2FsZU5hbWVgOiBgc3RyaW5nYFxcXG4gICAgICogQSBwcm9wZXJ0eSBrZXkgdGhhdCBzdG9yZXMgYSB0cmFuc2xhdGlvbiBmb3IgdGhlIGRlZmF1bHQgbG9jYWxlLiBEZWZhdWx0IHZhbHVlOiBgXCJkZWZhdWx0XCJgLlxuICAgICAqXG4gICAgICogLSBgc3RvcmVEdXBsaWNhdGVkVHJhbnNsYXRpb25zYDogYGJvb2xlYW5gXFxcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciBzdXJ2ZXlzIHNob3VsZCBzdG9yZSB0cmFuc2xhdGlvbiBzdHJpbmdzIHRoYXQgZXF1YWwgdGhlIHRyYW5zbGF0aW9uIHN0cmluZ3MgaW4gdGhlIGRlZmF1bHQgbG9jYWxlLiBEZWZhdWx0IHZhbHVlOiBgZmFsc2VgLlxuICAgICAqL1xuICAgIGxvY2FsaXphdGlvbjoge1xuICAgICAgICB1c2VMb2NhbFRpbWVab25lOiB0cnVlLFxuICAgICAgICBzdG9yZUR1cGxpY2F0ZWRUcmFuc2xhdGlvbnM6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0TG9jYWxlTmFtZTogXCJkZWZhdWx0XCJcbiAgICB9LFxuICAgIC8vI3JlZ2lvbiBsb2NhbGl6YXRpb24gc2VjdGlvbiwgb2Jzb2xldGUgcHJvcGVydGllc1xuICAgIGdldCB1c2VMb2NhbFRpbWVab25lKCkgeyByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb24udXNlTG9jYWxUaW1lWm9uZTsgfSxcbiAgICBzZXQgdXNlTG9jYWxUaW1lWm9uZSh2YWwpIHsgdGhpcy5sb2NhbGl6YXRpb24udXNlTG9jYWxUaW1lWm9uZSA9IHZhbDsgfSxcbiAgICBnZXQgc3RvcmVEdXBsaWNhdGVkVHJhbnNsYXRpb25zKCkgeyByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb24uc3RvcmVEdXBsaWNhdGVkVHJhbnNsYXRpb25zOyB9LFxuICAgIHNldCBzdG9yZUR1cGxpY2F0ZWRUcmFuc2xhdGlvbnModmFsKSB7IHRoaXMubG9jYWxpemF0aW9uLnN0b3JlRHVwbGljYXRlZFRyYW5zbGF0aW9ucyA9IHZhbDsgfSxcbiAgICBnZXQgZGVmYXVsdExvY2FsZU5hbWUoKSB7IHJldHVybiB0aGlzLmxvY2FsaXphdGlvbi5kZWZhdWx0TG9jYWxlTmFtZTsgfSxcbiAgICBzZXQgZGVmYXVsdExvY2FsZU5hbWUodmFsKSB7IHRoaXMubG9jYWxpemF0aW9uLmRlZmF1bHRMb2NhbGVOYW1lID0gdmFsOyB9LFxuICAgIC8vI2VuZHJlZ2lvblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdGhhdCBjb25maWd1cmUgc3VydmV5cyB3aGVuIHRoZXkgd29yayB3aXRoIGEgd2ViIHNlcnZpY2UuXG4gICAgICpcbiAgICAgKiBOZXN0ZWQgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqIC0gYGVuY29kZVVybFBhcmFtc2A6IGBib29sZWFuYFxcXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdG8gZW5jb2RlIFVSTCBwYXJhbWV0ZXJzIHdoZW4geW91IGFjY2VzcyBhIHdlYiBzZXJ2aWNlLiBEZWZhdWx0IHZhbHVlOiBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiAtIGBjYWNoZUxvYWRlZENob2ljZXNgOiBgYm9vbGVhbmBcXFxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIGNhY2hlIFtjaG9pY2VzIGxvYWRlZCBmcm9tIGEgd2ViIHNlcnZpY2VdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9xdWVzdGlvbnNlbGVjdGJhc2UjY2hvaWNlc0J5VXJsKS4gRGVmYXVsdCB2YWx1ZTogYHRydWVgLlxuICAgICAqXG4gICAgICogLSBgZGlzYWJsZVF1ZXN0aW9uV2hpbGVMb2FkaW5nQ2hvaWNlc2A6IGBib29sZWFuYFxcXG4gICAgICogRGlzYWJsZXMgYSBxdWVzdGlvbiB3aGlsZSBpdHMgY2hvaWNlcyBhcmUgYmVpbmcgbG9hZGVkIGZyb20gYSB3ZWIgc2VydmljZS4gRGVmYXVsdCB2YWx1ZTogYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIC0gYHN1cnZleVNlcnZpY2VVcmxgOiBgc3RyaW5nYFxcXG4gICAgICogVGhlIFVSTCBvZiB0aGUgU3VydmV5SlMgU2VydmljZSBBUEkgZW5kcG9pbnQuXG4gICAgICpcbiAgICAgKiAtIGBvbkJlZm9yZVJlcXVlc3RDaG9pY2VzYDogYChzZW5kZXI6IENob2ljZXNSZXN0ZnVsLCBvcHRpb25zOiB7IHJlcXVlc3Q6IFhNTEh0dHBSZXF1ZXN0IH0pYFxcXG4gICAgICogQW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgYmVmb3JlIGEgcmVxdWVzdCBmb3IgY2hvaWNlcyBpcyBzZW5kLiBBcHBsaWVzIHRvIHF1ZXN0aW9ucyB3aXRoIGEgc3BlY2lmaWVkIFtgY2hvaWNlQnlVcmxgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvcXVlc3Rpb25zZWxlY3RiYXNlI2Nob2ljZXNCeVVybCkgcHJvcGVydHkuIFVzZSB0aGUgYG9wdGlvbnMucmVxdWVzdGAgcGFyYW1ldGVyIHRvIGFjY2VzcyBhbmQgbW9kaWZ5IHRoZSBgWE1MSHR0cFJlcXVlc3RgIG9iamVjdC4gRm9yIGluc3RhbmNlLCB5b3UgY2FuIGFkZCBhdXRoZW50aWNhdGlvbiBoZWFkZXJzIHRvIGl0OlxuICAgICAqXG4gICAgICogICAgIGBgYGpzXG4gICAgICogICAgIGltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSBcInN1cnZleS1jb3JlXCI7XG4gICAgICpcbiAgICAgKiAgICAgc2V0dGluZ3Mud2ViLm9uQmVmb3JlU2VuZFJlcXVlc3QgPSAoc2VuZGVyLCBvcHRpb25zKSA9PiB7XG4gICAgICogICAgICAgb3B0aW9ucy5yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbicsIHJlcXVlc3RWZXJpZmljYXRpb25Ub2tlbik7XG4gICAgICogICAgIH07XG4gICAgICogICAgIGBgYFxuICAgICAqL1xuICAgIHdlYjoge1xuICAgICAgICBvbkJlZm9yZVJlcXVlc3RDaG9pY2VzOiBmdW5jdGlvbiAoc2VuZGVyLCBvcHRpb25zKSB7IH0sXG4gICAgICAgIGVuY29kZVVybFBhcmFtczogdHJ1ZSxcbiAgICAgICAgY2FjaGVMb2FkZWRDaG9pY2VzOiB0cnVlLFxuICAgICAgICBkaXNhYmxlUXVlc3Rpb25XaGlsZUxvYWRpbmdDaG9pY2VzOiBmYWxzZSxcbiAgICAgICAgc3VydmV5U2VydmljZVVybDogXCJodHRwczovL2FwaS5zdXJ2ZXlqcy5pby9wdWJsaWMvdjEvU3VydmV5XCJcbiAgICB9LFxuICAgIC8vI3JlZ2lvbiB3ZWIgc2VjdGlvbiwgb2Jzb2xldGUgcHJvcGVydGllc1xuICAgIGdldCB3ZWJzZXJ2aWNlRW5jb2RlUGFyYW1ldGVycygpIHsgcmV0dXJuIHRoaXMud2ViLmVuY29kZVVybFBhcmFtczsgfSxcbiAgICBzZXQgd2Vic2VydmljZUVuY29kZVBhcmFtZXRlcnModmFsKSB7IHRoaXMud2ViLmVuY29kZVVybFBhcmFtcyA9IHZhbDsgfSxcbiAgICBnZXQgdXNlQ2FjaGluZ0ZvckNob2ljZXNSZXN0ZnVsKCkgeyByZXR1cm4gdGhpcy53ZWIuY2FjaGVMb2FkZWRDaG9pY2VzOyB9LFxuICAgIHNldCB1c2VDYWNoaW5nRm9yQ2hvaWNlc1Jlc3RmdWwodmFsKSB7IHRoaXMud2ViLmNhY2hlTG9hZGVkQ2hvaWNlcyA9IHZhbDsgfSxcbiAgICBnZXQgdXNlQ2FjaGluZ0ZvckNob2ljZXNSZXN0ZnVsbCgpIHsgcmV0dXJuIHRoaXMud2ViLmNhY2hlTG9hZGVkQ2hvaWNlczsgfSxcbiAgICBzZXQgdXNlQ2FjaGluZ0ZvckNob2ljZXNSZXN0ZnVsbCh2YWwpIHsgdGhpcy53ZWIuY2FjaGVMb2FkZWRDaG9pY2VzID0gdmFsOyB9LFxuICAgIGdldCBkaXNhYmxlT25HZXR0aW5nQ2hvaWNlc0Zyb21XZWIoKSB7IHJldHVybiB0aGlzLndlYi5kaXNhYmxlUXVlc3Rpb25XaGlsZUxvYWRpbmdDaG9pY2VzOyB9LFxuICAgIHNldCBkaXNhYmxlT25HZXR0aW5nQ2hvaWNlc0Zyb21XZWIodmFsKSB7IHRoaXMud2ViLmRpc2FibGVRdWVzdGlvbldoaWxlTG9hZGluZ0Nob2ljZXMgPSB2YWw7IH0sXG4gICAgZ2V0IHN1cnZleVNlcnZpY2VVcmwoKSB7IHJldHVybiB0aGlzLndlYi5zdXJ2ZXlTZXJ2aWNlVXJsOyB9LFxuICAgIHNldCBzdXJ2ZXlTZXJ2aWNlVXJsKHZhbCkgeyB0aGlzLndlYi5zdXJ2ZXlTZXJ2aWNlVXJsID0gdmFsOyB9LFxuICAgIC8vI2VuZHJlZ2lvblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHByb3BlcnRpZXMgcmVsYXRlZCB0byBbdHJpZ2dlcnNdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vZGVzaWduLXN1cnZleS9jb25kaXRpb25hbC1sb2dpYyNjb25kaXRpb25hbC1zdXJ2ZXktbG9naWMtdHJpZ2dlcnMpLlxuICAgICAqXG4gICAgICogTmVzdGVkIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAtIGBjaGFuZ2VOYXZpZ2F0aW9uQnV0dG9uc09uQ29tcGxldGVgOiBgYm9vbGVhbmBcXFxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIHJlLWV2YWx1YXRlIGFuIGV4cHJlc3Npb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBbQ29tcGxldGUgdHJpZ2dlcl0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9kZXNpZ24tc3VydmV5L2NvbmRpdGlvbmFsLWxvZ2ljI2NvbXBsZXRlKSBpbW1lZGlhdGVseSB3aGVuIGEgcXVlc3Rpb24gdmFsdWUgY2hhbmdlcy4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGB0cnVlYCwgdGhlIHRyaWdnZXIgaXMgZXhlY3V0ZWQuIERlZmF1bHQgdmFsdWU6IGBmYWxzZWAuXFxcbiAgICAgKiBLZWVwIHRoaXMgcHJvcGVydHkgc2V0IHRvIGBmYWxzZWAgaWYgeW91IHdhbnQgdG8gcmUtZXZhbHVhdGUgdGhlIENvbXBsZXRlIHRyaWdnZXIncyBleHByZXNzaW9uIG9ubHkgd2hlbiB0aGUgcmVzcG9uZGVudHMgbmF2aWdhdGUgdG8gYW5vdGhlciBwYWdlLlxuICAgICAqXG4gICAgICogLSBgZXhlY3V0ZUNvbXBsZXRlT25WYWx1ZUNoYW5nZWRgOiBgYm9vbGVhbmBcXFxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIHJlcGxhY2UgdGhlIE5leHQgYnV0dG9uIHdpdGggdGhlIENvbXBsZXRlIGJ1dHRvbiB3aGVuIHRoZSBbQ29tcGxldGUgdHJpZ2dlcl0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9kZXNpZ24tc3VydmV5L2NvbmRpdGlvbmFsLWxvZ2ljI2NvbXBsZXRlKSBpcyBnb2luZyB0byBiZSBleGVjdXRlZC4gRGVmYXVsdCB2YWx1ZTogYHRydWVgLlxuICAgICAqXG4gICAgICogLSBgZXhlY3V0ZVNraXBPblZhbHVlQ2hhbmdlZGA6IGBib29sZWFuYFxcXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdG8gcmUtZXZhbHVhdGUgYW4gZXhwcmVzc2lvbiBhc3NvY2lhdGVkIHdpdGggdGhlIFtTa2lwIHRyaWdnZXJdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vZGVzaWduLXN1cnZleS9jb25kaXRpb25hbC1sb2dpYyNza2lwKSBpbW1lZGlhdGVseSB3aGVuIGEgcXVlc3Rpb24gdmFsdWUgY2hhbmdlcy4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGB0cnVlYCwgdGhlIHRyaWdnZXIgaXMgZXhlY3V0ZWQuIERlZmF1bHQgdmFsdWU6IGB0cnVlYC5cXFxuICAgICAqIERpc2FibGUgdGhpcyBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byByZS1ldmFsdWF0ZSB0aGUgU2tpcCB0cmlnZ2VyJ3MgZXhwcmVzc2lvbiBvbmx5IHdoZW4gcmVzcG9uZGVudHMgbmF2aWdhdGUgdG8gYW5vdGhlciBwYWdlLlxuICAgICAqL1xuICAgIHRyaWdnZXJzOiB7XG4gICAgICAgIGNoYW5nZU5hdmlnYXRpb25CdXR0b25zT25Db21wbGV0ZTogdHJ1ZSxcbiAgICAgICAgZXhlY3V0ZUNvbXBsZXRlT25WYWx1ZUNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICBleGVjdXRlU2tpcE9uVmFsdWVDaGFuZ2VkOiB0cnVlXG4gICAgfSxcbiAgICAvLyNyZWdpb24gdHJpZ2dlcnMgc2VjdGlvbiwgT2Jzb2xldGUgcHJvcGVydGllc1xuICAgIGdldCBleGVjdXRlQ29tcGxldGVUcmlnZ2VyT25WYWx1ZUNoYW5nZWQoKSB7IHJldHVybiB0aGlzLnRyaWdnZXJzLmV4ZWN1dGVDb21wbGV0ZU9uVmFsdWVDaGFuZ2VkOyB9LFxuICAgIHNldCBleGVjdXRlQ29tcGxldGVUcmlnZ2VyT25WYWx1ZUNoYW5nZWQodmFsKSB7IHRoaXMudHJpZ2dlcnMuZXhlY3V0ZUNvbXBsZXRlT25WYWx1ZUNoYW5nZWQgPSB2YWw7IH0sXG4gICAgZ2V0IGNoYW5nZU5hdmlnYXRpb25CdXR0b25zT25Db21wbGV0ZVRyaWdnZXIoKSB7IHJldHVybiB0aGlzLnRyaWdnZXJzLmNoYW5nZU5hdmlnYXRpb25CdXR0b25zT25Db21wbGV0ZTsgfSxcbiAgICBzZXQgY2hhbmdlTmF2aWdhdGlvbkJ1dHRvbnNPbkNvbXBsZXRlVHJpZ2dlcih2YWwpIHsgdGhpcy50cmlnZ2Vycy5jaGFuZ2VOYXZpZ2F0aW9uQnV0dG9uc09uQ29tcGxldGUgPSB2YWw7IH0sXG4gICAgZ2V0IGV4ZWN1dGVTa2lwVHJpZ2dlck9uVmFsdWVDaGFuZ2VkKCkgeyByZXR1cm4gdGhpcy50cmlnZ2Vycy5leGVjdXRlU2tpcE9uVmFsdWVDaGFuZ2VkOyB9LFxuICAgIHNldCBleGVjdXRlU2tpcFRyaWdnZXJPblZhbHVlQ2hhbmdlZCh2YWwpIHsgdGhpcy50cmlnZ2Vycy5leGVjdXRlU2tpcE9uVmFsdWVDaGFuZ2VkID0gdmFsOyB9LFxuICAgIC8vI2VuZHJlZ2lvblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHByb3BlcnRpZXMgcmVsYXRlZCB0byBKU09OIHNlcmlhbGl6YXRpb24uXG4gICAgICpcbiAgICAgKiBOZXN0ZWQgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqIC0gYGl0ZW1WYWx1ZVNlcmlhbGl6ZUFzT2JqZWN0YDogYGJvb2xlYW5gXFxcbiAgICAgKiBFbmFibGUgdGhpcyBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byBzZXJpYWxpemUgW2BJdGVtVmFsdWVgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvaXRlbXZhbHVlKSBpbnN0YW5jZXMgYXMgb2JqZWN0cyBldmVuIHdoZW4gdGhleSBpbmNsdWRlIG9ubHkgdGhlIGB2YWx1ZWAgcHJvcGVydHkuIERlZmF1bHQgdmFsdWU6IGBmYWxzZWAuIFZpZXcgYW4gZXhhbXBsZSBiZWxvdy5cbiAgICAgKlxuICAgICAqIC0gYGl0ZW1WYWx1ZVNlcmlhbGl6ZURpc3BsYXlUZXh0YDogYGJvb2xlYW5gXFxcbiAgICAgKiBFbmFibGUgdGhpcyBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byBzZXJpYWxpemUgdGhlIGB0ZXh0YCBwcm9wZXJ0eSBvZiBbYEl0ZW1WYWx1ZWBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9pdGVtdmFsdWUpIG9iamVjdHMgZXZlbiB3aGVuIGl0IGlzIGVtcHR5IG9yIGVxdWFsIHRvIHRoZSBgdmFsdWVgIHByb3BlcnR5LiBEZWZhdWx0IHZhbHVlOiBgZmFsc2VgLiBWaWV3IGFuIGV4YW1wbGUgYmVsb3cuXG4gICAgICpcbiAgICAgKiAtIGBsb2NhbGl6YWJsZVN0cmluZ1NlcmlhbGl6ZUFzT2JqZWN0YDogYGJvb2xlYW5gXFxcbiAgICAgKiBFbmFibGUgdGhpcyBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byBzZXJpYWxpemUgW2BMb2NhbGl6YWJsZVN0cmluZ2BdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9sb2NhbGl6YWJsZXN0cmluZykgaW5zdGFuY2VzIGFzIG9iamVjdHMgZXZlbiB3aGVuIHRoZXkgaW5jbHVkZSBvbmx5IGEgdHJhbnNsYXRpb24gc3RyaW5nIGZvciB0aGUgZGVmYXVsdCBsb2NhbGUuIEZvciBleGFtcGxlLCBgXCJDdXN0b20gU3RyaW5nXCJgIHdpbGwgYmUgc2VyaWFsaXplZCBhcyBgeyBkZWZhdWx0OiBcIkN1c3RvbSBTdHJpbmdcIiB9YC4gRGVmYXVsdCB2YWx1ZTogYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHsgSXRlbVZhbHVlLCBzZXR0aW5ncyB9IGZyb20gXCJzdXJ2ZXktY29yZVwiO1xuICAgICAqXG4gICAgICogLy8gYGl0ZW1WYWx1ZVNlcmlhbGl6ZUFzT2JqZWN0YCBleGFtcGxlXG4gICAgICogc2V0dGluZ3Muc2VyaWFsaXphdGlvbi5pdGVtVmFsdWVTZXJpYWxpemVBc09iamVjdCA9IHRydWU7XG4gICAgICogY29uc3QgaXRlbSA9IG5ldyBJdGVtVmFsdWUoNSk7XG4gICAgICogY29uc3QgaXRlbVN0cmluZyA9IGl0ZW0udG9KU09OKCk7IC8vIFByb2R1Y2VzIHsgdmFsdWU6IDUgfSBpbnN0ZWFkIG9mIDVcbiAgICAgKlxuICAgICAqIC8vIGBpdGVtVmFsdWVTZXJpYWxpemVEaXNwbGF5VGV4dGAgZXhhbXBsZVxuICAgICAqIHNldHRpbmdzLnNlcmlhbGl6YXRpb24uaXRlbVZhbHVlU2VyaWFsaXplRGlzcGxheVRleHQgPSB0cnVlO1xuICAgICAqIGNvbnN0IGl0ZW0gPSBuZXcgSXRlbVZhbHVlKFwiaXRlbTFcIik7XG4gICAgICogY29uc3QgaXRlbVN0cmluZyA9IGl0ZW0udG9KU09OKCk7IC8vIFByb2R1Y2VzIHsgdmFsdWU6IFwiaXRlbTFcIiwgdGV4dDogXCJpdGVtMVwiIH0gaW5zdGVhZCBvZiBcIml0ZW0xXCJcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzZXJpYWxpemF0aW9uOiB7XG4gICAgICAgIGl0ZW1WYWx1ZVNlcmlhbGl6ZUFzT2JqZWN0OiBmYWxzZSxcbiAgICAgICAgaXRlbVZhbHVlU2VyaWFsaXplRGlzcGxheVRleHQ6IGZhbHNlLFxuICAgICAgICBsb2NhbGl6YWJsZVN0cmluZ1NlcmlhbGl6ZUFzT2JqZWN0OiBmYWxzZVxuICAgIH0sXG4gICAgLy8jcmVnaW9uIHNlcmlhbGl6YXRpb24gc2VjdGlvbiwgT2Jzb2xldGUgcHJvcGVydGllc1xuICAgIGdldCBpdGVtVmFsdWVBbHdheXNTZXJpYWxpemVBc09iamVjdCgpIHsgcmV0dXJuIHRoaXMuc2VyaWFsaXphdGlvbi5pdGVtVmFsdWVTZXJpYWxpemVBc09iamVjdDsgfSxcbiAgICBzZXQgaXRlbVZhbHVlQWx3YXlzU2VyaWFsaXplQXNPYmplY3QodmFsKSB7IHRoaXMuc2VyaWFsaXphdGlvbi5pdGVtVmFsdWVTZXJpYWxpemVBc09iamVjdCA9IHZhbDsgfSxcbiAgICBnZXQgaXRlbVZhbHVlQWx3YXlzU2VyaWFsaXplVGV4dCgpIHsgcmV0dXJuIHRoaXMuc2VyaWFsaXphdGlvbi5pdGVtVmFsdWVTZXJpYWxpemVEaXNwbGF5VGV4dDsgfSxcbiAgICBzZXQgaXRlbVZhbHVlQWx3YXlzU2VyaWFsaXplVGV4dCh2YWwpIHsgdGhpcy5zZXJpYWxpemF0aW9uLml0ZW1WYWx1ZVNlcmlhbGl6ZURpc3BsYXlUZXh0ID0gdmFsOyB9LFxuICAgIGdldCBzZXJpYWxpemVMb2NhbGl6YWJsZVN0cmluZ0FzT2JqZWN0KCkgeyByZXR1cm4gdGhpcy5zZXJpYWxpemF0aW9uLmxvY2FsaXphYmxlU3RyaW5nU2VyaWFsaXplQXNPYmplY3Q7IH0sXG4gICAgc2V0IHNlcmlhbGl6ZUxvY2FsaXphYmxlU3RyaW5nQXNPYmplY3QodmFsKSB7IHRoaXMuc2VyaWFsaXphdGlvbi5sb2NhbGl6YWJsZVN0cmluZ1NlcmlhbGl6ZUFzT2JqZWN0ID0gdmFsOyB9LFxuICAgIC8vI2VuZHJlZ2lvblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgbGF6eSByZW5kZXJpbmcuXG4gICAgICpcbiAgICAgKiBOZXN0ZWQgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqIC0gYGVuYWJsZWRgOiBgYm9vbGVhbmBcXFxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIGFkZCBxdWVzdGlvbnMgdG8gdGhlIERPTSBvbmx5IHdoZW4gdGhleSBnZXQgaW50byB0aGUgdmlld3BvcnQuIERlZmF1bHQgdmFsdWU6IGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBbVmlldyBEZW1vXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9leGFtcGxlcy9zdXJ2ZXktbGF6eS8gKGxpbmtTdHlsZSkpXG4gICAgICogQHNlZSBbU3VydmV5TW9kZWwubGF6eVJlbmRlcmluZ10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3N1cnZleS1kYXRhLW1vZGVsI2xhenlSZW5kZXJpbmcpXG4gICAgICovXG4gICAgbGF6eVJlbmRlcjoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgZmlyc3RCYXRjaFNpemU6IDNcbiAgICB9LFxuICAgIC8vI3JlZ2lvbiBsYXp5UmVuZGVyIHNlY3Rpb24sIE9ic29sZXRlIHByb3BlcnRpZXNcbiAgICBnZXQgbGF6eVJvd3NSZW5kZXJpbmcoKSB7IHJldHVybiB0aGlzLmxhenlSZW5kZXIuZW5hYmxlZDsgfSxcbiAgICBzZXQgbGF6eVJvd3NSZW5kZXJpbmcodmFsKSB7IHRoaXMubGF6eVJlbmRlci5lbmFibGVkID0gdmFsOyB9LFxuICAgIGdldCBsYXp5Um93c1JlbmRlcmluZ1N0YXJ0Um93KCkgeyByZXR1cm4gdGhpcy5sYXp5UmVuZGVyLmZpcnN0QmF0Y2hTaXplOyB9LFxuICAgIHNldCBsYXp5Um93c1JlbmRlcmluZ1N0YXJ0Um93KHZhbCkgeyB0aGlzLmxhenlSZW5kZXIuZmlyc3RCYXRjaFNpemUgPSB2YWw7IH0sXG4gICAgLy8jZW5kcmVnaW9uXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHdpdGggcHJvcGVydGllcyB0aGF0IGFwcGx5IHRvIFtTaW5nbGUtQ2hvaWNlXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvbWF0cml4LXRhYmxlLXF1ZXN0aW9uLW1vZGVsKSwgW011bHRpcGxlLUNob2ljZV0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL21hdHJpeC10YWJsZS13aXRoLWRyb3Bkb3duLWxpc3QpLCBhbmQgW0R5bmFtaWMgTWF0cml4XShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvZHluYW1pYy1tYXRyaXgtdGFibGUtcXVlc3Rpb24tbW9kZWwpIHF1ZXN0aW9ucy5cbiAgICAgKlxuICAgICAqIE5lc3RlZCBwcm9wZXJ0aWVzOlxuICAgICAqXG4gICAgICogLSBgZGVmYXVsdFJvd05hbWVgOiBgc3RyaW5nYFxcXG4gICAgICogQSBwcm9wZXJ0eSBrZXkgdGhhdCBzdG9yZXMgYW4gb2JqZWN0IHdpdGggZGVmYXVsdCBjZWxsIHZhbHVlcy4gRGVmYXVsdCB2YWx1ZTogXCJkZWZhdWx0XCIuXG4gICAgICpcbiAgICAgKiAtIGBkZWZhdWx0Q2VsbFR5cGVgOiBgc3RyaW5nYFxcXG4gICAgICogVGhlIGRlZmF1bHQgdHlwZSBvZiBtYXRyaXggY2VsbHMuIERlZmF1bHQgdmFsdWU6IGBcImRyb3Bkb3duXCJgLlxcXG4gICAgICogWW91IGNhbiBzcGVjaWZ5IHRoaXMgc2V0dGluZyBmb3IgaW5kaXZpZHVhbCBxdWVzdGlvbnMgb3IgbWF0cml4IGNvbHVtbnM6IFtgY2VsbFR5cGVgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvZHluYW1pYy1tYXRyaXgtdGFibGUtcXVlc3Rpb24tbW9kZWwjY2VsbFR5cGUpLiBSZWZlciB0byB0aGUgYGNlbGxUeXBlYCBwcm9wZXJ0eSBkZXNjcmlwdGlvbiBmb3IgaW5mb3JtYXRpb24gb24gcG9zc2libGUgdmFsdWVzLlxuICAgICAqXG4gICAgICogLSBgdG90YWxzU3VmZml4YDogYHN0cmluZ2BcXFxuICAgICAqIEEgc3VmZml4IGFkZGVkIHRvIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0aGF0IHN0b3JlcyB0b3RhbCB2YWx1ZXMuIFRoZSByZXN1bHRpbmcgcHJvcGVydHkgbmFtZSBjb25zaXN0cyBvZiB0aGUgbWF0cml4IG5hbWUgYW5kIHRoZSBzdWZmaXguIERlZmF1bHQgdmFsdWU6IGBcIi10b3RhbFwiYC5cbiAgICAgKlxuICAgICAqIC0gYG1heFJvd0NvdW50YDogYG51bWJlcmBcXFxuICAgICAqIEEgbWF4aW11bSBudW1iZXIgb2Ygcm93cyBpbiBhIER5bmFtaWMgTWF0cml4LiBEZWZhdWx0IHZhbHVlOiAxMDAwLlxcXG4gICAgICogWW91IGNhbiBzcGVjaWZ5IHRoaXMgc2V0dGluZyBmb3IgYW4gaW5kaXZpZHVhbCBEeW5hbWljIE1hdHJpeDogW2BtYXhSb3dDb3VudGBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9keW5hbWljLW1hdHJpeC10YWJsZS1xdWVzdGlvbi1tb2RlbCNtYXhSb3dDb3VudCkuXG4gICAgICpcbiAgICAgKiAtIGBtYXhSb3dDb3VudEluQ29uZGl0aW9uYDogYG51bWJlcmBcXFxuICAgICAqIEEgbWF4aW11bSBudW1iZXIgb2YgbWF0cml4IHJvd3MgaW5jbHVkZWQgaW4gdGhlIENvbmRpdGlvbiBkcm9wLWRvd24gbWVudSBpbiBTdXJ2ZXkgQ3JlYXRvci4gVGhpcyBtZW51IGlzIHVzZWQgdG8gY29uZmlndXJlIGNvbmRpdGlvbmFsIHN1cnZleSBsb2dpYy4gRGVmYXVsdCB2YWx1ZTogMS5cXFxuICAgICAqIElmIHlvdSBzZXQgdGhpcyBwcm9wZXJ0eSB0byAwLCB0aGUgQ29uZGl0aW9uIG1lbnUgZG9lcyBub3QgaW5jbHVkZSBhbnkgbWF0cml4IHJvd3MuIFVzZXJzIHN0aWxsIGNhbiBzcGVjaWZ5IGNvbmRpdGlvbnMgdGhhdCB1c2UgbWF0cml4IHJvd3MgYnV0IG9ubHkgd2l0aCBNYW51YWwgRW50cnkuXG4gICAgICpcbiAgICAgKiAtIGByZW5kZXJSZW1vdmVBc0ljb25gOiBgYm9vbGVhbmBcXFxuICAgICAqIERpc2FibGUgdGhpcyBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byByZW5kZXIgdGhlIFJlbW92ZSBhY3Rpb24gaW4gRHluYW1pYyBNYXRyaXggYXMgYSBidXR0b24uIE90aGVyd2lzZSwgdGhlIGFjdGlvbiBpcyByZW5kZXJlZCBhcyBhbiBpY29uLiBEZWZhdWx0IHZhbHVlOiBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiAtIGBjb2x1bW5XaWR0aHNCeVR5cGVgOiBgb2JqZWN0YFxcXG4gICAgICogQW4gb2JqZWN0IHRoYXQgc3BlY2lmaWVzIGZpeGVkIGFuZCBtaW5pbXVtIGNvbHVtbiB3aWR0aCBiYXNlZCBvbiB0aGUgY29sdW1uIHR5cGUuXFxcbiAgICAgKiBFeGFtcGxlOiBgc2V0dGluZ3MubWF0cml4LmNvbHVtbldpZHRoc0J5VHlwZSA9IHsgXCJ0YWdib3hcIjogeyBtaW5XaWR0aDogXCIyNDBweFwiLCB3aWR0aDogXCIzMDBweFwiIH0gfWBcbiAgICAgKlxuICAgICAqIC0gYHJhdGVTaXplYDogYFwic21hbGxcImAgKGRlZmF1bHQpIHwgYFwibm9ybWFsXCJgXFxcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHNpemUgb2YgcmF0ZSB2YWx1ZXMuIEFwcGxpZXMgdG8gW1JhdGluZyBTY2FsZV0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZXhhbXBsZXMvcmF0aW5nLXNjYWxlLykgcXVlc3Rpb25zIHdpdGhpbiBtYXRyaXhlcy5cbiAgICAgKi9cbiAgICBtYXRyaXg6IHtcbiAgICAgICAgZGVmYXVsdENlbGxUeXBlOiBcImRyb3Bkb3duXCIsXG4gICAgICAgIGRlZmF1bHRSb3dOYW1lOiBcImRlZmF1bHRcIixcbiAgICAgICAgdG90YWxzU3VmZml4OiBcIi10b3RhbFwiLFxuICAgICAgICBtYXhSb3dDb3VudDogMTAwMCxcbiAgICAgICAgbWF4Um93Q291bnRJbkNvbmRpdGlvbjogMSxcbiAgICAgICAgcmVuZGVyUmVtb3ZlQXNJY29uOiB0cnVlLFxuICAgICAgICBjb2x1bW5XaWR0aHNCeVR5cGU6IGNvbHVtbldpZHRoc0J5VHlwZSxcbiAgICAgICAgcmF0ZVNpemU6IFwic21hbGxcIixcbiAgICB9LFxuICAgIC8vI3JlZ2lvbiBtYXRyaXggc2VjdGlvbiwgT2Jzb2xldGUgcHJvcGVydGllc1xuICAgIGdldCBtYXRyaXhEZWZhdWx0Um93TmFtZSgpIHsgcmV0dXJuIHRoaXMubWF0cml4LmRlZmF1bHRSb3dOYW1lOyB9LFxuICAgIHNldCBtYXRyaXhEZWZhdWx0Um93TmFtZSh2YWwpIHsgdGhpcy5tYXRyaXguZGVmYXVsdFJvd05hbWUgPSB2YWw7IH0sXG4gICAgZ2V0IG1hdHJpeERlZmF1bHRDZWxsVHlwZSgpIHsgcmV0dXJuIHRoaXMubWF0cml4LmRlZmF1bHRDZWxsVHlwZTsgfSxcbiAgICBzZXQgbWF0cml4RGVmYXVsdENlbGxUeXBlKHZhbCkgeyB0aGlzLm1hdHJpeC5kZWZhdWx0Q2VsbFR5cGUgPSB2YWw7IH0sXG4gICAgZ2V0IG1hdHJpeFRvdGFsVmFsdWVQb3N0Rml4KCkgeyByZXR1cm4gdGhpcy5tYXRyaXgudG90YWxzU3VmZml4OyB9LFxuICAgIHNldCBtYXRyaXhUb3RhbFZhbHVlUG9zdEZpeCh2YWwpIHsgdGhpcy5tYXRyaXgudG90YWxzU3VmZml4ID0gdmFsOyB9LFxuICAgIGdldCBtYXRyaXhNYXhpbXVtUm93Q291bnQoKSB7IHJldHVybiB0aGlzLm1hdHJpeC5tYXhSb3dDb3VudDsgfSxcbiAgICBzZXQgbWF0cml4TWF4aW11bVJvd0NvdW50KHZhbCkgeyB0aGlzLm1hdHJpeC5tYXhSb3dDb3VudCA9IHZhbDsgfSxcbiAgICBnZXQgbWF0cml4TWF4Um93Q291bnRJbkNvbmRpdGlvbigpIHsgcmV0dXJuIHRoaXMubWF0cml4Lm1heFJvd0NvdW50SW5Db25kaXRpb247IH0sXG4gICAgc2V0IG1hdHJpeE1heFJvd0NvdW50SW5Db25kaXRpb24odmFsKSB7IHRoaXMubWF0cml4Lm1heFJvd0NvdW50SW5Db25kaXRpb24gPSB2YWw7IH0sXG4gICAgZ2V0IG1hdHJpeFJlbmRlclJlbW92ZUFzSWNvbigpIHsgcmV0dXJuIHRoaXMubWF0cml4LnJlbmRlclJlbW92ZUFzSWNvbjsgfSxcbiAgICBzZXQgbWF0cml4UmVuZGVyUmVtb3ZlQXNJY29uKHZhbCkgeyB0aGlzLm1hdHJpeC5yZW5kZXJSZW1vdmVBc0ljb24gPSB2YWw7IH0sXG4gICAgLy8jZW5kcmVnaW9uXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHdpdGggcHJvcGVydGllcyB0aGF0IGFwcGx5IHRvIFtEeW5hbWljIFBhbmVsXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvZHluYW1pYy1wYW5lbC1tb2RlbCkgcXVlc3Rpb25zLlxuICAgICAqXG4gICAgICogTmVzdGVkIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAtIGBtYXhQYW5lbENvdW50YDogYG51bWJlcmBcXFxuICAgICAqIEEgbWF4aW11bSBudW1iZXIgb2YgcGFuZWxzIGluIER5bmFtaWMgUGFuZWwuIERlZmF1bHQgdmFsdWU6IDEwMC5cXFxuICAgICAqIFlvdSBjYW4gc3BlY2lmeSB0aGlzIHNldHRpbmcgZm9yIGFuIGluZGl2aWR1YWwgRHluYW1pYyBQYW5lbDogW2BtYXhQYW5lbENvdW50YF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL2R5bmFtaWMtcGFuZWwtbW9kZWwjbWF4UGFuZWxDb3VudCkuXG4gICAgICpcbiAgICAgKiAtIGBtYXhQYW5lbENvdW50SW5Db25kaXRpb25gOiBgbnVtYmVyYFxcXG4gICAgICogQSBtYXhpbXVtIG51bWJlciBvZiBEeW5hbWljIFBhbmVsIHBhbmVscyBpbmNsdWRlZCBpbiB0aGUgQ29uZGl0aW9uIGRyb3AtZG93biBtZW51IGluIFN1cnZleSBDcmVhdG9yLiBUaGlzIG1lbnUgaXMgdXNlZCB0byBjb25maWd1cmUgY29uZGl0aW9uYWwgc3VydmV5IGxvZ2ljLiBEZWZhdWx0IHZhbHVlOiAxLlxcXG4gICAgICogSWYgeW91IHNldCB0aGlzIHByb3BlcnR5IHRvIDAsIHRoZSBDb25kaXRpb24gbWVudSBkb2VzIG5vdCBpbmNsdWRlIGFueSBwYW5lbCBxdWVzdGlvbnMuIFVzZXJzIHN0aWxsIGNhbiBzcGVjaWZ5IGNvbmRpdGlvbnMgdGhhdCB1c2UgcGFuZWwgcXVlc3Rpb25zIGJ1dCBvbmx5IHdpdGggTWFudWFsIEVudHJ5LlxuICAgICAqL1xuICAgIHBhbmVsOiB7XG4gICAgICAgIG1heFBhbmVsQ291bnQ6IDEwMCxcbiAgICAgICAgbWF4UGFuZWxDb3VudEluQ29uZGl0aW9uOiAxXG4gICAgfSxcbiAgICAvLyNyZWdpb24gcGFuZWwgc2VjdGlvbiwgT2Jzb2xldGUgcHJvcGVydGllc1xuICAgIGdldCBwYW5lbER5bmFtaWNNYXhQYW5lbENvdW50SW5Db25kaXRpb24oKSB7IHJldHVybiB0aGlzLnBhbmVsLm1heFBhbmVsQ291bnRJbkNvbmRpdGlvbjsgfSxcbiAgICBzZXQgcGFuZWxEeW5hbWljTWF4UGFuZWxDb3VudEluQ29uZGl0aW9uKHZhbCkgeyB0aGlzLnBhbmVsLm1heFBhbmVsQ291bnRJbkNvbmRpdGlvbiA9IHZhbDsgfSxcbiAgICBnZXQgcGFuZWxNYXhpbXVtUGFuZWxDb3VudCgpIHsgcmV0dXJuIHRoaXMucGFuZWwubWF4UGFuZWxDb3VudDsgfSxcbiAgICBzZXQgcGFuZWxNYXhpbXVtUGFuZWxDb3VudCh2YWwpIHsgdGhpcy5wYW5lbC5tYXhQYW5lbENvdW50ID0gdmFsOyB9LFxuICAgIC8vI2VuZHJlZ2lvblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdGhhdCBjb25maWd1cmUgcXVlc3Rpb25zIGluIHJlYWQtb25seSBtb2RlLlxuICAgICAqXG4gICAgICogTmVzdGVkIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAtIGBjb21tZW50UmVuZGVyTW9kZWA6IGBcInRleHRhcmVhXCJgIChkZWZhdWx0KSB8IGBcImRpdlwiYFxcXG4gICAgICogU3BlY2lmaWVzIGhvdyB0byByZW5kZXIgdGhlIGlucHV0IGZpZWxkIG9mIFtDb21tZW50XShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvY29tbWVudC1maWVsZC1tb2RlbCkgcXVlc3Rpb25zIGluIFtyZWFkLW9ubHldKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9jb21tZW50LWZpZWxkLW1vZGVsI3JlYWRPbmx5KSBtb2RlOiBhcyBhIGRpc2FibGVkIGA8dGV4dGFyZWE+YCBlbGVtZW50IG9yIGFzIGEgYDxkaXY+YCBlbGVtZW50IHdpdGggYSBub24tZWRpdGFibGUgcXVlc3Rpb24gdmFsdWUgd2l0aGluIGl0LlxuICAgICAqXG4gICAgICogLSBgdGV4dFJlbmRlck1vZGVgOiBgXCJpbnB1dFwiYCAoZGVmYXVsdCkgfCBgXCJkaXZcImBcXFxuICAgICAqIFNwZWNpZmllcyBob3cgdG8gcmVuZGVyIHRoZSBpbnB1dCBmaWVsZCBvZiBbVGV4dF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3RleHQtZW50cnktcXVlc3Rpb24tbW9kZWwpIHF1ZXN0aW9ucyBpbiBbcmVhZC1vbmx5XShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvdGV4dC1lbnRyeS1xdWVzdGlvbi1tb2RlbCNyZWFkT25seSkgbW9kZTogYXMgYSBkaXNhYmxlZCBgPGlucHV0PmAgZWxlbWVudCBvciBhcyBhIGA8ZGl2PmAgZWxlbWVudCB3aXRoIGEgbm9uLWVkaXRhYmxlIHF1ZXN0aW9uIHZhbHVlIHdpdGhpbiBpdC5cbiAgICAgKi9cbiAgICByZWFkT25seToge1xuICAgICAgICBlbmFibGVWYWxpZGF0aW9uOiBmYWxzZSxcbiAgICAgICAgY29tbWVudFJlbmRlck1vZGU6IFwidGV4dGFyZWFcIixcbiAgICAgICAgdGV4dFJlbmRlck1vZGU6IFwiaW5wdXRcIlxuICAgIH0sXG4gICAgLy8jcmVnaW9uIHJlYWRPbmx5IHNlY3Rpb24sIE9ic29sZXRlIHByb3BlcnRpZXNcbiAgICBnZXQgcmVhZE9ubHlDb21tZW50UmVuZGVyTW9kZSgpIHsgcmV0dXJuIHRoaXMucmVhZE9ubHkuY29tbWVudFJlbmRlck1vZGU7IH0sXG4gICAgc2V0IHJlYWRPbmx5Q29tbWVudFJlbmRlck1vZGUodmFsKSB7IHRoaXMucmVhZE9ubHkuY29tbWVudFJlbmRlck1vZGUgPSB2YWw7IH0sXG4gICAgZ2V0IHJlYWRPbmx5VGV4dFJlbmRlck1vZGUoKSB7IHJldHVybiB0aGlzLnJlYWRPbmx5LnRleHRSZW5kZXJNb2RlOyB9LFxuICAgIHNldCByZWFkT25seVRleHRSZW5kZXJNb2RlKHZhbCkgeyB0aGlzLnJlYWRPbmx5LnRleHRSZW5kZXJNb2RlID0gdmFsOyB9LFxuICAgIC8vI2VuZHJlZ2lvblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdGhhdCBjb25maWd1cmUgcXVlc3Rpb24gbnVtYmVyaW5nLlxuICAgICAqXG4gICAgICogTmVzdGVkIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAtIGBpbmNsdWRlUXVlc3Rpb25zV2l0aEhpZGRlbk51bWJlcmA6IGBib29sZWFuYFxcXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdG8gbnVtYmVyIHF1ZXN0aW9ucyB3aG9zZSBbYGhpZGVOdW1iZXJgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvcXVlc3Rpb24jaGlkZU51bWJlcikgcHJvcGVydHkgaXMgZW5hYmxlZC4gRGVmYXVsdCB2YWx1ZTogYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIC0gYGluY2x1ZGVRdWVzdGlvbnNXaXRoSGlkZGVuVGl0bGVgOiBgYm9vbGVhbmBcXFxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIG51bWJlciBxdWVzdGlvbnMgd2hvc2UgW2B0aXRsZUxvY2F0aW9uYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3F1ZXN0aW9uI3RpdGxlTG9jYXRpb24pIHByb3BlcnR5IGlzIHNldCB0byBgXCJoaWRkZW5cImAuIERlZmF1bHQgdmFsdWU6IGBmYWxzZWAuXG4gICAgICovXG4gICAgbnVtYmVyaW5nOiB7XG4gICAgICAgIGluY2x1ZGVRdWVzdGlvbnNXaXRoSGlkZGVuTnVtYmVyOiBmYWxzZSxcbiAgICAgICAgaW5jbHVkZVF1ZXN0aW9uc1dpdGhIaWRkZW5UaXRsZTogZmFsc2VcbiAgICB9LFxuICAgIC8vI3JlZ2lvbiBudW1iZXJpbmcgc2VjdGlvbiwgT2Jzb2xldGUgcHJvcGVydGllc1xuICAgIGdldCBzZXRRdWVzdGlvblZpc2libGVJbmRleEZvckhpZGRlblRpdGxlKCkgeyByZXR1cm4gdGhpcy5udW1iZXJpbmcuaW5jbHVkZVF1ZXN0aW9uc1dpdGhIaWRkZW5UaXRsZTsgfSxcbiAgICBzZXQgc2V0UXVlc3Rpb25WaXNpYmxlSW5kZXhGb3JIaWRkZW5UaXRsZSh2YWwpIHsgdGhpcy5udW1iZXJpbmcuaW5jbHVkZVF1ZXN0aW9uc1dpdGhIaWRkZW5UaXRsZSA9IHZhbDsgfSxcbiAgICBnZXQgc2V0UXVlc3Rpb25WaXNpYmxlSW5kZXhGb3JIaWRkZW5OdW1iZXIoKSB7IHJldHVybiB0aGlzLm51bWJlcmluZy5pbmNsdWRlUXVlc3Rpb25zV2l0aEhpZGRlbk51bWJlcjsgfSxcbiAgICBzZXQgc2V0UXVlc3Rpb25WaXNpYmxlSW5kZXhGb3JIaWRkZW5OdW1iZXIodmFsKSB7IHRoaXMubnVtYmVyaW5nLmluY2x1ZGVRdWVzdGlvbnNXaXRoSGlkZGVuTnVtYmVyID0gdmFsOyB9LFxuICAgIC8vI2VuZHJlZ2lvblxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyBhbiBhY3Rpb24gdG8gcGVyZm9ybSB3aGVuIHVzZXJzIHByZXNzIHRoZSBFbnRlciBrZXkgd2l0aGluIGEgc3VydmV5LlxuICAgICAqXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqXG4gICAgICogLSBgXCJtb3ZlVG9OZXh0RWRpdG9yXCJgIC0gTW92ZXMgZm9jdXMgdG8gdGhlIG5leHQgZWRpdG9yLlxuICAgICAqIC0gYFwibG9zZUZvY3VzXCJgIC0gUmVtb3ZlcyBmb2N1cyBmcm9tIHRoZSBjdXJyZW50IGVkaXRvci5cbiAgICAgKiAtIGBcImRlZmF1bHRcImAgLSBCZWhhdmVzIGFzIGEgc3RhbmRhcmQgYDxpbnB1dD5gIGVsZW1lbnQuXG4gICAgICovXG4gICAgZW50ZXJLZXlBY3Rpb246IFwiZGVmYXVsdFwiLFxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgc3RyaW5nIGNvbXBhcmlzb24uXG4gICAgICpcbiAgICAgKiBOZXN0ZWQgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqIC0gYHRyaW1TdHJpbmdzYDogYGJvb2xlYW5gXFxcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0byByZW1vdmUgd2hpdGVzcGFjZSBmcm9tIGJvdGggZW5kcyBvZiBhIHN0cmluZyBiZWZvcmUgdGhlIGNvbXBhcmlzb24uIERlZmF1bHQgdmFsdWU6IGB0cnVlYC5cbiAgICAgKlxuICAgICAqIC0gYGNhc2VTZW5zaXRpdmVgOiBgYm9vbGVhbmBcXFxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjYXBpdGFsIGFuZCBsb3dlci1jYXNlIGxldHRlcnMuIERlZmF1bHQgdmFsdWU6IGBmYWxzZWAuXG4gICAgICovXG4gICAgY29tcGFyYXRvcjoge1xuICAgICAgICB0cmltU3RyaW5nczogdHJ1ZSxcbiAgICAgICAgY2FzZVNlbnNpdGl2ZTogZmFsc2UsXG4gICAgICAgIG5vcm1hbGl6ZVRleHRDYWxsYmFjazogZnVuY3Rpb24gKHN0ciwgcmVhc29uKSB7IHJldHVybiBzdHI7IH1cbiAgICB9LFxuICAgIGV4cHJlc3Npb25EaXNhYmxlQ29udmVyc2lvbkNoYXI6IFwiI1wiLFxuICAgIGdldCBjb21tZW50UHJlZml4KCkgeyByZXR1cm4gc2V0dGluZ3MuY29tbWVudFN1ZmZpeDsgfSxcbiAgICBzZXQgY29tbWVudFByZWZpeCh2YWwpIHsgc2V0dGluZ3MuY29tbWVudFN1ZmZpeCA9IHZhbDsgfSxcbiAgICAvKipcbiAgICAgKiBBIHN1ZmZpeCBhZGRlZCB0byB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdGhhdCBzdG9yZXMgY29tbWVudHMuXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBcIi1Db21tZW50XCJcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gc3BlY2lmeSB0aGlzIHNldHRpbmcgZm9yIGFuIGluZGl2aWR1YWwgc3VydmV5OiBbYGNvbW1lbnRTdWZmaXhgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2Uvc3VydmV5LWRhdGEtbW9kZWwjY29tbWVudFN1ZmZpeCkuXG4gICAgICovXG4gICAgY29tbWVudFN1ZmZpeDogXCItQ29tbWVudFwiLFxuICAgIC8qKlxuICAgICAqIEEgc2VwYXJhdG9yIHVzZWQgaW4gYSBzaG9ydGhhbmQgbm90YXRpb24gdGhhdCBzcGVjaWZpZXMgYSB2YWx1ZSBhbmQgZGlzcGxheSB0ZXh0IGZvciBhbiBbYEl0ZW1WYWx1ZWBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9pdGVtdmFsdWUpIG9iamVjdDogYFwidmFsdWV8dGV4dFwiYC5cbiAgICAgKlxuICAgICAqIERlZmF1bHQgdmFsdWU6IGBcInxcImBcbiAgICAgKi9cbiAgICBpdGVtVmFsdWVTZXBhcmF0b3I6IFwifFwiLFxuICAgIC8qKlxuICAgICAqIEEgbWF4aW11bSBudW1iZXIgb2YgcmF0ZSB2YWx1ZXMgaW4gYSBbUmF0aW5nXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvcmF0aW5nLXNjYWxlLXF1ZXN0aW9uLW1vZGVsKSBxdWVzdGlvbi5cbiAgICAgKlxuICAgICAqIERlZmF1bHQgdmFsdWU6IDIwXG4gICAgICovXG4gICAgcmF0aW5nTWF4aW11bVJhdGVWYWx1ZUNvdW50OiAyMCxcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0byBjbG9zZSB0aGUgZHJvcC1kb3duIG1lbnUgb2YgYSBbVGFnQm94XShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9leGFtcGxlcy9ob3ctdG8tY3JlYXRlLW11bHRpc2VsZWN0LXRhZy1ib3gvKSBxdWVzdGlvbiBhZnRlciBhIHVzZXIgc2VsZWN0cyBhIHZhbHVlLlxuICAgICAqXG4gICAgICogVGhpcyBzZXR0aW5nIGFwcGxpZXMgdG8gYWxsIFRhZ0JveCBxdWVzdGlvbnMgb24gYSBwYWdlLiBZb3UgY2FuIHVzZSB0aGUgW2Nsb3NlT25TZWxlY3RdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9kcm9wZG93bi10YWctYm94LW1vZGVsI2Nsb3NlT25TZWxlY3QpIHByb3BlcnR5IHRvIHNwZWNpZnkgdGhlIHNhbWUgc2V0dGluZyBmb3IgYW4gaW5kaXZpZHVhbCBUYWdCb3ggcXVlc3Rpb24uXG4gICAgICovXG4gICAgdGFnYm94Q2xvc2VPblNlbGVjdDogZmFsc2UsXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGFjdGl2YXRlcyBhIGJyb3dzZXIgY29uZmlybSBkaWFsb2cuXG4gICAgICpcbiAgICAgKiBVc2UgdGhlIGZvbGxvd2luZyBjb2RlIHRvIGV4ZWN1dGUgdGhpcyBmdW5jdGlvbjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tIFwic3VydmV5LWNvcmVcIjtcbiAgICAgKlxuICAgICAqIC8vIGByZXN1bHRgIGNvbnRhaW5zIGB0cnVlYCBpZiB0aGUgYWN0aW9uIHdhcyBjb25maXJtZWQgb3IgYGZhbHNlYCBvdGhlcndpc2VcbiAgICAgKiBjb25zdCByZXN1bHQgPSBzZXR0aW5ncy5jb25maXJtQWN0aW9uRnVuYyhcIkFyZSB5b3Ugc3VyZT9cIik7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHJlZGVmaW5lIHRoZSBgY29uZmlybUFjdGlvbkZ1bmNgIGZ1bmN0aW9uIGlmIHlvdSB3YW50IHRvIGRpc3BsYXkgYSBjdXN0b20gZGlhbG9nIHdpbmRvdy4gWW91ciBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGB0cnVlYCBpZiBhIHVzZXIgY29uZmlybXMgYW4gYWN0aW9uIG9yIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIEEgbWVzc2FnZSB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIGNvbmZpcm0gZGlhbG9nIHdpbmRvdy5cbiAgICAgKi9cbiAgICBjb25maXJtQWN0aW9uRnVuYzogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpcm0obWVzc2FnZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgYWN0aXZhdGVzIGEgcHJvcHJpZXRhcnkgU3VydmV5SlMgY29uZmlybSBkaWFsb2cuXG4gICAgICpcbiAgICAgKiBVc2UgdGhlIGZvbGxvd2luZyBjb2RlIHRvIGV4ZWN1dGUgdGhpcyBmdW5jdGlvbjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tIFwic3VydmV5LWNvcmVcIjtcbiAgICAgKlxuICAgICAqIHNldHRpbmdzLmNvbmZpcm1BY3Rpb25Bc3luYyhcIkFyZSB5b3Ugc3VyZT9cIiwgKGNvbmZpcm1lZCkgPT4ge1xuICAgICAqICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAqICAgICAvLyAuLi5cbiAgICAgKiAgICAgLy8gUHJvY2VlZCB3aXRoIHRoZSBhY3Rpb25cbiAgICAgKiAgICAgLy8gLi4uXG4gICAgICogICB9IGVsc2Uge1xuICAgICAqICAgICAvLyAuLi5cbiAgICAgKiAgICAgLy8gQ2FuY2VsIHRoZSBhY3Rpb25cbiAgICAgKiAgICAgLy8gLi4uXG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHJlZGVmaW5lIHRoZSBgY29uZmlybUFjdGlvbkFzeW5jYCBmdW5jdGlvbiBpZiB5b3Ugd2FudCB0byBkaXNwbGF5IGEgY3VzdG9tIGRpYWxvZyB3aW5kb3cuIFlvdXIgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gYmUgZW5hYmxlZDsgb3RoZXJ3aXNlLCBhIHN1cnZleSBleGVjdXRlcyB0aGUgW2Bjb25maXJtQWN0aW9uRnVuY2BdKCNjb25maXJtQWN0aW9uRnVuYykgZnVuY3Rpb24uIFBhc3MgdGhlIGRpYWxvZyByZXN1bHQgYXMgdGhlIGBjYWxsYmFja2AgcGFyYW1ldGVyOiBgdHJ1ZWAgaWYgYSB1c2VyIGNvbmZpcm1zIGFuIGFjdGlvbiwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgQSBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZCBpbiB0aGUgY29uZmlybSBkaWFsb2cgd2luZG93LlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiBhIHVzZXIgY29uZmlybXMgYW4gYWN0aW9uIG9yIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGNvbmZpcm1BY3Rpb25Bc3luYzogZnVuY3Rpb24gKG1lc3NhZ2UsIGNhbGxiYWNrLCBhcHBseVRpdGxlLCBsb2NhbGUsIHJvb3RFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QoX3V0aWxzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzaG93Q29uZmlybURpYWxvZ1wiXSkobWVzc2FnZSwgY2FsbGJhY2ssIGFwcGx5VGl0bGUsIGxvY2FsZSwgcm9vdEVsZW1lbnQpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQSBtaW5pbXVtIHdpZHRoIHZhbHVlIGZvciBhbGwgc3VydmV5IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogYFwiMzAwcHhcImBcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBzZXR0aW5nIGZvciBpbmRpdmlkdWFsIGVsZW1lbnRzOiBbYG1pbldpZHRoYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3N1cnZleWVsZW1lbnQjbWluV2lkdGgpLlxuICAgICAqL1xuICAgIG1pbldpZHRoOiBcIjMwMHB4XCIsXG4gICAgLyoqXG4gICAgICogQSBtYXhpbXVtIHdpZHRoIHZhbHVlIGZvciBhbGwgc3VydmV5IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogYFwiMTAwJVwiYFxuICAgICAqXG4gICAgICogWW91IGNhbiBvdmVycmlkZSB0aGlzIHNldHRpbmcgZm9yIGluZGl2aWR1YWwgZWxlbWVudHM6IFtgbWF4V2lkdGhgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2Uvc3VydmV5ZWxlbWVudCNtYXhXaWR0aCkuXG4gICAgICovXG4gICAgbWF4V2lkdGg6IFwiMTAwJVwiLFxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyBob3cgbWFueSB0aW1lcyBzdXJ2ZXlzIGNhbiByZS1ldmFsdWF0ZSBleHByZXNzaW9ucyB3aGVuIGEgcXVlc3Rpb24gdmFsdWUgY2hhbmdlcy4gVGhpcyBsaW1pdCBoZWxwcyBhdm9pZCByZWN1cnNpb25zIGluIGV4cHJlc3Npb25zLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogMTBcbiAgICAgKi9cbiAgICBtYXhDb25kaXRpb25SdW5Db3VudE9uVmFsdWVDaGFuZ2VkOiAxMCxcbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBjb25maWd1cmVzIG5vdGlmaWNhdGlvbnMuXG4gICAgICpcbiAgICAgKiBOZXN0ZWQgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqIC0gYGxpZmV0aW1lYDogYG51bWJlcmBcXFxuICAgICAqIFNwZWNpZmllcyBhIHRpbWUgcGVyaW9kIGR1cmluZyB3aGljaCBhIG5vdGlmaWNhdGlvbiBpcyBkaXNwbGF5ZWQ7IG1lYXN1cmVkIGluIG1pbGxpc2Vjb25kcy5cbiAgICAgKi9cbiAgICBub3RpZmljYXRpb25zOiB7XG4gICAgICAgIGxpZmV0aW1lOiAyMDAwXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgaG93IG1hbnkgbWlsbGlzZWNvbmRzIGEgc3VydmV5IHNob3VsZCB3YWl0IGJlZm9yZSBpdCBhdXRvbWF0aWNhbGx5IHN3aXRjaGVzIHRvIHRoZSBuZXh0IHBhZ2UuIEFwcGxpZXMgb25seSB3aGVuIFthdXRvLWFkdmFuY2VdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9zdXJ2ZXktZGF0YS1tb2RlbCNnb05leHRQYWdlQXV0b21hdGljKSBpcyBlbmFibGVkLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogMzAwXG4gICAgICovXG4gICAgYXV0b0FkdmFuY2VEZWxheTogMzAwLFxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgZGlyZWN0aW9uIGluIHdoaWNoIHRvIGxheSBvdXQgQ2hlY2tib3ggYW5kIFJhZGlvZ3JvdXAgaXRlbXMuIFRoaXMgc2V0dGluZyBhZmZlY3RzIHRoZSByZXN1bHRpbmcgVUkgd2hlbiBpdGVtcyBhcmUgYXJyYW5nZWQgaW4gW21vcmUgdGhhbiBvbmUgY29sdW1uXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvY2hlY2tib3gtcXVlc3Rpb24tbW9kZWwjY29sQ291bnQpLlxuICAgICAqXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqXG4gICAgICogLSBgXCJyb3dcImAgKGRlZmF1bHQpIC0gSXRlbXMgZmlsbCB0aGUgY3VycmVudCByb3csIHRoZW4gbW92ZSBvbiB0byB0aGUgbmV4dCByb3cuXG4gICAgICogLSBgXCJjb2x1bW5cImAgLSBJdGVtcyBmaWxsIHRoZSBjdXJyZW50IGNvbHVtbiwgdGhlbiBtb3ZlIG9uIHRvIHRoZSBuZXh0IGNvbHVtbi5cbiAgICAgKi9cbiAgICBzaG93SXRlbXNJbk9yZGVyOiBcImRlZmF1bHRcIixcbiAgICAvKipcbiAgICAgKiBBIHZhbHVlIHRvIHNhdmUgaW4gc3VydmV5IHJlc3VsdHMgd2hlbiByZXNwb25kZW50cyBzZWxlY3QgdGhlIFwiTm9uZVwiIGNob2ljZSBpdGVtLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogYFwibm9uZVwiYFxuICAgICAqL1xuICAgIG5vbmVJdGVtVmFsdWU6IFwibm9uZVwiLFxuICAgIC8qKlxuICAgICAqIEEgdmFsdWUgdG8gc2F2ZSBpbiBzdXJ2ZXkgcmVzdWx0cyB3aGVuIHJlc3BvbmRlbnRzIHNlbGVjdCB0aGUgXCJSZWZ1c2UgdG8gYW5zd2VyXCIgY2hvaWNlIGl0ZW0uXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBgXCJyZWZ1c2VkXCJgXG4gICAgICovXG4gICAgcmVmdXNlSXRlbVZhbHVlOiBcInJlZnVzZWRcIixcbiAgICAvKipcbiAgICAgKiBBIHZhbHVlIHRvIHNhdmUgaW4gc3VydmV5IHJlc3VsdHMgd2hlbiByZXNwb25kZW50cyBzZWxlY3QgdGhlIFwiRG9uJ3Qga25vd1wiIGNob2ljZSBpdGVtLlxuICAgICAqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogYFwiZG9udGtub3dcImBcbiAgICAgKi9cbiAgICBkb250S25vd0l0ZW1WYWx1ZTogXCJkb250a25vd1wiLFxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB3aG9zZSBwcm9wZXJ0aWVzIHNwZWNpZnkgdGhlIG9yZGVyIG9mIHRoZSBzcGVjaWFsIGNob2ljZSBpdGVtcyAoXCJOb25lXCIsIFwiT3RoZXJcIiwgXCJTZWxlY3QgQWxsXCIsIFwiUmVmdXNlIHRvIGFuc3dlclwiLCBcIkRvbid0IGtub3dcIikgaW4gc2VsZWN0LWJhc2VkIHF1ZXN0aW9ucy5cbiAgICAgKlxuICAgICAqIERlZmF1bHQgdmFsdWU6IGB7IHNlbGVjdEFsbEl0ZW06IFstMV0sIG5vbmVJdGVtOiBbMV0sIG90aGVySXRlbTogWzJdLCBkb250S25vd0l0ZW06IFszXSwgb3RoZXJJdGVtOiBbNF0gfWBcbiAgICAgKlxuICAgICAqIFVzZSB0aGlzIG9iamVjdCB0byByZW9yZGVyIHNwZWNpYWwgY2hvaWNlcy4gRWFjaCBwcm9wZXJ0eSBhY2NlcHRzIGFuIGFycmF5IG9mIGludGVnZXIgbnVtYmVycy4gTmVnYXRpdmUgbnVtYmVycyBwbGFjZSBhIHNwZWNpYWwgY2hvaWNlIGl0ZW0gYWJvdmUgcmVndWxhciBjaG9pY2UgaXRlbXMsIHBvc2l0aXZlIG51bWJlcnMgcGxhY2UgaXQgYmVsb3cgdGhlbS4gRm9yIGluc3RhbmNlLCB0aGUgY29kZSBiZWxvdyBzcGVjaWZpZXMgdGhlIGZvbGxvd2luZyBvcmRlciBvZiBjaG9pY2VzOiBOb25lLCBTZWxlY3QgQWxsLCByZWd1bGFyIGNob2ljZXMsIE90aGVyLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gXCJzdXJ2ZXktY29yZVwiO1xuICAgICAqXG4gICAgICogc2V0dGluZ3Muc3BlY2lhbENob2ljZXNPcmRlci5ub25lSXRlbSA9IFstMl07XG4gICAgICogc2V0dGluZ3Muc3BlY2lhbENob2ljZXNPcmRlci5zZWxlY3RBbGxJdGVtID0gWy0xXTtcbiAgICAgKiBzZXR0aW5ncy5zcGVjaWFsQ2hvaWNlc09yZGVyLm90aGVySXRlbSA9IFsxXTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIElmIHlvdSB3YW50IHRvIGR1cGxpY2F0ZSBhIHNwZWNpYWwgY2hvaWNlIGl0ZW0gYWJvdmUgYW5kIGJlbG93IG90aGVyIGNob2ljZXMsIGFkZCB0d28gbnVtYmVycyB0byB0aGUgY29ycmVzcG9uZGluZyBhcnJheTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogc2V0dGluZ3Muc3BlY2lhbENob2ljZXNPcmRlci5zZWxlY3RBbGxJdGVtID0gWy0xLCAzXSAvLyBEaXNwbGF5cyBTZWxlY3QgQWxsIGFib3ZlIGFuZCBiZWxvdyBvdGhlciBjaG9pY2VzXG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3BlY2lhbENob2ljZXNPcmRlcjoge1xuICAgICAgICBzZWxlY3RBbGxJdGVtOiBbLTFdLFxuICAgICAgICBub25lSXRlbTogWzFdLFxuICAgICAgICByZWZ1c2VJdGVtOiBbMl0sXG4gICAgICAgIGRvbnRLbm93SXRlbTogWzNdLFxuICAgICAgICBvdGhlckl0ZW06IFs0XVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIHN1cHBvcnRlZCB2YWxpZGF0b3JzIGJ5IHF1ZXN0aW9uIHR5cGUuXG4gICAgICovXG4gICAgc3VwcG9ydGVkVmFsaWRhdG9yczoge1xuICAgICAgICBxdWVzdGlvbjogW1wiZXhwcmVzc2lvblwiXSxcbiAgICAgICAgY29tbWVudDogW1widGV4dFwiLCBcInJlZ2V4XCJdLFxuICAgICAgICB0ZXh0OiBbXCJudW1lcmljXCIsIFwidGV4dFwiLCBcInJlZ2V4XCIsIFwiZW1haWxcIl0sXG4gICAgICAgIGNoZWNrYm94OiBbXCJhbnN3ZXJjb3VudFwiXSxcbiAgICAgICAgaW1hZ2VwaWNrZXI6IFtcImFuc3dlcmNvdW50XCJdLFxuICAgIH0sXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIGEgbWluaW11bSBkYXRlIHRoYXQgdXNlcnMgY2FuIGVudGVyIGludG8gYSBbVGV4dF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3RleHQtZW50cnktcXVlc3Rpb24tbW9kZWwpIHF1ZXN0aW9uIHdpdGggW2BpbnB1dFR5cGVgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvdGV4dC1lbnRyeS1xdWVzdGlvbi1tb2RlbCNpbnB1dFR5cGUpIHNldCB0byBgXCJkYXRlXCJgIG9yIGBcImRhdGV0aW1lLWxvY2FsXCJgLiBTZXQgdGhpcyBwcm9wZXJ0eSB0byBhIHN0cmluZyB3aXRoIHRoZSBmb2xsbG93aW5nIGZvcm1hdDogYFwieXl5eS1tbS1kZFwiYC5cbiAgICAgKi9cbiAgICBtaW5EYXRlOiBcIlwiLFxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyBhIG1heGltdW0gZGF0ZSB0aGF0IHVzZXJzIGNhbiBlbnRlciBpbnRvIGEgW1RleHRdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS90ZXh0LWVudHJ5LXF1ZXN0aW9uLW1vZGVsKSBxdWVzdGlvbiB3aXRoIFtgaW5wdXRUeXBlYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3RleHQtZW50cnktcXVlc3Rpb24tbW9kZWwjaW5wdXRUeXBlKSBzZXQgdG8gYFwiZGF0ZVwiYCBvciBgXCJkYXRldGltZS1sb2NhbFwiYC4gU2V0IHRoaXMgcHJvcGVydHkgdG8gYSBzdHJpbmcgd2l0aCB0aGUgZm9sbGxvd2luZyBmb3JtYXQ6IGBcInl5eXktbW0tZGRcImAuXG4gICAgICovXG4gICAgbWF4RGF0ZTogXCJcIixcbiAgICBzaG93TW9kYWw6IHVuZGVmaW5lZCxcbiAgICBzaG93RGlhbG9nOiB1bmRlZmluZWQsXG4gICAgc3VwcG9ydENyZWF0b3JWMjogZmFsc2UsXG4gICAgc2hvd0RlZmF1bHRJdGVtc0luQ3JlYXRvclYyOiB0cnVlLFxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB0aGF0IHNwZWNpZmllcyBpY29uIHJlcGxhY2VtZW50cy4gT2JqZWN0IGtleXMgYXJlIGJ1aWx0LWluIGljb24gbmFtZXMuIFRvIHVzZSBhIGN1c3RvbSBpY29uLCBhc3NpZ24gaXRzIG5hbWUgdG8gdGhlIGtleSBvZiB0aGUgaWNvbiB5b3Ugd2FudCB0byByZXBsYWNlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gXCJzdXJ2ZXktY29yZVwiO1xuICAgICAqXG4gICAgICogc2V0dGluZ3MuY3VzdG9tSWNvbnNbXCJpY29uLXJlZG9cIl0gPSBcImN1c3RvbS1yZWRvLWljb25cIjtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGljb25zIGluIFN1cnZleUpTLCByZWZlciB0byB0aGUgZm9sbG93aW5nIGhlbHAgdG9waWM6IFtVSSBJY29uc10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9pY29ucykuXG4gICAgICovXG4gICAgY3VzdG9tSWNvbnM6IHt9LFxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB3aGljaCBwYXJ0IG9mIGEgY2hvaWNlIGl0ZW0gcmVzcG9uZHMgdG8gYSBkcmFnIGdlc3R1cmUgaW4gUmFua2luZyBxdWVzdGlvbnMuXG4gICAgICpcbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICpcbiAgICAgKiAtIGBcImVudGlyZUl0ZW1cImAgKGRlZmF1bHQpIC0gVXNlcnMgY2FuIHVzZSB0aGUgZW50aXJlIGNob2ljZSBpdGVtIGFzIGEgZHJhZyBoYW5kbGUuXG4gICAgICogLSBgXCJpY29uXCJgIC0gVXNlcnMgY2FuIG9ubHkgdXNlIHRoZSBjaG9pY2UgaXRlbSBpY29uIGFzIGEgZHJhZyBoYW5kbGUuXG4gICAgICovXG4gICAgcmFua2luZ0RyYWdIYW5kbGVBcmVhOiBcImVudGlyZUl0ZW1cIixcbiAgICBlbnZpcm9ubWVudDogZGVmYXVsdEVudmlyb25tZW50LFxuICAgIC8qKlxuICAgICAqIEFsbG93cyB5b3UgdG8gaGlkZSB0aGUgbWF4aW11bSBsZW5ndGggaW5kaWNhdG9yIGluIHRleHQgaW5wdXQgcXVlc3Rpb25zLlxuICAgICAqXG4gICAgICogSWYgeW91IHNwZWNpZnkgYSBxdWVzdGlvbidzIFtgbWF4TGVuZ3RoYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3RleHQtZW50cnktcXVlc3Rpb24tbW9kZWwjbWF4TGVuZ3RoKSBwcm9wZXJ0eSBvciBhIHN1cnZleSdzIFtgbWF4VGV4dExlbmd0aGBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9zdXJ2ZXktZGF0YS1tb2RlbCNtYXhUZXh0TGVuZ3RoKSBwcm9wZXJ0eSwgdGV4dCBpbnB1dCBxdWVzdGlvbnMgaW5kaWNhdGUgdGhlIG51bWJlciBvZiBlbnRlcmVkIGNoYXJhY3RlcnMgYW5kIHRoZSBjaGFyYWN0ZXIgbGltaXQuIEFzc2lnbiBgZmFsc2VgIHRvIHRoZSBgc2V0dGluZ3Muc2hvd01heExlbmd0aEluZGljYXRvcmAgcHJvcGVydHkgaWYgeW91IHdhbnQgdG8gaGlkZSB0aGlzIGluZGljYXRvci5cbiAgICAgKlxuICAgICAqIERlZmF1bHQgdmFsdWU6IGB0cnVlYFxuICAgICAqL1xuICAgIHNob3dNYXhMZW5ndGhJbmRpY2F0b3I6IHRydWUsXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdG8gYW5pbWF0ZSBzdXJ2ZXkgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBgdHJ1ZWBcbiAgICAqL1xuICAgIGFuaW1hdGlvbkVuYWJsZWQ6IHRydWUsXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHRoYXQgc3BlY2lmaWVzIGhlYWRpbmcgbGV2ZWxzIChgPGgxPmAsIGA8aDI+YCwgZXRjLikgdG8gdXNlIHdoZW4gcmVuZGVyaW5nIHN1cnZleSwgcGFnZSwgcGFuZWwsIGFuZCBxdWVzdGlvbiB0aXRsZXMuXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBgeyBzdXJ2ZXk6IFwiaDNcIiwgcGFnZTogXCJoNFwiLCBwYW5lbDogXCJoNFwiLCBxdWVzdGlvbjogXCJoNVwiIH1gXG4gICAgICpcbiAgICAgKiBJZiB5b3Ugd2FudCB0byBtb2RpZnkgaGVhZGluZyBsZXZlbHMgZm9yIGluZGl2aWR1YWwgdGl0bGVzLCBoYW5kbGUgYFN1cnZleU1vZGVsYCdzIFtgb25HZXRUaXRsZVRhZ05hbWVgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2Uvc3VydmV5LWRhdGEtbW9kZWwjb25HZXRUaXRsZVRhZ05hbWUpIGV2ZW50LlxuICAgICAqL1xuICAgIHRpdGxlVGFnczoge1xuICAgICAgICBzdXJ2ZXk6IFwiaDNcIixcbiAgICAgICAgcGFnZTogXCJoNFwiLFxuICAgICAgICBwYW5lbDogXCJoNFwiLFxuICAgICAgICBxdWVzdGlvbjogXCJoNVwiLFxuICAgIH0sXG4gICAgcXVlc3Rpb25zOiB7XG4gICAgICAgIGlucHV0VHlwZXM6IFtcbiAgICAgICAgICAgIFwiY29sb3JcIixcbiAgICAgICAgICAgIFwiZGF0ZVwiLFxuICAgICAgICAgICAgXCJkYXRldGltZS1sb2NhbFwiLFxuICAgICAgICAgICAgXCJlbWFpbFwiLFxuICAgICAgICAgICAgXCJtb250aFwiLFxuICAgICAgICAgICAgXCJudW1iZXJcIixcbiAgICAgICAgICAgIFwicGFzc3dvcmRcIixcbiAgICAgICAgICAgIFwicmFuZ2VcIixcbiAgICAgICAgICAgIFwidGVsXCIsXG4gICAgICAgICAgICBcInRleHRcIixcbiAgICAgICAgICAgIFwidGltZVwiLFxuICAgICAgICAgICAgXCJ1cmxcIixcbiAgICAgICAgICAgIFwid2Vla1wiLFxuICAgICAgICBdLFxuICAgICAgICBkYXRhTGlzdDogW1xuICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIFwibmFtZVwiLFxuICAgICAgICAgICAgXCJob25vcmlmaWMtcHJlZml4XCIsXG4gICAgICAgICAgICBcImdpdmVuLW5hbWVcIixcbiAgICAgICAgICAgIFwiYWRkaXRpb25hbC1uYW1lXCIsXG4gICAgICAgICAgICBcImZhbWlseS1uYW1lXCIsXG4gICAgICAgICAgICBcImhvbm9yaWZpYy1zdWZmaXhcIixcbiAgICAgICAgICAgIFwibmlja25hbWVcIixcbiAgICAgICAgICAgIFwib3JnYW5pemF0aW9uLXRpdGxlXCIsXG4gICAgICAgICAgICBcInVzZXJuYW1lXCIsXG4gICAgICAgICAgICBcIm5ldy1wYXNzd29yZFwiLFxuICAgICAgICAgICAgXCJjdXJyZW50LXBhc3N3b3JkXCIsXG4gICAgICAgICAgICBcIm9yZ2FuaXphdGlvblwiLFxuICAgICAgICAgICAgXCJzdHJlZXQtYWRkcmVzc1wiLFxuICAgICAgICAgICAgXCJhZGRyZXNzLWxpbmUxXCIsXG4gICAgICAgICAgICBcImFkZHJlc3MtbGluZTJcIixcbiAgICAgICAgICAgIFwiYWRkcmVzcy1saW5lM1wiLFxuICAgICAgICAgICAgXCJhZGRyZXNzLWxldmVsNFwiLFxuICAgICAgICAgICAgXCJhZGRyZXNzLWxldmVsM1wiLFxuICAgICAgICAgICAgXCJhZGRyZXNzLWxldmVsMlwiLFxuICAgICAgICAgICAgXCJhZGRyZXNzLWxldmVsMVwiLFxuICAgICAgICAgICAgXCJjb3VudHJ5XCIsXG4gICAgICAgICAgICBcImNvdW50cnktbmFtZVwiLFxuICAgICAgICAgICAgXCJwb3N0YWwtY29kZVwiLFxuICAgICAgICAgICAgXCJjYy1uYW1lXCIsXG4gICAgICAgICAgICBcImNjLWdpdmVuLW5hbWVcIixcbiAgICAgICAgICAgIFwiY2MtYWRkaXRpb25hbC1uYW1lXCIsXG4gICAgICAgICAgICBcImNjLWZhbWlseS1uYW1lXCIsXG4gICAgICAgICAgICBcImNjLW51bWJlclwiLFxuICAgICAgICAgICAgXCJjYy1leHBcIixcbiAgICAgICAgICAgIFwiY2MtZXhwLW1vbnRoXCIsXG4gICAgICAgICAgICBcImNjLWV4cC15ZWFyXCIsXG4gICAgICAgICAgICBcImNjLWNzY1wiLFxuICAgICAgICAgICAgXCJjYy10eXBlXCIsXG4gICAgICAgICAgICBcInRyYW5zYWN0aW9uLWN1cnJlbmN5XCIsXG4gICAgICAgICAgICBcInRyYW5zYWN0aW9uLWFtb3VudFwiLFxuICAgICAgICAgICAgXCJsYW5ndWFnZVwiLFxuICAgICAgICAgICAgXCJiZGF5XCIsXG4gICAgICAgICAgICBcImJkYXktZGF5XCIsXG4gICAgICAgICAgICBcImJkYXktbW9udGhcIixcbiAgICAgICAgICAgIFwiYmRheS15ZWFyXCIsXG4gICAgICAgICAgICBcInNleFwiLFxuICAgICAgICAgICAgXCJ1cmxcIixcbiAgICAgICAgICAgIFwicGhvdG9cIixcbiAgICAgICAgICAgIFwidGVsXCIsXG4gICAgICAgICAgICBcInRlbC1jb3VudHJ5LWNvZGVcIixcbiAgICAgICAgICAgIFwidGVsLW5hdGlvbmFsXCIsXG4gICAgICAgICAgICBcInRlbC1hcmVhLWNvZGVcIixcbiAgICAgICAgICAgIFwidGVsLWxvY2FsXCIsXG4gICAgICAgICAgICBcInRlbC1sb2NhbC1wcmVmaXhcIixcbiAgICAgICAgICAgIFwidGVsLWxvY2FsLXN1ZmZpeFwiLFxuICAgICAgICAgICAgXCJ0ZWwtZXh0ZW5zaW9uXCIsXG4gICAgICAgICAgICBcImVtYWlsXCIsXG4gICAgICAgICAgICBcImltcHBcIixcbiAgICAgICAgXVxuICAgIH0sXG4gICAgbGVnYWN5UHJvZ3Jlc3NCYXJWaWV3OiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHRoYXQgY29uZmlndXJlIGlucHV0IG1hc2tzLlxuICAgICAqXG4gICAgICogTmVzdGVkIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAtIGBwYXR0ZXJuUGxhY2Vob2xkZXJDaGFyYDogYHN0cmluZ2BcXFxuICAgICAqIEEgc3ltYm9sIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgY2hhcmFjdGVycyB0byBiZSBlbnRlcmVkIGluIFtwYXR0ZXJuIG1hc2tzXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2FwaS1yZWZlcmVuY2UvaW5wdXRtYXNrcGF0dGVybikuIERlZmF1bHQgdmFsdWU6IGBcIl9cImAuXG4gICAgICpcbiAgICAgKiAtIGBwYXR0ZXJuRXNjYXBlQ2hhcmA6IGBzdHJpbmdgXFxcbiAgICAgKiBBIHN5bWJvbCB1c2VkIHRvIGluc2VydCBsaXRlcmFsIHJlcHJlc2VudGF0aW9ucyBvZiBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gW3BhdHRlcm4gbWFza3NdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vYXBpLXJlZmVyZW5jZS9pbnB1dG1hc2twYXR0ZXJuKS4gRGVmYXVsdCB2YWx1ZTogYFwiXFxcXFwiYC5cbiAgICAgKlxuICAgICAqIC0gYHBhdHRlcm5EZWZpbml0aW9uc2A6IGA8eyBba2V5OiBzdHJpbmddOiBSZWdFeHAgfT5gXFxcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBtYXBzIHBsYWNlaG9sZGVyIHN5bWJvbHMgdG8gcmVndWxhciBleHByZXNzaW9ucyBpbiBbcGF0dGVybiBtYXNrc10oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL2lucHV0bWFza3BhdHRlcm4pLiBEZWZhdWx0IHZhbHVlOiBgeyBcIjlcIjogL1swLTldLywgXCJhXCI6IC9bYS16QS1aXS8sIFwiI1wiOiAvW2EtekEtWjAtOV0vIH1gLlxuICAgICAqL1xuICAgIG1hc2tTZXR0aW5nczoge1xuICAgICAgICBwYXR0ZXJuUGxhY2Vob2xkZXJDaGFyOiBcIl9cIixcbiAgICAgICAgcGF0dGVybkVzY2FwZUNoYXI6IFwiXFxcXFwiLFxuICAgICAgICBwYXR0ZXJuRGVmaW5pdGlvbnM6IHtcbiAgICAgICAgICAgIFwiOVwiOiAvWzAtOV0vLFxuICAgICAgICAgICAgXCJhXCI6IC9bYS16QS1aXS8sXG4gICAgICAgICAgICBcIiNcIjogL1thLXpBLVowLTldL1xuICAgICAgICB9XG4gICAgfVxufTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9zdXJ2ZXktZWxlbWVudC50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9zdXJ2ZXktZWxlbWVudC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdXJ2ZXlFbGVtZW50Q29yZSwgRHJhZ1R5cGVPdmVyTWVFbnVtLCBTdXJ2ZXlFbGVtZW50ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN1cnZleUVsZW1lbnRDb3JlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3VydmV5RWxlbWVudENvcmU7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkRyYWdUeXBlT3Zlck1lRW51bVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIERyYWdUeXBlT3Zlck1lRW51bTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiU3VydmV5RWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1cnZleUVsZW1lbnQ7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2pzb25vYmplY3QgKi8gXCIuL3NyYy9qc29ub2JqZWN0LnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9iYXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2Jhc2UgKi8gXCIuL3NyYy9iYXNlLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hY3Rpb25zX2FkYXB0aXZlX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY3Rpb25zL2FkYXB0aXZlLWNvbnRhaW5lciAqLyBcIi4vc3JjL2FjdGlvbnMvYWRhcHRpdmUtY29udGFpbmVyLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9oZWxwZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2hlbHBlcnMgKi8gXCIuL3NyYy9oZWxwZXJzLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zZXR0aW5ncyAqLyBcIi4vc3JjL3NldHRpbmdzLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hY3Rpb25zX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY3Rpb25zL2NvbnRhaW5lciAqLyBcIi4vc3JjL2FjdGlvbnMvY29udGFpbmVyLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc19jc3NDbGFzc0J1aWxkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMvY3NzQ2xhc3NCdWlsZGVyICovIFwiLi9zcmMvdXRpbHMvY3NzQ2xhc3NCdWlsZGVyLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc19hbmltYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMvYW5pbWF0aW9uICovIFwiLi9zcmMvdXRpbHMvYW5pbWF0aW9uLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91dGlscy91dGlscyAqLyBcIi4vc3JjL3V0aWxzL3V0aWxzLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dsb2JhbF92YXJpYWJsZXNfdXRpbHMgKi8gXCIuL3NyYy9nbG9iYWxfdmFyaWFibGVzX3V0aWxzLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuXG5cblxuXG5cblxuXG5cblxuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyBmb3IgdGhlIFtgU3VydmV5RWxlbWVudGBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vc3VydmV5ZWxlbWVudCkgYW5kIFtgU3VydmV5TW9kZWxgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL3N1cnZleW1vZGVsKSBjbGFzc2VzLlxuICovXG52YXIgU3VydmV5RWxlbWVudENvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1cnZleUVsZW1lbnRDb3JlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1cnZleUVsZW1lbnRDb3JlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5jcmVhdGVMb2NUaXRsZVByb3BlcnR5KCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLmNyZWF0ZUxvY1RpdGxlUHJvcGVydHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUxvY2FsaXphYmxlU3RyaW5nKFwidGl0bGVcIiwgdGhpcywgdHJ1ZSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLCBcInRpdGxlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGl0bGUgZm9yIHRoZSBzdXJ2ZXkgZWxlbWVudC4gSWYgYHRpdGxlYCBpcyB1bmRlZmluZWQsIHRoZSBgbmFtZWAgcHJvcGVydHkgdmFsdWUgaXMgZGlzcGxheWVkIGluc3RlYWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEVtcHR5IHBhZ2VzIGFuZCBwYW5lbHMgZG8gbm90IGRpc3BsYXkgdGhlaXIgdGl0bGVzIG9yIG5hbWVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIFtDb25maWd1cmUgUXVlc3Rpb24gVGl0bGVzXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2Rlc2lnbi1zdXJ2ZXktcXVlc3Rpb24tdGl0bGVzKVxuICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExvY2FsaXphYmxlU3RyaW5nVGV4dChcInRpdGxlXCIsIHRoaXMuZ2V0RGVmYXVsdFRpdGxlVmFsdWUoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGl6YWJsZVN0cmluZ1RleHQoXCJ0aXRsZVwiLCB2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJsb2NUaXRsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9jYWxpemFibGVTdHJpbmcoXCJ0aXRsZVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZS5nZXREZWZhdWx0VGl0bGVWYWx1ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfTtcbiAgICBTdXJ2ZXlFbGVtZW50Q29yZS5wcm90b3R5cGUudXBkYXRlRGVzY3JpcHRpb25WaXNpYmlsaXR5ID0gZnVuY3Rpb24gKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgIHZhciBzaG93UGxhY2Vob2xkZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXNpZ25Nb2RlKSB7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHlfMSA9IF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJTZXJpYWxpemVyXCJdLmZpbmRQcm9wZXJ0eSh0aGlzLmdldFR5cGUoKSwgXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHNob3dQbGFjZWhvbGRlciA9ICEhKHByb3BlcnR5XzEgPT09IG51bGwgfHwgcHJvcGVydHlfMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvcGVydHlfMS5wbGFjZWhvbGRlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNEZXNjcmlwdGlvbiA9ICEhbmV3RGVzY3JpcHRpb24gfHwgKHNob3dQbGFjZWhvbGRlciAmJiB0aGlzLmlzRGVzaWduTW9kZSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLCBcImxvY0Rlc2NyaXB0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRMb2NhbGl6YWJsZVN0cmluZyhcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJ0aXRsZVRhZ05hbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aXRsZVRhZ05hbWUgPSB0aGlzLmdldERlZmF1bHRUaXRsZVRhZ05hbWUoKTtcbiAgICAgICAgICAgIHZhciBzdXJ2ZXkgPSB0aGlzLmdldFN1cnZleSgpO1xuICAgICAgICAgICAgcmV0dXJuICEhc3VydmV5ID8gc3VydmV5LmdldEVsZW1lbnRUaXRsZVRhZ05hbWUodGhpcywgdGl0bGVUYWdOYW1lKSA6IHRpdGxlVGFnTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZS5nZXREZWZhdWx0VGl0bGVUYWdOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJzZXR0aW5nc1wiXS50aXRsZVRhZ3NbdGhpcy5nZXRUeXBlKCldO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJoYXNUaXRsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50aXRsZS5sZW5ndGggPiAwOyB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJoYXNUaXRsZUFjdGlvbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJoYXNUaXRsZUV2ZW50c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzVGl0bGVBY3Rpb25zO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLmdldFRpdGxlVG9vbGJhciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH07XG4gICAgU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLmdldFRpdGxlT3duZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJpc1RpdGxlT3duZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhdGhpcy5nZXRUaXRsZU93bmVyKCk7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLCBcImlzVGl0bGVSZW5kZXJlZEFzU3RyaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmdldElzVGl0bGVSZW5kZXJlZEFzU3RyaW5nKCk7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50Q29yZS5wcm90b3R5cGUudG9nZ2xlU3RhdGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJjc3NDbGFzc2VzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB7fTsgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50Q29yZS5wcm90b3R5cGUsIFwiY3NzVGl0bGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiXCI7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLCBcImFyaWFUaXRsZUlkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLCBcImFyaWFEZXNjcmlwdGlvbklkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLCBcInRpdGxlVGFiSW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50Q29yZS5wcm90b3R5cGUsIFwidGl0bGVBcmlhRXhwYW5kZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50Q29yZS5wcm90b3R5cGUsIFwidGl0bGVBcmlhUm9sZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJhcmlhTGFiZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY1RpdGxlLnJlbmRlcmVkSHRtbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50Q29yZS5wcm90b3R5cGUsIFwidGl0bGVBcmlhTGFiZWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFyaWFMYWJlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZS5nZXRJc1RpdGxlUmVuZGVyZWRBc1N0cmluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICF0aGlzLmlzVGl0bGVPd25lcjsgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoKVxuICAgIF0sIFN1cnZleUVsZW1lbnRDb3JlLnByb3RvdHlwZSwgXCJoYXNEZXNjcmlwdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5XCJdKSh7XG4gICAgICAgICAgICBsb2NhbGl6YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIG9uU2V0OiBmdW5jdGlvbiAobmV3RGVzY3JpcHRpb24sIHNlbGYpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZURlc2NyaXB0aW9uVmlzaWJpbGl0eShuZXdEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgXSwgU3VydmV5RWxlbWVudENvcmUucHJvdG90eXBlLCBcImRlc2NyaXB0aW9uXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIFN1cnZleUVsZW1lbnRDb3JlO1xufShfYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiQmFzZVwiXSkpO1xuXG4vLyBUT0RPOiByZW5hbWVcbnZhciBEcmFnVHlwZU92ZXJNZUVudW07XG4oZnVuY3Rpb24gKERyYWdUeXBlT3Zlck1lRW51bSkge1xuICAgIERyYWdUeXBlT3Zlck1lRW51bVtEcmFnVHlwZU92ZXJNZUVudW1bXCJJbnNpZGVFbXB0eVBhbmVsXCJdID0gMV0gPSBcIkluc2lkZUVtcHR5UGFuZWxcIjtcbiAgICBEcmFnVHlwZU92ZXJNZUVudW1bRHJhZ1R5cGVPdmVyTWVFbnVtW1wiTXVsdGlsaW5lUmlnaHRcIl0gPSAyXSA9IFwiTXVsdGlsaW5lUmlnaHRcIjtcbiAgICBEcmFnVHlwZU92ZXJNZUVudW1bRHJhZ1R5cGVPdmVyTWVFbnVtW1wiTXVsdGlsaW5lTGVmdFwiXSA9IDNdID0gXCJNdWx0aWxpbmVMZWZ0XCI7XG4gICAgRHJhZ1R5cGVPdmVyTWVFbnVtW0RyYWdUeXBlT3Zlck1lRW51bVtcIlRvcFwiXSA9IDRdID0gXCJUb3BcIjtcbiAgICBEcmFnVHlwZU92ZXJNZUVudW1bRHJhZ1R5cGVPdmVyTWVFbnVtW1wiUmlnaHRcIl0gPSA1XSA9IFwiUmlnaHRcIjtcbiAgICBEcmFnVHlwZU92ZXJNZUVudW1bRHJhZ1R5cGVPdmVyTWVFbnVtW1wiQm90dG9tXCJdID0gNl0gPSBcIkJvdHRvbVwiO1xuICAgIERyYWdUeXBlT3Zlck1lRW51bVtEcmFnVHlwZU92ZXJNZUVudW1bXCJMZWZ0XCJdID0gN10gPSBcIkxlZnRcIjtcbn0pKERyYWdUeXBlT3Zlck1lRW51bSB8fCAoRHJhZ1R5cGVPdmVyTWVFbnVtID0ge30pKTtcbi8qKlxuICogQSBiYXNlIGNsYXNzIGZvciBhbGwgc3VydmV5IGVsZW1lbnRzLlxuICovXG52YXIgU3VydmV5RWxlbWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3VydmV5RWxlbWVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdXJ2ZXlFbGVtZW50KG5hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2VsZWN0ZWRFbGVtZW50SW5EZXNpZ25WYWx1ZSA9IF90aGlzO1xuICAgICAgICBfdGhpcy5kaXNhYmxlRGVzaWduQWN0aW9ucyA9IFN1cnZleUVsZW1lbnQuQ3JlYXRlRGlzYWJsZWREZXNpZ25FbGVtZW50cztcbiAgICAgICAgX3RoaXMucGFyZW50UXVlc3Rpb25WYWx1ZSA9IG51bGw7XG4gICAgICAgIF90aGlzLmlzQ29udGVudEVsZW1lbnQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaXNFZGl0YWJsZVRlbXBsYXRlRWxlbWVudCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc0ludGVyYWN0aXZlRGVzaWduRWxlbWVudCA9IHRydWU7XG4gICAgICAgIF90aGlzLmlzU2luZ2xlSW5Sb3cgPSB0cnVlO1xuICAgICAgICBfdGhpcy5fcmVuZGVyZWRJc0V4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuX2lzQW5pbWF0aW5nQ29sbGFwc2VFeHBhbmQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uQ29sbGFwc2VkID0gbmV3IF91dGlsc19hbmltYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcIkFuaW1hdGlvbkJvb2xlYW5cIl0oX3RoaXMuZ2V0RXhwYW5kQ29sbGFwc2VBbmltYXRpb25PcHRpb25zKCksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIF90aGlzLl9yZW5kZXJlZElzRXhwYW5kZWQgPSB2YWw7XG4gICAgICAgICAgICBpZiAoX3RoaXMuYW5pbWF0aW9uQWxsb3dlZCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNBbmltYXRpbmdDb2xsYXBzZUV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVFbGVtZW50Q3NzKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlbmRlcmVkSXNFeHBhbmRlZDsgfSk7XG4gICAgICAgIF90aGlzLmFuaW1hdGlvbkFsbG93ZWRWYWx1ZSA9IHRydWU7XG4gICAgICAgIF90aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICBfdGhpcy5jcmVhdGVOZXdBcnJheShcImVycm9yc1wiKTtcbiAgICAgICAgX3RoaXMuY3JlYXRlTmV3QXJyYXkoXCJ0aXRsZUFjdGlvbnNcIik7XG4gICAgICAgIF90aGlzLnJlZ2lzdGVyUHJvcGVydHlDaGFuZ2VkSGFuZGxlcnMoW1wiaXNSZWFkT25seVwiXSwgZnVuY3Rpb24gKCkgeyBfdGhpcy5vblJlYWRPbmx5Q2hhbmdlZCgpOyB9KTtcbiAgICAgICAgX3RoaXMucmVnaXN0ZXJQcm9wZXJ0eUNoYW5nZWRIYW5kbGVycyhbXCJlcnJvcnNcIl0sIGZ1bmN0aW9uICgpIHsgX3RoaXMudXBkYXRlVmlzaWJsZUVycm9ycygpOyB9KTtcbiAgICAgICAgX3RoaXMucmVnaXN0ZXJQcm9wZXJ0eUNoYW5nZWRIYW5kbGVycyhbXCJpc1NpbmdsZUluUm93XCJdLCBmdW5jdGlvbiAoKSB7IF90aGlzLnVwZGF0ZUVsZW1lbnRDc3MoZmFsc2UpOyB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdXJ2ZXlFbGVtZW50LmdldFByb2dyZXNzSW5mb0J5RWxlbWVudHMgPSBmdW5jdGlvbiAoY2hpbGRyZW4sIGlzUmVxdWlyZWQpIHtcbiAgICAgICAgdmFyIGluZm8gPSBfYmFzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiQmFzZVwiXS5jcmVhdGVQcm9ncmVzc0luZm8oKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbltpXS5pc1Zpc2libGUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB2YXIgY2hpbGRJbmZvID0gY2hpbGRyZW5baV0uZ2V0UHJvZ3Jlc3NJbmZvKCk7XG4gICAgICAgICAgICBpbmZvLnF1ZXN0aW9uQ291bnQgKz0gY2hpbGRJbmZvLnF1ZXN0aW9uQ291bnQ7XG4gICAgICAgICAgICBpbmZvLmFuc3dlcmVkUXVlc3Rpb25Db3VudCArPSBjaGlsZEluZm8uYW5zd2VyZWRRdWVzdGlvbkNvdW50O1xuICAgICAgICAgICAgaW5mby5yZXF1aXJlZFF1ZXN0aW9uQ291bnQgKz0gY2hpbGRJbmZvLnJlcXVpcmVkUXVlc3Rpb25Db3VudDtcbiAgICAgICAgICAgIGluZm8ucmVxdWlyZWRBbnN3ZXJlZFF1ZXN0aW9uQ291bnQgKz1cbiAgICAgICAgICAgICAgICBjaGlsZEluZm8ucmVxdWlyZWRBbnN3ZXJlZFF1ZXN0aW9uQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVxdWlyZWQgJiYgaW5mby5xdWVzdGlvbkNvdW50ID4gMCkge1xuICAgICAgICAgICAgaWYgKGluZm8ucmVxdWlyZWRRdWVzdGlvbkNvdW50ID09IDApXG4gICAgICAgICAgICAgICAgaW5mby5yZXF1aXJlZFF1ZXN0aW9uQ291bnQgPSAxO1xuICAgICAgICAgICAgaWYgKGluZm8uYW5zd2VyZWRRdWVzdGlvbkNvdW50ID4gMClcbiAgICAgICAgICAgICAgICBpbmZvLnJlcXVpcmVkQW5zd2VyZWRRdWVzdGlvbkNvdW50ID0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5mbztcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQuU2Nyb2xsRWxlbWVudFRvVG9wID0gZnVuY3Rpb24gKGVsZW1lbnRJZCwgc2Nyb2xsSWZWaXNpYmxlKSB7XG4gICAgICAgIHZhciByb290ID0gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJzZXR0aW5nc1wiXS5lbnZpcm9ubWVudC5yb290O1xuICAgICAgICBpZiAoIWVsZW1lbnRJZCB8fCB0eXBlb2Ygcm9vdCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGVsID0gcm9vdC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICAgICAgICByZXR1cm4gU3VydmV5RWxlbWVudC5TY3JvbGxFbGVtZW50VG9WaWV3Q29yZShlbCwgZmFsc2UsIHNjcm9sbElmVmlzaWJsZSk7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LlNjcm9sbEVsZW1lbnRUb1ZpZXdDb3JlID0gZnVuY3Rpb24gKGVsLCBjaGVja0xlZnQsIHNjcm9sbElmVmlzaWJsZSkge1xuICAgICAgICBpZiAoIWVsIHx8ICFlbC5zY3JvbGxJbnRvVmlldylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGVsVG9wID0gc2Nyb2xsSWZWaXNpYmxlID8gLTEgOiBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgIHZhciBuZWVkU2Nyb2xsID0gZWxUb3AgPCAwO1xuICAgICAgICB2YXIgZWxMZWZ0ID0gLTE7XG4gICAgICAgIGlmICghbmVlZFNjcm9sbCAmJiBjaGVja0xlZnQpIHtcbiAgICAgICAgICAgIGVsTGVmdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgICAgICAgICBuZWVkU2Nyb2xsID0gZWxMZWZ0IDwgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5lZWRTY3JvbGwgJiYgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcIkRvbVdpbmRvd0hlbHBlclwiXS5pc0F2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcIkRvbVdpbmRvd0hlbHBlclwiXS5nZXRJbm5lckhlaWdodCgpO1xuICAgICAgICAgICAgbmVlZFNjcm9sbCA9IGhlaWdodCA+IDAgJiYgaGVpZ2h0IDwgZWxUb3A7XG4gICAgICAgICAgICBpZiAoIW5lZWRTY3JvbGwgJiYgY2hlY2tMZWZ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcIkRvbVdpbmRvd0hlbHBlclwiXS5nZXRJbm5lcldpZHRoKCk7XG4gICAgICAgICAgICAgICAgbmVlZFNjcm9sbCA9IHdpZHRoID4gMCAmJiB3aWR0aCA8IGVsTGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmVlZFNjcm9sbCkge1xuICAgICAgICAgICAgZWwuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmVlZFNjcm9sbDtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQuR2V0Rmlyc3ROb25UZXh0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50cywgcmVtb3ZlU3BhY2VzKSB7XG4gICAgICAgIGlmIChyZW1vdmVTcGFjZXMgPT09IHZvaWQgMCkgeyByZW1vdmVTcGFjZXMgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoIWVsZW1lbnRzIHx8ICFlbGVtZW50cy5sZW5ndGggfHwgZWxlbWVudHMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKHJlbW92ZVNwYWNlcykge1xuICAgICAgICAgICAgdmFyIHRFbCA9IGVsZW1lbnRzWzBdO1xuICAgICAgICAgICAgaWYgKHRFbC5ub2RlTmFtZSA9PT0gXCIjdGV4dFwiKVxuICAgICAgICAgICAgICAgIHRFbC5kYXRhID0gXCJcIjtcbiAgICAgICAgICAgIHRFbCA9IGVsZW1lbnRzW2VsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKHRFbC5ub2RlTmFtZSA9PT0gXCIjdGV4dFwiKVxuICAgICAgICAgICAgICAgIHRFbC5kYXRhID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0ubm9kZU5hbWUgIT0gXCIjdGV4dFwiICYmIGVsZW1lbnRzW2ldLm5vZGVOYW1lICE9IFwiI2NvbW1lbnRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LkZvY3VzRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50SWQpIHtcbiAgICAgICAgaWYgKCFlbGVtZW50SWQgfHwgIV9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X19bXCJEb21Eb2N1bWVudEhlbHBlclwiXS5pc0F2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcmVzID0gU3VydmV5RWxlbWVudC5mb2N1c0VsZW1lbnRDb3JlKGVsZW1lbnRJZCk7XG4gICAgICAgIGlmICghcmVzKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBTdXJ2ZXlFbGVtZW50LmZvY3VzRWxlbWVudENvcmUoZWxlbWVudElkKTtcbiAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5mb2N1c0VsZW1lbnRDb3JlID0gZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICAgICAgICB2YXIgcm9vdCA9IF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wic2V0dGluZ3NcIl0uZW52aXJvbm1lbnQucm9vdDtcbiAgICAgICAgaWYgKCFyb290KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgZWwgPSByb290LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG4gICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5NjY5Nzg2L2NoZWNrLWlmLWVsZW1lbnQtaXMtdmlzaWJsZS1pbi1kb21cbiAgICAgICAgaWYgKGVsICYmICFlbFtcImRpc2FibGVkXCJdICYmIGVsLnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiICYmIGVsLm9mZnNldFBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgU3VydmV5RWxlbWVudC5TY3JvbGxFbGVtZW50VG9WaWV3Q29yZShlbCwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgZWwuZm9jdXMoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLm9uUHJvcGVydHlWYWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiAobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUub25Qcm9wZXJ0eVZhbHVlQ2hhbmdlZC5jYWxsKHRoaXMsIG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIGlmIChuYW1lID09PSBcInN0YXRlXCIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudENzcyhmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeVN0YXRlQ2hhbmdlZChvbGRWYWx1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZUNoYW5nZWRDYWxsYmFjaylcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlZENhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldFNrZWxldG9uQ29tcG9uZW50TmFtZUNvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1cnZleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VydmV5LmdldFNrZWxldG9uQ29tcG9uZW50TmFtZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJwYXJlbnRRdWVzdGlvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIER5bmFtaWMgUGFuZWwsIER5bmFtaWMgTWF0cml4LCBvciBEcm9wZG93biBNYXRyaXggdGhhdCBpbmNsdWRlcyB0aGUgY3VycmVudCBxdWVzdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBwcm9wZXJ0eSBpcyBgbnVsbGAgZm9yIHN0YW5kYWxvbmUgcXVlc3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRRdWVzdGlvblZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuc2V0UGFyZW50UXVlc3Rpb24gPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHRoaXMucGFyZW50UXVlc3Rpb25WYWx1ZSA9IHZhbDtcbiAgICAgICAgdGhpcy5vblBhcmVudFF1ZXN0aW9uQ2hhbmdlZCgpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUub25QYXJlbnRRdWVzdGlvbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInNrZWxldG9uQ29tcG9uZW50TmFtZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2tlbGV0b25Db21wb25lbnROYW1lQ29yZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInN0YXRlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgYW5kIHNldHMgdGhlIHN1cnZleSBlbGVtZW50J3MgZXhwYW5kIHN0YXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICAgICAqXG4gICAgICAgICAqIC0gYFwiZGVmYXVsdFwiYCAoZGVmYXVsdCkgLSBUaGUgc3VydmV5IGVsZW1lbnQgaXMgZGlzcGxheWVkIGluIGZ1bGwgYW5kIGNhbm5vdCBiZSBjb2xsYXBzZWQgaW4gdGhlIFVJLlxuICAgICAgICAgKiAtIGBcImV4cGFuZGVkXCJgIC0gVGhlIHN1cnZleSBlbGVtZW50IGlzIGRpc3BsYXllZCBpbiBmdWxsIGFuZCBjYW4gYmUgY29sbGFwc2VkIGluIHRoZSBVSS5cbiAgICAgICAgICogLSBgXCJjb2xsYXBzZWRcImAgLSBUaGUgc3VydmV5IGVsZW1lbnQgZGlzcGxheXMgb25seSBgdGl0bGVgIGFuZCBgZGVzY3JpcHRpb25gIGFuZCBjYW4gYmUgZXhwYW5kZWQgaW4gdGhlIFVJLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIHRvZ2dsZVN0YXRlXG4gICAgICAgICAqIEBzZWUgY29sbGFwc2VcbiAgICAgICAgICogQHNlZSBleHBhbmRcbiAgICAgICAgICogQHNlZSBpc0NvbGxhcHNlZFxuICAgICAgICAgKiBAc2VlIGlzRXhwYW5kZWRcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZShcInN0YXRlXCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShcInN0YXRlXCIsIHZhbCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkSXNFeHBhbmRlZCA9ICEodGhpcy5zdGF0ZSA9PT0gXCJjb2xsYXBzZWRcIiAmJiAhdGhpcy5pc0Rlc2lnbk1vZGUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUubm90aWZ5U3RhdGVDaGFuZ2VkID0gZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5zdXJ2ZXkpIHtcbiAgICAgICAgICAgIHRoaXMuc3VydmV5LmVsZW1lbnRDb250ZW50VmlzaWJpbGl0eUNoYW5nZWQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJpc0NvbGxhcHNlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3VydmV5IGVsZW1lbnQgaXMgY29sbGFwc2VkLlxuICAgICAgICAgKiBAc2VlIHN0YXRlXG4gICAgICAgICAqIEBzZWUgdG9nZ2xlU3RhdGVcbiAgICAgICAgICogQHNlZSBjb2xsYXBzZVxuICAgICAgICAgKiBAc2VlIGV4cGFuZFxuICAgICAgICAgKiBAc2VlIGlzRXhwYW5kZWRcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IFwiY29sbGFwc2VkXCIgJiYgIXRoaXMuaXNEZXNpZ25Nb2RlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImlzRXhwYW5kZWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHN1cnZleSBlbGVtZW50IGlzIGV4cGFuZGVkLlxuICAgICAgICAgKiBAc2VlIHN0YXRlXG4gICAgICAgICAqIEBzZWUgdG9nZ2xlU3RhdGVcbiAgICAgICAgICogQHNlZSBjb2xsYXBzZVxuICAgICAgICAgKiBAc2VlIGV4cGFuZFxuICAgICAgICAgKiBAc2VlIGlzQ29sbGFwc2VkXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBcImV4cGFuZGVkXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBDb2xsYXBzZXMgdGhlIHN1cnZleSBlbGVtZW50LlxuICAgICAqXG4gICAgICogSW4gY29sbGFwc2VkIHN0YXRlLCB0aGUgZWxlbWVudCBkaXNwbGF5cyBvbmx5IGB0aXRsZWAgYW5kIGBkZXNjcmlwdGlvbmAuXG4gICAgICogQHNlZSB0aXRsZVxuICAgICAqIEBzZWUgZGVzY3JpcHRpb25cbiAgICAgKiBAc2VlIHN0YXRlXG4gICAgICogQHNlZSB0b2dnbGVTdGF0ZVxuICAgICAqIEBzZWUgZXhwYW5kXG4gICAgICogQHNlZSBpc0NvbGxhcHNlZFxuICAgICAqIEBzZWUgaXNFeHBhbmRlZFxuICAgICAqL1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmNvbGxhcHNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc2lnbk1vZGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc3RhdGUgPSBcImNvbGxhcHNlZFwiO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRXhwYW5kcyB0aGUgc3VydmV5IGVsZW1lbnQuXG4gICAgICogQHNlZSBzdGF0ZVxuICAgICAqIEBzZWUgdG9nZ2xlU3RhdGVcbiAgICAgKiBAc2VlIGNvbGxhcHNlXG4gICAgICogQHNlZSBpc0NvbGxhcHNlZFxuICAgICAqIEBzZWUgaXNFeHBhbmRlZFxuICAgICAqL1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmV4cGFuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiZXhwYW5kZWRcIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHN1cnZleSBlbGVtZW50J3MgYHN0YXRlYCBiZXR3ZWVuIGNvbGxhcHNlZCBhbmQgZXhwYW5kZWQuXG4gICAgICogQHNlZSBzdGF0ZVxuICAgICAqIEBzZWUgY29sbGFwc2VcbiAgICAgKiBAc2VlIGV4cGFuZFxuICAgICAqIEBzZWUgaXNDb2xsYXBzZWRcbiAgICAgKiBAc2VlIGlzRXhwYW5kZWRcbiAgICAgKi9cbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS50b2dnbGVTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiaGFzU3RhdGVCdXR0b25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzRXhwYW5kZWQgfHwgdGhpcy5pc0NvbGxhcHNlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJzaG9ydGN1dFRleHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpdGxlIHx8IHRoaXMubmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldFRpdGxlVG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpdGxlVG9vbGJhclZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlVG9vbGJhclZhbHVlID0gdGhpcy5jcmVhdGVBY3Rpb25Db250YWluZXIodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnRpdGxlVG9vbGJhclZhbHVlLmNvbnRhaW5lckNzcyA9ICh0aGlzLmlzUGFuZWwgPyB0aGlzLmNzc0NsYXNzZXMucGFuZWwudGl0bGVCYXIgOiB0aGlzLmNzc0NsYXNzZXMudGl0bGVCYXIpIHx8IFwic3YtYWN0aW9uLXRpdGxlLWJhclwiO1xuICAgICAgICAgICAgdGhpcy50aXRsZVRvb2xiYXJWYWx1ZS5zZXRJdGVtcyh0aGlzLmdldFRpdGxlQWN0aW9ucygpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50aXRsZVRvb2xiYXJWYWx1ZTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUFjdGlvbkNvbnRhaW5lciA9IGZ1bmN0aW9uIChhbGxvd0FkYXB0aXZlQWN0aW9ucykge1xuICAgICAgICB2YXIgYWN0aW9uQ29udGFpbmVyID0gYWxsb3dBZGFwdGl2ZUFjdGlvbnMgPyBuZXcgX2FjdGlvbnNfYWRhcHRpdmVfY29udGFpbmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJBZGFwdGl2ZUFjdGlvbkNvbnRhaW5lclwiXSgpIDogbmV3IF9hY3Rpb25zX2NvbnRhaW5lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiQWN0aW9uQ29udGFpbmVyXCJdKCk7XG4gICAgICAgIGlmICh0aGlzLnN1cnZleSAmJiAhIXRoaXMuc3VydmV5LmdldENzcygpLmFjdGlvbkJhcikge1xuICAgICAgICAgICAgYWN0aW9uQ29udGFpbmVyLmNzc0NsYXNzZXMgPSB0aGlzLnN1cnZleS5nZXRDc3MoKS5hY3Rpb25CYXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGlvbkNvbnRhaW5lcjtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJ0aXRsZUFjdGlvbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWUoXCJ0aXRsZUFjdGlvbnNcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRUaXRsZUFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1RpdGxlQWN0aW9uUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRpdGxlQWN0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5pc1RpdGxlQWN0aW9uUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50aXRsZUFjdGlvbnM7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXREZWZhdWx0VGl0bGVBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS51cGRhdGVUaXRsZUFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5nZXREZWZhdWx0VGl0bGVBY3Rpb25zKCk7XG4gICAgICAgIGlmICghIXRoaXMuc3VydmV5KSB7XG4gICAgICAgICAgICBhY3Rpb25zID0gdGhpcy5zdXJ2ZXkuZ2V0VXBkYXRlZEVsZW1lbnRUaXRsZUFjdGlvbnModGhpcywgYWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwidGl0bGVBY3Rpb25zXCIsIGFjdGlvbnMpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImhhc1RpdGxlQWN0aW9uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGVBY3Rpb25zKCkubGVuZ3RoID4gMDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJoYXNUaXRsZUV2ZW50c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnN0YXRlICE9PSBcImRlZmF1bHRcIjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJ0aXRsZVRhYkluZGV4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNQYWdlICYmIHRoaXMuc3RhdGUgIT09IFwiZGVmYXVsdFwiID8gMCA6IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJ0aXRsZUFyaWFFeHBhbmRlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYWdlIHx8IHRoaXMuc3RhdGUgPT09IFwiZGVmYXVsdFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gXCJleHBhbmRlZFwiID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwidGl0bGVBcmlhUm9sZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYWdlIHx8IHRoaXMuc3RhdGUgPT09IFwiZGVmYXVsdFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gXCJidXR0b25cIjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLnNldFN1cnZleUltcGwgPSBmdW5jdGlvbiAodmFsdWUsIGlzTGlnaHQpIHtcbiAgICAgICAgdGhpcy5zdXJ2ZXlJbXBsVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKCF0aGlzLnN1cnZleUltcGxWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdXJ2ZXlDb3JlKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXlEYXRhVmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXlEYXRhVmFsdWUgPSB0aGlzLnN1cnZleUltcGxWYWx1ZS5nZXRTdXJ2ZXlEYXRhKCk7XG4gICAgICAgICAgICB0aGlzLnNldFN1cnZleUNvcmUodGhpcy5zdXJ2ZXlJbXBsVmFsdWUuZ2V0U3VydmV5KCkpO1xuICAgICAgICAgICAgdGhpcy50ZXh0UHJvY2Vzc29yVmFsdWUgPSB0aGlzLnN1cnZleUltcGxWYWx1ZS5nZXRUZXh0UHJvY2Vzc29yKCk7XG4gICAgICAgICAgICB0aGlzLm9uU2V0RGF0YSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMuc3VydmV5KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURlc2NyaXB0aW9uVmlzaWJpbGl0eSh0aGlzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDc3NDbGFzc2VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmNhblJ1bkNvbmRpdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNhblJ1bkNvbmRpdGlvbnMuY2FsbCh0aGlzKSAmJiAhIXRoaXMuZGF0YTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldERhdGFGaWx0ZXJlZFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5kYXRhID8gdGhpcy5kYXRhLmdldEZpbHRlcmVkVmFsdWVzKCkgOiB7fTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldERhdGFGaWx0ZXJlZFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcm9wcyA9ICEhdGhpcy5kYXRhID8gdGhpcy5kYXRhLmdldEZpbHRlcmVkUHJvcGVydGllcygpIDoge307XG4gICAgICAgIHByb3BzLnF1ZXN0aW9uID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInN1cnZleUltcGxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cnZleUltcGxWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qIFlvdSBzaG91bGRuJ3QgdXNlIHRoaXMgbWV0aG9kIGV2ZXIgKi9cbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5fX3NldERhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJzZXR0aW5nc1wiXS5zdXBwb3J0Q3JlYXRvclYyKSB7XG4gICAgICAgICAgICB0aGlzLnN1cnZleURhdGFWYWx1ZSA9IGRhdGE7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJkYXRhXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXlEYXRhVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwic3VydmV5XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIHN1cnZleSBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN1cnZleSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZ2V0U3VydmV5ID0gZnVuY3Rpb24gKGxpdmUpIHtcbiAgICAgICAgaWYgKGxpdmUgPT09IHZvaWQgMCkgeyBsaXZlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKCEhdGhpcy5zdXJ2ZXlWYWx1ZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cnZleVZhbHVlO1xuICAgICAgICBpZiAoISF0aGlzLnN1cnZleUltcGxWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdXJ2ZXlDb3JlKHRoaXMuc3VydmV5SW1wbFZhbHVlLmdldFN1cnZleSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXlWYWx1ZTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLnNldFN1cnZleUNvcmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdXJ2ZXlWYWx1ZSA9IHZhbHVlO1xuICAgICAgICBpZiAoISF0aGlzLnN1cnZleUNoYW5nZWRDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5zdXJ2ZXlDaGFuZ2VkQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImlzSW50ZXJuYWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ29udGVudEVsZW1lbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiYXJlSW52aXNpYmxlRWxlbWVudHNTaG93aW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKCEhdGhpcy5zdXJ2ZXkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnN1cnZleS5hcmVJbnZpc2libGVFbGVtZW50c1Nob3dpbmcgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0NvbnRlbnRFbGVtZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJpc1Zpc2libGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImlzUmVhZE9ubHlcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHN1cnZleSBlbGVtZW50IG9yIGl0cyBwYXJlbnQgZWxlbWVudCBpcyByZWFkLW9ubHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHN3aXRjaCBhIHN1cnZleSBlbGVtZW50IHRvIHRoZSByZWFkLW9ubHkgc3RhdGUgYmFzZWQgb24gYSBjb25kaXRpb24sIHNwZWNpZnkgdGhlIFtgZW5hYmxlSWZgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL3F1ZXN0aW9uI2VuYWJsZUlmKSBwcm9wZXJ0eS4gUmVmZXIgdG8gdGhlIGZvbGxvd2luZyBoZWxwIHRvcGljIGZvciBpbmZvcm1hdGlvbjogW0NvbmRpdGlvbmFsIFZpc2liaWxpdHldKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vZGVzaWduLXN1cnZleS1jb25kaXRpb25hbC1sb2dpYyNjb25kaXRpb25hbC12aXNpYmlsaXR5KS5cbiAgICAgICAgICogQHNlZSByZWFkT25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFkT25seTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJyZWFkT25seVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYWtlcyB0aGUgc3VydmV5IGVsZW1lbnQgcmVhZC1vbmx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBJZiB5b3Ugd2FudCB0byBzd2l0Y2ggYSBzdXJ2ZXkgZWxlbWVudCB0byB0aGUgcmVhZC1vbmx5IHN0YXRlIGJhc2VkIG9uIGEgY29uZGl0aW9uLCBzcGVjaWZ5IHRoZSBbYGVuYWJsZUlmYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9xdWVzdGlvbiNlbmFibGVJZikgcHJvcGVydHkuIFJlZmVyIHRvIHRoZSBmb2xsb3dpbmcgaGVscCB0b3BpYyBmb3IgaW5mb3JtYXRpb246IFtDb25kaXRpb25hbCBWaXNpYmlsaXR5XShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL2Rlc2lnbi1zdXJ2ZXktY29uZGl0aW9uYWwtbG9naWMjY29uZGl0aW9uYWwtdmlzaWJpbGl0eSkuXG4gICAgICAgICAqIEBzZWUgaXNSZWFkT25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKFwicmVhZE9ubHlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE9ubHkgPT0gdmFsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShcInJlYWRPbmx5XCIsIHZhbCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNMb2FkaW5nRnJvbUpzb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWUoXCJpc1JlYWRPbmx5XCIsIHRoaXMuaXNSZWFkT25seSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5vblJlYWRPbmx5Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5yZWFkT25seUNoYW5nZWRDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5yZWFkT25seUNoYW5nZWRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiY3NzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLnN1cnZleSA/IHRoaXMuc3VydmV5LmdldENzcygpIDoge307XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiY3NzQ2xhc3Nlc1ZhbHVlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlV2l0aG91dERlZmF1bHQoXCJjc3NDbGFzc2VzVmFsdWVcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwiY3NzQ2xhc3Nlc1ZhbHVlXCIsIHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5lbnN1cmVDc3NDbGFzc2VzVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5jc3NDbGFzc2VzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlID0gdGhpcy5jYWxjQ3NzQ2xhc3Nlcyh0aGlzLmNzcyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRDc3NDb3JlKHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImNzc0NsYXNzZXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbiBvYmplY3QgaW4gd2hpY2gga2V5cyBhcmUgVUkgZWxlbWVudHMgYW5kIHZhbHVlcyBhcmUgQ1NTIGNsYXNzZXMgYXBwbGllZCB0byB0aGVtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBVc2UgdGhlIGZvbGxvd2luZyBldmVudHMgb2YgdGhlIFtgU3VydmV5TW9kZWxgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL3N1cnZleW1vZGVsKSBvYmplY3QgdG8gb3ZlcnJpZGUgQ1NTIGNsYXNzZXM6XG4gICAgICAgICAqXG4gICAgICAgICAqIC0gW2BvblVwZGF0ZVF1ZXN0aW9uQ3NzQ2xhc3Nlc2BdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vc3VydmV5bW9kZWwjb25VcGRhdGVRdWVzdGlvbkNzc0NsYXNzZXMpXG4gICAgICAgICAqIC0gW2BvblVwZGF0ZVBhbmVsQ3NzQ2xhc3Nlc2BdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vc3VydmV5bW9kZWwjb25VcGRhdGVQYW5lbENzc0NsYXNzZXMpXG4gICAgICAgICAqIC0gW2BvblVwZGF0ZVBhZ2VDc3NDbGFzc2VzYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9zdXJ2ZXltb2RlbCNvblVwZGF0ZVBhZ2VDc3NDbGFzc2VzKVxuICAgICAgICAgKiAtIFtgb25VcGRhdGVDaG9pY2VJdGVtQ3NzYF0oaHR0cHM6Ly9zdXJ2ZXlqcy5pby9mb3JtLWxpYnJhcnkvZG9jdW1lbnRhdGlvbi9hcGktcmVmZXJlbmNlL3N1cnZleS1kYXRhLW1vZGVsI29uVXBkYXRlQ2hvaWNlSXRlbUNzcylcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9kdW1teSA9IHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN1cnZleSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxjQ3NzQ2xhc3Nlcyh0aGlzLmNzcyk7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZUNzc0NsYXNzZXNWYWx1ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImNzc1RpdGxlTnVtYmVyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3NzID0gdGhpcy5jc3NDbGFzc2VzO1xuICAgICAgICAgICAgaWYgKGNzcy5udW1iZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNzcy5udW1iZXI7XG4gICAgICAgICAgICByZXR1cm4gY3NzLnBhbmVsID8gY3NzLnBhbmVsLm51bWJlciA6IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmNhbGNDc3NDbGFzc2VzID0gZnVuY3Rpb24gKGNzcykgeyByZXR1cm4gdW5kZWZpbmVkOyB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLnVwZGF0ZUVsZW1lbnRDc3NDb3JlID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMpIHsgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiY3NzRXJyb3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiXCI7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS51cGRhdGVFbGVtZW50Q3NzID0gZnVuY3Rpb24gKHJlTmV3KSB7XG4gICAgICAgIHRoaXMuY2xlYXJDc3NDbGFzc2VzKCk7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5jbGVhckNzc0NsYXNzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY3NzQ2xhc3Nlc1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZ2V0SXNMb2FkaW5nRnJvbUpzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfc3VwZXIucHJvdG90eXBlLmdldElzTG9hZGluZ0Zyb21Kc29uLmNhbGwodGhpcykpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VydmV5VmFsdWUgPyB0aGlzLnN1cnZleVZhbHVlLmlzTG9hZGluZ0Zyb21Kc29uIDogZmFsc2U7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwibmFtZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHN1cnZleSBlbGVtZW50IGlkZW50aWZpZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqID4gUXVlc3Rpb24gbmFtZXMgbXVzdCBiZSB1bmlxdWUuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWUoXCJuYW1lXCIsIFwiXCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMubmFtZTtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShcIm5hbWVcIiwgdGhpcy5nZXRWYWxpZE5hbWUodmFsKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNMb2FkaW5nRnJvbUpzb24gJiYgISFvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25OYW1lQ2hhbmdlZChvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRWYWxpZE5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLm9uTmFtZUNoYW5nZWQgPSBmdW5jdGlvbiAob2xkVmFsdWUpIHsgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS51cGRhdGVCaW5kaW5nVmFsdWUgPSBmdW5jdGlvbiAodmFsdWVOYW1lLCB2YWx1ZSkge1xuICAgICAgICBpZiAoISF0aGlzLmRhdGEgJiZcbiAgICAgICAgICAgICF0aGlzLmlzVHdvVmFsdWVFcXVhbHModmFsdWUsIHRoaXMuZGF0YS5nZXRWYWx1ZSh2YWx1ZU5hbWUpKSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnNldFZhbHVlKHZhbHVlTmFtZSwgdmFsdWUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImVycm9yc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWYWxpZGF0aW9uIGVycm9ycy4gQ2FsbCB0aGUgYHZhbGlkYXRlKClgIG1ldGhvZCB0byB2YWxpZGF0ZSBzdXJ2ZXkgZWxlbWVudCBkYXRhLlxuICAgICAgICAgKiBAc2VlIHZhbGlkYXRlXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWUoXCJlcnJvcnNcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwiZXJyb3JzXCIsIHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS51cGRhdGVWaXNpYmxlRXJyb3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVycm9yc1tpXS52aXNpYmxlKVxuICAgICAgICAgICAgICAgIGNvdW50ZXIrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhc1Zpc2libGVFcnJvcnMgPSBjb3VudGVyID4gMDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJjb250YWluc0Vycm9yc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3VydmV5IGVsZW1lbnQgb3IgaXRzIGNoaWxkIGVsZW1lbnRzIGhhdmUgdmFsaWRhdGlvbiBlcnJvcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgcHJvcGVydHkgY29udGFpbnMgdGhlIHJlc3VsdCBvZiB0aGUgbW9zdCByZWNlbnQgdmFsaWRhdGlvbi4gVGhpcyByZXN1bHQgbWF5IGJlIG91dGRhdGVkLiBDYWxsIHRoZSBgdmFsaWRhdGVgIG1ldGhvZCB0byBnZXQgYW4gdXAtdG8tZGF0ZSB2YWx1ZS5cbiAgICAgICAgICogQHNlZSBlcnJvcnNcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZShcImNvbnRhaW5zRXJyb3JzXCIsIGZhbHNlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLnVwZGF0ZUNvbnRhaW5zRXJyb3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWUoXCJjb250YWluc0Vycm9yc1wiLCB0aGlzLmdldENvbnRhaW5zRXJyb3JzKCkpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZ2V0Q29udGFpbnNFcnJvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9ycy5sZW5ndGggPiAwO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkRWxlbWVudEluRGVzaWduXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEVsZW1lbnRJbkRlc2lnblZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFbGVtZW50SW5EZXNpZ25WYWx1ZSA9IHZhbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLnVwZGF0ZUN1c3RvbVdpZGdldHMgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUub25TdXJ2ZXlMb2FkID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJ3YXNSZW5kZXJlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gISF0aGlzLndhc1JlbmRlcmVkVmFsdWU7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5vbkZpcnN0UmVuZGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLndhc1JlbmRlcmVkVmFsdWUgPSB0cnVlO1xuICAgICAgICB0aGlzLmVuc3VyZUNzc0NsYXNzZXNWYWx1ZSgpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZW5kTG9hZGluZ0Zyb21Kc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmVuZExvYWRpbmdGcm9tSnNvbi5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuc3VydmV5KSB7XG4gICAgICAgICAgICB0aGlzLm9uU3VydmV5TG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlRGVzY3JpcHRpb25WaXNpYmlsaXR5KHRoaXMuZGVzY3JpcHRpb24pO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuc2V0VmlzaWJsZUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImlzUGFnZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3VydmV5IGVsZW1lbnQgaXMgYSBwYWdlLlxuICAgICAgICAgKiBAc2VlIEJhc2UuZ2V0VHlwZVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiaXNQYW5lbFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3VydmV5IGVsZW1lbnQgaXMgYSBwYW5lbC5cbiAgICAgICAgICogQHNlZSBCYXNlLmdldFR5cGVcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImlzUXVlc3Rpb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHN1cnZleSBlbGVtZW50IGlzIGEgcXVlc3Rpb24uXG4gICAgICAgICAqIEBzZWUgQmFzZS5nZXRUeXBlXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChkb0Rpc3Bvc2UpIHsgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdXJ2ZXkncyBbbG9jYWxlXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL3N1cnZleW1vZGVsI2xvY2FsZSkuXG4gICAgICpcbiAgICAgKiBJZiBhIGRlZmF1bHQgbG9jYWxlIGlzIHVzZWQsIHRoaXMgbWV0aG9kIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLiBUbyBnZXQgdGhlIGFwcGxpZWQgbG9jYWxlIGluIHRoaXMgY2FzZSwgdXNlIHRoZSBmb2xsb3dpbmcgY29kZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHsgc3VydmV5TG9jYWxpemF0aW9uIH0gZnJvbSAnc3VydmV5LWNvcmUnO1xuICAgICAqIGNvbnN0IGRlZmF1bHRMb2NhbGUgPSBzdXJ2ZXlMb2NhbGl6YXRpb24uZGVmYXVsdExvY2FsZTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzZWUgW0xvY2FsaXphdGlvbiAmIEdsb2JhbGl6YXRpb25dKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vbG9jYWxpemF0aW9uKVxuICAgICAqL1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldExvY2FsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VydmV5XG4gICAgICAgICAgICA/IHRoaXMuc3VydmV5LmdldExvY2FsZSgpXG4gICAgICAgICAgICA6IHRoaXMubG9jT3duZXJcbiAgICAgICAgICAgICAgICA/IHRoaXMubG9jT3duZXIuZ2V0TG9jYWxlKClcbiAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRNYXJrZG93bkh0bWwgPSBmdW5jdGlvbiAodGV4dCwgbmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXlcbiAgICAgICAgICAgID8gdGhpcy5zdXJ2ZXkuZ2V0U3VydmV5TWFya2Rvd25IdG1sKHRoaXMsIHRleHQsIG5hbWUpXG4gICAgICAgICAgICA6IHRoaXMubG9jT3duZXJcbiAgICAgICAgICAgICAgICA/IHRoaXMubG9jT3duZXIuZ2V0TWFya2Rvd25IdG1sKHRleHQsIG5hbWUpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1cnZleSAmJiB0eXBlb2YgdGhpcy5zdXJ2ZXkuZ2V0UmVuZGVyZXJGb3JTdHJpbmcgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyB0aGlzLnN1cnZleS5nZXRSZW5kZXJlckZvclN0cmluZyh0aGlzLCBuYW1lKVxuICAgICAgICAgICAgOiB0aGlzLmxvY093bmVyICYmIHR5cGVvZiB0aGlzLmxvY093bmVyLmdldFJlbmRlcmVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgICA/IHRoaXMubG9jT3duZXIuZ2V0UmVuZGVyZXIobmFtZSlcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRSZW5kZXJlckNvbnRleHQgPSBmdW5jdGlvbiAobG9jU3RyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1cnZleSAmJiB0eXBlb2YgdGhpcy5zdXJ2ZXkuZ2V0UmVuZGVyZXJDb250ZXh0Rm9yU3RyaW5nID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gdGhpcy5zdXJ2ZXkuZ2V0UmVuZGVyZXJDb250ZXh0Rm9yU3RyaW5nKHRoaXMsIGxvY1N0cilcbiAgICAgICAgICAgIDogdGhpcy5sb2NPd25lciAmJiB0eXBlb2YgdGhpcy5sb2NPd25lci5nZXRSZW5kZXJlckNvbnRleHQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgICAgID8gdGhpcy5sb2NPd25lci5nZXRSZW5kZXJlckNvbnRleHQobG9jU3RyKVxuICAgICAgICAgICAgICAgIDogbG9jU3RyO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZ2V0UHJvY2Vzc2VkVGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzTG9hZGluZ0Zyb21Kc29uKVxuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIGlmICh0aGlzLnRleHRQcm9jZXNzb3IpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0UHJvY2Vzc29yLnByb2Nlc3NUZXh0KHRleHQsIHRoaXMuZ2V0VXNlRGlzcGxheVZhbHVlc0luRHluYW1pY1RleHRzKCkpO1xuICAgICAgICBpZiAodGhpcy5sb2NPd25lcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY093bmVyLmdldFByb2Nlc3NlZFRleHQodGV4dCk7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZ2V0VXNlRGlzcGxheVZhbHVlc0luRHluYW1pY1RleHRzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVTZWxmRnJvbUxpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICBpZiAoIWxpc3QgfHwgIUFycmF5LmlzQXJyYXkobGlzdCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBpbmRleCA9IGxpc3QuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInRleHRQcm9jZXNzb3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHRQcm9jZXNzb3JWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldFByb2Nlc3NlZEh0bWwgPSBmdW5jdGlvbiAoaHRtbCkge1xuICAgICAgICBpZiAoIWh0bWwgfHwgIXRoaXMudGV4dFByb2Nlc3NvcilcbiAgICAgICAgICAgIHJldHVybiBodG1sO1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UHJvY2Vzc29yLnByb2Nlc3NUZXh0KGh0bWwsIHRydWUpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUub25TZXREYXRhID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJwYXJlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWUoXCJwYXJlbnRcIiwgbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwicGFyZW50XCIsIHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRQYWdlID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5wYXJlbnQpXG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudC5nZXRUeXBlKCkgPT0gXCJwYWdlXCIpXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLm1vdmVUb0Jhc2UgPSBmdW5jdGlvbiAocGFyZW50LCBjb250YWluZXIsIGluc2VydEJlZm9yZSkge1xuICAgICAgICBpZiAoaW5zZXJ0QmVmb3JlID09PSB2b2lkIDApIHsgaW5zZXJ0QmVmb3JlID0gbnVsbDsgfVxuICAgICAgICBpZiAoIWNvbnRhaW5lcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcGFyZW50LnJlbW92ZUVsZW1lbnQodGhpcyk7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICBpZiAoX2hlbHBlcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIkhlbHBlcnNcIl0uaXNOdW1iZXIoaW5zZXJ0QmVmb3JlKSkge1xuICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChpbnNlcnRCZWZvcmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCA9PSAtMSAmJiAhIWluc2VydEJlZm9yZSAmJiAhIWluc2VydEJlZm9yZS5nZXRUeXBlKSB7XG4gICAgICAgICAgICBpbmRleCA9IGNvbnRhaW5lci5pbmRleE9mKGluc2VydEJlZm9yZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGFpbmVyLmFkZEVsZW1lbnQodGhpcywgaW5kZXgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLnNldFBhZ2UgPSBmdW5jdGlvbiAocGFyZW50LCBuZXdQYWdlKSB7XG4gICAgICAgIHZhciBvbGRQYWdlID0gdGhpcy5nZXRQYWdlKHBhcmVudCk7XG4gICAgICAgIC8vZml4IGZvciB0aGUgY3JlYXRvciB2MTogaHR0cHM6Ly9naXRodWIuY29tL3N1cnZleWpzL3N1cnZleS1jcmVhdG9yL2lzc3Vlcy8xNzQ0XG4gICAgICAgIGlmICh0eXBlb2YgbmV3UGFnZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdmFyIHN1cnZleSA9IHRoaXMuZ2V0U3VydmV5KCk7XG4gICAgICAgICAgICBzdXJ2ZXkucGFnZXMuZm9yRWFjaChmdW5jdGlvbiAocGFnZSkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdQYWdlID09PSBwYWdlLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIG5ld1BhZ2UgPSBwYWdlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZFBhZ2UgPT09IG5ld1BhZ2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChwYXJlbnQpXG4gICAgICAgICAgICBwYXJlbnQucmVtb3ZlRWxlbWVudCh0aGlzKTtcbiAgICAgICAgaWYgKG5ld1BhZ2UpIHtcbiAgICAgICAgICAgIG5ld1BhZ2UuYWRkRWxlbWVudCh0aGlzLCAtMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldFNlYXJjaGFibGVMb2NLZXlzID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAga2V5cy5wdXNoKFwidGl0bGVcIik7XG4gICAgICAgIGtleXMucHVzaChcImRlc2NyaXB0aW9uXCIpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImlzRGVmYXVsdFYyVGhlbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cnZleSAmJiB0aGlzLnN1cnZleS5nZXRDc3MoKS5yb290ID09IFwic2Qtcm9vdC1tb2Rlcm5cIjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJoYXNQYXJlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5wYXJlbnQgJiYgIXRoaXMucGFyZW50LmlzUGFnZSAmJiAoIXRoaXMucGFyZW50Lm9yaWdpbmFsUGFnZSkpIHx8ICh0aGlzLnBhcmVudCA9PT0gdW5kZWZpbmVkKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLnNob3VsZEFkZFJ1bm5lclN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRGVzaWduTW9kZSAmJiB0aGlzLmlzRGVmYXVsdFYyVGhlbWU7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiaXNDb21wYWN0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdXJ2ZXkgJiYgdGhpcy5zdXJ2ZXlbXCJpc0NvbXBhY3RcIl07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRIYXNGcmFtZVYyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG91bGRBZGRSdW5uZXJTdHlsZXMoKSAmJiAoIXRoaXMuaGFzUGFyZW50KTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldElzTmVzdGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG91bGRBZGRSdW5uZXJTdHlsZXMoKSAmJiAodGhpcy5oYXNQYXJlbnQpO1xuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZ2V0Q3NzUm9vdCA9IGZ1bmN0aW9uIChjc3NDbGFzc2VzKSB7XG4gICAgICAgIHZhciBpc0V4cGFuYWRhYmxlID0gISF0aGlzLmlzQ29sbGFwc2VkIHx8ICEhdGhpcy5pc0V4cGFuZGVkO1xuICAgICAgICByZXR1cm4gbmV3IF91dGlsc19jc3NDbGFzc0J1aWxkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcIkNzc0NsYXNzQnVpbGRlclwiXSgpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMud2l0aEZyYW1lLCB0aGlzLmdldEhhc0ZyYW1lVjIoKSAmJiAhdGhpcy5pc0NvbXBhY3QpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMuY29tcGFjdCwgdGhpcy5pc0NvbXBhY3QgJiYgdGhpcy5nZXRIYXNGcmFtZVYyKCkpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMuY29sbGFwc2VkLCAhIXRoaXMuaXNDb2xsYXBzZWQpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMuZXhwYW5kYWJsZUFuaW1hdGluZywgaXNFeHBhbmFkYWJsZSAmJiB0aGlzLmlzQW5pbWF0aW5nQ29sbGFwc2VFeHBhbmQpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMuZXhwYW5kZWQsICEhdGhpcy5pc0V4cGFuZGVkICYmIHRoaXMucmVuZGVyZWRJc0V4cGFuZGVkKVxuICAgICAgICAgICAgLmFwcGVuZChjc3NDbGFzc2VzLmV4cGFuZGFibGUsIGlzRXhwYW5hZGFibGUpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMubmVzdGVkLCB0aGlzLmdldElzTmVzdGVkKCkpXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHN1cnZleSBlbGVtZW50IHdpZHRoIGluIENTUyB2YWx1ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIERlZmF1bHQgdmFsdWU6IFwiXCJcbiAgICAgICAgICogQHNlZSBtaW5XaWR0aFxuICAgICAgICAgKiBAc2VlIG1heFdpZHRoXG4gICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIsIFwiXCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIsIHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwibWluV2lkdGhcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBvciBzZXRzIG1pbmltdW0gc3VydmV5IGVsZW1lbnQgd2lkdGggaW4gQ1NTIHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogRGVmYXVsdCB2YWx1ZTogXCIzMDBweFwiICh0YWtlbiBmcm9tIFtgc2V0dGluZ3MubWluV2lkdGhgXShodHRwczovL3N1cnZleWpzLmlvL2Zvcm0tbGlicmFyeS9kb2N1bWVudGF0aW9uL3NldHRpbmdzI21pbldpZHRoKSlcbiAgICAgICAgICogQHNlZSBtYXhXaWR0aFxuICAgICAgICAgKiBAc2VlIHJlbmRlcldpZHRoXG4gICAgICAgICAqIEBzZWUgd2lkdGhcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZShcIm1pbldpZHRoXCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShcIm1pbldpZHRoXCIsIHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwibWF4V2lkdGhcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBvciBzZXRzIG1heGltdW0gc3VydmV5IGVsZW1lbnQgd2lkdGggaW4gQ1NTIHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogRGVmYXVsdCB2YWx1ZTogXCIxMDAlXCIgKHRha2VuIGZyb20gW2BzZXR0aW5ncy5tYXhXaWR0aGBdKGh0dHBzOi8vc3VydmV5anMuaW8vZm9ybS1saWJyYXJ5L2RvY3VtZW50YXRpb24vc2V0dGluZ3MjbWF4V2lkdGgpKVxuICAgICAgICAgKiBAc2VlIG1pbldpZHRoXG4gICAgICAgICAqIEBzZWUgcmVuZGVyV2lkdGhcbiAgICAgICAgICogQHNlZSB3aWR0aFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKFwibWF4V2lkdGhcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwibWF4V2lkdGhcIiwgdmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJyZW5kZXJXaWR0aFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgY2FsY3VsYXRlZCB3aWR0aCBvZiB0aGUgcmVuZGVyZWQgc3VydmV5IGVsZW1lbnQgaW4gQ1NTIHZhbHVlcy5cbiAgICAgICAgICogQHNlZSB3aWR0aFxuICAgICAgICAgKiBAc2VlIG1pbldpZHRoXG4gICAgICAgICAqIEBzZWUgbWF4V2lkdGhcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZShcInJlbmRlcldpZHRoXCIsIFwiXCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShcInJlbmRlcldpZHRoXCIsIHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiaW5kZW50XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluY3JlYXNlcyBvciBkZWNyZWFzZXMgYW4gaW5kZW50IG9mIHN1cnZleSBlbGVtZW50IGNvbnRlbnQgZnJvbSB0aGUgbGVmdCBlZGdlLiBBY2NlcHRzIHBvc2l0aXZlIGludGVnZXIgdmFsdWVzIGFuZCAwLiBEb2VzIG5vdCBhcHBseSBpbiB0aGUgRGVmYXVsdCBWMiB0aGVtZS5cbiAgICAgICAgICogQHNlZSByaWdodEluZGVudFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKFwiaW5kZW50XCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShcImluZGVudFwiLCB2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInJpZ2h0SW5kZW50XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluY3JlYXNlcyBvciBkZWNyZWFzZXMgYW4gaW5kZW50IG9mIHN1cnZleSBlbGVtZW50IGNvbnRlbnQgZnJvbSB0aGUgcmlnaHQgZWRnZS4gQWNjZXB0cyBwb3NpdGl2ZSBpbnRlZ2VyIHZhbHVlcyBhbmQgMC4gRG9lcyBub3QgYXBwbHkgaW4gdGhlIERlZmF1bHQgVjIgdGhlbWUuXG4gICAgICAgICAqIEBzZWUgaW5kZW50XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWUoXCJyaWdodEluZGVudFwiLCAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWUoXCJyaWdodEluZGVudFwiLCB2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZ2V0Um9vdFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgaWYgKCEhdGhpcy5wYWRkaW5nTGVmdCkge1xuICAgICAgICAgICAgc3R5bGVbXCItLXN2LWVsZW1lbnQtYWRkLXBhZGRpbmctbGVmdFwiXSA9IHRoaXMucGFkZGluZ0xlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhdGhpcy5wYWRkaW5nUmlnaHQpIHtcbiAgICAgICAgICAgIHN0eWxlW1wiLS1zdi1lbGVtZW50LWFkZC1wYWRkaW5nLXJpZ2h0XCJdID0gdGhpcy5wYWRkaW5nUmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInBhZGRpbmdMZWZ0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZ0xlZnRcIiwgXCJcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZ0xlZnRcIiwgdmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJwYWRkaW5nUmlnaHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5VmFsdWUoXCJwYWRkaW5nUmlnaHRcIiwgXCJcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZ1JpZ2h0XCIsIHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwicm9vdFN0eWxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIHZhciBtaW5XaWR0aCA9IHRoaXMubWluV2lkdGg7XG4gICAgICAgICAgICBpZiAobWluV2lkdGggIT0gXCJhdXRvXCIpXG4gICAgICAgICAgICAgICAgbWluV2lkdGggPSBcIm1pbigxMDAlLCBcIiArIHRoaXMubWluV2lkdGggKyBcIilcIjtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93Um9vdFN0eWxlICYmIHRoaXMucmVuZGVyV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAvLyBzdHlsZVtcIndpZHRoXCJdID0gdGhpcy5yZW5kZXJXaWR0aDtcbiAgICAgICAgICAgICAgICBzdHlsZVtcImZsZXhHcm93XCJdID0gMTtcbiAgICAgICAgICAgICAgICBzdHlsZVtcImZsZXhTaHJpbmtcIl0gPSAxO1xuICAgICAgICAgICAgICAgIHN0eWxlW1wiZmxleEJhc2lzXCJdID0gdGhpcy5yZW5kZXJXaWR0aDtcbiAgICAgICAgICAgICAgICBzdHlsZVtcIm1pbldpZHRoXCJdID0gbWluV2lkdGg7XG4gICAgICAgICAgICAgICAgc3R5bGVbXCJtYXhXaWR0aFwiXSA9IHRoaXMubWF4V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5pc0NvbnRhaW5zU2VsZWN0aW9uID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHZhciBlbGVtZW50V2l0aFNlbGVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIF9kb2N1bWVudCA9IF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X19bXCJEb21Eb2N1bWVudEhlbHBlclwiXS5nZXREb2N1bWVudCgpO1xuICAgICAgICBpZiAoX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcIkRvbURvY3VtZW50SGVscGVyXCJdLmlzQXZhaWxhYmxlKCkgJiYgISFfZG9jdW1lbnQgJiYgX2RvY3VtZW50W1wic2VsZWN0aW9uXCJdKSB7XG4gICAgICAgICAgICBlbGVtZW50V2l0aFNlbGVjdGlvbiA9IF9kb2N1bWVudFtcInNlbGVjdGlvblwiXS5jcmVhdGVSYW5nZSgpLnBhcmVudEVsZW1lbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiRG9tV2luZG93SGVscGVyXCJdLmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKCEhc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydE9mZnNldCAhPT0gcmFuZ2UuZW5kT2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRXaXRoU2VsZWN0aW9uID0gcmFuZ2Uuc3RhcnRDb250YWluZXIucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW1lbnRXaXRoU2VsZWN0aW9uID09IGVsO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImNsaWNrVGl0bGVGdW5jdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLm5lZWRDbGlja1RpdGxlRnVuY3Rpb24oKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXZlbnQgJiYgX3RoaXMuaXNDb250YWluc1NlbGVjdGlvbihldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb2Nlc3NUaXRsZUNsaWNrKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5uZWVkQ2xpY2tUaXRsZUZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSAhPT0gXCJkZWZhdWx0XCI7XG4gICAgfTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5wcm9jZXNzVGl0bGVDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFwiZGVmYXVsdFwiKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVN0YXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJhZGRpdGlvbmFsVGl0bGVUb29sYmFyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBZGRpdGlvbmFsVGl0bGVUb29sYmFyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRBZGRpdGlvbmFsVGl0bGVUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldENzc1RpdGxlID0gZnVuY3Rpb24gKGNzc0NsYXNzZXMpIHtcbiAgICAgICAgdmFyIGlzRXhwYW5kYWJsZSA9IHRoaXMuc3RhdGUgIT09IFwiZGVmYXVsdFwiO1xuICAgICAgICB2YXIgbnVtSW5saW5lTGltaXQgPSA0O1xuICAgICAgICByZXR1cm4gbmV3IF91dGlsc19jc3NDbGFzc0J1aWxkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcIkNzc0NsYXNzQnVpbGRlclwiXSgpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMudGl0bGUpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMudGl0bGVOdW1JbmxpbmUsICh0aGlzLm5vIHx8IFwiXCIpLmxlbmd0aCA+IG51bUlubGluZUxpbWl0IHx8IGlzRXhwYW5kYWJsZSlcbiAgICAgICAgICAgIC5hcHBlbmQoY3NzQ2xhc3Nlcy50aXRsZUV4cGFuZGFibGUsIGlzRXhwYW5kYWJsZSlcbiAgICAgICAgICAgIC5hcHBlbmQoY3NzQ2xhc3Nlcy50aXRsZUV4cGFuZGVkLCB0aGlzLmlzRXhwYW5kZWQpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMudGl0bGVDb2xsYXBzZWQsIHRoaXMuaXNDb2xsYXBzZWQpXG4gICAgICAgICAgICAuYXBwZW5kKGNzc0NsYXNzZXMudGl0bGVEaXNhYmxlZCwgdGhpcy5pc1JlYWRPbmx5KVxuICAgICAgICAgICAgLmFwcGVuZChjc3NDbGFzc2VzLnRpdGxlT25FcnJvciwgdGhpcy5jb250YWluc0Vycm9ycykudG9TdHJpbmcoKTtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmxvY2FsZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUubG9jYWxlQ2hhbmdlZC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZURlc2NyaXB0aW9uVmlzaWJpbGl0eSh0aGlzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JzLmZvckVhY2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGVyci51cGRhdGVUZXh0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuc2V0V3JhcHBlckVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB0aGlzLndyYXBwZXJFbGVtZW50ID0gZWxlbWVudDtcbiAgICB9O1xuICAgIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLmdldFdyYXBwZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyRWxlbWVudDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJpc0FuaW1hdGluZ0NvbGxhcHNlRXhwYW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNBbmltYXRpbmdDb2xsYXBzZUV4cGFuZCB8fCB0aGlzLl9yZW5kZXJlZElzRXhwYW5kZWQgIT0gdGhpcy5pc0V4cGFuZGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIGlmICh2YWwgIT09IHRoaXMuX2lzQW5pbWF0aW5nQ29sbGFwc2VFeHBhbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pc0FuaW1hdGluZ0NvbGxhcHNlRXhwYW5kID0gdmFsO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudENzcyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZS5nZXRFeHBhbmRDb2xsYXBzZUFuaW1hdGlvbk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBiZWZvcmVSdW5BbmltYXRpb24gPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIF90aGlzLmlzQW5pbWF0aW5nQ29sbGFwc2VFeHBhbmQgPSB0cnVlO1xuICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoXCItLWFuaW1hdGlvbi1oZWlnaHRcIiwgZWwub2Zmc2V0SGVpZ2h0ICsgXCJweFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGFmdGVyUnVuQW5pbWF0aW9uID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBfdGhpcy5pc0FuaW1hdGluZ0NvbGxhcHNlRXhwYW5kID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRFbnRlck9wdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IF90aGlzLmlzUGFuZWwgPyBfdGhpcy5jc3NDbGFzc2VzLnBhbmVsIDogX3RoaXMuY3NzQ2xhc3NlcztcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogY3NzQ2xhc3Nlcy5jb250ZW50RmFkZUluLFxuICAgICAgICAgICAgICAgICAgICBvbkJlZm9yZVJ1bkFuaW1hdGlvbjogYmVmb3JlUnVuQW5pbWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyUnVuQW5pbWF0aW9uOiBhZnRlclJ1bkFuaW1hdGlvbixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldExlYXZlT3B0aW9uczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjc3NDbGFzc2VzID0gX3RoaXMuaXNQYW5lbCA/IF90aGlzLmNzc0NsYXNzZXMucGFuZWwgOiBfdGhpcy5jc3NDbGFzc2VzO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGNzc0NsYXNzOiBjc3NDbGFzc2VzLmNvbnRlbnRGYWRlT3V0LFxuICAgICAgICAgICAgICAgICAgICBvbkJlZm9yZVJ1bkFuaW1hdGlvbjogYmVmb3JlUnVuQW5pbWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyUnVuQW5pbWF0aW9uOiBhZnRlclJ1bkFuaW1hdGlvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0QW5pbWF0ZWRFbGVtZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHZhciBjc3NDbGFzc2VzID0gX3RoaXMuaXNQYW5lbCA/IF90aGlzLmNzc0NsYXNzZXMucGFuZWwgOiBfdGhpcy5jc3NDbGFzc2VzO1xuICAgICAgICAgICAgICAgIGlmIChjc3NDbGFzc2VzLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gT2JqZWN0KF91dGlsc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fW1wiY2xhc3Nlc1RvU2VsZWN0b3JcIl0pKGNzc0NsYXNzZXMuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfYSA9IF90aGlzLmdldFdyYXBwZXJFbGVtZW50KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQW5pbWF0aW9uRW5hYmxlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJzZXR0aW5nc1wiXS5hbmltYXRpb25FbmFibGVkICYmIF90aGlzLmFuaW1hdGlvbkFsbG93ZWQgJiYgIV90aGlzLmlzRGVzaWduTW9kZTsgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcInJlbmRlcmVkSXNFeHBhbmRlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5fcmVuZGVyZWRJc0V4cGFuZGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uQ29sbGFwc2VkLnN5bmModmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJhbmltYXRpb25BbGxvd2VkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNMb2FkaW5nRnJvbUpzb24gJiYgIXRoaXMuaXNEaXNwb3NlZCAmJiAhIXRoaXMuc3VydmV5ICYmIHRoaXMuYW5pbWF0aW9uQWxsb3dlZFZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uQWxsb3dlZFZhbHVlID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3VydmV5RWxlbWVudC5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLnRpdGxlVG9vbGJhclZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlVG9vbGJhclZhbHVlLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3VydmV5RWxlbWVudC5DcmVhdGVEaXNhYmxlZERlc2lnbkVsZW1lbnRzID0gZmFsc2U7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE9iamVjdChfanNvbm9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wicHJvcGVydHlcIl0pKHsgZGVmYXVsdFZhbHVlOiBudWxsIH0pXG4gICAgXSwgU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiZHJhZ1R5cGVPdmVyTWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IGZhbHNlIH0pXG4gICAgXSwgU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiaXNEcmFnTWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IGZhbHNlIH0pXG4gICAgXSwgU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiaGFzVmlzaWJsZUVycm9yc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5XCJdKSh7IGRlZmF1bHRWYWx1ZTogdHJ1ZSB9KVxuICAgIF0sIFN1cnZleUVsZW1lbnQucHJvdG90eXBlLCBcImlzU2luZ2xlSW5Sb3dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT2JqZWN0KF9qc29ub2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJwcm9wZXJ0eVwiXSkoeyBkZWZhdWx0VmFsdWU6IHRydWUgfSlcbiAgICBdLCBTdXJ2ZXlFbGVtZW50LnByb3RvdHlwZSwgXCJhbGxvd1Jvb3RTdHlsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPYmplY3QoX2pzb25vYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInByb3BlcnR5XCJdKSgpXG4gICAgXSwgU3VydmV5RWxlbWVudC5wcm90b3R5cGUsIFwiX3JlbmRlcmVkSXNFeHBhbmRlZFwiLCB2b2lkIDApO1xuICAgIHJldHVybiBTdXJ2ZXlFbGVtZW50O1xufShTdXJ2ZXlFbGVtZW50Q29yZSkpO1xuXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvc3VydmV5U3RyaW5ncy50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3N1cnZleVN0cmluZ3MudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBzdXJ2ZXlMb2NhbGl6YXRpb24sIHN1cnZleVN0cmluZ3MgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwic3VydmV5TG9jYWxpemF0aW9uXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3VydmV5TG9jYWxpemF0aW9uOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzdXJ2ZXlTdHJpbmdzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3VydmV5U3RyaW5nczsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvY2FsaXphdGlvbl9lbmdsaXNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xvY2FsaXphdGlvbi9lbmdsaXNoICovIFwiLi9zcmMvbG9jYWxpemF0aW9uL2VuZ2xpc2gudHNcIik7XG5cbnZhciBzdXJ2ZXlMb2NhbGl6YXRpb24gPSB7XG4gICAgY3VycmVudExvY2FsZVZhbHVlOiBcIlwiLFxuICAgIGRlZmF1bHRMb2NhbGVWYWx1ZTogXCJlblwiLFxuICAgIGxvY2FsZXM6IHt9LFxuICAgIGxvY2FsZU5hbWVzOiB7fSxcbiAgICBzdXBwb3J0ZWRMb2NhbGVzOiBbXSxcbiAgICBnZXQgY3VycmVudExvY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudExvY2FsZVZhbHVlID09PSB0aGlzLmRlZmF1bHRMb2NhbGVWYWx1ZSA/IFwiXCIgOiB0aGlzLmN1cnJlbnRMb2NhbGVWYWx1ZTtcbiAgICB9LFxuICAgIHNldCBjdXJyZW50TG9jYWxlKHZhbCkge1xuICAgICAgICBpZiAodmFsID09PSBcImN6XCIpXG4gICAgICAgICAgICB2YWwgPSBcImNzXCI7XG4gICAgICAgIHRoaXMuY3VycmVudExvY2FsZVZhbHVlID0gdmFsO1xuICAgIH0sXG4gICAgZ2V0IGRlZmF1bHRMb2NhbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRMb2NhbGVWYWx1ZTtcbiAgICB9LFxuICAgIHNldCBkZWZhdWx0TG9jYWxlKHZhbCkge1xuICAgICAgICBpZiAodmFsID09PSBcImN6XCIpXG4gICAgICAgICAgICB2YWwgPSBcImNzXCI7XG4gICAgICAgIHRoaXMuZGVmYXVsdExvY2FsZVZhbHVlID0gdmFsO1xuICAgIH0sXG4gICAgZ2V0TG9jYWxlU3RyaW5nczogZnVuY3Rpb24gKGxvYykge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVzW2xvY107XG4gICAgfSxcbiAgICBnZXRTdHJpbmc6IGZ1bmN0aW9uIChzdHJOYW1lLCBsb2NhbGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGxvY2FsZSA9PT0gdm9pZCAwKSB7IGxvY2FsZSA9IG51bGw7IH1cbiAgICAgICAgdmFyIGxvY3MgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdmFyIGFkZExvY2FsZUNvcmUgPSBmdW5jdGlvbiAobG9jTmFtZSkge1xuICAgICAgICAgICAgdmFyIHN0cnMgPSBfdGhpcy5sb2NhbGVzW2xvY05hbWVdO1xuICAgICAgICAgICAgaWYgKCEhc3RycylcbiAgICAgICAgICAgICAgICBsb2NzLnB1c2goc3Rycyk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhZGRMb2NhbGUgPSBmdW5jdGlvbiAobG9jTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFsb2NOYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGFkZExvY2FsZUNvcmUobG9jTmFtZSk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBsb2NOYW1lLmluZGV4T2YoXCItXCIpO1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsb2NOYW1lID0gbG9jTmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgYWRkTG9jYWxlQ29yZShsb2NOYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgYWRkTG9jYWxlKGxvY2FsZSk7XG4gICAgICAgIGFkZExvY2FsZSh0aGlzLmN1cnJlbnRMb2NhbGUpO1xuICAgICAgICBhZGRMb2NhbGUodGhpcy5kZWZhdWx0TG9jYWxlKTtcbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdExvY2FsZSAhPT0gXCJlblwiKSB7XG4gICAgICAgICAgICBhZGRMb2NhbGVDb3JlKFwiZW5cIik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2NzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gbG9jc1tpXVtzdHJOYW1lXTtcbiAgICAgICAgICAgIGlmIChyZXMgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9uR2V0RXh0ZXJuYWxTdHJpbmcoc3RyTmFtZSwgbG9jYWxlKTtcbiAgICB9LFxuICAgIGdldExvY2FsZXM6IGZ1bmN0aW9uIChyZW1vdmVEZWZhdWx0TG9jKSB7XG4gICAgICAgIGlmIChyZW1vdmVEZWZhdWx0TG9jID09PSB2b2lkIDApIHsgcmVtb3ZlRGVmYXVsdExvYyA9IGZhbHNlOyB9XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgcmVzLnB1c2goXCJcIik7XG4gICAgICAgIHZhciBsb2NzID0gdGhpcy5sb2NhbGVzO1xuICAgICAgICBpZiAodGhpcy5zdXBwb3J0ZWRMb2NhbGVzICYmIHRoaXMuc3VwcG9ydGVkTG9jYWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2NzID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3VwcG9ydGVkTG9jYWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxvY3NbdGhpcy5zdXBwb3J0ZWRMb2NhbGVzW2ldXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIga2V5IGluIGxvY3MpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVEZWZhdWx0TG9jICYmIGtleSA9PSB0aGlzLmRlZmF1bHRMb2NhbGUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICByZXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsb2NOYW1lID0gZnVuY3Rpb24gKGxvYykge1xuICAgICAgICAgICAgaWYgKCFsb2MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB2YXIgcmVzID0gc3VydmV5TG9jYWxpemF0aW9uLmxvY2FsZU5hbWVzW2xvY107XG4gICAgICAgICAgICBpZiAoIXJlcylcbiAgICAgICAgICAgICAgICByZXMgPSBsb2M7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgc3RyMSA9IGxvY05hbWUoYSk7XG4gICAgICAgICAgICB2YXIgc3RyMiA9IGxvY05hbWUoYik7XG4gICAgICAgICAgICBpZiAoc3RyMSA9PT0gc3RyMilcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiBzdHIxIDwgc3RyMiA/IC0xIDogMTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfSxcbiAgICBvbkdldEV4dGVybmFsU3RyaW5nOiBmdW5jdGlvbiAobmFtZSwgbG9jYWxlKSB7IHJldHVybiB1bmRlZmluZWQ7IH1cbn07XG52YXIgc3VydmV5U3RyaW5ncyA9IF9sb2NhbGl6YXRpb25fZW5nbGlzaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZW5nbGlzaFN0cmluZ3NcIl07XG5zdXJ2ZXlMb2NhbGl6YXRpb24ubG9jYWxlc1tcImVuXCJdID0gX2xvY2FsaXphdGlvbl9lbmdsaXNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJlbmdsaXNoU3RyaW5nc1wiXTtcbnN1cnZleUxvY2FsaXphdGlvbi5sb2NhbGVOYW1lc1tcImVuXCJdID0gXCJlbmdsaXNoXCI7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvdXRpbHMvYW5pbWF0aW9uLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy91dGlscy9hbmltYXRpb24udHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IEFuaW1hdGlvblV0aWxzLCBBbmltYXRpb25Qcm9wZXJ0eVV0aWxzLCBBbmltYXRpb25Hcm91cFV0aWxzLCBBbmltYXRpb25Cb29sZWFuLCBBbmltYXRpb25Hcm91cCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJBbmltYXRpb25VdGlsc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFuaW1hdGlvblV0aWxzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJBbmltYXRpb25Qcm9wZXJ0eVV0aWxzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQW5pbWF0aW9uUHJvcGVydHlVdGlsczsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQW5pbWF0aW9uR3JvdXBVdGlsc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFuaW1hdGlvbkdyb3VwVXRpbHM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkFuaW1hdGlvbkJvb2xlYW5cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBbmltYXRpb25Cb29sZWFuOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJBbmltYXRpb25Hcm91cFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFuaW1hdGlvbkdyb3VwOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZ2xvYmFsX3ZhcmlhYmxlc191dGlscyAqLyBcIi4vc3JjL2dsb2JhbF92YXJpYWJsZXNfdXRpbHMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3Rhc2ttYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Rhc2ttYW5hZ2VyICovIFwiLi9zcmMvdXRpbHMvdGFza21hbmFnZXIudHNcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG52YXIgQW5pbWF0aW9uVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQW5pbWF0aW9uVXRpbHMoKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsUXVldWUgPSBbXTtcbiAgICB9XG4gICAgQW5pbWF0aW9uVXRpbHMucHJvdG90eXBlLmdldE1zRnJvbVJ1bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSBcImF1dG9cIilcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlLnNsaWNlKDAsIC0xKS5yZXBsYWNlKFwiLFwiLCBcIi5cIikpICogMTAwMDtcbiAgICB9O1xuICAgIEFuaW1hdGlvblV0aWxzLnByb3RvdHlwZS5nZXRBbmltYXRpb25zQ291bnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgYW5pbWF0aW9uTmFtZSA9IFwiXCI7XG4gICAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlKSB7XG4gICAgICAgICAgICBhbmltYXRpb25OYW1lID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5hbmltYXRpb25OYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoYW5pbWF0aW9uTmFtZSAmJiBhbmltYXRpb25OYW1lICE9IFwibm9uZVwiID8gYW5pbWF0aW9uTmFtZS5zcGxpdChcIiwgXCIpLmxlbmd0aCA6IDApO1xuICAgIH07XG4gICAgQW5pbWF0aW9uVXRpbHMucHJvdG90eXBlLmdldEFuaW1hdGlvbkR1cmF0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgdmFyIGRlbGF5cyA9IHN0eWxlW1wiYW5pbWF0aW9uRGVsYXlcIl0uc3BsaXQoXCIsIFwiKTtcbiAgICAgICAgdmFyIGR1cmF0aW9ucyA9IHN0eWxlW1wiYW5pbWF0aW9uRHVyYXRpb25cIl0uc3BsaXQoXCIsIFwiKTtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBNYXRoLm1heChkdXJhdGlvbnMubGVuZ3RoLCBkZWxheXMubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGgubWF4KGR1cmF0aW9uLCB0aGlzLmdldE1zRnJvbVJ1bGUoZHVyYXRpb25zW2kgJSBkdXJhdGlvbnMubGVuZ3RoXSkgKyB0aGlzLmdldE1zRnJvbVJ1bGUoZGVsYXlzW2kgJSBkZWxheXMubGVuZ3RoXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkdXJhdGlvbjtcbiAgICB9O1xuICAgIEFuaW1hdGlvblV0aWxzLnByb3RvdHlwZS5vbkFuaW1hdGlvbkVuZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY2FuY2VsVGltZW91dDtcbiAgICAgICAgdmFyIGFuaW1hdGlvbnNDb3VudCA9IHRoaXMuZ2V0QW5pbWF0aW9uc0NvdW50KGVsZW1lbnQpO1xuICAgICAgICB2YXIgb25FbmRDYWxsYmFjayA9IGZ1bmN0aW9uIChpc0NhbmNlbCkge1xuICAgICAgICAgICAgaWYgKGlzQ2FuY2VsID09PSB2b2lkIDApIHsgaXNDYW5jZWwgPSB0cnVlOyB9XG4gICAgICAgICAgICBvcHRpb25zLm9uQWZ0ZXJSdW5BbmltYXRpb24gJiYgb3B0aW9ucy5vbkFmdGVyUnVuQW5pbWF0aW9uKGVsZW1lbnQpO1xuICAgICAgICAgICAgY2FsbGJhY2soaXNDYW5jZWwpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNhbmNlbFRpbWVvdXQpO1xuICAgICAgICAgICAgX3RoaXMuY2FuY2VsUXVldWUuc3BsaWNlKF90aGlzLmNhbmNlbFF1ZXVlLmluZGV4T2Yob25FbmRDYWxsYmFjayksIDEpO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsIG9uQW5pbWF0aW9uRW5kQ2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25BbmltYXRpb25FbmRDYWxsYmFjayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBldmVudC5jdXJyZW50VGFyZ2V0ICYmIC0tYW5pbWF0aW9uc0NvdW50IDw9IDApIHtcbiAgICAgICAgICAgICAgICBvbkVuZENhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGFuaW1hdGlvbnNDb3VudCA+IDApIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCBvbkFuaW1hdGlvbkVuZENhbGxiYWNrKTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsUXVldWUucHVzaChvbkVuZENhbGxiYWNrKTtcbiAgICAgICAgICAgIGNhbmNlbFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvbkVuZENhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIH0sIHRoaXMuZ2V0QW5pbWF0aW9uRHVyYXRpb24oZWxlbWVudCkgKyAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5pbWF0aW9uVXRpbHMucHJvdG90eXBlLmJlZm9yZUFuaW1hdGlvblJ1biA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICBvcHRpb25zLm9uQmVmb3JlUnVuQW5pbWF0aW9uICYmIG9wdGlvbnMub25CZWZvcmVSdW5BbmltYXRpb24oZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFuaW1hdGlvblV0aWxzLnByb3RvdHlwZS5ydW5MZWF2ZUFuaW1hdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoZWxlbWVudCAmJiBvcHRpb25zLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQob3B0aW9ucy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB2YXIgb25BbmltYXRpb25FbmRDYWxsYmFjayA9IGZ1bmN0aW9uIChpc0NhbmNlbCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQ2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShvcHRpb25zLmNzc0NsYXNzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJEb21XaW5kb3dIZWxwZXJcIl0ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJEb21XaW5kb3dIZWxwZXJcIl0ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUob3B0aW9ucy5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMub25BbmltYXRpb25FbmQoZWxlbWVudCwgb25BbmltYXRpb25FbmRDYWxsYmFjaywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbmltYXRpb25VdGlscy5wcm90b3R5cGUucnVuRW50ZXJBbmltYXRpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICBpZiAoZWxlbWVudCAmJiBvcHRpb25zLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQob3B0aW9ucy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLm9uQW5pbWF0aW9uRW5kKGVsZW1lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUob3B0aW9ucy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5pbWF0aW9uVXRpbHMucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhbmNlbFF1ZXVlID0gW10uY29uY2F0KHRoaXMuY2FuY2VsUXVldWUpO1xuICAgICAgICBjYW5jZWxRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gY2FsbGJhY2soKTsgfSk7XG4gICAgICAgIHRoaXMuY2FuY2VsUXVldWUgPSBbXTtcbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRpb25VdGlscztcbn0oKSk7XG5cbnZhciBBbmltYXRpb25Qcm9wZXJ0eVV0aWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBbmltYXRpb25Qcm9wZXJ0eVV0aWxzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFuaW1hdGlvblByb3BlcnR5VXRpbHMoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgQW5pbWF0aW9uUHJvcGVydHlVdGlscy5wcm90b3R5cGUub25FbnRlciA9IGZ1bmN0aW9uIChnZXRFbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudCgpO1xuICAgICAgICAgICAgX3RoaXMuYmVmb3JlQW5pbWF0aW9uUnVuKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgX3RoaXMucnVuRW50ZXJBbmltYXRpb24oZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJEb21XaW5kb3dIZWxwZXJcIl0ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChnZXRFbGVtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkRvbVdpbmRvd0hlbHBlclwiXS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuaW1hdGlvblByb3BlcnR5VXRpbHMucHJvdG90eXBlLm9uTGVhdmUgPSBmdW5jdGlvbiAoZ2V0RWxlbWVudCwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuYmVmb3JlQW5pbWF0aW9uUnVuKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnJ1bkxlYXZlQW5pbWF0aW9uKGVsZW1lbnQsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRpb25Qcm9wZXJ0eVV0aWxzO1xufShBbmltYXRpb25VdGlscykpO1xuXG52YXIgQW5pbWF0aW9uR3JvdXBVdGlscyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQW5pbWF0aW9uR3JvdXBVdGlscywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmltYXRpb25Hcm91cFV0aWxzKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIEFuaW1hdGlvbkdyb3VwVXRpbHMucHJvdG90eXBlLm9uRW50ZXIgPSBmdW5jdGlvbiAoZ2V0RWxlbWVudCwgZ2V0T3B0aW9ucywgZWxlbWVudHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRG9tV2luZG93SGVscGVyXCJdLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYmVmb3JlQW5pbWF0aW9uUnVuKGdldEVsZW1lbnQoZWwpLCBnZXRPcHRpb25zKGVsKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucnVuRW50ZXJBbmltYXRpb24oZ2V0RWxlbWVudChlbCksIGdldE9wdGlvbnMoZWwpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIWdldEVsZW1lbnQoZWxlbWVudHNbMF0pKSB7XG4gICAgICAgICAgICAgICAgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIkRvbVdpbmRvd0hlbHBlclwiXS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmltYXRpb25Hcm91cFV0aWxzLnByb3RvdHlwZS5vbkxlYXZlID0gZnVuY3Rpb24gKGdldEVsZW1lbnQsIGNhbGxiYWNrLCBnZXRPcHRpb25zLCBlbGVtZW50cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgX3RoaXMuYmVmb3JlQW5pbWF0aW9uUnVuKGdldEVsZW1lbnQoZWwpLCBnZXRPcHRpb25zKGVsKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgY291bnRlciA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIG9uRW5kQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoLS1jb3VudGVyIDw9IDApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgX3RoaXMucnVuTGVhdmVBbmltYXRpb24oZ2V0RWxlbWVudChlbCksIGdldE9wdGlvbnMoZWwpLCBvbkVuZENhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQW5pbWF0aW9uR3JvdXBVdGlscztcbn0oQW5pbWF0aW9uVXRpbHMpKTtcblxudmFyIEFuaW1hdGlvblByb3BlcnR5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFuaW1hdGlvblByb3BlcnR5KGFuaW1hdGlvbk9wdGlvbnMsIHVwZGF0ZSwgZ2V0Q3VycmVudFZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uT3B0aW9ucyA9IGFuaW1hdGlvbk9wdGlvbnM7XG4gICAgICAgIHRoaXMudXBkYXRlID0gdXBkYXRlO1xuICAgICAgICB0aGlzLmdldEN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZTtcbiAgICAgICAgdGhpcy5fZGVib3VuY2VkU3luYyA9IE9iamVjdChfdGFza21hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlYm91bmNlXCJdKShmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgIF90aGlzLmFuaW1hdGlvbi5jYW5jZWwoKTtcbiAgICAgICAgICAgIF90aGlzLl9zeW5jKG5ld1ZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIEFuaW1hdGlvblByb3BlcnR5LnByb3RvdHlwZS5zeW5jID0gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbk9wdGlvbnMuaXNBbmltYXRpb25FbmFibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlYm91bmNlZFN5bmMucnVuKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5pbWF0aW9uUHJvcGVydHkucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb24uY2FuY2VsKCk7XG4gICAgICAgIHRoaXMuX2RlYm91bmNlZFN5bmMuY2FuY2VsKCk7XG4gICAgfTtcbiAgICByZXR1cm4gQW5pbWF0aW9uUHJvcGVydHk7XG59KCkpO1xudmFyIEFuaW1hdGlvbkJvb2xlYW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFuaW1hdGlvbkJvb2xlYW4sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5pbWF0aW9uQm9vbGVhbigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb25Qcm9wZXJ0eVV0aWxzKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQW5pbWF0aW9uQm9vbGVhbi5wcm90b3R5cGUuX3N5bmMgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSB0aGlzLmdldEN1cnJlbnRWYWx1ZSgpKSB7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb24ub25FbnRlcihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hbmltYXRpb25PcHRpb25zLmdldEFuaW1hdGVkRWxlbWVudCgpOyB9LCB0aGlzLmFuaW1hdGlvbk9wdGlvbnMuZ2V0RW50ZXJPcHRpb25zKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb24ub25MZWF2ZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hbmltYXRpb25PcHRpb25zLmdldEFuaW1hdGVkRWxlbWVudCgpOyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZShuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSwgdGhpcy5hbmltYXRpb25PcHRpb25zLmdldExlYXZlT3B0aW9ucygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFuaW1hdGlvbkJvb2xlYW47XG59KEFuaW1hdGlvblByb3BlcnR5KSk7XG5cbnZhciBBbmltYXRpb25Hcm91cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQW5pbWF0aW9uR3JvdXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5pbWF0aW9uR3JvdXAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5hbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uR3JvdXBVdGlscygpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEFuaW1hdGlvbkdyb3VwLnByb3RvdHlwZS5fc3luYyA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZSgpO1xuICAgICAgICB2YXIgaXRlbXNUb0FkZCA9IG5ld1ZhbHVlLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIG9sZFZhbHVlLmluZGV4T2YoZWwpIDwgMDsgfSk7XG4gICAgICAgIHZhciBkZWxldGVkSXRlbXMgPSBvbGRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBuZXdWYWx1ZS5pbmRleE9mKGVsKSA8IDA7IH0pO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbi5vbkVudGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gX3RoaXMuYW5pbWF0aW9uT3B0aW9ucy5nZXRBbmltYXRlZEVsZW1lbnQoZWwpOyB9LCBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIF90aGlzLmFuaW1hdGlvbk9wdGlvbnMuZ2V0RW50ZXJPcHRpb25zKGVsKTsgfSwgaXRlbXNUb0FkZCk7XG4gICAgICAgIGlmIChpdGVtc1RvQWRkLmxlbmd0aCA9PSAwICYmIChkZWxldGVkSXRlbXMgPT09IG51bGwgfHwgZGVsZXRlZEl0ZW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWxldGVkSXRlbXMubGVuZ3RoKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLm9uTGVhdmUoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBfdGhpcy5hbmltYXRpb25PcHRpb25zLmdldEFuaW1hdGVkRWxlbWVudChlbCk7IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGUobmV3VmFsdWUpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVsKSB7IHJldHVybiBfdGhpcy5hbmltYXRpb25PcHRpb25zLmdldExlYXZlT3B0aW9ucyhlbCk7IH0sIGRlbGV0ZWRJdGVtcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZShuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRpb25Hcm91cDtcbn0oQW5pbWF0aW9uUHJvcGVydHkpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3V0aWxzL2Nzc0NsYXNzQnVpbGRlci50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdXRpbHMvY3NzQ2xhc3NCdWlsZGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBDc3NDbGFzc0J1aWxkZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiQ3NzQ2xhc3NCdWlsZGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQ3NzQ2xhc3NCdWlsZGVyOyB9KTtcbnZhciBDc3NDbGFzc0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ3NzQ2xhc3NCdWlsZGVyKCkge1xuICAgICAgICB0aGlzLmNsYXNzZXMgPSBbXTtcbiAgICB9XG4gICAgQ3NzQ2xhc3NCdWlsZGVyLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpID09PSBcIlwiO1xuICAgIH07XG4gICAgQ3NzQ2xhc3NCdWlsZGVyLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAodmFsdWUsIGNvbmRpdGlvbikge1xuICAgICAgICBpZiAoY29uZGl0aW9uID09PSB2b2lkIDApIHsgY29uZGl0aW9uID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoISF2YWx1ZSAmJiBjb25kaXRpb24pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xhc3Nlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIENzc0NsYXNzQnVpbGRlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsYXNzZXMuam9pbihcIiBcIik7XG4gICAgfTtcbiAgICByZXR1cm4gQ3NzQ2xhc3NCdWlsZGVyO1xufSgpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3V0aWxzL3Jlc3BvbnNpdml0eS1tYW5hZ2VyLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3V0aWxzL3Jlc3BvbnNpdml0eS1tYW5hZ2VyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFJlc3BvbnNpdml0eU1hbmFnZXIsIFZlcnRpY2FsUmVzcG9uc2l2aXR5TWFuYWdlciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSZXNwb25zaXZpdHlNYW5hZ2VyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gUmVzcG9uc2l2aXR5TWFuYWdlcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiVmVydGljYWxSZXNwb25zaXZpdHlNYW5hZ2VyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVmVydGljYWxSZXNwb25zaXZpdHlNYW5hZ2VyOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZ2xvYmFsX3ZhcmlhYmxlc191dGlscyAqLyBcIi4vc3JjL2dsb2JhbF92YXJpYWJsZXNfdXRpbHMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3V0aWxzICovIFwiLi9zcmMvdXRpbHMvdXRpbHMudHNcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcblxuXG52YXIgUmVzcG9uc2l2aXR5TWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXNwb25zaXZpdHlNYW5hZ2VyKGNvbnRhaW5lciwgbW9kZWwsIGl0ZW1zU2VsZWN0b3IsIGRvdHNJdGVtU2l6ZSwgZGVsYXllZFVwZGF0ZUZ1bmN0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChkb3RzSXRlbVNpemUgPT09IHZvaWQgMCkgeyBkb3RzSXRlbVNpemUgPSBudWxsOyB9XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMuaXRlbXNTZWxlY3RvciA9IGl0ZW1zU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZG90c0l0ZW1TaXplID0gZG90c0l0ZW1TaXplO1xuICAgICAgICB0aGlzLmRlbGF5ZWRVcGRhdGVGdW5jdGlvbiA9IGRlbGF5ZWRVcGRhdGVGdW5jdGlvbjtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWluRGltZW5zaW9uQ29uc3QgPSA1NjtcbiAgICAgICAgdGhpcy5zZXBhcmF0b3JTaXplID0gMTc7XG4gICAgICAgIHRoaXMuc2VwYXJhdG9yQWRkQ29uc3QgPSAxO1xuICAgICAgICB0aGlzLnBhZGRpbmdTaXplQ29uc3QgPSA4O1xuICAgICAgICB0aGlzLmRvdHNTaXplQ29uc3QgPSA0ODtcbiAgICAgICAgdGhpcy5yZWNhbGNNaW5EaW1lbnNpb25Db25zdCA9IHRydWU7XG4gICAgICAgIHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSA9IGZ1bmN0aW9uIChlbHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiRG9tRG9jdW1lbnRIZWxwZXJcIl0uZ2V0Q29tcHV0ZWRTdHlsZShlbHQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vZGVsLnVwZGF0ZUNhbGxiYWNrID0gZnVuY3Rpb24gKGlzUmVzZXRJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgaWYgKGlzUmVzZXRJbml0aWFsaXplZClcbiAgICAgICAgICAgICAgICBfdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgX3RoaXMucHJvY2VzcygpOyB9LCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBSZXNpemVPYnNlcnZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihmdW5jdGlvbiAoZW50cmllcykge1xuICAgICAgICAgICAgICAgIF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJEb21XaW5kb3dIZWxwZXJcIl0ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2VzcygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUmVzcG9uc2l2aXR5TWFuYWdlci5wcm90b3R5cGUuZ2V0RGltZW5zaW9ucyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY3JvbGw6IGVsZW1lbnQuc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICBvZmZzZXQ6IGVsZW1lbnQub2Zmc2V0V2lkdGgsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBSZXNwb25zaXZpdHlNYW5hZ2VyLnByb3RvdHlwZS5nZXRBdmFpbGFibGVTcGFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdmFyIHNwYWNlID0gdGhpcy5jb250YWluZXIub2Zmc2V0V2lkdGg7XG4gICAgICAgIGlmIChzdHlsZS5ib3hTaXppbmcgPT09IFwiYm9yZGVyLWJveFwiKSB7XG4gICAgICAgICAgICBzcGFjZSAtPSBwYXJzZUZsb2F0KHN0eWxlLnBhZGRpbmdMZWZ0KSArIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ1JpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BhY2U7XG4gICAgfTtcbiAgICBSZXNwb25zaXZpdHlNYW5hZ2VyLnByb3RvdHlwZS5jYWxjSXRlbVNpemUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5vZmZzZXRXaWR0aDtcbiAgICB9O1xuICAgIFJlc3BvbnNpdml0eU1hbmFnZXIucHJvdG90eXBlLmNhbGNNaW5EaW1lbnNpb24gPSBmdW5jdGlvbiAoY3VycmVudEFjdGlvbikge1xuICAgICAgICB2YXIgbWluRGltZW5zaW9uQ29uc3QgPSB0aGlzLm1pbkRpbWVuc2lvbkNvbnN0O1xuICAgICAgICBpZiAoY3VycmVudEFjdGlvbi5pY29uU2l6ZSAmJiB0aGlzLnJlY2FsY01pbkRpbWVuc2lvbkNvbnN0KSB7XG4gICAgICAgICAgICBtaW5EaW1lbnNpb25Db25zdCA9IDIgKiBjdXJyZW50QWN0aW9uLmljb25TaXplICsgdGhpcy5wYWRkaW5nU2l6ZUNvbnN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJyZW50QWN0aW9uLmNhblNocmlua1xuICAgICAgICAgICAgPyBtaW5EaW1lbnNpb25Db25zdCArXG4gICAgICAgICAgICAgICAgKGN1cnJlbnRBY3Rpb24ubmVlZFNlcGFyYXRvciA/IHRoaXMuc2VwYXJhdG9yU2l6ZSA6IDApXG4gICAgICAgICAgICA6IGN1cnJlbnRBY3Rpb24ubWF4RGltZW5zaW9uO1xuICAgIH07XG4gICAgUmVzcG9uc2l2aXR5TWFuYWdlci5wcm90b3R5cGUuZ2V0UmVuZGVyZWRWaXNpYmxlQWN0aW9uc0NvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaXRlbXNTZWxlY3RvcikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKF90aGlzLmNhbGNJdGVtU2l6ZShpdGVtKSA+IDApIHtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH07XG4gICAgUmVzcG9uc2l2aXR5TWFuYWdlci5wcm90b3R5cGUuY2FsY0l0ZW1zU2l6ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5tb2RlbC5hY3Rpb25zO1xuICAgICAgICB2YXIgX2l0ZW1zID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCh0aGlzLml0ZW1zU2VsZWN0b3IpO1xuICAgICAgICAoX2l0ZW1zIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRBY3Rpb24gPSBhY3Rpb25zW2luZGV4XTtcbiAgICAgICAgICAgIF90aGlzLmNhbGNBY3Rpb25EaW1lbnNpb25zKGN1cnJlbnRBY3Rpb24sIGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlc3BvbnNpdml0eU1hbmFnZXIucHJvdG90eXBlLmNhbGNBY3Rpb25EaW1lbnNpb25zID0gZnVuY3Rpb24gKGN1cnJlbnRBY3Rpb24sIGl0ZW0pIHtcbiAgICAgICAgY3VycmVudEFjdGlvbi5tYXhEaW1lbnNpb24gPSB0aGlzLmNhbGNJdGVtU2l6ZShpdGVtKTtcbiAgICAgICAgY3VycmVudEFjdGlvbi5taW5EaW1lbnNpb24gPSB0aGlzLmNhbGNNaW5EaW1lbnNpb24oY3VycmVudEFjdGlvbik7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzcG9uc2l2aXR5TWFuYWdlci5wcm90b3R5cGUsIFwiaXNDb250YWluZXJWaXNpYmxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0KF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiaXNDb250YWluZXJWaXNpYmxlXCJdKSh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBSZXNwb25zaXZpdHlNYW5hZ2VyLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5pc0NvbnRhaW5lclZpc2libGUgJiYgIXRoaXMubW9kZWwuaXNSZXNwb25zaXZlbmVzc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0QWN0aW9uc01vZGUoXCJsYXJnZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcm9jZXNzUmVzcG9uc2l2ZW5lc3NfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgdmFyIGRvdHNJdGVtU2l6ZSA9IF90aGlzLmRvdHNJdGVtU2l6ZTtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmRvdHNJdGVtU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZG90c0l0ZW1FbGVtZW50ID0gKF9hID0gX3RoaXMuY29udGFpbmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucXVlcnlTZWxlY3RvcihcIi5zdi1kb3RzXCIpO1xuICAgICAgICAgICAgICAgICAgICBkb3RzSXRlbVNpemUgPSBkb3RzSXRlbUVsZW1lbnQgJiYgX3RoaXMuY2FsY0l0ZW1TaXplKGRvdHNJdGVtRWxlbWVudCkgfHwgX3RoaXMuZG90c1NpemVDb25zdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMubW9kZWwuZml0KF90aGlzLmdldEF2YWlsYWJsZVNwYWNlKCksIGRvdHNJdGVtU2l6ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNhbGNJdGVtc1NpemVzKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzUmVzcG9uc2l2ZW5lc3NfMSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0UmVuZGVyZWRWaXNpYmxlQWN0aW9uc0NvdW50KCkgPCB0aGlzLm1vZGVsLnZpc2libGVBY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxheWVkVXBkYXRlRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsYXllZFVwZGF0ZUZ1bmN0aW9uKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChxdWV1ZU1pY3JvdGFzaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVNaWNyb3Rhc2soY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzUmVzcG9uc2l2ZW5lc3NfMSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBSZXNwb25zaXZpdHlNYW5hZ2VyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1vZGVsLnVwZGF0ZUNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoISF0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJlc3BvbnNpdml0eU1hbmFnZXI7XG59KCkpO1xuXG52YXIgVmVydGljYWxSZXNwb25zaXZpdHlNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWZXJ0aWNhbFJlc3BvbnNpdml0eU1hbmFnZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmVydGljYWxSZXNwb25zaXZpdHlNYW5hZ2VyKGNvbnRhaW5lciwgbW9kZWwsIGl0ZW1zU2VsZWN0b3IsIGRvdHNJdGVtU2l6ZSwgbWluRGltZW5zaW9uLCBkZWxheWVkVXBkYXRlRnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKG1pbkRpbWVuc2lvbiA9PT0gdm9pZCAwKSB7IG1pbkRpbWVuc2lvbiA9IDQwOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbnRhaW5lciwgbW9kZWwsIGl0ZW1zU2VsZWN0b3IsIGRvdHNJdGVtU2l6ZSwgZGVsYXllZFVwZGF0ZUZ1bmN0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5taW5EaW1lbnNpb25Db25zdCA9IG1pbkRpbWVuc2lvbjtcbiAgICAgICAgX3RoaXMucmVjYWxjTWluRGltZW5zaW9uQ29uc3QgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBWZXJ0aWNhbFJlc3BvbnNpdml0eU1hbmFnZXIucHJvdG90eXBlLmdldERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY3JvbGw6IHRoaXMuY29udGFpbmVyLnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgIG9mZnNldDogdGhpcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0LFxuICAgICAgICB9O1xuICAgIH07XG4gICAgVmVydGljYWxSZXNwb25zaXZpdHlNYW5hZ2VyLnByb3RvdHlwZS5nZXRBdmFpbGFibGVTcGFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdmFyIHNwYWNlID0gdGhpcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpZiAoc3R5bGUuYm94U2l6aW5nID09PSBcImJvcmRlci1ib3hcIikge1xuICAgICAgICAgICAgc3BhY2UgLT0gcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nVG9wKSArIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0JvdHRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwYWNlO1xuICAgIH07XG4gICAgVmVydGljYWxSZXNwb25zaXZpdHlNYW5hZ2VyLnByb3RvdHlwZS5jYWxjSXRlbVNpemUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5vZmZzZXRIZWlnaHQ7XG4gICAgfTtcbiAgICBWZXJ0aWNhbFJlc3BvbnNpdml0eU1hbmFnZXIucHJvdG90eXBlLmNhbGNBY3Rpb25EaW1lbnNpb25zID0gZnVuY3Rpb24gKGN1cnJlbnRBY3Rpb24sIGl0ZW0pIHtcbiAgICAgICAgY3VycmVudEFjdGlvbi5tYXhEaW1lbnNpb24gPSB0aGlzLmNhbGNJdGVtU2l6ZShpdGVtKTtcbiAgICAgICAgY3VycmVudEFjdGlvbi5taW5EaW1lbnNpb24gPSB0aGlzLmNhbGNJdGVtU2l6ZShpdGVtKTtcbiAgICB9O1xuICAgIHJldHVybiBWZXJ0aWNhbFJlc3BvbnNpdml0eU1hbmFnZXI7XG59KFJlc3BvbnNpdml0eU1hbmFnZXIpKTtcblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3V0aWxzL3Rhc2ttYW5hZ2VyLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3V0aWxzL3Rhc2ttYW5hZ2VyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFRhc2ssIFRhc2tNYW5nZXIsIGRlYm91bmNlICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlRhc2tcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBUYXNrOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJUYXNrTWFuZ2VyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVGFza01hbmdlcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZGVib3VuY2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkZWJvdW5jZTsgfSk7XG52YXIgVGFzayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYXNrKGZ1bmMsIGlzTXVsdGlwbGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGlzTXVsdGlwbGUgPT09IHZvaWQgMCkgeyBpc011bHRpcGxlID0gZmFsc2U7IH1cbiAgICAgICAgdGhpcy5mdW5jID0gZnVuYztcbiAgICAgICAgdGhpcy5pc011bHRpcGxlID0gaXNNdWx0aXBsZTtcbiAgICAgICAgdGhpcy5faXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5leGVjdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5faXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5mdW5jKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2lzQ29tcGxldGVkID0gIV90aGlzLmlzTXVsdGlwbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFRhc2sucHJvdG90eXBlLmRpc2NhcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2lzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUYXNrLnByb3RvdHlwZSwgXCJpc0NvbXBsZXRlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ29tcGxldGVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFRhc2s7XG59KCkpO1xuXG52YXIgVGFza01hbmdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYXNrTWFuZ2VyKGludGVydmFsKSB7XG4gICAgICAgIGlmIChpbnRlcnZhbCA9PT0gdm9pZCAwKSB7IGludGVydmFsID0gMTAwOyB9XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBpbnRlcnZhbDtcbiAgICAgICAgc2V0VGltZW91dChUYXNrTWFuZ2VyLkluc3RhbmNlKCkudGljaywgaW50ZXJ2YWwpO1xuICAgIH1cbiAgICAvLyBkaXNwb3NlXG4gICAgVGFza01hbmdlci5JbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFUYXNrTWFuZ2VyLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBUYXNrTWFuZ2VyLmluc3RhbmNlID0gbmV3IFRhc2tNYW5nZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVGFza01hbmdlci5pbnN0YW5jZTtcbiAgICB9O1xuICAgIFRhc2tNYW5nZXIucHJvdG90eXBlLnRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgbmV3VGFza3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVGFza01hbmdlci50YXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciB0YXNrID0gVGFza01hbmdlci50YXNrc1tpXTtcbiAgICAgICAgICAgICAgICB0YXNrLmV4ZWN1dGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhc2suaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFzay5kaXNwb3NlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVGFza01hbmdlci50YXNrcyA9IG5ld1Rhc2tzO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0VGltZW91dChUYXNrTWFuZ2VyLkluc3RhbmNlKCkudGljaywgdGhpcy5pbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRhc2tNYW5nZXIuc2NoZWR1bGUgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICBUYXNrTWFuZ2VyLnRhc2tzLnB1c2godGFzayk7XG4gICAgfTtcbiAgICBUYXNrTWFuZ2VyLmluc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgIFRhc2tNYW5nZXIudGFza3MgPSBbXTtcbiAgICByZXR1cm4gVGFza01hbmdlcjtcbn0oKSk7XG5cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHZhciBpc1NoZWR1bGVkID0gZmFsc2U7XG4gICAgdmFyIGlzQ2FuY2VsZWQgPSBmYWxzZTtcbiAgICB2YXIgZnVuY0FyZ3M7XG4gICAgcmV0dXJuIHsgcnVuOiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNDYW5jZWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZnVuY0FyZ3MgPSBhcmdzO1xuICAgICAgICAgICAgaWYgKCFpc1NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgaXNTaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcXVldWVNaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwbHkoX3RoaXMsIGZ1bmNBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpc0NhbmNlbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzU2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNDYW5jZWxlZCA9IHRydWU7XG4gICAgICAgIH0gfTtcbn1cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy91dGlscy91dGlscy50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy91dGlscy91dGlscy50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiB1bndyYXAsIGdldFJlbmRlcmVkU2l6ZSwgZ2V0UmVuZGVyZWRTdHlsZVNpemUsIGRvS2V5MkNsaWNrQmx1ciwgZG9LZXkyQ2xpY2tVcCwgZG9LZXkyQ2xpY2tEb3duLCBzYW5pdGl6ZUVkaXRhYmxlQ29udGVudCwgTG9nZ2VyLCBzaG93Q29uZmlybURpYWxvZywgY29uZmlnQ29uZmlybURpYWxvZywgbWVyZ2VWYWx1ZXMsIGdldEVsZW1lbnRXaWR0aCwgaXNDb250YWluZXJWaXNpYmxlLCBjbGFzc2VzVG9TZWxlY3RvciwgY29tcGFyZVZlcnNpb25zLCBjb25maXJtQWN0aW9uLCBjb25maXJtQWN0aW9uQXN5bmMsIGRldGVjdElFT3JFZGdlLCBkZXRlY3RJRUJyb3dzZXIsIGxvYWRGaWxlRnJvbUJhc2U2NCwgaXNNb2JpbGUsIGlzU2hhZG93RE9NLCBnZXRFbGVtZW50LCBpc0VsZW1lbnRWaXNpYmxlLCBmaW5kU2Nyb2xsYWJsZVBhcmVudCwgc2Nyb2xsRWxlbWVudEJ5Q2hpbGRJZCwgbmF2aWdhdGVUb1VybCwgd3JhcFVybEZvckJhY2tncm91bmRJbWFnZSwgY3JlYXRlU3ZnLCBnZXRJY29uTmFtZUZyb21Qcm94eSwgaW5jcmVhc2VIZWlnaHRCeUNvbnRlbnQsIGdldE9yaWdpbmFsRXZlbnQsIHByZXZlbnREZWZhdWx0cywgZmluZFBhcmVudEJ5Q2xhc3NOYW1lcywgZ2V0Rmlyc3RWaXNpYmxlQ2hpbGQsIGNob29zZUZpbGVzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInVud3JhcFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHVud3JhcDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0UmVuZGVyZWRTaXplXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0UmVuZGVyZWRTaXplOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRSZW5kZXJlZFN0eWxlU2l6ZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldFJlbmRlcmVkU3R5bGVTaXplOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkb0tleTJDbGlja0JsdXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkb0tleTJDbGlja0JsdXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRvS2V5MkNsaWNrVXBcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkb0tleTJDbGlja1VwOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkb0tleTJDbGlja0Rvd25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkb0tleTJDbGlja0Rvd247IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNhbml0aXplRWRpdGFibGVDb250ZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2FuaXRpemVFZGl0YWJsZUNvbnRlbnQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkxvZ2dlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIExvZ2dlcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwic2hvd0NvbmZpcm1EaWFsb2dcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzaG93Q29uZmlybURpYWxvZzsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY29uZmlnQ29uZmlybURpYWxvZ1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbmZpZ0NvbmZpcm1EaWFsb2c7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIm1lcmdlVmFsdWVzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWVyZ2VWYWx1ZXM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEVsZW1lbnRXaWR0aFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldEVsZW1lbnRXaWR0aDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaXNDb250YWluZXJWaXNpYmxlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNDb250YWluZXJWaXNpYmxlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjbGFzc2VzVG9TZWxlY3RvclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNsYXNzZXNUb1NlbGVjdG9yOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjb21wYXJlVmVyc2lvbnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb21wYXJlVmVyc2lvbnM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImNvbmZpcm1BY3Rpb25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb25maXJtQWN0aW9uOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjb25maXJtQWN0aW9uQXN5bmNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb25maXJtQWN0aW9uQXN5bmM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRldGVjdElFT3JFZGdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGV0ZWN0SUVPckVkZ2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRldGVjdElFQnJvd3NlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRldGVjdElFQnJvd3NlcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwibG9hZEZpbGVGcm9tQmFzZTY0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbG9hZEZpbGVGcm9tQmFzZTY0OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJpc01vYmlsZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzTW9iaWxlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJpc1NoYWRvd0RPTVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzU2hhZG93RE9NOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRFbGVtZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0RWxlbWVudDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaXNFbGVtZW50VmlzaWJsZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzRWxlbWVudFZpc2libGU7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImZpbmRTY3JvbGxhYmxlUGFyZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmluZFNjcm9sbGFibGVQYXJlbnQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNjcm9sbEVsZW1lbnRCeUNoaWxkSWRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzY3JvbGxFbGVtZW50QnlDaGlsZElkOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJuYXZpZ2F0ZVRvVXJsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbmF2aWdhdGVUb1VybDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwid3JhcFVybEZvckJhY2tncm91bmRJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHdyYXBVcmxGb3JCYWNrZ3JvdW5kSW1hZ2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImNyZWF0ZVN2Z1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNyZWF0ZVN2ZzsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0SWNvbk5hbWVGcm9tUHJveHlcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRJY29uTmFtZUZyb21Qcm94eTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaW5jcmVhc2VIZWlnaHRCeUNvbnRlbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpbmNyZWFzZUhlaWdodEJ5Q29udGVudDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0T3JpZ2luYWxFdmVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldE9yaWdpbmFsRXZlbnQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInByZXZlbnREZWZhdWx0c1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHByZXZlbnREZWZhdWx0czsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZmluZFBhcmVudEJ5Q2xhc3NOYW1lc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZpbmRQYXJlbnRCeUNsYXNzTmFtZXM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEZpcnN0VmlzaWJsZUNoaWxkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0Rmlyc3RWaXNpYmxlQ2hpbGQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImNob29zZUZpbGVzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY2hvb3NlRmlsZXM7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9sb2NhbGl6YWJsZXN0cmluZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vbG9jYWxpemFibGVzdHJpbmcgKi8gXCIuL3NyYy9sb2NhbGl6YWJsZXN0cmluZy50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vc2V0dGluZ3MgKi8gXCIuL3NyYy9zZXR0aW5ncy50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3VydmV5U3RyaW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc3VydmV5U3RyaW5ncyAqLyBcIi4vc3JjL3N1cnZleVN0cmluZ3MudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2dsb2JhbF92YXJpYWJsZXNfdXRpbHMgKi8gXCIuL3NyYy9nbG9iYWxfdmFyaWFibGVzX3V0aWxzLnRzXCIpO1xuXG5cblxuXG5mdW5jdGlvbiBjb21wYXJlVmVyc2lvbnMoYSwgYikge1xuICAgIHZhciByZWdFeFN0cmlwMCA9IC8oXFwuMCspKyQvO1xuICAgIHZhciBzZWdtZW50c0EgPSBhLnJlcGxhY2UocmVnRXhTdHJpcDAsIFwiXCIpLnNwbGl0KFwiLlwiKTtcbiAgICB2YXIgc2VnbWVudHNCID0gYi5yZXBsYWNlKHJlZ0V4U3RyaXAwLCBcIlwiKS5zcGxpdChcIi5cIik7XG4gICAgdmFyIGxlbiA9IE1hdGgubWluKHNlZ21lbnRzQS5sZW5ndGgsIHNlZ21lbnRzQi5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGRpZmYgPSBwYXJzZUludChzZWdtZW50c0FbaV0sIDEwKSAtIHBhcnNlSW50KHNlZ21lbnRzQltpXSwgMTApO1xuICAgICAgICBpZiAoZGlmZikge1xuICAgICAgICAgICAgcmV0dXJuIGRpZmY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlZ21lbnRzQS5sZW5ndGggLSBzZWdtZW50c0IubGVuZ3RoO1xufVxuZnVuY3Rpb24gY29uZmlybUFjdGlvbihtZXNzYWdlKSB7XG4gICAgaWYgKCEhX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXSAmJiAhIV9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic2V0dGluZ3NcIl0uY29uZmlybUFjdGlvbkZ1bmMpXG4gICAgICAgIHJldHVybiBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInNldHRpbmdzXCJdLmNvbmZpcm1BY3Rpb25GdW5jKG1lc3NhZ2UpO1xuICAgIHJldHVybiBjb25maXJtKG1lc3NhZ2UpO1xufVxuZnVuY3Rpb24gY29uZmlybUFjdGlvbkFzeW5jKG1lc3NhZ2UsIGZ1bmNPblllcywgZnVuY09uTm8sIGxvY2FsZSwgcm9vdEVsZW1lbnQpIHtcbiAgICB2YXIgY2FsbGJhY2tGdW5jID0gZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBpZiAocmVzKVxuICAgICAgICAgICAgZnVuY09uWWVzKCk7XG4gICAgICAgIGVsc2UgaWYgKCEhZnVuY09uTm8pXG4gICAgICAgICAgICBmdW5jT25ObygpO1xuICAgIH07XG4gICAgaWYgKCEhX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXSAmJiAhIV9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic2V0dGluZ3NcIl0uY29uZmlybUFjdGlvbkFzeW5jKSB7XG4gICAgICAgIGlmIChfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInNldHRpbmdzXCJdLmNvbmZpcm1BY3Rpb25Bc3luYyhtZXNzYWdlLCBjYWxsYmFja0Z1bmMsIHVuZGVmaW5lZCwgbG9jYWxlLCByb290RWxlbWVudCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxiYWNrRnVuYyhjb25maXJtQWN0aW9uKG1lc3NhZ2UpKTtcbn1cbmZ1bmN0aW9uIGRldGVjdElFQnJvd3NlcigpIHtcbiAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIHZhciBvbGRJZSA9IHVhLmluZGV4T2YoXCJNU0lFIFwiKTtcbiAgICB2YXIgZWxldmVuSWUgPSB1YS5pbmRleE9mKFwiVHJpZGVudC9cIik7XG4gICAgcmV0dXJuIG9sZEllID4gLTEgfHwgZWxldmVuSWUgPiAtMTtcbn1cbmZ1bmN0aW9uIGRldGVjdElFT3JFZGdlKCkge1xuICAgIGlmICh0eXBlb2YgZGV0ZWN0SUVPckVkZ2UuaXNJRU9yRWRnZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICB2YXIgbXNpZSA9IHVhLmluZGV4T2YoXCJNU0lFIFwiKTtcbiAgICAgICAgdmFyIHRyaWRlbnQgPSB1YS5pbmRleE9mKFwiVHJpZGVudC9cIik7XG4gICAgICAgIHZhciBlZGdlID0gdWEuaW5kZXhPZihcIkVkZ2UvXCIpO1xuICAgICAgICBkZXRlY3RJRU9yRWRnZS5pc0lFT3JFZGdlID0gZWRnZSA+IDAgfHwgdHJpZGVudCA+IDAgfHwgbXNpZSA+IDA7XG4gICAgfVxuICAgIHJldHVybiBkZXRlY3RJRU9yRWRnZS5pc0lFT3JFZGdlO1xufVxuZnVuY3Rpb24gbG9hZEZpbGVGcm9tQmFzZTY0KGI2NERhdGEsIGZpbGVOYW1lKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIGJ5dGVTdHJpbmcgPSBhdG9iKGI2NERhdGEuc3BsaXQoXCIsXCIpWzFdKTtcbiAgICAgICAgLy8gc2VwYXJhdGUgb3V0IHRoZSBtaW1lIGNvbXBvbmVudFxuICAgICAgICB2YXIgbWltZVN0cmluZyA9IGI2NERhdGFcbiAgICAgICAgICAgIC5zcGxpdChcIixcIilbMF1cbiAgICAgICAgICAgIC5zcGxpdChcIjpcIilbMV1cbiAgICAgICAgICAgIC5zcGxpdChcIjtcIilbMF07XG4gICAgICAgIC8vIHdyaXRlIHRoZSBieXRlcyBvZiB0aGUgc3RyaW5nIHRvIGFuIEFycmF5QnVmZmVyXG4gICAgICAgIHZhciBhYiA9IG5ldyBBcnJheUJ1ZmZlcihieXRlU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgIHZhciBpYSA9IG5ldyBVaW50OEFycmF5KGFiKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlU3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpYVtpXSA9IGJ5dGVTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3cml0ZSB0aGUgQXJyYXlCdWZmZXIgdG8gYSBibG9iLCBhbmQgeW91J3JlIGRvbmVcbiAgICAgICAgdmFyIGJiID0gbmV3IEJsb2IoW2FiXSwgeyB0eXBlOiBtaW1lU3RyaW5nIH0pO1xuICAgICAgICBpZiAoISFuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yW1wibXNTYXZlQmxvYlwiXSkge1xuICAgICAgICAgICAgbmF2aWdhdG9yW1wibXNTYXZlT3JPcGVuQmxvYlwiXShiYiwgZmlsZU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHsgfVxufVxuZnVuY3Rpb24gaXNNb2JpbGUoKSB7XG4gICAgcmV0dXJuIChfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiRG9tV2luZG93SGVscGVyXCJdLmlzQXZhaWxhYmxlKCkgJiYgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIkRvbVdpbmRvd0hlbHBlclwiXS5oYXNPd24oXCJvcmllbnRhdGlvblwiKSk7XG59XG52YXIgaXNTaGFkb3dET00gPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcbiAgICByZXR1cm4gISFyb290RWxlbWVudCAmJiAhIShcImhvc3RcIiBpbiByb290RWxlbWVudCAmJiByb290RWxlbWVudC5ob3N0KTtcbn07XG52YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdmFyIHJvb3QgPSBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInNldHRpbmdzXCJdLmVudmlyb25tZW50LnJvb3Q7XG4gICAgcmV0dXJuIHR5cGVvZiBlbGVtZW50ID09PSBcInN0cmluZ1wiID8gcm9vdC5nZXRFbGVtZW50QnlJZChlbGVtZW50KSA6IGVsZW1lbnQ7XG59O1xuZnVuY3Rpb24gaXNFbGVtZW50VmlzaWJsZShlbGVtZW50LCB0aHJlc2hvbGQpIHtcbiAgICBpZiAodGhyZXNob2xkID09PSB2b2lkIDApIHsgdGhyZXNob2xkID0gMDsgfVxuICAgIGlmICh0eXBlb2YgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXS5lbnZpcm9ubWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciByb290ID0gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXS5lbnZpcm9ubWVudC5yb290O1xuICAgIHZhciBjbGllbnRIZWlnaHQgPSBpc1NoYWRvd0RPTShyb290KVxuICAgICAgICA/IHJvb3QuaG9zdC5jbGllbnRIZWlnaHRcbiAgICAgICAgOiByb290LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgdmFyIGVsZW1lbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgdmlld0hlaWdodCA9IE1hdGgubWF4KGNsaWVudEhlaWdodCwgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIkRvbVdpbmRvd0hlbHBlclwiXS5nZXRJbm5lckhlaWdodCgpKTtcbiAgICB2YXIgdG9wV2luID0gLXRocmVzaG9sZDtcbiAgICB2YXIgYm90dG9tV2luID0gdmlld0hlaWdodCArIHRocmVzaG9sZDtcbiAgICB2YXIgdG9wRWwgPSBlbGVtZW50UmVjdC50b3A7XG4gICAgdmFyIGJvdHRvbUVsID0gZWxlbWVudFJlY3QuYm90dG9tO1xuICAgIHZhciBtYXhUb3AgPSBNYXRoLm1heCh0b3BXaW4sIHRvcEVsKTtcbiAgICB2YXIgbWluQm90dG9tID0gTWF0aC5taW4oYm90dG9tV2luLCBib3R0b21FbCk7XG4gICAgcmV0dXJuIG1heFRvcCA8PSBtaW5Cb3R0b207XG59XG5mdW5jdGlvbiBmaW5kU2Nyb2xsYWJsZVBhcmVudChlbGVtZW50KSB7XG4gICAgdmFyIHJvb3QgPSBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInNldHRpbmdzXCJdLmVudmlyb25tZW50LnJvb3Q7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBpc1NoYWRvd0RPTShyb290KVxuICAgICAgICAgICAgPyByb290Lmhvc3RcbiAgICAgICAgICAgIDogcm9vdC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LnNjcm9sbEhlaWdodCA+IGVsZW1lbnQuY2xpZW50SGVpZ2h0ICYmXG4gICAgICAgIChnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLm92ZXJmbG93WSA9PT0gXCJzY3JvbGxcIiB8fFxuICAgICAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5vdmVyZmxvd1kgPT09IFwiYXV0b1wiKSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQuc2Nyb2xsV2lkdGggPiBlbGVtZW50LmNsaWVudFdpZHRoICYmXG4gICAgICAgIChnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLm92ZXJmbG93WCA9PT0gXCJzY3JvbGxcIiB8fFxuICAgICAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5vdmVyZmxvd1ggPT09IFwiYXV0b1wiKSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIGZpbmRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQucGFyZW50RWxlbWVudCk7XG59XG5mdW5jdGlvbiBzY3JvbGxFbGVtZW50QnlDaGlsZElkKGlkKSB7XG4gICAgdmFyIGVudmlyb25tZW50ID0gX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJzZXR0aW5nc1wiXS5lbnZpcm9ubWVudDtcbiAgICBpZiAoIWVudmlyb25tZW50KVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIHJvb3QgPSBlbnZpcm9ubWVudC5yb290O1xuICAgIHZhciBlbCA9IHJvb3QuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGlmICghZWwpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgc2Nyb2xsYWJsZUVsID0gZmluZFNjcm9sbGFibGVQYXJlbnQoZWwpO1xuICAgIGlmICghIXNjcm9sbGFibGVFbCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNjcm9sbGFibGVFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInNjcm9sbFwiKSk7IH0sIDEwKTtcbiAgICB9XG59XG5mdW5jdGlvbiBuYXZpZ2F0ZVRvVXJsKHVybCkge1xuICAgIHZhciBsb2NhdGlvbiA9IF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJEb21XaW5kb3dIZWxwZXJcIl0uZ2V0TG9jYXRpb24oKTtcbiAgICBpZiAoIXVybCB8fCAhbG9jYXRpb24pXG4gICAgICAgIHJldHVybjtcbiAgICBsb2NhdGlvbi5ocmVmID0gdXJsO1xufVxuZnVuY3Rpb24gd3JhcFVybEZvckJhY2tncm91bmRJbWFnZSh1cmwpIHtcbiAgICByZXR1cm4gISF1cmwgPyBbXCJ1cmwoXCIsIHVybCwgXCIpXCJdLmpvaW4oXCJcIikgOiBcIlwiO1xufVxuZnVuY3Rpb24gZ2V0SWNvbk5hbWVGcm9tUHJveHkoaWNvbk5hbWUpIHtcbiAgICBpZiAoIWljb25OYW1lKVxuICAgICAgICByZXR1cm4gaWNvbk5hbWU7XG4gICAgdmFyIHByb3h5TmFtZSA9IF9zZXR0aW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wic2V0dGluZ3NcIl0uY3VzdG9tSWNvbnNbaWNvbk5hbWVdO1xuICAgIHJldHVybiAhIXByb3h5TmFtZSA/IHByb3h5TmFtZSA6IGljb25OYW1lO1xufVxuZnVuY3Rpb24gY3JlYXRlU3ZnKHNpemUsIHdpZHRoLCBoZWlnaHQsIGljb25OYW1lLCBzdmdFbGVtLCB0aXRsZSkge1xuICAgIGlmICghc3ZnRWxlbSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChzaXplICE9PSBcImF1dG9cIikge1xuICAgICAgICBzdmdFbGVtLnN0eWxlLndpZHRoID0gKHNpemUgfHwgd2lkdGggfHwgMTYpICsgXCJweFwiO1xuICAgICAgICBzdmdFbGVtLnN0eWxlLmhlaWdodCA9IChzaXplIHx8IGhlaWdodCB8fCAxNikgKyBcInB4XCI7XG4gICAgfVxuICAgIHZhciBub2RlID0gc3ZnRWxlbS5jaGlsZE5vZGVzWzBdO1xuICAgIHZhciByZWFsSWNvbk5hbWUgPSBnZXRJY29uTmFtZUZyb21Qcm94eShpY29uTmFtZSk7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiwgXCJ4bGluazpocmVmXCIsIFwiI1wiICsgcmVhbEljb25OYW1lKTtcbiAgICB2YXIgdGl0bGVFbGVtZW50ID0gc3ZnRWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRpdGxlXCIpWzBdO1xuICAgIGlmICghdGl0bGUpIHtcbiAgICAgICAgaWYgKCEhdGl0bGVFbGVtZW50KSB7XG4gICAgICAgICAgICBzdmdFbGVtLnJlbW92ZUNoaWxkKHRpdGxlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCF0aXRsZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRpdGxlRWxlbWVudCA9IF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJEb21Eb2N1bWVudEhlbHBlclwiXS5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwidGl0bGVcIik7XG4gICAgICAgICAgICBzdmdFbGVtLmFwcGVuZENoaWxkKHRpdGxlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XG59XG5mdW5jdGlvbiB1bndyYXAodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlKCk7XG4gICAgfVxufVxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdldFNpemUodmFsdWU6IGFueSk6IG51bWJlciB7XG4vLyAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbi8vICAgICByZXR1cm4gdmFsdWU7XG4vLyAgIH1cbi8vICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZS5pbmNsdWRlcyhcInB4XCIpKSB7XG4vLyAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlKTtcbi8vICAgfVxuLy8gICBpZiAoISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xuLy8gICAgIGNvbnN0IGxhc3RTeW1ib2w6IHN0cmluZyA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdO1xuLy8gICAgIGlmICgobGFzdFN5bWJvbCA+PSBcIjBcIiAmJiBsYXN0U3ltYm9sIDw9IFwiOVwiKSB8fCBsYXN0U3ltYm9sID09IFwiLlwiKSB7XG4vLyAgICAgICB0cnkge1xuLy8gICAgICAgICBjb25zdCBudW06IG51bWJlciA9IHBhcnNlSW50KHZhbHVlKTtcbi8vICAgICAgICAgcmV0dXJuIG51bTtcbi8vICAgICAgIH0gY2F0Y2ggeyB9XG4vLyAgICAgfVxuLy8gICB9XG4vLyAgIHJldHVybiB2YWx1ZTtcbi8vIH1cbmZ1bmN0aW9uIGdldFJlbmRlcmVkU2l6ZSh2YWwpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHZhbCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsLmluY2x1ZGVzKFwicHhcIikpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWwgPT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gZ2V0UmVuZGVyZWRTdHlsZVNpemUodmFsKSB7XG4gICAgaWYgKGdldFJlbmRlcmVkU2l6ZSh2YWwpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cbnZhciBrZXlGb2N1c2VkQ2xhc3NOYW1lID0gXCJzdi1mb2N1c2VkLS1ieS1rZXlcIjtcbmZ1bmN0aW9uIGRvS2V5MkNsaWNrQmx1cihldnQpIHtcbiAgICB2YXIgZWxlbWVudCA9IGV2dC50YXJnZXQ7XG4gICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50LmNsYXNzTGlzdClcbiAgICAgICAgcmV0dXJuO1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShrZXlGb2N1c2VkQ2xhc3NOYW1lKTtcbn1cbmZ1bmN0aW9uIGRvS2V5MkNsaWNrVXAoZXZ0LCBvcHRpb25zKSB7XG4gICAgaWYgKCEhZXZ0LnRhcmdldCAmJiBldnQudGFyZ2V0W1wiY29udGVudEVkaXRhYmxlXCJdID09PSBcInRydWVcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBlbGVtZW50ID0gZXZ0LnRhcmdldDtcbiAgICBpZiAoIWVsZW1lbnQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgY2hhciA9IGV2dC53aGljaCB8fCBldnQua2V5Q29kZTtcbiAgICBpZiAoY2hhciA9PT0gOSkge1xuICAgICAgICBpZiAoISFlbGVtZW50LmNsYXNzTGlzdCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoa2V5Rm9jdXNlZENsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChrZXlGb2N1c2VkQ2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5fX2tleURvd25SZWNlaXZlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb3B0aW9ucy5fX2tleURvd25SZWNlaXZlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoY2hhciA9PT0gMTMgfHwgY2hhciA9PT0gMzIpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuY2xpY2spXG4gICAgICAgICAgICBlbGVtZW50LmNsaWNrKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCghb3B0aW9ucyB8fCBvcHRpb25zLnByb2Nlc3NFc2MpICYmIGNoYXIgPT09IDI3KSB7XG4gICAgICAgIGlmIChlbGVtZW50LmJsdXIpXG4gICAgICAgICAgICBlbGVtZW50LmJsdXIoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkb0tleTJDbGlja0Rvd24oZXZ0LCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0geyBwcm9jZXNzRXNjOiB0cnVlIH07IH1cbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgb3B0aW9ucy5fX2tleURvd25SZWNlaXZlZCA9IHRydWU7XG4gICAgaWYgKCEhZXZ0LnRhcmdldCAmJiBldnQudGFyZ2V0W1wiY29udGVudEVkaXRhYmxlXCJdID09PSBcInRydWVcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjaGFyID0gZXZ0LndoaWNoIHx8IGV2dC5rZXlDb2RlO1xuICAgIHZhciBzdXBwb3J0ZWRDb2RlcyA9IFsxMywgMzJdO1xuICAgIGlmIChvcHRpb25zLnByb2Nlc3NFc2MpIHtcbiAgICAgICAgc3VwcG9ydGVkQ29kZXMucHVzaCgyNyk7XG4gICAgfVxuICAgIGlmIChzdXBwb3J0ZWRDb2Rlcy5pbmRleE9mKGNoYXIpICE9PSAtMSkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbmNyZWFzZUhlaWdodEJ5Q29udGVudChlbGVtZW50LCBnZXRDb21wdXRlZFN0eWxlKSB7XG4gICAgaWYgKCFlbGVtZW50KVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKCFnZXRDb21wdXRlZFN0eWxlKVxuICAgICAgICBnZXRDb21wdXRlZFN0eWxlID0gZnVuY3Rpb24gKGVsdCkgeyByZXR1cm4gX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIkRvbURvY3VtZW50SGVscGVyXCJdLmdldENvbXB1dGVkU3R5bGUoZWx0KTsgfTtcbiAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCI7XG4gICAgaWYgKCEhZWxlbWVudC5zY3JvbGxIZWlnaHQpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAoZWxlbWVudC5zY3JvbGxIZWlnaHQgKyBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKSArIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpKSArIFwicHhcIjtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRPcmlnaW5hbEV2ZW50KGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50Lm9yaWdpbmFsRXZlbnQgfHwgZXZlbnQ7XG59XG5mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdHMoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuZnVuY3Rpb24gY2xhc3Nlc1RvU2VsZWN0b3Ioc3RyKSB7XG4gICAgdmFyIHJlID0gL1xccyo/KFtcXHctXSspXFxzKj8vZztcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UocmUsIFwiLiQxXCIpO1xufVxuZnVuY3Rpb24gZ2V0RWxlbWVudFdpZHRoKGVsKSB7XG4gICAgcmV0dXJuICEhZ2V0Q29tcHV0ZWRTdHlsZSA/IE51bWJlci5wYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoZWwpLndpZHRoKSA6IGVsLm9mZnNldFdpZHRoO1xufVxuZnVuY3Rpb24gaXNDb250YWluZXJWaXNpYmxlKGVsKSB7XG4gICAgcmV0dXJuICEhKGVsLm9mZnNldFdpZHRoIHx8XG4gICAgICAgIGVsLm9mZnNldEhlaWdodCB8fFxuICAgICAgICBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG59XG5mdW5jdGlvbiBnZXRGaXJzdFZpc2libGVDaGlsZChlbCkge1xuICAgIHZhciByZXN1bHQ7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGVsLmNoaWxkcmVuLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBpZiAoIXJlc3VsdCAmJiBnZXRDb21wdXRlZFN0eWxlKGVsLmNoaWxkcmVuW2luZGV4XSkuZGlzcGxheSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGVsLmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZmluZFBhcmVudEJ5Q2xhc3NOYW1lcyhlbGVtZW50LCBjbGFzc05hbWVzKSB7XG4gICAgaWYgKCEhZWxlbWVudCkge1xuICAgICAgICBpZiAoY2xhc3NOYW1lcy5ldmVyeShmdW5jdGlvbiAoY2xhc3NOYW1lKSB7IHJldHVybiAhY2xhc3NOYW1lIHx8IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7IH0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaW5kUGFyZW50QnlDbGFzc05hbWVzKGVsZW1lbnQucGFyZW50RWxlbWVudCwgY2xhc3NOYW1lcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzYW5pdGl6ZUVkaXRhYmxlQ29udGVudChlbGVtZW50LCBjbGVhbkxpbmVCcmVha3MpIHtcbiAgICBpZiAoY2xlYW5MaW5lQnJlYWtzID09PSB2b2lkIDApIHsgY2xlYW5MaW5lQnJlYWtzID0gdHJ1ZTsgfVxuICAgIGlmIChfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiRG9tV2luZG93SGVscGVyXCJdLmlzQXZhaWxhYmxlKCkgJiYgX2dsb2JhbF92YXJpYWJsZXNfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcIkRvbURvY3VtZW50SGVscGVyXCJdLmlzQXZhaWxhYmxlKCkgJiYgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IF9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJEb21XaW5kb3dIZWxwZXJcIl0uZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZWxlY3Rpb24ucmFuZ2VDb3VudCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XG4gICAgICAgIHJhbmdlLnNldFN0YXJ0KHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0KTtcbiAgICAgICAgcmFuZ2Uuc2V0RW5kQWZ0ZXIoZWxlbWVudC5sYXN0Q2hpbGQpO1xuICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgIHZhciB0YWlsID0gc2VsZWN0aW9uLnRvU3RyaW5nKCk7XG4gICAgICAgIHZhciBpbm5lclRleHQgPSBlbGVtZW50LmlubmVyVGV4dDtcbiAgICAgICAgdGFpbCA9IHRhaWwucmVwbGFjZSgvXFxyL2csIFwiXCIpO1xuICAgICAgICBpZiAoY2xlYW5MaW5lQnJlYWtzKSB7XG4gICAgICAgICAgICB0YWlsID0gdGFpbC5yZXBsYWNlKC9cXG4vZywgXCJcIik7XG4gICAgICAgICAgICBpbm5lclRleHQgPSBpbm5lclRleHQucmVwbGFjZSgvXFxuL2csIFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0YWlsX2xlbiA9IHRhaWwubGVuZ3RoO1xuICAgICAgICBlbGVtZW50LmlubmVyVGV4dCA9IGlubmVyVGV4dDtcbiAgICAgICAgcmFuZ2UgPSBfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiRG9tRG9jdW1lbnRIZWxwZXJcIl0uZ2V0RG9jdW1lbnQoKS5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByYW5nZS5zZXRTdGFydChlbGVtZW50LmZpcnN0Q2hpbGQsIDApO1xuICAgICAgICByYW5nZS5zZXRFbmQoZWxlbWVudC5maXJzdENoaWxkLCAwKTtcbiAgICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgICB3aGlsZSAoc2VsZWN0aW9uLnRvU3RyaW5nKCkubGVuZ3RoIDwgaW5uZXJUZXh0Lmxlbmd0aCAtIHRhaWxfbGVuKSB7XG4gICAgICAgICAgICB2YXIgc2VsTGVuID0gc2VsZWN0aW9uLnRvU3RyaW5nKCkubGVuZ3RoO1xuICAgICAgICAgICAgc2VsZWN0aW9uLm1vZGlmeShcImV4dGVuZFwiLCBcImZvcndhcmRcIiwgXCJjaGFyYWN0ZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uLnRvU3RyaW5nKCkubGVuZ3RoID09IHNlbExlbilcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuICAgICAgICByYW5nZS5zZXRTdGFydChyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7XG4gICAgfVxufVxuZnVuY3Rpb24gbWVyZ2VWYWx1ZXMoc3JjLCBkZXN0KSB7XG4gICAgaWYgKCFkZXN0IHx8ICFzcmMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAodHlwZW9mIGRlc3QgIT09IFwib2JqZWN0XCIpXG4gICAgICAgIHJldHVybjtcbiAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHNyY1trZXldO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgaWYgKCFkZXN0W2tleV0gfHwgdHlwZW9mIGRlc3Rba2V5XSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICBkZXN0W2tleV0gPSB7fTtcbiAgICAgICAgICAgIG1lcmdlVmFsdWVzKHZhbHVlLCBkZXN0W2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdFtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG52YXIgTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExvZ2dlcigpIHtcbiAgICAgICAgdGhpcy5fcmVzdWx0ID0gXCJcIjtcbiAgICB9XG4gICAgTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jlc3VsdCArPSBcIi0+XCIgKyBhY3Rpb247XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9nZ2VyLnByb3RvdHlwZSwgXCJyZXN1bHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gTG9nZ2VyO1xufSgpKTtcblxuZnVuY3Rpb24gc2hvd0NvbmZpcm1EaWFsb2cobWVzc2FnZSwgY2FsbGJhY2ssIGFwcGx5VGl0bGUsIGxvY2FsZSwgcm9vdEVsZW1lbnQpIHtcbiAgICB2YXIgbG9jU3RyID0gbmV3IF9sb2NhbGl6YWJsZXN0cmluZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiTG9jYWxpemFibGVTdHJpbmdcIl0odW5kZWZpbmVkKTtcbiAgICB2YXIgcG9wdXBWaWV3TW9kZWwgPSBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInNldHRpbmdzXCJdLnNob3dEaWFsb2coe1xuICAgICAgICBjb21wb25lbnROYW1lOiBcInN2LXN0cmluZy12aWV3ZXJcIixcbiAgICAgICAgZGF0YTogeyBsb2NTdHI6IGxvY1N0ciwgbG9jU3RyaW5nOiBsb2NTdHIsIG1vZGVsOiBsb2NTdHIgfSxcbiAgICAgICAgb25BcHBseTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgdGl0bGU6IG1lc3NhZ2UsXG4gICAgICAgIGRpc3BsYXlNb2RlOiBcInBvcHVwXCIsXG4gICAgICAgIGlzRm9jdXNlZENvbnRlbnQ6IGZhbHNlLFxuICAgICAgICBjc3NDbGFzczogXCJzdi1wb3B1cC0tY29uZmlybS1kZWxldGVcIlxuICAgIH0sIHJvb3RFbGVtZW50KTtcbiAgICB2YXIgdG9vbGJhciA9IHBvcHVwVmlld01vZGVsLmZvb3RlclRvb2xiYXI7XG4gICAgdmFyIGFwcGx5QnRuID0gdG9vbGJhci5nZXRBY3Rpb25CeUlkKFwiYXBwbHlcIik7XG4gICAgdmFyIGNhbmNlbEJ0biA9IHRvb2xiYXIuZ2V0QWN0aW9uQnlJZChcImNhbmNlbFwiKTtcbiAgICBjYW5jZWxCdG4udGl0bGUgPSBfc3VydmV5U3RyaW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic3VydmV5TG9jYWxpemF0aW9uXCJdLmdldFN0cmluZyhcImNhbmNlbFwiLCBsb2NhbGUpO1xuICAgIGNhbmNlbEJ0bi5pbm5lckNzcyA9IFwic3YtcG9wdXBfX2JvZHktZm9vdGVyLWl0ZW0gc3YtcG9wdXBfX2J1dHRvbiBzZC1idG4gc2QtYnRuLS1zbWFsbFwiO1xuICAgIGFwcGx5QnRuLnRpdGxlID0gYXBwbHlUaXRsZSB8fCBfc3VydmV5U3RyaW5nc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic3VydmV5TG9jYWxpemF0aW9uXCJdLmdldFN0cmluZyhcIm9rXCIsIGxvY2FsZSk7XG4gICAgYXBwbHlCdG4uaW5uZXJDc3MgPSBcInN2LXBvcHVwX19ib2R5LWZvb3Rlci1pdGVtIHN2LXBvcHVwX19idXR0b24gc3YtcG9wdXBfX2J1dHRvbi0tZGFuZ2VyIHNkLWJ0biBzZC1idG4tLXNtYWxsIHNkLWJ0bi0tZGFuZ2VyXCI7XG4gICAgY29uZmlnQ29uZmlybURpYWxvZyhwb3B1cFZpZXdNb2RlbCk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBjb25maWdDb25maXJtRGlhbG9nKHBvcHVwVmlld01vZGVsKSB7XG4gICAgcG9wdXBWaWV3TW9kZWwud2lkdGggPSBcIm1pbi1jb250ZW50XCI7XG59XG5mdW5jdGlvbiBjaG9vc2VGaWxlcyhpbnB1dCwgY2FsbGJhY2spIHtcbiAgICBpZiAoIV9nbG9iYWxfdmFyaWFibGVzX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJEb21XaW5kb3dIZWxwZXJcIl0uaXNGaWxlUmVhZGVyQXZhaWxhYmxlKCkpXG4gICAgICAgIHJldHVybjtcbiAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgaW5wdXQub25jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFfZ2xvYmFsX3ZhcmlhYmxlc191dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiRG9tV2luZG93SGVscGVyXCJdLmlzRmlsZVJlYWRlckF2YWlsYWJsZSgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIWlucHV0IHx8ICFpbnB1dC5maWxlcyB8fCBpbnB1dC5maWxlcy5sZW5ndGggPCAxKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgZmlsZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZmlsZXMucHVzaChpbnB1dC5maWxlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soZmlsZXMpO1xuICAgIH07XG4gICAgaW5wdXQuY2xpY2soKTtcbn1cblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcInJlYWN0XCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiBleHRlcm5hbCB7XCJyb290XCI6XCJSZWFjdFwiLFwiY29tbW9uanMyXCI6XCJyZWFjdFwiLFwiY29tbW9uanNcIjpcInJlYWN0XCIsXCJhbWRcIjpcInJlYWN0XCJ9ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcmVhY3RfXztcblxuLyoqKi8gfSksXG5cbi8qKiovIFwicmVhY3QtZG9tXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiBleHRlcm5hbCB7XCJyb290XCI6XCJSZWFjdERPTVwiLFwiY29tbW9uanMyXCI6XCJyZWFjdC1kb21cIixcImNvbW1vbmpzXCI6XCJyZWFjdC1kb21cIixcImFtZFwiOlwicmVhY3QtZG9tXCJ9ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcmVhY3RfZG9tX187XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcInN1cnZleS1jb3JlXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogZXh0ZXJuYWwge1wicm9vdFwiOlwiU3VydmV5XCIsXCJjb21tb25qczJcIjpcInN1cnZleS1jb3JlXCIsXCJjb21tb25qc1wiOlwic3VydmV5LWNvcmVcIixcImFtZFwiOlwic3VydmV5LWNvcmVcIn0gKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfc3VydmV5X2NvcmVfXztcblxuLyoqKi8gfSlcblxuLyoqKioqKi8gfSk7XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1cnZleS1yZWFjdC11aS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/survey-react-ui/survey-react-ui.js\n");

/***/ })

};
;